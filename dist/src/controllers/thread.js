// @bun
var ws=Object.create;var{defineProperty:tz,getPrototypeOf:Rs,getOwnPropertyNames:Ms}=Object;var Bs=Object.prototype.hasOwnProperty;var pN=(Z,Y,X)=>{X=Z!=null?ws(Rs(Z)):{};const J=Y||!Z||!Z.__esModule?tz(X,"default",{value:Z,enumerable:!0}):X;for(let $ of Ms(Z))if(!Bs.call(J,$))tz(J,$,{get:()=>Z[$],enumerable:!0});return J};var w=(Z,Y)=>()=>(Y||Z((Y={exports:{}}).exports,Y),Y.exports);var g=(Z)=>{return import.meta.require(Z)};var s$=(Z,Y)=>{for(var X in Y)tz(Z,X,{get:Y[X],enumerable:!0,configurable:!0,set:(J)=>Y[X]=()=>J})};var r$=w((Ns,oz)=>{/*!
 * ignore
 */var iN=null;Ns.get=function(){return iN};Ns.set=function(Z){iN=Z}});var S6=w((Br)=>{var AH=function(Z){return["[object ArrayBuffer]","[object SharedArrayBuffer]"].includes(Object.prototype.toString.call(Z))},Z9=function(Z){return Object.prototype.toString.call(Z)==="[object Uint8Array]"},gZ=function(Z){return Object.prototype.toString.call(Z)==="[object RegExp]"},DH=function(Z){return Object.prototype.toString.call(Z)==="[object Map]"},bZ=function(Z){return Object.prototype.toString.call(Z)==="[object Date]"},z6=function(Z,Y){return JSON.stringify(Z,(X,J)=>{if(typeof J==="bigint")return{$numberLong:`${J}`};else if(DH(J))return Object.fromEntries(J);return J})},Ps=function(Z){if(Z!=null&&typeof Z==="object"&&("stylize"in Z)&&typeof Z.stylize==="function")return Z.stylize},Es=function(Z){return n4.fromNumberArray(Array.from({length:Z},()=>Math.floor(Math.random()*256)))},Os=function(){const{navigator:Z}=globalThis;return typeof Z==="object"&&Z.product==="ReactNative"},Ss=function(Z){if(Z<0)throw new RangeError(`The argument 'byteLength' is invalid. Received ${Z}`);return mZ.fromNumberArray(Array.from({length:Z},()=>Math.floor(Math.random()*256)))},PA=function(Z){return Z!=null&&typeof Z==="object"&&("$id"in Z)&&Z.$id!=null&&("$ref"in Z)&&typeof Z.$ref==="string"&&(!("$db"in Z)||("$db"in Z)&&typeof Z.$db==="string")},JA=function(Z){return!isNaN(parseInt(Z,10))},ps=function(Z){const Y=T.fromNumber(1e9);let X=T.fromNumber(0);if(!Z.parts[0]&&!Z.parts[1]&&!Z.parts[2]&&!Z.parts[3])return{quotient:Z,rem:X};for(let J=0;J<=3;J++)X=X.shiftLeft(32),X=X.add(new T(Z.parts[J],0)),Z.parts[J]=X.div(Y).low,X=X.modulo(Y);return{quotient:Z,rem:X}},is=function(Z,Y){if(!Z&&!Y)return{high:T.fromNumber(0),low:T.fromNumber(0)};const X=Z.shiftRightUnsigned(32),J=new T(Z.getLowBits(),0),$=Y.shiftRightUnsigned(32),W=new T(Y.getLowBits(),0);let G=X.multiply($),K=X.multiply(W);const Q=J.multiply($);let z=J.multiply(W);return G=G.add(K.shiftRightUnsigned(32)),K=new T(K.getLowBits(),0).add(Q).add(z.shiftRightUnsigned(32)),G=G.add(K.shiftRightUnsigned(32)),z=K.shiftLeft(32).add(new T(z.getLowBits(),0)),{high:G,low:z}},ns=function(Z,Y){const X=Z.high>>>0,J=Y.high>>>0;if(X<J)return!0;else if(X===J){const $=Z.low>>>0,W=Y.low>>>0;if($<W)return!0}return!1},W7=function(Z,Y){throw new u(`"${Z}" is not a valid Decimal128 string - ${Y}`)},o$=function(Z,Y,X){let J=5;if(Array.isArray(Z))for(let $=0;$<Z.length;$++)J+=$A($.toString(),Z[$],Y,!0,X);else{if(typeof Z?.toBSON==="function")Z=Z.toBSON();for(let $ of Object.keys(Z))J+=$A($,Z[$],Y,!1,X)}return J},$A=function(Z,Y,X=!1,J=!1,$=!1){if(typeof Y?.toBSON==="function")Y=Y.toBSON();switch(typeof Y){case"string":return 1+_.utf8ByteLength(Z)+1+4+_.utf8ByteLength(Y)+1;case"number":if(Math.floor(Y)===Y&&Y>=HA&&Y<=zA)if(Y>=GW&&Y<=WW)return(Z!=null?_.utf8ByteLength(Z)+1:0)+5;else return(Z!=null?_.utf8ByteLength(Z)+1:0)+9;else return(Z!=null?_.utf8ByteLength(Z)+1:0)+9;case"undefined":if(J||!$)return(Z!=null?_.utf8ByteLength(Z)+1:0)+1;return 0;case"boolean":return(Z!=null?_.utf8ByteLength(Z)+1:0)+2;case"object":if(Y!=null&&typeof Y._bsontype==="string"&&Y[Symbol.for("@@mdb.bson.version")]!==Y9)throw new s4;else if(Y==null||Y._bsontype==="MinKey"||Y._bsontype==="MaxKey")return(Z!=null?_.utf8ByteLength(Z)+1:0)+1;else if(Y._bsontype==="ObjectId")return(Z!=null?_.utf8ByteLength(Z)+1:0)+13;else if(Y instanceof Date||bZ(Y))return(Z!=null?_.utf8ByteLength(Z)+1:0)+9;else if(ArrayBuffer.isView(Y)||Y instanceof ArrayBuffer||AH(Y))return(Z!=null?_.utf8ByteLength(Z)+1:0)+6+Y.byteLength;else if(Y._bsontype==="Long"||Y._bsontype==="Double"||Y._bsontype==="Timestamp")return(Z!=null?_.utf8ByteLength(Z)+1:0)+9;else if(Y._bsontype==="Decimal128")return(Z!=null?_.utf8ByteLength(Z)+1:0)+17;else if(Y._bsontype==="Code")if(Y.scope!=null&&Object.keys(Y.scope).length>0)return(Z!=null?_.utf8ByteLength(Z)+1:0)+1+4+4+_.utf8ByteLength(Y.code.toString())+1+o$(Y.scope,X,$);else return(Z!=null?_.utf8ByteLength(Z)+1:0)+1+4+_.utf8ByteLength(Y.code.toString())+1;else if(Y._bsontype==="Binary"){const W=Y;if(W.sub_type===C1.SUBTYPE_BYTE_ARRAY)return(Z!=null?_.utf8ByteLength(Z)+1:0)+(W.position+1+4+1+4);else return(Z!=null?_.utf8ByteLength(Z)+1:0)+(W.position+1+4+1)}else if(Y._bsontype==="Symbol")return(Z!=null?_.utf8ByteLength(Z)+1:0)+_.utf8ByteLength(Y.value)+4+1+1;else if(Y._bsontype==="DBRef"){const W=Object.assign({$ref:Y.collection,$id:Y.oid},Y.fields);if(Y.db!=null)W.$db=Y.db;return(Z!=null?_.utf8ByteLength(Z)+1:0)+1+o$(W,X,$)}else if(Y instanceof RegExp||gZ(Y))return(Z!=null?_.utf8ByteLength(Z)+1:0)+1+_.utf8ByteLength(Y.source)+1+(Y.global?1:0)+(Y.ignoreCase?1:0)+(Y.multiline?1:0)+1;else if(Y._bsontype==="BSONRegExp")return(Z!=null?_.utf8ByteLength(Z)+1:0)+1+_.utf8ByteLength(Y.pattern)+1+_.utf8ByteLength(Y.options)+1;else return(Z!=null?_.utf8ByteLength(Z)+1:0)+o$(Y,X,$)+1;case"function":if(X)return(Z!=null?_.utf8ByteLength(Z)+1:0)+1+4+_.utf8ByteLength(Y.toString())+1}return 0},ss=function(Z){return Z.split("").sort().join("")},IA=function(Z,Y,X){let J=0;for(let $=Y;$<X;$+=1){const W=Z[$];if(J){if((W&es)!==Gr)return!1;J-=1}else if(W&os)if((W&Zr)===Jr)J=1;else if((W&Yr)===$r)J=2;else if((W&Xr)===Wr)J=3;else return!1}return!J},jA=function(Z,Y,X){Y=Y==null?{}:Y;const J=Y&&Y.index?Y.index:0,$=Z[J]|Z[J+1]<<8|Z[J+2]<<16|Z[J+3]<<24;if($<5)throw new u(`bson size must be >= 5, is ${$}`);if(Y.allowObjectSmallerThanBufferSize&&Z.length<$)throw new u(`buffer length ${Z.length} must be >= bson size ${$}`);if(!Y.allowObjectSmallerThanBufferSize&&Z.length!==$)throw new u(`buffer length ${Z.length} must === bson size ${$}`);if($+J>Z.byteLength)throw new u(`(bson size ${$} + options.index ${J} must be <= buffer length ${Z.byteLength})`);if(Z[J+$-1]!==0)throw new u("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return e$(Z,J,Y,X)},e$=function(Z,Y,X,J=!1){const $=X.fieldsAsRaw==null?null:X.fieldsAsRaw,W=X.raw==null?!1:X.raw,G=typeof X.bsonRegExp==="boolean"?X.bsonRegExp:!1,K=X.promoteBuffers??!1,Q=X.promoteLongs??!0,z=X.promoteValues??!0,H=X.useBigInt64??!1;if(H&&!z)throw new u("Must either request bigint or Long for int64 deserialization");if(H&&!Q)throw new u("Must either request bigint or Long for int64 deserialization");const F=X.validation==null?{utf8:!0}:X.validation;let U=!0,V;const q=new Set,L=F.utf8;if(typeof L==="boolean")V=L;else{U=!1;const E=Object.keys(L).map(function(j){return L[j]});if(E.length===0)throw new u("UTF-8 validation setting cannot be empty");if(typeof E[0]!=="boolean")throw new u("Invalid UTF-8 validation option, must specify boolean values");if(V=E[0],!E.every((j)=>j===V))throw new u("Invalid UTF-8 validation option - keys must be all true or all false")}if(!U)for(let E of Object.keys(L))q.add(E);const R=Y;if(Z.length<5)throw new u("corrupt bson message < 5 bytes long");const B=Z[Y++]|Z[Y++]<<8|Z[Y++]<<16|Z[Y++]<<24;if(B<5||B>Z.length)throw new u("corrupt bson message");const N=J?[]:{};let M=0;const D=!1;let m=J?!1:null;const O=new DataView(Z.buffer,Z.byteOffset,Z.byteLength);while(!D){const E=Z[Y++];if(E===0)break;let j=Y;while(Z[j]!==0&&j<Z.length)j++;if(j>=Z.byteLength)throw new u("Bad BSON Document: illegal CString");const n=J?M++:_.toUTF8(Z,Y,j);let c=!0;if(U||q.has(n))c=V;else c=!V;if(m!==!1&&n[0]==="$")m=zr.test(n);let y;if(Y=j+1,E===FA){const C=Z[Y++]|Z[Y++]<<8|Z[Y++]<<16|Z[Y++]<<24;if(C<=0||C>Z.length-Y||Z[Y+C-1]!==0)throw new u("bad string length in bson");y=t$(Z,Y,Y+C-1,c),Y=Y+C}else if(E===VA){const C=_.allocate(12);C.set(Z.subarray(Y,Y+12)),y=new V0(C),Y=Y+12}else if(E===hZ&&z===!1)y=new t4(Z[Y++]|Z[Y++]<<8|Z[Y++]<<16|Z[Y++]<<24);else if(E===hZ)y=Z[Y++]|Z[Y++]<<8|Z[Y++]<<16|Z[Y++]<<24;else if(E===ZW&&z===!1)y=new r4(O.getFloat64(Y,!0)),Y=Y+8;else if(E===ZW)y=O.getFloat64(Y,!0),Y=Y+8;else if(E===LA){const C=Z[Y++]|Z[Y++]<<8|Z[Y++]<<16|Z[Y++]<<24,S=Z[Y++]|Z[Y++]<<8|Z[Y++]<<16|Z[Y++]<<24;y=new Date(new T(C,S).toNumber())}else if(E===qA){if(Z[Y]!==0&&Z[Y]!==1)throw new u("illegal boolean type value");y=Z[Y++]===1}else if(E===PH){const C=Y,S=Z[Y]|Z[Y+1]<<8|Z[Y+2]<<16|Z[Y+3]<<24;if(S<=0||S>Z.length-Y)throw new u("bad embedded document length in bson");if(W)y=Z.slice(Y,Y+S);else{let a=X;if(!U)a={...X,validation:{utf8:c}};y=e$(Z,C,a,!1)}Y=Y+S}else if(E===UA){const C=Y,S=Z[Y]|Z[Y+1]<<8|Z[Y+2]<<16|Z[Y+3]<<24;let a=X;const E1=Y+S;if($&&$[n])a={...X,raw:!0};if(!U)a={...a,validation:{utf8:c}};if(y=e$(Z,C,a,!0),Y=Y+S,Z[Y-1]!==0)throw new u("invalid array terminator byte");if(Y!==E1)throw new u("corrupted array bson")}else if(E===Ts)y=void 0;else if(E===IH)y=null;else if(E===EH){const C=JJ.fromUint8Array(Z.subarray(Y,Y+8)),S=Z[Y++]|Z[Y++]<<8|Z[Y++]<<16|Z[Y++]<<24,a=Z[Y++]|Z[Y++]<<8|Z[Y++]<<16|Z[Y++]<<24,E1=new T(S,a);if(H)y=C.getBigInt64(0,!0);else if(Q&&z===!0)y=E1.lessThanOrEqual(Kr)&&E1.greaterThanOrEqual(Qr)?E1.toNumber():E1;else y=E1}else if(E===BA){const C=_.allocate(16);C.set(Z.subarray(Y,Y+16),0),Y=Y+16,y=new F8(C)}else if(E===TH){let C=Z[Y++]|Z[Y++]<<8|Z[Y++]<<16|Z[Y++]<<24;const S=C,a=Z[Y++];if(C<0)throw new u("Negative binary type element size found");if(C>Z.byteLength)throw new u("Binary type size larger than document size");if(Z.slice!=null){if(a===C1.SUBTYPE_BYTE_ARRAY){if(C=Z[Y++]|Z[Y++]<<8|Z[Y++]<<16|Z[Y++]<<24,C<0)throw new u("Negative binary type element size found for subtype 0x02");if(C>S-4)throw new u("Binary type with subtype 0x02 contains too long binary size");if(C<S-4)throw new u("Binary type with subtype 0x02 contains too short binary size")}if(K&&z)y=_.toLocalBufferType(Z.slice(Y,Y+C));else if(y=new C1(Z.slice(Y,Y+C),a),a===XW&&d0.isValid(y))y=y.toUUID()}else{const E1=_.allocate(C);if(a===C1.SUBTYPE_BYTE_ARRAY){if(C=Z[Y++]|Z[Y++]<<8|Z[Y++]<<16|Z[Y++]<<24,C<0)throw new u("Negative binary type element size found for subtype 0x02");if(C>S-4)throw new u("Binary type with subtype 0x02 contains too long binary size");if(C<S-4)throw new u("Binary type with subtype 0x02 contains too short binary size")}for(j=0;j<C;j++)E1[j]=Z[Y+j];if(K&&z)y=E1;else if(y=new C1(Z.slice(Y,Y+C),a),a===XW&&d0.isValid(y))y=y.toUUID()}Y=Y+C}else if(E===YW&&G===!1){j=Y;while(Z[j]!==0&&j<Z.length)j++;if(j>=Z.length)throw new u("Bad BSON Document: illegal CString");const C=_.toUTF8(Z,Y,j);Y=j+1,j=Y;while(Z[j]!==0&&j<Z.length)j++;if(j>=Z.length)throw new u("Bad BSON Document: illegal CString");const S=_.toUTF8(Z,Y,j);Y=j+1;const a=new Array(S.length);for(j=0;j<S.length;j++)switch(S[j]){case"m":a[j]="m";break;case"s":a[j]="g";break;case"i":a[j]="i";break}y=new RegExp(C,a.join(""))}else if(E===YW&&G===!0){j=Y;while(Z[j]!==0&&j<Z.length)j++;if(j>=Z.length)throw new u("Bad BSON Document: illegal CString");const C=_.toUTF8(Z,Y,j);Y=j+1,j=Y;while(Z[j]!==0&&j<Z.length)j++;if(j>=Z.length)throw new u("Bad BSON Document: illegal CString");const S=_.toUTF8(Z,Y,j);Y=j+1,y=new O6(C,S)}else if(E===wA){const C=Z[Y++]|Z[Y++]<<8|Z[Y++]<<16|Z[Y++]<<24;if(C<=0||C>Z.length-Y||Z[Y+C-1]!==0)throw new u("bad string length in bson");const S=t$(Z,Y,Y+C-1,c);y=z?S:new $9(S),Y=Y+C}else if(E===MA){const C=Z[Y++]+Z[Y++]*(1<<8)+Z[Y++]*(1<<16)+Z[Y++]*(1<<24),S=Z[Y++]+Z[Y++]*(1<<8)+Z[Y++]*(1<<16)+Z[Y++]*(1<<24);y=new C6({i:C,t:S})}else if(E===NA)y=new J9;else if(E===AA)y=new X9;else if(E===jH){const C=Z[Y++]|Z[Y++]<<8|Z[Y++]<<16|Z[Y++]<<24;if(C<=0||C>Z.length-Y||Z[Y+C-1]!==0)throw new u("bad string length in bson");const S=t$(Z,Y,Y+C-1,c);y=new F4(S),Y=Y+C}else if(E===RA){const C=Z[Y++]|Z[Y++]<<8|Z[Y++]<<16|Z[Y++]<<24;if(C<13)throw new u("code_w_scope total size shorter minimum expected length");const S=Z[Y++]|Z[Y++]<<8|Z[Y++]<<16|Z[Y++]<<24;if(S<=0||S>Z.length-Y||Z[Y+S-1]!==0)throw new u("bad string length in bson");const a=t$(Z,Y,Y+S-1,c);Y=Y+S;const E1=Y,u0=Z[Y]|Z[Y+1]<<8|Z[Y+2]<<16|Z[Y+3]<<24,e1=e$(Z,E1,X,!1);if(Y=Y+u0,C<8+u0+S)throw new u("code_w_scope total size is too short, truncating scope");if(C>8+u0+S)throw new u("code_w_scope total size is too long, clips outer document");y=new F4(a,e1)}else if(E===Is){const C=Z[Y++]|Z[Y++]<<8|Z[Y++]<<16|Z[Y++]<<24;if(C<=0||C>Z.length-Y||Z[Y+C-1]!==0)throw new u("bad string length in bson");if(F!=null&&F.utf8){if(!IA(Z,Y,Y+C-1))throw new u("Invalid UTF-8 string in BSON document")}const S=_.toUTF8(Z,Y,Y+C-1);Y=Y+C;const a=_.allocate(12);a.set(Z.subarray(Y,Y+12),0);const E1=new V0(a);Y=Y+12,y=new x7(S,E1)}else throw new u(`Detected unknown BSON type ${E.toString(16)} for fieldname "${n}"`);if(n==="__proto__")Object.defineProperty(N,n,{value:y,writable:!0,enumerable:!0,configurable:!0});else N[n]=y}if(B!==Y-R){if(J)throw new u("corrupt array bson");throw new u("corrupt object bson")}if(!m)return N;if(PA(N)){const E=Object.assign({},N);return delete E.$ref,delete E.$id,delete E.$db,new x7(N.$ref,N.$id,N.$db,E)}return N},t$=function(Z,Y,X,J){const $=_.toUTF8(Z,Y,X);if(J){for(let W=0;W<$.length;W++)if($.charCodeAt(W)===65533){if(!IA(Z,Y,X))throw new u("Invalid UTF-8 string in BSON document");break}}return $},YH=function(Z,Y,X,J){Z[J++]=FA;const $=_.encodeUTF8Into(Z,Y,J);J=J+$+1,Z[J-1]=0;const W=_.encodeUTF8Into(Z,X,J+4);return Z[J+3]=W+1>>24&255,Z[J+2]=W+1>>16&255,Z[J+1]=W+1>>8&255,Z[J]=W+1&255,J=J+4+W,Z[J++]=0,J},XH=function(Z,Y,X,J){const W=!Object.is(X,-0)&&Number.isSafeInteger(X)&&X<=WW&&X>=GW?hZ:ZW;if(W===hZ)uZ.setInt32(0,X,!0);else uZ.setFloat64(0,X,!0);const G=W===hZ?Hr:$W;Z[J++]=W;const K=_.encodeUTF8Into(Z,Y,J);return J=J+K,Z[J++]=0,Z.set(G,J),J+=G.byteLength,J},JH=function(Z,Y,X,J){Z[J++]=EH;const $=_.encodeUTF8Into(Z,Y,J);return J+=$,Z[J++]=0,uZ.setBigInt64(0,X,!0),Z.set($W,J),J+=$W.byteLength,J},XJ=function(Z,Y,X,J){Z[J++]=IH;const $=_.encodeUTF8Into(Z,Y,J);return J=J+$,Z[J++]=0,J},$H=function(Z,Y,X,J){Z[J++]=qA;const $=_.encodeUTF8Into(Z,Y,J);return J=J+$,Z[J++]=0,Z[J++]=X?1:0,J},WH=function(Z,Y,X,J){Z[J++]=LA;const $=_.encodeUTF8Into(Z,Y,J);J=J+$,Z[J++]=0;const W=T.fromNumber(X.getTime()),G=W.getLowBits(),K=W.getHighBits();return Z[J++]=G&255,Z[J++]=G>>8&255,Z[J++]=G>>16&255,Z[J++]=G>>24&255,Z[J++]=K&255,Z[J++]=K>>8&255,Z[J++]=K>>16&255,Z[J++]=K>>24&255,J},GH=function(Z,Y,X,J){Z[J++]=YW;const $=_.encodeUTF8Into(Z,Y,J);if(J=J+$,Z[J++]=0,X.source&&X.source.match(JW)!=null)throw new u("value "+X.source+" must not contain null bytes");if(J=J+_.encodeUTF8Into(Z,X.source,J),Z[J++]=0,X.ignoreCase)Z[J++]=105;if(X.global)Z[J++]=115;if(X.multiline)Z[J++]=109;return Z[J++]=0,J},KH=function(Z,Y,X,J){Z[J++]=YW;const $=_.encodeUTF8Into(Z,Y,J);if(J=J+$,Z[J++]=0,X.pattern.match(JW)!=null)throw new u("pattern "+X.pattern+" must not contain null bytes");J=J+_.encodeUTF8Into(Z,X.pattern,J),Z[J++]=0;const W=X.options.split("").sort().join("");return J=J+_.encodeUTF8Into(Z,W,J),Z[J++]=0,J},QH=function(Z,Y,X,J){if(X===null)Z[J++]=IH;else if(X._bsontype==="MinKey")Z[J++]=NA;else Z[J++]=AA;const $=_.encodeUTF8Into(Z,Y,J);return J=J+$,Z[J++]=0,J},zH=function(Z,Y,X,J){Z[J++]=VA;const $=_.encodeUTF8Into(Z,Y,J);J=J+$,Z[J++]=0;const W=X.id;if(Z9(W))for(let G=0;G<12;G++)Z[J++]=W[G];else throw new u("object ["+JSON.stringify(X)+"] is not a valid ObjectId");return J},HH=function(Z,Y,X,J){Z[J++]=TH;const $=_.encodeUTF8Into(Z,Y,J);J=J+$,Z[J++]=0;const W=X.length;return Z[J++]=W&255,Z[J++]=W>>8&255,Z[J++]=W>>16&255,Z[J++]=W>>24&255,Z[J++]=js,Z.set(X,J),J=J+W,J},FH=function(Z,Y,X,J,$,W,G,K,Q){if(Q.has(X))throw new u("Cannot convert circular structure to BSON");Q.add(X),Z[J++]=Array.isArray(X)?UA:PH;const z=_.encodeUTF8Into(Z,Y,J);J=J+z,Z[J++]=0;const H=WJ(Z,X,$,J,W+1,G,K,Q);return Q.delete(X),H},UH=function(Z,Y,X,J){Z[J++]=BA;const $=_.encodeUTF8Into(Z,Y,J);return J=J+$,Z[J++]=0,Z.set(X.bytes.subarray(0,16),J),J+16},VH=function(Z,Y,X,J){Z[J++]=X._bsontype==="Long"?EH:MA;const $=_.encodeUTF8Into(Z,Y,J);J=J+$,Z[J++]=0;const W=X.getLowBits(),G=X.getHighBits();return Z[J++]=W&255,Z[J++]=W>>8&255,Z[J++]=W>>16&255,Z[J++]=W>>24&255,Z[J++]=G&255,Z[J++]=G>>8&255,Z[J++]=G>>16&255,Z[J++]=G>>24&255,J},qH=function(Z,Y,X,J){X=X.valueOf(),Z[J++]=hZ;const $=_.encodeUTF8Into(Z,Y,J);return J=J+$,Z[J++]=0,Z[J++]=X&255,Z[J++]=X>>8&255,Z[J++]=X>>16&255,Z[J++]=X>>24&255,J},LH=function(Z,Y,X,J){Z[J++]=ZW;const $=_.encodeUTF8Into(Z,Y,J);return J=J+$,Z[J++]=0,uZ.setFloat64(0,X.value,!0),Z.set($W,J),J=J+8,J},wH=function(Z,Y,X,J){Z[J++]=jH;const $=_.encodeUTF8Into(Z,Y,J);J=J+$,Z[J++]=0;const W=X.toString(),G=_.encodeUTF8Into(Z,W,J+4)+1;return Z[J]=G&255,Z[J+1]=G>>8&255,Z[J+2]=G>>16&255,Z[J+3]=G>>24&255,J=J+4+G-1,Z[J++]=0,J},RH=function(Z,Y,X,J,$=!1,W=0,G=!1,K=!0,Q){if(X.scope&&typeof X.scope==="object"){Z[J++]=RA;const z=_.encodeUTF8Into(Z,Y,J);J=J+z,Z[J++]=0;let H=J;const F=X.code;J=J+4;const U=_.encodeUTF8Into(Z,F,J+4)+1;Z[J]=U&255,Z[J+1]=U>>8&255,Z[J+2]=U>>16&255,Z[J+3]=U>>24&255,Z[J+4+U-1]=0,J=J+U+4;const V=WJ(Z,X.scope,$,J,W+1,G,K,Q);J=V-1;const q=V-H;Z[H++]=q&255,Z[H++]=q>>8&255,Z[H++]=q>>16&255,Z[H++]=q>>24&255,Z[J++]=0}else{Z[J++]=jH;const z=_.encodeUTF8Into(Z,Y,J);J=J+z,Z[J++]=0;const H=X.code.toString(),F=_.encodeUTF8Into(Z,H,J+4)+1;Z[J]=F&255,Z[J+1]=F>>8&255,Z[J+2]=F>>16&255,Z[J+3]=F>>24&255,J=J+4+F-1,Z[J++]=0}return J},MH=function(Z,Y,X,J){Z[J++]=TH;const $=_.encodeUTF8Into(Z,Y,J);J=J+$,Z[J++]=0;const W=X.buffer;let G=X.position;if(X.sub_type===C1.SUBTYPE_BYTE_ARRAY)G=G+4;if(Z[J++]=G&255,Z[J++]=G>>8&255,Z[J++]=G>>16&255,Z[J++]=G>>24&255,Z[J++]=X.sub_type,X.sub_type===C1.SUBTYPE_BYTE_ARRAY)G=G-4,Z[J++]=G&255,Z[J++]=G>>8&255,Z[J++]=G>>16&255,Z[J++]=G>>24&255;return Z.set(W,J),J=J+X.position,J},BH=function(Z,Y,X,J){Z[J++]=wA;const $=_.encodeUTF8Into(Z,Y,J);J=J+$,Z[J++]=0;const W=_.encodeUTF8Into(Z,X.value,J+4)+1;return Z[J]=W&255,Z[J+1]=W>>8&255,Z[J+2]=W>>16&255,Z[J+3]=W>>24&255,J=J+4+W-1,Z[J++]=0,J},NH=function(Z,Y,X,J,$,W,G){Z[J++]=PH;const K=_.encodeUTF8Into(Z,Y,J);J=J+K,Z[J++]=0;let Q=J,z={$ref:X.collection||X.namespace,$id:X.oid};if(X.db!=null)z.$db=X.db;z=Object.assign(z,X.fields);const H=WJ(Z,z,!1,J,$+1,W,!0,G),F=H-Q;return Z[Q++]=F&255,Z[Q++]=F>>8&255,Z[Q++]=F>>16&255,Z[Q++]=F>>24&255,H},WJ=function(Z,Y,X,J,$,W,G,K){if(K==null){if(Y==null)return Z[0]=5,Z[1]=0,Z[2]=0,Z[3]=0,Z[4]=0,5;if(Array.isArray(Y))throw new u("serialize does not support an array as the root input");if(typeof Y!=="object")throw new u("serialize does not support non-object as the root input");else if(("_bsontype"in Y)&&typeof Y._bsontype==="string")throw new u("BSON types cannot be serialized as a document");else if(bZ(Y)||gZ(Y)||Z9(Y)||AH(Y))throw new u("date, regexp, typedarray, and arraybuffer cannot be BSON documents");K=new Set}K.add(Y);let Q=J+4;if(Array.isArray(Y))for(let H=0;H<Y.length;H++){const F=`${H}`;let U=Y[H];if(typeof U?.toBSON==="function")U=U.toBSON();if(typeof U==="string")Q=YH(Z,F,U,Q);else if(typeof U==="number")Q=XH(Z,F,U,Q);else if(typeof U==="bigint")Q=JH(Z,F,U,Q);else if(typeof U==="boolean")Q=$H(Z,F,U,Q);else if(U instanceof Date||bZ(U))Q=WH(Z,F,U,Q);else if(U===void 0)Q=XJ(Z,F,U,Q);else if(U===null)Q=XJ(Z,F,U,Q);else if(Z9(U))Q=HH(Z,F,U,Q);else if(U instanceof RegExp||gZ(U))Q=GH(Z,F,U,Q);else if(typeof U==="object"&&U._bsontype==null)Q=FH(Z,F,U,Q,X,$,W,G,K);else if(typeof U==="object"&&U[Symbol.for("@@mdb.bson.version")]!==Y9)throw new s4;else if(U._bsontype==="ObjectId")Q=zH(Z,F,U,Q);else if(U._bsontype==="Decimal128")Q=UH(Z,F,U,Q);else if(U._bsontype==="Long"||U._bsontype==="Timestamp")Q=VH(Z,F,U,Q);else if(U._bsontype==="Double")Q=LH(Z,F,U,Q);else if(typeof U==="function"&&W)Q=wH(Z,F,U,Q);else if(U._bsontype==="Code")Q=RH(Z,F,U,Q,X,$,W,G,K);else if(U._bsontype==="Binary")Q=MH(Z,F,U,Q);else if(U._bsontype==="BSONSymbol")Q=BH(Z,F,U,Q);else if(U._bsontype==="DBRef")Q=NH(Z,F,U,Q,$,W,K);else if(U._bsontype==="BSONRegExp")Q=KH(Z,F,U,Q);else if(U._bsontype==="Int32")Q=qH(Z,F,U,Q);else if(U._bsontype==="MinKey"||U._bsontype==="MaxKey")Q=QH(Z,F,U,Q);else if(typeof U._bsontype!=="undefined")throw new u(`Unrecognized or invalid _bsontype: ${String(U._bsontype)}`)}else if(Y instanceof Map||DH(Y)){const H=Y.entries();let F=!1;while(!F){const U=H.next();if(F=!!U.done,F)continue;const V=U.value[0];let q=U.value[1];if(typeof q?.toBSON==="function")q=q.toBSON();const L=typeof q;if(typeof V==="string"&&!WA.has(V)){if(V.match(JW)!=null)throw new u("key "+V+" must not contain null bytes");if(X){if(V[0]==="$")throw new u("key "+V+" must not start with '$'");else if(~V.indexOf("."))throw new u("key "+V+" must not contain '.'")}}if(L==="string")Q=YH(Z,V,q,Q);else if(L==="number")Q=XH(Z,V,q,Q);else if(L==="bigint")Q=JH(Z,V,q,Q);else if(L==="boolean")Q=$H(Z,V,q,Q);else if(q instanceof Date||bZ(q))Q=WH(Z,V,q,Q);else if(q===null||q===void 0&&G===!1)Q=XJ(Z,V,q,Q);else if(Z9(q))Q=HH(Z,V,q,Q);else if(q instanceof RegExp||gZ(q))Q=GH(Z,V,q,Q);else if(L==="object"&&q._bsontype==null)Q=FH(Z,V,q,Q,X,$,W,G,K);else if(typeof q==="object"&&q[Symbol.for("@@mdb.bson.version")]!==Y9)throw new s4;else if(q._bsontype==="ObjectId")Q=zH(Z,V,q,Q);else if(L==="object"&&q._bsontype==="Decimal128")Q=UH(Z,V,q,Q);else if(q._bsontype==="Long"||q._bsontype==="Timestamp")Q=VH(Z,V,q,Q);else if(q._bsontype==="Double")Q=LH(Z,V,q,Q);else if(q._bsontype==="Code")Q=RH(Z,V,q,Q,X,$,W,G,K);else if(typeof q==="function"&&W)Q=wH(Z,V,q,Q);else if(q._bsontype==="Binary")Q=MH(Z,V,q,Q);else if(q._bsontype==="BSONSymbol")Q=BH(Z,V,q,Q);else if(q._bsontype==="DBRef")Q=NH(Z,V,q,Q,$,W,K);else if(q._bsontype==="BSONRegExp")Q=KH(Z,V,q,Q);else if(q._bsontype==="Int32")Q=qH(Z,V,q,Q);else if(q._bsontype==="MinKey"||q._bsontype==="MaxKey")Q=QH(Z,V,q,Q);else if(typeof q._bsontype!=="undefined")throw new u(`Unrecognized or invalid _bsontype: ${String(q._bsontype)}`)}}else{if(typeof Y?.toBSON==="function"){if(Y=Y.toBSON(),Y!=null&&typeof Y!=="object")throw new u("toBSON function did not return an object")}for(let H of Object.keys(Y)){let F=Y[H];if(typeof F?.toBSON==="function")F=F.toBSON();const U=typeof F;if(typeof H==="string"&&!WA.has(H)){if(H.match(JW)!=null)throw new u("key "+H+" must not contain null bytes");if(X){if(H[0]==="$")throw new u("key "+H+" must not start with '$'");else if(~H.indexOf("."))throw new u("key "+H+" must not contain '.'")}}if(U==="string")Q=YH(Z,H,F,Q);else if(U==="number")Q=XH(Z,H,F,Q);else if(U==="bigint")Q=JH(Z,H,F,Q);else if(U==="boolean")Q=$H(Z,H,F,Q);else if(F instanceof Date||bZ(F))Q=WH(Z,H,F,Q);else if(F===void 0){if(G===!1)Q=XJ(Z,H,F,Q)}else if(F===null)Q=XJ(Z,H,F,Q);else if(Z9(F))Q=HH(Z,H,F,Q);else if(F instanceof RegExp||gZ(F))Q=GH(Z,H,F,Q);else if(U==="object"&&F._bsontype==null)Q=FH(Z,H,F,Q,X,$,W,G,K);else if(typeof F==="object"&&F[Symbol.for("@@mdb.bson.version")]!==Y9)throw new s4;else if(F._bsontype==="ObjectId")Q=zH(Z,H,F,Q);else if(U==="object"&&F._bsontype==="Decimal128")Q=UH(Z,H,F,Q);else if(F._bsontype==="Long"||F._bsontype==="Timestamp")Q=VH(Z,H,F,Q);else if(F._bsontype==="Double")Q=LH(Z,H,F,Q);else if(F._bsontype==="Code")Q=RH(Z,H,F,Q,X,$,W,G,K);else if(typeof F==="function"&&W)Q=wH(Z,H,F,Q);else if(F._bsontype==="Binary")Q=MH(Z,H,F,Q);else if(F._bsontype==="BSONSymbol")Q=BH(Z,H,F,Q);else if(F._bsontype==="DBRef")Q=NH(Z,H,F,Q,$,W,K);else if(F._bsontype==="BSONRegExp")Q=KH(Z,H,F,Q);else if(F._bsontype==="Int32")Q=qH(Z,H,F,Q);else if(F._bsontype==="MinKey"||F._bsontype==="MaxKey")Q=QH(Z,H,F,Q);else if(typeof F._bsontype!=="undefined")throw new u(`Unrecognized or invalid _bsontype: ${String(F._bsontype)}`)}}K.delete(Y),Z[Q++]=0;const z=Q-J;return Z[J++]=z&255,Z[J++]=z>>8&255,Z[J++]=z>>16&255,Z[J++]=z>>24&255,Q},Fr=function(Z){return Z!=null&&typeof Z==="object"&&("_bsontype"in Z)&&typeof Z._bsontype==="string"},EA=function(Z,Y={}){if(typeof Z==="number"){const J=Z<=WW&&Z>=GW,$=Z<=KA&&Z>=QA;if(Y.relaxed||Y.legacy)return Z;if(Number.isInteger(Z)&&!Object.is(Z,-0)){if(J)return new t4(Z);if($){if(Y.useBigInt64)return BigInt(Z);return T.fromNumber(Z)}}return new r4(Z)}if(Z==null||typeof Z!=="object")return Z;if(Z.$undefined)return null;const X=Object.keys(Z).filter((J)=>J.startsWith("$")&&Z[J]!=null);for(let J=0;J<X.length;J++){const $=Ur[X[J]];if($)return $.fromExtendedJSON(Z,Y)}if(Z.$date!=null){const J=Z.$date,$=new Date;if(Y.legacy)if(typeof J==="number")$.setTime(J);else if(typeof J==="string")$.setTime(Date.parse(J));else if(typeof J==="bigint")$.setTime(Number(J));else throw new $J(`Unrecognized type for EJSON date: ${typeof J}`);else if(typeof J==="string")$.setTime(Date.parse(J));else if(T.isLong(J))$.setTime(J.toNumber());else if(typeof J==="number"&&Y.relaxed)$.setTime(J);else if(typeof J==="bigint")$.setTime(Number(J));else throw new $J(`Unrecognized type for EJSON date: ${typeof J}`);return $}if(Z.$code!=null){const J=Object.assign({},Z);if(Z.$scope)J.$scope=EA(Z.$scope);return F4.fromExtendedJSON(Z)}if(PA(Z)||Z.$dbPointer){const J=Z.$ref?Z:Z.$dbPointer;if(J instanceof x7)return J;const $=Object.keys(J).filter((G)=>G.startsWith("$"));let W=!0;if($.forEach((G)=>{if(["$ref","$id","$db"].indexOf(G)===-1)W=!1}),W)return x7.fromExtendedJSON(J)}return Z},Vr=function(Z,Y){return Z.map((X,J)=>{Y.seenObjects.push({propertyName:`index ${J}`,obj:null});try{return H4(X,Y)}finally{Y.seenObjects.pop()}})},GA=function(Z){const Y=Z.toISOString();return Z.getUTCMilliseconds()!==0?Y:Y.slice(0,-5)+"Z"},H4=function(Z,Y){if(Z instanceof Map||DH(Z)){const X=Object.create(null);for(let[J,$]of Z){if(typeof J!=="string")throw new u("Can only serialize maps with string keys");X[J]=$}return H4(X,Y)}if((typeof Z==="object"||typeof Z==="function")&&Z!==null){const X=Y.seenObjects.findIndex((J)=>J.obj===Z);if(X!==-1){const J=Y.seenObjects.map((H)=>H.propertyName),$=J.slice(0,X).map((H)=>`${H} -> `).join(""),W=J[X],G=" -> "+J.slice(X+1,J.length-1).map((H)=>`${H} -> `).join(""),K=J[J.length-1],Q=" ".repeat($.length+W.length/2),z="-".repeat(G.length+(W.length+K.length)/2-1);throw new u("Converting circular structure to EJSON:\n"+`    ${$}${W}${G}${K}\n`+`    ${Q}\\${z}/`)}Y.seenObjects[Y.seenObjects.length-1].obj=Z}if(Array.isArray(Z))return Vr(Z,Y);if(Z===void 0)return null;if(Z instanceof Date||bZ(Z)){const X=Z.getTime(),J=X>-1&&X<253402318800000;if(Y.legacy)return Y.relaxed&&J?{$date:Z.getTime()}:{$date:GA(Z)};return Y.relaxed&&J?{$date:GA(Z)}:{$date:{$numberLong:Z.getTime().toString()}}}if(typeof Z==="number"&&(!Y.relaxed||!isFinite(Z))){if(Number.isInteger(Z)&&!Object.is(Z,-0)){if(Z>=GW&&Z<=WW)return{$numberInt:Z.toString()};if(Z>=QA&&Z<=KA)return{$numberLong:Z.toString()}}return{$numberDouble:Object.is(Z,-0)?"-0.0":Z.toString()}}if(typeof Z==="bigint"){if(!Y.relaxed)return{$numberLong:BigInt.asIntN(64,Z).toString()};return Number(BigInt.asIntN(64,Z))}if(Z instanceof RegExp||gZ(Z)){let X=Z.flags;if(X===void 0){const $=Z.toString().match(/[gimuy]*$/);if($)X=$[0]}return new O6(Z.source,X).toExtendedJSON(Y)}if(Z!=null&&typeof Z==="object")return Lr(Z,Y);return Z},Lr=function(Z,Y){if(Z==null||typeof Z!=="object")throw new u("not an object instance");const X=Z._bsontype;if(typeof X==="undefined"){const J={};for(let $ of Object.keys(Z)){Y.seenObjects.push({propertyName:$,obj:null});try{const W=H4(Z[$],Y);if($==="__proto__")Object.defineProperty(J,$,{value:W,writable:!0,enumerable:!0,configurable:!0});else J[$]=W}finally{Y.seenObjects.pop()}}return J}else if(Z!=null&&typeof Z==="object"&&typeof Z._bsontype==="string"&&Z[Symbol.for("@@mdb.bson.version")]!==Y9)throw new s4;else if(Fr(Z)){let J=Z;if(typeof J.toExtendedJSON!=="function"){const $=qr[Z._bsontype];if(!$)throw new u("Unrecognized or invalid _bsontype: "+Z._bsontype);J=$(J)}if(X==="Code"&&J.scope)J=new F4(J.code,H4(J.scope,Y));else if(X==="DBRef"&&J.oid)J=new x7(H4(J.collection,Y),H4(J.oid,Y),H4(J.db,Y),H4(J.fields,Y));return J.toExtendedJSON(Y)}else throw new u("_bsontype must be a string, but was: "+typeof X)},CA=function(Z,Y){const X={useBigInt64:Y?.useBigInt64??!1,relaxed:Y?.relaxed??!0,legacy:Y?.legacy??!1};return JSON.parse(Z,(J,$)=>{if(J.indexOf("\0")!==-1)throw new u(`BSON Document field names cannot contain null bytes, found: ${JSON.stringify(J)}`);return EA($,X)})},OA=function(Z,Y,X,J){if(X!=null&&typeof X==="object")J=X,X=0;if(Y!=null&&typeof Y==="object"&&!Array.isArray(Y))J=Y,Y=void 0,X=0;const $=Object.assign({relaxed:!0,legacy:!1},J,{seenObjects:[{propertyName:"(root)",obj:null}]}),W=H4(Z,$);return JSON.stringify(W,Y,X)},wr=function(Z,Y){return Y=Y||{},JSON.parse(OA(Z,Y))},Rr=function(Z,Y){return Y=Y||{},CA(JSON.stringify(Z),Y)},kA=function(Z){if(a4.length<Z)a4=_.allocate(Z)},_A=function(Z,Y={}){const X=typeof Y.checkKeys==="boolean"?Y.checkKeys:!1,J=typeof Y.serializeFunctions==="boolean"?Y.serializeFunctions:!1,$=typeof Y.ignoreUndefined==="boolean"?Y.ignoreUndefined:!0,W=typeof Y.minInternalBufferSize==="number"?Y.minInternalBufferSize:SA;if(a4.length<W)a4=_.allocate(W);const G=WJ(a4,Z,X,0,0,J,$,null),K=_.allocate(G);return K.set(a4.subarray(0,G),0),K},xA=function(Z,Y,X={}){const J=typeof X.checkKeys==="boolean"?X.checkKeys:!1,$=typeof X.serializeFunctions==="boolean"?X.serializeFunctions:!1,W=typeof X.ignoreUndefined==="boolean"?X.ignoreUndefined:!0,G=typeof X.index==="number"?X.index:0,K=WJ(a4,Z,J,0,0,$,W,null);return Y.set(a4.subarray(0,K),G),G+K-1},fA=function(Z,Y={}){return jA(_.toLocalBufferType(Z),Y)},yA=function(Z,Y={}){Y=Y||{};const X=typeof Y.serializeFunctions==="boolean"?Y.serializeFunctions:!1,J=typeof Y.ignoreUndefined==="boolean"?Y.ignoreUndefined:!0;return o$(Z,X,J)},gA=function(Z,Y,X,J,$,W){const G=Object.assign({allowObjectSmallerThanBufferSize:!0,index:0},W),K=_.toLocalBufferType(Z);let Q=Y;for(let z=0;z<X;z++){const H=K[Q]|K[Q+1]<<8|K[Q+2]<<16|K[Q+3]<<24;G.index=Q,J[$+z]=jA(K,G),Q=Q+H}return Q},Y9=6,WW=2147483647,GW=-2147483648,KA=Math.pow(2,63)-1,QA=-Math.pow(2,63),zA=Math.pow(2,53),HA=-Math.pow(2,53),ZW=1,FA=2,PH=3,UA=4,TH=5,Ts=6,VA=7,qA=8,LA=9,IH=10,YW=11,Is=12,jH=13,wA=14,RA=15,hZ=16,MA=17,EH=18,BA=19,NA=255,AA=127,js=0,XW=4,DA=Object.freeze({double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:-1,maxKey:127});class u extends Error{get bsonError(){return!0}get name(){return"BSONError"}constructor(Z){super(Z)}static isBSONError(Z){return Z!=null&&typeof Z==="object"&&("bsonError"in Z)&&Z.bsonError===!0&&("name"in Z)&&("message"in Z)&&("stack"in Z)}}class s4 extends u{get name(){return"BSONVersionError"}constructor(){super(`Unsupported BSON version, bson types must be from bson ${Y9}.x.x`)}}class $J extends u{get name(){return"BSONRuntimeError"}constructor(Z){super(Z)}}var Cs=(()=>{try{return import.meta.require("crypto").randomBytes}catch{return Es}})(),n4={toLocalBufferType(Z){if(Buffer.isBuffer(Z))return Z;if(ArrayBuffer.isView(Z))return Buffer.from(Z.buffer,Z.byteOffset,Z.byteLength);const Y=Z?.[Symbol.toStringTag]??Object.prototype.toString.call(Z);if(Y==="ArrayBuffer"||Y==="SharedArrayBuffer"||Y==="[object ArrayBuffer]"||Y==="[object SharedArrayBuffer]")return Buffer.from(Z);throw new u(`Cannot create Buffer from ${String(Z)}`)},allocate(Z){return Buffer.alloc(Z)},equals(Z,Y){return n4.toLocalBufferType(Z).equals(Y)},fromNumberArray(Z){return Buffer.from(Z)},fromBase64(Z){return Buffer.from(Z,"base64")},toBase64(Z){return n4.toLocalBufferType(Z).toString("base64")},fromISO88591(Z){return Buffer.from(Z,"binary")},toISO88591(Z){return n4.toLocalBufferType(Z).toString("binary")},fromHex(Z){return Buffer.from(Z,"hex")},toHex(Z){return n4.toLocalBufferType(Z).toString("hex")},fromUTF8(Z){return Buffer.from(Z,"utf8")},toUTF8(Z,Y,X){return n4.toLocalBufferType(Z).toString("utf8",Y,X)},utf8ByteLength(Z){return Buffer.byteLength(Z,"utf8")},encodeUTF8Into(Z,Y,X){return n4.toLocalBufferType(Z).write(Y,X,void 0,"utf8")},randomBytes:Cs},ks=(()=>{const{crypto:Z}=globalThis;if(Z!=null&&typeof Z.getRandomValues==="function")return(Y)=>{return Z.getRandomValues(mZ.allocate(Y))};else{if(Os()){const{console:Y}=globalThis;Y?.warn?.("BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.")}return Ss}})(),nN=/(\d|[a-f])/i,mZ={toLocalBufferType(Z){const Y=Z?.[Symbol.toStringTag]??Object.prototype.toString.call(Z);if(Y==="Uint8Array")return Z;if(ArrayBuffer.isView(Z))return new Uint8Array(Z.buffer.slice(Z.byteOffset,Z.byteOffset+Z.byteLength));if(Y==="ArrayBuffer"||Y==="SharedArrayBuffer"||Y==="[object ArrayBuffer]"||Y==="[object SharedArrayBuffer]")return new Uint8Array(Z);throw new u(`Cannot make a Uint8Array from ${String(Z)}`)},allocate(Z){if(typeof Z!=="number")throw new TypeError(`The "size" argument must be of type number. Received ${String(Z)}`);return new Uint8Array(Z)},equals(Z,Y){if(Z.byteLength!==Y.byteLength)return!1;for(let X=0;X<Z.byteLength;X++)if(Z[X]!==Y[X])return!1;return!0},fromNumberArray(Z){return Uint8Array.from(Z)},fromBase64(Z){return Uint8Array.from(atob(Z),(Y)=>Y.charCodeAt(0))},toBase64(Z){return btoa(mZ.toISO88591(Z))},fromISO88591(Z){return Uint8Array.from(Z,(Y)=>Y.charCodeAt(0)&255)},toISO88591(Z){return Array.from(Uint16Array.from(Z),(Y)=>String.fromCharCode(Y)).join("")},fromHex(Z){const Y=Z.length%2===0?Z:Z.slice(0,Z.length-1),X=[];for(let J=0;J<Y.length;J+=2){const $=Y[J],W=Y[J+1];if(!nN.test($))break;if(!nN.test(W))break;const G=Number.parseInt(`${$}${W}`,16);X.push(G)}return Uint8Array.from(X)},toHex(Z){return Array.from(Z,(Y)=>Y.toString(16).padStart(2,"0")).join("")},fromUTF8(Z){return(new TextEncoder()).encode(Z)},toUTF8(Z,Y,X){return new TextDecoder("utf8",{fatal:!1}).decode(Z.slice(Y,X))},utf8ByteLength(Z){return mZ.fromUTF8(Z).byteLength},encodeUTF8Into(Z,Y,X){const J=mZ.fromUTF8(Y);return Z.set(J,X),J.byteLength},randomBytes:ks},_s=typeof Buffer==="function"&&Buffer.prototype?._isBuffer!==!0,_=_s?n4:mZ;class JJ extends DataView{static fromUint8Array(Z){return new DataView(Z.buffer,Z.byteOffset,Z.byteLength)}}class A8{get[Symbol.for("@@mdb.bson.version")](){return Y9}[Symbol.for("nodejs.util.inspect.custom")](Z,Y,X){return this.inspect(Z,Y,X)}}class C1 extends A8{get _bsontype(){return"Binary"}constructor(Z,Y){super();if(Z!=null&&typeof Z==="string"&&!ArrayBuffer.isView(Z)&&!AH(Z)&&!Array.isArray(Z))throw new u("Binary can only be constructed from Uint8Array or number[]");if(this.sub_type=Y??C1.BSON_BINARY_SUBTYPE_DEFAULT,Z==null)this.buffer=_.allocate(C1.BUFFER_SIZE),this.position=0;else this.buffer=Array.isArray(Z)?_.fromNumberArray(Z):_.toLocalBufferType(Z),this.position=this.buffer.byteLength}put(Z){if(typeof Z==="string"&&Z.length!==1)throw new u("only accepts single character String");else if(typeof Z!=="number"&&Z.length!==1)throw new u("only accepts single character Uint8Array or Array");let Y;if(typeof Z==="string")Y=Z.charCodeAt(0);else if(typeof Z==="number")Y=Z;else Y=Z[0];if(Y<0||Y>255)throw new u("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.byteLength>this.position)this.buffer[this.position++]=Y;else{const X=_.allocate(C1.BUFFER_SIZE+this.buffer.length);X.set(this.buffer,0),this.buffer=X,this.buffer[this.position++]=Y}}write(Z,Y){if(Y=typeof Y==="number"?Y:this.position,this.buffer.byteLength<Y+Z.length){const X=_.allocate(this.buffer.byteLength+Z.length);X.set(this.buffer,0),this.buffer=X}if(ArrayBuffer.isView(Z))this.buffer.set(_.toLocalBufferType(Z),Y),this.position=Y+Z.byteLength>this.position?Y+Z.length:this.position;else if(typeof Z==="string")throw new u("input cannot be string")}read(Z,Y){return Y=Y&&Y>0?Y:this.position,this.buffer.slice(Z,Z+Y)}value(){return this.buffer.length===this.position?this.buffer:this.buffer.subarray(0,this.position)}length(){return this.position}toJSON(){return _.toBase64(this.buffer)}toString(Z){if(Z==="hex")return _.toHex(this.buffer);if(Z==="base64")return _.toBase64(this.buffer);if(Z==="utf8"||Z==="utf-8")return _.toUTF8(this.buffer,0,this.buffer.byteLength);return _.toUTF8(this.buffer,0,this.buffer.byteLength)}toExtendedJSON(Z){Z=Z||{};const Y=_.toBase64(this.buffer),X=Number(this.sub_type).toString(16);if(Z.legacy)return{$binary:Y,$type:X.length===1?"0"+X:X};return{$binary:{base64:Y,subType:X.length===1?"0"+X:X}}}toUUID(){if(this.sub_type===C1.SUBTYPE_UUID)return new d0(this.buffer.slice(0,this.position));throw new u(`Binary sub_type "${this.sub_type}" is not supported for converting to UUID. Only "${C1.SUBTYPE_UUID}" is currently supported.`)}static createFromHexString(Z,Y){return new C1(_.fromHex(Z),Y)}static createFromBase64(Z,Y){return new C1(_.fromBase64(Z),Y)}static fromExtendedJSON(Z,Y){Y=Y||{};let X,J;if("$binary"in Z){if(Y.legacy&&typeof Z.$binary==="string"&&("$type"in Z))J=Z.$type?parseInt(Z.$type,16):0,X=_.fromBase64(Z.$binary);else if(typeof Z.$binary!=="string")J=Z.$binary.subType?parseInt(Z.$binary.subType,16):0,X=_.fromBase64(Z.$binary.base64)}else if("$uuid"in Z)J=4,X=d0.bytesFromString(Z.$uuid);if(!X)throw new u(`Unexpected Binary Extended JSON format ${JSON.stringify(Z)}`);return J===XW?new d0(X):new C1(X,J)}inspect(Z,Y,X){X??=z6;const J=_.toBase64(this.buffer.subarray(0,this.position)),$=X(J,Y),W=X(this.sub_type,Y);return`Binary.createFromBase64(${$}, ${W})`}}C1.BSON_BINARY_SUBTYPE_DEFAULT=0;C1.BUFFER_SIZE=256;C1.SUBTYPE_DEFAULT=0;C1.SUBTYPE_FUNCTION=1;C1.SUBTYPE_BYTE_ARRAY=2;C1.SUBTYPE_UUID_OLD=3;C1.SUBTYPE_UUID=4;C1.SUBTYPE_MD5=5;C1.SUBTYPE_ENCRYPTED=6;C1.SUBTYPE_COLUMN=7;C1.SUBTYPE_USER_DEFINED=128;var ez=16,xs=/^[0-9A-F]{32}$/i,fs=/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i;class d0 extends C1{constructor(Z){let Y;if(Z==null)Y=d0.generate();else if(Z instanceof d0)Y=_.toLocalBufferType(new Uint8Array(Z.buffer));else if(ArrayBuffer.isView(Z)&&Z.byteLength===ez)Y=_.toLocalBufferType(Z);else if(typeof Z==="string")Y=d0.bytesFromString(Z);else throw new u("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");super(Y,XW)}get id(){return this.buffer}set id(Z){this.buffer=Z}toHexString(Z=!0){if(Z)return[_.toHex(this.buffer.subarray(0,4)),_.toHex(this.buffer.subarray(4,6)),_.toHex(this.buffer.subarray(6,8)),_.toHex(this.buffer.subarray(8,10)),_.toHex(this.buffer.subarray(10,16))].join("-");return _.toHex(this.buffer)}toString(Z){if(Z==="hex")return _.toHex(this.id);if(Z==="base64")return _.toBase64(this.id);return this.toHexString()}toJSON(){return this.toHexString()}equals(Z){if(!Z)return!1;if(Z instanceof d0)return _.equals(Z.id,this.id);try{return _.equals(new d0(Z).id,this.id)}catch{return!1}}toBinary(){return new C1(this.id,C1.SUBTYPE_UUID)}static generate(){const Z=_.randomBytes(ez);return Z[6]=Z[6]&15|64,Z[8]=Z[8]&63|128,Z}static isValid(Z){if(!Z)return!1;if(typeof Z==="string")return d0.isValidUUIDString(Z);if(Z9(Z))return Z.byteLength===ez;return Z._bsontype==="Binary"&&Z.sub_type===this.SUBTYPE_UUID&&Z.buffer.byteLength===16}static createFromHexString(Z){const Y=d0.bytesFromString(Z);return new d0(Y)}static createFromBase64(Z){return new d0(_.fromBase64(Z))}static bytesFromString(Z){if(!d0.isValidUUIDString(Z))throw new u("UUID string representation must be 32 hex digits or canonical hyphenated representation");return _.fromHex(Z.replace(/-/g,""))}static isValidUUIDString(Z){return xs.test(Z)||fs.test(Z)}inspect(Z,Y,X){return X??=z6,`new UUID(${X(this.toHexString(),Y)})`}}class F4 extends A8{get _bsontype(){return"Code"}constructor(Z,Y){super();this.code=Z.toString(),this.scope=Y??null}toJSON(){if(this.scope!=null)return{code:this.code,scope:this.scope};return{code:this.code}}toExtendedJSON(){if(this.scope)return{$code:this.code,$scope:this.scope};return{$code:this.code}}static fromExtendedJSON(Z){return new F4(Z.$code,Z.$scope)}inspect(Z,Y,X){X??=z6;let J=X(this.code,Y);const $=J.includes("\n");if(this.scope!=null)J+=`,${$?"\n":" "}${X(this.scope,Y)}`;const W=$&&this.scope===null;return`new Code(${$?"\n":""}${J}${W?"\n":""})`}}class x7 extends A8{get _bsontype(){return"DBRef"}constructor(Z,Y,X,J){super();const $=Z.split(".");if($.length===2)X=$.shift(),Z=$.shift();this.collection=Z,this.oid=Y,this.db=X,this.fields=J||{}}get namespace(){return this.collection}set namespace(Z){this.collection=Z}toJSON(){const Z=Object.assign({$ref:this.collection,$id:this.oid},this.fields);if(this.db!=null)Z.$db=this.db;return Z}toExtendedJSON(Z){Z=Z||{};let Y={$ref:this.collection,$id:this.oid};if(Z.legacy)return Y;if(this.db)Y.$db=this.db;return Y=Object.assign(Y,this.fields),Y}static fromExtendedJSON(Z){const Y=Object.assign({},Z);return delete Y.$ref,delete Y.$id,delete Y.$db,new x7(Z.$ref,Z.$id,Z.$db,Y)}inspect(Z,Y,X){X??=z6;const J=[X(this.namespace,Y),X(this.oid,Y),...this.db?[X(this.db,Y)]:[],...Object.keys(this.fields).length>0?[X(this.fields,Y)]:[]];return J[1]=X===z6?`new ObjectId(${J[1]})`:J[1],`new DBRef(${J.join(", ")})`}}var E6=void 0;try{E6=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}var aN=1<<16,ys=1<<24,vZ=aN*aN,TA=vZ*vZ,sN=TA/2,rN={},tN={},gs=20,bs=/^(\+?0|(\+|-)?[1-9][0-9]*)$/;class T extends A8{get _bsontype(){return"Long"}get __isLong__(){return!0}constructor(Z=0,Y,X){super();if(typeof Z==="bigint")Object.assign(this,T.fromBigInt(Z,!!Y));else if(typeof Z==="string")Object.assign(this,T.fromString(Z,!!Y));else this.low=Z|0,this.high=Y|0,this.unsigned=!!X}static fromBits(Z,Y,X){return new T(Z,Y,X)}static fromInt(Z,Y){let X,J,$;if(Y){if(Z>>>=0,$=0<=Z&&Z<256){if(J=tN[Z],J)return J}if(X=T.fromBits(Z,(Z|0)<0?-1:0,!0),$)tN[Z]=X;return X}else{if(Z|=0,$=-128<=Z&&Z<128){if(J=rN[Z],J)return J}if(X=T.fromBits(Z,Z<0?-1:0,!1),$)rN[Z]=X;return X}}static fromNumber(Z,Y){if(isNaN(Z))return Y?T.UZERO:T.ZERO;if(Y){if(Z<0)return T.UZERO;if(Z>=TA)return T.MAX_UNSIGNED_VALUE}else{if(Z<=-sN)return T.MIN_VALUE;if(Z+1>=sN)return T.MAX_VALUE}if(Z<0)return T.fromNumber(-Z,Y).neg();return T.fromBits(Z%vZ|0,Z/vZ|0,Y)}static fromBigInt(Z,Y){return T.fromString(Z.toString(),Y)}static fromString(Z,Y,X){if(Z.length===0)throw new u("empty string");if(Z==="NaN"||Z==="Infinity"||Z==="+Infinity"||Z==="-Infinity")return T.ZERO;if(typeof Y==="number")X=Y,Y=!1;else Y=!!Y;if(X=X||10,X<2||36<X)throw new u("radix");let J;if((J=Z.indexOf("-"))>0)throw new u("interior hyphen");else if(J===0)return T.fromString(Z.substring(1),Y,X).neg();const $=T.fromNumber(Math.pow(X,8));let W=T.ZERO;for(let G=0;G<Z.length;G+=8){const K=Math.min(8,Z.length-G),Q=parseInt(Z.substring(G,G+K),X);if(K<8){const z=T.fromNumber(Math.pow(X,K));W=W.mul(z).add(T.fromNumber(Q))}else W=W.mul($),W=W.add(T.fromNumber(Q))}return W.unsigned=Y,W}static fromBytes(Z,Y,X){return X?T.fromBytesLE(Z,Y):T.fromBytesBE(Z,Y)}static fromBytesLE(Z,Y){return new T(Z[0]|Z[1]<<8|Z[2]<<16|Z[3]<<24,Z[4]|Z[5]<<8|Z[6]<<16|Z[7]<<24,Y)}static fromBytesBE(Z,Y){return new T(Z[4]<<24|Z[5]<<16|Z[6]<<8|Z[7],Z[0]<<24|Z[1]<<16|Z[2]<<8|Z[3],Y)}static isLong(Z){return Z!=null&&typeof Z==="object"&&("__isLong__"in Z)&&Z.__isLong__===!0}static fromValue(Z,Y){if(typeof Z==="number")return T.fromNumber(Z,Y);if(typeof Z==="string")return T.fromString(Z,Y);return T.fromBits(Z.low,Z.high,typeof Y==="boolean"?Y:Z.unsigned)}add(Z){if(!T.isLong(Z))Z=T.fromValue(Z);const Y=this.high>>>16,X=this.high&65535,J=this.low>>>16,$=this.low&65535,W=Z.high>>>16,G=Z.high&65535,K=Z.low>>>16,Q=Z.low&65535;let z=0,H=0,F=0,U=0;return U+=$+Q,F+=U>>>16,U&=65535,F+=J+K,H+=F>>>16,F&=65535,H+=X+G,z+=H>>>16,H&=65535,z+=Y+W,z&=65535,T.fromBits(F<<16|U,z<<16|H,this.unsigned)}and(Z){if(!T.isLong(Z))Z=T.fromValue(Z);return T.fromBits(this.low&Z.low,this.high&Z.high,this.unsigned)}compare(Z){if(!T.isLong(Z))Z=T.fromValue(Z);if(this.eq(Z))return 0;const Y=this.isNegative(),X=Z.isNegative();if(Y&&!X)return-1;if(!Y&&X)return 1;if(!this.unsigned)return this.sub(Z).isNegative()?-1:1;return Z.high>>>0>this.high>>>0||Z.high===this.high&&Z.low>>>0>this.low>>>0?-1:1}comp(Z){return this.compare(Z)}divide(Z){if(!T.isLong(Z))Z=T.fromValue(Z);if(Z.isZero())throw new u("division by zero");if(E6){if(!this.unsigned&&this.high===-2147483648&&Z.low===-1&&Z.high===-1)return this;const $=(this.unsigned?E6.div_u:E6.div_s)(this.low,this.high,Z.low,Z.high);return T.fromBits($,E6.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?T.UZERO:T.ZERO;let Y,X,J;if(!this.unsigned){if(this.eq(T.MIN_VALUE))if(Z.eq(T.ONE)||Z.eq(T.NEG_ONE))return T.MIN_VALUE;else if(Z.eq(T.MIN_VALUE))return T.ONE;else if(Y=this.shr(1).div(Z).shl(1),Y.eq(T.ZERO))return Z.isNegative()?T.ONE:T.NEG_ONE;else return X=this.sub(Z.mul(Y)),J=Y.add(X.div(Z)),J;else if(Z.eq(T.MIN_VALUE))return this.unsigned?T.UZERO:T.ZERO;if(this.isNegative()){if(Z.isNegative())return this.neg().div(Z.neg());return this.neg().div(Z).neg()}else if(Z.isNegative())return this.div(Z.neg()).neg();J=T.ZERO}else{if(!Z.unsigned)Z=Z.toUnsigned();if(Z.gt(this))return T.UZERO;if(Z.gt(this.shru(1)))return T.UONE;J=T.UZERO}X=this;while(X.gte(Z)){Y=Math.max(1,Math.floor(X.toNumber()/Z.toNumber()));const $=Math.ceil(Math.log(Y)/Math.LN2),W=$<=48?1:Math.pow(2,$-48);let G=T.fromNumber(Y),K=G.mul(Z);while(K.isNegative()||K.gt(X))Y-=W,G=T.fromNumber(Y,this.unsigned),K=G.mul(Z);if(G.isZero())G=T.ONE;J=J.add(G),X=X.sub(K)}return J}div(Z){return this.divide(Z)}equals(Z){if(!T.isLong(Z))Z=T.fromValue(Z);if(this.unsigned!==Z.unsigned&&this.high>>>31===1&&Z.high>>>31===1)return!1;return this.high===Z.high&&this.low===Z.low}eq(Z){return this.equals(Z)}getHighBits(){return this.high}getHighBitsUnsigned(){return this.high>>>0}getLowBits(){return this.low}getLowBitsUnsigned(){return this.low>>>0}getNumBitsAbs(){if(this.isNegative())return this.eq(T.MIN_VALUE)?64:this.neg().getNumBitsAbs();const Z=this.high!==0?this.high:this.low;let Y;for(Y=31;Y>0;Y--)if((Z&1<<Y)!==0)break;return this.high!==0?Y+33:Y+1}greaterThan(Z){return this.comp(Z)>0}gt(Z){return this.greaterThan(Z)}greaterThanOrEqual(Z){return this.comp(Z)>=0}gte(Z){return this.greaterThanOrEqual(Z)}ge(Z){return this.greaterThanOrEqual(Z)}isEven(){return(this.low&1)===0}isNegative(){return!this.unsigned&&this.high<0}isOdd(){return(this.low&1)===1}isPositive(){return this.unsigned||this.high>=0}isZero(){return this.high===0&&this.low===0}lessThan(Z){return this.comp(Z)<0}lt(Z){return this.lessThan(Z)}lessThanOrEqual(Z){return this.comp(Z)<=0}lte(Z){return this.lessThanOrEqual(Z)}modulo(Z){if(!T.isLong(Z))Z=T.fromValue(Z);if(E6){const Y=(this.unsigned?E6.rem_u:E6.rem_s)(this.low,this.high,Z.low,Z.high);return T.fromBits(Y,E6.get_high(),this.unsigned)}return this.sub(this.div(Z).mul(Z))}mod(Z){return this.modulo(Z)}rem(Z){return this.modulo(Z)}multiply(Z){if(this.isZero())return T.ZERO;if(!T.isLong(Z))Z=T.fromValue(Z);if(E6){const V=E6.mul(this.low,this.high,Z.low,Z.high);return T.fromBits(V,E6.get_high(),this.unsigned)}if(Z.isZero())return T.ZERO;if(this.eq(T.MIN_VALUE))return Z.isOdd()?T.MIN_VALUE:T.ZERO;if(Z.eq(T.MIN_VALUE))return this.isOdd()?T.MIN_VALUE:T.ZERO;if(this.isNegative())if(Z.isNegative())return this.neg().mul(Z.neg());else return this.neg().mul(Z).neg();else if(Z.isNegative())return this.mul(Z.neg()).neg();if(this.lt(T.TWO_PWR_24)&&Z.lt(T.TWO_PWR_24))return T.fromNumber(this.toNumber()*Z.toNumber(),this.unsigned);const Y=this.high>>>16,X=this.high&65535,J=this.low>>>16,$=this.low&65535,W=Z.high>>>16,G=Z.high&65535,K=Z.low>>>16,Q=Z.low&65535;let z=0,H=0,F=0,U=0;return U+=$*Q,F+=U>>>16,U&=65535,F+=J*Q,H+=F>>>16,F&=65535,F+=$*K,H+=F>>>16,F&=65535,H+=X*Q,z+=H>>>16,H&=65535,H+=J*K,z+=H>>>16,H&=65535,H+=$*G,z+=H>>>16,H&=65535,z+=Y*Q+X*K+J*G+$*W,z&=65535,T.fromBits(F<<16|U,z<<16|H,this.unsigned)}mul(Z){return this.multiply(Z)}negate(){if(!this.unsigned&&this.eq(T.MIN_VALUE))return T.MIN_VALUE;return this.not().add(T.ONE)}neg(){return this.negate()}not(){return T.fromBits(~this.low,~this.high,this.unsigned)}notEquals(Z){return!this.equals(Z)}neq(Z){return this.notEquals(Z)}ne(Z){return this.notEquals(Z)}or(Z){if(!T.isLong(Z))Z=T.fromValue(Z);return T.fromBits(this.low|Z.low,this.high|Z.high,this.unsigned)}shiftLeft(Z){if(T.isLong(Z))Z=Z.toInt();if((Z&=63)===0)return this;else if(Z<32)return T.fromBits(this.low<<Z,this.high<<Z|this.low>>>32-Z,this.unsigned);else return T.fromBits(0,this.low<<Z-32,this.unsigned)}shl(Z){return this.shiftLeft(Z)}shiftRight(Z){if(T.isLong(Z))Z=Z.toInt();if((Z&=63)===0)return this;else if(Z<32)return T.fromBits(this.low>>>Z|this.high<<32-Z,this.high>>Z,this.unsigned);else return T.fromBits(this.high>>Z-32,this.high>=0?0:-1,this.unsigned)}shr(Z){return this.shiftRight(Z)}shiftRightUnsigned(Z){if(T.isLong(Z))Z=Z.toInt();if(Z&=63,Z===0)return this;else{const Y=this.high;if(Z<32){const X=this.low;return T.fromBits(X>>>Z|Y<<32-Z,Y>>>Z,this.unsigned)}else if(Z===32)return T.fromBits(Y,0,this.unsigned);else return T.fromBits(Y>>>Z-32,0,this.unsigned)}}shr_u(Z){return this.shiftRightUnsigned(Z)}shru(Z){return this.shiftRightUnsigned(Z)}subtract(Z){if(!T.isLong(Z))Z=T.fromValue(Z);return this.add(Z.neg())}sub(Z){return this.subtract(Z)}toInt(){return this.unsigned?this.low>>>0:this.low}toNumber(){if(this.unsigned)return(this.high>>>0)*vZ+(this.low>>>0);return this.high*vZ+(this.low>>>0)}toBigInt(){return BigInt(this.toString())}toBytes(Z){return Z?this.toBytesLE():this.toBytesBE()}toBytesLE(){const Z=this.high,Y=this.low;return[Y&255,Y>>>8&255,Y>>>16&255,Y>>>24,Z&255,Z>>>8&255,Z>>>16&255,Z>>>24]}toBytesBE(){const Z=this.high,Y=this.low;return[Z>>>24,Z>>>16&255,Z>>>8&255,Z&255,Y>>>24,Y>>>16&255,Y>>>8&255,Y&255]}toSigned(){if(!this.unsigned)return this;return T.fromBits(this.low,this.high,!1)}toString(Z){if(Z=Z||10,Z<2||36<Z)throw new u("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(T.MIN_VALUE)){const $=T.fromNumber(Z),W=this.div($),G=W.mul($).sub(this);return W.toString(Z)+G.toInt().toString(Z)}else return"-"+this.neg().toString(Z);const Y=T.fromNumber(Math.pow(Z,6),this.unsigned);let X=this,J="";while(!0){const $=X.div(Y);let G=(X.sub($.mul(Y)).toInt()>>>0).toString(Z);if(X=$,X.isZero())return G+J;else{while(G.length<6)G="0"+G;J=""+G+J}}}toUnsigned(){if(this.unsigned)return this;return T.fromBits(this.low,this.high,!0)}xor(Z){if(!T.isLong(Z))Z=T.fromValue(Z);return T.fromBits(this.low^Z.low,this.high^Z.high,this.unsigned)}eqz(){return this.isZero()}le(Z){return this.lessThanOrEqual(Z)}toExtendedJSON(Z){if(Z&&Z.relaxed)return this.toNumber();return{$numberLong:this.toString()}}static fromExtendedJSON(Z,Y){const{useBigInt64:X=!1,relaxed:J=!0}={...Y};if(Z.$numberLong.length>gs)throw new u("$numberLong string is too long");if(!bs.test(Z.$numberLong))throw new u(`\$numberLong string "${Z.$numberLong}" is in an invalid format`);if(X){const W=BigInt(Z.$numberLong);return BigInt.asIntN(64,W)}const $=T.fromString(Z.$numberLong);if(J)return $.toNumber();return $}inspect(Z,Y,X){X??=z6;const J=X(this.toString(),Y),$=this.unsigned?`, ${X(this.unsigned,Y)}`:"";return`new Long(${J}${$})`}}T.TWO_PWR_24=T.fromInt(ys);T.MAX_UNSIGNED_VALUE=T.fromBits(4294967295|0,4294967295|0,!0);T.ZERO=T.fromInt(0);T.UZERO=T.fromInt(0,!0);T.ONE=T.fromInt(1);T.UONE=T.fromInt(1,!0);T.NEG_ONE=T.fromInt(-1);T.MAX_VALUE=T.fromBits(4294967295|0,2147483647|0,!1);T.MIN_VALUE=T.fromBits(0,2147483648|0,!1);var vs=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,hs=/^(\+|-)?(Infinity|inf)$/i,ms=/^(\+|-)?NaN$/i,yZ=6111,YJ=-6176,oN=6176,eN=34,ZH=_.fromNumberArray([124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),ZA=_.fromNumberArray([248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),YA=_.fromNumberArray([120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),us=/^([-+])?(\d+)?$/,ds=31,XA=16383,cs=30,ls=31;class F8 extends A8{get _bsontype(){return"Decimal128"}constructor(Z){super();if(typeof Z==="string")this.bytes=F8.fromString(Z).bytes;else if(Z9(Z)){if(Z.byteLength!==16)throw new u("Decimal128 must take a Buffer of 16 bytes");this.bytes=Z}else throw new u("Decimal128 must take a Buffer or string")}static fromString(Z){return F8._fromString(Z,{allowRounding:!1})}static fromStringWithRounding(Z){return F8._fromString(Z,{allowRounding:!0})}static _fromString(Z,Y){let X=!1,J=!1,$=!1,W=!1,G=0,K=0,Q=0,z=0,H=0;const F=[0];let U=0,V=0,q=0,L=0,R=new T(0,0),B=new T(0,0),N=0,M=0;if(Z.length>=7000)throw new u(""+Z+" not a valid Decimal128 string");const D=Z.match(vs),m=Z.match(hs),O=Z.match(ms);if(!D&&!m&&!O||Z.length===0)throw new u(""+Z+" not a valid Decimal128 string");if(D){const c=D[2],y=D[4],C=D[5],S=D[6];if(y&&S===void 0)W7(Z,"missing exponent power");if(y&&c===void 0)W7(Z,"missing exponent base");if(y===void 0&&(C||S))W7(Z,"missing e before exponent")}if(Z[M]==="+"||Z[M]==="-")J=!0,X=Z[M++]==="-";if(!JA(Z[M])&&Z[M]!=="."){if(Z[M]==="i"||Z[M]==="I")return new F8(X?ZA:YA);else if(Z[M]==="N")return new F8(ZH)}while(JA(Z[M])||Z[M]==="."){if(Z[M]==="."){if($)W7(Z,"contains multiple periods");$=!0,M=M+1;continue}if(U<eN){if(Z[M]!=="0"||W){if(!W)H=K;W=!0,F[V++]=parseInt(Z[M],10),U=U+1}}if(W)Q=Q+1;if($)z=z+1;K=K+1,M=M+1}if($&&!K)throw new u(""+Z+" not a valid Decimal128 string");if(Z[M]==="e"||Z[M]==="E"){const c=Z.substr(++M).match(us);if(!c||!c[2])return new F8(ZH);L=parseInt(c[0],10),M=M+c[0].length}if(Z[M])return new F8(ZH);if(!U)F[0]=0,Q=1,U=1,G=0;else if(q=U-1,G=Q,G!==1)while(Z[H+G-1+Number(J)+Number($)]==="0")G=G-1;if(L<=z&&z>L+(1<<14))L=YJ;else L=L-z;while(L>yZ){if(q=q+1,q>=eN){if(G===0){L=yZ;break}W7(Z,"overflow")}L=L-1}if(Y.allowRounding){while(L<YJ||U<Q){if(q===0&&G<U){L=YJ,G=0;break}if(U<Q)Q=Q-1;else q=q-1;if(L<yZ)L=L+1;else{if(F.join("").match(/^0+$/)){L=yZ;break}W7(Z,"overflow")}}if(q+1<G){let c=K;if($)H=H+1,c=c+1;if(J)H=H+1,c=c+1;const y=parseInt(Z[H+q+1],10);let C=0;if(y>=5){if(C=1,y===5){C=F[q]%2===1?1:0;for(let S=H+q+2;S<c;S++)if(parseInt(Z[S],10)){C=1;break}}}if(C){let S=q;for(;S>=0;S--)if(++F[S]>9){if(F[S]=0,S===0)if(L<yZ)L=L+1,F[S]=1;else return new F8(X?ZA:YA)}else break}}}else{while(L<YJ||U<Q){if(q===0){if(G===0){L=YJ;break}W7(Z,"exponent underflow")}if(U<Q){if(Z[Q-1+Number(J)+Number($)]!=="0"&&G!==0)W7(Z,"inexact rounding");Q=Q-1}else{if(F[q]!==0)W7(Z,"inexact rounding");q=q-1}if(L<yZ)L=L+1;else W7(Z,"overflow")}if(q+1<G){if($)H=H+1;if(J)H=H+1;if(parseInt(Z[H+q+1],10)!==0)W7(Z,"inexact rounding")}}if(R=T.fromNumber(0),B=T.fromNumber(0),G===0)R=T.fromNumber(0),B=T.fromNumber(0);else if(q<17){let c=0;B=T.fromNumber(F[c++]),R=new T(0,0);for(;c<=q;c++)B=B.multiply(T.fromNumber(10)),B=B.add(T.fromNumber(F[c]))}else{let c=0;R=T.fromNumber(F[c++]);for(;c<=q-17;c++)R=R.multiply(T.fromNumber(10)),R=R.add(T.fromNumber(F[c]));B=T.fromNumber(F[c++]);for(;c<=q;c++)B=B.multiply(T.fromNumber(10)),B=B.add(T.fromNumber(F[c]))}const E=is(R,T.fromString("100000000000000000"));if(E.low=E.low.add(B),ns(E.low,B))E.high=E.high.add(T.fromNumber(1));N=L+oN;const j={low:T.fromNumber(0),high:T.fromNumber(0)};if(E.high.shiftRightUnsigned(49).and(T.fromNumber(1)).equals(T.fromNumber(1)))j.high=j.high.or(T.fromNumber(3).shiftLeft(61)),j.high=j.high.or(T.fromNumber(N).and(T.fromNumber(16383).shiftLeft(47))),j.high=j.high.or(E.high.and(T.fromNumber(140737488355327)));else j.high=j.high.or(T.fromNumber(N&16383).shiftLeft(49)),j.high=j.high.or(E.high.and(T.fromNumber(562949953421311)));if(j.low=E.low,X)j.high=j.high.or(T.fromString("9223372036854775808"));const n=_.allocate(16);return M=0,n[M++]=j.low.low&255,n[M++]=j.low.low>>8&255,n[M++]=j.low.low>>16&255,n[M++]=j.low.low>>24&255,n[M++]=j.low.high&255,n[M++]=j.low.high>>8&255,n[M++]=j.low.high>>16&255,n[M++]=j.low.high>>24&255,n[M++]=j.high.low&255,n[M++]=j.high.low>>8&255,n[M++]=j.high.low>>16&255,n[M++]=j.high.low>>24&255,n[M++]=j.high.high&255,n[M++]=j.high.high>>8&255,n[M++]=j.high.high>>16&255,n[M++]=j.high.high>>24&255,new F8(n)}toString(){let Z,Y=0;const X=new Array(36);for(let M=0;M<X.length;M++)X[M]=0;let J=0,$=!1,W,G={parts:[0,0,0,0]},K,Q;const z=[];J=0;const H=this.bytes,F=H[J++]|H[J++]<<8|H[J++]<<16|H[J++]<<24,U=H[J++]|H[J++]<<8|H[J++]<<16|H[J++]<<24,V=H[J++]|H[J++]<<8|H[J++]<<16|H[J++]<<24,q=H[J++]|H[J++]<<8|H[J++]<<16|H[J++]<<24;if(J=0,{low:new T(F,U),high:new T(V,q)}.high.lessThan(T.ZERO))z.push("-");const R=q>>26&ds;if(R>>3===3)if(R===cs)return z.join("")+"Infinity";else if(R===ls)return"NaN";else Z=q>>15&XA,W=8+(q>>14&1);else W=q>>14&7,Z=q>>17&XA;const B=Z-oN;if(G.parts[0]=(q&16383)+((W&15)<<14),G.parts[1]=V,G.parts[2]=U,G.parts[3]=F,G.parts[0]===0&&G.parts[1]===0&&G.parts[2]===0&&G.parts[3]===0)$=!0;else for(Q=3;Q>=0;Q--){let M=0;const D=ps(G);if(G=D.quotient,M=D.rem.low,!M)continue;for(K=8;K>=0;K--)X[Q*9+K]=M%10,M=Math.floor(M/10)}if($)Y=1,X[J]=0;else{Y=36;while(!X[J])Y=Y-1,J=J+1}const N=Y-1+B;if(N>=34||N<=-7||B>0){if(Y>34){if(z.push("0"),B>0)z.push(`E+${B}`);else if(B<0)z.push(`E${B}`);return z.join("")}if(z.push(`${X[J++]}`),Y=Y-1,Y)z.push(".");for(let M=0;M<Y;M++)z.push(`${X[J++]}`);if(z.push("E"),N>0)z.push(`+${N}`);else z.push(`${N}`)}else if(B>=0)for(let M=0;M<Y;M++)z.push(`${X[J++]}`);else{let M=Y+B;if(M>0)for(let D=0;D<M;D++)z.push(`${X[J++]}`);else z.push("0");z.push(".");while(M++<0)z.push("0");for(let D=0;D<Y-Math.max(M-1,0);D++)z.push(`${X[J++]}`)}return z.join("")}toJSON(){return{$numberDecimal:this.toString()}}toExtendedJSON(){return{$numberDecimal:this.toString()}}static fromExtendedJSON(Z){return F8.fromString(Z.$numberDecimal)}inspect(Z,Y,X){return X??=z6,`new Decimal128(${X(this.toString(),Y)})`}}class r4 extends A8{get _bsontype(){return"Double"}constructor(Z){super();if(Z instanceof Number)Z=Z.valueOf();this.value=+Z}valueOf(){return this.value}toJSON(){return this.value}toString(Z){return this.value.toString(Z)}toExtendedJSON(Z){if(Z&&(Z.legacy||Z.relaxed&&isFinite(this.value)))return this.value;if(Object.is(Math.sign(this.value),-0))return{$numberDouble:"-0.0"};return{$numberDouble:Number.isInteger(this.value)?this.value.toFixed(1):this.value.toString()}}static fromExtendedJSON(Z,Y){const X=parseFloat(Z.$numberDouble);return Y&&Y.relaxed?X:new r4(X)}inspect(Z,Y,X){return X??=z6,`new Double(${X(this.value,Y)})`}}class t4 extends A8{get _bsontype(){return"Int32"}constructor(Z){super();if(Z instanceof Number)Z=Z.valueOf();this.value=+Z|0}valueOf(){return this.value}toString(Z){return this.value.toString(Z)}toJSON(){return this.value}toExtendedJSON(Z){if(Z&&(Z.relaxed||Z.legacy))return this.value;return{$numberInt:this.value.toString()}}static fromExtendedJSON(Z,Y){return Y&&Y.relaxed?parseInt(Z.$numberInt,10):new t4(Z.$numberInt)}inspect(Z,Y,X){return X??=z6,`new Int32(${X(this.value,Y)})`}}class X9 extends A8{get _bsontype(){return"MaxKey"}toExtendedJSON(){return{$maxKey:1}}static fromExtendedJSON(){return new X9}inspect(){return"new MaxKey()"}}class J9 extends A8{get _bsontype(){return"MinKey"}toExtendedJSON(){return{$minKey:1}}static fromExtendedJSON(){return new J9}inspect(){return"new MinKey()"}}var as=new RegExp("^[0-9a-fA-F]{24}$"),e5=null,z4=Symbol("id");class V0 extends A8{get _bsontype(){return"ObjectId"}constructor(Z){super();let Y;if(typeof Z==="object"&&Z&&("id"in Z)){if(typeof Z.id!=="string"&&!ArrayBuffer.isView(Z.id))throw new u("Argument passed in must have an id that is of type string or Buffer");if(("toHexString"in Z)&&typeof Z.toHexString==="function")Y=_.fromHex(Z.toHexString());else Y=Z.id}else Y=Z;if(Y==null||typeof Y==="number")this[z4]=V0.generate(typeof Y==="number"?Y:void 0);else if(ArrayBuffer.isView(Y)&&Y.byteLength===12)this[z4]=_.toLocalBufferType(Y);else if(typeof Y==="string")if(Y.length===24&&as.test(Y))this[z4]=_.fromHex(Y);else throw new u("input must be a 24 character hex string, 12 byte Uint8Array, or an integer");else throw new u("Argument passed in does not match the accepted types");if(V0.cacheHexString)this.__id=_.toHex(this.id)}get id(){return this[z4]}set id(Z){if(this[z4]=Z,V0.cacheHexString)this.__id=_.toHex(Z)}toHexString(){if(V0.cacheHexString&&this.__id)return this.__id;const Z=_.toHex(this.id);if(V0.cacheHexString&&!this.__id)this.__id=Z;return Z}static getInc(){return V0.index=(V0.index+1)%16777215}static generate(Z){if(typeof Z!=="number")Z=Math.floor(Date.now()/1000);const Y=V0.getInc(),X=_.allocate(12);if(JJ.fromUint8Array(X).setUint32(0,Z,!1),e5===null)e5=_.randomBytes(5);return X[4]=e5[0],X[5]=e5[1],X[6]=e5[2],X[7]=e5[3],X[8]=e5[4],X[11]=Y&255,X[10]=Y>>8&255,X[9]=Y>>16&255,X}toString(Z){if(Z==="base64")return _.toBase64(this.id);if(Z==="hex")return this.toHexString();return this.toHexString()}toJSON(){return this.toHexString()}static is(Z){return Z!=null&&typeof Z==="object"&&("_bsontype"in Z)&&Z._bsontype==="ObjectId"}equals(Z){if(Z===void 0||Z===null)return!1;if(V0.is(Z))return this[z4][11]===Z[z4][11]&&_.equals(this[z4],Z[z4]);if(typeof Z==="string")return Z.toLowerCase()===this.toHexString();if(typeof Z==="object"&&typeof Z.toHexString==="function"){const Y=Z.toHexString(),X=this.toHexString();return typeof Y==="string"&&Y.toLowerCase()===X}return!1}getTimestamp(){const Z=new Date,Y=JJ.fromUint8Array(this.id).getUint32(0,!1);return Z.setTime(Math.floor(Y)*1000),Z}static createPk(){return new V0}static createFromTime(Z){const Y=_.fromNumberArray([0,0,0,0,0,0,0,0,0,0,0,0]);return JJ.fromUint8Array(Y).setUint32(0,Z,!1),new V0(Y)}static createFromHexString(Z){if(Z?.length!==24)throw new u("hex string must be 24 characters");return new V0(_.fromHex(Z))}static createFromBase64(Z){if(Z?.length!==16)throw new u("base64 string must be 16 characters");return new V0(_.fromBase64(Z))}static isValid(Z){if(Z==null)return!1;try{return new V0(Z),!0}catch{return!1}}toExtendedJSON(){if(this.toHexString)return{$oid:this.toHexString()};return{$oid:this.toString("hex")}}static fromExtendedJSON(Z){return new V0(Z.$oid)}inspect(Z,Y,X){return X??=z6,`new ObjectId(${X(this.toHexString(),Y)})`}}V0.index=Math.floor(Math.random()*16777215);class O6 extends A8{get _bsontype(){return"BSONRegExp"}constructor(Z,Y){super();if(this.pattern=Z,this.options=ss(Y??""),this.pattern.indexOf("\0")!==-1)throw new u(`BSON Regex patterns cannot contain null bytes, found: ${JSON.stringify(this.pattern)}`);if(this.options.indexOf("\0")!==-1)throw new u(`BSON Regex options cannot contain null bytes, found: ${JSON.stringify(this.options)}`);for(let X=0;X<this.options.length;X++)if(!(this.options[X]==="i"||this.options[X]==="m"||this.options[X]==="x"||this.options[X]==="l"||this.options[X]==="s"||this.options[X]==="u"))throw new u(`The regular expression option [${this.options[X]}] is not supported`)}static parseOptions(Z){return Z?Z.split("").sort().join(""):""}toExtendedJSON(Z){if(Z=Z||{},Z.legacy)return{$regex:this.pattern,$options:this.options};return{$regularExpression:{pattern:this.pattern,options:this.options}}}static fromExtendedJSON(Z){if("$regex"in Z)if(typeof Z.$regex!=="string"){if(Z.$regex._bsontype==="BSONRegExp")return Z}else return new O6(Z.$regex,O6.parseOptions(Z.$options));if("$regularExpression"in Z)return new O6(Z.$regularExpression.pattern,O6.parseOptions(Z.$regularExpression.options));throw new u(`Unexpected BSONRegExp EJSON object form: ${JSON.stringify(Z)}`)}inspect(Z,Y,X){const J=Ps(Y)??((G)=>G);X??=z6;const $=J(X(this.pattern),"regexp"),W=J(X(this.options),"regexp");return`new BSONRegExp(${$}, ${W})`}}class $9 extends A8{get _bsontype(){return"BSONSymbol"}constructor(Z){super();this.value=Z}valueOf(){return this.value}toString(){return this.value}toJSON(){return this.value}toExtendedJSON(){return{$symbol:this.value}}static fromExtendedJSON(Z){return new $9(Z.$symbol)}inspect(Z,Y,X){return X??=z6,`new BSONSymbol(${X(this.value,Y)})`}}var ts=T;class C6 extends ts{get _bsontype(){return"Timestamp"}constructor(Z){if(Z==null)super(0,0,!0);else if(typeof Z==="bigint")super(Z,!0);else if(T.isLong(Z))super(Z.low,Z.high,!0);else if(typeof Z==="object"&&("t"in Z)&&("i"in Z)){if(typeof Z.t!=="number"&&(typeof Z.t!=="object"||Z.t._bsontype!=="Int32"))throw new u("Timestamp constructed from { t, i } must provide t as a number");if(typeof Z.i!=="number"&&(typeof Z.i!=="object"||Z.i._bsontype!=="Int32"))throw new u("Timestamp constructed from { t, i } must provide i as a number");const Y=Number(Z.t),X=Number(Z.i);if(Y<0||Number.isNaN(Y))throw new u("Timestamp constructed from { t, i } must provide a positive t");if(X<0||Number.isNaN(X))throw new u("Timestamp constructed from { t, i } must provide a positive i");if(Y>4294967295)throw new u("Timestamp constructed from { t, i } must provide t equal or less than uint32 max");if(X>4294967295)throw new u("Timestamp constructed from { t, i } must provide i equal or less than uint32 max");super(X,Y,!0)}else throw new u("A Timestamp can only be constructed with: bigint, Long, or { t: number; i: number }")}toJSON(){return{$timestamp:this.toString()}}static fromInt(Z){return new C6(T.fromInt(Z,!0))}static fromNumber(Z){return new C6(T.fromNumber(Z,!0))}static fromBits(Z,Y){return new C6({i:Z,t:Y})}static fromString(Z,Y){return new C6(T.fromString(Z,!0,Y))}toExtendedJSON(){return{$timestamp:{t:this.high>>>0,i:this.low>>>0}}}static fromExtendedJSON(Z){const Y=T.isLong(Z.$timestamp.i)?Z.$timestamp.i.getLowBitsUnsigned():Z.$timestamp.i,X=T.isLong(Z.$timestamp.t)?Z.$timestamp.t.getLowBitsUnsigned():Z.$timestamp.t;return new C6({t:X,i:Y})}inspect(Z,Y,X){X??=z6;const J=X(this.high>>>0,Y),$=X(this.low>>>0,Y);return`new Timestamp({ t: ${J}, i: ${$} })`}}C6.MAX_VALUE=T.MAX_UNSIGNED_VALUE;var os=128,es=192,Zr=224,Yr=240,Xr=248,Jr=192,$r=224,Wr=240,Gr=128,Kr=T.fromNumber(zA),Qr=T.fromNumber(HA),zr=/^\$ref$|^\$id$|^\$db$/,JW=/\x00/,WA=new Set(["$db","$ref","$id","$clusterTime"]),uZ=new DataView(new ArrayBuffer(8),0,8),Hr=new Uint8Array(uZ.buffer,0,4),$W=new Uint8Array(uZ.buffer,0,8),Ur={$oid:V0,$binary:C1,$uuid:C1,$symbol:$9,$numberInt:t4,$numberDecimal:F8,$numberDouble:r4,$numberLong:T,$minKey:J9,$maxKey:X9,$regex:O6,$regularExpression:O6,$timestamp:C6},qr={Binary:(Z)=>new C1(Z.value(),Z.sub_type),Code:(Z)=>new F4(Z.code,Z.scope),DBRef:(Z)=>new x7(Z.collection||Z.namespace,Z.oid,Z.db,Z.fields),Decimal128:(Z)=>new F8(Z.bytes),Double:(Z)=>new r4(Z.value),Int32:(Z)=>new t4(Z.value),Long:(Z)=>T.fromBits(Z.low!=null?Z.low:Z.low_,Z.low!=null?Z.high:Z.high_,Z.low!=null?Z.unsigned:Z.unsigned_),MaxKey:()=>new X9,MinKey:()=>new J9,ObjectId:(Z)=>new V0(Z),BSONRegExp:(Z)=>new O6(Z.pattern,Z.options),BSONSymbol:(Z)=>new $9(Z.value),Timestamp:(Z)=>C6.fromBits(Z.low,Z.high)},W9=Object.create(null);W9.parse=CA;W9.stringify=OA;W9.serialize=wr;W9.deserialize=Rr;Object.freeze(W9);var SA=17825792,a4=_.allocate(SA),Mr=Object.freeze({__proto__:null,BSONError:u,BSONRegExp:O6,BSONRuntimeError:$J,BSONSymbol:$9,BSONType:DA,BSONValue:A8,BSONVersionError:s4,Binary:C1,Code:F4,DBRef:x7,Decimal128:F8,Double:r4,EJSON:W9,Int32:t4,Long:T,MaxKey:X9,MinKey:J9,ObjectId:V0,Timestamp:C6,UUID:d0,calculateObjectSize:yA,deserialize:fA,deserializeStream:gA,serialize:_A,serializeWithBufferAndIndex:xA,setInternalBufferSize:kA});Br.BSON=Mr;Br.BSONError=u;Br.BSONRegExp=O6;Br.BSONRuntimeError=$J;Br.BSONSymbol=$9;Br.BSONType=DA;Br.BSONValue=A8;Br.BSONVersionError=s4;Br.Binary=C1;Br.Code=F4;Br.DBRef=x7;Br.Decimal128=F8;Br.Double=r4;Br.EJSON=W9;Br.Int32=t4;Br.Long=T;Br.MaxKey=X9;Br.MinKey=J9;Br.ObjectId=V0;Br.Timestamp=C6;Br.UUID=d0;Br.calculateObjectSize=yA;Br.deserialize=fA;Br.deserializeStream=gA;Br.serialize=_A;Br.serializeWithBufferAndIndex=xA;Br.setInternalBufferSize=kA});var KW=w((fT1,bA)=>{bA.exports=S6().Decimal128});var Z1=w((nr)=>{nr.arrayAtomicsBackupSymbol=Symbol("mongoose#Array#atomicsBackup");nr.arrayAtomicsSymbol=Symbol("mongoose#Array#_atomics");nr.arrayParentSymbol=Symbol("mongoose#Array#_parent");nr.arrayPathSymbol=Symbol("mongoose#Array#_path");nr.arraySchemaSymbol=Symbol("mongoose#Array#_schema");nr.documentArrayParent=Symbol("mongoose#documentArrayParent");nr.documentIsSelected=Symbol("mongoose#Document#isSelected");nr.documentIsModified=Symbol("mongoose#Document#isModified");nr.documentModifiedPaths=Symbol("mongoose#Document#modifiedPaths");nr.documentSchemaSymbol=Symbol("mongoose#Document#schema");nr.getSymbol=Symbol("mongoose#Document#get");nr.modelSymbol=Symbol("mongoose#Model");nr.objectIdSymbol=Symbol("mongoose#ObjectId");nr.populateModelSymbol=Symbol("mongoose#PopulateOptions#Model");nr.schemaTypeSymbol=Symbol("mongoose#schemaType");nr.sessionNewDocuments=Symbol("mongoose#ClientSession#newDocuments");nr.scopeSymbol=Symbol("mongoose#Document#scope");nr.validatorErrorSymbol=Symbol("mongoose#validatorError")});var U4=w((gT1,vA)=>{var GJ=S6().ObjectId,Ut=Z1().objectIdSymbol;Object.defineProperty(GJ.prototype,"_id",{enumerable:!1,configurable:!0,get:function(){return this}});/*!
 * Convenience `valueOf()` to allow comparing ObjectIds using double equals re: gh-7299
 */if(!GJ.prototype.hasOwnProperty("valueOf"))GJ.prototype.valueOf=function Z(){return this.toString()};GJ.prototype[Ut]=!0;vA.exports=GJ});var G9=w((bT1,hA)=>{hA.exports=new Set(["__proto__","constructor","prototype"])});var QW=w((Vt)=>{Vt.isMongooseArray=function(Z){return Array.isArray(Z)&&Z.isMongooseArray}});var KJ=w((hT1,mA)=>{var Lt=QW().isMongooseArray;mA.exports=function(Z){return Z!=null&&(Lt(Z)||Z.$__!=null||Z.isMongooseBuffer||Z.$isMongooseMap)}});var CH=w((mT1,uA)=>{var wt=/^function\s*([^\s(]+)/;uA.exports=function(Z){return Z.name||(Z.toString().trim().match(wt)||[])[1]}});var u8=w((uT1,dA)=>{var Rt=function(Z,Y){return typeof Z==="object"&&Z!==null&&Z._bsontype===Y};dA.exports=Rt});var o4=w((dT1,cA)=>{cA.exports=function(Z){return Buffer.isBuffer(Z)||Object.prototype.toString.call(Z)==="[object Object]"}});var OH=w((cT1,lA)=>{lA.exports=function Z(Y){if(Y==null||typeof Y!=="object")return!1;const X=Object.getPrototypeOf(Y);return!X||X.constructor.name==="Object"}});var dZ=w((Mt)=>{var pA=Symbol("mongoose#trustedSymbol");Mt.trustedSymbol=pA;Mt.trusted=function Z(Y){if(Y==null||typeof Y!=="object")return Y;return Y[pA]=!0,Y}});var w0=w((pT1,nA)=>{var _H=function(Z,Y,X){if(Z==null)return Z;if(Array.isArray(Z))return St(jt(Z)?Z.__array:Z,Y);if(Tt(Z)){if(Y&&Y._skipSingleNestedGetters&&Z.$isSingleNested)Y=Object.assign({},Y,{getters:!1});const $=Z.$isSingleNested;if(Ct(Z)&&Z.$__!=null&&Z._doc!=null)return Z._doc;let W;if(Y&&Y.json&&typeof Z.toJSON==="function")W=Z.toJSON(Y);else W=Z.toObject(Y);if(Y&&Y.minimize&&$&&Object.keys(W).length===0)return;return W}const J=Z.constructor;if(J)switch(It(J)){case"Object":return kH(Z,Y,X);case"Date":return new J(+Z);case"RegExp":return kt(Z);default:break}if(iA(Z,"ObjectId")){if(Y&&Y.flattenObjectIds)return Z.toJSON();return new Dt(Z.id)}if(iA(Z,"Decimal128")){if(Y&&Y.flattenDecimals)return Z.toJSON();return At.fromString(Z.toString())}if(!J&&Et(Z))return kH(Z,Y,X);if(typeof Z==="object"&&Z[Ot.schemaTypeSymbol])return Z.clone();if(Y&&Y.bson&&typeof Z.toBSON==="function")return Z;if(typeof Z.valueOf==="function")return Z.valueOf();return kH(Z,Y,X)},kH=function(Z,Y,X){const J=Y&&Y.minimize,$=Y&&Y.omitUndefined,W=Y&&Y._seen,G={};let K;if(W&&W.has(Z))return W.get(Z);else if(W)W.set(Z,G);if(SH in Z)G[SH]=Z[SH];let Q=0,z="";const H=Object.keys(Z),F=H.length;for(Q=0;Q<F;++Q){if(Pt.has(z=H[Q]))continue;const U=_H(Z[z],Y,!1);if((J===!1||$)&&typeof U==="undefined")delete G[z];else if(J!==!0||typeof U!=="undefined")K||(K=!0),G[z]=U}return J&&!X?K&&G:G},St=function(Z,Y){let X=0;const J=Z.length,$=new Array(J);for(X=0;X<J;++X)$[X]=_H(Z[X],Y,!0);return $},kt=function(Z){const Y=new RegExp(Z.source,Z.flags);if(Y.lastIndex!==Z.lastIndex)Y.lastIndex=Z.lastIndex;return Y},At=KW(),Dt=U4(),Pt=G9(),Tt=KJ(),It=CH(),iA=u8(),jt=QW().isMongooseArray,Et=o4(),Ct=OH(),Ot=Z1(),SH=dZ().trustedSymbol;nA.exports=_H;/*!
 * ignore
 */});var cZ=w((aA,sA)=>{/*!
 * Connection states
 */var f7=sA.exports=aA=Object.create(null);f7[0]="disconnected";f7[1]="connected";f7[2]="connecting";f7[3]="disconnecting";f7[99]="uninitialized";f7["disconnected"]=0;f7["connected"]=1;f7["connecting"]=2;f7["disconnecting"]=3;f7["uninitialized"]=99});var H6=w((iT1,rA)=>{/*!
 * Centralize this so we can more easily work around issues with people
 * stubbing out `process.nextTick()` in tests using sinon:
 * https://github.com/sinonjs/lolex#automatically-incrementing-mocked-time
 * See gh-6074
 */var _t=typeof process!=="undefined"&&typeof process.nextTick==="function"?process.nextTick.bind(process):(Z)=>setTimeout(Z,0);rA.exports=function Z(Y){return _t(Y)}});var eA=w((nT1,oA)=>{var c1=function(Z,Y,X){if(X===void 0)X={};if(this.opts=X,this.name=Z,this.collectionName=Z,this.conn=Y,this.queue=[],this.buffer=!0,this.emitter=new xt,ft.connected===this.conn.readyState)this.onOpen()};/*!
 * Module dependencies.
 */var xt=import.meta.require("events").EventEmitter,ft=cZ(),tA=H6();c1.prototype.name;c1.prototype.collectionName;c1.prototype.conn;c1.prototype.onOpen=function(){this.buffer=!1,tA(()=>this.doQueue())};c1.prototype.onClose=function(){};c1.prototype.addQueue=function(Z,Y){return this.queue.push([Z,Y]),this};c1.prototype.removeQueue=function(Z,Y){const X=this.queue.findIndex((J)=>J[0]===Z&&J[1]===Y);if(X===-1)return!1;return this.queue.splice(X,1),!0};c1.prototype.doQueue=function(){for(let Y of this.queue)if(typeof Y[0]==="function")Y[0].apply(this,Y[1]);else this[Y[0]].apply(this,Y[1]);this.queue=[];const Z=this;return tA(function(){Z.emitter.emit("queue")}),this};c1.prototype.ensureIndex=function(){throw new Error("Collection#ensureIndex unimplemented by driver")};c1.prototype.createIndex=function(){throw new Error("Collection#createIndex unimplemented by driver")};c1.prototype.findAndModify=function(){throw new Error("Collection#findAndModify unimplemented by driver")};c1.prototype.findOneAndUpdate=function(){throw new Error("Collection#findOneAndUpdate unimplemented by driver")};c1.prototype.findOneAndDelete=function(){throw new Error("Collection#findOneAndDelete unimplemented by driver")};c1.prototype.findOneAndReplace=function(){throw new Error("Collection#findOneAndReplace unimplemented by driver")};c1.prototype.findOne=function(){throw new Error("Collection#findOne unimplemented by driver")};c1.prototype.find=function(){throw new Error("Collection#find unimplemented by driver")};c1.prototype.insert=function(){throw new Error("Collection#insert unimplemented by driver")};c1.prototype.insertOne=function(){throw new Error("Collection#insertOne unimplemented by driver")};c1.prototype.insertMany=function(){throw new Error("Collection#insertMany unimplemented by driver")};c1.prototype.save=function(){throw new Error("Collection#save unimplemented by driver")};c1.prototype.updateOne=function(){throw new Error("Collection#updateOne unimplemented by driver")};c1.prototype.updateMany=function(){throw new Error("Collection#updateMany unimplemented by driver")};c1.prototype.deleteOne=function(){throw new Error("Collection#deleteOne unimplemented by driver")};c1.prototype.deleteMany=function(){throw new Error("Collection#deleteMany unimplemented by driver")};c1.prototype.getIndexes=function(){throw new Error("Collection#getIndexes unimplemented by driver")};c1.prototype.watch=function(){throw new Error("Collection#watch unimplemented by driver")};/*!
 * ignore
 */c1.prototype._shouldBufferCommands=function Z(){const Y=this.opts;if(Y.bufferCommands!=null)return Y.bufferCommands;if(Y&&Y.schemaUserProvidedOptions!=null&&Y.schemaUserProvidedOptions.bufferCommands!=null)return Y.schemaUserProvidedOptions.bufferCommands;return this.conn._shouldBufferCommands()};/*!
 * ignore
 */c1.prototype._getBufferTimeoutMS=function Z(){const Y=this.conn,X=this.opts;if(X.bufferTimeoutMS!=null)return X.bufferTimeoutMS;if(X&&X.schemaUserProvidedOptions!=null&&X.schemaUserProvidedOptions.bufferTimeoutMS!=null)return X.schemaUserProvidedOptions.bufferTimeoutMS;if(Y.config.bufferTimeoutMS!=null)return Y.config.bufferTimeoutMS;if(Y.base!=null&&Y.base.get("bufferTimeoutMS")!=null)return Y.base.get("bufferTimeoutMS");return 1e4};/*!
 * Module exports.
 */oA.exports=c1});var W0=w((aT1,Z2)=>{/*!
 * ignore
 */class xH extends Error{}Object.defineProperty(xH.prototype,"name",{value:"MongooseError"});Z2.exports=xH});var Z0=w((N0)=>{var yt=function(Z){const{fieldsAsRaw:Y,useBigInt64:X,promoteValues:J,promoteBuffers:$,promoteLongs:W,serializeFunctions:G,ignoreUndefined:K,bsonRegExp:Q,raw:z,enableUtf8Validation:H}=Z;return{fieldsAsRaw:Y,useBigInt64:X,promoteValues:J,promoteBuffers:$,promoteLongs:W,serializeFunctions:G,ignoreUndefined:K,bsonRegExp:Q,raw:z,enableUtf8Validation:H}},gt=function(Z,Y){const X=Y?.bsonOptions;return{raw:Z?.raw??X?.raw??!1,useBigInt64:Z?.useBigInt64??X?.useBigInt64??!1,promoteLongs:Z?.promoteLongs??X?.promoteLongs??!0,promoteValues:Z?.promoteValues??X?.promoteValues??!0,promoteBuffers:Z?.promoteBuffers??X?.promoteBuffers??!1,ignoreUndefined:Z?.ignoreUndefined??X?.ignoreUndefined??!1,bsonRegExp:Z?.bsonRegExp??X?.bsonRegExp??!1,serializeFunctions:Z?.serializeFunctions??X?.serializeFunctions??!1,fieldsAsRaw:Z?.fieldsAsRaw??X?.fieldsAsRaw??{},enableUtf8Validation:Z?.enableUtf8Validation??X?.enableUtf8Validation??!0}};Object.defineProperty(N0,"__esModule",{value:!0});N0.resolveBSONOptions=N0.pluckBSONSerializeOptions=N0.UUID=N0.Timestamp=N0.serialize=N0.ObjectId=N0.MinKey=N0.MaxKey=N0.Long=N0.Int32=N0.Double=N0.deserialize=N0.Decimal128=N0.DBRef=N0.Code=N0.calculateObjectSize=N0.BSONType=N0.BSONSymbol=N0.BSONRegExp=N0.BSON=N0.Binary=void 0;var _0=S6();Object.defineProperty(N0,"Binary",{enumerable:!0,get:function(){return _0.Binary}});Object.defineProperty(N0,"BSON",{enumerable:!0,get:function(){return _0.BSON}});Object.defineProperty(N0,"BSONRegExp",{enumerable:!0,get:function(){return _0.BSONRegExp}});Object.defineProperty(N0,"BSONSymbol",{enumerable:!0,get:function(){return _0.BSONSymbol}});Object.defineProperty(N0,"BSONType",{enumerable:!0,get:function(){return _0.BSONType}});Object.defineProperty(N0,"calculateObjectSize",{enumerable:!0,get:function(){return _0.calculateObjectSize}});Object.defineProperty(N0,"Code",{enumerable:!0,get:function(){return _0.Code}});Object.defineProperty(N0,"DBRef",{enumerable:!0,get:function(){return _0.DBRef}});Object.defineProperty(N0,"Decimal128",{enumerable:!0,get:function(){return _0.Decimal128}});Object.defineProperty(N0,"deserialize",{enumerable:!0,get:function(){return _0.deserialize}});Object.defineProperty(N0,"Double",{enumerable:!0,get:function(){return _0.Double}});Object.defineProperty(N0,"Int32",{enumerable:!0,get:function(){return _0.Int32}});Object.defineProperty(N0,"Long",{enumerable:!0,get:function(){return _0.Long}});Object.defineProperty(N0,"MaxKey",{enumerable:!0,get:function(){return _0.MaxKey}});Object.defineProperty(N0,"MinKey",{enumerable:!0,get:function(){return _0.MinKey}});Object.defineProperty(N0,"ObjectId",{enumerable:!0,get:function(){return _0.ObjectId}});Object.defineProperty(N0,"serialize",{enumerable:!0,get:function(){return _0.serialize}});Object.defineProperty(N0,"Timestamp",{enumerable:!0,get:function(){return _0.Timestamp}});Object.defineProperty(N0,"UUID",{enumerable:!0,get:function(){return _0.UUID}});N0.pluckBSONSerializeOptions=yt;N0.resolveBSONOptions=gt});var r=w((O2)=>{var vt=function(Z){return("errors"in Z)&&Array.isArray(Z.errors)},ht=function(Z){return Z[N2]===!0},mt=function(Z){const Y=Object.assign({},Z);if(Y.ok===0)Y.ok=1,delete Y.errmsg,delete Y.code,delete Y.codeName;return Y},ut=function(Z,Y){if(Z instanceof K9)return!0;if(Z instanceof y7){if((Y>=9||Z.hasErrorLabel(O2.MongoErrorLabel.RetryableWriteError))&&!Z.hasErrorLabel(O2.MongoErrorLabel.HandshakeError))return!1}if(Z instanceof bH)return X2.has(Z.result?.code??Z.code??0);if(Z instanceof y7&&typeof Z.code==="number")return X2.has(Z.code);if(O2.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(Z.message))return!0;if(O2.NODE_IS_RECOVERING_ERROR_MESSAGE.test(Z.message))return!0;return!1},dt=function(Z){return Z.hasErrorLabel(O2.MongoErrorLabel.RetryableWriteError)},ct=function(Z){if(typeof Z.code==="number"?E2.has(Z.code):!1)return!0;if(Z instanceof K9)return!0;if(O2.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(Z.message))return!0;if(O2.NODE_IS_RECOVERING_ERROR_MESSAGE.test(Z.message))return!0;return!1},C2=function(Z){if(typeof Z.code==="number")return lt.has(Z.code);return O2.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE.test(Z.message)||O2.NODE_IS_RECOVERING_ERROR_MESSAGE.test(Z.message)},nt=function(Z){if(typeof Z.code==="number")return pt.has(Z.code);if(C2(Z))return!1;return O2.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(Z.message)},at=function(Z){return!!(typeof Z.code==="number"&&it.has(Z.code))},st=function(Z){if(Z instanceof yH||Z==null)return!0;return C2(Z)||nt(Z)},rt=function(Z){return!!(Z instanceof K9&&Z.message.match(/timed out/))},tt=function(Z,Y){if(Z==null||!(Z instanceof y7))return!1;if(Z instanceof K9)return!0;if(Y!=null&&Y>=9){if(Z.code===O2.MONGODB_ERROR_CODES.CursorNotFound)return!0;return Z.hasErrorLabel(O2.MongoErrorLabel.ResumableChangeStreamError)}if(typeof Z.code==="number")return O2.GET_MORE_RESUMABLE_CODES.has(Z.code);return!1};Object.defineProperty(O2,"__esModule",{value:!0});O2.isResumableError=O2.isNetworkTimeoutError=O2.isSDAMUnrecoverableError=O2.isNodeShuttingDownError=O2.isRetryableReadError=O2.isRetryableWriteError=O2.needsRetryableWriteLabel=O2.MongoWriteConcernError=O2.MongoServerSelectionError=O2.MongoSystemError=O2.MongoMissingDependencyError=O2.MongoMissingCredentialsError=O2.MongoCompatibilityError=O2.MongoInvalidArgumentError=O2.MongoParseError=O2.MongoNetworkTimeoutError=O2.MongoNetworkError=O2.isNetworkErrorBeforeHandshake=O2.MongoTopologyClosedError=O2.MongoCursorExhaustedError=O2.MongoServerClosedError=O2.MongoCursorInUseError=O2.MongoUnexpectedServerResponseError=O2.MongoGridFSChunkError=O2.MongoGridFSStreamError=O2.MongoTailableCursorError=O2.MongoChangeStreamError=O2.MongoAzureError=O2.MongoAWSError=O2.MongoKerberosError=O2.MongoExpiredSessionError=O2.MongoTransactionError=O2.MongoNotConnectedError=O2.MongoDecompressionError=O2.MongoBatchReExecutionError=O2.MongoRuntimeError=O2.MongoAPIError=O2.MongoDriverError=O2.MongoServerError=O2.MongoError=O2.MongoErrorLabel=O2.GET_MORE_RESUMABLE_CODES=O2.MONGODB_ERROR_CODES=O2.NODE_IS_RECOVERING_ERROR_MESSAGE=O2.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE=O2.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE=void 0;var QJ=Symbol("errorLabels");O2.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE=new RegExp("not master","i");O2.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE=new RegExp("not master or secondary","i");O2.NODE_IS_RECOVERING_ERROR_MESSAGE=new RegExp("node is recovering","i");O2.MONGODB_ERROR_CODES=Object.freeze({HostUnreachable:6,HostNotFound:7,NetworkTimeout:89,ShutdownInProgress:91,PrimarySteppedDown:189,ExceededTimeLimit:262,SocketException:9001,NotWritablePrimary:10107,InterruptedAtShutdown:11600,InterruptedDueToReplStateChange:11602,NotPrimaryNoSecondaryOk:13435,NotPrimaryOrSecondary:13436,StaleShardVersion:63,StaleEpoch:150,StaleConfig:13388,RetryChangeStream:234,FailedToSatisfyReadPreference:133,CursorNotFound:43,LegacyNotPrimary:10058,WriteConcernFailed:64,NamespaceNotFound:26,IllegalOperation:20,MaxTimeMSExpired:50,UnknownReplWriteConcern:79,UnsatisfiableWriteConcern:100,Reauthenticate:391});O2.GET_MORE_RESUMABLE_CODES=new Set([O2.MONGODB_ERROR_CODES.HostUnreachable,O2.MONGODB_ERROR_CODES.HostNotFound,O2.MONGODB_ERROR_CODES.NetworkTimeout,O2.MONGODB_ERROR_CODES.ShutdownInProgress,O2.MONGODB_ERROR_CODES.PrimarySteppedDown,O2.MONGODB_ERROR_CODES.ExceededTimeLimit,O2.MONGODB_ERROR_CODES.SocketException,O2.MONGODB_ERROR_CODES.NotWritablePrimary,O2.MONGODB_ERROR_CODES.InterruptedAtShutdown,O2.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,O2.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,O2.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,O2.MONGODB_ERROR_CODES.StaleShardVersion,O2.MONGODB_ERROR_CODES.StaleEpoch,O2.MONGODB_ERROR_CODES.StaleConfig,O2.MONGODB_ERROR_CODES.RetryChangeStream,O2.MONGODB_ERROR_CODES.FailedToSatisfyReadPreference,O2.MONGODB_ERROR_CODES.CursorNotFound]);O2.MongoErrorLabel=Object.freeze({RetryableWriteError:"RetryableWriteError",TransientTransactionError:"TransientTransactionError",UnknownTransactionCommitResult:"UnknownTransactionCommitResult",ResumableChangeStreamError:"ResumableChangeStreamError",HandshakeError:"HandshakeError",ResetPool:"ResetPool",InterruptInUseConnections:"InterruptInUseConnections",NoWritesPerformed:"NoWritesPerformed"});class y7 extends Error{constructor(Z,Y){super(Z,Y);this[QJ]=new Set}static buildErrorMessage(Z){if(typeof Z==="string")return Z;if(vt(Z)&&Z.message.length===0)return Z.errors.length===0?"AggregateError has an empty errors array. Please check the `cause` property for more information.":Z.errors.map(({message:Y})=>Y).join(", ");return Z.message}get name(){return"MongoError"}get errmsg(){return this.message}hasErrorLabel(Z){return this[QJ].has(Z)}addErrorLabel(Z){this[QJ].add(Z)}get errorLabels(){return Array.from(this[QJ])}}O2.MongoError=y7;class fH extends y7{constructor(Z){super(Z.message||Z.errmsg||Z.$err||"n/a");if(Z.errorLabels)this[QJ]=new Set(Z.errorLabels);for(let Y in Z)if(Y!=="errorLabels"&&Y!=="errmsg"&&Y!=="message")this[Y]=Z[Y]}get name(){return"MongoServerError"}}O2.MongoServerError=fH;class HJ extends y7{constructor(Z,Y){super(Z,Y)}get name(){return"MongoDriverError"}}O2.MongoDriverError=HJ;class D8 extends HJ{constructor(Z,Y){super(Z,Y)}get name(){return"MongoAPIError"}}O2.MongoAPIError=D8;class g7 extends HJ{constructor(Z,Y){super(Z,Y)}get name(){return"MongoRuntimeError"}}O2.MongoRuntimeError=g7;class J2 extends D8{constructor(Z="This batch has already been executed, create new batch to execute"){super(Z)}get name(){return"MongoBatchReExecutionError"}}O2.MongoBatchReExecutionError=J2;class $2 extends g7{constructor(Z){super(Z)}get name(){return"MongoDecompressionError"}}O2.MongoDecompressionError=$2;class W2 extends D8{constructor(Z){super(Z)}get name(){return"MongoNotConnectedError"}}O2.MongoNotConnectedError=W2;class G2 extends D8{constructor(Z){super(Z)}get name(){return"MongoTransactionError"}}O2.MongoTransactionError=G2;class K2 extends D8{constructor(Z="Cannot use a session that has ended"){super(Z)}get name(){return"MongoExpiredSessionError"}}O2.MongoExpiredSessionError=K2;class Q2 extends g7{constructor(Z){super(Z)}get name(){return"MongoKerberosError"}}O2.MongoKerberosError=Q2;class z2 extends g7{constructor(Z){super(Z)}get name(){return"MongoAWSError"}}O2.MongoAWSError=z2;class H2 extends g7{constructor(Z){super(Z)}get name(){return"MongoAzureError"}}O2.MongoAzureError=H2;class F2 extends g7{constructor(Z){super(Z)}get name(){return"MongoChangeStreamError"}}O2.MongoChangeStreamError=F2;class U2 extends D8{constructor(Z="Tailable cursor does not support this operation"){super(Z)}get name(){return"MongoTailableCursorError"}}O2.MongoTailableCursorError=U2;class V2 extends g7{constructor(Z){super(Z)}get name(){return"MongoGridFSStreamError"}}O2.MongoGridFSStreamError=V2;class q2 extends g7{constructor(Z){super(Z)}get name(){return"MongoGridFSChunkError"}}O2.MongoGridFSChunkError=q2;class L2 extends g7{constructor(Z){super(Z)}get name(){return"MongoUnexpectedServerResponseError"}}O2.MongoUnexpectedServerResponseError=L2;class w2 extends D8{constructor(Z="Cursor is already initialized"){super(Z)}get name(){return"MongoCursorInUseError"}}O2.MongoCursorInUseError=w2;class R2 extends D8{constructor(Z="Server is closed"){super(Z)}get name(){return"MongoServerClosedError"}}O2.MongoServerClosedError=R2;class M2 extends D8{constructor(Z){super(Z||"Cursor is exhausted")}get name(){return"MongoCursorExhaustedError"}}O2.MongoCursorExhaustedError=M2;class B2 extends D8{constructor(Z="Topology is closed"){super(Z)}get name(){return"MongoTopologyClosedError"}}O2.MongoTopologyClosedError=B2;var N2=Symbol("beforeHandshake");O2.isNetworkErrorBeforeHandshake=ht;class K9 extends y7{constructor(Z,Y){super(Z,{cause:Y?.cause});if(Y&&typeof Y.beforeHandshake==="boolean")this[N2]=Y.beforeHandshake}get name(){return"MongoNetworkError"}}O2.MongoNetworkError=K9;class A2 extends K9{constructor(Z,Y){super(Z,Y)}get name(){return"MongoNetworkTimeoutError"}}O2.MongoNetworkTimeoutError=A2;class yH extends HJ{constructor(Z){super(Z)}get name(){return"MongoParseError"}}O2.MongoParseError=yH;class D2 extends D8{constructor(Z){super(Z)}get name(){return"MongoInvalidArgumentError"}}O2.MongoInvalidArgumentError=D2;class P2 extends D8{constructor(Z){super(Z)}get name(){return"MongoCompatibilityError"}}O2.MongoCompatibilityError=P2;class T2 extends D8{constructor(Z){super(Z)}get name(){return"MongoMissingCredentialsError"}}O2.MongoMissingCredentialsError=T2;class I2 extends D8{constructor(Z,Y={}){super(Z,Y)}get name(){return"MongoMissingDependencyError"}}O2.MongoMissingDependencyError=I2;class gH extends y7{constructor(Z,Y){if(Y&&Y.error)super(y7.buildErrorMessage(Y.error.message||Y.error),{cause:Y.error});else super(Z);if(Y)this.reason=Y;this.code=Y.error?.code}get name(){return"MongoSystemError"}}O2.MongoSystemError=gH;class j2 extends gH{constructor(Z,Y){super(Z,Y)}get name(){return"MongoServerSelectionError"}}O2.MongoServerSelectionError=j2;class bH extends fH{constructor(Z,Y){if(Y&&Array.isArray(Y.errorLabels))Z.errorLabels=Y.errorLabels;super(Z);if(this.errInfo=Z.errInfo,Y!=null)this.result=mt(Y)}get name(){return"MongoWriteConcernError"}}O2.MongoWriteConcernError=bH;var E2=new Set([O2.MONGODB_ERROR_CODES.HostUnreachable,O2.MONGODB_ERROR_CODES.HostNotFound,O2.MONGODB_ERROR_CODES.NetworkTimeout,O2.MONGODB_ERROR_CODES.ShutdownInProgress,O2.MONGODB_ERROR_CODES.PrimarySteppedDown,O2.MONGODB_ERROR_CODES.SocketException,O2.MONGODB_ERROR_CODES.NotWritablePrimary,O2.MONGODB_ERROR_CODES.InterruptedAtShutdown,O2.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,O2.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,O2.MONGODB_ERROR_CODES.NotPrimaryOrSecondary]),X2=new Set([...E2,O2.MONGODB_ERROR_CODES.ExceededTimeLimit]);O2.needsRetryableWriteLabel=ut;O2.isRetryableWriteError=dt;O2.isRetryableReadError=ct;var lt=new Set([O2.MONGODB_ERROR_CODES.ShutdownInProgress,O2.MONGODB_ERROR_CODES.PrimarySteppedDown,O2.MONGODB_ERROR_CODES.InterruptedAtShutdown,O2.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,O2.MONGODB_ERROR_CODES.NotPrimaryOrSecondary]),pt=new Set([O2.MONGODB_ERROR_CODES.NotWritablePrimary,O2.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,O2.MONGODB_ERROR_CODES.LegacyNotPrimary]),it=new Set([O2.MONGODB_ERROR_CODES.InterruptedAtShutdown,O2.MONGODB_ERROR_CODES.ShutdownInProgress]);O2.isNodeShuttingDownError=at;O2.isSDAMUnrecoverableError=st;O2.isNetworkTimeoutError=rt;O2.isResumableError=tt});var x0=w((x2)=>{Object.defineProperty(x2,"__esModule",{value:!0});x2.ReadPreference=x2.ReadPreferenceMode=void 0;var Q9=r();x2.ReadPreferenceMode=Object.freeze({primary:"primary",primaryPreferred:"primaryPreferred",secondary:"secondary",secondaryPreferred:"secondaryPreferred",nearest:"nearest"});class A1{constructor(Z,Y,X){if(!A1.isValid(Z))throw new Q9.MongoInvalidArgumentError(`Invalid read preference mode ${JSON.stringify(Z)}`);if(X==null&&typeof Y==="object"&&!Array.isArray(Y))X=Y,Y=void 0;else if(Y&&!Array.isArray(Y))throw new Q9.MongoInvalidArgumentError("ReadPreference tags must be an array");if(this.mode=Z,this.tags=Y,this.hedge=X?.hedge,this.maxStalenessSeconds=void 0,this.minWireVersion=void 0,X=X??{},X.maxStalenessSeconds!=null){if(X.maxStalenessSeconds<=0)throw new Q9.MongoInvalidArgumentError("maxStalenessSeconds must be a positive integer");this.maxStalenessSeconds=X.maxStalenessSeconds,this.minWireVersion=5}if(this.mode===A1.PRIMARY){if(this.tags&&Array.isArray(this.tags)&&this.tags.length>0)throw new Q9.MongoInvalidArgumentError("Primary read preference cannot be combined with tags");if(this.maxStalenessSeconds)throw new Q9.MongoInvalidArgumentError("Primary read preference cannot be combined with maxStalenessSeconds");if(this.hedge)throw new Q9.MongoInvalidArgumentError("Primary read preference cannot be combined with hedge")}}get preference(){return this.mode}static fromString(Z){return new A1(Z)}static fromOptions(Z){if(!Z)return;const Y=Z.readPreference??Z.session?.transaction.options.readPreference,X=Z.readPreferenceTags;if(Y==null)return;if(typeof Y==="string")return new A1(Y,X,{maxStalenessSeconds:Z.maxStalenessSeconds,hedge:Z.hedge});else if(!(Y instanceof A1)&&typeof Y==="object"){const J=Y.mode||Y.preference;if(J&&typeof J==="string")return new A1(J,Y.tags??X,{maxStalenessSeconds:Y.maxStalenessSeconds,hedge:Z.hedge})}if(X)Y.tags=X;return Y}static translate(Z){if(Z.readPreference==null)return Z;const Y=Z.readPreference;if(typeof Y==="string")Z.readPreference=new A1(Y);else if(Y&&!(Y instanceof A1)&&typeof Y==="object"){const X=Y.mode||Y.preference;if(X&&typeof X==="string")Z.readPreference=new A1(X,Y.tags,{maxStalenessSeconds:Y.maxStalenessSeconds})}else if(!(Y instanceof A1))throw new Q9.MongoInvalidArgumentError(`Invalid read preference: ${Y}`);return Z}static isValid(Z){return(new Set([A1.PRIMARY,A1.PRIMARY_PREFERRED,A1.SECONDARY,A1.SECONDARY_PREFERRED,A1.NEAREST,null])).has(Z)}isValid(Z){return A1.isValid(typeof Z==="string"?Z:this.mode)}secondaryOk(){return(new Set([A1.PRIMARY_PREFERRED,A1.SECONDARY,A1.SECONDARY_PREFERRED,A1.NEAREST])).has(this.mode)}equals(Z){return Z.mode===this.mode}toJSON(){const Z={mode:this.mode};if(Array.isArray(this.tags))Z.tags=this.tags;if(this.maxStalenessSeconds)Z.maxStalenessSeconds=this.maxStalenessSeconds;if(this.hedge)Z.hedge=this.hedge;return Z}}A1.PRIMARY=x2.ReadPreferenceMode.primary;A1.PRIMARY_PREFERRED=x2.ReadPreferenceMode.primaryPreferred;A1.SECONDARY=x2.ReadPreferenceMode.secondary;A1.SECONDARY_PREFERRED=x2.ReadPreferenceMode.secondaryPreferred;A1.NEAREST=x2.ReadPreferenceMode.nearest;A1.primary=new A1(x2.ReadPreferenceMode.primary);A1.primaryPreferred=new A1(x2.ReadPreferenceMode.primaryPreferred);A1.secondary=new A1(x2.ReadPreferenceMode.secondary);A1.secondaryPreferred=new A1(x2.ReadPreferenceMode.secondaryPreferred);A1.nearest=new A1(x2.ReadPreferenceMode.nearest);x2.ReadPreference=A1});var k6=w((y2)=>{var vo=function(Z){Z.forEach(bo.clearTimeout),Z.clear()},ho=function(Z,Y){if(Z.clusterTime==null)Z.clusterTime=Y;else if(Y.clusterTime.greaterThan(Z.clusterTime.clusterTime))Z.clusterTime=Y};Object.defineProperty(y2,"__esModule",{value:!0});y2._advanceClusterTime=y2.drainTimerQueue=y2.ServerType=y2.TopologyType=y2.STATE_CONNECTED=y2.STATE_CONNECTING=y2.STATE_CLOSED=y2.STATE_CLOSING=void 0;var bo=import.meta.require("timers");y2.STATE_CLOSING="closing";y2.STATE_CLOSED="closed";y2.STATE_CONNECTING="connecting";y2.STATE_CONNECTED="connected";y2.TopologyType=Object.freeze({Single:"Single",ReplicaSetNoPrimary:"ReplicaSetNoPrimary",ReplicaSetWithPrimary:"ReplicaSetWithPrimary",Sharded:"Sharded",Unknown:"Unknown",LoadBalanced:"LoadBalanced"});y2.ServerType=Object.freeze({Standalone:"Standalone",Mongos:"Mongos",PossiblePrimary:"PossiblePrimary",RSPrimary:"RSPrimary",RSSecondary:"RSSecondary",RSArbiter:"RSArbiter",RSOther:"RSOther",RSGhost:"RSGhost",Unknown:"Unknown",LoadBalancer:"LoadBalancer"});y2.drainTimerQueue=vo;y2._advanceClusterTime=ho});var UJ=w((v2)=>{var so=function(){return(Z,Y)=>vH(Z,Y.filter((X)=>X.isWritable))},ro=function(Z){return(Y,X)=>{if(!Z)return[];return X.filter((J)=>{return J.address===Z.address&&J.type!==F6.ServerType.Unknown})}},to=function(Z,Y){if(!Y||!Z||Z&&Z<v2.MIN_SECONDARY_WRITE_WIRE_VERSION)return hH(FJ.ReadPreference.primary);return hH(Y)},oo=function(Z,Y,X){if(Z.maxStalenessSeconds==null||Z.maxStalenessSeconds<0)return X;const J=Z.maxStalenessSeconds,$=(Y.heartbeatFrequencyMS+ao)/1000;if(J<$)throw new UW.MongoInvalidArgumentError(`Option "maxStalenessSeconds" must be at least ${$} seconds`);if(J<b2)throw new UW.MongoInvalidArgumentError(`Option "maxStalenessSeconds" must be at least ${b2} seconds`);if(Y.type===F6.TopologyType.ReplicaSetWithPrimary){const W=Array.from(Y.servers.values()).filter(FW)[0];return X.reduce((G,K)=>{const z=(K.lastUpdateTime-K.lastWriteDate-(W.lastUpdateTime-W.lastWriteDate)+Y.heartbeatFrequencyMS)/1000,H=Z.maxStalenessSeconds??0;if(z<=H)G.push(K);return G},[])}if(Y.type===F6.TopologyType.ReplicaSetNoPrimary){if(X.length===0)return X;const W=X.reduce((G,K)=>K.lastWriteDate>G.lastWriteDate?K:G);return X.reduce((G,K)=>{const z=(W.lastWriteDate-K.lastWriteDate+Y.heartbeatFrequencyMS)/1000,H=Z.maxStalenessSeconds??0;if(z<=H)G.push(K);return G},[])}return X},eo=function(Z,Y){const X=Object.keys(Z),J=Object.keys(Y);for(let $=0;$<X.length;++$){const W=X[$];if(J.indexOf(W)===-1||Y[W]!==Z[W])return!1}return!0},Ze=function(Z,Y){if(Z.tags==null||Array.isArray(Z.tags)&&Z.tags.length===0)return Y;for(let X=0;X<Z.tags.length;++X){const J=Z.tags[X],$=Y.reduce((W,G)=>{if(eo(J,G.tags))W.push(G);return W},[]);if($.length)return $}return[]},vH=function(Z,Y){const X=Y.reduce(($,W)=>$===-1?W.roundTripTime:Math.min(W.roundTripTime,$),-1),J=X+Z.localThresholdMS;return Y.reduce(($,W)=>{if(W.roundTripTime<=J&&W.roundTripTime>=X)$.push(W);return $},[])},FW=function(Z){return Z.type===F6.ServerType.RSPrimary},Ye=function(Z){return Z.type===F6.ServerType.RSSecondary},Xe=function(Z){return Z.type===F6.ServerType.RSSecondary||Z.type===F6.ServerType.RSPrimary},Je=function(Z){return Z.type!==F6.ServerType.Unknown},$e=function(Z){return Z.type===F6.ServerType.LoadBalancer},hH=function(Z){if(!Z.isValid())throw new UW.MongoInvalidArgumentError("Invalid read preference specified");return(Y,X)=>{const J=Y.commonWireVersion;if(J&&Z.minWireVersion&&Z.minWireVersion>J)throw new UW.MongoCompatibilityError(`Minimum wire version '${Z.minWireVersion}' required, but found '${J}'`);if(Y.type===F6.TopologyType.LoadBalanced)return X.filter($e);if(Y.type===F6.TopologyType.Unknown)return[];if(Y.type===F6.TopologyType.Single||Y.type===F6.TopologyType.Sharded)return vH(Y,X.filter(Je));const $=Z.mode;if($===FJ.ReadPreference.PRIMARY)return X.filter(FW);if($===FJ.ReadPreference.PRIMARY_PREFERRED){const K=X.filter(FW);if(K.length)return K}const W=$===FJ.ReadPreference.NEAREST?Xe:Ye,G=vH(Y,Ze(Z,oo(Z,Y,X.filter(W))));if($===FJ.ReadPreference.SECONDARY_PREFERRED&&G.length===0)return X.filter(FW);return G}};Object.defineProperty(v2,"__esModule",{value:!0});v2.readPreferenceServerSelector=v2.secondaryWritableServerSelector=v2.sameServerSelector=v2.writableServerSelector=v2.MIN_SECONDARY_WRITE_WIRE_VERSION=void 0;var UW=r(),FJ=x0(),F6=k6(),ao=1e4,b2=90;v2.MIN_SECONDARY_WRITE_WIRE_VERSION=13;v2.writableServerSelector=so;v2.sameServerSelector=ro;v2.secondaryWritableServerSelector=to;v2.readPreferenceServerSelector=hH});var z9=w((u2)=>{Object.defineProperty(u2,"__esModule",{value:!0});u2.OP_MSG=u2.OP_COMPRESSED=u2.OP_DELETE=u2.OP_QUERY=u2.OP_INSERT=u2.OP_UPDATE=u2.OP_REPLY=u2.MIN_SUPPORTED_QE_SERVER_VERSION=u2.MIN_SUPPORTED_QE_WIRE_VERSION=u2.MAX_SUPPORTED_WIRE_VERSION=u2.MIN_SUPPORTED_WIRE_VERSION=u2.MAX_SUPPORTED_SERVER_VERSION=u2.MIN_SUPPORTED_SERVER_VERSION=void 0;u2.MIN_SUPPORTED_SERVER_VERSION="3.6";u2.MAX_SUPPORTED_SERVER_VERSION="7.0";u2.MIN_SUPPORTED_WIRE_VERSION=6;u2.MAX_SUPPORTED_WIRE_VERSION=21;u2.MIN_SUPPORTED_QE_WIRE_VERSION=21;u2.MIN_SUPPORTED_QE_SERVER_VERSION="7.0";u2.OP_REPLY=1;u2.OP_UPDATE=2001;u2.OP_INSERT=2002;u2.OP_QUERY=2004;u2.OP_DELETE=2006;u2.OP_COMPRESSED=2012;u2.OP_MSG=2013});var c0=w((c2)=>{Object.defineProperty(c2,"__esModule",{value:!0});c2.TOPOLOGY_EVENTS=c2.CMAP_EVENTS=c2.HEARTBEAT_EVENTS=c2.RESUME_TOKEN_CHANGED=c2.END=c2.CHANGE=c2.INIT=c2.MORE=c2.RESPONSE=c2.SERVER_HEARTBEAT_FAILED=c2.SERVER_HEARTBEAT_SUCCEEDED=c2.SERVER_HEARTBEAT_STARTED=c2.COMMAND_FAILED=c2.COMMAND_SUCCEEDED=c2.COMMAND_STARTED=c2.CLUSTER_TIME_RECEIVED=c2.CONNECTION_CHECKED_IN=c2.CONNECTION_CHECKED_OUT=c2.CONNECTION_CHECK_OUT_FAILED=c2.CONNECTION_CHECK_OUT_STARTED=c2.CONNECTION_CLOSED=c2.CONNECTION_READY=c2.CONNECTION_CREATED=c2.CONNECTION_POOL_READY=c2.CONNECTION_POOL_CLEARED=c2.CONNECTION_POOL_CLOSED=c2.CONNECTION_POOL_CREATED=c2.TOPOLOGY_DESCRIPTION_CHANGED=c2.TOPOLOGY_CLOSED=c2.TOPOLOGY_OPENING=c2.SERVER_DESCRIPTION_CHANGED=c2.SERVER_CLOSED=c2.SERVER_OPENING=c2.DESCRIPTION_RECEIVED=c2.UNPINNED=c2.PINNED=c2.MESSAGE=c2.ENDED=c2.CLOSED=c2.CONNECT=c2.OPEN=c2.CLOSE=c2.TIMEOUT=c2.ERROR=c2.SYSTEM_JS_COLLECTION=c2.SYSTEM_COMMAND_COLLECTION=c2.SYSTEM_USER_COLLECTION=c2.SYSTEM_PROFILE_COLLECTION=c2.SYSTEM_INDEX_COLLECTION=c2.SYSTEM_NAMESPACE_COLLECTION=void 0;c2.LEGACY_HELLO_COMMAND_CAMEL_CASE=c2.LEGACY_HELLO_COMMAND=c2.MONGO_CLIENT_EVENTS=c2.LOCAL_SERVER_EVENTS=c2.SERVER_RELAY_EVENTS=c2.APM_EVENTS=void 0;c2.SYSTEM_NAMESPACE_COLLECTION="system.namespaces";c2.SYSTEM_INDEX_COLLECTION="system.indexes";c2.SYSTEM_PROFILE_COLLECTION="system.profile";c2.SYSTEM_USER_COLLECTION="system.users";c2.SYSTEM_COMMAND_COLLECTION="$cmd";c2.SYSTEM_JS_COLLECTION="system.js";c2.ERROR="error";c2.TIMEOUT="timeout";c2.CLOSE="close";c2.OPEN="open";c2.CONNECT="connect";c2.CLOSED="closed";c2.ENDED="ended";c2.MESSAGE="message";c2.PINNED="pinned";c2.UNPINNED="unpinned";c2.DESCRIPTION_RECEIVED="descriptionReceived";c2.SERVER_OPENING="serverOpening";c2.SERVER_CLOSED="serverClosed";c2.SERVER_DESCRIPTION_CHANGED="serverDescriptionChanged";c2.TOPOLOGY_OPENING="topologyOpening";c2.TOPOLOGY_CLOSED="topologyClosed";c2.TOPOLOGY_DESCRIPTION_CHANGED="topologyDescriptionChanged";c2.CONNECTION_POOL_CREATED="connectionPoolCreated";c2.CONNECTION_POOL_CLOSED="connectionPoolClosed";c2.CONNECTION_POOL_CLEARED="connectionPoolCleared";c2.CONNECTION_POOL_READY="connectionPoolReady";c2.CONNECTION_CREATED="connectionCreated";c2.CONNECTION_READY="connectionReady";c2.CONNECTION_CLOSED="connectionClosed";c2.CONNECTION_CHECK_OUT_STARTED="connectionCheckOutStarted";c2.CONNECTION_CHECK_OUT_FAILED="connectionCheckOutFailed";c2.CONNECTION_CHECKED_OUT="connectionCheckedOut";c2.CONNECTION_CHECKED_IN="connectionCheckedIn";c2.CLUSTER_TIME_RECEIVED="clusterTimeReceived";c2.COMMAND_STARTED="commandStarted";c2.COMMAND_SUCCEEDED="commandSucceeded";c2.COMMAND_FAILED="commandFailed";c2.SERVER_HEARTBEAT_STARTED="serverHeartbeatStarted";c2.SERVER_HEARTBEAT_SUCCEEDED="serverHeartbeatSucceeded";c2.SERVER_HEARTBEAT_FAILED="serverHeartbeatFailed";c2.RESPONSE="response";c2.MORE="more";c2.INIT="init";c2.CHANGE="change";c2.END="end";c2.RESUME_TOKEN_CHANGED="resumeTokenChanged";c2.HEARTBEAT_EVENTS=Object.freeze([c2.SERVER_HEARTBEAT_STARTED,c2.SERVER_HEARTBEAT_SUCCEEDED,c2.SERVER_HEARTBEAT_FAILED]);c2.CMAP_EVENTS=Object.freeze([c2.CONNECTION_POOL_CREATED,c2.CONNECTION_POOL_READY,c2.CONNECTION_POOL_CLEARED,c2.CONNECTION_POOL_CLOSED,c2.CONNECTION_CREATED,c2.CONNECTION_READY,c2.CONNECTION_CLOSED,c2.CONNECTION_CHECK_OUT_STARTED,c2.CONNECTION_CHECK_OUT_FAILED,c2.CONNECTION_CHECKED_OUT,c2.CONNECTION_CHECKED_IN]);c2.TOPOLOGY_EVENTS=Object.freeze([c2.SERVER_OPENING,c2.SERVER_CLOSED,c2.SERVER_DESCRIPTION_CHANGED,c2.TOPOLOGY_OPENING,c2.TOPOLOGY_CLOSED,c2.TOPOLOGY_DESCRIPTION_CHANGED,c2.ERROR,c2.TIMEOUT,c2.CLOSE]);c2.APM_EVENTS=Object.freeze([c2.COMMAND_STARTED,c2.COMMAND_SUCCEEDED,c2.COMMAND_FAILED]);c2.SERVER_RELAY_EVENTS=Object.freeze([c2.SERVER_HEARTBEAT_STARTED,c2.SERVER_HEARTBEAT_SUCCEEDED,c2.SERVER_HEARTBEAT_FAILED,c2.COMMAND_STARTED,c2.COMMAND_SUCCEEDED,c2.COMMAND_FAILED,...c2.CMAP_EVENTS]);c2.LOCAL_SERVER_EVENTS=Object.freeze([c2.CONNECT,c2.DESCRIPTION_RECEIVED,c2.CLOSED,c2.ENDED]);c2.MONGO_CLIENT_EVENTS=Object.freeze([...c2.CMAP_EVENTS,...c2.APM_EVENTS,...c2.TOPOLOGY_EVENTS,...c2.HEARTBEAT_EVENTS]);c2.LEGACY_HELLO_COMMAND="ismaster";c2.LEGACY_HELLO_COMMAND_CAMEL_CASE="isMaster"});var _6=w((RD)=>{Object.defineProperty(RD,"__esModule",{value:!0});RD.ReadConcern=RD.ReadConcernLevel=void 0;RD.ReadConcernLevel=Object.freeze({local:"local",majority:"majority",linearizable:"linearizable",available:"available",snapshot:"snapshot"});class pZ{constructor(Z){this.level=RD.ReadConcernLevel[Z]??Z}static fromOptions(Z){if(Z==null)return;if(Z.readConcern){const{readConcern:Y}=Z;if(Y instanceof pZ)return Y;else if(typeof Y==="string")return new pZ(Y);else if(("level"in Y)&&Y.level)return new pZ(Y.level)}if(Z.level)return new pZ(Z.level);return}static get MAJORITY(){return RD.ReadConcernLevel.majority}static get AVAILABLE(){return RD.ReadConcernLevel.available}static get LINEARIZABLE(){return RD.ReadConcernLevel.linearizable}static get SNAPSHOT(){return RD.ReadConcernLevel.snapshot}toJSON(){return{level:this.level}}}RD.ReadConcern=pZ});var d8=w((BD)=>{Object.defineProperty(BD,"__esModule",{value:!0});BD.WriteConcern=BD.WRITE_CONCERN_KEYS=void 0;BD.WRITE_CONCERN_KEYS=["w","wtimeout","j","journal","fsync"];class VJ{constructor(Z,Y,X,J){if(Z!=null)if(!Number.isNaN(Number(Z)))this.w=Number(Z);else this.w=Z;if(Y!=null)this.wtimeoutMS=this.wtimeout=Y;if(X!=null)this.journal=this.j=X;if(J!=null)this.journal=this.j=J?!0:!1}static apply(Z,Y){const X={};if(Y.w!=null)X.w=Y.w;if(Y.wtimeoutMS!=null)X.wtimeout=Y.wtimeoutMS;if(Y.journal!=null)X.j=Y.j;return Z.writeConcern=X,Z}static fromOptions(Z,Y){if(Z==null)return;Y=Y??{};let X;if(typeof Z==="string"||typeof Z==="number")X={w:Z};else if(Z instanceof VJ)X=Z;else X=Z.writeConcern;const J=Y instanceof VJ?Y:Y.writeConcern,{w:$=void 0,wtimeout:W=void 0,j:G=void 0,fsync:K=void 0,journal:Q=void 0,wtimeoutMS:z=void 0}={...J,...X};if($!=null||W!=null||z!=null||G!=null||Q!=null||K!=null)return new VJ($,W??z,G??Q,K);return}}BD.WriteConcern=VJ});var $1=w((xD)=>{var oe=function(Z,Y){for(let X of Y)if(Z===X||X.startsWith("*.")&&Z?.endsWith(X.substring(2,X.length))||X.startsWith("*/")&&Z?.endsWith(X.substring(2,X.length)))return!0;return!1},ee=function(Z){let Y=void 0;if(typeof Z==="string")Y=Z;else if(Array.isArray(Z))Y={},Z.forEach((X)=>{Y[X]=1});else if(Z!=null&&typeof Z==="object"){Y={};for(let X in Z)Y[X]=Z[X]}return Y},aH=function(Z){return Z11(Z)==="[object Object]"},Y11=function(Z,Y){return{...Z,...Y}},X11=function(Z,Y){const X={};for(let J in Z)if(Y.includes(J))X[J]=Z[J];return X},J11=function(Z,Y){if(Y&&Y.s.options?.retryWrites)Z.retryWrites=!0;return Z},$11=function(Z){return!!Z&&typeof Z.then==="function"},W11=function(Z,Y,X){const J=TD(Y).capabilities;if(X.collation&&typeof X.collation==="object")if(J&&J.commandsTakeCollation)Z.collation=X.collation;else throw new K7.MongoCompatibilityError("Current topology does not support collation")},G11=function(Z,Y,X){if(X&&X.session&&X.session.inTransaction())return;const J=Object.assign({},Z.readConcern||{});if(Y.s.readConcern)Object.assign(J,Y.s.readConcern);if(Object.keys(J).length>0)Object.assign(Z,{readConcern:J})},K11=function(Z,Y){if(Z.explain)return Z;return{explain:Z,verbosity:Y.verbosity}},TD=function(Z){if(("topology"in Z)&&Z.topology)return Z.topology;else if(("client"in Z)&&Z.client.topology)return Z.client.topology;throw new K7.MongoNotConnectedError("MongoClient must be connected to perform this operation")},Q11=function(Z){return wJ.fromString(Z)};function*z11(Z=0){let Y=Z;while(!0){const X=Y;Y+=1,yield X}}var H11=function(Z,Y){const X=Z();if(Y==null)return X;X.then((J)=>Y(void 0,J),(J)=>Y(J));return},F11=function(){const Z=de.randomBytes(16);return Z[6]=Z[6]&15|64,Z[8]=Z[8]&63|128,Z},U11=function(Z){if(Z){if(Z.loadBalanced)return ie.MAX_SUPPORTED_WIRE_VERSION;if(Z.hello)return Z.hello.maxWireVersion;if(("lastHello"in Z)&&typeof Z.lastHello==="function"){const Y=Z.lastHello();if(Y)return Y.maxWireVersion}if(Z.description&&("maxWireVersion"in Z.description)&&Z.description.maxWireVersion!=null)return Z.description.maxWireVersion}return 0},V11=function(Z,Y,X){Z=Z||[];let J=0,$=0;for(J=0;J<Z.length;++J)$++,Y(Z[J],W);if($===0){X();return}function W(G){if($--,G){X(G);return}if(J===Z.length&&$<=0)X()}},q11=function(Z,Y){if(!Array.isArray(Z)||!Array.isArray(Y))return!1;return Z.length===Y.length&&Z.every((X,J)=>X===Y[J])},L11=function(Z,Y){if(Z===Y)return!0;if(!Z||!Y)return Z===Y;if(Z==null&&Y!=null||Z!=null&&Y==null)return!1;if(Z.constructor.name!==Y.constructor.name)return!1;if(Z.message!==Y.message)return!1;return!0},w11=function(Z){return function Y(X,J){const $=Z[X.s.state];if($&&$.indexOf(J)<0)throw new K7.MongoRuntimeError(`illegal state transition from [${X.s.state}] => [${J}], allowed: [${$}]`);X.emit("stateChanged",X.s.state,J),X.s.state=J}},ID=function(){const Z=process.hrtime();return Math.floor(Z[0]*1000+Z[1]/1e6)},R11=function(Z){if(typeof Z!=="number")throw new K7.MongoInvalidArgumentError("Numeric value required to calculate duration");const Y=ID()-Z;return Y<0?0:Y},jD=function(Z){if(Array.isArray(Z)){for(let X of Z)if(jD(X))return!0;return!1}const Y=Object.keys(Z);return Y.length>0&&Y[0][0]==="$"},M11=function(Z,Y){const X=Object.assign({},Y,(0,PD.resolveBSONOptions)(Y,Z));if(!Y?.session?.inTransaction()){const W=ae.ReadConcern.fromOptions(Y)??Z?.readConcern;if(W)X.readConcern=W;const G=te.WriteConcern.fromOptions(Y)??Z?.writeConcern;if(G)X.writeConcern=G}const $=se.ReadPreference.fromOptions(Y)??Z?.readPreference;if($)X.readPreference=$;return X},ED=function(Z,Y){Z=Array.isArray(Z)?new Set(Z):Z,Y=Array.isArray(Y)?new Set(Y):Y;for(let X of Y)if(!Z.has(X))return!1;return!0},B11=function(Z){return Z[ne.LEGACY_HELLO_COMMAND]||Z.hello?!0:!1},N11=function(Z,Y){const X=new Set(Z);for(let J of Y)X.delete(J);return X},CD=function(Z,Y=void 0){if(!aH(Z))return!1;const X=Z.constructor;if(X&&X.prototype){if(!aH(X.prototype))return!1;if(!A11(X.prototype,"isPrototypeOf"))return!1}if(Y){const J=Object.keys(Z);return ED(J,Y)}return!0},sH=function(Z){if(Z==null)return Z;else if(Array.isArray(Z))return Z.map((X)=>sH(X));else if(CD(Z)){const X={};for(let J in Z)X[J]=sH(Z[J]);return X}const Y=Z.constructor;if(Y)switch(Y.name.toLowerCase()){case"date":return new Y(Number(Z));case"map":return new Map(Z);case"set":return new Set(Z);case"buffer":return Buffer.from(Z)}return Z},SD=function(Z){return process.emitWarning(Z,{code:xD.MONGODB_WARNING_CODE})},D11=function(Z){if(!DD.has(Z))return DD.add(Z),SD(Z)},P11=function(Z){return Object.values(Z).join(", ")},T11=function(Z){if(!Z)return!1;if(Z.loadBalanced)return!0;if(Z.description.logicalSessionTimeoutMinutes!=null){if(Z.description.type!==re.ServerType.Standalone)return!0}return!1},I11=function(Z,Y=0){const X=Array.from(Z);if(Y>X.length)throw new K7.MongoRuntimeError("Limit must be less than the number of items");let J=X.length;const $=Y%X.length===0?1:X.length-Y;while(J>$){const W=Math.floor(Math.random()*J);J-=1;const G=X[J];X[J]=X[W],X[W]=G}return Y%X.length===0?X:X.slice($)},j11=function(Z){if(Z.aggregate||Z.count||Z.distinct||Z.find||Z.geoNear)return!0;return!1},E11=function(Z,Y){if(Z==null&&Y==null)return 0;if(Z==null)return-1;if(Y==null)return 1;return xD.ByteUtils.compare(Z.id,Y.id)},kD=function(Z){if(typeof Z==="number")return Math.trunc(Z);const Y=Number.parseInt(String(Z),10);return Number.isNaN(Y)?null:Y},C11=function(Z){const Y=kD(Z);return Y!=null&&Y>=0?Y:null},O11=function(Z,Y){const X=Z.endsWith(".")?Z.slice(0,Z.length-1):Z,J=Y.endsWith(".")?Y.slice(0,Y.length-1):Y,$=/^.*?\./,W=`.${X.replace($,"")}`,G=`.${J.replace($,"")}`;return W.endsWith(G)};async function S11(Z,Y={}){return new Promise((X,J)=>{const $={method:"GET",timeout:1e4,json:!0,...le.parse(Z),...Y},W=ce.request($,(G)=>{G.setEncoding("utf8");let K="";G.on("data",(Q)=>{K+=Q}),G.once("end",()=>{if(Y.json===!1){X(K);return}try{const Q=JSON.parse(K);X(Q)}catch{J(new K7.MongoRuntimeError(`Invalid JSON response: "${K}"`))}})});W.once("timeout",()=>W.destroy(new K7.MongoNetworkTimeoutError(`Network request to ${Z} timed out after ${Y.timeout} ms`))),W.once("error",(G)=>J(G)),W.end()})}Object.defineProperty(xD,"__esModule",{value:!0});xD.TimeoutController=xD.request=xD.matchesParentDomain=xD.parseUnsignedInteger=xD.parseInteger=xD.compareObjectId=xD.commandSupportsReadConcern=xD.shuffle=xD.supportsRetryableWrites=xD.enumToString=xD.emitWarningOnce=xD.emitWarning=xD.MONGODB_WARNING_CODE=xD.DEFAULT_PK_FACTORY=xD.HostAddress=xD.BufferPool=xD.List=xD.deepCopy=xD.isRecord=xD.setDifference=xD.isHello=xD.isSuperset=xD.resolveOptions=xD.hasAtomicOperators=xD.calculateDurationInMs=xD.now=xD.makeStateMachine=xD.errorStrictEqual=xD.arrayStrictEqual=xD.eachAsync=xD.maxWireVersion=xD.uuidV4=xD.maybeCallback=xD.makeCounter=xD.MongoDBCollectionNamespace=xD.MongoDBNamespace=xD.ns=xD.getTopology=xD.decorateWithExplain=xD.decorateWithReadConcern=xD.decorateWithCollation=xD.isPromiseLike=xD.applyRetryableWrites=xD.filterOptions=xD.mergeOptions=xD.isObject=xD.normalizeHintField=xD.hostMatchesWildcards=xD.ByteUtils=void 0;var de=import.meta.require("crypto"),ce=import.meta.require("http"),AD=import.meta.require("timers"),le=import.meta.require("url"),pe=import.meta.require("url"),PD=Z0(),ie=z9(),ne=c0(),K7=r(),ae=_6(),se=x0(),re=k6(),te=d8();xD.ByteUtils={toLocalBufferType(Z){return Buffer.isBuffer(Z)?Z:Buffer.from(Z.buffer,Z.byteOffset,Z.byteLength)},equals(Z,Y){return xD.ByteUtils.toLocalBufferType(Z).equals(Y)},compare(Z,Y){return xD.ByteUtils.toLocalBufferType(Z).compare(Y)},toBase64(Z){return xD.ByteUtils.toLocalBufferType(Z).toString("base64")}};xD.hostMatchesWildcards=oe;xD.normalizeHintField=ee;var Z11=(Z)=>Object.prototype.toString.call(Z);xD.isObject=aH;xD.mergeOptions=Y11;xD.filterOptions=X11;xD.applyRetryableWrites=J11;xD.isPromiseLike=$11;xD.decorateWithCollation=W11;xD.decorateWithReadConcern=G11;xD.decorateWithExplain=K11;xD.getTopology=TD;xD.ns=Q11;class wJ{constructor(Z,Y){this.db=Z,this.collection=Y,this.collection=Y===""?void 0:Y}toString(){return this.collection?`${this.db}.${this.collection}`:this.db}withCollection(Z){return new rH(this.db,Z)}static fromString(Z){if(typeof Z!=="string"||Z==="")throw new K7.MongoRuntimeError(`Cannot parse namespace from "${Z}"`);const[Y,...X]=Z.split("."),J=X.join(".");return new wJ(Y,J===""?void 0:J)}}xD.MongoDBNamespace=wJ;class rH extends wJ{constructor(Z,Y){super(Z,Y);this.collection=Y}static fromString(Z){return super.fromString(Z)}}xD.MongoDBCollectionNamespace=rH;xD.makeCounter=z11;xD.maybeCallback=H11;xD.uuidV4=F11;xD.maxWireVersion=U11;xD.eachAsync=V11;xD.arrayStrictEqual=q11;xD.errorStrictEqual=L11;xD.makeStateMachine=w11;xD.now=ID;xD.calculateDurationInMs=R11;xD.hasAtomicOperators=jD;xD.resolveOptions=M11;xD.isSuperset=ED;xD.isHello=B11;xD.setDifference=N11;var A11=(Z,Y)=>Object.prototype.hasOwnProperty.call(Z,Y);xD.isRecord=CD;xD.deepCopy=sH;class tH{get length(){return this.count}get[Symbol.toStringTag](){return"List"}constructor(){this.count=0,this.head={next:null,prev:null,value:null},this.head.next=this.head,this.head.prev=this.head}toArray(){return Array.from(this)}toString(){return`head <=> ${this.toArray().join(" <=> ")} <=> head`}*[Symbol.iterator](){for(let Z of this.nodes())yield Z.value}*nodes(){let Z=this.head.next;while(Z!==this.head){const{next:Y}=Z;yield Z,Z=Y}}push(Z){this.count+=1;const Y={next:this.head,prev:this.head.prev,value:Z};this.head.prev.next=Y,this.head.prev=Y}pushMany(Z){for(let Y of Z)this.push(Y)}unshift(Z){this.count+=1;const Y={next:this.head.next,prev:this.head,value:Z};this.head.next.prev=Y,this.head.next=Y}remove(Z){if(Z===this.head||this.length===0)return null;this.count-=1;const{prev:Y,next:X}=Z;return Y.next=X,X.prev=Y,Z.value}shift(){return this.remove(this.head.next)}pop(){return this.remove(this.head.prev)}prune(Z){for(let Y of this.nodes())if(Z(Y.value))this.remove(Y)}clear(){this.count=0,this.head.next=this.head,this.head.prev=this.head}first(){return this.head.next.value}last(){return this.head.prev.value}}xD.List=tH;class OD{constructor(){this.buffers=new tH,this.totalByteLength=0}get length(){return this.totalByteLength}append(Z){this.buffers.push(Z),this.totalByteLength+=Z.length}getInt32(){if(this.totalByteLength<4)return null;const Z=this.buffers.first();if(Z!=null&&Z.byteLength>=4)return Z.readInt32LE(0);const Y=this.read(4),X=Y.readInt32LE(0);return this.totalByteLength+=4,this.buffers.unshift(Y),X}read(Z){if(typeof Z!=="number"||Z<0)throw new K7.MongoInvalidArgumentError('Argument "size" must be a non-negative number');if(Z>this.totalByteLength)return Buffer.alloc(0);const Y=Buffer.allocUnsafe(Z);for(let X=0;X<Z;){const J=this.buffers.shift();if(J==null)break;const $=Z-X,W=Math.min($,J.byteLength),G=J.subarray(0,W);if(Y.set(G,X),X+=W,this.totalByteLength-=W,W<J.byteLength)this.buffers.unshift(J.subarray(W))}return Y}}xD.BufferPool=OD;class LJ{constructor(Z){this.host=void 0,this.port=void 0,this.socketPath=void 0,this.isIPv6=!1;const Y=Z.split(" ").join("%20");if(Y.endsWith(".sock")){this.socketPath=decodeURIComponent(Y);return}const X=`iLoveJS://${Y}`;let J;try{J=new pe.URL(X)}catch(K){const Q=new K7.MongoRuntimeError(`Unable to parse ${Y} with URL`);throw Q.cause=K,Q}const{hostname:$,port:W}=J;let G=decodeURIComponent($).toLowerCase();if(G.startsWith("[")&&G.endsWith("]"))this.isIPv6=!0,G=G.substring(1,$.length-1);if(this.host=G.toLowerCase(),typeof W==="number")this.port=W;else if(typeof W==="string"&&W!=="")this.port=Number.parseInt(W,10);else this.port=27017;if(this.port===0)throw new K7.MongoParseError("Invalid port (zero) with hostname");Object.freeze(this)}[Symbol.for("nodejs.util.inspect.custom")](){return this.inspect()}inspect(){return`new HostAddress('${this.toString()}')`}toString(){if(typeof this.host==="string"){if(this.isIPv6)return`[${this.host}]:${this.port}`;return`${this.host}:${this.port}`}return`${this.socketPath}`}static fromString(Z){return new LJ(Z)}static fromHostPort(Z,Y){if(Z.includes(":"))Z=`[${Z}]`;return LJ.fromString(`${Z}:${Y}`)}static fromSrvRecord({name:Z,port:Y}){return LJ.fromHostPort(Z,Y)}toHostPort(){if(this.socketPath)return{host:this.socketPath,port:0};const Z=this.host??"",Y=this.port??0;return{host:Z,port:Y}}}xD.HostAddress=LJ;xD.DEFAULT_PK_FACTORY={createPk(){return new PD.ObjectId}};xD.MONGODB_WARNING_CODE="MONGODB DRIVER";xD.emitWarning=SD;var DD=new Set;xD.emitWarningOnce=D11;xD.enumToString=P11;xD.supportsRetryableWrites=T11;xD.shuffle=I11;xD.commandSupportsReadConcern=j11;xD.compareObjectId=E11;xD.parseInteger=kD;xD.parseUnsignedInteger=C11;xD.matchesParentDomain=O11;xD.request=S11;class _D extends AbortController{constructor(Z=0,Y=Z>0?(0,AD.setTimeout)(()=>this.abort(),Z):null){super();this.timeoutId=Y}clear(){if(this.timeoutId!=null)(0,AD.clearTimeout)(this.timeoutId);this.timeoutId=null}}xD.TimeoutController=_D});var v1=w((bD)=>{var T01=function(Z,Y){if(!Array.isArray(Y)&&!(Y instanceof Set))Y=[Y];return Y=new Set(Y),Object.defineProperty(Z,"aspects",{value:Y,writable:!1}),Y};Object.defineProperty(bD,"__esModule",{value:!0});bD.defineAspects=bD.AbstractOperation=bD.Aspect=void 0;var P01=Z0(),oH=x0();bD.Aspect={READ_OPERATION:Symbol("READ_OPERATION"),WRITE_OPERATION:Symbol("WRITE_OPERATION"),RETRYABLE:Symbol("RETRYABLE"),EXPLAINABLE:Symbol("EXPLAINABLE"),SKIP_COLLATION:Symbol("SKIP_COLLATION"),CURSOR_CREATING:Symbol("CURSOR_CREATING"),MUST_SELECT_SAME_SERVER:Symbol("MUST_SELECT_SAME_SERVER")};var eH=Symbol("session");class gD{constructor(Z={}){this.readPreference=this.hasAspect(bD.Aspect.WRITE_OPERATION)?oH.ReadPreference.primary:oH.ReadPreference.fromOptions(Z)??oH.ReadPreference.primary,this.bsonOptions=(0,P01.resolveBSONOptions)(Z),this[eH]=Z.session!=null?Z.session:void 0,this.options=Z,this.bypassPinningCheck=!!Z.bypassPinningCheck,this.trySecondaryWrite=!1}hasAspect(Z){const Y=this.constructor;if(Y.aspects==null)return!1;return Y.aspects.has(Z)}get session(){return this[eH]}clearSession(){this[eH]=void 0}get canRetryRead(){return!0}get canRetryWrite(){return!0}}bD.AbstractOperation=gD;bD.defineAspects=T01});var c8=w((cD)=>{var E01=function(Z,Y,X){return(0,ZF.maybeCallback)(()=>C01(Z,Y),X)};async function C01(Z,Y){if(!(Y instanceof e4.AbstractOperation))throw new U8.MongoRuntimeError("This method requires a valid operation instance");if(Z.topology==null){if(Z.s.hasBeenClosed)throw new U8.MongoNotConnectedError("Client must be connected before running operations");Z.s.options[Symbol.for("@@mdb.skipPingOnConnect")]=!0;try{await Z.connect()}finally{delete Z.s.options[Symbol.for("@@mdb.skipPingOnConnect")]}}const{topology:X}=Z;if(X==null)throw new U8.MongoRuntimeError("client.connect did not create a topology but also did not throw");let J=Y.session,$;if(J==null)$=Symbol(),J=Z.startSession({owner:$,explicit:!1});else if(J.hasEnded)throw new U8.MongoExpiredSessionError("Use of expired sessions is not permitted");else if(J.snapshotEnabled&&!X.capabilities.supportsSnapshotReads)throw new U8.MongoCompatibilityError("Snapshot reads require MongoDB 5.0 or later");else if(J.client!==Z)throw new U8.MongoInvalidArgumentError("ClientSession must be from the same MongoClient");const W=Y.readPreference??mD.ReadPreference.primary,G=!!J?.inTransaction();if(G&&!W.equals(mD.ReadPreference.primary))throw new U8.MongoTransactionError(`Read preference in a transaction must be primary, not: ${W.mode}`);if(J?.isPinned&&J.transaction.isCommitted&&!Y.bypassPinningCheck)J.unpin();let K;if(Y.hasAspect(e4.Aspect.MUST_SELECT_SAME_SERVER))K=(0,uD.sameServerSelector)(Y.server?.description);else if(Y.trySecondaryWrite)K=(0,uD.secondaryWritableServerSelector)(X.commonWireVersion,W);else K=W;const Q=await X.selectServerAsync(K,{session:J});if(J==null)return Y.execute(Q,void 0);if(!Y.hasAspect(e4.Aspect.RETRYABLE))try{return await Y.execute(Q,J)}finally{if(J?.owner!=null&&J.owner===$)await J.endSession().catch(()=>null)}const z=X.s.options.retryReads&&!G&&Y.canRetryRead,H=X.s.options.retryWrites&&!G&&(0,ZF.supportsRetryableWrites)(Q)&&Y.canRetryWrite,F=Y.hasAspect(e4.Aspect.READ_OPERATION),U=Y.hasAspect(e4.Aspect.WRITE_OPERATION),V=F&&z||U&&H;if(U&&H)Y.options.willRetryWrite=!0,J.incrementTransactionNumber();try{return await Y.execute(Q,J)}catch(q){if(V&&q instanceof U8.MongoError)return await O01(Y,q,{session:J,topology:X,selector:K});throw q}finally{if(J?.owner!=null&&J.owner===$)await J.endSession().catch(()=>null)}}async function O01(Z,Y,{session:X,topology:J,selector:$}){const W=Z.hasAspect(e4.Aspect.WRITE_OPERATION),G=Z.hasAspect(e4.Aspect.READ_OPERATION);if(W&&Y.code===j01)throw new U8.MongoServerError({message:dD,errmsg:dD,originalError:Y});if(W&&!(0,U8.isRetryableWriteError)(Y))throw Y;if(G&&!(0,U8.isRetryableReadError)(Y))throw Y;if(Y instanceof U8.MongoNetworkError&&X.isPinned&&!X.inTransaction()&&Z.hasAspect(e4.Aspect.CURSOR_CREATING))X.unpin({force:!0,forceClear:!0});const K=await J.selectServerAsync($,{session:X});if(W&&!(0,ZF.supportsRetryableWrites)(K))throw new U8.MongoUnexpectedServerResponseError("Selected server does not support retryable writes");try{return await Z.execute(K,X)}catch(Q){if(Q instanceof U8.MongoError&&Q.hasErrorLabel(U8.MongoErrorLabel.NoWritesPerformed))throw Y;throw Q}}Object.defineProperty(cD,"__esModule",{value:!0});cD.executeOperation=void 0;var U8=r(),mD=x0(),uD=UJ(),ZF=$1(),e4=v1(),j01=U8.MONGODB_ERROR_CODES.IllegalOperation,dD="This MongoDB deployment does not support retryable writes. Please add retryWrites=false to your connection string.";cD.executeOperation=E01});var JF=w((pD)=>{Object.defineProperty(pD,"__esModule",{value:!0});pD.Explain=pD.ExplainVerbosity=void 0;var S01=r();pD.ExplainVerbosity=Object.freeze({queryPlanner:"queryPlanner",queryPlannerExtended:"queryPlannerExtended",executionStats:"executionStats",allPlansExecution:"allPlansExecution"});class XF{constructor(Z){if(typeof Z==="boolean")this.verbosity=Z?pD.ExplainVerbosity.allPlansExecution:pD.ExplainVerbosity.queryPlanner;else this.verbosity=Z}static fromOptions(Z){if(Z?.explain==null)return;const Y=Z.explain;if(typeof Y==="boolean"||typeof Y==="string")return new XF(Y);throw new S01.MongoInvalidArgumentError('Field "explain" must be a string or a boolean')}}pD.Explain=XF});var A0=w((sD)=>{Object.defineProperty(sD,"__esModule",{value:!0});sD.CommandOperation=void 0;var k01=r(),_01=JF(),x01=_6(),f01=UJ(),RJ=$1(),nD=d8(),iZ=v1();class aD extends iZ.AbstractOperation{constructor(Z,Y){super(Y);this.options=Y??{};const X=Y?.dbName||Y?.authdb;if(X)this.ns=new RJ.MongoDBNamespace(X,"$cmd");else this.ns=Z?Z.s.namespace.withCollection("$cmd"):new RJ.MongoDBNamespace("admin","$cmd");if(this.readConcern=x01.ReadConcern.fromOptions(Y),this.writeConcern=nD.WriteConcern.fromOptions(Y),this.hasAspect(iZ.Aspect.EXPLAINABLE))this.explain=_01.Explain.fromOptions(Y);else if(Y?.explain!=null)throw new k01.MongoInvalidArgumentError('Option "explain" is not supported on this command')}get canRetryWrite(){if(this.hasAspect(iZ.Aspect.EXPLAINABLE))return this.explain==null;return!0}async executeCommand(Z,Y,X){this.server=Z;const J={...this.options,...this.bsonOptions,readPreference:this.readPreference,session:Y},$=(0,RJ.maxWireVersion)(Z),W=this.session&&this.session.inTransaction();if(this.readConcern&&(0,RJ.commandSupportsReadConcern)(X)&&!W)Object.assign(X,{readConcern:this.readConcern});if(this.trySecondaryWrite&&$<f01.MIN_SECONDARY_WRITE_WIRE_VERSION)J.omitReadPreference=!0;if(this.writeConcern&&this.hasAspect(iZ.Aspect.WRITE_OPERATION)&&!W)nD.WriteConcern.apply(X,this.writeConcern);if(J.collation&&typeof J.collation==="object"&&!this.hasAspect(iZ.Aspect.SKIP_COLLATION))Object.assign(X,{collation:J.collation});if(typeof J.maxTimeMS==="number")X.maxTimeMS=J.maxTimeMS;if(this.hasAspect(iZ.Aspect.EXPLAINABLE)&&this.explain)X=(0,RJ.decorateWithExplain)(X,this.explain);return Z.commandAsync(this.ns,X,J)}}sD.CommandOperation=aD});var ZP=w((oD)=>{Object.defineProperty(oD,"__esModule",{value:!0});oD.ListDatabasesOperation=void 0;var tD=$1(),y01=A0(),$F=v1();class WF extends y01.CommandOperation{constructor(Z,Y){super(Z,Y);this.options=Y??{},this.ns=new tD.MongoDBNamespace("admin","$cmd")}async execute(Z,Y){const X={listDatabases:1};if(typeof this.options.nameOnly==="boolean")X.nameOnly=this.options.nameOnly;if(this.options.filter)X.filter=this.options.filter;if(typeof this.options.authorizedDatabases==="boolean")X.authorizedDatabases=this.options.authorizedDatabases;if((0,tD.maxWireVersion)(Z)>=9&&this.options.comment!==void 0)X.comment=this.options.comment;return super.executeCommand(Z,Y,X)}}oD.ListDatabasesOperation=WF;(0,$F.defineAspects)(WF,[$F.Aspect.READ_OPERATION,$F.Aspect.RETRYABLE])});var KF=w((XP)=>{Object.defineProperty(XP,"__esModule",{value:!0});XP.RemoveUserOperation=void 0;var g01=A0(),YP=v1();class GF extends g01.CommandOperation{constructor(Z,Y,X){super(Z,X);this.options=X,this.username=Y}async execute(Z,Y){return await super.executeCommand(Z,Y,{dropUser:this.username}),!0}}XP.RemoveUserOperation=GF;(0,YP.defineAspects)(GF,[YP.Aspect.WRITE_OPERATION])});var nZ=w((KP)=>{Object.defineProperty(KP,"__esModule",{value:!0});KP.RunAdminCommandOperation=KP.RunCommandOperation=void 0;var b01=$1(),$P=v1();class WP extends $P.AbstractOperation{constructor(Z,Y,X){super(X);this.command=Y,this.options=X,this.ns=Z.s.namespace.withCollection("$cmd")}async execute(Z,Y){return this.server=Z,Z.commandAsync(this.ns,this.command,{...this.options,readPreference:this.readPreference,session:Y})}}KP.RunCommandOperation=WP;class GP extends $P.AbstractOperation{constructor(Z,Y){super(Y);this.command=Z,this.options=Y,this.ns=new b01.MongoDBNamespace("admin","$cmd")}async execute(Z,Y){return this.server=Z,Z.commandAsync(this.ns,this.command,{...this.options,readPreference:this.readPreference,session:Y})}}KP.RunAdminCommandOperation=GP});var UP=w((HP)=>{Object.defineProperty(HP,"__esModule",{value:!0});HP.ValidateCollectionOperation=void 0;var QF=r(),h01=A0();class zP extends h01.CommandOperation{constructor(Z,Y,X){const J={validate:Y},$=Object.keys(X);for(let W=0;W<$.length;W++)if(Object.prototype.hasOwnProperty.call(X,$[W])&&$[W]!=="session")J[$[W]]=X[$[W]];super(Z.s.db,X);this.options=X,this.command=J,this.collectionName=Y}async execute(Z,Y){const X=this.collectionName,J=await super.executeCommand(Z,Y,this.command);if(J.result!=null&&typeof J.result!=="string")throw new QF.MongoUnexpectedServerResponseError("Error with validation data");if(J.result!=null&&J.result.match(/exception|corrupt/)!=null)throw new QF.MongoUnexpectedServerResponseError(`Invalid collection ${X}`);if(J.valid!=null&&!J.valid)throw new QF.MongoUnexpectedServerResponseError(`Invalid collection ${X}`);return J}}HP.ValidateCollectionOperation=zP});var zF=w((qP)=>{Object.defineProperty(qP,"__esModule",{value:!0});qP.Admin=void 0;var m01=Z0(),VW=c8(),u01=ZP(),d01=KF(),c01=nZ(),l01=UP();class VP{constructor(Z){this.s={db:Z}}async command(Z,Y){return(0,VW.executeOperation)(this.s.db.client,new c01.RunAdminCommandOperation(Z,{...(0,m01.resolveBSONOptions)(Y),session:Y?.session,readPreference:Y?.readPreference}))}async buildInfo(Z){return this.command({buildinfo:1},Z)}async serverInfo(Z){return this.command({buildinfo:1},Z)}async serverStatus(Z){return this.command({serverStatus:1},Z)}async ping(Z){return this.command({ping:1},Z)}async removeUser(Z,Y){return(0,VW.executeOperation)(this.s.db.client,new d01.RemoveUserOperation(this.s.db,Z,{dbName:"admin",...Y}))}async validateCollection(Z,Y={}){return(0,VW.executeOperation)(this.s.db.client,new l01.ValidateCollectionOperation(this,Z,Y))}async listDatabases(Z){return(0,VW.executeOperation)(this.s.db.client,new u01.ListDatabasesOperation(this.s.db,Z))}async replSetGetStatus(Z){return this.command({replSetGetStatus:1},Z)}}qP.Admin=VP});var VF=w((wP)=>{var UF=function(Z,Y){const X={q:Z,limit:typeof Y.limit==="number"?Y.limit:0};if(Y.collation)X.collation=Y.collation;if(Y.hint)X.hint=Y.hint;return X};Object.defineProperty(wP,"__esModule",{value:!0});wP.makeDeleteStatement=wP.DeleteManyOperation=wP.DeleteOneOperation=wP.DeleteOperation=void 0;var MJ=r(),p01=A0(),x6=v1();class BJ extends p01.CommandOperation{constructor(Z,Y,X){super(void 0,X);this.options=X,this.ns=Z,this.statements=Y}get canRetryWrite(){if(super.canRetryWrite===!1)return!1;return this.statements.every((Z)=>Z.limit!=null?Z.limit>0:!0)}async execute(Z,Y){const X=this.options??{},J=typeof X.ordered==="boolean"?X.ordered:!0,$={delete:this.ns.collection,deletes:this.statements,ordered:J};if(X.let)$.let=X.let;if(X.comment!==void 0)$.comment=X.comment;if(this.writeConcern&&this.writeConcern.w===0){if(this.statements.find((G)=>G.hint))throw new MJ.MongoCompatibilityError("hint is not supported with unacknowledged writes")}return super.executeCommand(Z,Y,$)}}wP.DeleteOperation=BJ;class HF extends BJ{constructor(Z,Y,X){super(Z.s.namespace,[UF(Y,{...X,limit:1})],X)}async execute(Z,Y){const X=await super.execute(Z,Y);if(this.explain)return X;if(X.code)throw new MJ.MongoServerError(X);if(X.writeErrors)throw new MJ.MongoServerError(X.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,deletedCount:X.n}}}wP.DeleteOneOperation=HF;class FF extends BJ{constructor(Z,Y,X){super(Z.s.namespace,[UF(Y,X)],X)}async execute(Z,Y){const X=await super.execute(Z,Y);if(this.explain)return X;if(X.code)throw new MJ.MongoServerError(X);if(X.writeErrors)throw new MJ.MongoServerError(X.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,deletedCount:X.n}}}wP.DeleteManyOperation=FF;wP.makeDeleteStatement=UF;(0,x6.defineAspects)(BJ,[x6.Aspect.RETRYABLE,x6.Aspect.WRITE_OPERATION]);(0,x6.defineAspects)(HF,[x6.Aspect.RETRYABLE,x6.Aspect.WRITE_OPERATION,x6.Aspect.EXPLAINABLE,x6.Aspect.SKIP_COLLATION]);(0,x6.defineAspects)(FF,[x6.Aspect.WRITE_OPERATION,x6.Aspect.EXPLAINABLE,x6.Aspect.SKIP_COLLATION])});var wF=w((MP)=>{Object.defineProperty(MP,"__esModule",{value:!0});MP.BulkWriteOperation=void 0;var qF=v1();class LF extends qF.AbstractOperation{constructor(Z,Y,X){super(X);this.options=X,this.collection=Z,this.operations=Y}async execute(Z,Y){const X=this.collection,J=this.operations,$={...this.options,...this.bsonOptions,readPreference:this.readPreference},W=$.ordered===!1?X.initializeUnorderedBulkOp($):X.initializeOrderedBulkOp($);for(let K=0;K<J.length;K++)W.raw(J[K]);return await W.execute({...$,session:Y})}}MP.BulkWriteOperation=LF;(0,qF.defineAspects)(LF,[qF.Aspect.WRITE_OPERATION])});var RF=w((NP)=>{async function s01(Z,Y,X){if(X==null)X={};const J=X.full==null?!1:X.full,$=await Z.collection(Y).listIndexes(X).toArray();if(J)return $;const W={};for(let G of $)W[G.name]=Object.entries(G.key);return W}var r01=function(Z,Y,X){if((typeof X.forceServerObjectId==="boolean"?X.forceServerObjectId:Z.s.db.options?.forceServerObjectId)===!0)return Y;return Y.map(($)=>{if($._id==null)$._id=Z.s.pkFactory.createPk();return $})};Object.defineProperty(NP,"__esModule",{value:!0});NP.prepareDocs=NP.indexInformation=void 0;NP.indexInformation=s01;NP.prepareDocs=r01});var NF=w((PP)=>{Object.defineProperty(PP,"__esModule",{value:!0});PP.InsertManyOperation=PP.InsertOneOperation=PP.InsertOperation=void 0;var qW=r(),o01=d8(),e01=wF(),Z81=A0(),DP=RF(),V4=v1();class LW extends Z81.CommandOperation{constructor(Z,Y,X){super(void 0,X);this.options={...X,checkKeys:X.checkKeys??!1},this.ns=Z,this.documents=Y}async execute(Z,Y){const X=this.options??{},J=typeof X.ordered==="boolean"?X.ordered:!0,$={insert:this.ns.collection,documents:this.documents,ordered:J};if(typeof X.bypassDocumentValidation==="boolean")$.bypassDocumentValidation=X.bypassDocumentValidation;if(X.comment!==void 0)$.comment=X.comment;return super.executeCommand(Z,Y,$)}}PP.InsertOperation=LW;class MF extends LW{constructor(Z,Y,X){super(Z.s.namespace,(0,DP.prepareDocs)(Z,[Y],X),X)}async execute(Z,Y){const X=await super.execute(Z,Y);if(X.code)throw new qW.MongoServerError(X);if(X.writeErrors)throw new qW.MongoServerError(X.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,insertedId:this.documents[0]._id}}}PP.InsertOneOperation=MF;class BF extends V4.AbstractOperation{constructor(Z,Y,X){super(X);if(!Array.isArray(Y))throw new qW.MongoInvalidArgumentError('Argument "docs" must be an array of documents');this.options=X,this.collection=Z,this.docs=Y}async execute(Z,Y){const X=this.collection,J={...this.options,...this.bsonOptions,readPreference:this.readPreference},$=o01.WriteConcern.fromOptions(J),W=new e01.BulkWriteOperation(X,(0,DP.prepareDocs)(X,this.docs,J).map((G)=>({insertOne:{document:G}})),J);try{const G=await W.execute(Z,Y);return{acknowledged:$?.w!==0,insertedCount:G.insertedCount,insertedIds:G.insertedIds}}catch(G){if(G&&G.message==="Operation must be an object with an operation key")throw new qW.MongoInvalidArgumentError("Collection.insertMany() cannot be called with an array that has null/undefined values");throw G}}}PP.InsertManyOperation=BF;(0,V4.defineAspects)(LW,[V4.Aspect.RETRYABLE,V4.Aspect.WRITE_OPERATION]);(0,V4.defineAspects)(MF,[V4.Aspect.RETRYABLE,V4.Aspect.WRITE_OPERATION]);(0,V4.defineAspects)(BF,[V4.Aspect.WRITE_OPERATION])});var IF=w((IP)=>{var wW=function(Z,Y,X){if(Z==null||typeof Z!=="object")throw new f6.MongoInvalidArgumentError("Selector must be a valid JavaScript object");if(Y==null||typeof Y!=="object")throw new f6.MongoInvalidArgumentError("Document must be a valid JavaScript object");const J={q:Z,u:Y};if(typeof X.upsert==="boolean")J.upsert=X.upsert;if(X.multi)J.multi=X.multi;if(X.hint)J.hint=X.hint;if(X.arrayFilters)J.arrayFilters=X.arrayFilters;if(X.collation)J.collation=X.collation;return J};Object.defineProperty(IP,"__esModule",{value:!0});IP.makeUpdateStatement=IP.ReplaceOneOperation=IP.UpdateManyOperation=IP.UpdateOneOperation=IP.UpdateOperation=void 0;var f6=r(),AF=$1(),J81=A0(),s0=v1();class aZ extends J81.CommandOperation{constructor(Z,Y,X){super(void 0,X);this.options=X,this.ns=Z,this.statements=Y}get canRetryWrite(){if(super.canRetryWrite===!1)return!1;return this.statements.every((Z)=>Z.multi==null||Z.multi===!1)}async execute(Z,Y){const X=this.options??{},J=typeof X.ordered==="boolean"?X.ordered:!0,$={update:this.ns.collection,updates:this.statements,ordered:J};if(typeof X.bypassDocumentValidation==="boolean")$.bypassDocumentValidation=X.bypassDocumentValidation;if(X.let)$.let=X.let;if(X.comment!==void 0)$.comment=X.comment;if(this.writeConcern&&this.writeConcern.w===0){if(this.statements.find((G)=>G.hint))throw new f6.MongoCompatibilityError("hint is not supported with unacknowledged writes")}return super.executeCommand(Z,Y,$)}}IP.UpdateOperation=aZ;class DF extends aZ{constructor(Z,Y,X,J){super(Z.s.namespace,[wW(Y,X,{...J,multi:!1})],J);if(!(0,AF.hasAtomicOperators)(X))throw new f6.MongoInvalidArgumentError("Update document requires atomic operators")}async execute(Z,Y){const X=await super.execute(Z,Y);if(this.explain!=null)return X;if(X.code)throw new f6.MongoServerError(X);if(X.writeErrors)throw new f6.MongoServerError(X.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:X.nModified??X.n,upsertedId:Array.isArray(X.upserted)&&X.upserted.length>0?X.upserted[0]._id:null,upsertedCount:Array.isArray(X.upserted)&&X.upserted.length?X.upserted.length:0,matchedCount:Array.isArray(X.upserted)&&X.upserted.length>0?0:X.n}}}IP.UpdateOneOperation=DF;class PF extends aZ{constructor(Z,Y,X,J){super(Z.s.namespace,[wW(Y,X,{...J,multi:!0})],J);if(!(0,AF.hasAtomicOperators)(X))throw new f6.MongoInvalidArgumentError("Update document requires atomic operators")}async execute(Z,Y){const X=await super.execute(Z,Y);if(this.explain!=null)return X;if(X.code)throw new f6.MongoServerError(X);if(X.writeErrors)throw new f6.MongoServerError(X.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:X.nModified??X.n,upsertedId:Array.isArray(X.upserted)&&X.upserted.length>0?X.upserted[0]._id:null,upsertedCount:Array.isArray(X.upserted)&&X.upserted.length?X.upserted.length:0,matchedCount:Array.isArray(X.upserted)&&X.upserted.length>0?0:X.n}}}IP.UpdateManyOperation=PF;class TF extends aZ{constructor(Z,Y,X,J){super(Z.s.namespace,[wW(Y,X,{...J,multi:!1})],J);if((0,AF.hasAtomicOperators)(X))throw new f6.MongoInvalidArgumentError("Replacement document must not contain atomic operators")}async execute(Z,Y){const X=await super.execute(Z,Y);if(this.explain!=null)return X;if(X.code)throw new f6.MongoServerError(X);if(X.writeErrors)throw new f6.MongoServerError(X.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:X.nModified??X.n,upsertedId:Array.isArray(X.upserted)&&X.upserted.length>0?X.upserted[0]._id:null,upsertedCount:Array.isArray(X.upserted)&&X.upserted.length?X.upserted.length:0,matchedCount:Array.isArray(X.upserted)&&X.upserted.length>0?0:X.n}}}IP.ReplaceOneOperation=TF;IP.makeUpdateStatement=wW;(0,s0.defineAspects)(aZ,[s0.Aspect.RETRYABLE,s0.Aspect.WRITE_OPERATION,s0.Aspect.SKIP_COLLATION]);(0,s0.defineAspects)(DF,[s0.Aspect.RETRYABLE,s0.Aspect.WRITE_OPERATION,s0.Aspect.EXPLAINABLE,s0.Aspect.SKIP_COLLATION]);(0,s0.defineAspects)(PF,[s0.Aspect.WRITE_OPERATION,s0.Aspect.EXPLAINABLE,s0.Aspect.SKIP_COLLATION]);(0,s0.defineAspects)(TF,[s0.Aspect.RETRYABLE,s0.Aspect.WRITE_OPERATION,s0.Aspect.SKIP_COLLATION])});var TJ=w((xP)=>{var NW=function(Z,Y,X,J){if(X)J=X;else if(J&&J.result)J=J.result;if(J==null)return;if(J.ok===0&&Y.ok===1){Y.ok=0;const W={index:0,code:J.code||0,errmsg:J.message,errInfo:J.errInfo,op:Z.operations[0]};Y.writeErrors.push(new BW(W));return}else if(J.ok===0&&Y.ok===0)return;if(_P(Z)&&J.n)Y.nInserted=Y.nInserted+J.n;if(EF(Z)&&J.n)Y.nRemoved=Y.nRemoved+J.n;let $=0;if(Array.isArray(J.upserted)){$=J.upserted.length;for(let W=0;W<J.upserted.length;W++)Y.upserted.push({index:J.upserted[W].index+Z.originalZeroIndex,_id:J.upserted[W]._id})}else if(J.upserted)$=1,Y.upserted.push({index:Z.originalZeroIndex,_id:J.upserted});if(jF(Z)&&J.n){const W=J.nModified;if(Y.nUpserted=Y.nUpserted+$,Y.nMatched=Y.nMatched+(J.n-$),typeof W==="number")Y.nModified=Y.nModified+W;else Y.nModified=0}if(Array.isArray(J.writeErrors))for(let W=0;W<J.writeErrors.length;W++){const G={index:Z.originalIndexes[J.writeErrors[W].index],code:J.writeErrors[W].code,errmsg:J.writeErrors[W].errmsg,errInfo:J.writeErrors[W].errInfo,op:Z.operations[J.writeErrors[W].index]};Y.writeErrors.push(new BW(G))}if(J.writeConcernError)Y.writeConcernErrors.push(new PJ(J.writeConcernError))},SP=function(Z,Y,X){if(Z.s.batches.length===0)return X(void 0,new Y5(Z.s.bulkResult,Z.isOrdered));const J=Z.s.batches.shift();function $(G,K){if(G&&("message"in G)&&!(G instanceof f0.MongoWriteConcernError))return X(new sZ(G,new Y5(Z.s.bulkResult,Z.isOrdered)));if(G instanceof f0.MongoWriteConcernError)return F81(J,Z.s.bulkResult,Z.isOrdered,G,X);NW(J,Z.s.bulkResult,G,K);const Q=new Y5(Z.s.bulkResult,Z.isOrdered);if(Z.handleWriteError(X,Q))return;SP(Z,Y,X)}const W=(0,Z5.resolveOptions)(Z,{...Y,ordered:Z.isOrdered});if(W.bypassDocumentValidation!==!0)delete W.bypassDocumentValidation;if(Z.operationId)$.operationId=Z.operationId;if(Z.s.bypassDocumentValidation===!0)W.bypassDocumentValidation=!0;if(Z.s.checkKeys===!1)W.checkKeys=!1;if(W.retryWrites){if(jF(J))W.retryWrites=W.retryWrites&&!J.operations.some((G)=>G.multi);if(EF(J))W.retryWrites=W.retryWrites&&!J.operations.some((G)=>G.limit===0)}try{if(_P(J))(0,MW.executeOperation)(Z.s.collection.client,new z81.InsertOperation(Z.s.namespace,J.operations,W),$);else if(jF(J))(0,MW.executeOperation)(Z.s.collection.client,new H9.UpdateOperation(Z.s.namespace,J.operations,W),$);else if(EF(J))(0,MW.executeOperation)(Z.s.collection.client,new DJ.DeleteOperation(Z.s.namespace,J.operations,W),$)}catch(G){G.ok=0,NW(J,Z.s.bulkResult,G,void 0),X()}},F81=function(Z,Y,X,J,$){NW(Z,Y,void 0,J.result),$(new sZ({message:J.result?.writeConcernError.errmsg,code:J.result?.writeConcernError.result},new Y5(Y,X)))},CP=function(Z){if(typeof Z.s.options.forceServerObjectId==="boolean")return Z.s.options.forceServerObjectId;if(typeof Z.s.collection.s.db.options?.forceServerObjectId==="boolean")return Z.s.collection.s.db.options?.forceServerObjectId;return!1},_P=function(Z){return Z.batchType===xP.BatchType.INSERT},jF=function(Z){return Z.batchType===xP.BatchType.UPDATE},EF=function(Z){return Z.batchType===xP.BatchType.DELETE},AJ=function(Z){let{currentOp:Y}=Z.s;if(Z.s.currentOp=void 0,!Y)Y={};return Y};Object.defineProperty(xP,"__esModule",{value:!0});xP.BulkOperationBase=xP.FindOperators=xP.MongoBulkWriteError=xP.mergeBatchResults=xP.WriteError=xP.WriteConcernError=xP.BulkWriteResult=xP.Batch=xP.BatchType=void 0;var Q81=import.meta.require("util"),RW=Z0(),f0=r(),DJ=VF(),MW=c8(),z81=NF(),H81=v1(),H9=IF(),Z5=$1(),EP=d8(),NJ=Symbol("serverError");xP.BatchType=Object.freeze({INSERT:1,UPDATE:2,DELETE:3});class OP{constructor(Z,Y){this.originalZeroIndex=Y,this.currentIndex=0,this.originalIndexes=[],this.batchType=Z,this.operations=[],this.size=0,this.sizeBytes=0}}xP.Batch=OP;class Y5{static generateIdMap(Z){const Y={};for(let X of Z)Y[X.index]=X._id;return Y}constructor(Z,Y){this.result=Z,this.insertedCount=this.result.nInserted??0,this.matchedCount=this.result.nMatched??0,this.modifiedCount=this.result.nModified??0,this.deletedCount=this.result.nRemoved??0,this.upsertedCount=this.result.upserted.length??0,this.upsertedIds=Y5.generateIdMap(this.result.upserted),this.insertedIds=Y5.generateIdMap(this.getSuccessfullyInsertedIds(Z,Y)),Object.defineProperty(this,"result",{value:this.result,enumerable:!1})}get ok(){return this.result.ok}getSuccessfullyInsertedIds(Z,Y){if(Z.writeErrors.length===0)return Z.insertedIds;if(Y)return Z.insertedIds.slice(0,Z.writeErrors[0].index);return Z.insertedIds.filter(({index:X})=>!Z.writeErrors.some((J)=>X===J.index))}getUpsertedIdAt(Z){return this.result.upserted[Z]}getRawResponse(){return this.result}hasWriteErrors(){return this.result.writeErrors.length>0}getWriteErrorCount(){return this.result.writeErrors.length}getWriteErrorAt(Z){return Z<this.result.writeErrors.length?this.result.writeErrors[Z]:void 0}getWriteErrors(){return this.result.writeErrors}getWriteConcernError(){if(this.result.writeConcernErrors.length===0)return;else if(this.result.writeConcernErrors.length===1)return this.result.writeConcernErrors[0];else{let Z="";for(let Y=0;Y<this.result.writeConcernErrors.length;Y++){const X=this.result.writeConcernErrors[Y];if(Z=Z+X.errmsg,Y===0)Z=Z+" and "}return new PJ({errmsg:Z,code:f0.MONGODB_ERROR_CODES.WriteConcernFailed})}}toString(){return`BulkWriteResult(${this.result})`}isOk(){return this.result.ok===1}}xP.BulkWriteResult=Y5;class PJ{constructor(Z){this[NJ]=Z}get code(){return this[NJ].code}get errmsg(){return this[NJ].errmsg}get errInfo(){return this[NJ].errInfo}toJSON(){return this[NJ]}toString(){return`WriteConcernError(${this.errmsg})`}}xP.WriteConcernError=PJ;class BW{constructor(Z){this.err=Z}get code(){return this.err.code}get index(){return this.err.index}get errmsg(){return this.err.errmsg}get errInfo(){return this.err.errInfo}getOperation(){return this.err.op}toJSON(){return{code:this.err.code,index:this.err.index,errmsg:this.err.errmsg,op:this.err.op}}toString(){return`WriteError(${JSON.stringify(this.toJSON())})`}}xP.WriteError=BW;xP.mergeBatchResults=NW;class sZ extends f0.MongoServerError{constructor(Z,Y){super(Z);if(this.writeErrors=[],Z instanceof PJ)this.err=Z;else if(!(Z instanceof Error))this.message=Z.message,this.code=Z.code,this.writeErrors=Z.writeErrors??[];this.result=Y,Object.assign(this,Z)}get name(){return"MongoBulkWriteError"}get insertedCount(){return this.result.insertedCount}get matchedCount(){return this.result.matchedCount}get modifiedCount(){return this.result.modifiedCount}get deletedCount(){return this.result.deletedCount}get upsertedCount(){return this.result.upsertedCount}get insertedIds(){return this.result.insertedIds}get upsertedIds(){return this.result.upsertedIds}}xP.MongoBulkWriteError=sZ;class CF{constructor(Z){this.bulkOperation=Z}update(Z){const Y=AJ(this.bulkOperation);return this.bulkOperation.addToOperationsList(xP.BatchType.UPDATE,(0,H9.makeUpdateStatement)(Y.selector,Z,{...Y,multi:!0}))}updateOne(Z){if(!(0,Z5.hasAtomicOperators)(Z))throw new f0.MongoInvalidArgumentError("Update document requires atomic operators");const Y=AJ(this.bulkOperation);return this.bulkOperation.addToOperationsList(xP.BatchType.UPDATE,(0,H9.makeUpdateStatement)(Y.selector,Z,{...Y,multi:!1}))}replaceOne(Z){if((0,Z5.hasAtomicOperators)(Z))throw new f0.MongoInvalidArgumentError("Replacement document must not use atomic operators");const Y=AJ(this.bulkOperation);return this.bulkOperation.addToOperationsList(xP.BatchType.UPDATE,(0,H9.makeUpdateStatement)(Y.selector,Z,{...Y,multi:!1}))}deleteOne(){const Z=AJ(this.bulkOperation);return this.bulkOperation.addToOperationsList(xP.BatchType.DELETE,(0,DJ.makeDeleteStatement)(Z.selector,{...Z,limit:1}))}delete(){const Z=AJ(this.bulkOperation);return this.bulkOperation.addToOperationsList(xP.BatchType.DELETE,(0,DJ.makeDeleteStatement)(Z.selector,{...Z,limit:0}))}upsert(){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.upsert=!0,this}collation(Z){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.collation=Z,this}arrayFilters(Z){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.arrayFilters=Z,this}hint(Z){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.hint=Z,this}}xP.FindOperators=CF;var U81=(0,Q81.promisify)(SP);class kP extends H81.AbstractOperation{constructor(Z,Y){super(Y);this.bulkOperation=Z}execute(Z,Y){if(this.options.session==null)this.options.session=Y;return U81(this.bulkOperation,this.options)}}class OF{constructor(Z,Y,X){this.isOrdered=X;const J=(0,Z5.getTopology)(Z);Y=Y==null?{}:Y;const $=Z.s.namespace,W=!1,G=void 0,K=J.lastHello(),Q=!!(J.s.options&&J.s.options.autoEncrypter),z=K&&K.maxBsonObjectSize?K.maxBsonObjectSize:16777216,H=Q?2097152:z,F=K&&K.maxWriteBatchSize?K.maxWriteBatchSize:1000,U=(F-1).toString(10).length+2;let V=Object.assign({},Y);V=(0,Z5.applyRetryableWrites)(V,Z.s.db);const q={ok:1,writeErrors:[],writeConcernErrors:[],insertedIds:[],nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[]};if(this.s={bulkResult:q,currentBatch:void 0,currentIndex:0,currentBatchSize:0,currentBatchSizeBytes:0,currentInsertBatch:void 0,currentUpdateBatch:void 0,currentRemoveBatch:void 0,batches:[],writeConcern:EP.WriteConcern.fromOptions(Y),maxBsonObjectSize:z,maxBatchSizeBytes:H,maxWriteBatchSize:F,maxKeySize:U,namespace:$,topology:J,options:V,bsonOptions:(0,RW.resolveBSONOptions)(Y),currentOp:G,executed:W,collection:Z,err:void 0,checkKeys:typeof Y.checkKeys==="boolean"?Y.checkKeys:!1},Y.bypassDocumentValidation===!0)this.s.bypassDocumentValidation=!0}insert(Z){if(Z._id==null&&!CP(this))Z._id=new RW.ObjectId;return this.addToOperationsList(xP.BatchType.INSERT,Z)}find(Z){if(!Z)throw new f0.MongoInvalidArgumentError("Bulk find operation must specify a selector");return this.s.currentOp={selector:Z},new CF(this)}raw(Z){if(Z==null||typeof Z!=="object")throw new f0.MongoInvalidArgumentError("Operation must be an object with an operation key");if("insertOne"in Z){const Y=CP(this);if(Z.insertOne&&Z.insertOne.document==null){if(Y!==!0&&Z.insertOne._id==null)Z.insertOne._id=new RW.ObjectId;return this.addToOperationsList(xP.BatchType.INSERT,Z.insertOne)}if(Y!==!0&&Z.insertOne.document._id==null)Z.insertOne.document._id=new RW.ObjectId;return this.addToOperationsList(xP.BatchType.INSERT,Z.insertOne.document)}if(("replaceOne"in Z)||("updateOne"in Z)||("updateMany"in Z)){if("replaceOne"in Z){if("q"in Z.replaceOne)throw new f0.MongoInvalidArgumentError("Raw operations are not allowed");const Y=(0,H9.makeUpdateStatement)(Z.replaceOne.filter,Z.replaceOne.replacement,{...Z.replaceOne,multi:!1});if((0,Z5.hasAtomicOperators)(Y.u))throw new f0.MongoInvalidArgumentError("Replacement document must not use atomic operators");return this.addToOperationsList(xP.BatchType.UPDATE,Y)}if("updateOne"in Z){if("q"in Z.updateOne)throw new f0.MongoInvalidArgumentError("Raw operations are not allowed");const Y=(0,H9.makeUpdateStatement)(Z.updateOne.filter,Z.updateOne.update,{...Z.updateOne,multi:!1});if(!(0,Z5.hasAtomicOperators)(Y.u))throw new f0.MongoInvalidArgumentError("Update document requires atomic operators");return this.addToOperationsList(xP.BatchType.UPDATE,Y)}if("updateMany"in Z){if("q"in Z.updateMany)throw new f0.MongoInvalidArgumentError("Raw operations are not allowed");const Y=(0,H9.makeUpdateStatement)(Z.updateMany.filter,Z.updateMany.update,{...Z.updateMany,multi:!0});if(!(0,Z5.hasAtomicOperators)(Y.u))throw new f0.MongoInvalidArgumentError("Update document requires atomic operators");return this.addToOperationsList(xP.BatchType.UPDATE,Y)}}if("deleteOne"in Z){if("q"in Z.deleteOne)throw new f0.MongoInvalidArgumentError("Raw operations are not allowed");return this.addToOperationsList(xP.BatchType.DELETE,(0,DJ.makeDeleteStatement)(Z.deleteOne.filter,{...Z.deleteOne,limit:1}))}if("deleteMany"in Z){if("q"in Z.deleteMany)throw new f0.MongoInvalidArgumentError("Raw operations are not allowed");return this.addToOperationsList(xP.BatchType.DELETE,(0,DJ.makeDeleteStatement)(Z.deleteMany.filter,{...Z.deleteMany,limit:0}))}throw new f0.MongoInvalidArgumentError("bulkWrite only supports insertOne, updateOne, updateMany, deleteOne, deleteMany")}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern}get batches(){const Z=[...this.s.batches];if(this.isOrdered){if(this.s.currentBatch)Z.push(this.s.currentBatch)}else{if(this.s.currentInsertBatch)Z.push(this.s.currentInsertBatch);if(this.s.currentUpdateBatch)Z.push(this.s.currentUpdateBatch);if(this.s.currentRemoveBatch)Z.push(this.s.currentRemoveBatch)}return Z}async execute(Z={}){if(this.s.executed)throw new f0.MongoBatchReExecutionError;const Y=EP.WriteConcern.fromOptions(Z);if(Y)this.s.writeConcern=Y;if(this.isOrdered){if(this.s.currentBatch)this.s.batches.push(this.s.currentBatch)}else{if(this.s.currentInsertBatch)this.s.batches.push(this.s.currentInsertBatch);if(this.s.currentUpdateBatch)this.s.batches.push(this.s.currentUpdateBatch);if(this.s.currentRemoveBatch)this.s.batches.push(this.s.currentRemoveBatch)}if(this.s.batches.length===0)throw new f0.MongoInvalidArgumentError("Invalid BulkOperation, Batch cannot be empty");this.s.executed=!0;const X={...this.s.options,...Z},J=new kP(this,X);return(0,MW.executeOperation)(this.s.collection.client,J)}handleWriteError(Z,Y){if(this.s.bulkResult.writeErrors.length>0){const J=this.s.bulkResult.writeErrors[0].errmsg?this.s.bulkResult.writeErrors[0].errmsg:"write operation failed";return Z(new sZ({message:J,code:this.s.bulkResult.writeErrors[0].code,writeErrors:this.s.bulkResult.writeErrors},Y)),!0}const X=Y.getWriteConcernError();if(X)return Z(new sZ(X,Y)),!0;return!1}}xP.BulkOperationBase=OF;Object.defineProperty(OF.prototype,"length",{enumerable:!0,get(){return this.s.currentIndex}})});var SF=w((bP)=>{Object.defineProperty(bP,"__esModule",{value:!0});bP.OrderedBulkOperation=void 0;var N81=Z0(),yP=r(),AW=TJ();class gP extends AW.BulkOperationBase{constructor(Z,Y){super(Z,Y,!0)}addToOperationsList(Z,Y){const X=N81.calculateObjectSize(Y,{checkKeys:!1,ignoreUndefined:!1});if(X>=this.s.maxBsonObjectSize)throw new yP.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);if(this.s.currentBatch==null)this.s.currentBatch=new AW.Batch(Z,this.s.currentIndex);const J=this.s.maxKeySize;if(this.s.currentBatchSize+1>=this.s.maxWriteBatchSize||this.s.currentBatchSize>0&&this.s.currentBatchSizeBytes+J+X>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==Z)this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new AW.Batch(Z,this.s.currentIndex),this.s.currentBatchSize=0,this.s.currentBatchSizeBytes=0;if(Z===AW.BatchType.INSERT)this.s.bulkResult.insertedIds.push({index:this.s.currentIndex,_id:Y._id});if(Array.isArray(Y))throw new yP.MongoInvalidArgumentError("Operation passed in cannot be an Array");return this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentBatch.operations.push(Y),this.s.currentBatchSize+=1,this.s.currentBatchSizeBytes+=J+X,this.s.currentIndex+=1,this}}bP.OrderedBulkOperation=gP});var kF=w((uP)=>{Object.defineProperty(uP,"__esModule",{value:!0});uP.UnorderedBulkOperation=void 0;var A81=Z0(),hP=r(),q4=TJ();class mP extends q4.BulkOperationBase{constructor(Z,Y){super(Z,Y,!1)}handleWriteError(Z,Y){if(this.s.batches.length)return!1;return super.handleWriteError(Z,Y)}addToOperationsList(Z,Y){const X=A81.calculateObjectSize(Y,{checkKeys:!1,ignoreUndefined:!1});if(X>=this.s.maxBsonObjectSize)throw new hP.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);if(this.s.currentBatch=void 0,Z===q4.BatchType.INSERT)this.s.currentBatch=this.s.currentInsertBatch;else if(Z===q4.BatchType.UPDATE)this.s.currentBatch=this.s.currentUpdateBatch;else if(Z===q4.BatchType.DELETE)this.s.currentBatch=this.s.currentRemoveBatch;const J=this.s.maxKeySize;if(this.s.currentBatch==null)this.s.currentBatch=new q4.Batch(Z,this.s.currentIndex);if(this.s.currentBatch.size+1>=this.s.maxWriteBatchSize||this.s.currentBatch.size>0&&this.s.currentBatch.sizeBytes+J+X>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==Z)this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new q4.Batch(Z,this.s.currentIndex);if(Array.isArray(Y))throw new hP.MongoInvalidArgumentError("Operation passed in cannot be an Array");if(this.s.currentBatch.operations.push(Y),this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentIndex=this.s.currentIndex+1,Z===q4.BatchType.INSERT)this.s.currentInsertBatch=this.s.currentBatch,this.s.bulkResult.insertedIds.push({index:this.s.bulkResult.insertedIds.length,_id:Y._id});else if(Z===q4.BatchType.UPDATE)this.s.currentUpdateBatch=this.s.currentBatch;else if(Z===q4.BatchType.DELETE)this.s.currentRemoveBatch=this.s.currentBatch;return this.s.currentBatch.size+=1,this.s.currentBatch.sizeBytes+=J+X,this}}uP.UnorderedBulkOperation=mP});var DW=w((lP)=>{Object.defineProperty(lP,"__esModule",{value:!0});lP.AggregateOperation=lP.DB_AGGREGATE_COLLECTION=void 0;var cP=r(),D81=$1(),P81=d8(),T81=A0(),IJ=v1();lP.DB_AGGREGATE_COLLECTION=1;var I81=8;class _F extends T81.CommandOperation{constructor(Z,Y,X){super(void 0,{...X,dbName:Z.db});if(this.options={...X},this.target=Z.collection||lP.DB_AGGREGATE_COLLECTION,this.pipeline=Y,this.hasWriteStage=!1,typeof X?.out==="string")this.pipeline=this.pipeline.concat({$out:X.out}),this.hasWriteStage=!0;else if(Y.length>0){const J=Y[Y.length-1];if(J.$out||J.$merge)this.hasWriteStage=!0}if(this.hasWriteStage)this.trySecondaryWrite=!0;else delete this.options.writeConcern;if(this.explain&&this.writeConcern)throw new cP.MongoInvalidArgumentError('Option "explain" cannot be used on an aggregate call with writeConcern');if(X?.cursor!=null&&typeof X.cursor!=="object")throw new cP.MongoInvalidArgumentError("Cursor options must be an object")}get canRetryRead(){return!this.hasWriteStage}addToPipeline(Z){this.pipeline.push(Z)}async execute(Z,Y){const X=this.options,J=(0,D81.maxWireVersion)(Z),$={aggregate:this.target,pipeline:this.pipeline};if(this.hasWriteStage&&J<I81)this.readConcern=void 0;if(this.hasWriteStage&&this.writeConcern)P81.WriteConcern.apply($,this.writeConcern);if(X.bypassDocumentValidation===!0)$.bypassDocumentValidation=X.bypassDocumentValidation;if(typeof X.allowDiskUse==="boolean")$.allowDiskUse=X.allowDiskUse;if(X.hint)$.hint=X.hint;if(X.let)$.let=X.let;if(X.comment!==void 0)$.comment=X.comment;if($.cursor=X.cursor||{},X.batchSize&&!this.hasWriteStage)$.cursor.batchSize=X.batchSize;return super.executeCommand(Z,Y,$)}}lP.AggregateOperation=_F;(0,IJ.defineAspects)(_F,[IJ.Aspect.READ_OPERATION,IJ.Aspect.RETRYABLE,IJ.Aspect.EXPLAINABLE,IJ.Aspect.CURSOR_CREATING])});var U6=w((aP)=>{Object.defineProperty(aP,"__esModule",{value:!0});aP.CancellationToken=aP.TypedEventEmitter=void 0;var j81=import.meta.require("events");class xF extends j81.EventEmitter{emitAndLog(Z,...Y){if(this.emit(Z,...Y),this.component)this.mongoLogger?.debug(this.component,Y[0])}}aP.TypedEventEmitter=xF;class nP extends xF{}aP.CancellationToken=nP});var gF=w((rP)=>{Object.defineProperty(rP,"__esModule",{value:!0});rP.GetMoreOperation=void 0;var fF=r(),C81=$1(),PW=v1();class yF extends PW.AbstractOperation{constructor(Z,Y,X,J){super(J);this.options=J,this.ns=Z,this.cursorId=Y,this.server=X}async execute(Z,Y){if(Z!==this.server)throw new fF.MongoRuntimeError("Getmore must run on the same server operation began on");if(this.cursorId==null||this.cursorId.isZero())throw new fF.MongoRuntimeError("Unable to iterate cursor with no id");const X=this.ns.collection;if(X==null)throw new fF.MongoRuntimeError("A collection name must be determined before getMore");const J={getMore:this.cursorId,collection:X};if(typeof this.options.batchSize==="number")J.batchSize=Math.abs(this.options.batchSize);if(typeof this.options.maxAwaitTimeMS==="number")J.maxTimeMS=this.options.maxAwaitTimeMS;if(this.options.comment!==void 0&&(0,C81.maxWireVersion)(Z)>=9)J.comment=this.options.comment;const $={returnFieldSelector:null,documentsReturnedIn:"nextBatch",...this.options};return Z.commandAsync(this.ns,J,$)}}rP.GetMoreOperation=yF;(0,PW.defineAspects)(yF,[PW.Aspect.READ_OPERATION,PW.Aspect.MUST_SELECT_SAME_SERVER])});var YT=w((eP)=>{Object.defineProperty(eP,"__esModule",{value:!0});eP.KillCursorsOperation=void 0;var oP=r(),bF=v1();class vF extends bF.AbstractOperation{constructor(Z,Y,X,J){super(J);this.ns=Y,this.cursorId=Z,this.server=X}async execute(Z,Y){if(Z!==this.server)throw new oP.MongoRuntimeError("Killcursor must run on the same server operation began on");const X=this.ns.collection;if(X==null)throw new oP.MongoRuntimeError("A collection name must be determined before killCursors");const J={killCursors:X,cursors:[this.cursorId]};try{await Z.commandAsync(this.ns,J,{session:Y})}catch{}}}eP.KillCursorsOperation=vF;(0,bF.defineAspects)(vF,[bF.Aspect.MUST_SELECT_SAME_SERVER])});var hF=w((XT)=>{Object.defineProperty(XT,"__esModule",{value:!0});XT.ConnectionPoolMetrics=void 0;class L4{constructor(){this.txnConnections=0,this.cursorConnections=0,this.otherConnections=0}markPinned(Z){if(Z===L4.TXN)this.txnConnections+=1;else if(Z===L4.CURSOR)this.cursorConnections+=1;else this.otherConnections+=1}markUnpinned(Z){if(Z===L4.TXN)this.txnConnections-=1;else if(Z===L4.CURSOR)this.cursorConnections-=1;else this.otherConnections-=1}info(Z){return"Timed out while checking out a connection from connection pool: "+`maxPoolSize: ${Z}, `+`connections in use by cursors: ${this.cursorConnections}, `+`connections in use by transactions: ${this.txnConnections}, `+`connections in use by other operations: ${this.otherConnections}`}reset(){this.txnConnections=0,this.cursorConnections=0,this.otherConnections=0}}L4.TXN="txn";L4.CURSOR="cursor";L4.OTHER="other";XT.ConnectionPoolMetrics=L4});var jJ=w((KT)=>{var WT=function(Z,Y){if(Y?.loadBalanced)return E0.ServerType.LoadBalancer;if(!Z||!Z.ok)return E0.ServerType.Unknown;if(Z.isreplicaset)return E0.ServerType.RSGhost;if(Z.msg&&Z.msg==="isdbgrid")return E0.ServerType.Mongos;if(Z.setName)if(Z.hidden)return E0.ServerType.RSOther;else if(Z.isWritablePrimary)return E0.ServerType.RSPrimary;else if(Z.secondary)return E0.ServerType.RSSecondary;else if(Z.arbiterOnly)return E0.ServerType.RSArbiter;else return E0.ServerType.RSOther;return E0.ServerType.Standalone},_81=function(Z,Y){const X=Object.keys(Z),J=Object.keys(Y);return X.length===J.length&&X.every(($)=>Y[$]===Z[$])},GT=function(Z,Y){if(Z==null||Y==null)return-1;if(!Z.processId.equals(Y.processId))return-1;const X=TW.Long.isLong(Z.counter)?Z.counter:TW.Long.fromNumber(Z.counter),J=TW.Long.isLong(Y.counter)?Y.counter:TW.Long.fromNumber(Y.counter);return X.compare(J)};Object.defineProperty(KT,"__esModule",{value:!0});KT.compareTopologyVersion=KT.parseServerType=KT.ServerDescription=void 0;var TW=Z0(),O81=r(),rZ=$1(),E0=k6(),S81=new Set([E0.ServerType.RSPrimary,E0.ServerType.Standalone,E0.ServerType.Mongos,E0.ServerType.LoadBalancer]),k81=new Set([E0.ServerType.RSPrimary,E0.ServerType.RSSecondary,E0.ServerType.Mongos,E0.ServerType.Standalone,E0.ServerType.LoadBalancer]);class $T{constructor(Z,Y,X={}){if(Z==null||Z==="")throw new O81.MongoRuntimeError("ServerDescription must be provided with a non-empty address");this.address=typeof Z==="string"?rZ.HostAddress.fromString(Z).toString():Z.toString(),this.type=WT(Y,X),this.hosts=Y?.hosts?.map((J)=>J.toLowerCase())??[],this.passives=Y?.passives?.map((J)=>J.toLowerCase())??[],this.arbiters=Y?.arbiters?.map((J)=>J.toLowerCase())??[],this.tags=Y?.tags??{},this.minWireVersion=Y?.minWireVersion??0,this.maxWireVersion=Y?.maxWireVersion??0,this.roundTripTime=X?.roundTripTime??-1,this.lastUpdateTime=(0,rZ.now)(),this.lastWriteDate=Y?.lastWrite?.lastWriteDate??0,this.error=X.error??null,this.topologyVersion=this.error?.topologyVersion??Y?.topologyVersion??null,this.setName=Y?.setName??null,this.setVersion=Y?.setVersion??null,this.electionId=Y?.electionId??null,this.logicalSessionTimeoutMinutes=Y?.logicalSessionTimeoutMinutes??null,this.primary=Y?.primary??null,this.me=Y?.me?.toLowerCase()??null,this.$clusterTime=Y?.$clusterTime??null}get hostAddress(){return rZ.HostAddress.fromString(this.address)}get allHosts(){return this.hosts.concat(this.arbiters).concat(this.passives)}get isReadable(){return this.type===E0.ServerType.RSSecondary||this.isWritable}get isDataBearing(){return k81.has(this.type)}get isWritable(){return S81.has(this.type)}get host(){const Z=`:${this.port}`.length;return this.address.slice(0,-Z)}get port(){const Z=this.address.split(":").pop();return Z?Number.parseInt(Z,10):27017}equals(Z){const Y=this.topologyVersion===Z?.topologyVersion||GT(this.topologyVersion,Z?.topologyVersion)===0,X=this.electionId!=null&&Z?.electionId!=null?(0,rZ.compareObjectId)(this.electionId,Z.electionId)===0:this.electionId===Z?.electionId;return Z!=null&&(0,rZ.errorStrictEqual)(this.error,Z.error)&&this.type===Z.type&&this.minWireVersion===Z.minWireVersion&&(0,rZ.arrayStrictEqual)(this.hosts,Z.hosts)&&_81(this.tags,Z.tags)&&this.setName===Z.setName&&this.setVersion===Z.setVersion&&X&&this.primary===Z.primary&&this.logicalSessionTimeoutMinutes===Z.logicalSessionTimeoutMinutes&&Y}}KT.ServerDescription=$T;KT.parseServerType=WT;KT.compareTopologyVersion=GT});var uF=w((qT)=>{var h81=function(Z){switch(Z){case D1.ServerType.Standalone:return D1.TopologyType.Single;case D1.ServerType.Mongos:return D1.TopologyType.Sharded;case D1.ServerType.RSPrimary:return D1.TopologyType.ReplicaSetWithPrimary;case D1.ServerType.RSOther:case D1.ServerType.RSSecondary:return D1.TopologyType.ReplicaSetNoPrimary;default:return D1.TopologyType.Unknown}},VT=function(Z,Y,X=null,J=null,$=null){if(X=X||Y.setName,X!==Y.setName)return Z.delete(Y.address),[F9(Z),X,J,$];if(Y.maxWireVersion>=17){const K=(0,mF.compareObjectId)($,Y.electionId),Q=K===0,z=K===-1,H=(J??-1)<=(Y.setVersion??-1);if(z||Q&&H)$=Y.electionId,J=Y.setVersion;else return Z.set(Y.address,new X5.ServerDescription(Y.address)),[F9(Z),X,J,$]}else{const K=Y.electionId?Y.electionId:null;if(Y.setVersion&&K){if(J&&$){if(J>Y.setVersion||(0,mF.compareObjectId)($,K)>0)return Z.set(Y.address,new X5.ServerDescription(Y.address)),[F9(Z),X,J,$]}$=Y.electionId}if(Y.setVersion!=null&&(J==null||Y.setVersion>J))J=Y.setVersion}for(let[K,Q]of Z)if(Q.type===D1.ServerType.RSPrimary&&Q.address!==Y.address){Z.set(K,new X5.ServerDescription(Q.address));break}Y.allHosts.forEach((K)=>{if(!Z.has(K))Z.set(K,new X5.ServerDescription(K))});const W=Array.from(Z.keys()),G=Y.allHosts;return W.filter((K)=>G.indexOf(K)===-1).forEach((K)=>{Z.delete(K)}),[F9(Z),X,J,$]},m81=function(Z,Y,X=null){if(X==null)throw new y81.MongoRuntimeError('Argument "setName" is required if connected to a replica set');if(X!==Y.setName||Y.me&&Y.address!==Y.me)Z.delete(Y.address);return F9(Z)},u81=function(Z,Y,X=null){const J=D1.TopologyType.ReplicaSetNoPrimary;if(X=X??Y.setName,X!==Y.setName)return Z.delete(Y.address),[J,X];if(Y.allHosts.forEach(($)=>{if(!Z.has($))Z.set($,new X5.ServerDescription($))}),Y.me&&Y.address!==Y.me)Z.delete(Y.address);return[J,X]},F9=function(Z){for(let Y of Z.values())if(Y.type===D1.ServerType.RSPrimary)return D1.TopologyType.ReplicaSetWithPrimary;return D1.TopologyType.ReplicaSetNoPrimary};Object.defineProperty(qT,"__esModule",{value:!0});qT.TopologyDescription=void 0;var IW=z9(),y81=r(),mF=$1(),D1=k6(),X5=jJ(),g81=IW.MIN_SUPPORTED_SERVER_VERSION,b81=IW.MAX_SUPPORTED_SERVER_VERSION,zT=IW.MIN_SUPPORTED_WIRE_VERSION,HT=IW.MAX_SUPPORTED_WIRE_VERSION,v81=new Set([D1.ServerType.Mongos,D1.ServerType.Unknown]),FT=new Set([D1.ServerType.Mongos,D1.ServerType.Standalone]),UT=new Set([D1.ServerType.RSSecondary,D1.ServerType.RSArbiter,D1.ServerType.RSOther]);class EJ{constructor(Z,Y=null,X=null,J=null,$=null,W=null,G=null){G=G??{},this.type=Z??D1.TopologyType.Unknown,this.servers=Y??new Map,this.stale=!1,this.compatible=!0,this.heartbeatFrequencyMS=G.heartbeatFrequencyMS??0,this.localThresholdMS=G.localThresholdMS??15,this.setName=X??null,this.maxElectionId=$??null,this.maxSetVersion=J??null,this.commonWireVersion=W??0;for(let K of this.servers.values()){if(K.type===D1.ServerType.Unknown||K.type===D1.ServerType.LoadBalancer)continue;if(K.minWireVersion>HT)this.compatible=!1,this.compatibilityError=`Server at ${K.address} requires wire version ${K.minWireVersion}, but this version of the driver only supports up to ${HT} (MongoDB ${b81})`;if(K.maxWireVersion<zT){this.compatible=!1,this.compatibilityError=`Server at ${K.address} reports wire version ${K.maxWireVersion}, but this version of the driver requires at least ${zT} (MongoDB ${g81}).`;break}}this.logicalSessionTimeoutMinutes=null;for(let[,K]of this.servers)if(K.isReadable){if(K.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=null;break}if(this.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=K.logicalSessionTimeoutMinutes;continue}this.logicalSessionTimeoutMinutes=Math.min(this.logicalSessionTimeoutMinutes,K.logicalSessionTimeoutMinutes)}}updateFromSrvPollingEvent(Z,Y=0){const X=Z.hostnames(),J=new Set(this.servers.keys()),$=new Set(X),W=new Set;for(let K of J)if($.delete(K),!X.has(K))W.add(K);if($.size===0&&W.size===0)return this;const G=new Map(this.servers);for(let K of W)G.delete(K);if($.size>0){if(Y===0)for(let K of $)G.set(K,new X5.ServerDescription(K));else if(G.size<Y){const K=(0,mF.shuffle)($,Y-G.size);for(let Q of K)G.set(Q,new X5.ServerDescription(Q))}}return new EJ(this.type,G,this.setName,this.maxSetVersion,this.maxElectionId,this.commonWireVersion,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS})}update(Z){const Y=Z.address;let{type:X,setName:J,maxSetVersion:$,maxElectionId:W,commonWireVersion:G}=this;const K=Z.type,Q=new Map(this.servers);if(Z.maxWireVersion!==0)if(G==null)G=Z.maxWireVersion;else G=Math.min(G,Z.maxWireVersion);if(typeof Z.setName==="string"&&typeof J==="string"&&Z.setName!==J)if(X===D1.TopologyType.Single)Z=new X5.ServerDescription(Y);else Q.delete(Y);if(Q.set(Y,Z),X===D1.TopologyType.Single)return new EJ(D1.TopologyType.Single,Q,J,$,W,G,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS});if(X===D1.TopologyType.Unknown)if(K===D1.ServerType.Standalone&&this.servers.size!==1)Q.delete(Y);else X=h81(K);if(X===D1.TopologyType.Sharded){if(!v81.has(K))Q.delete(Y)}if(X===D1.TopologyType.ReplicaSetNoPrimary){if(FT.has(K))Q.delete(Y);if(K===D1.ServerType.RSPrimary){const z=VT(Q,Z,J,$,W);X=z[0],J=z[1],$=z[2],W=z[3]}else if(UT.has(K)){const z=u81(Q,Z,J);X=z[0],J=z[1]}}if(X===D1.TopologyType.ReplicaSetWithPrimary)if(FT.has(K))Q.delete(Y),X=F9(Q);else if(K===D1.ServerType.RSPrimary){const z=VT(Q,Z,J,$,W);X=z[0],J=z[1],$=z[2],W=z[3]}else if(UT.has(K))X=m81(Q,Z,J);else X=F9(Q);return new EJ(X,Q,J,$,W,G,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS})}get error(){const Z=Array.from(this.servers.values()).filter((Y)=>Y.error);if(Z.length>0)return Z[0].error;return null}get hasKnownServers(){return Array.from(this.servers.values()).some((Z)=>Z.type!==D1.ServerType.Unknown)}get hasDataBearingServers(){return Array.from(this.servers.values()).some((Z)=>Z.isDataBearing)}hasServer(Z){return this.servers.has(Z)}}qT.TopologyDescription=EJ});var cF=w((RT)=>{var l81=function(Z){let Y=Z?.readPreference??dF.ReadPreference.primary;if(Z?.readPreference)Y=Z.readPreference;if(typeof Y==="string")Y=dF.ReadPreference.fromString(Y);if(!(Y instanceof dF.ReadPreference))throw new d81.MongoInvalidArgumentError('Option "readPreference" must be a ReadPreference instance');return Y},p81=function(Z){if(Z==null)return!1;if(Z.description&&Z.description.type===wT.ServerType.Mongos)return!0;if(Z.description&&Z.description instanceof c81.TopologyDescription)return Array.from(Z.description.servers.values()).some((X)=>X.type===wT.ServerType.Mongos);return!1};Object.defineProperty(RT,"__esModule",{value:!0});RT.isSharded=RT.getReadPreference=void 0;var d81=r(),dF=x0(),wT=k6(),c81=uF();RT.getReadPreference=l81;RT.isSharded=p81});var lF=w((AT)=>{var e81=function(Z){return!!(Z.commitTransaction||Z.abortTransaction)};Object.defineProperty(AT,"__esModule",{value:!0});AT.isTransactionCommand=AT.Transaction=AT.TxnState=void 0;var BT=r(),n81=_6(),a81=x0(),s81=d8();AT.TxnState=Object.freeze({NO_TRANSACTION:"NO_TRANSACTION",STARTING_TRANSACTION:"STARTING_TRANSACTION",TRANSACTION_IN_PROGRESS:"TRANSACTION_IN_PROGRESS",TRANSACTION_COMMITTED:"TRANSACTION_COMMITTED",TRANSACTION_COMMITTED_EMPTY:"TRANSACTION_COMMITTED_EMPTY",TRANSACTION_ABORTED:"TRANSACTION_ABORTED"});var r81={[AT.TxnState.NO_TRANSACTION]:[AT.TxnState.NO_TRANSACTION,AT.TxnState.STARTING_TRANSACTION],[AT.TxnState.STARTING_TRANSACTION]:[AT.TxnState.TRANSACTION_IN_PROGRESS,AT.TxnState.TRANSACTION_COMMITTED,AT.TxnState.TRANSACTION_COMMITTED_EMPTY,AT.TxnState.TRANSACTION_ABORTED],[AT.TxnState.TRANSACTION_IN_PROGRESS]:[AT.TxnState.TRANSACTION_IN_PROGRESS,AT.TxnState.TRANSACTION_COMMITTED,AT.TxnState.TRANSACTION_ABORTED],[AT.TxnState.TRANSACTION_COMMITTED]:[AT.TxnState.TRANSACTION_COMMITTED,AT.TxnState.TRANSACTION_COMMITTED_EMPTY,AT.TxnState.STARTING_TRANSACTION,AT.TxnState.NO_TRANSACTION],[AT.TxnState.TRANSACTION_ABORTED]:[AT.TxnState.STARTING_TRANSACTION,AT.TxnState.NO_TRANSACTION],[AT.TxnState.TRANSACTION_COMMITTED_EMPTY]:[AT.TxnState.TRANSACTION_COMMITTED_EMPTY,AT.TxnState.NO_TRANSACTION]},t81=new Set([AT.TxnState.STARTING_TRANSACTION,AT.TxnState.TRANSACTION_IN_PROGRESS]),o81=new Set([AT.TxnState.TRANSACTION_COMMITTED,AT.TxnState.TRANSACTION_COMMITTED_EMPTY,AT.TxnState.TRANSACTION_ABORTED]);class NT{constructor(Z){Z=Z??{},this.state=AT.TxnState.NO_TRANSACTION,this.options={};const Y=s81.WriteConcern.fromOptions(Z);if(Y){if(Y.w===0)throw new BT.MongoTransactionError("Transactions do not support unacknowledged write concern");this.options.writeConcern=Y}if(Z.readConcern)this.options.readConcern=n81.ReadConcern.fromOptions(Z);if(Z.readPreference)this.options.readPreference=a81.ReadPreference.fromOptions(Z);if(Z.maxCommitTimeMS)this.options.maxTimeMS=Z.maxCommitTimeMS;this._pinnedServer=void 0,this._recoveryToken=void 0}get server(){return this._pinnedServer}get recoveryToken(){return this._recoveryToken}get isPinned(){return!!this.server}get isStarting(){return this.state===AT.TxnState.STARTING_TRANSACTION}get isActive(){return t81.has(this.state)}get isCommitted(){return o81.has(this.state)}transition(Z){const Y=r81[this.state];if(Y&&Y.includes(Z)){if(this.state=Z,this.state===AT.TxnState.NO_TRANSACTION||this.state===AT.TxnState.STARTING_TRANSACTION||this.state===AT.TxnState.TRANSACTION_ABORTED)this.unpinServer();return}throw new BT.MongoRuntimeError(`Attempted illegal state transition from [${this.state}] to [${Z}]`)}pinServer(Z){if(this.isActive)this._pinnedServer=Z}unpinServer(){this._pinnedServer=void 0}}AT.Transaction=NT;AT.isTransactionCommand=e81});var OJ=w((_T)=>{var ST=function(Z,Y){return(0,Q7.calculateDurationInMs)(Z)<Y},Q61=function(Z){const Y=Z instanceof V1.MongoServerError&&Z.codeName&&K61.has(Z.codeName);return kW(Z)||!Y&&Z.code!==V1.MONGODB_ERROR_CODES.UnsatisfiableWriteConcern&&Z.code!==V1.MONGODB_ERROR_CODES.UnknownReplWriteConcern},SW=function(Z,Y){const X=Z[oZ],J=Y?.error;if(Z.inTransaction()&&J&&J instanceof V1.MongoError&&J.hasErrorLabel(V1.MongoErrorLabel.TransientTransactionError))return;const $=Z.client.topology;if(X&&$!=null){const G=Array.from($.s.servers.values())[0];if(Y?.error==null||Y?.force){if(G.pool.checkIn(X),X.emit(CT.UNPINNED,Z.transaction.state!==G0.TxnState.NO_TRANSACTION?EW.ConnectionPoolMetrics.TXN:EW.ConnectionPoolMetrics.CURSOR),Y?.forceClear)G.pool.clear({serviceId:X.serviceId})}Z[oZ]=void 0}},kW=function(Z){if(Z==null||!(Z instanceof V1.MongoServerError))return!1;return Z.code===V1.MONGODB_ERROR_CODES.MaxTimeMSExpired||Z.writeConcernError&&Z.writeConcernError.code===V1.MONGODB_ERROR_CODES.MaxTimeMSExpired},kT=function(Z,Y,X,J,$){return Z.commitTransaction().then(()=>J,(W)=>{if(W instanceof V1.MongoError&&ST(Y,OT)&&!kW(W)){if(W.hasErrorLabel(V1.MongoErrorLabel.UnknownTransactionCommitResult))return kT(Z,Y,X,J,$);if(W.hasErrorLabel(V1.MongoErrorLabel.TransientTransactionError))return nF(Z,Y,X,$)}throw W})},H61=function(Z){return z61.has(Z.transaction.state)},nF=function(Z,Y,X,J={}){Z.startTransaction(J);let $;try{$=X(Z)}catch(W){$=Promise.reject(W)}if(!(0,Q7.isPromiseLike)($))return Z.abortTransaction().catch(()=>null),Promise.reject(new V1.MongoInvalidArgumentError("Function provided to `withTransaction` must return a Promise"));return $.then((W)=>{if(H61(Z))return W;return kT(Z,Y,X,W,J)},(W)=>{function G(K){if(K instanceof V1.MongoError&&K.hasErrorLabel(V1.MongoErrorLabel.TransientTransactionError)&&ST(Y,OT))return nF(Z,Y,X,J);if(kW(K))K.addErrorLabel(V1.MongoErrorLabel.UnknownTransactionCommitResult);throw K}if(Z.inTransaction())return Z.abortTransaction().then(()=>G(W));return G(W)})},F61=function(Z,Y,X){const J=Z.transaction.state;if(J===G0.TxnState.NO_TRANSACTION){X(new V1.MongoTransactionError("No transaction started"));return}if(Y==="commitTransaction"){if(J===G0.TxnState.STARTING_TRANSACTION||J===G0.TxnState.TRANSACTION_COMMITTED_EMPTY){Z.transaction.transition(G0.TxnState.TRANSACTION_COMMITTED_EMPTY),X();return}if(J===G0.TxnState.TRANSACTION_ABORTED){X(new V1.MongoTransactionError("Cannot call commitTransaction after calling abortTransaction"));return}}else{if(J===G0.TxnState.STARTING_TRANSACTION){Z.transaction.transition(G0.TxnState.TRANSACTION_ABORTED),X();return}if(J===G0.TxnState.TRANSACTION_ABORTED){X(new V1.MongoTransactionError("Cannot call abortTransaction twice"));return}if(J===G0.TxnState.TRANSACTION_COMMITTED||J===G0.TxnState.TRANSACTION_COMMITTED_EMPTY){X(new V1.MongoTransactionError("Cannot call abortTransaction after calling commitTransaction"));return}}const $={[Y]:1};let W;if(Z.transaction.options.writeConcern)W=Object.assign({},Z.transaction.options.writeConcern);else if(Z.clientOptions&&Z.clientOptions.writeConcern)W={w:Z.clientOptions.writeConcern.w};if(J===G0.TxnState.TRANSACTION_COMMITTED)W=Object.assign({wtimeoutMS:1e4},W,{w:"majority"});if(W)W61.WriteConcern.apply($,W);if(Y==="commitTransaction"&&Z.transaction.options.maxTimeMS)Object.assign($,{maxTimeMS:Z.transaction.options.maxTimeMS});function G(K){if(Y!=="commitTransaction"){if(Z.transaction.transition(G0.TxnState.TRANSACTION_ABORTED),Z.loadBalanced)SW(Z,{force:!1});return X()}if(Z.transaction.transition(G0.TxnState.TRANSACTION_COMMITTED),K instanceof V1.MongoError){if(K.hasErrorLabel(V1.MongoErrorLabel.RetryableWriteError)||K instanceof V1.MongoWriteConcernError||kW(K)){if(Q61(K))K.addErrorLabel(V1.MongoErrorLabel.UnknownTransactionCommitResult),Z.unpin({error:K})}else if(K.hasErrorLabel(V1.MongoErrorLabel.TransientTransactionError))Z.unpin({error:K})}X(K)}if(Z.transaction.recoveryToken)$.recoveryToken=Z.transaction.recoveryToken;(0,PT.executeOperation)(Z.client,new TT.RunAdminCommandOperation($,{session:Z,readPreference:IT.ReadPreference.primary,bypassPinningCheck:!0}),(K)=>{if($.abortTransaction)Z.unpin();if(K instanceof V1.MongoError&&K.hasErrorLabel(V1.MongoErrorLabel.RetryableWriteError)){if($.commitTransaction)Z.unpin({force:!0}),$.writeConcern=Object.assign({wtimeout:1e4},$.writeConcern,{w:"majority"});return(0,PT.executeOperation)(Z.client,new TT.RunAdminCommandOperation($,{session:Z,readPreference:IT.ReadPreference.primary,bypassPinningCheck:!0}),G)}G(K)})},U61=function(Z,Y,X){if(Z.hasEnded)return new V1.MongoExpiredSessionError;const J=Z.serverSession;if(J==null)return new V1.MongoRuntimeError("Unable to acquire server session");if(X.writeConcern?.w===0){if(Z&&Z.explicit)return new V1.MongoAPIError("Cannot have explicit session with unacknowledged writes");return}J.lastUse=(0,Q7.now)(),Y.lsid=J.id;const $=Z.inTransaction()||(0,G0.isTransactionCommand)(Y);if(!!X.willRetryWrite||$)J.txnNumber+=Z[OW],Z[OW]=0,Y.txnNumber=jW.Long.fromNumber(J.txnNumber);if(!$){if(Z.transaction.state!==G0.TxnState.NO_TRANSACTION)Z.transaction.transition(G0.TxnState.NO_TRANSACTION);if(Z.supports.causalConsistency&&Z.operationTime&&(0,Q7.commandSupportsReadConcern)(Y))Y.readConcern=Y.readConcern||{},Object.assign(Y.readConcern,{afterClusterTime:Z.operationTime});else if(Z[eZ]){if(Y.readConcern=Y.readConcern||{level:$61.ReadConcernLevel.snapshot},Z[CW]!=null)Object.assign(Y.readConcern,{atClusterTime:Z[CW]})}return}if(Y.autocommit=!1,Z.transaction.state===G0.TxnState.STARTING_TRANSACTION){Z.transaction.transition(G0.TxnState.TRANSACTION_IN_PROGRESS),Y.startTransaction=!0;const G=Z.transaction.options.readConcern||Z?.clientOptions?.readConcern;if(G)Y.readConcern=G;if(Z.supports.causalConsistency&&Z.operationTime)Y.readConcern=Y.readConcern||{},Object.assign(Y.readConcern,{afterClusterTime:Z.operationTime})}return},V61=function(Z,Y){if(Y.$clusterTime)(0,pF._advanceClusterTime)(Z,Y.$clusterTime);if(Y.operationTime&&Z&&Z.supports.causalConsistency)Z.advanceOperationTime(Y.operationTime);if(Y.recoveryToken&&Z&&Z.inTransaction())Z.transaction._recoveryToken=Y.recoveryToken;if(Z?.[eZ]&&Z[CW]==null){const X=Y.cursor?.atClusterTime||Y.atClusterTime;if(X)Z[CW]=X}},ET;Object.defineProperty(_T,"__esModule",{value:!0});_T.updateSessionFromResponse=_T.applySession=_T.ServerSessionPool=_T.ServerSession=_T.maybeClearPinnedConnection=_T.ClientSession=void 0;var Y61=import.meta.require("util"),jW=Z0(),EW=hF(),X61=cF(),CT=c0(),V1=r(),J61=U6(),PT=c8(),TT=nZ(),$61=_6(),IT=x0(),pF=k6(),G0=lF(),Q7=$1(),W61=d8(),G61=8,tZ=Symbol("serverSession"),CW=Symbol("snapshotTime"),eZ=Symbol("snapshotEnabled"),oZ=Symbol("pinnedConnection"),OW=Symbol("txnNumberIncrement");class iF extends J61.TypedEventEmitter{constructor(Z,Y,X,J){super();if(this[ET]=!1,Z==null)throw new V1.MongoRuntimeError("ClientSession requires a MongoClient");if(Y==null||!(Y instanceof aF))throw new V1.MongoRuntimeError("ClientSession requires a ServerSessionPool");if(X=X??{},X.snapshot===!0){if(this[eZ]=!0,X.causalConsistency===!0)throw new V1.MongoInvalidArgumentError('Properties "causalConsistency" and "snapshot" are mutually exclusive')}this.client=Z,this.sessionPool=Y,this.hasEnded=!1,this.clientOptions=J,this.explicit=!!X.explicit,this[tZ]=this.explicit?this.sessionPool.acquire():null,this[OW]=0;const $=this.explicit&&X.snapshot!==!0;this.supports={causalConsistency:X.causalConsistency??$},this.clusterTime=X.initialClusterTime,this.operationTime=void 0,this.owner=X.owner,this.defaultTransactionOptions=Object.assign({},X.defaultTransactionOptions),this.transaction=new G0.Transaction}get id(){return this[tZ]?.id}get serverSession(){let Z=this[tZ];if(Z==null){if(this.explicit)throw new V1.MongoRuntimeError("Unexpected null serverSession for an explicit session");if(this.hasEnded)throw new V1.MongoRuntimeError("Unexpected null serverSession for an ended implicit session");Z=this.sessionPool.acquire(),this[tZ]=Z}return Z}get snapshotEnabled(){return this[eZ]}get loadBalanced(){return this.client.topology?.description.type===pF.TopologyType.LoadBalanced}get pinnedConnection(){return this[oZ]}pin(Z){if(this[oZ])throw TypeError("Cannot pin multiple connections to the same session");this[oZ]=Z,Z.emit(CT.PINNED,this.inTransaction()?EW.ConnectionPoolMetrics.TXN:EW.ConnectionPoolMetrics.CURSOR)}unpin(Z){if(this.loadBalanced)return SW(this,Z);this.transaction.unpinServer()}get isPinned(){return this.loadBalanced?!!this[oZ]:this.transaction.isPinned}async endSession(Z){try{if(this.inTransaction())await this.abortTransaction();if(!this.hasEnded){const Y=this[tZ];if(Y!=null)this.sessionPool.release(Y),Object.defineProperty(this,tZ,{value:CJ.clone(Y),writable:!1});this.hasEnded=!0,this.emit("ended",this)}}catch{}finally{SW(this,{force:!0,...Z})}}advanceOperationTime(Z){if(this.operationTime==null){this.operationTime=Z;return}if(Z.greaterThan(this.operationTime))this.operationTime=Z}advanceClusterTime(Z){if(!Z||typeof Z!=="object")throw new V1.MongoInvalidArgumentError("input cluster time must be an object");if(!Z.clusterTime||Z.clusterTime._bsontype!=="Timestamp")throw new V1.MongoInvalidArgumentError('input cluster time "clusterTime" property must be a valid BSON Timestamp');if(!Z.signature||Z.signature.hash?._bsontype!=="Binary"||typeof Z.signature.keyId!=="bigint"&&typeof Z.signature.keyId!=="number"&&Z.signature.keyId?._bsontype!=="Long")throw new V1.MongoInvalidArgumentError('input cluster time must have a valid "signature" property with BSON Binary hash and BSON Long keyId');(0,pF._advanceClusterTime)(this,Z)}equals(Z){if(!(Z instanceof iF))return!1;if(this.id==null||Z.id==null)return!1;return Q7.ByteUtils.equals(this.id.id.buffer,Z.id.id.buffer)}incrementTransactionNumber(){this[OW]+=1}inTransaction(){return this.transaction.isActive}startTransaction(Z){if(this[eZ])throw new V1.MongoCompatibilityError("Transactions are not supported in snapshot sessions");if(this.inTransaction())throw new V1.MongoTransactionError("Transaction already in progress");if(this.isPinned&&this.transaction.isCommitted)this.unpin();const Y=(0,Q7.maxWireVersion)(this.client.topology);if((0,X61.isSharded)(this.client.topology)&&Y!=null&&Y<G61)throw new V1.MongoCompatibilityError("Transactions are not supported on sharded clusters in MongoDB < 4.2.");this.incrementTransactionNumber(),this.transaction=new G0.Transaction({readConcern:Z?.readConcern??this.defaultTransactionOptions.readConcern??this.clientOptions?.readConcern,writeConcern:Z?.writeConcern??this.defaultTransactionOptions.writeConcern??this.clientOptions?.writeConcern,readPreference:Z?.readPreference??this.defaultTransactionOptions.readPreference??this.clientOptions?.readPreference,maxCommitTimeMS:Z?.maxCommitTimeMS??this.defaultTransactionOptions.maxCommitTimeMS}),this.transaction.transition(G0.TxnState.STARTING_TRANSACTION)}async commitTransaction(){return jT(this,"commitTransaction")}async abortTransaction(){return jT(this,"abortTransaction")}toBSON(){throw new V1.MongoRuntimeError("ClientSession cannot be serialized to BSON.")}async withTransaction(Z,Y){const X=(0,Q7.now)();return nF(this,X,Z,Y)}}_T.ClientSession=iF;ET=eZ;var OT=120000,K61=new Set(["CannotSatisfyWriteConcern","UnknownReplWriteConcern","UnsatisfiableWriteConcern"]);_T.maybeClearPinnedConnection=SW;var z61=new Set([G0.TxnState.NO_TRANSACTION,G0.TxnState.TRANSACTION_COMMITTED,G0.TxnState.TRANSACTION_ABORTED]),jT=(0,Y61.promisify)(F61);class CJ{constructor(){this.id={id:new jW.Binary((0,Q7.uuidV4)(),jW.Binary.SUBTYPE_UUID)},this.lastUse=(0,Q7.now)(),this.txnNumber=0,this.isDirty=!1}hasTimedOut(Z){return Math.round((0,Q7.calculateDurationInMs)(this.lastUse)%86400000%3600000/60000)>Z-1}static clone(Z){const Y=new ArrayBuffer(16),X=Buffer.from(Y);X.set(Z.id.id.buffer);const J=new jW.Binary(X,Z.id.id.sub_type);return Object.setPrototypeOf({id:{id:J},lastUse:Z.lastUse,txnNumber:Z.txnNumber,isDirty:Z.isDirty},CJ.prototype)}}_T.ServerSession=CJ;class aF{constructor(Z){if(Z==null)throw new V1.MongoRuntimeError("ServerSessionPool requires a MongoClient");this.client=Z,this.sessions=new Q7.List}acquire(){const Z=this.client.topology?.logicalSessionTimeoutMinutes??10;let Y=null;while(this.sessions.length>0){const X=this.sessions.shift();if(X!=null&&(!!this.client.topology?.loadBalanced||!X.hasTimedOut(Z))){Y=X;break}}if(Y==null)Y=new CJ;return Y}release(Z){const Y=this.client.topology?.logicalSessionTimeoutMinutes??10;if(this.client.topology?.loadBalanced&&!Y)this.sessions.unshift(Z);if(!Y)return;if(this.sessions.prune((X)=>X.hasTimedOut(Y)),!Z.hasTimedOut(Y)){if(Z.isDirty)return;this.sessions.unshift(Z)}}}_T.ServerSessionPool=aF;_T.applySession=U61;_T.updateSessionFromResponse=V61});var R4=w((hT)=>{async function fW(Z,{blocking:Y,transform:X}){if(Z.closed)return null;do{if(Z[V8]==null)await Z[vT]();if(Z[q8].length!==0){const $=Z[q8].shift();if($!=null&&X&&Z[_J])try{return Z[_J]($)}catch(W){throw await J5(Z,{error:W,needsToEmitClosed:!0}).catch(()=>null),W}return $}if(Z.isDead)return await J5(Z,{}),null;const J=Z[l0].batchSize||1000;try{const $=await Z.getMore(J);if($){const W=typeof $.cursor.id==="number"?z7.Long.fromNumber($.cursor.id):typeof $.cursor.id==="bigint"?z7.Long.fromBigInt($.cursor.id):$.cursor.id;Z[q8].pushMany($.cursor.nextBatch),Z[V8]=W}}catch($){throw await J5(Z,{error:$}).catch(()=>null),$}if(Z.isDead)await J5(Z,{});if(Z[q8].length===0&&Y===!1)return null}while(!Z.isDead||Z[q8].length!==0);return null}async function J5(Z,Y){const X=Z[V8],J=Z[SJ],$=Z[xW],W=Z[w4],G=Y?.error,K=Y?.needsToEmitClosed??Z[q8].length===0;if(G){if(Z.loadBalanced&&G instanceof V6.MongoNetworkError)return Q()}if(X==null||$==null||X.isZero()||J==null){if(K)Z[U9]=!0,Z[V8]=z7.Long.ZERO,Z.emit(XY.CLOSE);if(W){if(W.owner===Z){await W.endSession({error:G});return}if(!W.inTransaction())(0,sF.maybeClearPinnedConnection)(W,{error:G})}return}async function Q(){if(W){if(W.owner===Z){try{await W.endSession({error:G})}finally{Z.emit(XY.CLOSE)}return}if(!W.inTransaction())(0,sF.maybeClearPinnedConnection)(W,{error:G})}Z.emit(XY.CLOSE);return}if(Z[kJ]=!0,W.hasEnded)return Q();try{await(0,bT.executeOperation)(Z[ZY],new A61.KillCursorsOperation(X,J,$,{session:W})).catch(()=>null)}finally{await Q()}}var V9=function(Z){if(Z[YY])throw new V6.MongoCursorInUseError};Object.defineProperty(hT,"__esModule",{value:!0});hT.assertUninitialized=hT.AbstractCursor=hT.CURSOR_FLAGS=void 0;var gT=import.meta.require("stream"),z7=Z0(),V6=r(),B61=U6(),bT=c8(),N61=gF(),A61=YT(),fT=_6(),_W=x0(),sF=OJ(),yT=$1(),V8=Symbol("id"),q8=Symbol("documents"),xW=Symbol("server"),SJ=Symbol("namespace"),ZY=Symbol("client"),w4=Symbol("session"),l0=Symbol("options"),_J=Symbol("transform"),YY=Symbol("initialized"),U9=Symbol("closed"),kJ=Symbol("killed"),vT=Symbol("kInit");hT.CURSOR_FLAGS=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];class XY extends B61.TypedEventEmitter{constructor(Z,Y,X={}){super();if(!Z.s.isMongoClient)throw new V6.MongoRuntimeError("Cursor must be constructed with MongoClient");this[ZY]=Z,this[SJ]=Y,this[V8]=null,this[q8]=new yT.List,this[YY]=!1,this[U9]=!1,this[kJ]=!1,this[l0]={readPreference:X.readPreference&&X.readPreference instanceof _W.ReadPreference?X.readPreference:_W.ReadPreference.primary,...(0,z7.pluckBSONSerializeOptions)(X)};const J=fT.ReadConcern.fromOptions(X);if(J)this[l0].readConcern=J;if(typeof X.batchSize==="number")this[l0].batchSize=X.batchSize;if(X.comment!==void 0)this[l0].comment=X.comment;if(typeof X.maxTimeMS==="number")this[l0].maxTimeMS=X.maxTimeMS;if(typeof X.maxAwaitTimeMS==="number")this[l0].maxAwaitTimeMS=X.maxAwaitTimeMS;if(X.session instanceof sF.ClientSession)this[w4]=X.session;else this[w4]=this[ZY].startSession({owner:this,explicit:!1})}get id(){return this[V8]??void 0}get isDead(){return(this[V8]?.isZero()??!1)||this[U9]||this[kJ]}get client(){return this[ZY]}get server(){return this[xW]}get namespace(){return this[SJ]}get readPreference(){return this[l0].readPreference}get readConcern(){return this[l0].readConcern}get session(){return this[w4]}set session(Z){this[w4]=Z}get cursorOptions(){return this[l0]}get closed(){return this[U9]}get killed(){return this[kJ]}get loadBalanced(){return!!this[ZY].topology?.loadBalanced}bufferedCount(){return this[q8].length}readBufferedDocuments(Z){const Y=[],X=Math.min(Z??this[q8].length,this[q8].length);for(let J=0;J<X;J++){const $=this[q8].shift();if($!=null)Y.push($)}return Y}async*[Symbol.asyncIterator](){if(this.closed)return;try{while(!0){const Z=await this.next();if(Z===null){if(!this.closed)throw await J5(this,{needsToEmitClosed:!0}).catch(()=>null),new V6.MongoAPIError("Cursor returned a `null` document, but the cursor is not exhausted.  Mapping documents to `null` is not supported in the cursor transform.");break}if(yield Z,this[V8]===z7.Long.ZERO)break}}finally{if(!this.closed)await this.close().catch(()=>null)}}stream(Z){if(Z?.transform){const Y=Z.transform;return new rF(this).pipe(new gT.Transform({objectMode:!0,highWaterMark:1,transform(J,$,W){try{const G=Y(J);W(void 0,G)}catch(G){W(G)}}}))}return new rF(this)}async hasNext(){if(this[V8]===z7.Long.ZERO)return!1;if(this[q8].length!==0)return!0;const Z=await fW(this,{blocking:!0,transform:!1});if(Z)return this[q8].unshift(Z),!0;return!1}async next(){if(this[V8]===z7.Long.ZERO)throw new V6.MongoCursorExhaustedError;return fW(this,{blocking:!0,transform:!0})}async tryNext(){if(this[V8]===z7.Long.ZERO)throw new V6.MongoCursorExhaustedError;return fW(this,{blocking:!1,transform:!0})}async forEach(Z){if(typeof Z!=="function")throw new V6.MongoInvalidArgumentError('Argument "iterator" must be a function');for await(let Y of this)if(Z(Y)===!1)break}async close(){const Z=!this[U9];this[U9]=!0,await J5(this,{needsToEmitClosed:Z})}async toArray(){const Z=[];for await(let Y of this)Z.push(Y);return Z}addCursorFlag(Z,Y){if(V9(this),!hT.CURSOR_FLAGS.includes(Z))throw new V6.MongoInvalidArgumentError(`Flag ${Z} is not one of ${hT.CURSOR_FLAGS}`);if(typeof Y!=="boolean")throw new V6.MongoInvalidArgumentError(`Flag ${Z} must be a boolean value`);return this[l0][Z]=Y,this}map(Z){V9(this);const Y=this[_J];if(Y)this[_J]=(X)=>{return Z(Y(X))};else this[_J]=Z;return this}withReadPreference(Z){if(V9(this),Z instanceof _W.ReadPreference)this[l0].readPreference=Z;else if(typeof Z==="string")this[l0].readPreference=_W.ReadPreference.fromString(Z);else throw new V6.MongoInvalidArgumentError(`Invalid read preference: ${Z}`);return this}withReadConcern(Z){V9(this);const Y=fT.ReadConcern.fromOptions({readConcern:Z});if(Y)this[l0].readConcern=Y;return this}maxTimeMS(Z){if(V9(this),typeof Z!=="number")throw new V6.MongoInvalidArgumentError("Argument for maxTimeMS must be a number");return this[l0].maxTimeMS=Z,this}batchSize(Z){if(V9(this),this[l0].tailable)throw new V6.MongoTailableCursorError("Tailable cursor does not support batchSize");if(typeof Z!=="number")throw new V6.MongoInvalidArgumentError('Operation "batchSize" requires an integer');return this[l0].batchSize=Z,this}rewind(){if(!this[YY])return;this[V8]=null,this[q8].clear(),this[U9]=!1,this[kJ]=!1,this[YY]=!1;const Z=this[w4];if(Z){if(Z.explicit===!1){if(!Z.hasEnded)Z.endSession().catch(()=>null);this[w4]=this.client.startSession({owner:this,explicit:!1})}}}async getMore(Z){const Y=new N61.GetMoreOperation(this[SJ],this[V8],this[xW],{...this[l0],session:this[w4],batchSize:Z});return(0,bT.executeOperation)(this[ZY],Y)}async[vT](){try{const Z=await this._initialize(this[w4]),Y=Z.response;if(this[xW]=Z.server,Y.cursor){if(this[V8]=typeof Y.cursor.id==="number"?z7.Long.fromNumber(Y.cursor.id):typeof Y.cursor.id==="bigint"?z7.Long.fromBigInt(Y.cursor.id):Y.cursor.id,Y.cursor.ns)this[SJ]=(0,yT.ns)(Y.cursor.ns);this[q8].pushMany(Y.cursor.firstBatch)}if(this[V8]==null)this[V8]=z7.Long.ZERO,this[q8].push(Z.response);this[YY]=!0}catch(Z){throw this[YY]=!0,await J5(this,{error:Z}),Z}if(this.isDead)await J5(this,void 0);return}}XY.CLOSE="close";hT.AbstractCursor=XY;hT.assertUninitialized=V9;class rF extends gT.Readable{constructor(Z){super({objectMode:!0,autoDestroy:!1,highWaterMark:1});this._readInProgress=!1,this._cursor=Z}_read(Z){if(!this._readInProgress)this._readInProgress=!0,this._readNext()}_destroy(Z,Y){this._cursor.close().then(()=>Y(Z),(X)=>Y(X))}_readNext(){fW(this._cursor,{blocking:!0,transform:!0}).then((Z)=>{if(Z==null)this.push(null);else if(this.destroyed)this._cursor.close().catch(()=>null);else{if(this.push(Z))return this._readNext();this._readInProgress=!1}},(Z)=>{if(Z.message.match(/server is closed/))return this._cursor.close().catch(()=>null),this.push(null);if(Z.message.match(/operation was interrupted/))return this.push(null);return this.destroy(Z)})}}});var xJ=w((cT)=>{Object.defineProperty(cT,"__esModule",{value:!0});cT.AggregationCursor=void 0;var uT=DW(),dT=c8(),P61=$1(),y6=R4(),L8=Symbol("pipeline"),yW=Symbol("options");class oF extends y6.AbstractCursor{constructor(Z,Y,X=[],J={}){super(Z,Y,J);this[L8]=X,this[yW]=J}get pipeline(){return this[L8]}clone(){const Z=(0,P61.mergeOptions)({},this[yW]);return delete Z.session,new oF(this.client,this.namespace,this[L8],{...Z})}map(Z){return super.map(Z)}async _initialize(Z){const Y=new uT.AggregateOperation(this.namespace,this[L8],{...this[yW],...this.cursorOptions,session:Z}),X=await(0,dT.executeOperation)(this.client,Y);return{server:Y.server,session:Z,response:X}}async explain(Z){return(0,dT.executeOperation)(this.client,new uT.AggregateOperation(this.namespace,this[L8],{...this[yW],...this.cursorOptions,explain:Z??!0}))}group(Z){return(0,y6.assertUninitialized)(this),this[L8].push({$group:Z}),this}limit(Z){return(0,y6.assertUninitialized)(this),this[L8].push({$limit:Z}),this}match(Z){return(0,y6.assertUninitialized)(this),this[L8].push({$match:Z}),this}out(Z){return(0,y6.assertUninitialized)(this),this[L8].push({$out:Z}),this}project(Z){return(0,y6.assertUninitialized)(this),this[L8].push({$project:Z}),this}lookup(Z){return(0,y6.assertUninitialized)(this),this[L8].push({$lookup:Z}),this}redact(Z){return(0,y6.assertUninitialized)(this),this[L8].push({$redact:Z}),this}skip(Z){return(0,y6.assertUninitialized)(this),this[L8].push({$skip:Z}),this}sort(Z){return(0,y6.assertUninitialized)(this),this[L8].push({$sort:Z}),this}unwind(Z){return(0,y6.assertUninitialized)(this),this[L8].push({$unwind:Z}),this}geoNear(Z){return(0,y6.assertUninitialized)(this),this[L8].push({$geoNear:Z}),this}}cT.AggregationCursor=oF});var YU=w((pT)=>{Object.defineProperty(pT,"__esModule",{value:!0});pT.CountOperation=void 0;var T61=A0(),eF=v1();class ZU extends T61.CommandOperation{constructor(Z,Y,X){super({s:{namespace:Z}},X);this.options=X,this.collectionName=Z.collection,this.query=Y}async execute(Z,Y){const X=this.options,J={count:this.collectionName,query:this.query};if(typeof X.limit==="number")J.limit=X.limit;if(typeof X.skip==="number")J.skip=X.skip;if(X.hint!=null)J.hint=X.hint;if(typeof X.maxTimeMS==="number")J.maxTimeMS=X.maxTimeMS;const $=await super.executeCommand(Z,Y,J);return $?$.n:0}}pT.CountOperation=ZU;(0,eF.defineAspects)(ZU,[eF.Aspect.READ_OPERATION,eF.Aspect.RETRYABLE])});var gW=w((aT)=>{var JY=function(Z=1){const Y=`${Z}`.toLowerCase();if(I61(Z))return Z;switch(Y){case"ascending":case"asc":case"1":return 1;case"descending":case"desc":case"-1":return-1;default:throw new nT.MongoInvalidArgumentError(`Invalid sort direction: ${JSON.stringify(Z)}`)}},I61=function(Z){return typeof Z==="object"&&Z!=null&&("$meta"in Z)&&typeof Z.$meta==="string"},j61=function(Z){if(Array.isArray(Z)&&Z.length===2)try{return JY(Z[1]),!0}catch(Y){return!1}return!1},E61=function(Z){return Array.isArray(Z)&&Array.isArray(Z[0])},C61=function(Z){return Z instanceof Map&&Z.size>0},O61=function(Z){return new Map([[`${Z[0]}`,JY([Z[1]])]])},S61=function(Z){const Y=Z.map(([X,J])=>[`${X}`,JY(J)]);return new Map(Y)},k61=function(Z){const Y=Z.map((X)=>[`${X}`,1]);return new Map(Y)},_61=function(Z){const Y=Object.entries(Z).map(([X,J])=>[`${X}`,JY(J)]);return new Map(Y)},x61=function(Z){const Y=Array.from(Z).map(([X,J])=>[`${X}`,JY(J)]);return new Map(Y)},f61=function(Z,Y){if(Z==null)return;if(typeof Z==="string")return new Map([[Z,JY(Y)]]);if(typeof Z!=="object")throw new nT.MongoInvalidArgumentError(`Invalid sort format: ${JSON.stringify(Z)} Sort must be a valid object`);if(!Array.isArray(Z))return C61(Z)?x61(Z):Object.keys(Z).length?_61(Z):void 0;if(!Z.length)return;if(E61(Z))return S61(Z);if(j61(Z))return O61(Z);return k61(Z)};Object.defineProperty(aT,"__esModule",{value:!0});aT.formatSort=void 0;var nT=r();aT.formatSort=f61});var eT=w((tT)=>{var h61=function(Z,Y,X){const J={find:Z.collection,filter:Y};if(X.sort)J.sort=(0,b61.formatSort)(X.sort);if(X.projection){let W=X.projection;if(W&&Array.isArray(W))W=W.length?W.reduce((G,K)=>{return G[K]=1,G},{}):{_id:1};J.projection=W}if(X.hint)J.hint=(0,rT.normalizeHintField)(X.hint);if(typeof X.skip==="number")J.skip=X.skip;if(typeof X.limit==="number")if(X.limit<0)J.limit=-X.limit,J.singleBatch=!0;else J.limit=X.limit;if(typeof X.batchSize==="number")if(X.batchSize<0){if(X.limit&&X.limit!==0&&Math.abs(X.batchSize)<Math.abs(X.limit))J.limit=-X.batchSize;J.singleBatch=!0}else J.batchSize=X.batchSize;if(typeof X.singleBatch==="boolean")J.singleBatch=X.singleBatch;if(X.comment!==void 0)J.comment=X.comment;if(typeof X.maxTimeMS==="number")J.maxTimeMS=X.maxTimeMS;const $=g61.ReadConcern.fromOptions(X);if($)J.readConcern=$.toJSON();if(X.max)J.max=X.max;if(X.min)J.min=X.min;if(typeof X.returnKey==="boolean")J.returnKey=X.returnKey;if(typeof X.showRecordId==="boolean")J.showRecordId=X.showRecordId;if(typeof X.tailable==="boolean")J.tailable=X.tailable;if(typeof X.oplogReplay==="boolean")J.oplogReplay=X.oplogReplay;if(typeof X.timeout==="boolean")J.noCursorTimeout=!X.timeout;else if(typeof X.noCursorTimeout==="boolean")J.noCursorTimeout=X.noCursorTimeout;if(typeof X.awaitData==="boolean")J.awaitData=X.awaitData;if(typeof X.allowPartialResults==="boolean")J.allowPartialResults=X.allowPartialResults;if(X.collation)J.collation=X.collation;if(typeof X.allowDiskUse==="boolean")J.allowDiskUse=X.allowDiskUse;if(X.let)J.let=X.let;return J};Object.defineProperty(tT,"__esModule",{value:!0});tT.FindOperation=void 0;var y61=r(),g61=_6(),b61=gW(),rT=$1(),v61=A0(),fJ=v1();class XU extends v61.CommandOperation{constructor(Z,Y,X={},J={}){super(Z,J);if(this.options={...J},delete this.options.writeConcern,this.ns=Y,typeof X!=="object"||Array.isArray(X))throw new y61.MongoInvalidArgumentError("Query filter must be a plain object or ObjectId");this.filter=X!=null&&X._bsontype==="ObjectId"?{_id:X}:X}async execute(Z,Y){this.server=Z;const X=this.options;let J=h61(this.ns,this.filter,X);if(this.explain)J=(0,rT.decorateWithExplain)(J,this.explain);return Z.commandAsync(this.ns,J,{...this.options,...this.bsonOptions,documentsReturnedIn:"firstBatch",session:Y})}}tT.FindOperation=XU;(0,fJ.defineAspects)(XU,[fJ.Aspect.READ_OPERATION,fJ.Aspect.RETRYABLE,fJ.Aspect.EXPLAINABLE,fJ.Aspect.CURSOR_CREATING])});var GU=w((XI)=>{Object.defineProperty(XI,"__esModule",{value:!0});XI.FindCursor=XI.FLAGS=void 0;var m61=Z0(),H7=r(),u61=YU(),JU=c8(),ZI=eT(),$U=gW(),YI=$1(),t0=R4(),q9=Symbol("filter"),bW=Symbol("numReturned"),O1=Symbol("builtOptions");XI.FLAGS=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];class WU extends t0.AbstractCursor{constructor(Z,Y,X={},J={}){super(Z,Y,J);if(this[q9]=X,this[O1]=J,J.sort!=null)this[O1].sort=(0,$U.formatSort)(J.sort)}clone(){const Z=(0,YI.mergeOptions)({},this[O1]);return delete Z.session,new WU(this.client,this.namespace,this[q9],{...Z})}map(Z){return super.map(Z)}async _initialize(Z){const Y=new ZI.FindOperation(void 0,this.namespace,this[q9],{...this[O1],...this.cursorOptions,session:Z}),X=await(0,JU.executeOperation)(this.client,Y);return this[bW]=X.cursor?.firstBatch?.length,{server:Y.server,session:Z,response:X}}async getMore(Z){const Y=this[bW];if(Y){const J=this[O1].limit;if(Z=J&&J>0&&Y+Z>J?J-Y:Z,Z<=0)return await this.close().catch(()=>null),{cursor:{id:m61.Long.ZERO,nextBatch:[]}}}const X=await super.getMore(Z);if(X)this[bW]=this[bW]+X.cursor.nextBatch.length;return X}async count(Z){if((0,YI.emitWarningOnce)("cursor.count is deprecated and will be removed in the next major version, please use `collection.estimatedDocumentCount` or `collection.countDocuments` instead "),typeof Z==="boolean")throw new H7.MongoInvalidArgumentError("Invalid first parameter to count");return(0,JU.executeOperation)(this.client,new u61.CountOperation(this.namespace,this[q9],{...this[O1],...this.cursorOptions,...Z}))}async explain(Z){return(0,JU.executeOperation)(this.client,new ZI.FindOperation(void 0,this.namespace,this[q9],{...this[O1],...this.cursorOptions,explain:Z??!0}))}filter(Z){return(0,t0.assertUninitialized)(this),this[q9]=Z,this}hint(Z){return(0,t0.assertUninitialized)(this),this[O1].hint=Z,this}min(Z){return(0,t0.assertUninitialized)(this),this[O1].min=Z,this}max(Z){return(0,t0.assertUninitialized)(this),this[O1].max=Z,this}returnKey(Z){return(0,t0.assertUninitialized)(this),this[O1].returnKey=Z,this}showRecordId(Z){return(0,t0.assertUninitialized)(this),this[O1].showRecordId=Z,this}addQueryModifier(Z,Y){if((0,t0.assertUninitialized)(this),Z[0]!=="$")throw new H7.MongoInvalidArgumentError(`${Z} is not a valid query modifier`);switch(Z.substr(1)){case"comment":this[O1].comment=Y;break;case"explain":this[O1].explain=Y;break;case"hint":this[O1].hint=Y;break;case"max":this[O1].max=Y;break;case"maxTimeMS":this[O1].maxTimeMS=Y;break;case"min":this[O1].min=Y;break;case"orderby":this[O1].sort=(0,$U.formatSort)(Y);break;case"query":this[q9]=Y;break;case"returnKey":this[O1].returnKey=Y;break;case"showDiskLoc":this[O1].showRecordId=Y;break;default:throw new H7.MongoInvalidArgumentError(`Invalid query modifier: ${Z}`)}return this}comment(Z){return(0,t0.assertUninitialized)(this),this[O1].comment=Z,this}maxAwaitTimeMS(Z){if((0,t0.assertUninitialized)(this),typeof Z!=="number")throw new H7.MongoInvalidArgumentError("Argument for maxAwaitTimeMS must be a number");return this[O1].maxAwaitTimeMS=Z,this}maxTimeMS(Z){if((0,t0.assertUninitialized)(this),typeof Z!=="number")throw new H7.MongoInvalidArgumentError("Argument for maxTimeMS must be a number");return this[O1].maxTimeMS=Z,this}project(Z){return(0,t0.assertUninitialized)(this),this[O1].projection=Z,this}sort(Z,Y){if((0,t0.assertUninitialized)(this),this[O1].tailable)throw new H7.MongoTailableCursorError("Tailable cursor does not support sorting");return this[O1].sort=(0,$U.formatSort)(Z,Y),this}allowDiskUse(Z=!0){if((0,t0.assertUninitialized)(this),!this[O1].sort)throw new H7.MongoInvalidArgumentError('Option "allowDiskUse" requires a sort specification');if(!Z)return this[O1].allowDiskUse=!1,this;return this[O1].allowDiskUse=!0,this}collation(Z){return(0,t0.assertUninitialized)(this),this[O1].collation=Z,this}limit(Z){if((0,t0.assertUninitialized)(this),this[O1].tailable)throw new H7.MongoTailableCursorError("Tailable cursor does not support limit");if(typeof Z!=="number")throw new H7.MongoInvalidArgumentError('Operation "limit" requires an integer');return this[O1].limit=Z,this}skip(Z){if((0,t0.assertUninitialized)(this),this[O1].tailable)throw new H7.MongoTailableCursorError("Tailable cursor does not support skip");if(typeof Z!=="number")throw new H7.MongoInvalidArgumentError('Operation "skip" requires an integer');return this[O1].skip=Z,this}}XI.FindCursor=WU});var yJ=w((KI)=>{var p61=function(Z){return typeof Z==="number"||Z==="2d"||Z==="2dsphere"||Z==="text"||Z==="geoHaystack"},i61=function(Z){return Array.isArray(Z)&&Z.length===2&&p61(Z[1])},n61=function(Z,Y){const X=new Map,J=!Array.isArray(Z)||i61(Z)?[Z]:Z;for(let $ of J)if(typeof $==="string")X.set($,1);else if(Array.isArray($))X.set($[0],$[1]??1);else if($ instanceof Map)for(let[W,G]of $)X.set(W,G);else if((0,QU.isObject)($))for(let[W,G]of Object.entries($))X.set(W,G);return{...Y,key:X}};Object.defineProperty(KI,"__esModule",{value:!0});KI.IndexInformationOperation=KI.IndexExistsOperation=KI.ListIndexesOperation=KI.DropIndexOperation=KI.EnsureIndexOperation=KI.CreateIndexOperation=KI.CreateIndexesOperation=KI.IndexesOperation=void 0;var KU=r(),c61=x0(),QU=$1(),zU=A0(),HU=RF(),P8=v1(),l61=new Set(["background","unique","name","partialFilterExpression","sparse","hidden","expireAfterSeconds","storageEngine","collation","version","weights","default_language","language_override","textIndexVersion","2dsphereIndexVersion","bits","min","max","bucketSize","wildcardProjection"]);class $I extends P8.AbstractOperation{constructor(Z,Y){super(Y);this.options=Y,this.collection=Z}async execute(Z,Y){const X=this.collection,J=this.options;return(0,HU.indexInformation)(X.s.db,X.collectionName,{full:!0,...J,readPreference:this.readPreference,session:Y})}}KI.IndexesOperation=$I;class vW extends zU.CommandOperation{constructor(Z,Y,X,J){super(Z,J);this.options=J??{},this.collectionName=Y,this.indexes=X.map(($)=>{const W=$.key instanceof Map?$.key:new Map(Object.entries($.key)),G=$.name!=null?$.name:Array.from(W).flat().join("_");return{...Object.fromEntries(Object.entries({...$}).filter(([Q])=>l61.has(Q))),name:G,key:W}})}async execute(Z,Y){const X=this.options,J=this.indexes,$=(0,QU.maxWireVersion)(Z),W={createIndexes:this.collectionName,indexes:J};if(X.commitQuorum!=null){if($<9)throw new KU.MongoCompatibilityError("Option `commitQuorum` for `createIndexes` not supported on servers < 4.4");W.commitQuorum=X.commitQuorum}return this.options.collation=void 0,await super.executeCommand(Z,Y,W),J.map((K)=>K.name||"")}}KI.CreateIndexesOperation=vW;class hW extends vW{constructor(Z,Y,X,J){super(Z,Y,[n61(X,J)],J)}async execute(Z,Y){return(await super.execute(Z,Y))[0]}}KI.CreateIndexOperation=hW;class FU extends hW{constructor(Z,Y,X,J){super(Z,Y,X,J);this.readPreference=c61.ReadPreference.primary,this.db=Z,this.collectionName=Y}async execute(Z,Y){const X=this.indexes[0].name,J=await this.db.collection(this.collectionName).listIndexes({session:Y}).toArray().catch(($)=>{if($ instanceof KU.MongoError&&$.code===KU.MONGODB_ERROR_CODES.NamespaceNotFound)return[];throw $});if(X&&J.some(($)=>$.name===X))return X;return super.execute(Z,Y)}}KI.EnsureIndexOperation=FU;class UU extends zU.CommandOperation{constructor(Z,Y,X){super(Z,X);this.options=X??{},this.collection=Z,this.indexName=Y}async execute(Z,Y){const X={dropIndexes:this.collection.collectionName,index:this.indexName};return super.executeCommand(Z,Y,X)}}KI.DropIndexOperation=UU;class VU extends zU.CommandOperation{constructor(Z,Y){super(Z,Y);this.options={...Y},delete this.options.writeConcern,this.collectionNamespace=Z.s.namespace}async execute(Z,Y){const X=(0,QU.maxWireVersion)(Z),J=this.options.batchSize?{batchSize:this.options.batchSize}:{},$={listIndexes:this.collectionNamespace.collection,cursor:J};if(X>=9&&this.options.comment!==void 0)$.comment=this.options.comment;return super.executeCommand(Z,Y,$)}}KI.ListIndexesOperation=VU;class WI extends P8.AbstractOperation{constructor(Z,Y,X){super(X);this.options=X,this.collection=Z,this.indexes=Y}async execute(Z,Y){const X=this.collection,J=this.indexes,$=await(0,HU.indexInformation)(X.s.db,X.collectionName,{...this.options,readPreference:this.readPreference,session:Y});if(!Array.isArray(J))return $[J]!=null;return J.every((W)=>$[W]!=null)}}KI.IndexExistsOperation=WI;class GI extends P8.AbstractOperation{constructor(Z,Y,X){super(X);this.options=X??{},this.db=Z,this.name=Y}async execute(Z,Y){const X=this.db,J=this.name;return(0,HU.indexInformation)(X,J,{...this.options,readPreference:this.readPreference,session:Y})}}KI.IndexInformationOperation=GI;(0,P8.defineAspects)(VU,[P8.Aspect.READ_OPERATION,P8.Aspect.RETRYABLE,P8.Aspect.CURSOR_CREATING]);(0,P8.defineAspects)(vW,[P8.Aspect.WRITE_OPERATION]);(0,P8.defineAspects)(hW,[P8.Aspect.WRITE_OPERATION]);(0,P8.defineAspects)(FU,[P8.Aspect.WRITE_OPERATION]);(0,P8.defineAspects)(UU,[P8.Aspect.WRITE_OPERATION])});var LU=w((zI)=>{Object.defineProperty(zI,"__esModule",{value:!0});zI.ListIndexesCursor=void 0;var Y71=c8(),X71=yJ(),J71=R4();class qU extends J71.AbstractCursor{constructor(Z,Y){super(Z.client,Z.s.namespace,Y);this.parent=Z,this.options=Y}clone(){return new qU(this.parent,{...this.options,...this.cursorOptions})}async _initialize(Z){const Y=new X71.ListIndexesOperation(this.parent,{...this.cursorOptions,...this.options,session:Z}),X=await(0,Y71.executeOperation)(this.parent.client,Y);return{server:Y.server,session:Z,response:X}}}zI.ListIndexesCursor=qU});var qI=w((UI)=>{Object.defineProperty(UI,"__esModule",{value:!0});UI.ListSearchIndexesCursor=void 0;var $71=xJ();class FI extends $71.AggregationCursor{constructor({fullNamespace:Z,client:Y},X,J={}){const $=X==null?[{$listSearchIndexes:{}}]:[{$listSearchIndexes:{name:X}}];super(Y,Z,$,J)}}UI.ListSearchIndexesCursor=FI});var MI=w((wI)=>{Object.defineProperty(wI,"__esModule",{value:!0});wI.CountDocumentsOperation=void 0;var W71=DW();class LI extends W71.AggregateOperation{constructor(Z,Y,X){const J=[];if(J.push({$match:Y}),typeof X.skip==="number")J.push({$skip:X.skip});if(typeof X.limit==="number")J.push({$limit:X.limit});J.push({$group:{_id:1,n:{$sum:1}}});super(Z.s.namespace,J,X)}async execute(Z,Y){const J=await super.execute(Z,Y);if(J.cursor==null||J.cursor.firstBatch==null)return 0;const $=J.cursor.firstBatch;return $.length?$[0].n:0}}wI.CountDocumentsOperation=LI});var DI=w((NI)=>{Object.defineProperty(NI,"__esModule",{value:!0});NI.DistinctOperation=void 0;var BI=$1(),G71=A0(),mW=v1();class wU extends G71.CommandOperation{constructor(Z,Y,X,J){super(Z,J);this.options=J??{},this.collection=Z,this.key=Y,this.query=X}async execute(Z,Y){const X=this.collection,J=this.key,$=this.query,W=this.options,G={distinct:X.collectionName,key:J,query:$};if(typeof W.maxTimeMS==="number")G.maxTimeMS=W.maxTimeMS;if(typeof W.comment!=="undefined")G.comment=W.comment;(0,BI.decorateWithReadConcern)(G,X,W),(0,BI.decorateWithCollation)(G,X,W);const K=await super.executeCommand(Z,Y,G);return this.explain?K:K.values}}NI.DistinctOperation=wU;(0,mW.defineAspects)(wU,[mW.Aspect.READ_OPERATION,mW.Aspect.RETRYABLE,mW.Aspect.EXPLAINABLE])});var MU=w((II)=>{Object.defineProperty(II,"__esModule",{value:!0});II.DropDatabaseOperation=II.DropCollectionOperation=void 0;var PI=r(),TI=A0(),uW=v1();class dW extends TI.CommandOperation{constructor(Z,Y,X={}){super(Z,X);this.db=Z,this.options=X,this.name=Y}async execute(Z,Y){const X=this.db,J=this.options,$=this.name,W=X.client.options.autoEncryption?.encryptedFieldsMap;let G=J.encryptedFields??W?.[`${X.databaseName}.${$}`];if(!G&&W)G=(await X.listCollections({name:$},{nameOnly:!1}).toArray())?.[0]?.options?.encryptedFields;if(G){const K=G.escCollection||`enxcol_.${$}.esc`,Q=G.ecocCollection||`enxcol_.${$}.ecoc`;for(let z of[K,Q]){const H=new dW(X,z);try{await H.executeWithoutEncryptedFieldsCheck(Z,Y)}catch(F){if(!(F instanceof PI.MongoServerError)||F.code!==PI.MONGODB_ERROR_CODES.NamespaceNotFound)throw F}}}return this.executeWithoutEncryptedFieldsCheck(Z,Y)}async executeWithoutEncryptedFieldsCheck(Z,Y){return await super.executeCommand(Z,Y,{drop:this.name}),!0}}II.DropCollectionOperation=dW;class RU extends TI.CommandOperation{constructor(Z,Y){super(Z,Y);this.options=Y}async execute(Z,Y){return await super.executeCommand(Z,Y,{dropDatabase:1}),!0}}II.DropDatabaseOperation=RU;(0,uW.defineAspects)(dW,[uW.Aspect.WRITE_OPERATION]);(0,uW.defineAspects)(RU,[uW.Aspect.WRITE_OPERATION])});var OI=w((EI)=>{Object.defineProperty(EI,"__esModule",{value:!0});EI.EstimatedDocumentCountOperation=void 0;var Q71=A0(),cW=v1();class BU extends Q71.CommandOperation{constructor(Z,Y={}){super(Z,Y);this.options=Y,this.collectionName=Z.collectionName}async execute(Z,Y){const X={count:this.collectionName};if(typeof this.options.maxTimeMS==="number")X.maxTimeMS=this.options.maxTimeMS;if(this.options.comment!==void 0)X.comment=this.options.comment;return(await super.executeCommand(Z,Y,X))?.n||0}}EI.EstimatedDocumentCountOperation=BU;(0,cW.defineAspects)(BU,[cW.Aspect.READ_OPERATION,cW.Aspect.RETRYABLE,cW.Aspect.CURSOR_CREATING])});var NU=w((fI)=>{var SI=function(Z,Y){if(Z.new=Y.returnDocument===fI.ReturnDocument.AFTER,Z.upsert=Y.upsert===!0,Y.bypassDocumentValidation===!0)Z.bypassDocumentValidation=Y.bypassDocumentValidation;return Z};Object.defineProperty(fI,"__esModule",{value:!0});fI.FindOneAndUpdateOperation=fI.FindOneAndReplaceOperation=fI.FindOneAndDeleteOperation=fI.ReturnDocument=void 0;var $5=r(),z71=x0(),H71=gW(),pW=$1(),F71=A0(),lW=v1();fI.ReturnDocument=Object.freeze({BEFORE:"before",AFTER:"after"});class gJ extends F71.CommandOperation{constructor(Z,Y,X){super(Z,X);this.options=X??{},this.cmdBase={remove:!1,new:!1,upsert:!1},X.includeResultMetadata??=!1;const J=(0,H71.formatSort)(X.sort);if(J)this.cmdBase.sort=J;if(X.projection)this.cmdBase.fields=X.projection;if(X.maxTimeMS)this.cmdBase.maxTimeMS=X.maxTimeMS;if(X.writeConcern)this.cmdBase.writeConcern=X.writeConcern;if(X.let)this.cmdBase.let=X.let;if(X.comment!==void 0)this.cmdBase.comment=X.comment;this.readPreference=z71.ReadPreference.primary,this.collection=Z,this.query=Y}async execute(Z,Y){const X=this.collection,J=this.query,$={...this.options,...this.bsonOptions},W={findAndModify:X.collectionName,query:J,...this.cmdBase};try{(0,pW.decorateWithCollation)(W,X,$)}catch(K){return K}if($.hint){if(this.writeConcern?.w===0||(0,pW.maxWireVersion)(Z)<8)throw new $5.MongoCompatibilityError("The current topology does not support a hint on findAndModify commands");W.hint=$.hint}const G=await super.executeCommand(Z,Y,W);return $.includeResultMetadata?G:G.value??null}}class kI extends gJ{constructor(Z,Y,X){if(Y==null||typeof Y!=="object")throw new $5.MongoInvalidArgumentError('Argument "filter" must be an object');super(Z,Y,X);this.cmdBase.remove=!0}}fI.FindOneAndDeleteOperation=kI;class _I extends gJ{constructor(Z,Y,X,J){if(Y==null||typeof Y!=="object")throw new $5.MongoInvalidArgumentError('Argument "filter" must be an object');if(X==null||typeof X!=="object")throw new $5.MongoInvalidArgumentError('Argument "replacement" must be an object');if((0,pW.hasAtomicOperators)(X))throw new $5.MongoInvalidArgumentError("Replacement document must not contain atomic operators");super(Z,Y,J);this.cmdBase.update=X,SI(this.cmdBase,J)}}fI.FindOneAndReplaceOperation=_I;class xI extends gJ{constructor(Z,Y,X,J){if(Y==null||typeof Y!=="object")throw new $5.MongoInvalidArgumentError('Argument "filter" must be an object');if(X==null||typeof X!=="object")throw new $5.MongoInvalidArgumentError('Argument "update" must be an object');if(!(0,pW.hasAtomicOperators)(X))throw new $5.MongoInvalidArgumentError("Update document requires atomic operators");super(Z,Y,J);if(this.cmdBase.update=X,SI(this.cmdBase,J),J.arrayFilters)this.cmdBase.arrayFilters=J.arrayFilters}}fI.FindOneAndUpdateOperation=xI;(0,lW.defineAspects)(gJ,[lW.Aspect.WRITE_OPERATION,lW.Aspect.RETRYABLE,lW.Aspect.EXPLAINABLE])});var mI=w((vI)=>{Object.defineProperty(vI,"__esModule",{value:!0});vI.IsCappedOperation=void 0;var q71=r(),L71=v1();class bI extends L71.AbstractOperation{constructor(Z,Y){super(Y);this.options=Y,this.collection=Z}async execute(Z,Y){const X=this.collection,[J]=await X.s.db.listCollections({name:X.collectionName},{...this.options,nameOnly:!1,readPreference:this.readPreference,session:Y}).toArray();if(J==null||J.options==null)throw new q71.MongoAPIError(`collection ${X.namespace} not found`);return!!J.options?.capped}}vI.IsCappedOperation=bI});var lI=w((dI)=>{Object.defineProperty(dI,"__esModule",{value:!0});dI.OptionsOperation=void 0;var w71=r(),R71=v1();class uI extends R71.AbstractOperation{constructor(Z,Y){super(Y);this.options=Y,this.collection=Z}async execute(Z,Y){const X=this.collection,[J]=await X.s.db.listCollections({name:X.collectionName},{...this.options,nameOnly:!1,readPreference:this.readPreference,session:Y}).toArray();if(J==null||J.options==null)throw new w71.MongoAPIError(`collection ${X.namespace} not found`);return J.options}}dI.OptionsOperation=uI});var DU=w((iI)=>{Object.defineProperty(iI,"__esModule",{value:!0});iI.RenameOperation=void 0;var M71=L9(),B71=$1(),N71=A0(),pI=v1();class AU extends N71.CommandOperation{constructor(Z,Y,X){super(Z,X);this.collection=Z,this.newName=Y,this.options=X,this.ns=new B71.MongoDBNamespace("admin","$cmd")}async execute(Z,Y){const X=this.collection.namespace,J=this.collection.s.namespace.withCollection(this.newName).toString(),$=typeof this.options.dropTarget==="boolean"?this.options.dropTarget:!1,W={renameCollection:X,to:J,dropTarget:$};return await super.executeCommand(Z,Y,W),new M71.Collection(this.collection.s.db,this.newName,this.collection.s.options)}}iI.RenameOperation=AU;(0,pI.defineAspects)(AU,[pI.Aspect.WRITE_OPERATION])});var tI=w((sI)=>{Object.defineProperty(sI,"__esModule",{value:!0});sI.CreateSearchIndexesOperation=void 0;var A71=v1();class aI extends A71.AbstractOperation{constructor(Z,Y){super();this.collection=Z,this.descriptions=Y}async execute(Z,Y){const X=this.collection.fullNamespace,J={createSearchIndexes:X.collection,indexes:this.descriptions};return((await Z.commandAsync(X,J,{session:Y}))?.indexesCreated??[]).map(({name:G})=>G)}}sI.CreateSearchIndexesOperation=aI});var Xj=w((Zj)=>{Object.defineProperty(Zj,"__esModule",{value:!0});Zj.DropSearchIndexOperation=void 0;var oI=r(),D71=v1();class eI extends D71.AbstractOperation{constructor(Z,Y){super();this.collection=Z,this.name=Y}async execute(Z,Y){const X=this.collection.fullNamespace,J={dropSearchIndex:X.collection};if(typeof this.name==="string")J.name=this.name;try{await Z.commandAsync(X,J,{session:Y})}catch($){if(!($ instanceof oI.MongoServerError&&$.code===oI.MONGODB_ERROR_CODES.NamespaceNotFound))throw $}}}Zj.DropSearchIndexOperation=eI});var Gj=w(($j)=>{Object.defineProperty($j,"__esModule",{value:!0});$j.UpdateSearchIndexOperation=void 0;var P71=v1();class Jj extends P71.AbstractOperation{constructor(Z,Y,X){super();this.collection=Z,this.name=Y,this.definition=X}async execute(Z,Y){const X=this.collection.fullNamespace,J={updateSearchIndex:X.collection,name:this.name,definition:this.definition};await Z.commandAsync(X,J,{session:Y});return}}$j.UpdateSearchIndexOperation=Jj});var L9=w((Fj)=>{Object.defineProperty(Fj,"__esModule",{value:!0});Fj.Collection=void 0;var T71=Z0(),I71=SF(),j71=kF(),E71=$Y(),C71=xJ(),O71=GU(),S71=LU(),k71=qI(),Kj=r(),_71=wF(),x71=YU(),f71=MI(),Qj=VF(),y71=DI(),g71=MU(),b71=OI(),l1=c8(),PU=NU(),w9=yJ(),zj=NF(),v71=mI(),h71=lI(),m71=DU(),u71=tI(),d71=Xj(),c71=Gj(),TU=IF(),l71=_6(),IU=x0(),x1=$1(),p71=d8();class Hj{constructor(Z,Y,X){this.s={db:Z,options:X,namespace:new x1.MongoDBCollectionNamespace(Z.databaseName,Y),pkFactory:Z.options?.pkFactory??x1.DEFAULT_PK_FACTORY,readPreference:IU.ReadPreference.fromOptions(X),bsonOptions:(0,T71.resolveBSONOptions)(X,Z),readConcern:l71.ReadConcern.fromOptions(X),writeConcern:p71.WriteConcern.fromOptions(X)},this.client=Z.client}get dbName(){return this.s.namespace.db}get collectionName(){return this.s.namespace.collection}get namespace(){return this.fullNamespace.toString()}get fullNamespace(){return this.s.namespace}get readConcern(){if(this.s.readConcern==null)return this.s.db.readConcern;return this.s.readConcern}get readPreference(){if(this.s.readPreference==null)return this.s.db.readPreference;return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){if(this.s.writeConcern==null)return this.s.db.writeConcern;return this.s.writeConcern}get hint(){return this.s.collectionHint}set hint(Z){this.s.collectionHint=(0,x1.normalizeHintField)(Z)}async insertOne(Z,Y){return(0,l1.executeOperation)(this.client,new zj.InsertOneOperation(this,Z,(0,x1.resolveOptions)(this,Y)))}async insertMany(Z,Y){return(0,l1.executeOperation)(this.client,new zj.InsertManyOperation(this,Z,(0,x1.resolveOptions)(this,Y??{ordered:!0})))}async bulkWrite(Z,Y){if(!Array.isArray(Z))throw new Kj.MongoInvalidArgumentError('Argument "operations" must be an array of documents');return(0,l1.executeOperation)(this.client,new _71.BulkWriteOperation(this,Z,(0,x1.resolveOptions)(this,Y??{ordered:!0})))}async updateOne(Z,Y,X){return(0,l1.executeOperation)(this.client,new TU.UpdateOneOperation(this,Z,Y,(0,x1.resolveOptions)(this,X)))}async replaceOne(Z,Y,X){return(0,l1.executeOperation)(this.client,new TU.ReplaceOneOperation(this,Z,Y,(0,x1.resolveOptions)(this,X)))}async updateMany(Z,Y,X){return(0,l1.executeOperation)(this.client,new TU.UpdateManyOperation(this,Z,Y,(0,x1.resolveOptions)(this,X)))}async deleteOne(Z={},Y={}){return(0,l1.executeOperation)(this.client,new Qj.DeleteOneOperation(this,Z,(0,x1.resolveOptions)(this,Y)))}async deleteMany(Z={},Y={}){return(0,l1.executeOperation)(this.client,new Qj.DeleteManyOperation(this,Z,(0,x1.resolveOptions)(this,Y)))}async rename(Z,Y){return(0,l1.executeOperation)(this.client,new m71.RenameOperation(this,Z,{...Y,readPreference:IU.ReadPreference.PRIMARY}))}async drop(Z){return(0,l1.executeOperation)(this.client,new g71.DropCollectionOperation(this.s.db,this.collectionName,Z))}async findOne(Z={},Y={}){const X=this.find(Z,Y).limit(-1).batchSize(1),J=await X.next();return await X.close(),J}find(Z={},Y={}){return new O71.FindCursor(this.client,this.s.namespace,Z,(0,x1.resolveOptions)(this,Y))}async options(Z){return(0,l1.executeOperation)(this.client,new h71.OptionsOperation(this,(0,x1.resolveOptions)(this,Z)))}async isCapped(Z){return(0,l1.executeOperation)(this.client,new v71.IsCappedOperation(this,(0,x1.resolveOptions)(this,Z)))}async createIndex(Z,Y){return(0,l1.executeOperation)(this.client,new w9.CreateIndexOperation(this,this.collectionName,Z,(0,x1.resolveOptions)(this,Y)))}async createIndexes(Z,Y){return(0,l1.executeOperation)(this.client,new w9.CreateIndexesOperation(this,this.collectionName,Z,(0,x1.resolveOptions)(this,{...Y,maxTimeMS:void 0})))}async dropIndex(Z,Y){return(0,l1.executeOperation)(this.client,new w9.DropIndexOperation(this,Z,{...(0,x1.resolveOptions)(this,Y),readPreference:IU.ReadPreference.primary}))}async dropIndexes(Z){try{return await(0,l1.executeOperation)(this.client,new w9.DropIndexOperation(this,"*",(0,x1.resolveOptions)(this,Z))),!0}catch{return!1}}listIndexes(Z){return new S71.ListIndexesCursor(this,(0,x1.resolveOptions)(this,Z))}async indexExists(Z,Y){return(0,l1.executeOperation)(this.client,new w9.IndexExistsOperation(this,Z,(0,x1.resolveOptions)(this,Y)))}async indexInformation(Z){return(0,l1.executeOperation)(this.client,new w9.IndexInformationOperation(this.s.db,this.collectionName,(0,x1.resolveOptions)(this,Z)))}async estimatedDocumentCount(Z){return(0,l1.executeOperation)(this.client,new b71.EstimatedDocumentCountOperation(this,(0,x1.resolveOptions)(this,Z)))}async countDocuments(Z={},Y={}){return(0,l1.executeOperation)(this.client,new f71.CountDocumentsOperation(this,Z,(0,x1.resolveOptions)(this,Y)))}async distinct(Z,Y={},X={}){return(0,l1.executeOperation)(this.client,new y71.DistinctOperation(this,Z,Y,(0,x1.resolveOptions)(this,X)))}async indexes(Z){return(0,l1.executeOperation)(this.client,new w9.IndexesOperation(this,(0,x1.resolveOptions)(this,Z)))}async findOneAndDelete(Z,Y){return(0,l1.executeOperation)(this.client,new PU.FindOneAndDeleteOperation(this,Z,(0,x1.resolveOptions)(this,Y)))}async findOneAndReplace(Z,Y,X){return(0,l1.executeOperation)(this.client,new PU.FindOneAndReplaceOperation(this,Z,Y,(0,x1.resolveOptions)(this,X)))}async findOneAndUpdate(Z,Y,X){return(0,l1.executeOperation)(this.client,new PU.FindOneAndUpdateOperation(this,Z,Y,(0,x1.resolveOptions)(this,X)))}aggregate(Z=[],Y){if(!Array.isArray(Z))throw new Kj.MongoInvalidArgumentError('Argument "pipeline" must be an array of aggregation stages');return new C71.AggregationCursor(this.client,this.s.namespace,Z,(0,x1.resolveOptions)(this,Y))}watch(Z=[],Y={}){if(!Array.isArray(Z))Y=Z,Z=[];return new E71.ChangeStream(this,Z,(0,x1.resolveOptions)(this,Y))}initializeUnorderedBulkOp(Z){return new j71.UnorderedBulkOperation(this,(0,x1.resolveOptions)(this,Z))}initializeOrderedBulkOp(Z){return new I71.OrderedBulkOperation(this,(0,x1.resolveOptions)(this,Z))}async count(Z={},Y={}){return(0,l1.executeOperation)(this.client,new x71.CountOperation(this.fullNamespace,Z,(0,x1.resolveOptions)(this,Y)))}listSearchIndexes(Z,Y){Y=typeof Z==="object"?Z:Y==null?{}:Y;const X=Z==null?null:typeof Z==="object"?null:Z;return new k71.ListSearchIndexesCursor(this,X,Y)}async createSearchIndex(Z){const[Y]=await this.createSearchIndexes([Z]);return Y}async createSearchIndexes(Z){return(0,l1.executeOperation)(this.client,new u71.CreateSearchIndexesOperation(this,Z))}async dropSearchIndex(Z){return(0,l1.executeOperation)(this.client,new d71.DropSearchIndexOperation(this,Z))}async updateSearchIndex(Z,Y){return(0,l1.executeOperation)(this.client,new c71.UpdateSearchIndexOperation(this,Z,Y))}}Fj.Collection=Hj});var OU=w((qj)=>{Object.defineProperty(qj,"__esModule",{value:!0});qj.ChangeStreamCursor=void 0;var jU=$Y(),Vj=c0(),i71=DW(),n71=c8(),EU=$1(),a71=R4();class CU extends a71.AbstractCursor{constructor(Z,Y,X=[],J={}){super(Z,Y,J);if(this.pipeline=X,this.options=J,this._resumeToken=null,this.startAtOperationTime=J.startAtOperationTime,J.startAfter)this.resumeToken=J.startAfter;else if(J.resumeAfter)this.resumeToken=J.resumeAfter}set resumeToken(Z){this._resumeToken=Z,this.emit(jU.ChangeStream.RESUME_TOKEN_CHANGED,Z)}get resumeToken(){return this._resumeToken}get resumeOptions(){const Z={...this.options};for(let Y of["resumeAfter","startAfter","startAtOperationTime"])delete Z[Y];if(this.resumeToken!=null)if(this.options.startAfter&&!this.hasReceived)Z.startAfter=this.resumeToken;else Z.resumeAfter=this.resumeToken;else if(this.startAtOperationTime!=null&&(0,EU.maxWireVersion)(this.server)>=7)Z.startAtOperationTime=this.startAtOperationTime;return Z}cacheResumeToken(Z){if(this.bufferedCount()===0&&this.postBatchResumeToken)this.resumeToken=this.postBatchResumeToken;else this.resumeToken=Z;this.hasReceived=!0}_processBatch(Z){const Y=Z.cursor;if(Y.postBatchResumeToken){if(this.postBatchResumeToken=Z.cursor.postBatchResumeToken,("firstBatch"in Z.cursor?Z.cursor.firstBatch:Z.cursor.nextBatch).length===0)this.resumeToken=Y.postBatchResumeToken}}clone(){return new CU(this.client,this.namespace,this.pipeline,{...this.cursorOptions})}async _initialize(Z){const Y=new i71.AggregateOperation(this.namespace,this.pipeline,{...this.cursorOptions,...this.options,session:Z}),X=await(0,n71.executeOperation)(Z.client,Y),J=Y.server;if(this.maxWireVersion=(0,EU.maxWireVersion)(J),this.startAtOperationTime==null&&this.resumeAfter==null&&this.startAfter==null&&this.maxWireVersion>=7)this.startAtOperationTime=X.operationTime;return this._processBatch(X),this.emit(Vj.INIT,X),this.emit(Vj.RESPONSE),{server:J,session:Z,response:X}}async getMore(Z){const Y=await super.getMore(Z);return this.maxWireVersion=(0,EU.maxWireVersion)(this.server),this._processBatch(Y),this.emit(jU.ChangeStream.MORE,Y),this.emit(jU.ChangeStream.RESPONSE),Y}}qj.ChangeStreamCursor=CU});var Mj=w((wj)=>{Object.defineProperty(wj,"__esModule",{value:!0});wj.ListCollectionsOperation=void 0;var s71=$1(),r71=A0(),iW=v1();class SU extends r71.CommandOperation{constructor(Z,Y,X){super(Z,X);if(this.options={...X},delete this.options.writeConcern,this.db=Z,this.filter=Y,this.nameOnly=!!this.options.nameOnly,this.authorizedCollections=!!this.options.authorizedCollections,typeof this.options.batchSize==="number")this.batchSize=this.options.batchSize}async execute(Z,Y){return super.executeCommand(Z,Y,this.generateCommand((0,s71.maxWireVersion)(Z)))}generateCommand(Z){const Y={listCollections:1,filter:this.filter,cursor:this.batchSize?{batchSize:this.batchSize}:{},nameOnly:this.nameOnly,authorizedCollections:this.authorizedCollections};if(Z>=9&&this.options.comment!==void 0)Y.comment=this.options.comment;return Y}}wj.ListCollectionsOperation=SU;(0,iW.defineAspects)(SU,[iW.Aspect.READ_OPERATION,iW.Aspect.RETRYABLE,iW.Aspect.CURSOR_CREATING])});var _U=w((Bj)=>{Object.defineProperty(Bj,"__esModule",{value:!0});Bj.ListCollectionsCursor=void 0;var t71=c8(),o71=Mj(),e71=R4();class kU extends e71.AbstractCursor{constructor(Z,Y,X){super(Z.client,Z.s.namespace,X);this.parent=Z,this.filter=Y,this.options=X}clone(){return new kU(this.parent,this.filter,{...this.options,...this.cursorOptions})}async _initialize(Z){const Y=new o71.ListCollectionsOperation(this.parent,this.filter,{...this.cursorOptions,...this.options,session:Z}),X=await(0,t71.executeOperation)(this.parent.client,Y);return{server:Y.server,session:Z,response:X}}}Bj.ListCollectionsCursor=kU});var Ij=w((Pj)=>{Object.defineProperty(Pj,"__esModule",{value:!0});Pj.RunCommandCursor=void 0;var WY=r(),Aj=c8(),Z41=gF(),Y41=nZ(),X41=$1(),J41=R4();class Dj extends J41.AbstractCursor{setComment(Z){return this.getMoreOptions.comment=Z,this}setMaxTimeMS(Z){return this.getMoreOptions.maxAwaitTimeMS=Z,this}setBatchSize(Z){return this.getMoreOptions.batchSize=Z,this}clone(){throw new WY.MongoAPIError("Clone not supported, create a new cursor with db.runCursorCommand")}withReadConcern(Z){throw new WY.MongoAPIError("RunCommandCursor does not support readConcern it must be attached to the command being run")}addCursorFlag(Z,Y){throw new WY.MongoAPIError("RunCommandCursor does not support cursor flags, they must be attached to the command being run")}maxTimeMS(Z){throw new WY.MongoAPIError("maxTimeMS must be configured on the command document directly, to configure getMore.maxTimeMS use cursor.setMaxTimeMS()")}batchSize(Z){throw new WY.MongoAPIError("batchSize must be configured on the command document directly, to configure getMore.batchSize use cursor.setBatchSize()")}constructor(Z,Y,X={}){super(Z.client,(0,X41.ns)(Z.namespace),X);this.getMoreOptions={},this.db=Z,this.command=Object.freeze({...Y})}async _initialize(Z){const Y=new Y41.RunCommandOperation(this.db,this.command,{...this.cursorOptions,session:Z,readPreference:this.cursorOptions.readPreference}),X=await(0,Aj.executeOperation)(this.client,Y);if(X.cursor==null)throw new WY.MongoUnexpectedServerResponseError("Expected server to respond with cursor");return{server:Y.server,session:Z,response:X}}async getMore(Z){const Y=new Z41.GetMoreOperation(this.namespace,this.id,this.server,{...this.cursorOptions,session:this.session,...this.getMoreOptions});return(0,Aj.executeOperation)(this.client,Y)}}Pj.RunCommandCursor=Dj});var Oj=w((Ej)=>{Object.defineProperty(Ej,"__esModule",{value:!0});Ej.CollectionsOperation=void 0;var $41=L9(),W41=v1();class jj extends W41.AbstractOperation{constructor(Z,Y){super(Y);this.options=Y,this.db=Z}async execute(Z,Y){const X=await this.db.listCollections({},{...this.options,nameOnly:!0,readPreference:this.readPreference,session:Y}).toArray(),J=[];for(let{name:$}of X)if(!$.includes("$"))J.push(new $41.Collection(this.db,$,this.db.s.options));return J}}Ej.CollectionsOperation=jj});var fj=w((_j)=>{Object.defineProperty(_j,"__esModule",{value:!0});_j.CreateCollectionOperation=void 0;var Sj=z9(),G41=L9(),K41=r(),Q41=A0(),z41=yJ(),kj=v1(),H41=new Set(["w","wtimeout","j","fsync","autoIndexId","pkFactory","raw","readPreference","session","readConcern","writeConcern","raw","fieldsAsRaw","useBigInt64","promoteLongs","promoteValues","promoteBuffers","bsonRegExp","serializeFunctions","ignoreUndefined","enableUtf8Validation"]),F41="Driver support of Queryable Encryption is incompatible with server. Upgrade server to use Queryable Encryption.";class nW extends Q41.CommandOperation{constructor(Z,Y,X={}){super(Z,X);this.options=X,this.db=Z,this.name=Y}async execute(Z,Y){const X=this.db,J=this.name,$=this.options,W=$.encryptedFields??X.client.options.autoEncryption?.encryptedFieldsMap?.[`${X.databaseName}.${J}`];if(W){if(!Z.loadBalanced&&Z.description.maxWireVersion<Sj.MIN_SUPPORTED_QE_WIRE_VERSION)throw new K41.MongoCompatibilityError(`${F41} The minimum server version required is ${Sj.MIN_SUPPORTED_QE_SERVER_VERSION}`);const K=W.escCollection??`enxcol_.${J}.esc`,Q=W.ecocCollection??`enxcol_.${J}.ecoc`;for(let z of[K,Q])await new nW(X,z,{clusteredIndex:{key:{_id:1},unique:!0}}).executeWithoutEncryptedFieldsCheck(Z,Y);if(!$.encryptedFields)this.options={...this.options,encryptedFields:W}}const G=await this.executeWithoutEncryptedFieldsCheck(Z,Y);if(W)await new z41.CreateIndexOperation(X,J,{__safeContent__:1},{}).execute(Z,Y);return G}async executeWithoutEncryptedFieldsCheck(Z,Y){const X=this.db,J=this.name,$=this.options,W={create:J};for(let G in $)if($[G]!=null&&typeof $[G]!=="function"&&!H41.has(G))W[G]=$[G];return await super.executeCommand(Z,Y,W),new G41.Collection(X,J,$)}}_j.CreateCollectionOperation=nW;(0,kj.defineAspects)(nW,[kj.Aspect.WRITE_OPERATION])});var hj=w((bj)=>{Object.defineProperty(bj,"__esModule",{value:!0});bj.ProfilingLevelOperation=void 0;var yj=r(),U41=A0();class gj extends U41.CommandOperation{constructor(Z,Y){super(Z,Y);this.options=Y}async execute(Z,Y){const X=await super.executeCommand(Z,Y,{profile:-1});if(X.ok===1){const J=X.was;if(J===0)return"off";if(J===1)return"slow_only";if(J===2)return"all";throw new yj.MongoUnexpectedServerResponseError(`Illegal profiling level value ${J}`)}else throw new yj.MongoUnexpectedServerResponseError("Error with profile command")}}bj.ProfilingLevelOperation=gj});var xU=w((uj)=>{Object.defineProperty(uj,"__esModule",{value:!0});uj.SetProfilingLevelOperation=uj.ProfilingLevel=void 0;var V41=r(),q41=$1(),L41=A0(),w41=new Set(["off","slow_only","all"]);uj.ProfilingLevel=Object.freeze({off:"off",slowOnly:"slow_only",all:"all"});class mj extends L41.CommandOperation{constructor(Z,Y,X){super(Z,X);switch(this.options=X,Y){case uj.ProfilingLevel.off:this.profile=0;break;case uj.ProfilingLevel.slowOnly:this.profile=1;break;case uj.ProfilingLevel.all:this.profile=2;break;default:this.profile=0;break}this.level=Y}async execute(Z,Y){const X=this.level;if(!w41.has(X))throw new V41.MongoInvalidArgumentError(`Profiling level must be one of "${(0,q41.enumToString)(uj.ProfilingLevel)}"`);return await super.executeCommand(Z,Y,{profile:this.profile}),X}}uj.SetProfilingLevelOperation=mj});var ij=w((lj)=>{Object.defineProperty(lj,"__esModule",{value:!0});lj.DbStatsOperation=void 0;var R41=A0(),cj=v1();class fU extends R41.CommandOperation{constructor(Z,Y){super(Z,Y);this.options=Y}async execute(Z,Y){const X={dbStats:!0};if(this.options.scale!=null)X.scale=this.options.scale;return super.executeCommand(Z,Y,X)}}lj.DbStatsOperation=fU;(0,cj.defineAspects)(fU,[cj.Aspect.READ_OPERATION])});var aW=w((oj)=>{Object.defineProperty(oj,"__esModule",{value:!0});oj.Db=void 0;var M41=zF(),nj=Z0(),B41=$Y(),N41=L9(),GY=c0(),A41=xJ(),D41=_U(),P41=Ij(),aj=r(),T41=Oj(),I41=fj(),sj=MU(),g6=c8(),rj=yJ(),j41=hj(),E41=KF(),C41=DU(),O41=nZ(),S41=xU(),k41=ij(),_41=_6(),tj=x0(),o0=$1(),x41=d8(),f41=["writeConcern","readPreference","readPreferenceTags","native_parser","forceServerObjectId","pkFactory","serializeFunctions","raw","authSource","ignoreUndefined","readConcern","retryMiliSeconds","numberOfRetries","useBigInt64","promoteBuffers","promoteLongs","bsonRegExp","enableUtf8Validation","promoteValues","compression","retryWrites"];class W5{constructor(Z,Y,X){if(X=X??{},X=(0,o0.filterOptions)(X,f41),typeof Y==="string"&&Y.includes("."))throw new aj.MongoInvalidArgumentError("Database names cannot contain the character '.'");this.s={options:X,readPreference:tj.ReadPreference.fromOptions(X),bsonOptions:(0,nj.resolveBSONOptions)(X,Z),pkFactory:X?.pkFactory??o0.DEFAULT_PK_FACTORY,readConcern:_41.ReadConcern.fromOptions(X),writeConcern:x41.WriteConcern.fromOptions(X),namespace:new o0.MongoDBNamespace(Y)},this.client=Z}get databaseName(){return this.s.namespace.db}get options(){return this.s.options}get secondaryOk(){return this.s.readPreference?.preference!=="primary"||!1}get readConcern(){return this.s.readConcern}get readPreference(){if(this.s.readPreference==null)return this.client.readPreference;return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern}get namespace(){return this.s.namespace.toString()}async createCollection(Z,Y){return(0,g6.executeOperation)(this.client,new I41.CreateCollectionOperation(this,Z,(0,o0.resolveOptions)(this,Y)))}async command(Z,Y){return(0,g6.executeOperation)(this.client,new O41.RunCommandOperation(this,Z,{...(0,nj.resolveBSONOptions)(Y),session:Y?.session,readPreference:Y?.readPreference}))}aggregate(Z=[],Y){return new A41.AggregationCursor(this.client,this.s.namespace,Z,(0,o0.resolveOptions)(this,Y))}admin(){return new M41.Admin(this)}collection(Z,Y={}){if(typeof Y==="function")throw new aj.MongoInvalidArgumentError("The callback form of this helper has been removed.");return new N41.Collection(this,Z,(0,o0.resolveOptions)(this,Y))}async stats(Z){return(0,g6.executeOperation)(this.client,new k41.DbStatsOperation(this,(0,o0.resolveOptions)(this,Z)))}listCollections(Z={},Y={}){return new D41.ListCollectionsCursor(this,Z,(0,o0.resolveOptions)(this,Y))}async renameCollection(Z,Y,X){return(0,g6.executeOperation)(this.client,new C41.RenameOperation(this.collection(Z),Y,{...X,new_collection:!0,readPreference:tj.ReadPreference.primary}))}async dropCollection(Z,Y){return(0,g6.executeOperation)(this.client,new sj.DropCollectionOperation(this,Z,(0,o0.resolveOptions)(this,Y)))}async dropDatabase(Z){return(0,g6.executeOperation)(this.client,new sj.DropDatabaseOperation(this,(0,o0.resolveOptions)(this,Z)))}async collections(Z){return(0,g6.executeOperation)(this.client,new T41.CollectionsOperation(this,(0,o0.resolveOptions)(this,Z)))}async createIndex(Z,Y,X){return(0,g6.executeOperation)(this.client,new rj.CreateIndexOperation(this,Z,Y,(0,o0.resolveOptions)(this,X)))}async removeUser(Z,Y){return(0,g6.executeOperation)(this.client,new E41.RemoveUserOperation(this,Z,(0,o0.resolveOptions)(this,Y)))}async setProfilingLevel(Z,Y){return(0,g6.executeOperation)(this.client,new S41.SetProfilingLevelOperation(this,Z,(0,o0.resolveOptions)(this,Y)))}async profilingLevel(Z){return(0,g6.executeOperation)(this.client,new j41.ProfilingLevelOperation(this,(0,o0.resolveOptions)(this,Z)))}async indexInformation(Z,Y){return(0,g6.executeOperation)(this.client,new rj.IndexInformationOperation(this,Z,(0,o0.resolveOptions)(this,Y)))}watch(Z=[],Y={}){if(!Array.isArray(Z))Y=Z,Z=[];return new B41.ChangeStream(this,Z,(0,o0.resolveOptions)(this,Y))}runCursorCommand(Z,Y){return new P41.RunCommandCursor(this,Z,Y)}}W5.SYSTEM_NAMESPACE_COLLECTION=GY.SYSTEM_NAMESPACE_COLLECTION;W5.SYSTEM_INDEX_COLLECTION=GY.SYSTEM_INDEX_COLLECTION;W5.SYSTEM_PROFILE_COLLECTION=GY.SYSTEM_PROFILE_COLLECTION;W5.SYSTEM_USER_COLLECTION=GY.SYSTEM_USER_COLLECTION;W5.SYSTEM_COMMAND_COLLECTION=GY.SYSTEM_COMMAND_COLLECTION;W5.SYSTEM_JS_COLLECTION=GY.SYSTEM_JS_COLLECTION;oj.Db=W5});var YE=w((ZE)=>{var vJ=function(Z){if(Z===4)return"ipv4";if(Z===6)return"ipv6";return Z?Z.toLowerCase():"ipv4"},W1=ZE,{Buffer:sW}=import.meta.require("buffer"),y41=import.meta.require("os");W1.toBuffer=function(Z,Y,X){X=~~X;let J;if(this.isV4Format(Z))J=Y||sW.alloc(X+4),Z.split(/\./g).map(($)=>{J[X++]=parseInt($,10)&255});else if(this.isV6Format(Z)){const $=Z.split(":",8);let W;for(W=0;W<$.length;W++){const G=this.isV4Format($[W]);let K;if(G)K=this.toBuffer($[W]),$[W]=K.slice(0,2).toString("hex");if(K&&++W<8)$.splice(W,0,K.slice(2,4).toString("hex"))}if($[0]==="")while($.length<8)$.unshift("0");else if($[$.length-1]==="")while($.length<8)$.push("0");else if($.length<8){for(W=0;W<$.length&&$[W]!=="";W++);const G=[W,1];for(W=9-$.length;W>0;W--)G.push("0");$.splice(...G)}J=Y||sW.alloc(X+16);for(W=0;W<$.length;W++){const G=parseInt($[W],16);J[X++]=G>>8&255,J[X++]=G&255}}if(!J)throw Error(`Invalid ip address: ${Z}`);return J};W1.toString=function(Z,Y,X){Y=~~Y,X=X||Z.length-Y;let J=[];if(X===4){for(let $=0;$<X;$++)J.push(Z[Y+$]);J=J.join(".")}else if(X===16){for(let $=0;$<X;$+=2)J.push(Z.readUInt16BE(Y+$).toString(16));J=J.join(":"),J=J.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),J=J.replace(/:{3,4}/,"::")}return J};var g41=/^(\d{1,3}\.){3,3}\d{1,3}$/,b41=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;W1.isV4Format=function(Z){return g41.test(Z)};W1.isV6Format=function(Z){return b41.test(Z)};W1.fromPrefixLen=function(Z,Y){if(Z>32)Y="ipv6";else Y=vJ(Y);let X=4;if(Y==="ipv6")X=16;const J=sW.alloc(X);for(let $=0,W=J.length;$<W;++$){let G=8;if(Z<8)G=Z;Z-=G,J[$]=~(255>>G)&255}return W1.toString(J)};W1.mask=function(Z,Y){Z=W1.toBuffer(Z),Y=W1.toBuffer(Y);const X=sW.alloc(Math.max(Z.length,Y.length));let J;if(Z.length===Y.length)for(J=0;J<Z.length;J++)X[J]=Z[J]&Y[J];else if(Y.length===4)for(J=0;J<Y.length;J++)X[J]=Z[Z.length-4+J]&Y[J];else{for(J=0;J<X.length-6;J++)X[J]=0;X[10]=255,X[11]=255;for(J=0;J<Z.length;J++)X[J+12]=Z[J]&Y[J+12];J+=12}for(;J<X.length;J++)X[J]=0;return W1.toString(X)};W1.cidr=function(Z){const Y=Z.split("/"),X=Y[0];if(Y.length!==2)throw new Error(`invalid CIDR subnet: ${X}`);const J=W1.fromPrefixLen(parseInt(Y[1],10));return W1.mask(X,J)};W1.subnet=function(Z,Y){const X=W1.toLong(W1.mask(Z,Y)),J=W1.toBuffer(Y);let $=0;for(let G=0;G<J.length;G++)if(J[G]===255)$+=8;else{let K=J[G]&255;while(K)K=K<<1&255,$++}const W=2**(32-$);return{networkAddress:W1.fromLong(X),firstAddress:W<=2?W1.fromLong(X):W1.fromLong(X+1),lastAddress:W<=2?W1.fromLong(X+W-1):W1.fromLong(X+W-2),broadcastAddress:W1.fromLong(X+W-1),subnetMask:Y,subnetMaskLength:$,numHosts:W<=2?W:W-2,length:W,contains(G){return X===W1.toLong(W1.mask(G,Y))}}};W1.cidrSubnet=function(Z){const Y=Z.split("/"),X=Y[0];if(Y.length!==2)throw new Error(`invalid CIDR subnet: ${X}`);const J=W1.fromPrefixLen(parseInt(Y[1],10));return W1.subnet(X,J)};W1.not=function(Z){const Y=W1.toBuffer(Z);for(let X=0;X<Y.length;X++)Y[X]=255^Y[X];return W1.toString(Y)};W1.or=function(Z,Y){if(Z=W1.toBuffer(Z),Y=W1.toBuffer(Y),Z.length===Y.length){for(let W=0;W<Z.length;++W)Z[W]|=Y[W];return W1.toString(Z)}let X=Z,J=Y;if(Y.length>Z.length)X=Y,J=Z;const $=X.length-J.length;for(let W=$;W<X.length;++W)X[W]|=J[W-$];return W1.toString(X)};W1.isEqual=function(Z,Y){if(Z=W1.toBuffer(Z),Y=W1.toBuffer(Y),Z.length===Y.length){for(let J=0;J<Z.length;J++)if(Z[J]!==Y[J])return!1;return!0}if(Y.length===4){const J=Y;Y=Z,Z=J}for(let J=0;J<10;J++)if(Y[J]!==0)return!1;const X=Y.readUInt16BE(10);if(X!==0&&X!==65535)return!1;for(let J=0;J<4;J++)if(Z[J]!==Y[J+12])return!1;return!0};W1.isPrivate=function(Z){return/^(::f{4}:)?10\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(Z)||/^(::f{4}:)?192\.168\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(Z)||/^(::f{4}:)?172\.(1[6-9]|2\d|30|31)\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(Z)||/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(Z)||/^(::f{4}:)?169\.254\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(Z)||/^f[cd][0-9a-f]{2}:/i.test(Z)||/^fe80:/i.test(Z)||/^::1$/.test(Z)||/^::$/.test(Z)};W1.isPublic=function(Z){return!W1.isPrivate(Z)};W1.isLoopback=function(Z){return/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})/.test(Z)||/^fe80::1$/.test(Z)||/^::1$/.test(Z)||/^::$/.test(Z)};W1.loopback=function(Z){if(Z=vJ(Z),Z!=="ipv4"&&Z!=="ipv6")throw new Error("family must be ipv4 or ipv6");return Z==="ipv4"?"127.0.0.1":"fe80::1"};W1.address=function(Z,Y){const X=y41.networkInterfaces();if(Y=vJ(Y),Z&&Z!=="private"&&Z!=="public"){const $=X[Z].filter((W)=>{return vJ(W.family)===Y});if($.length===0)return;return $[0].address}const J=Object.keys(X).map(($)=>{const W=X[$].filter((G)=>{if(G.family=vJ(G.family),G.family!==Y||W1.isLoopback(G.address))return!1;if(!Z)return!0;return Z==="public"?W1.isPrivate(G.address):W1.isPublic(G.address)});return W.length?W[0].address:void 0}).filter(Boolean);return!J.length?W1.loopback(Y):J[0]};W1.toLong=function(Z){let Y=0;return Z.split(".").forEach((X)=>{Y<<=8,Y+=parseInt(X)}),Y>>>0};W1.fromLong=function(Z){return`${Z>>>24}.${Z>>16&255}.${Z>>8&255}.${Z&255}`}});var GE=w((WE)=>{var v41=function(Z){if(!XE.Buffer.isEncoding(Z))throw new Error(R9.INVALID_ENCODING)},JE=function(Z){return typeof Z==="number"&&isFinite(Z)&&d41(Z)},$E=function(Z,Y){if(typeof Z==="number"){if(!JE(Z)||Z<0)throw new Error(Y?R9.INVALID_OFFSET:R9.INVALID_LENGTH)}else throw new Error(Y?R9.INVALID_OFFSET_NON_NUMBER:R9.INVALID_LENGTH_NON_NUMBER)},h41=function(Z){$E(Z,!1)},m41=function(Z){$E(Z,!0)},u41=function(Z,Y){if(Z<0||Z>Y.length)throw new Error(R9.INVALID_TARGET_OFFSET)},d41=function(Z){return typeof Z==="number"&&isFinite(Z)&&Math.floor(Z)===Z},c41=function(Z){if(typeof BigInt==="undefined")throw new Error("Platform does not support JS BigInt type.");if(typeof XE.Buffer.prototype[Z]==="undefined")throw new Error(`Platform does not support Buffer.prototype.${Z}.`)};Object.defineProperty(WE,"__esModule",{value:!0});var XE=import.meta.require("buffer"),R9={INVALID_ENCODING:"Invalid encoding provided. Please specify a valid encoding the internal Node.js Buffer supports.",INVALID_SMARTBUFFER_SIZE:"Invalid size provided. Size must be a valid integer greater than zero.",INVALID_SMARTBUFFER_BUFFER:"Invalid Buffer provided in SmartBufferOptions.",INVALID_SMARTBUFFER_OBJECT:"Invalid SmartBufferOptions object supplied to SmartBuffer constructor or factory methods.",INVALID_OFFSET:"An invalid offset value was provided.",INVALID_OFFSET_NON_NUMBER:"An invalid offset value was provided. A numeric value is required.",INVALID_LENGTH:"An invalid length value was provided.",INVALID_LENGTH_NON_NUMBER:"An invalid length value was provived. A numeric value is required.",INVALID_TARGET_OFFSET:"Target offset is beyond the bounds of the internal SmartBuffer data.",INVALID_TARGET_LENGTH:"Specified length value moves cursor beyong the bounds of the internal SmartBuffer data.",INVALID_READ_BEYOND_BOUNDS:"Attempted to read beyond the bounds of the managed data.",INVALID_WRITE_BEYOND_BOUNDS:"Attempted to write beyond the bounds of the managed data."};WE.ERRORS=R9;WE.checkEncoding=v41;WE.isFiniteInteger=JE;WE.checkLengthValue=h41;WE.checkOffsetValue=m41;WE.checkTargetOffset=u41;WE.bigIntAndBufferInt64Check=c41});var zE=w((QE)=>{Object.defineProperty(QE,"__esModule",{value:!0});var R1=GE(),KE=4096,t41="utf8";class yU{constructor(Z){if(this.length=0,this._encoding=t41,this._writeOffset=0,this._readOffset=0,yU.isSmartBufferOptions(Z)){if(Z.encoding)R1.checkEncoding(Z.encoding),this._encoding=Z.encoding;if(Z.size)if(R1.isFiniteInteger(Z.size)&&Z.size>0)this._buff=Buffer.allocUnsafe(Z.size);else throw new Error(R1.ERRORS.INVALID_SMARTBUFFER_SIZE);else if(Z.buff)if(Buffer.isBuffer(Z.buff))this._buff=Z.buff,this.length=Z.buff.length;else throw new Error(R1.ERRORS.INVALID_SMARTBUFFER_BUFFER);else this._buff=Buffer.allocUnsafe(KE)}else{if(typeof Z!=="undefined")throw new Error(R1.ERRORS.INVALID_SMARTBUFFER_OBJECT);this._buff=Buffer.allocUnsafe(KE)}}static fromSize(Z,Y){return new this({size:Z,encoding:Y})}static fromBuffer(Z,Y){return new this({buff:Z,encoding:Y})}static fromOptions(Z){return new this(Z)}static isSmartBufferOptions(Z){const Y=Z;return Y&&(Y.encoding!==void 0||Y.size!==void 0||Y.buff!==void 0)}readInt8(Z){return this._readNumberValue(Buffer.prototype.readInt8,1,Z)}readInt16BE(Z){return this._readNumberValue(Buffer.prototype.readInt16BE,2,Z)}readInt16LE(Z){return this._readNumberValue(Buffer.prototype.readInt16LE,2,Z)}readInt32BE(Z){return this._readNumberValue(Buffer.prototype.readInt32BE,4,Z)}readInt32LE(Z){return this._readNumberValue(Buffer.prototype.readInt32LE,4,Z)}readBigInt64BE(Z){return R1.bigIntAndBufferInt64Check("readBigInt64BE"),this._readNumberValue(Buffer.prototype.readBigInt64BE,8,Z)}readBigInt64LE(Z){return R1.bigIntAndBufferInt64Check("readBigInt64LE"),this._readNumberValue(Buffer.prototype.readBigInt64LE,8,Z)}writeInt8(Z,Y){return this._writeNumberValue(Buffer.prototype.writeInt8,1,Z,Y),this}insertInt8(Z,Y){return this._insertNumberValue(Buffer.prototype.writeInt8,1,Z,Y)}writeInt16BE(Z,Y){return this._writeNumberValue(Buffer.prototype.writeInt16BE,2,Z,Y)}insertInt16BE(Z,Y){return this._insertNumberValue(Buffer.prototype.writeInt16BE,2,Z,Y)}writeInt16LE(Z,Y){return this._writeNumberValue(Buffer.prototype.writeInt16LE,2,Z,Y)}insertInt16LE(Z,Y){return this._insertNumberValue(Buffer.prototype.writeInt16LE,2,Z,Y)}writeInt32BE(Z,Y){return this._writeNumberValue(Buffer.prototype.writeInt32BE,4,Z,Y)}insertInt32BE(Z,Y){return this._insertNumberValue(Buffer.prototype.writeInt32BE,4,Z,Y)}writeInt32LE(Z,Y){return this._writeNumberValue(Buffer.prototype.writeInt32LE,4,Z,Y)}insertInt32LE(Z,Y){return this._insertNumberValue(Buffer.prototype.writeInt32LE,4,Z,Y)}writeBigInt64BE(Z,Y){return R1.bigIntAndBufferInt64Check("writeBigInt64BE"),this._writeNumberValue(Buffer.prototype.writeBigInt64BE,8,Z,Y)}insertBigInt64BE(Z,Y){return R1.bigIntAndBufferInt64Check("writeBigInt64BE"),this._insertNumberValue(Buffer.prototype.writeBigInt64BE,8,Z,Y)}writeBigInt64LE(Z,Y){return R1.bigIntAndBufferInt64Check("writeBigInt64LE"),this._writeNumberValue(Buffer.prototype.writeBigInt64LE,8,Z,Y)}insertBigInt64LE(Z,Y){return R1.bigIntAndBufferInt64Check("writeBigInt64LE"),this._insertNumberValue(Buffer.prototype.writeBigInt64LE,8,Z,Y)}readUInt8(Z){return this._readNumberValue(Buffer.prototype.readUInt8,1,Z)}readUInt16BE(Z){return this._readNumberValue(Buffer.prototype.readUInt16BE,2,Z)}readUInt16LE(Z){return this._readNumberValue(Buffer.prototype.readUInt16LE,2,Z)}readUInt32BE(Z){return this._readNumberValue(Buffer.prototype.readUInt32BE,4,Z)}readUInt32LE(Z){return this._readNumberValue(Buffer.prototype.readUInt32LE,4,Z)}readBigUInt64BE(Z){return R1.bigIntAndBufferInt64Check("readBigUInt64BE"),this._readNumberValue(Buffer.prototype.readBigUInt64BE,8,Z)}readBigUInt64LE(Z){return R1.bigIntAndBufferInt64Check("readBigUInt64LE"),this._readNumberValue(Buffer.prototype.readBigUInt64LE,8,Z)}writeUInt8(Z,Y){return this._writeNumberValue(Buffer.prototype.writeUInt8,1,Z,Y)}insertUInt8(Z,Y){return this._insertNumberValue(Buffer.prototype.writeUInt8,1,Z,Y)}writeUInt16BE(Z,Y){return this._writeNumberValue(Buffer.prototype.writeUInt16BE,2,Z,Y)}insertUInt16BE(Z,Y){return this._insertNumberValue(Buffer.prototype.writeUInt16BE,2,Z,Y)}writeUInt16LE(Z,Y){return this._writeNumberValue(Buffer.prototype.writeUInt16LE,2,Z,Y)}insertUInt16LE(Z,Y){return this._insertNumberValue(Buffer.prototype.writeUInt16LE,2,Z,Y)}writeUInt32BE(Z,Y){return this._writeNumberValue(Buffer.prototype.writeUInt32BE,4,Z,Y)}insertUInt32BE(Z,Y){return this._insertNumberValue(Buffer.prototype.writeUInt32BE,4,Z,Y)}writeUInt32LE(Z,Y){return this._writeNumberValue(Buffer.prototype.writeUInt32LE,4,Z,Y)}insertUInt32LE(Z,Y){return this._insertNumberValue(Buffer.prototype.writeUInt32LE,4,Z,Y)}writeBigUInt64BE(Z,Y){return R1.bigIntAndBufferInt64Check("writeBigUInt64BE"),this._writeNumberValue(Buffer.prototype.writeBigUInt64BE,8,Z,Y)}insertBigUInt64BE(Z,Y){return R1.bigIntAndBufferInt64Check("writeBigUInt64BE"),this._insertNumberValue(Buffer.prototype.writeBigUInt64BE,8,Z,Y)}writeBigUInt64LE(Z,Y){return R1.bigIntAndBufferInt64Check("writeBigUInt64LE"),this._writeNumberValue(Buffer.prototype.writeBigUInt64LE,8,Z,Y)}insertBigUInt64LE(Z,Y){return R1.bigIntAndBufferInt64Check("writeBigUInt64LE"),this._insertNumberValue(Buffer.prototype.writeBigUInt64LE,8,Z,Y)}readFloatBE(Z){return this._readNumberValue(Buffer.prototype.readFloatBE,4,Z)}readFloatLE(Z){return this._readNumberValue(Buffer.prototype.readFloatLE,4,Z)}writeFloatBE(Z,Y){return this._writeNumberValue(Buffer.prototype.writeFloatBE,4,Z,Y)}insertFloatBE(Z,Y){return this._insertNumberValue(Buffer.prototype.writeFloatBE,4,Z,Y)}writeFloatLE(Z,Y){return this._writeNumberValue(Buffer.prototype.writeFloatLE,4,Z,Y)}insertFloatLE(Z,Y){return this._insertNumberValue(Buffer.prototype.writeFloatLE,4,Z,Y)}readDoubleBE(Z){return this._readNumberValue(Buffer.prototype.readDoubleBE,8,Z)}readDoubleLE(Z){return this._readNumberValue(Buffer.prototype.readDoubleLE,8,Z)}writeDoubleBE(Z,Y){return this._writeNumberValue(Buffer.prototype.writeDoubleBE,8,Z,Y)}insertDoubleBE(Z,Y){return this._insertNumberValue(Buffer.prototype.writeDoubleBE,8,Z,Y)}writeDoubleLE(Z,Y){return this._writeNumberValue(Buffer.prototype.writeDoubleLE,8,Z,Y)}insertDoubleLE(Z,Y){return this._insertNumberValue(Buffer.prototype.writeDoubleLE,8,Z,Y)}readString(Z,Y){let X;if(typeof Z==="number")R1.checkLengthValue(Z),X=Math.min(Z,this.length-this._readOffset);else Y=Z,X=this.length-this._readOffset;if(typeof Y!=="undefined")R1.checkEncoding(Y);const J=this._buff.slice(this._readOffset,this._readOffset+X).toString(Y||this._encoding);return this._readOffset+=X,J}insertString(Z,Y,X){return R1.checkOffsetValue(Y),this._handleString(Z,!0,Y,X)}writeString(Z,Y,X){return this._handleString(Z,!1,Y,X)}readStringNT(Z){if(typeof Z!=="undefined")R1.checkEncoding(Z);let Y=this.length;for(let J=this._readOffset;J<this.length;J++)if(this._buff[J]===0){Y=J;break}const X=this._buff.slice(this._readOffset,Y);return this._readOffset=Y+1,X.toString(Z||this._encoding)}insertStringNT(Z,Y,X){return R1.checkOffsetValue(Y),this.insertString(Z,Y,X),this.insertUInt8(0,Y+Z.length),this}writeStringNT(Z,Y,X){return this.writeString(Z,Y,X),this.writeUInt8(0,typeof Y==="number"?Y+Z.length:this.writeOffset),this}readBuffer(Z){if(typeof Z!=="undefined")R1.checkLengthValue(Z);const Y=typeof Z==="number"?Z:this.length,X=Math.min(this.length,this._readOffset+Y),J=this._buff.slice(this._readOffset,X);return this._readOffset=X,J}insertBuffer(Z,Y){return R1.checkOffsetValue(Y),this._handleBuffer(Z,!0,Y)}writeBuffer(Z,Y){return this._handleBuffer(Z,!1,Y)}readBufferNT(){let Z=this.length;for(let X=this._readOffset;X<this.length;X++)if(this._buff[X]===0){Z=X;break}const Y=this._buff.slice(this._readOffset,Z);return this._readOffset=Z+1,Y}insertBufferNT(Z,Y){return R1.checkOffsetValue(Y),this.insertBuffer(Z,Y),this.insertUInt8(0,Y+Z.length),this}writeBufferNT(Z,Y){if(typeof Y!=="undefined")R1.checkOffsetValue(Y);return this.writeBuffer(Z,Y),this.writeUInt8(0,typeof Y==="number"?Y+Z.length:this._writeOffset),this}clear(){return this._writeOffset=0,this._readOffset=0,this.length=0,this}remaining(){return this.length-this._readOffset}get readOffset(){return this._readOffset}set readOffset(Z){R1.checkOffsetValue(Z),R1.checkTargetOffset(Z,this),this._readOffset=Z}get writeOffset(){return this._writeOffset}set writeOffset(Z){R1.checkOffsetValue(Z),R1.checkTargetOffset(Z,this),this._writeOffset=Z}get encoding(){return this._encoding}set encoding(Z){R1.checkEncoding(Z),this._encoding=Z}get internalBuffer(){return this._buff}toBuffer(){return this._buff.slice(0,this.length)}toString(Z){const Y=typeof Z==="string"?Z:this._encoding;return R1.checkEncoding(Y),this._buff.toString(Y,0,this.length)}destroy(){return this.clear(),this}_handleString(Z,Y,X,J){let $=this._writeOffset,W=this._encoding;if(typeof X==="number")$=X;else if(typeof X==="string")R1.checkEncoding(X),W=X;if(typeof J==="string")R1.checkEncoding(J),W=J;const G=Buffer.byteLength(Z,W);if(Y)this.ensureInsertable(G,$);else this._ensureWriteable(G,$);if(this._buff.write(Z,$,G,W),Y)this._writeOffset+=G;else if(typeof X==="number")this._writeOffset=Math.max(this._writeOffset,$+G);else this._writeOffset+=G;return this}_handleBuffer(Z,Y,X){const J=typeof X==="number"?X:this._writeOffset;if(Y)this.ensureInsertable(Z.length,J);else this._ensureWriteable(Z.length,J);if(Z.copy(this._buff,J),Y)this._writeOffset+=Z.length;else if(typeof X==="number")this._writeOffset=Math.max(this._writeOffset,J+Z.length);else this._writeOffset+=Z.length;return this}ensureReadable(Z,Y){let X=this._readOffset;if(typeof Y!=="undefined")R1.checkOffsetValue(Y),X=Y;if(X<0||X+Z>this.length)throw new Error(R1.ERRORS.INVALID_READ_BEYOND_BOUNDS)}ensureInsertable(Z,Y){if(R1.checkOffsetValue(Y),this._ensureCapacity(this.length+Z),Y<this.length)this._buff.copy(this._buff,Y+Z,Y,this._buff.length);if(Y+Z>this.length)this.length=Y+Z;else this.length+=Z}_ensureWriteable(Z,Y){const X=typeof Y==="number"?Y:this._writeOffset;if(this._ensureCapacity(X+Z),X+Z>this.length)this.length=X+Z}_ensureCapacity(Z){const Y=this._buff.length;if(Z>Y){let X=this._buff,J=Y*3/2+1;if(J<Z)J=Z;this._buff=Buffer.allocUnsafe(J),X.copy(this._buff,0,0,Y)}}_readNumberValue(Z,Y,X){this.ensureReadable(Y,X);const J=Z.call(this._buff,typeof X==="number"?X:this._readOffset);if(typeof X==="undefined")this._readOffset+=Y;return J}_insertNumberValue(Z,Y,X,J){return R1.checkOffsetValue(J),this.ensureInsertable(Y,J),Z.call(this._buff,X,J),this._writeOffset+=Y,this}_writeNumberValue(Z,Y,X,J){if(typeof J==="number"){if(J<0)throw new Error(R1.ERRORS.INVALID_WRITE_BEYOND_BOUNDS);R1.checkOffsetValue(J)}const $=typeof J==="number"?J:this._writeOffset;if(this._ensureWriteable(Y,$),Z.call(this._buff,X,$),typeof J==="number")this._writeOffset=Math.max(this._writeOffset,$+Y);else this._writeOffset+=Y;return this}}QE.SmartBuffer=yU});var dU=w((HE)=>{Object.defineProperty(HE,"__esModule",{value:!0});HE.SOCKS5_NO_ACCEPTABLE_AUTH=HE.SOCKS5_CUSTOM_AUTH_END=HE.SOCKS5_CUSTOM_AUTH_START=HE.SOCKS_INCOMING_PACKET_SIZES=HE.SocksClientState=HE.Socks5Response=HE.Socks5HostType=HE.Socks5Auth=HE.Socks4Response=HE.SocksCommand=HE.ERRORS=HE.DEFAULT_TIMEOUT=void 0;var e41=30000;HE.DEFAULT_TIMEOUT=e41;var Z51={InvalidSocksCommand:"An invalid SOCKS command was provided. Valid options are connect, bind, and associate.",InvalidSocksCommandForOperation:"An invalid SOCKS command was provided. Only a subset of commands are supported for this operation.",InvalidSocksCommandChain:"An invalid SOCKS command was provided. Chaining currently only supports the connect command.",InvalidSocksClientOptionsDestination:"An invalid destination host was provided.",InvalidSocksClientOptionsExistingSocket:"An invalid existing socket was provided. This should be an instance of stream.Duplex.",InvalidSocksClientOptionsProxy:"Invalid SOCKS proxy details were provided.",InvalidSocksClientOptionsTimeout:"An invalid timeout value was provided. Please enter a value above 0 (in ms).",InvalidSocksClientOptionsProxiesLength:"At least two socks proxies must be provided for chaining.",InvalidSocksClientOptionsCustomAuthRange:"Custom auth must be a value between 0x80 and 0xFE.",InvalidSocksClientOptionsCustomAuthOptions:"When a custom_auth_method is provided, custom_auth_request_handler, custom_auth_response_size, and custom_auth_response_handler must also be provided and valid.",NegotiationError:"Negotiation error",SocketClosed:"Socket closed",ProxyConnectionTimedOut:"Proxy connection timed out",InternalError:"SocksClient internal error (this should not happen)",InvalidSocks4HandshakeResponse:"Received invalid Socks4 handshake response",Socks4ProxyRejectedConnection:"Socks4 Proxy rejected connection",InvalidSocks4IncomingConnectionResponse:"Socks4 invalid incoming connection response",Socks4ProxyRejectedIncomingBoundConnection:"Socks4 Proxy rejected incoming bound connection",InvalidSocks5InitialHandshakeResponse:"Received invalid Socks5 initial handshake response",InvalidSocks5IntiailHandshakeSocksVersion:"Received invalid Socks5 initial handshake (invalid socks version)",InvalidSocks5InitialHandshakeNoAcceptedAuthType:"Received invalid Socks5 initial handshake (no accepted authentication type)",InvalidSocks5InitialHandshakeUnknownAuthType:"Received invalid Socks5 initial handshake (unknown authentication type)",Socks5AuthenticationFailed:"Socks5 Authentication failed",InvalidSocks5FinalHandshake:"Received invalid Socks5 final handshake response",InvalidSocks5FinalHandshakeRejected:"Socks5 proxy rejected connection",InvalidSocks5IncomingConnectionResponse:"Received invalid Socks5 incoming connection response",Socks5ProxyRejectedIncomingBoundConnection:"Socks5 Proxy rejected incoming bound connection"};HE.ERRORS=Z51;var Y51={Socks5InitialHandshakeResponse:2,Socks5UserPassAuthenticationResponse:2,Socks5ResponseHeader:5,Socks5ResponseIPv4:10,Socks5ResponseIPv6:22,Socks5ResponseHostname:(Z)=>Z+7,Socks4Response:8};HE.SOCKS_INCOMING_PACKET_SIZES=Y51;var gU;(function(Z){Z[Z.connect=1]="connect",Z[Z.bind=2]="bind",Z[Z.associate=3]="associate"})(gU||(gU={}));HE.SocksCommand=gU;var bU;(function(Z){Z[Z.Granted=90]="Granted",Z[Z.Failed=91]="Failed",Z[Z.Rejected=92]="Rejected",Z[Z.RejectedIdent=93]="RejectedIdent"})(bU||(bU={}));HE.Socks4Response=bU;var vU;(function(Z){Z[Z.NoAuth=0]="NoAuth",Z[Z.GSSApi=1]="GSSApi",Z[Z.UserPass=2]="UserPass"})(vU||(vU={}));HE.Socks5Auth=vU;var X51=128;HE.SOCKS5_CUSTOM_AUTH_START=X51;var J51=254;HE.SOCKS5_CUSTOM_AUTH_END=J51;var $51=255;HE.SOCKS5_NO_ACCEPTABLE_AUTH=$51;var hU;(function(Z){Z[Z.Granted=0]="Granted",Z[Z.Failure=1]="Failure",Z[Z.NotAllowed=2]="NotAllowed",Z[Z.NetworkUnreachable=3]="NetworkUnreachable",Z[Z.HostUnreachable=4]="HostUnreachable",Z[Z.ConnectionRefused=5]="ConnectionRefused",Z[Z.TTLExpired=6]="TTLExpired",Z[Z.CommandNotSupported=7]="CommandNotSupported",Z[Z.AddressNotSupported=8]="AddressNotSupported"})(hU||(hU={}));HE.Socks5Response=hU;var mU;(function(Z){Z[Z.IPv4=1]="IPv4",Z[Z.Hostname=3]="Hostname",Z[Z.IPv6=4]="IPv6"})(mU||(mU={}));HE.Socks5HostType=mU;var uU;(function(Z){Z[Z.Created=0]="Created",Z[Z.Connecting=1]="Connecting",Z[Z.Connected=2]="Connected",Z[Z.SentInitialHandshake=3]="SentInitialHandshake",Z[Z.ReceivedInitialHandshakeResponse=4]="ReceivedInitialHandshakeResponse",Z[Z.SentAuthentication=5]="SentAuthentication",Z[Z.ReceivedAuthenticationResponse=6]="ReceivedAuthenticationResponse",Z[Z.SentFinalHandshake=7]="SentFinalHandshake",Z[Z.ReceivedFinalResponse=8]="ReceivedFinalResponse",Z[Z.BoundWaitingForConnection=9]="BoundWaitingForConnection",Z[Z.Established=10]="Established",Z[Z.Disconnected=11]="Disconnected",Z[Z.Error=99]="Error"})(uU||(uU={}));HE.SocksClientState=uU});var cU=w((VE)=>{var w51=function(Z){for(let Y=Z.length-1;Y>0;Y--){const X=Math.floor(Math.random()*(Y+1));[Z[Y],Z[X]]=[Z[X],Z[Y]]}};Object.defineProperty(VE,"__esModule",{value:!0});VE.shuffleArray=VE.SocksClientError=void 0;class UE extends Error{constructor(Z,Y){super(Z);this.options=Y}}VE.SocksClientError=UE;VE.shuffleArray=w51});var AE=w((BE)=>{var B51=function(Z,Y=["connect","bind","associate"]){if(!p0.SocksCommand[Z.command])throw new T8.SocksClientError(p0.ERRORS.InvalidSocksCommand,Z);if(Y.indexOf(Z.command)===-1)throw new T8.SocksClientError(p0.ERRORS.InvalidSocksCommandForOperation,Z);if(!wE(Z.destination))throw new T8.SocksClientError(p0.ERRORS.InvalidSocksClientOptionsDestination,Z);if(!RE(Z.proxy))throw new T8.SocksClientError(p0.ERRORS.InvalidSocksClientOptionsProxy,Z);if(LE(Z.proxy,Z),Z.timeout&&!ME(Z.timeout))throw new T8.SocksClientError(p0.ERRORS.InvalidSocksClientOptionsTimeout,Z);if(Z.existing_socket&&!(Z.existing_socket instanceof M51.Duplex))throw new T8.SocksClientError(p0.ERRORS.InvalidSocksClientOptionsExistingSocket,Z)},N51=function(Z){if(Z.command!=="connect")throw new T8.SocksClientError(p0.ERRORS.InvalidSocksCommandChain,Z);if(!wE(Z.destination))throw new T8.SocksClientError(p0.ERRORS.InvalidSocksClientOptionsDestination,Z);if(!(Z.proxies&&Array.isArray(Z.proxies)&&Z.proxies.length>=2))throw new T8.SocksClientError(p0.ERRORS.InvalidSocksClientOptionsProxiesLength,Z);if(Z.proxies.forEach((Y)=>{if(!RE(Y))throw new T8.SocksClientError(p0.ERRORS.InvalidSocksClientOptionsProxy,Z);LE(Y,Z)}),Z.timeout&&!ME(Z.timeout))throw new T8.SocksClientError(p0.ERRORS.InvalidSocksClientOptionsTimeout,Z)},LE=function(Z,Y){if(Z.custom_auth_method!==void 0){if(Z.custom_auth_method<p0.SOCKS5_CUSTOM_AUTH_START||Z.custom_auth_method>p0.SOCKS5_CUSTOM_AUTH_END)throw new T8.SocksClientError(p0.ERRORS.InvalidSocksClientOptionsCustomAuthRange,Y);if(Z.custom_auth_request_handler===void 0||typeof Z.custom_auth_request_handler!=="function")throw new T8.SocksClientError(p0.ERRORS.InvalidSocksClientOptionsCustomAuthOptions,Y);if(Z.custom_auth_response_size===void 0)throw new T8.SocksClientError(p0.ERRORS.InvalidSocksClientOptionsCustomAuthOptions,Y);if(Z.custom_auth_response_handler===void 0||typeof Z.custom_auth_response_handler!=="function")throw new T8.SocksClientError(p0.ERRORS.InvalidSocksClientOptionsCustomAuthOptions,Y)}},wE=function(Z){return Z&&typeof Z.host==="string"&&typeof Z.port==="number"&&Z.port>=0&&Z.port<=65535},RE=function(Z){return Z&&(typeof Z.host==="string"||typeof Z.ipaddress==="string")&&typeof Z.port==="number"&&Z.port>=0&&Z.port<=65535&&(Z.type===4||Z.type===5)},ME=function(Z){return typeof Z==="number"&&Z>0};Object.defineProperty(BE,"__esModule",{value:!0});BE.validateSocksClientChainOptions=BE.validateSocksClientOptions=void 0;var T8=cU(),p0=dU(),M51=import.meta.require("stream");BE.validateSocksClientOptions=B51;BE.validateSocksClientChainOptions=N51});var IE=w((PE)=>{Object.defineProperty(PE,"__esModule",{value:!0});PE.ReceiveBuffer=void 0;class DE{constructor(Z=4096){this.buffer=Buffer.allocUnsafe(Z),this.offset=0,this.originalSize=Z}get length(){return this.offset}append(Z){if(!Buffer.isBuffer(Z))throw new Error("Attempted to append a non-buffer instance to ReceiveBuffer.");if(this.offset+Z.length>=this.buffer.length){const Y=this.buffer;this.buffer=Buffer.allocUnsafe(Math.max(this.buffer.length+this.originalSize,this.buffer.length+Z.length)),Y.copy(this.buffer)}return Z.copy(this.buffer,this.offset),this.offset+=Z.length}peek(Z){if(Z>this.offset)throw new Error("Attempted to read beyond the bounds of the managed internal data.");return this.buffer.slice(0,Z)}get(Z){if(Z>this.offset)throw new Error("Attempted to read beyond the bounds of the managed internal data.");const Y=Buffer.allocUnsafe(Z);return this.buffer.slice(0,Z).copy(Y),this.buffer.copyWithin(0,Z,Z+this.offset-Z),this.offset-=Z,Y}}PE.ReceiveBuffer=DE});var jE=w((G5)=>{var KY=G5&&G5.__awaiter||function(Z,Y,X,J){function $(W){return W instanceof X?W:new X(function(G){G(W)})}return new(X||(X=Promise))(function(W,G){function K(H){try{z(J.next(H))}catch(F){G(F)}}function Q(H){try{z(J.throw(H))}catch(F){G(F)}}function z(H){H.done?W(H.value):$(H.value).then(K,Q)}z((J=J.apply(Z,Y||[])).next())})};Object.defineProperty(G5,"__esModule",{value:!0});G5.SocksClientError=G5.SocksClient=void 0;var D51=import.meta.require("events"),QY=import.meta.require("net"),q6=YE(),l8=zE(),l=dU(),lU=AE(),P51=IE(),pU=cU();Object.defineProperty(G5,"SocksClientError",{enumerable:!0,get:function(){return pU.SocksClientError}});class rW extends D51.EventEmitter{constructor(Z){super();this.options=Object.assign({},Z),(0,lU.validateSocksClientOptions)(Z),this.setState(l.SocksClientState.Created)}static createConnection(Z,Y){return new Promise((X,J)=>{try{(0,lU.validateSocksClientOptions)(Z,["connect"])}catch(W){if(typeof Y==="function")return Y(W),X(W);else return J(W)}const $=new rW(Z);$.connect(Z.existing_socket),$.once("established",(W)=>{if($.removeAllListeners(),typeof Y==="function")Y(null,W),X(W);else X(W)}),$.once("error",(W)=>{if($.removeAllListeners(),typeof Y==="function")Y(W),X(W);else J(W)})})}static createConnectionChain(Z,Y){return new Promise((X,J)=>KY(this,void 0,void 0,function*(){try{(0,lU.validateSocksClientChainOptions)(Z)}catch($){if(typeof Y==="function")return Y($),X($);else return J($)}if(Z.randomizeChain)(0,pU.shuffleArray)(Z.proxies);try{let $;for(let W=0;W<Z.proxies.length;W++){const G=Z.proxies[W],K=W===Z.proxies.length-1?Z.destination:{host:Z.proxies[W+1].host||Z.proxies[W+1].ipaddress,port:Z.proxies[W+1].port},Q=yield rW.createConnection({command:"connect",proxy:G,destination:K,existing_socket:$});$=$||Q.socket}if(typeof Y==="function")Y(null,{socket:$}),X({socket:$});else X({socket:$})}catch($){if(typeof Y==="function")Y($),X($);else J($)}}))}static createUDPFrame(Z){const Y=new l8.SmartBuffer;if(Y.writeUInt16BE(0),Y.writeUInt8(Z.frameNumber||0),QY.isIPv4(Z.remoteHost.host))Y.writeUInt8(l.Socks5HostType.IPv4),Y.writeUInt32BE(q6.toLong(Z.remoteHost.host));else if(QY.isIPv6(Z.remoteHost.host))Y.writeUInt8(l.Socks5HostType.IPv6),Y.writeBuffer(q6.toBuffer(Z.remoteHost.host));else Y.writeUInt8(l.Socks5HostType.Hostname),Y.writeUInt8(Buffer.byteLength(Z.remoteHost.host)),Y.writeString(Z.remoteHost.host);return Y.writeUInt16BE(Z.remoteHost.port),Y.writeBuffer(Z.data),Y.toBuffer()}static parseUDPFrame(Z){const Y=l8.SmartBuffer.fromBuffer(Z);Y.readOffset=2;const X=Y.readUInt8(),J=Y.readUInt8();let $;if(J===l.Socks5HostType.IPv4)$=q6.fromLong(Y.readUInt32BE());else if(J===l.Socks5HostType.IPv6)$=q6.toString(Y.readBuffer(16));else $=Y.readString(Y.readUInt8());const W=Y.readUInt16BE();return{frameNumber:X,remoteHost:{host:$,port:W},data:Y.readBuffer()}}setState(Z){if(this.state!==l.SocksClientState.Error)this.state=Z}connect(Z){this.onDataReceived=(X)=>this.onDataReceivedHandler(X),this.onClose=()=>this.onCloseHandler(),this.onError=(X)=>this.onErrorHandler(X),this.onConnect=()=>this.onConnectHandler();const Y=setTimeout(()=>this.onEstablishedTimeout(),this.options.timeout||l.DEFAULT_TIMEOUT);if(Y.unref&&typeof Y.unref==="function")Y.unref();if(Z)this.socket=Z;else this.socket=new QY.Socket;if(this.socket.once("close",this.onClose),this.socket.once("error",this.onError),this.socket.once("connect",this.onConnect),this.socket.on("data",this.onDataReceived),this.setState(l.SocksClientState.Connecting),this.receiveBuffer=new P51.ReceiveBuffer,Z)this.socket.emit("connect");else if(this.socket.connect(this.getSocketOptions()),this.options.set_tcp_nodelay!==void 0&&this.options.set_tcp_nodelay!==null)this.socket.setNoDelay(!!this.options.set_tcp_nodelay);this.prependOnceListener("established",(X)=>{setImmediate(()=>{if(this.receiveBuffer.length>0){const J=this.receiveBuffer.get(this.receiveBuffer.length);X.socket.emit("data",J)}X.socket.resume()})})}getSocketOptions(){return Object.assign(Object.assign({},this.options.socket_options),{host:this.options.proxy.host||this.options.proxy.ipaddress,port:this.options.proxy.port})}onEstablishedTimeout(){if(this.state!==l.SocksClientState.Established&&this.state!==l.SocksClientState.BoundWaitingForConnection)this.closeSocket(l.ERRORS.ProxyConnectionTimedOut)}onConnectHandler(){if(this.setState(l.SocksClientState.Connected),this.options.proxy.type===4)this.sendSocks4InitialHandshake();else this.sendSocks5InitialHandshake();this.setState(l.SocksClientState.SentInitialHandshake)}onDataReceivedHandler(Z){this.receiveBuffer.append(Z),this.processData()}processData(){while(this.state!==l.SocksClientState.Established&&this.state!==l.SocksClientState.Error&&this.receiveBuffer.length>=this.nextRequiredPacketBufferSize)if(this.state===l.SocksClientState.SentInitialHandshake)if(this.options.proxy.type===4)this.handleSocks4FinalHandshakeResponse();else this.handleInitialSocks5HandshakeResponse();else if(this.state===l.SocksClientState.SentAuthentication)this.handleInitialSocks5AuthenticationHandshakeResponse();else if(this.state===l.SocksClientState.SentFinalHandshake)this.handleSocks5FinalHandshakeResponse();else if(this.state===l.SocksClientState.BoundWaitingForConnection)if(this.options.proxy.type===4)this.handleSocks4IncomingConnectionResponse();else this.handleSocks5IncomingConnectionResponse();else{this.closeSocket(l.ERRORS.InternalError);break}}onCloseHandler(){this.closeSocket(l.ERRORS.SocketClosed)}onErrorHandler(Z){this.closeSocket(Z.message)}removeInternalSocketHandlers(){this.socket.pause(),this.socket.removeListener("data",this.onDataReceived),this.socket.removeListener("close",this.onClose),this.socket.removeListener("error",this.onError),this.socket.removeListener("connect",this.onConnect)}closeSocket(Z){if(this.state!==l.SocksClientState.Error)this.setState(l.SocksClientState.Error),this.socket.destroy(),this.removeInternalSocketHandlers(),this.emit("error",new pU.SocksClientError(Z,this.options))}sendSocks4InitialHandshake(){const Z=this.options.proxy.userId||"",Y=new l8.SmartBuffer;if(Y.writeUInt8(4),Y.writeUInt8(l.SocksCommand[this.options.command]),Y.writeUInt16BE(this.options.destination.port),QY.isIPv4(this.options.destination.host))Y.writeBuffer(q6.toBuffer(this.options.destination.host)),Y.writeStringNT(Z);else Y.writeUInt8(0),Y.writeUInt8(0),Y.writeUInt8(0),Y.writeUInt8(1),Y.writeStringNT(Z),Y.writeStringNT(this.options.destination.host);this.nextRequiredPacketBufferSize=l.SOCKS_INCOMING_PACKET_SIZES.Socks4Response,this.socket.write(Y.toBuffer())}handleSocks4FinalHandshakeResponse(){const Z=this.receiveBuffer.get(8);if(Z[1]!==l.Socks4Response.Granted)this.closeSocket(`${l.ERRORS.Socks4ProxyRejectedConnection} - (${l.Socks4Response[Z[1]]})`);else if(l.SocksCommand[this.options.command]===l.SocksCommand.bind){const Y=l8.SmartBuffer.fromBuffer(Z);Y.readOffset=2;const X={port:Y.readUInt16BE(),host:q6.fromLong(Y.readUInt32BE())};if(X.host==="0.0.0.0")X.host=this.options.proxy.ipaddress;this.setState(l.SocksClientState.BoundWaitingForConnection),this.emit("bound",{remoteHost:X,socket:this.socket})}else this.setState(l.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{socket:this.socket})}handleSocks4IncomingConnectionResponse(){const Z=this.receiveBuffer.get(8);if(Z[1]!==l.Socks4Response.Granted)this.closeSocket(`${l.ERRORS.Socks4ProxyRejectedIncomingBoundConnection} - (${l.Socks4Response[Z[1]]})`);else{const Y=l8.SmartBuffer.fromBuffer(Z);Y.readOffset=2;const X={port:Y.readUInt16BE(),host:q6.fromLong(Y.readUInt32BE())};this.setState(l.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:X,socket:this.socket})}}sendSocks5InitialHandshake(){const Z=new l8.SmartBuffer,Y=[l.Socks5Auth.NoAuth];if(this.options.proxy.userId||this.options.proxy.password)Y.push(l.Socks5Auth.UserPass);if(this.options.proxy.custom_auth_method!==void 0)Y.push(this.options.proxy.custom_auth_method);Z.writeUInt8(5),Z.writeUInt8(Y.length);for(let X of Y)Z.writeUInt8(X);this.nextRequiredPacketBufferSize=l.SOCKS_INCOMING_PACKET_SIZES.Socks5InitialHandshakeResponse,this.socket.write(Z.toBuffer()),this.setState(l.SocksClientState.SentInitialHandshake)}handleInitialSocks5HandshakeResponse(){const Z=this.receiveBuffer.get(2);if(Z[0]!==5)this.closeSocket(l.ERRORS.InvalidSocks5IntiailHandshakeSocksVersion);else if(Z[1]===l.SOCKS5_NO_ACCEPTABLE_AUTH)this.closeSocket(l.ERRORS.InvalidSocks5InitialHandshakeNoAcceptedAuthType);else if(Z[1]===l.Socks5Auth.NoAuth)this.socks5ChosenAuthType=l.Socks5Auth.NoAuth,this.sendSocks5CommandRequest();else if(Z[1]===l.Socks5Auth.UserPass)this.socks5ChosenAuthType=l.Socks5Auth.UserPass,this.sendSocks5UserPassAuthentication();else if(Z[1]===this.options.proxy.custom_auth_method)this.socks5ChosenAuthType=this.options.proxy.custom_auth_method,this.sendSocks5CustomAuthentication();else this.closeSocket(l.ERRORS.InvalidSocks5InitialHandshakeUnknownAuthType)}sendSocks5UserPassAuthentication(){const Z=this.options.proxy.userId||"",Y=this.options.proxy.password||"",X=new l8.SmartBuffer;X.writeUInt8(1),X.writeUInt8(Buffer.byteLength(Z)),X.writeString(Z),X.writeUInt8(Buffer.byteLength(Y)),X.writeString(Y),this.nextRequiredPacketBufferSize=l.SOCKS_INCOMING_PACKET_SIZES.Socks5UserPassAuthenticationResponse,this.socket.write(X.toBuffer()),this.setState(l.SocksClientState.SentAuthentication)}sendSocks5CustomAuthentication(){return KY(this,void 0,void 0,function*(){this.nextRequiredPacketBufferSize=this.options.proxy.custom_auth_response_size,this.socket.write(yield this.options.proxy.custom_auth_request_handler()),this.setState(l.SocksClientState.SentAuthentication)})}handleSocks5CustomAuthHandshakeResponse(Z){return KY(this,void 0,void 0,function*(){return yield this.options.proxy.custom_auth_response_handler(Z)})}handleSocks5AuthenticationNoAuthHandshakeResponse(Z){return KY(this,void 0,void 0,function*(){return Z[1]===0})}handleSocks5AuthenticationUserPassHandshakeResponse(Z){return KY(this,void 0,void 0,function*(){return Z[1]===0})}handleInitialSocks5AuthenticationHandshakeResponse(){return KY(this,void 0,void 0,function*(){this.setState(l.SocksClientState.ReceivedAuthenticationResponse);let Z=!1;if(this.socks5ChosenAuthType===l.Socks5Auth.NoAuth)Z=yield this.handleSocks5AuthenticationNoAuthHandshakeResponse(this.receiveBuffer.get(2));else if(this.socks5ChosenAuthType===l.Socks5Auth.UserPass)Z=yield this.handleSocks5AuthenticationUserPassHandshakeResponse(this.receiveBuffer.get(2));else if(this.socks5ChosenAuthType===this.options.proxy.custom_auth_method)Z=yield this.handleSocks5CustomAuthHandshakeResponse(this.receiveBuffer.get(this.options.proxy.custom_auth_response_size));if(!Z)this.closeSocket(l.ERRORS.Socks5AuthenticationFailed);else this.sendSocks5CommandRequest()})}sendSocks5CommandRequest(){const Z=new l8.SmartBuffer;if(Z.writeUInt8(5),Z.writeUInt8(l.SocksCommand[this.options.command]),Z.writeUInt8(0),QY.isIPv4(this.options.destination.host))Z.writeUInt8(l.Socks5HostType.IPv4),Z.writeBuffer(q6.toBuffer(this.options.destination.host));else if(QY.isIPv6(this.options.destination.host))Z.writeUInt8(l.Socks5HostType.IPv6),Z.writeBuffer(q6.toBuffer(this.options.destination.host));else Z.writeUInt8(l.Socks5HostType.Hostname),Z.writeUInt8(this.options.destination.host.length),Z.writeString(this.options.destination.host);Z.writeUInt16BE(this.options.destination.port),this.nextRequiredPacketBufferSize=l.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHeader,this.socket.write(Z.toBuffer()),this.setState(l.SocksClientState.SentFinalHandshake)}handleSocks5FinalHandshakeResponse(){const Z=this.receiveBuffer.peek(5);if(Z[0]!==5||Z[1]!==l.Socks5Response.Granted)this.closeSocket(`${l.ERRORS.InvalidSocks5FinalHandshakeRejected} - ${l.Socks5Response[Z[1]]}`);else{const Y=Z[3];let X,J;if(Y===l.Socks5HostType.IPv4){const $=l.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv4;if(this.receiveBuffer.length<$){this.nextRequiredPacketBufferSize=$;return}if(J=l8.SmartBuffer.fromBuffer(this.receiveBuffer.get($).slice(4)),X={host:q6.fromLong(J.readUInt32BE()),port:J.readUInt16BE()},X.host==="0.0.0.0")X.host=this.options.proxy.ipaddress}else if(Y===l.Socks5HostType.Hostname){const $=Z[4],W=l.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHostname($);if(this.receiveBuffer.length<W){this.nextRequiredPacketBufferSize=W;return}J=l8.SmartBuffer.fromBuffer(this.receiveBuffer.get(W).slice(5)),X={host:J.readString($),port:J.readUInt16BE()}}else if(Y===l.Socks5HostType.IPv6){const $=l.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv6;if(this.receiveBuffer.length<$){this.nextRequiredPacketBufferSize=$;return}J=l8.SmartBuffer.fromBuffer(this.receiveBuffer.get($).slice(4)),X={host:q6.toString(J.readBuffer(16)),port:J.readUInt16BE()}}if(this.setState(l.SocksClientState.ReceivedFinalResponse),l.SocksCommand[this.options.command]===l.SocksCommand.connect)this.setState(l.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:X,socket:this.socket});else if(l.SocksCommand[this.options.command]===l.SocksCommand.bind)this.setState(l.SocksClientState.BoundWaitingForConnection),this.nextRequiredPacketBufferSize=l.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHeader,this.emit("bound",{remoteHost:X,socket:this.socket});else if(l.SocksCommand[this.options.command]===l.SocksCommand.associate)this.setState(l.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:X,socket:this.socket})}}handleSocks5IncomingConnectionResponse(){const Z=this.receiveBuffer.peek(5);if(Z[0]!==5||Z[1]!==l.Socks5Response.Granted)this.closeSocket(`${l.ERRORS.Socks5ProxyRejectedIncomingBoundConnection} - ${l.Socks5Response[Z[1]]}`);else{const Y=Z[3];let X,J;if(Y===l.Socks5HostType.IPv4){const $=l.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv4;if(this.receiveBuffer.length<$){this.nextRequiredPacketBufferSize=$;return}if(J=l8.SmartBuffer.fromBuffer(this.receiveBuffer.get($).slice(4)),X={host:q6.fromLong(J.readUInt32BE()),port:J.readUInt16BE()},X.host==="0.0.0.0")X.host=this.options.proxy.ipaddress}else if(Y===l.Socks5HostType.Hostname){const $=Z[4],W=l.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHostname($);if(this.receiveBuffer.length<W){this.nextRequiredPacketBufferSize=W;return}J=l8.SmartBuffer.fromBuffer(this.receiveBuffer.get(W).slice(5)),X={host:J.readString($),port:J.readUInt16BE()}}else if(Y===l.Socks5HostType.IPv6){const $=l.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv6;if(this.receiveBuffer.length<$){this.nextRequiredPacketBufferSize=$;return}J=l8.SmartBuffer.fromBuffer(this.receiveBuffer.get($).slice(4)),X={host:q6.toString(J.readBuffer(16)),port:J.readUInt16BE()}}this.setState(l.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:X,socket:this.socket})}}get socksClientOptions(){return Object.assign({},this.options)}}G5.SocksClient=rW});var EE=w((M9)=>{var T51=M9&&M9.__createBinding||(Object.create?function(Z,Y,X,J){if(J===void 0)J=X;var $=Object.getOwnPropertyDescriptor(Y,X);if(!$||("get"in $?!Y.__esModule:$.writable||$.configurable))$={enumerable:!0,get:function(){return Y[X]}};Object.defineProperty(Z,J,$)}:function(Z,Y,X,J){if(J===void 0)J=X;Z[J]=Y[X]}),I51=M9&&M9.__exportStar||function(Z,Y){for(var X in Z)if(X!=="default"&&!Object.prototype.hasOwnProperty.call(Y,X))T51(Y,Z,X)};Object.defineProperty(M9,"__esModule",{value:!0});I51(jE(),M9)});var F7=w((CE)=>{var hJ=function(Z){return new Proxy(Z?{kModuleError:Z}:{},{get:(X,J)=>{if(J==="kModuleError")return Z;throw Z},set:()=>{throw Z}})},j51=function(){try{return CE.Kerberos=(()=>{ throw new Error(`Cannot require module "kerberos"`);})(),CE.Kerberos}catch{return CE.Kerberos}},E51=function(){try{return CE.ZStandard=(()=>{ throw new Error(`Cannot require module "@mongodb-js/zstd"`);})(),CE.ZStandard}catch{return CE.ZStandard}},C51=function(){try{return (()=>{ throw new Error(`Cannot require module "@aws-sdk/credential-providers"`);})()}catch{return hJ(new K5.MongoMissingDependencyError("Optional module `@aws-sdk/credential-providers` not found. Please install it to enable getting aws credentials via the official sdk."))}},O51=function(){try{return (()=>{ throw new Error(`Cannot require module "gcp-metadata"`);})()}catch{return hJ(new K5.MongoMissingDependencyError("Optional module `gcp-metadata` not found. Please install it to enable getting gcp credentials via the official sdk."))}},S51=function(){try{return (()=>{ throw new Error(`Cannot require module "snappy"`);})()}catch(Z){return{kModuleError:new K5.MongoMissingDependencyError("Optional module `snappy` not found. Please install it to enable snappy compression",{cause:Z})}}},k51=function(){try{return EE()}catch(Z){return{kModuleError:new K5.MongoMissingDependencyError("Optional module `socks` not found. Please install it to connections over a SOCKS5 proxy",{cause:Z})}}},_51=function(){let Z=null;try{Z=(()=>{ throw new Error(`Cannot require module "mongodb-client-encryption"`);})()}catch(Y){return{kModuleError:new K5.MongoMissingDependencyError("Optional module `mongodb-client-encryption` not found. Please install it to use auto encryption or ClientEncryption.",{cause:Y})}}return Z};Object.defineProperty(CE,"__esModule",{value:!0});CE.getMongoDBClientEncryption=CE.aws4=CE.getSocks=CE.getSnappy=CE.getGcpMetadata=CE.getAwsCredentialProvider=CE.getZstdLibrary=CE.ZStandard=CE.getKerberos=CE.Kerberos=void 0;var K5=r();CE.Kerberos=hJ(new K5.MongoMissingDependencyError("Optional module `kerberos` not found. Please install it to enable kerberos authentication"));CE.getKerberos=j51;CE.ZStandard=hJ(new K5.MongoMissingDependencyError("Optional module `@mongodb-js/zstd` not found. Please install it to enable zstd compression"));CE.getZstdLibrary=E51;CE.getAwsCredentialProvider=C51;CE.getGcpMetadata=O51;CE.getSnappy=S51;CE.getSocks=k51;CE.aws4=hJ(new K5.MongoMissingDependencyError("Optional module `aws4` not found. Please install it to enable AWS authentication"));try{CE.aws4=(()=>{ throw new Error(`Cannot require module "aws4"`);})()}catch{}CE.getMongoDBClientEncryption=_51});var M4=w((xE)=>{Object.defineProperty(xE,"__esModule",{value:!0});xE.AuthProvider=xE.AuthContext=void 0;var h51=r();class kE{constructor(Z,Y,X){this.reauthenticating=!1,this.connection=Z,this.credentials=Y,this.options=X}}xE.AuthContext=kE;class _E{async prepare(Z,Y){return Z}async reauth(Z){if(Z.reauthenticating)throw new h51.MongoRuntimeError("Reauthentication already in progress.");try{Z.reauthenticating=!0,await this.auth(Z)}finally{Z.reauthenticating=!1}}}xE.AuthProvider=_E});var ZG=w((hE)=>{async function iU(Z,Y){return Z.commandAsync((0,d51.ns)("$external.$cmd"),Y,void 0)}async function l51(Z){const{hostAddress:Y}=Z.options,{credentials:X}=Z;if(!Y||typeof Y.host!=="string"||!X)throw new yE.MongoInvalidArgumentError("Connection must have host and port and credentials defined.");if(a51(),("kModuleError"in mJ))throw mJ.kModuleError;const{initializeClient:J}=mJ,{username:$,password:W}=X,G=X.mechanismProperties,K=G.SERVICE_NAME??"mongodb",Q=await vE(Y.host,G),z={};if(W!=null)Object.assign(z,{user:$,password:W});const H=G.SERVICE_HOST??Q;let F=`${K}${process.platform==="win32"?"/":"@"}${H}`;if("SERVICE_REALM"in G)F=`${F}@${G.SERVICE_REALM}`;return J(F,z)}var p51=function(Z){return{saslStart:1,mechanism:"GSSAPI",payload:Z,autoAuthorize:1}},i51=function(Z,Y){return{saslContinue:1,conversationId:Y,payload:Z}};async function bE(Z,Y,X){try{return await Z.step(X)||""}catch(J){if(Y===0)throw J;return bE(Z,Y-1,X)}}async function n51(Z,Y,X){const J=await Z.unwrap(X);return Z.wrap(J||"",{user:Y})}async function vE(Z,Y){const X=Y.CANONICALIZE_HOST_NAME;if(!X||X===hE.GSSAPICanonicalizationValue.none)return Z;if(X===hE.GSSAPICanonicalizationValue.on||X===hE.GSSAPICanonicalizationValue.forwardAndReverse){const{address:J}=await nU.promises.lookup(Z);try{const $=await nU.promises.resolvePtr(J);return $.length>0?$[0]:Z}catch($){return aU(Z)}}else return aU(Z)}async function aU(Z){try{const Y=await nU.promises.resolveCname(Z);return Y.length>0?Y[0]:Z}catch{return Z}}var a51=function(){if(!mJ)mJ=(0,u51.getKerberos)()};Object.defineProperty(hE,"__esModule",{value:!0});hE.resolveCname=hE.performGSSAPICanonicalizeHostName=hE.GSSAPI=hE.GSSAPICanonicalizationValue=void 0;var nU=import.meta.require("dns"),u51=F7(),yE=r(),d51=$1(),c51=M4();hE.GSSAPICanonicalizationValue=Object.freeze({on:!0,off:!1,none:"none",forward:"forward",forwardAndReverse:"forwardAndReverse"});var mJ;class gE extends c51.AuthProvider{async auth(Z){const{connection:Y,credentials:X}=Z;if(X==null)throw new yE.MongoMissingCredentialsError("Credentials required for GSSAPI authentication");const{username:J}=X,$=await l51(Z),W=await $.step(""),G=await iU(Y,p51(W)),K=await bE($,10,G.payload),Q=await iU(Y,i51(K,G.conversationId)),z=await n51($,J,Q.payload);await iU(Y,{saslContinue:1,conversationId:Q.conversationId,payload:z})}}hE.GSSAPI=gE;hE.performGSSAPICanonicalizeHostName=vE;hE.resolveCname=aU});var b7=w((uE)=>{Object.defineProperty(uE,"__esModule",{value:!0});uE.AUTH_MECHS_AUTH_SRC_EXTERNAL=uE.AuthMechanism=void 0;uE.AuthMechanism=Object.freeze({MONGODB_AWS:"MONGODB-AWS",MONGODB_CR:"MONGODB-CR",MONGODB_DEFAULT:"DEFAULT",MONGODB_GSSAPI:"GSSAPI",MONGODB_PLAIN:"PLAIN",MONGODB_SCRAM_SHA1:"SCRAM-SHA-1",MONGODB_SCRAM_SHA256:"SCRAM-SHA-256",MONGODB_X509:"MONGODB-X509",MONGODB_OIDC:"MONGODB-OIDC"});uE.AUTH_MECHS_AUTH_SRC_EXTERNAL=new Set([uE.AuthMechanism.MONGODB_GSSAPI,uE.AuthMechanism.MONGODB_AWS,uE.AuthMechanism.MONGODB_OIDC,uE.AuthMechanism.MONGODB_X509])});var XG=w((pE)=>{var o51=function(Z){if(Z){if(Array.isArray(Z.saslSupportedMechs))return Z.saslSupportedMechs.includes(e0.AuthMechanism.MONGODB_SCRAM_SHA256)?e0.AuthMechanism.MONGODB_SCRAM_SHA256:e0.AuthMechanism.MONGODB_SCRAM_SHA1;if(Z.maxWireVersion>=3)return e0.AuthMechanism.MONGODB_SCRAM_SHA1}return e0.AuthMechanism.MONGODB_CR};Object.defineProperty(pE,"__esModule",{value:!0});pE.MongoCredentials=pE.DEFAULT_ALLOWED_HOSTS=void 0;var b6=r(),t51=ZG(),e0=b7(),cE=["aws","azure"],lE="Auth mechanism property ALLOWED_HOSTS must be an array of strings.";pE.DEFAULT_ALLOWED_HOSTS=["*.mongodb.net","*.mongodb-dev.net","*.mongodbgov.net","localhost","127.0.0.1","::1"];var e51="TOKEN_AUDIENCE must be set in the auth mechanism properties when PROVIDER_NAME is azure.";class YG{constructor(Z){if(this.username=Z.username??"",this.password=Z.password,this.source=Z.source,!this.source&&Z.db)this.source=Z.db;if(this.mechanism=Z.mechanism||e0.AuthMechanism.MONGODB_DEFAULT,this.mechanismProperties=Z.mechanismProperties||{},this.mechanism.match(/MONGODB-AWS/i)){if(!this.username&&process.env.AWS_ACCESS_KEY_ID)this.username=process.env.AWS_ACCESS_KEY_ID;if(!this.password&&process.env.AWS_SECRET_ACCESS_KEY)this.password=process.env.AWS_SECRET_ACCESS_KEY;if(this.mechanismProperties.AWS_SESSION_TOKEN==null&&process.env.AWS_SESSION_TOKEN!=null)this.mechanismProperties={...this.mechanismProperties,AWS_SESSION_TOKEN:process.env.AWS_SESSION_TOKEN}}if(this.mechanism===e0.AuthMechanism.MONGODB_OIDC&&!this.mechanismProperties.ALLOWED_HOSTS)this.mechanismProperties={...this.mechanismProperties,ALLOWED_HOSTS:pE.DEFAULT_ALLOWED_HOSTS};Object.freeze(this.mechanismProperties),Object.freeze(this)}equals(Z){return this.mechanism===Z.mechanism&&this.username===Z.username&&this.password===Z.password&&this.source===Z.source}resolveAuthMechanism(Z){if(this.mechanism.match(/DEFAULT/i))return new YG({username:this.username,password:this.password,source:this.source,mechanism:o51(Z),mechanismProperties:this.mechanismProperties});return this}validate(){if((this.mechanism===e0.AuthMechanism.MONGODB_GSSAPI||this.mechanism===e0.AuthMechanism.MONGODB_CR||this.mechanism===e0.AuthMechanism.MONGODB_PLAIN||this.mechanism===e0.AuthMechanism.MONGODB_SCRAM_SHA1||this.mechanism===e0.AuthMechanism.MONGODB_SCRAM_SHA256)&&!this.username)throw new b6.MongoMissingCredentialsError(`Username required for mechanism '${this.mechanism}'`);if(this.mechanism===e0.AuthMechanism.MONGODB_OIDC){if(this.username&&this.mechanismProperties.PROVIDER_NAME)throw new b6.MongoInvalidArgumentError(`username and PROVIDER_NAME may not be used together for mechanism '${this.mechanism}'.`);if(this.mechanismProperties.PROVIDER_NAME==="azure"&&!this.mechanismProperties.TOKEN_AUDIENCE)throw new b6.MongoAzureError(e51);if(this.mechanismProperties.PROVIDER_NAME&&!cE.includes(this.mechanismProperties.PROVIDER_NAME))throw new b6.MongoInvalidArgumentError(`Currently only a PROVIDER_NAME in ${cE.join(",")} is supported for mechanism '${this.mechanism}'.`);if(this.mechanismProperties.REFRESH_TOKEN_CALLBACK&&!this.mechanismProperties.REQUEST_TOKEN_CALLBACK)throw new b6.MongoInvalidArgumentError(`A REQUEST_TOKEN_CALLBACK must be provided when using a REFRESH_TOKEN_CALLBACK for mechanism '${this.mechanism}'`);if(!this.mechanismProperties.PROVIDER_NAME&&!this.mechanismProperties.REQUEST_TOKEN_CALLBACK)throw new b6.MongoInvalidArgumentError(`Either a PROVIDER_NAME or a REQUEST_TOKEN_CALLBACK must be specified for mechanism '${this.mechanism}'.`);if(this.mechanismProperties.ALLOWED_HOSTS){const Y=this.mechanismProperties.ALLOWED_HOSTS;if(!Array.isArray(Y))throw new b6.MongoInvalidArgumentError(lE);for(let X of Y)if(typeof X!=="string")throw new b6.MongoInvalidArgumentError(lE)}}if(e0.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(this.mechanism)){if(this.source!=null&&this.source!=="$external")throw new b6.MongoAPIError(`Invalid source '${this.source}' for mechanism '${this.mechanism}' specified.`)}if(this.mechanism===e0.AuthMechanism.MONGODB_PLAIN&&this.source==null)throw new b6.MongoAPIError("PLAIN Authentication Mechanism needs an auth source");if(this.mechanism===e0.AuthMechanism.MONGODB_X509&&this.password!=null){if(this.password===""){Reflect.set(this,"password",void 0);return}throw new b6.MongoAPIError("Password not allowed for mechanism MONGODB-X509")}const Z=this.mechanismProperties.CANONICALIZE_HOST_NAME??!1;if(!Object.values(t51.GSSAPICanonicalizationValue).includes(Z))throw new b6.MongoAPIError(`Invalid CANONICALIZE_HOST_NAME value: ${Z}`)}static merge(Z,Y){return new YG({username:Y.username??Z?.username??"",password:Y.password??Z?.password??"",mechanism:Y.mechanism??Z?.mechanism??e0.AuthMechanism.MONGODB_DEFAULT,mechanismProperties:Y.mechanismProperties??Z?.mechanismProperties??{},source:Y.source??Y.db??Z?.source??"admin"})}}pE.MongoCredentials=YG});var $G=w((tE)=>{var i1=function(Z,Y,X){if(X.globals)Z=X.globals[Z.name];return new Z(`${X.context?X.context:"Value"} ${Y}.`)},FY=function(Z,Y){if(typeof Z==="bigint")throw i1(TypeError,"is a BigInt which cannot be converted to a number",Y);if(!Y.globals)return Number(Z);return Y.globals.Number(Z)},sE=function(Z){if(Z>0&&Z%1===0.5&&(Z&1)===0||Z<0&&Z%1===-0.5&&(Z&1)===1)return dJ(Math.floor(Z));return dJ(Math.round(Z))},JG=function(Z){return dJ(Math.trunc(Z))},aE=function(Z){return Z<0?-1:1},Z91=function(Z,Y){const X=Z%Y;if(aE(Y)!==aE(X))return X+Y;return X},dJ=function(Z){return Z===0?0:Z},UY=function(Z,{unsigned:Y}){let X,J;if(Y)X=0,J=2**Z-1;else X=-(2**(Z-1)),J=2**(Z-1)-1;const $=2**Z,W=2**(Z-1);return(G,K={})=>{let Q=FY(G,K);if(Q=dJ(Q),K.enforceRange){if(!Number.isFinite(Q))throw i1(TypeError,"is not a finite number",K);if(Q=JG(Q),Q<X||Q>J)throw i1(TypeError,`is outside the accepted range of ${X} to ${J}, inclusive`,K);return Q}if(!Number.isNaN(Q)&&K.clamp)return Q=Math.min(Math.max(Q,X),J),Q=sE(Q),Q;if(!Number.isFinite(Q)||Q===0)return 0;if(Q=JG(Q),Q>=X&&Q<=J)return Q;if(Q=Z91(Q,$),!Y&&Q>=W)return Q-$;return Q}},rE=function(Z,{unsigned:Y}){const X=Number.MAX_SAFE_INTEGER,J=Y?0:Number.MIN_SAFE_INTEGER,$=Y?BigInt.asUintN:BigInt.asIntN;return(W,G={})=>{let K=FY(W,G);if(K=dJ(K),G.enforceRange){if(!Number.isFinite(K))throw i1(TypeError,"is not a finite number",G);if(K=JG(K),K<J||K>X)throw i1(TypeError,`is outside the accepted range of ${J} to ${X}, inclusive`,G);return K}if(!Number.isNaN(K)&&G.clamp)return K=Math.min(Math.max(K,J),X),K=sE(K),K;if(!Number.isFinite(K)||K===0)return 0;let Q=BigInt(JG(K));return Q=$(Z,Q),Number(Q)}},sU=function(Z){try{return Y91.call(Z),!0}catch{return!1}},zY=function(Z){try{return X91.call(Z),!0}catch{return!1}},HY=function(Z){try{return new Uint8Array(Z),!1}catch{return!0}};tE.any=(Z)=>{return Z};tE.undefined=()=>{return};tE.boolean=(Z)=>{return Boolean(Z)};tE.byte=UY(8,{unsigned:!1});tE.octet=UY(8,{unsigned:!0});tE.short=UY(16,{unsigned:!1});tE["unsigned short"]=UY(16,{unsigned:!0});tE.long=UY(32,{unsigned:!1});tE["unsigned long"]=UY(32,{unsigned:!0});tE["long long"]=rE(64,{unsigned:!1});tE["unsigned long long"]=rE(64,{unsigned:!0});tE.double=(Z,Y={})=>{const X=FY(Z,Y);if(!Number.isFinite(X))throw i1(TypeError,"is not a finite floating-point value",Y);return X};tE["unrestricted double"]=(Z,Y={})=>{return FY(Z,Y)};tE.float=(Z,Y={})=>{const X=FY(Z,Y);if(!Number.isFinite(X))throw i1(TypeError,"is not a finite floating-point value",Y);if(Object.is(X,-0))return X;const J=Math.fround(X);if(!Number.isFinite(J))throw i1(TypeError,"is outside the range of a single-precision floating-point value",Y);return J};tE["unrestricted float"]=(Z,Y={})=>{const X=FY(Z,Y);if(isNaN(X))return X;if(Object.is(X,-0))return X;return Math.fround(X)};tE.DOMString=(Z,Y={})=>{if(Y.treatNullAsEmptyString&&Z===null)return"";if(typeof Z==="symbol")throw i1(TypeError,"is a symbol, which cannot be converted to a string",Y);return(Y.globals?Y.globals.String:String)(Z)};tE.ByteString=(Z,Y={})=>{const X=tE.DOMString(Z,Y);let J;for(let $=0;(J=X.codePointAt($))!==void 0;++$)if(J>255)throw i1(TypeError,"is not a valid ByteString",Y);return X};tE.USVString=(Z,Y={})=>{const X=tE.DOMString(Z,Y),J=X.length,$=[];for(let W=0;W<J;++W){const G=X.charCodeAt(W);if(G<55296||G>57343)$.push(String.fromCodePoint(G));else if(56320<=G&&G<=57343)$.push(String.fromCodePoint(65533));else if(W===J-1)$.push(String.fromCodePoint(65533));else{const K=X.charCodeAt(W+1);if(56320<=K&&K<=57343){const Q=G&1023,z=K&1023;$.push(String.fromCodePoint((2<<15)+(2<<9)*Q+z)),++W}else $.push(String.fromCodePoint(65533))}}return $.join("")};tE.object=(Z,Y={})=>{if(Z===null||typeof Z!=="object"&&typeof Z!=="function")throw i1(TypeError,"is not an object",Y);return Z};var Y91=Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get,X91=typeof SharedArrayBuffer==="function"?Object.getOwnPropertyDescriptor(SharedArrayBuffer.prototype,"byteLength").get:null;tE.ArrayBuffer=(Z,Y={})=>{if(!sU(Z)){if(Y.allowShared&&!zY(Z))throw i1(TypeError,"is not an ArrayBuffer or SharedArrayBuffer",Y);throw i1(TypeError,"is not an ArrayBuffer",Y)}if(HY(Z))throw i1(TypeError,"is a detached ArrayBuffer",Y);return Z};var J91=Object.getOwnPropertyDescriptor(DataView.prototype,"byteLength").get;tE.DataView=(Z,Y={})=>{try{J91.call(Z)}catch(X){throw i1(TypeError,"is not a DataView",Y)}if(!Y.allowShared&&zY(Z.buffer))throw i1(TypeError,"is backed by a SharedArrayBuffer, which is not allowed",Y);if(HY(Z.buffer))throw i1(TypeError,"is backed by a detached ArrayBuffer",Y);return Z};var $91=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array).prototype,Symbol.toStringTag).get;[Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Uint8ClampedArray,Float32Array,Float64Array].forEach((Z)=>{const{name:Y}=Z,X=/^[AEIOU]/u.test(Y)?"an":"a";tE[Y]=(J,$={})=>{if(!ArrayBuffer.isView(J)||$91.call(J)!==Y)throw i1(TypeError,`is not ${X} ${Y} object`,$);if(!$.allowShared&&zY(J.buffer))throw i1(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",$);if(HY(J.buffer))throw i1(TypeError,"is a view on a detached ArrayBuffer",$);return J}});tE.ArrayBufferView=(Z,Y={})=>{if(!ArrayBuffer.isView(Z))throw i1(TypeError,"is not a view on an ArrayBuffer or SharedArrayBuffer",Y);if(!Y.allowShared&&zY(Z.buffer))throw i1(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",Y);if(HY(Z.buffer))throw i1(TypeError,"is a view on a detached ArrayBuffer",Y);return Z};tE.BufferSource=(Z,Y={})=>{if(ArrayBuffer.isView(Z)){if(!Y.allowShared&&zY(Z.buffer))throw i1(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",Y);if(HY(Z.buffer))throw i1(TypeError,"is a view on a detached ArrayBuffer",Y);return Z}if(!Y.allowShared&&!sU(Z))throw i1(TypeError,"is not an ArrayBuffer or a view on one",Y);if(Y.allowShared&&!zY(Z)&&!sU(Z))throw i1(TypeError,"is not an ArrayBuffer, SharedArrayBuffer, or a view on one",Y);if(HY(Z))throw i1(TypeError,"is a detached ArrayBuffer",Y);return Z};tE.DOMTimeStamp=tE["unsigned long long"]});var GG=w((WC,GC)=>{var E91=function(Z){return typeof Z==="object"&&Z!==null||typeof Z==="function"},C91=function(Z,Y){for(let X of Reflect.ownKeys(Y)){const J=Reflect.getOwnPropertyDescriptor(Y,X);if(J&&!Reflect.defineProperty(Z,X,J))throw new TypeError(`Cannot redefine property: ${String(X)}`)}},O91=function(Z,Y){const X=XC(Z);return Object.defineProperties(Object.create(X["%Object.prototype%"]),Object.getOwnPropertyDescriptors(Y))},XC=function(Z){if(eE(Z,WG))return Z[WG];const Y=Object.create(null);Y["%Object.prototype%"]=Z.Object.prototype,Y["%IteratorPrototype%"]=Object.getPrototypeOf(Object.getPrototypeOf(new Z.Array()[Symbol.iterator]()));try{Y["%AsyncIteratorPrototype%"]=Object.getPrototypeOf(Object.getPrototypeOf(Z.eval("(async function* () {})").prototype))}catch{Y["%AsyncIteratorPrototype%"]=S91}return Z[WG]=Y,Y},k91=function(Z,Y,X){if(!Z[VY])Z[VY]=Object.create(null);if(Y in Z[VY])return Z[VY][Y];return Z[VY][Y]=X(),Z[VY][Y]},JC=function(Z){return Z?Z[ZC]:null},$C=function(Z){return Z?Z[YC]:null},_91=function(Z){const Y=JC(Z);return Y?Y:Z},x91=function(Z){const Y=$C(Z);return Y?Y:Z},y91=function(Z){if(typeof Z!=="string")return!1;const Y=Z>>>0;if(Y===4294967295)return!1;const X=`${Y}`;if(Z!==X)return!1;return!0},b91=function(Z){try{return g91.call(Z),!0}catch(Y){return!1}},v91=function([Z,Y],X){let J;switch(X){case"key":J=Z;break;case"value":J=Y;break;case"key+value":J=[Z,Y];break}return{value:J,done:!1}},eE=Function.prototype.call.bind(Object.prototype.hasOwnProperty),ZC=Symbol("wrapper"),YC=Symbol("impl"),VY=Symbol("SameObject caches"),WG=Symbol.for("[webidl2js] constructor registry"),S91=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype),f91=Symbol("internal"),g91=Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get,h91=Symbol("supports property index"),m91=Symbol("supported property indices"),u91=Symbol("supports property name"),d91=Symbol("supported property names"),c91=Symbol("indexed property get"),l91=Symbol("indexed property set new"),p91=Symbol("indexed property set existing"),i91=Symbol("named property get"),n91=Symbol("named property set new"),a91=Symbol("named property set existing"),s91=Symbol("named property delete"),r91=Symbol("async iterator get the next iteration result"),t91=Symbol("async iterator return steps"),o91=Symbol("async iterator initialization steps"),e91=Symbol("async iterator end of iteration");GC.exports=WC={isObject:E91,hasOwn:eE,define:C91,newObjectInRealm:O91,wrapperSymbol:ZC,implSymbol:YC,getSameObject:k91,ctorRegistrySymbol:WG,initCtorRegistry:XC,wrapperForImpl:JC,implForWrapper:$C,tryWrapperForImpl:_91,tryImplForWrapper:x91,iterInternalSymbol:f91,isArrayBuffer:b91,isArrayIndexPropName:y91,supportsPropertyIndex:h91,supportedPropertyIndices:m91,supportsPropertyName:u91,supportedPropertyNames:d91,indexedGet:c91,indexedSetNew:l91,indexedSetExisting:p91,namedGet:i91,namedSetNew:n91,namedSetExisting:a91,namedDelete:s91,asyncIteratorNext:r91,asyncIteratorReturn:t91,asyncIteratorInit:o91,asyncIteratorEOI:e91,iteratorResult:v91}});var QC=w((cj1,KC)=>{var ZZ1=/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10EAB}\u{10EAC}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{11002}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11082}\u{110B0}-\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{11134}\u{11145}\u{11146}\u{11173}\u{11180}-\u{11182}\u{111B3}-\u{111C0}\u{111C9}-\u{111CC}\u{111CE}\u{111CF}\u{1122C}-\u{11237}\u{1123E}\u{112DF}-\u{112EA}\u{11300}-\u{11303}\u{1133B}\u{1133C}\u{1133E}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11357}\u{11362}\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11435}-\u{11446}\u{1145E}\u{114B0}-\u{114C3}\u{115AF}-\u{115B5}\u{115B8}-\u{115C0}\u{115DC}\u{115DD}\u{11630}-\u{11640}\u{116AB}-\u{116B7}\u{1171D}-\u{1172B}\u{1182C}-\u{1183A}\u{11930}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{1193E}\u{11940}\u{11942}\u{11943}\u{119D1}-\u{119D7}\u{119DA}-\u{119E0}\u{119E4}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A39}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A5B}\u{11A8A}-\u{11A99}\u{11C2F}-\u{11C36}\u{11C38}-\u{11C3F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D8A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D97}\u{11EF3}-\u{11EF6}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F51}-\u{16F87}\u{16F8F}-\u{16F92}\u{16FE4}\u{16FF0}\u{16FF1}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D165}-\u{1D169}\u{1D16D}-\u{1D172}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]/u,YZ1=/[\u094D\u09CD\u0A4D\u0ACD\u0B4D\u0BCD\u0C4D\u0CCD\u0D3B\u0D3C\u0D4D\u0DCA\u0E3A\u0EBA\u0F84\u1039\u103A\u1714\u1734\u17D2\u1A60\u1B44\u1BAA\u1BAB\u1BF2\u1BF3\u2D7F\uA806\uA8C4\uA953\uA9C0\uAAF6\uABED\u{10A3F}\u{11046}\u{1107F}\u{110B9}\u{11133}\u{11134}\u{111C0}\u{11235}\u{112EA}\u{1134D}\u{11442}\u{114C2}\u{115BF}\u{1163F}\u{116B6}\u{1172B}\u{11839}\u{119E0}\u{11A34}\u{11A47}\u{11A99}\u{11C3F}\u{11D44}\u{11D45}\u{11D97}]/u,XZ1=/[\u0620\u0626\u0628\u062A-\u062E\u0633-\u063F\u0641-\u0647\u0649\u064A\u066E\u066F\u0678-\u0687\u069A-\u06BF\u06C1\u06C2\u06CC\u06CE\u06D0\u06D1\u06FA-\u06FC\u06FF\u0712-\u0714\u071A-\u071D\u071F-\u0727\u0729\u072B\u072D\u072E\u074E-\u0758\u075C-\u076A\u076D-\u0770\u0772\u0775-\u0777\u077A-\u077F\u07CA-\u07EA\u0841-\u0845\u0848\u084A-\u0853\u0855\u0860\u0862-\u0865\u0868\u08A0-\u08A9\u08AF\u08B0\u08B3\u08B4\u08B6-\u08B8\u08BA-\u08BD\u1807\u1820-\u1878\u1887-\u18A8\u18AA\uA840-\uA872\u{10AC0}-\u{10AC4}\u{10ACD}\u{10AD3}-\u{10ADC}\u{10ADE}-\u{10AE0}\u{10AEB}-\u{10AEE}\u{10B80}\u{10B82}\u{10B86}-\u{10B88}\u{10B8A}\u{10B8B}\u{10B8D}\u{10B90}\u{10BAD}\u{10BAE}\u{10D00}-\u{10D21}\u{10D23}\u{10F30}-\u{10F32}\u{10F34}-\u{10F44}\u{10F51}-\u{10F53}\u{1E900}-\u{1E943}][\xAD\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u200B\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFEFF\uFFF9-\uFFFB\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10F46}-\u{10F50}\u{11001}\u{11038}-\u{11046}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}-\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C3F}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{13430}-\u{13438}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E130}-\u{1E136}\u{1E2EC}-\u{1E2EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94B}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*\u200C[\xAD\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u200B\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFEFF\uFFF9-\uFFFB\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10F46}-\u{10F50}\u{11001}\u{11038}-\u{11046}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}-\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C3F}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{13430}-\u{13438}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E130}-\u{1E136}\u{1E2EC}-\u{1E2EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94B}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*[\u0620\u0622-\u063F\u0641-\u064A\u066E\u066F\u0671-\u0673\u0675-\u06D3\u06D5\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u077F\u07CA-\u07EA\u0840-\u0855\u0860\u0862-\u0865\u0867-\u086A\u08A0-\u08AC\u08AE-\u08B4\u08B6-\u08BD\u1807\u1820-\u1878\u1887-\u18A8\u18AA\uA840-\uA871\u{10AC0}-\u{10AC5}\u{10AC7}\u{10AC9}\u{10ACA}\u{10ACE}-\u{10AD6}\u{10AD8}-\u{10AE1}\u{10AE4}\u{10AEB}-\u{10AEF}\u{10B80}-\u{10B91}\u{10BA9}-\u{10BAE}\u{10D01}-\u{10D23}\u{10F30}-\u{10F44}\u{10F51}-\u{10F54}\u{1E900}-\u{1E943}]/u,JZ1=/[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0600-\u0605\u0608\u060B\u060D\u061B-\u064A\u0660-\u0669\u066B-\u066F\u0671-\u06D5\u06DD\u06E5\u06E6\u06EE\u06EF\u06FA-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u08A0-\u08C9\u08E2\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D30}-\u{10D39}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}]/u,$Z1=/[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02BB-\u02C1\u02D0\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0482\u048A-\u052F\u0531-\u0556\u0559-\u0589\u0903-\u0939\u093B\u093D-\u0940\u0949-\u094C\u094E-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C0\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09FA\u09FC\u09FD\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A76\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC0\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0\u0AE1\u0AE6-\u0AF0\u0AF9\u0B02\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C77\u0C7F\u0C80\u0C82-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D02-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D4F\u0D54-\u0D61\u0D66-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E4F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3E-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u1000-\u102C\u1031\u1038\u103B\u103C\u103F-\u1057\u105A-\u105D\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108C\u108E-\u109C\u109E-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u167F\u1681-\u169A\u16A0-\u16F8\u1700-\u1711\u1715\u171F-\u1731\u1734-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7\u17C8\u17D4-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A19\u1A1A\u1A1E-\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1B04-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B4C\u1B50-\u1B6A\u1B74-\u1B7E\u1B82-\u1BA1\u1BA6\u1BA7\u1BAA\u1BAE-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1BFC-\u1C2B\u1C34\u1C35\u1C3B-\u1C49\u1C4D-\u1C88\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5-\u1CF7\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2188\u2336-\u237A\u2395\u249C-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u302E\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31BF\u31F0-\u321C\u3220-\u324F\u3260-\u327B\u327F-\u32B0\u32C0-\u32CB\u32D0-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA60C\uA610-\uA62B\uA640-\uA66E\uA680-\uA69D\uA6A0-\uA6EF\uA6F2-\uA6F7\uA722-\uA787\uA789-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA824\uA827\uA830-\uA837\uA840-\uA873\uA880-\uA8C3\uA8CE-\uA8D9\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA952\uA953\uA95F-\uA97C\uA983-\uA9B2\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA2F\uAA30\uAA33\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA7B\uAA7D-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAAEB\uAAEE-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB69\uAB70-\uABE4\uABE6\uABE7\uABE9-\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1013F}\u{1018D}\u{1018E}\u{101D0}-\u{101FC}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{11000}\u{11002}-\u{11037}\u{11047}-\u{1104D}\u{11066}-\u{1106F}\u{11071}\u{11072}\u{11075}\u{11082}-\u{110B2}\u{110B7}\u{110B8}\u{110BB}-\u{110C1}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11103}-\u{11126}\u{1112C}\u{11136}-\u{11147}\u{11150}-\u{11172}\u{11174}-\u{11176}\u{11182}-\u{111B5}\u{111BF}-\u{111C8}\u{111CD}\u{111CE}\u{111D0}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{1122E}\u{11232}\u{11233}\u{11235}\u{11238}-\u{1123D}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112DE}\u{112E0}-\u{112E2}\u{112F0}-\u{112F9}\u{11302}\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}-\u{1133F}\u{11341}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11400}-\u{11437}\u{11440}\u{11441}\u{11445}\u{11447}-\u{1145B}\u{1145D}\u{1145F}-\u{11461}\u{11480}-\u{114B2}\u{114B9}\u{114BB}-\u{114BE}\u{114C1}\u{114C4}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B1}\u{115B8}-\u{115BB}\u{115BE}\u{115C1}-\u{115DB}\u{11600}-\u{11632}\u{1163B}\u{1163C}\u{1163E}\u{11641}-\u{11644}\u{11650}-\u{11659}\u{11680}-\u{116AA}\u{116AC}\u{116AE}\u{116AF}\u{116B6}\u{116B8}\u{116B9}\u{116C0}-\u{116C9}\u{11700}-\u{1171A}\u{11720}\u{11721}\u{11726}\u{11730}-\u{11746}\u{11800}-\u{1182E}\u{11838}\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193D}\u{1193F}-\u{11942}\u{11944}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D3}\u{119DC}-\u{119DF}\u{119E1}-\u{119E4}\u{11A00}\u{11A07}\u{11A08}\u{11A0B}-\u{11A32}\u{11A39}\u{11A3A}\u{11A3F}-\u{11A46}\u{11A50}\u{11A57}\u{11A58}\u{11A5C}-\u{11A89}\u{11A97}\u{11A9A}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2F}\u{11C3E}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11CA9}\u{11CB1}\u{11CB4}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D93}\u{11D94}\u{11D96}\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF2}\u{11EF5}-\u{11EF8}\u{11FB0}\u{11FC0}-\u{11FD4}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1342E}\u{13430}-\u{13438}\u{14400}-\u{14646}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF5}\u{16B00}-\u{16B2F}\u{16B37}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F50}-\u{16F87}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18D00}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B150}-\u{1B152}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}\u{1BC9F}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D166}\u{1D16A}-\u{1D172}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D1E8}\u{1D2E0}-\u{1D2F3}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6DA}\u{1D6DC}-\u{1D714}\u{1D716}-\u{1D74E}\u{1D750}-\u{1D788}\u{1D78A}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1D800}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA8B}\u{1DF00}-\u{1DF1E}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E2F0}-\u{1E2F9}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1F110}-\u{1F12E}\u{1F130}-\u{1F169}\u{1F170}-\u{1F1AC}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B738}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}]/u,WZ1=/[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}]/u,GZ1=/^[\0-\x08\x0E-\x1B!-@\[-`\{-\x84\x86-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02B9\u02BA\u02C2-\u02CF\u02D2-\u02DF\u02E5-\u02ED\u02EF-\u036F\u0374\u0375\u037E\u0384\u0385\u0387\u03F6\u0483-\u0489\u058A\u058D-\u058F\u0591-\u05C7\u05D0-\u05EA\u05EF-\u05F4\u0600-\u070D\u070F-\u074A\u074D-\u07B1\u07C0-\u07FA\u07FD-\u082D\u0830-\u083E\u0840-\u085B\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u0898-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09F2\u09F3\u09FB\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AF1\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0BF3-\u0BFA\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C78-\u0C7E\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E3F\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39-\u0F3D\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1390-\u1399\u1400\u169B\u169C\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DB\u17DD\u17F0-\u17F9\u1800-\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1940\u1944\u1945\u19DE-\u19FF\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u200B-\u200D\u200F-\u2027\u202F-\u205E\u2060-\u2064\u206A-\u2070\u2074-\u207E\u2080-\u208E\u20A0-\u20C0\u20D0-\u20F0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u2150-\u215F\u2189-\u218B\u2190-\u2335\u237B-\u2394\u2396-\u2426\u2440-\u244A\u2460-\u249B\u24EA-\u26AB\u26AD-\u27FF\u2900-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF9-\u2CFF\u2D7F\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u3004\u3008-\u3020\u302A-\u302D\u3030\u3036\u3037\u303D-\u303F\u3099-\u309C\u30A0\u30FB\u31C0-\u31E3\u321D\u321E\u3250-\u325F\u327C-\u327E\u32B1-\u32BF\u32CC-\u32CF\u3377-\u337A\u33DE\u33DF\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA60D-\uA60F\uA66F-\uA67F\uA69E\uA69F\uA6F0\uA6F1\uA700-\uA721\uA788\uA802\uA806\uA80B\uA825\uA826\uA828-\uA82C\uA838\uA839\uA874-\uA877\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uAB6A\uAB6B\uABE5\uABE8\uABED\uFB1D-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD8F\uFD92-\uFDC7\uFDCF\uFDF0-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFE70-\uFE74\uFE76-\uFEFC\uFEFF\uFF01-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD\u{10101}\u{10140}-\u{1018C}\u{10190}-\u{1019C}\u{101A0}\u{101FD}\u{102E0}-\u{102FB}\u{10376}-\u{1037A}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{1091F}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A38}-\u{10A3A}\u{10A3F}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE6}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B39}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D27}\u{10D30}-\u{10D39}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAB}-\u{10EAD}\u{10EB0}\u{10EB1}\u{10F00}-\u{10F27}\u{10F30}-\u{10F59}\u{10F70}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{11001}\u{11038}-\u{11046}\u{11052}-\u{11065}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{11660}-\u{1166C}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}-\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11FD5}-\u{11FF1}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE2}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D1E9}\u{1D1EA}\u{1D200}-\u{1D245}\u{1D300}-\u{1D356}\u{1D6DB}\u{1D715}\u{1D74F}\u{1D789}\u{1D7C3}\u{1D7CE}-\u{1D7FF}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E2FF}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8D6}\u{1E900}-\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1EEF0}\u{1EEF1}\u{1F000}-\u{1F02B}\u{1F030}-\u{1F093}\u{1F0A0}-\u{1F0AE}\u{1F0B1}-\u{1F0BF}\u{1F0C1}-\u{1F0CF}\u{1F0D1}-\u{1F0F5}\u{1F100}-\u{1F10F}\u{1F12F}\u{1F16A}-\u{1F16F}\u{1F1AD}\u{1F260}-\u{1F265}\u{1F300}-\u{1F6D7}\u{1F6DD}-\u{1F6EC}\u{1F6F0}-\u{1F6FC}\u{1F700}-\u{1F773}\u{1F780}-\u{1F7D8}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F800}-\u{1F80B}\u{1F810}-\u{1F847}\u{1F850}-\u{1F859}\u{1F860}-\u{1F887}\u{1F890}-\u{1F8AD}\u{1F8B0}\u{1F8B1}\u{1F900}-\u{1FA53}\u{1FA60}-\u{1FA6D}\u{1FA70}-\u{1FA74}\u{1FA78}-\u{1FA7C}\u{1FA80}-\u{1FA86}\u{1FA90}-\u{1FAAC}\u{1FAB0}-\u{1FABA}\u{1FAC0}-\u{1FAC5}\u{1FAD0}-\u{1FAD9}\u{1FAE0}-\u{1FAE7}\u{1FAF0}-\u{1FAF6}\u{1FB00}-\u{1FB92}\u{1FB94}-\u{1FBCA}\u{1FBF0}-\u{1FBF9}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*$/u,KZ1=/[0-9\xB2\xB3\xB9\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0600-\u0605\u0608\u060B\u060D\u061B-\u064A\u0660-\u0669\u066B-\u066F\u0671-\u06D5\u06DD\u06E5\u06E6\u06EE-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u08A0-\u08C9\u08E2\u200F\u2070\u2074-\u2079\u2080-\u2089\u2488-\u249B\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\u{102E1}-\u{102FB}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D30}-\u{10D39}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1D7CE}-\u{1D7FF}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1F100}-\u{1F10A}\u{1FBF0}-\u{1FBF9}][\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10EAB}\u{10EAC}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}-\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*$/u,QZ1=/[0-9\xB2\xB3\xB9\u06F0-\u06F9\u2070\u2074-\u2079\u2080-\u2089\u2488-\u249B\uFF10-\uFF19\u{102E1}-\u{102FB}\u{1D7CE}-\u{1D7FF}\u{1F100}-\u{1F10A}\u{1FBF0}-\u{1FBF9}]/u,zZ1=/[\u0600-\u0605\u0660-\u0669\u066B\u066C\u06DD\u0890\u0891\u08E2\u{10D30}-\u{10D39}\u{10E60}-\u{10E7E}]/u,HZ1=/^[\0-\x08\x0E-\x1B!-\x84\x86-\u0377\u037A-\u037F\u0384-\u038A\u038C\u038E-\u03A1\u03A3-\u052F\u0531-\u0556\u0559-\u058A\u058D-\u058F\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0606\u0607\u0609\u060A\u060C\u060E-\u061A\u064B-\u065F\u066A\u0670\u06D6-\u06DC\u06DE-\u06E4\u06E7-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07F6-\u07F9\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A76\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AF1\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B77\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BFA\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C77-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4F\u0D54-\u0D63\u0D66-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E3A\u0E3F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F47\u0F49-\u0F6C\u0F71-\u0F97\u0F99-\u0FBC\u0FBE-\u0FCC\u0FCE-\u0FDA\u1000-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u137C\u1380-\u1399\u13A0-\u13F5\u13F8-\u13FD\u1400-\u167F\u1681-\u169C\u16A0-\u16F8\u1700-\u1715\u171F-\u1736\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17DD\u17E0-\u17E9\u17F0-\u17F9\u1800-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1940\u1944-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u19DE-\u1A1B\u1A1E-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1AB0-\u1ACE\u1B00-\u1B4C\u1B50-\u1B7E\u1B80-\u1BF3\u1BFC-\u1C37\u1C3B-\u1C49\u1C4D-\u1C88\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD0-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FC4\u1FC6-\u1FD3\u1FD6-\u1FDB\u1FDD-\u1FEF\u1FF2-\u1FF4\u1FF6-\u1FFE\u200B-\u200E\u2010-\u2027\u202F-\u205E\u2060-\u2064\u206A-\u2071\u2074-\u208E\u2090-\u209C\u20A0-\u20C0\u20D0-\u20F0\u2100-\u218B\u2190-\u2426\u2440-\u244A\u2460-\u2B73\u2B76-\u2B95\u2B97-\u2CF3\u2CF9-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303F\u3041-\u3096\u3099-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31E3\u31F0-\u321E\u3220-\uA48C\uA490-\uA4C6\uA4D0-\uA62B\uA640-\uA6F7\uA700-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA82C\uA830-\uA839\uA840-\uA877\uA880-\uA8C5\uA8CE-\uA8D9\uA8E0-\uA953\uA95F-\uA97C\uA980-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA5C-\uAAC2\uAADB-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB6B\uAB70-\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1E\uFB29\uFD3E-\uFD4F\uFDCF\uFDFD-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFEFF\uFF01-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}-\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1018E}\u{10190}-\u{1019C}\u{101A0}\u{101D0}-\u{101FD}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E0}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{1037A}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{1091F}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10B39}-\u{10B3F}\u{10D24}-\u{10D27}\u{10EAB}\u{10EAC}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{1104D}\u{11052}-\u{11075}\u{1107F}-\u{110C2}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11100}-\u{11134}\u{11136}-\u{11147}\u{11150}-\u{11176}\u{11180}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{1123E}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112EA}\u{112F0}-\u{112F9}\u{11300}-\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133B}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11400}-\u{1145B}\u{1145D}-\u{11461}\u{11480}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B5}\u{115B8}-\u{115DD}\u{11600}-\u{11644}\u{11650}-\u{11659}\u{11660}-\u{1166C}\u{11680}-\u{116B9}\u{116C0}-\u{116C9}\u{11700}-\u{1171A}\u{1171D}-\u{1172B}\u{11730}-\u{11746}\u{11800}-\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D7}\u{119DA}-\u{119E4}\u{11A00}-\u{11A47}\u{11A50}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C36}\u{11C38}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D47}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF8}\u{11FB0}\u{11FC0}-\u{11FF1}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1342E}\u{13430}-\u{13438}\u{14400}-\u{14646}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF0}-\u{16AF5}\u{16B00}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F4F}-\u{16F87}\u{16F8F}-\u{16F9F}\u{16FE0}-\u{16FE4}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18D00}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B150}-\u{1B152}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}-\u{1BCA3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D1EA}\u{1D200}-\u{1D245}\u{1D2E0}-\u{1D2F3}\u{1D300}-\u{1D356}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D7CB}\u{1D7CE}-\u{1DA8B}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1DF00}-\u{1DF1E}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E100}-\u{1E12C}\u{1E130}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AE}\u{1E2C0}-\u{1E2F9}\u{1E2FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{1EEF0}\u{1EEF1}\u{1F000}-\u{1F02B}\u{1F030}-\u{1F093}\u{1F0A0}-\u{1F0AE}\u{1F0B1}-\u{1F0BF}\u{1F0C1}-\u{1F0CF}\u{1F0D1}-\u{1F0F5}\u{1F100}-\u{1F1AD}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{1F260}-\u{1F265}\u{1F300}-\u{1F6D7}\u{1F6DD}-\u{1F6EC}\u{1F6F0}-\u{1F6FC}\u{1F700}-\u{1F773}\u{1F780}-\u{1F7D8}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F800}-\u{1F80B}\u{1F810}-\u{1F847}\u{1F850}-\u{1F859}\u{1F860}-\u{1F887}\u{1F890}-\u{1F8AD}\u{1F8B0}\u{1F8B1}\u{1F900}-\u{1FA53}\u{1FA60}-\u{1FA6D}\u{1FA70}-\u{1FA74}\u{1FA78}-\u{1FA7C}\u{1FA80}-\u{1FA86}\u{1FA90}-\u{1FAAC}\u{1FAB0}-\u{1FABA}\u{1FAC0}-\u{1FAC5}\u{1FAD0}-\u{1FAD9}\u{1FAE0}-\u{1FAE7}\u{1FAF0}-\u{1FAF6}\u{1FB00}-\u{1FB92}\u{1FB94}-\u{1FBCA}\u{1FBF0}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B738}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}]*$/u,FZ1=/[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02BB-\u02C1\u02D0\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0482\u048A-\u052F\u0531-\u0556\u0559-\u0589\u06F0-\u06F9\u0903-\u0939\u093B\u093D-\u0940\u0949-\u094C\u094E-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C0\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09FA\u09FC\u09FD\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A76\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC0\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0\u0AE1\u0AE6-\u0AF0\u0AF9\u0B02\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C77\u0C7F\u0C80\u0C82-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D02-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D4F\u0D54-\u0D61\u0D66-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E4F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3E-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u1000-\u102C\u1031\u1038\u103B\u103C\u103F-\u1057\u105A-\u105D\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108C\u108E-\u109C\u109E-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u167F\u1681-\u169A\u16A0-\u16F8\u1700-\u1711\u1715\u171F-\u1731\u1734-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7\u17C8\u17D4-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A19\u1A1A\u1A1E-\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1B04-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B4C\u1B50-\u1B6A\u1B74-\u1B7E\u1B82-\u1BA1\u1BA6\u1BA7\u1BAA\u1BAE-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1BFC-\u1C2B\u1C34\u1C35\u1C3B-\u1C49\u1C4D-\u1C88\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5-\u1CF7\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2188\u2336-\u237A\u2395\u2488-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u302E\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31BF\u31F0-\u321C\u3220-\u324F\u3260-\u327B\u327F-\u32B0\u32C0-\u32CB\u32D0-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA60C\uA610-\uA62B\uA640-\uA66E\uA680-\uA69D\uA6A0-\uA6EF\uA6F2-\uA6F7\uA722-\uA787\uA789-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA824\uA827\uA830-\uA837\uA840-\uA873\uA880-\uA8C3\uA8CE-\uA8D9\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA952\uA953\uA95F-\uA97C\uA983-\uA9B2\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA2F\uAA30\uAA33\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA7B\uAA7D-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAAEB\uAAEE-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB69\uAB70-\uABE4\uABE6\uABE7\uABE9-\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1013F}\u{1018D}\u{1018E}\u{101D0}-\u{101FC}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E1}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{11000}\u{11002}-\u{11037}\u{11047}-\u{1104D}\u{11066}-\u{1106F}\u{11071}\u{11072}\u{11075}\u{11082}-\u{110B2}\u{110B7}\u{110B8}\u{110BB}-\u{110C1}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11103}-\u{11126}\u{1112C}\u{11136}-\u{11147}\u{11150}-\u{11172}\u{11174}-\u{11176}\u{11182}-\u{111B5}\u{111BF}-\u{111C8}\u{111CD}\u{111CE}\u{111D0}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{1122E}\u{11232}\u{11233}\u{11235}\u{11238}-\u{1123D}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112DE}\u{112E0}-\u{112E2}\u{112F0}-\u{112F9}\u{11302}\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}-\u{1133F}\u{11341}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11400}-\u{11437}\u{11440}\u{11441}\u{11445}\u{11447}-\u{1145B}\u{1145D}\u{1145F}-\u{11461}\u{11480}-\u{114B2}\u{114B9}\u{114BB}-\u{114BE}\u{114C1}\u{114C4}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B1}\u{115B8}-\u{115BB}\u{115BE}\u{115C1}-\u{115DB}\u{11600}-\u{11632}\u{1163B}\u{1163C}\u{1163E}\u{11641}-\u{11644}\u{11650}-\u{11659}\u{11680}-\u{116AA}\u{116AC}\u{116AE}\u{116AF}\u{116B6}\u{116B8}\u{116B9}\u{116C0}-\u{116C9}\u{11700}-\u{1171A}\u{11720}\u{11721}\u{11726}\u{11730}-\u{11746}\u{11800}-\u{1182E}\u{11838}\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193D}\u{1193F}-\u{11942}\u{11944}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D3}\u{119DC}-\u{119DF}\u{119E1}-\u{119E4}\u{11A00}\u{11A07}\u{11A08}\u{11A0B}-\u{11A32}\u{11A39}\u{11A3A}\u{11A3F}-\u{11A46}\u{11A50}\u{11A57}\u{11A58}\u{11A5C}-\u{11A89}\u{11A97}\u{11A9A}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2F}\u{11C3E}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11CA9}\u{11CB1}\u{11CB4}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D93}\u{11D94}\u{11D96}\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF2}\u{11EF5}-\u{11EF8}\u{11FB0}\u{11FC0}-\u{11FD4}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1342E}\u{13430}-\u{13438}\u{14400}-\u{14646}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF5}\u{16B00}-\u{16B2F}\u{16B37}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F50}-\u{16F87}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18D00}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B150}-\u{1B152}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}\u{1BC9F}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D166}\u{1D16A}-\u{1D172}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D1E8}\u{1D2E0}-\u{1D2F3}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6DA}\u{1D6DC}-\u{1D714}\u{1D716}-\u{1D74E}\u{1D750}-\u{1D788}\u{1D78A}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1D7CE}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA8B}\u{1DF00}-\u{1DF1E}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E2F0}-\u{1E2F9}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1F100}-\u{1F10A}\u{1F110}-\u{1F12E}\u{1F130}-\u{1F169}\u{1F170}-\u{1F1AC}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{1FBF0}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B738}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}][\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10EAB}\u{10EAC}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}-\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*$/u;KC.exports={combiningMarks:ZZ1,combiningClassVirama:YZ1,validZWNJ:XZ1,bidiDomain:JZ1,bidiS1LTR:$Z1,bidiS1RTL:WZ1,bidiS2:GZ1,bidiS3:KZ1,bidiS4EN:QZ1,bidiS4AN:zZ1,bidiS5:HZ1,bidiS6:FZ1}});var zC=w((lj1,UZ1)=>{UZ1.exports=[[[0,44],4],[[45,46],2],[47,4],[[48,57],2],[[58,64],4],[65,1,"a"],[66,1,"b"],[67,1,"c"],[68,1,"d"],[69,1,"e"],[70,1,"f"],[71,1,"g"],[72,1,"h"],[73,1,"i"],[74,1,"j"],[75,1,"k"],[76,1,"l"],[77,1,"m"],[78,1,"n"],[79,1,"o"],[80,1,"p"],[81,1,"q"],[82,1,"r"],[83,1,"s"],[84,1,"t"],[85,1,"u"],[86,1,"v"],[87,1,"w"],[88,1,"x"],[89,1,"y"],[90,1,"z"],[[91,96],4],[[97,122],2],[[123,127],4],[[128,159],3],[160,5," "],[[161,167],2],[168,5," \u0308"],[169,2],[170,1,"a"],[[171,172],2],[173,7],[174,2],[175,5," \u0304"],[[176,177],2],[178,1,"2"],[179,1,"3"],[180,5," \u0301"],[181,1,"\u03BC"],[182,2],[183,2],[184,5," \u0327"],[185,1,"1"],[186,1,"o"],[187,2],[188,1,"1\u20444"],[189,1,"1\u20442"],[190,1,"3\u20444"],[191,2],[192,1,"\xE0"],[193,1,"\xE1"],[194,1,"\xE2"],[195,1,"\xE3"],[196,1,"\xE4"],[197,1,"\xE5"],[198,1,"\xE6"],[199,1,"\xE7"],[200,1,"\xE8"],[201,1,"\xE9"],[202,1,"\xEA"],[203,1,"\xEB"],[204,1,"\xEC"],[205,1,"\xED"],[206,1,"\xEE"],[207,1,"\xEF"],[208,1,"\xF0"],[209,1,"\xF1"],[210,1,"\xF2"],[211,1,"\xF3"],[212,1,"\xF4"],[213,1,"\xF5"],[214,1,"\xF6"],[215,2],[216,1,"\xF8"],[217,1,"\xF9"],[218,1,"\xFA"],[219,1,"\xFB"],[220,1,"\xFC"],[221,1,"\xFD"],[222,1,"\xFE"],[223,6,"ss"],[[224,246],2],[247,2],[[248,255],2],[256,1,"\u0101"],[257,2],[258,1,"\u0103"],[259,2],[260,1,"\u0105"],[261,2],[262,1,"\u0107"],[263,2],[264,1,"\u0109"],[265,2],[266,1,"\u010B"],[267,2],[268,1,"\u010D"],[269,2],[270,1,"\u010F"],[271,2],[272,1,"\u0111"],[273,2],[274,1,"\u0113"],[275,2],[276,1,"\u0115"],[277,2],[278,1,"\u0117"],[279,2],[280,1,"\u0119"],[281,2],[282,1,"\u011B"],[283,2],[284,1,"\u011D"],[285,2],[286,1,"\u011F"],[287,2],[288,1,"\u0121"],[289,2],[290,1,"\u0123"],[291,2],[292,1,"\u0125"],[293,2],[294,1,"\u0127"],[295,2],[296,1,"\u0129"],[297,2],[298,1,"\u012B"],[299,2],[300,1,"\u012D"],[301,2],[302,1,"\u012F"],[303,2],[304,1,"i\u0307"],[305,2],[[306,307],1,"ij"],[308,1,"\u0135"],[309,2],[310,1,"\u0137"],[[311,312],2],[313,1,"\u013A"],[314,2],[315,1,"\u013C"],[316,2],[317,1,"\u013E"],[318,2],[[319,320],1,"l\xB7"],[321,1,"\u0142"],[322,2],[323,1,"\u0144"],[324,2],[325,1,"\u0146"],[326,2],[327,1,"\u0148"],[328,2],[329,1,"\u02BCn"],[330,1,"\u014B"],[331,2],[332,1,"\u014D"],[333,2],[334,1,"\u014F"],[335,2],[336,1,"\u0151"],[337,2],[338,1,"\u0153"],[339,2],[340,1,"\u0155"],[341,2],[342,1,"\u0157"],[343,2],[344,1,"\u0159"],[345,2],[346,1,"\u015B"],[347,2],[348,1,"\u015D"],[349,2],[350,1,"\u015F"],[351,2],[352,1,"\u0161"],[353,2],[354,1,"\u0163"],[355,2],[356,1,"\u0165"],[357,2],[358,1,"\u0167"],[359,2],[360,1,"\u0169"],[361,2],[362,1,"\u016B"],[363,2],[364,1,"\u016D"],[365,2],[366,1,"\u016F"],[367,2],[368,1,"\u0171"],[369,2],[370,1,"\u0173"],[371,2],[372,1,"\u0175"],[373,2],[374,1,"\u0177"],[375,2],[376,1,"\xFF"],[377,1,"\u017A"],[378,2],[379,1,"\u017C"],[380,2],[381,1,"\u017E"],[382,2],[383,1,"s"],[384,2],[385,1,"\u0253"],[386,1,"\u0183"],[387,2],[388,1,"\u0185"],[389,2],[390,1,"\u0254"],[391,1,"\u0188"],[392,2],[393,1,"\u0256"],[394,1,"\u0257"],[395,1,"\u018C"],[[396,397],2],[398,1,"\u01DD"],[399,1,"\u0259"],[400,1,"\u025B"],[401,1,"\u0192"],[402,2],[403,1,"\u0260"],[404,1,"\u0263"],[405,2],[406,1,"\u0269"],[407,1,"\u0268"],[408,1,"\u0199"],[[409,411],2],[412,1,"\u026F"],[413,1,"\u0272"],[414,2],[415,1,"\u0275"],[416,1,"\u01A1"],[417,2],[418,1,"\u01A3"],[419,2],[420,1,"\u01A5"],[421,2],[422,1,"\u0280"],[423,1,"\u01A8"],[424,2],[425,1,"\u0283"],[[426,427],2],[428,1,"\u01AD"],[429,2],[430,1,"\u0288"],[431,1,"\u01B0"],[432,2],[433,1,"\u028A"],[434,1,"\u028B"],[435,1,"\u01B4"],[436,2],[437,1,"\u01B6"],[438,2],[439,1,"\u0292"],[440,1,"\u01B9"],[[441,443],2],[444,1,"\u01BD"],[[445,451],2],[[452,454],1,"d\u017E"],[[455,457],1,"lj"],[[458,460],1,"nj"],[461,1,"\u01CE"],[462,2],[463,1,"\u01D0"],[464,2],[465,1,"\u01D2"],[466,2],[467,1,"\u01D4"],[468,2],[469,1,"\u01D6"],[470,2],[471,1,"\u01D8"],[472,2],[473,1,"\u01DA"],[474,2],[475,1,"\u01DC"],[[476,477],2],[478,1,"\u01DF"],[479,2],[480,1,"\u01E1"],[481,2],[482,1,"\u01E3"],[483,2],[484,1,"\u01E5"],[485,2],[486,1,"\u01E7"],[487,2],[488,1,"\u01E9"],[489,2],[490,1,"\u01EB"],[491,2],[492,1,"\u01ED"],[493,2],[494,1,"\u01EF"],[[495,496],2],[[497,499],1,"dz"],[500,1,"\u01F5"],[501,2],[502,1,"\u0195"],[503,1,"\u01BF"],[504,1,"\u01F9"],[505,2],[506,1,"\u01FB"],[507,2],[508,1,"\u01FD"],[509,2],[510,1,"\u01FF"],[511,2],[512,1,"\u0201"],[513,2],[514,1,"\u0203"],[515,2],[516,1,"\u0205"],[517,2],[518,1,"\u0207"],[519,2],[520,1,"\u0209"],[521,2],[522,1,"\u020B"],[523,2],[524,1,"\u020D"],[525,2],[526,1,"\u020F"],[527,2],[528,1,"\u0211"],[529,2],[530,1,"\u0213"],[531,2],[532,1,"\u0215"],[533,2],[534,1,"\u0217"],[535,2],[536,1,"\u0219"],[537,2],[538,1,"\u021B"],[539,2],[540,1,"\u021D"],[541,2],[542,1,"\u021F"],[543,2],[544,1,"\u019E"],[545,2],[546,1,"\u0223"],[547,2],[548,1,"\u0225"],[549,2],[550,1,"\u0227"],[551,2],[552,1,"\u0229"],[553,2],[554,1,"\u022B"],[555,2],[556,1,"\u022D"],[557,2],[558,1,"\u022F"],[559,2],[560,1,"\u0231"],[561,2],[562,1,"\u0233"],[563,2],[[564,566],2],[[567,569],2],[570,1,"\u2C65"],[571,1,"\u023C"],[572,2],[573,1,"\u019A"],[574,1,"\u2C66"],[[575,576],2],[577,1,"\u0242"],[578,2],[579,1,"\u0180"],[580,1,"\u0289"],[581,1,"\u028C"],[582,1,"\u0247"],[583,2],[584,1,"\u0249"],[585,2],[586,1,"\u024B"],[587,2],[588,1,"\u024D"],[589,2],[590,1,"\u024F"],[591,2],[[592,680],2],[[681,685],2],[[686,687],2],[688,1,"h"],[689,1,"\u0266"],[690,1,"j"],[691,1,"r"],[692,1,"\u0279"],[693,1,"\u027B"],[694,1,"\u0281"],[695,1,"w"],[696,1,"y"],[[697,705],2],[[706,709],2],[[710,721],2],[[722,727],2],[728,5," \u0306"],[729,5," \u0307"],[730,5," \u030A"],[731,5," \u0328"],[732,5," \u0303"],[733,5," \u030B"],[734,2],[735,2],[736,1,"\u0263"],[737,1,"l"],[738,1,"s"],[739,1,"x"],[740,1,"\u0295"],[[741,745],2],[[746,747],2],[748,2],[749,2],[750,2],[[751,767],2],[[768,831],2],[832,1,"\u0300"],[833,1,"\u0301"],[834,2],[835,1,"\u0313"],[836,1,"\u0308\u0301"],[837,1,"\u03B9"],[[838,846],2],[847,7],[[848,855],2],[[856,860],2],[[861,863],2],[[864,865],2],[866,2],[[867,879],2],[880,1,"\u0371"],[881,2],[882,1,"\u0373"],[883,2],[884,1,"\u02B9"],[885,2],[886,1,"\u0377"],[887,2],[[888,889],3],[890,5," \u03B9"],[[891,893],2],[894,5,";"],[895,1,"\u03F3"],[[896,899],3],[900,5," \u0301"],[901,5," \u0308\u0301"],[902,1,"\u03AC"],[903,1,"\xB7"],[904,1,"\u03AD"],[905,1,"\u03AE"],[906,1,"\u03AF"],[907,3],[908,1,"\u03CC"],[909,3],[910,1,"\u03CD"],[911,1,"\u03CE"],[912,2],[913,1,"\u03B1"],[914,1,"\u03B2"],[915,1,"\u03B3"],[916,1,"\u03B4"],[917,1,"\u03B5"],[918,1,"\u03B6"],[919,1,"\u03B7"],[920,1,"\u03B8"],[921,1,"\u03B9"],[922,1,"\u03BA"],[923,1,"\u03BB"],[924,1,"\u03BC"],[925,1,"\u03BD"],[926,1,"\u03BE"],[927,1,"\u03BF"],[928,1,"\u03C0"],[929,1,"\u03C1"],[930,3],[931,1,"\u03C3"],[932,1,"\u03C4"],[933,1,"\u03C5"],[934,1,"\u03C6"],[935,1,"\u03C7"],[936,1,"\u03C8"],[937,1,"\u03C9"],[938,1,"\u03CA"],[939,1,"\u03CB"],[[940,961],2],[962,6,"\u03C3"],[[963,974],2],[975,1,"\u03D7"],[976,1,"\u03B2"],[977,1,"\u03B8"],[978,1,"\u03C5"],[979,1,"\u03CD"],[980,1,"\u03CB"],[981,1,"\u03C6"],[982,1,"\u03C0"],[983,2],[984,1,"\u03D9"],[985,2],[986,1,"\u03DB"],[987,2],[988,1,"\u03DD"],[989,2],[990,1,"\u03DF"],[991,2],[992,1,"\u03E1"],[993,2],[994,1,"\u03E3"],[995,2],[996,1,"\u03E5"],[997,2],[998,1,"\u03E7"],[999,2],[1000,1,"\u03E9"],[1001,2],[1002,1,"\u03EB"],[1003,2],[1004,1,"\u03ED"],[1005,2],[1006,1,"\u03EF"],[1007,2],[1008,1,"\u03BA"],[1009,1,"\u03C1"],[1010,1,"\u03C3"],[1011,2],[1012,1,"\u03B8"],[1013,1,"\u03B5"],[1014,2],[1015,1,"\u03F8"],[1016,2],[1017,1,"\u03C3"],[1018,1,"\u03FB"],[1019,2],[1020,2],[1021,1,"\u037B"],[1022,1,"\u037C"],[1023,1,"\u037D"],[1024,1,"\u0450"],[1025,1,"\u0451"],[1026,1,"\u0452"],[1027,1,"\u0453"],[1028,1,"\u0454"],[1029,1,"\u0455"],[1030,1,"\u0456"],[1031,1,"\u0457"],[1032,1,"\u0458"],[1033,1,"\u0459"],[1034,1,"\u045A"],[1035,1,"\u045B"],[1036,1,"\u045C"],[1037,1,"\u045D"],[1038,1,"\u045E"],[1039,1,"\u045F"],[1040,1,"\u0430"],[1041,1,"\u0431"],[1042,1,"\u0432"],[1043,1,"\u0433"],[1044,1,"\u0434"],[1045,1,"\u0435"],[1046,1,"\u0436"],[1047,1,"\u0437"],[1048,1,"\u0438"],[1049,1,"\u0439"],[1050,1,"\u043A"],[1051,1,"\u043B"],[1052,1,"\u043C"],[1053,1,"\u043D"],[1054,1,"\u043E"],[1055,1,"\u043F"],[1056,1,"\u0440"],[1057,1,"\u0441"],[1058,1,"\u0442"],[1059,1,"\u0443"],[1060,1,"\u0444"],[1061,1,"\u0445"],[1062,1,"\u0446"],[1063,1,"\u0447"],[1064,1,"\u0448"],[1065,1,"\u0449"],[1066,1,"\u044A"],[1067,1,"\u044B"],[1068,1,"\u044C"],[1069,1,"\u044D"],[1070,1,"\u044E"],[1071,1,"\u044F"],[[1072,1103],2],[1104,2],[[1105,1116],2],[1117,2],[[1118,1119],2],[1120,1,"\u0461"],[1121,2],[1122,1,"\u0463"],[1123,2],[1124,1,"\u0465"],[1125,2],[1126,1,"\u0467"],[1127,2],[1128,1,"\u0469"],[1129,2],[1130,1,"\u046B"],[1131,2],[1132,1,"\u046D"],[1133,2],[1134,1,"\u046F"],[1135,2],[1136,1,"\u0471"],[1137,2],[1138,1,"\u0473"],[1139,2],[1140,1,"\u0475"],[1141,2],[1142,1,"\u0477"],[1143,2],[1144,1,"\u0479"],[1145,2],[1146,1,"\u047B"],[1147,2],[1148,1,"\u047D"],[1149,2],[1150,1,"\u047F"],[1151,2],[1152,1,"\u0481"],[1153,2],[1154,2],[[1155,1158],2],[1159,2],[[1160,1161],2],[1162,1,"\u048B"],[1163,2],[1164,1,"\u048D"],[1165,2],[1166,1,"\u048F"],[1167,2],[1168,1,"\u0491"],[1169,2],[1170,1,"\u0493"],[1171,2],[1172,1,"\u0495"],[1173,2],[1174,1,"\u0497"],[1175,2],[1176,1,"\u0499"],[1177,2],[1178,1,"\u049B"],[1179,2],[1180,1,"\u049D"],[1181,2],[1182,1,"\u049F"],[1183,2],[1184,1,"\u04A1"],[1185,2],[1186,1,"\u04A3"],[1187,2],[1188,1,"\u04A5"],[1189,2],[1190,1,"\u04A7"],[1191,2],[1192,1,"\u04A9"],[1193,2],[1194,1,"\u04AB"],[1195,2],[1196,1,"\u04AD"],[1197,2],[1198,1,"\u04AF"],[1199,2],[1200,1,"\u04B1"],[1201,2],[1202,1,"\u04B3"],[1203,2],[1204,1,"\u04B5"],[1205,2],[1206,1,"\u04B7"],[1207,2],[1208,1,"\u04B9"],[1209,2],[1210,1,"\u04BB"],[1211,2],[1212,1,"\u04BD"],[1213,2],[1214,1,"\u04BF"],[1215,2],[1216,3],[1217,1,"\u04C2"],[1218,2],[1219,1,"\u04C4"],[1220,2],[1221,1,"\u04C6"],[1222,2],[1223,1,"\u04C8"],[1224,2],[1225,1,"\u04CA"],[1226,2],[1227,1,"\u04CC"],[1228,2],[1229,1,"\u04CE"],[1230,2],[1231,2],[1232,1,"\u04D1"],[1233,2],[1234,1,"\u04D3"],[1235,2],[1236,1,"\u04D5"],[1237,2],[1238,1,"\u04D7"],[1239,2],[1240,1,"\u04D9"],[1241,2],[1242,1,"\u04DB"],[1243,2],[1244,1,"\u04DD"],[1245,2],[1246,1,"\u04DF"],[1247,2],[1248,1,"\u04E1"],[1249,2],[1250,1,"\u04E3"],[1251,2],[1252,1,"\u04E5"],[1253,2],[1254,1,"\u04E7"],[1255,2],[1256,1,"\u04E9"],[1257,2],[1258,1,"\u04EB"],[1259,2],[1260,1,"\u04ED"],[1261,2],[1262,1,"\u04EF"],[1263,2],[1264,1,"\u04F1"],[1265,2],[1266,1,"\u04F3"],[1267,2],[1268,1,"\u04F5"],[1269,2],[1270,1,"\u04F7"],[1271,2],[1272,1,"\u04F9"],[1273,2],[1274,1,"\u04FB"],[1275,2],[1276,1,"\u04FD"],[1277,2],[1278,1,"\u04FF"],[1279,2],[1280,1,"\u0501"],[1281,2],[1282,1,"\u0503"],[1283,2],[1284,1,"\u0505"],[1285,2],[1286,1,"\u0507"],[1287,2],[1288,1,"\u0509"],[1289,2],[1290,1,"\u050B"],[1291,2],[1292,1,"\u050D"],[1293,2],[1294,1,"\u050F"],[1295,2],[1296,1,"\u0511"],[1297,2],[1298,1,"\u0513"],[1299,2],[1300,1,"\u0515"],[1301,2],[1302,1,"\u0517"],[1303,2],[1304,1,"\u0519"],[1305,2],[1306,1,"\u051B"],[1307,2],[1308,1,"\u051D"],[1309,2],[1310,1,"\u051F"],[1311,2],[1312,1,"\u0521"],[1313,2],[1314,1,"\u0523"],[1315,2],[1316,1,"\u0525"],[1317,2],[1318,1,"\u0527"],[1319,2],[1320,1,"\u0529"],[1321,2],[1322,1,"\u052B"],[1323,2],[1324,1,"\u052D"],[1325,2],[1326,1,"\u052F"],[1327,2],[1328,3],[1329,1,"\u0561"],[1330,1,"\u0562"],[1331,1,"\u0563"],[1332,1,"\u0564"],[1333,1,"\u0565"],[1334,1,"\u0566"],[1335,1,"\u0567"],[1336,1,"\u0568"],[1337,1,"\u0569"],[1338,1,"\u056A"],[1339,1,"\u056B"],[1340,1,"\u056C"],[1341,1,"\u056D"],[1342,1,"\u056E"],[1343,1,"\u056F"],[1344,1,"\u0570"],[1345,1,"\u0571"],[1346,1,"\u0572"],[1347,1,"\u0573"],[1348,1,"\u0574"],[1349,1,"\u0575"],[1350,1,"\u0576"],[1351,1,"\u0577"],[1352,1,"\u0578"],[1353,1,"\u0579"],[1354,1,"\u057A"],[1355,1,"\u057B"],[1356,1,"\u057C"],[1357,1,"\u057D"],[1358,1,"\u057E"],[1359,1,"\u057F"],[1360,1,"\u0580"],[1361,1,"\u0581"],[1362,1,"\u0582"],[1363,1,"\u0583"],[1364,1,"\u0584"],[1365,1,"\u0585"],[1366,1,"\u0586"],[[1367,1368],3],[1369,2],[[1370,1375],2],[1376,2],[[1377,1414],2],[1415,1,"\u0565\u0582"],[1416,2],[1417,2],[1418,2],[[1419,1420],3],[[1421,1422],2],[1423,2],[1424,3],[[1425,1441],2],[1442,2],[[1443,1455],2],[[1456,1465],2],[1466,2],[[1467,1469],2],[1470,2],[1471,2],[1472,2],[[1473,1474],2],[1475,2],[1476,2],[1477,2],[1478,2],[1479,2],[[1480,1487],3],[[1488,1514],2],[[1515,1518],3],[1519,2],[[1520,1524],2],[[1525,1535],3],[[1536,1539],3],[1540,3],[1541,3],[[1542,1546],2],[1547,2],[1548,2],[[1549,1551],2],[[1552,1557],2],[[1558,1562],2],[1563,2],[1564,3],[1565,2],[1566,2],[1567,2],[1568,2],[[1569,1594],2],[[1595,1599],2],[1600,2],[[1601,1618],2],[[1619,1621],2],[[1622,1624],2],[[1625,1630],2],[1631,2],[[1632,1641],2],[[1642,1645],2],[[1646,1647],2],[[1648,1652],2],[1653,1,"\u0627\u0674"],[1654,1,"\u0648\u0674"],[1655,1,"\u06C7\u0674"],[1656,1,"\u064A\u0674"],[[1657,1719],2],[[1720,1721],2],[[1722,1726],2],[1727,2],[[1728,1742],2],[1743,2],[[1744,1747],2],[1748,2],[[1749,1756],2],[1757,3],[1758,2],[[1759,1768],2],[1769,2],[[1770,1773],2],[[1774,1775],2],[[1776,1785],2],[[1786,1790],2],[1791,2],[[1792,1805],2],[1806,3],[1807,3],[[1808,1836],2],[[1837,1839],2],[[1840,1866],2],[[1867,1868],3],[[1869,1871],2],[[1872,1901],2],[[1902,1919],2],[[1920,1968],2],[1969,2],[[1970,1983],3],[[1984,2037],2],[[2038,2042],2],[[2043,2044],3],[2045,2],[[2046,2047],2],[[2048,2093],2],[[2094,2095],3],[[2096,2110],2],[2111,3],[[2112,2139],2],[[2140,2141],3],[2142,2],[2143,3],[[2144,2154],2],[[2155,2159],3],[[2160,2183],2],[2184,2],[[2185,2190],2],[2191,3],[[2192,2193],3],[[2194,2199],3],[[2200,2207],2],[2208,2],[2209,2],[[2210,2220],2],[[2221,2226],2],[[2227,2228],2],[2229,2],[[2230,2237],2],[[2238,2247],2],[[2248,2258],2],[2259,2],[[2260,2273],2],[2274,3],[2275,2],[[2276,2302],2],[2303,2],[2304,2],[[2305,2307],2],[2308,2],[[2309,2361],2],[[2362,2363],2],[[2364,2381],2],[2382,2],[2383,2],[[2384,2388],2],[2389,2],[[2390,2391],2],[2392,1,"\u0915\u093C"],[2393,1,"\u0916\u093C"],[2394,1,"\u0917\u093C"],[2395,1,"\u091C\u093C"],[2396,1,"\u0921\u093C"],[2397,1,"\u0922\u093C"],[2398,1,"\u092B\u093C"],[2399,1,"\u092F\u093C"],[[2400,2403],2],[[2404,2405],2],[[2406,2415],2],[2416,2],[[2417,2418],2],[[2419,2423],2],[2424,2],[[2425,2426],2],[[2427,2428],2],[2429,2],[[2430,2431],2],[2432,2],[[2433,2435],2],[2436,3],[[2437,2444],2],[[2445,2446],3],[[2447,2448],2],[[2449,2450],3],[[2451,2472],2],[2473,3],[[2474,2480],2],[2481,3],[2482,2],[[2483,2485],3],[[2486,2489],2],[[2490,2491],3],[2492,2],[2493,2],[[2494,2500],2],[[2501,2502],3],[[2503,2504],2],[[2505,2506],3],[[2507,2509],2],[2510,2],[[2511,2518],3],[2519,2],[[2520,2523],3],[2524,1,"\u09A1\u09BC"],[2525,1,"\u09A2\u09BC"],[2526,3],[2527,1,"\u09AF\u09BC"],[[2528,2531],2],[[2532,2533],3],[[2534,2545],2],[[2546,2554],2],[2555,2],[2556,2],[2557,2],[2558,2],[[2559,2560],3],[2561,2],[2562,2],[2563,2],[2564,3],[[2565,2570],2],[[2571,2574],3],[[2575,2576],2],[[2577,2578],3],[[2579,2600],2],[2601,3],[[2602,2608],2],[2609,3],[2610,2],[2611,1,"\u0A32\u0A3C"],[2612,3],[2613,2],[2614,1,"\u0A38\u0A3C"],[2615,3],[[2616,2617],2],[[2618,2619],3],[2620,2],[2621,3],[[2622,2626],2],[[2627,2630],3],[[2631,2632],2],[[2633,2634],3],[[2635,2637],2],[[2638,2640],3],[2641,2],[[2642,2648],3],[2649,1,"\u0A16\u0A3C"],[2650,1,"\u0A17\u0A3C"],[2651,1,"\u0A1C\u0A3C"],[2652,2],[2653,3],[2654,1,"\u0A2B\u0A3C"],[[2655,2661],3],[[2662,2676],2],[2677,2],[2678,2],[[2679,2688],3],[[2689,2691],2],[2692,3],[[2693,2699],2],[2700,2],[2701,2],[2702,3],[[2703,2705],2],[2706,3],[[2707,2728],2],[2729,3],[[2730,2736],2],[2737,3],[[2738,2739],2],[2740,3],[[2741,2745],2],[[2746,2747],3],[[2748,2757],2],[2758,3],[[2759,2761],2],[2762,3],[[2763,2765],2],[[2766,2767],3],[2768,2],[[2769,2783],3],[2784,2],[[2785,2787],2],[[2788,2789],3],[[2790,2799],2],[2800,2],[2801,2],[[2802,2808],3],[2809,2],[[2810,2815],2],[2816,3],[[2817,2819],2],[2820,3],[[2821,2828],2],[[2829,2830],3],[[2831,2832],2],[[2833,2834],3],[[2835,2856],2],[2857,3],[[2858,2864],2],[2865,3],[[2866,2867],2],[2868,3],[2869,2],[[2870,2873],2],[[2874,2875],3],[[2876,2883],2],[2884,2],[[2885,2886],3],[[2887,2888],2],[[2889,2890],3],[[2891,2893],2],[[2894,2900],3],[2901,2],[[2902,2903],2],[[2904,2907],3],[2908,1,"\u0B21\u0B3C"],[2909,1,"\u0B22\u0B3C"],[2910,3],[[2911,2913],2],[[2914,2915],2],[[2916,2917],3],[[2918,2927],2],[2928,2],[2929,2],[[2930,2935],2],[[2936,2945],3],[[2946,2947],2],[2948,3],[[2949,2954],2],[[2955,2957],3],[[2958,2960],2],[2961,3],[[2962,2965],2],[[2966,2968],3],[[2969,2970],2],[2971,3],[2972,2],[2973,3],[[2974,2975],2],[[2976,2978],3],[[2979,2980],2],[[2981,2983],3],[[2984,2986],2],[[2987,2989],3],[[2990,2997],2],[2998,2],[[2999,3001],2],[[3002,3005],3],[[3006,3010],2],[[3011,3013],3],[[3014,3016],2],[3017,3],[[3018,3021],2],[[3022,3023],3],[3024,2],[[3025,3030],3],[3031,2],[[3032,3045],3],[3046,2],[[3047,3055],2],[[3056,3058],2],[[3059,3066],2],[[3067,3071],3],[3072,2],[[3073,3075],2],[3076,2],[[3077,3084],2],[3085,3],[[3086,3088],2],[3089,3],[[3090,3112],2],[3113,3],[[3114,3123],2],[3124,2],[[3125,3129],2],[[3130,3131],3],[3132,2],[3133,2],[[3134,3140],2],[3141,3],[[3142,3144],2],[3145,3],[[3146,3149],2],[[3150,3156],3],[[3157,3158],2],[3159,3],[[3160,3161],2],[3162,2],[[3163,3164],3],[3165,2],[[3166,3167],3],[[3168,3169],2],[[3170,3171],2],[[3172,3173],3],[[3174,3183],2],[[3184,3190],3],[3191,2],[[3192,3199],2],[3200,2],[3201,2],[[3202,3203],2],[3204,2],[[3205,3212],2],[3213,3],[[3214,3216],2],[3217,3],[[3218,3240],2],[3241,3],[[3242,3251],2],[3252,3],[[3253,3257],2],[[3258,3259],3],[[3260,3261],2],[[3262,3268],2],[3269,3],[[3270,3272],2],[3273,3],[[3274,3277],2],[[3278,3284],3],[[3285,3286],2],[[3287,3292],3],[3293,2],[3294,2],[3295,3],[[3296,3297],2],[[3298,3299],2],[[3300,3301],3],[[3302,3311],2],[3312,3],[[3313,3314],2],[[3315,3327],3],[3328,2],[3329,2],[[3330,3331],2],[3332,2],[[3333,3340],2],[3341,3],[[3342,3344],2],[3345,3],[[3346,3368],2],[3369,2],[[3370,3385],2],[3386,2],[[3387,3388],2],[3389,2],[[3390,3395],2],[3396,2],[3397,3],[[3398,3400],2],[3401,3],[[3402,3405],2],[3406,2],[3407,2],[[3408,3411],3],[[3412,3414],2],[3415,2],[[3416,3422],2],[3423,2],[[3424,3425],2],[[3426,3427],2],[[3428,3429],3],[[3430,3439],2],[[3440,3445],2],[[3446,3448],2],[3449,2],[[3450,3455],2],[3456,3],[3457,2],[[3458,3459],2],[3460,3],[[3461,3478],2],[[3479,3481],3],[[3482,3505],2],[3506,3],[[3507,3515],2],[3516,3],[3517,2],[[3518,3519],3],[[3520,3526],2],[[3527,3529],3],[3530,2],[[3531,3534],3],[[3535,3540],2],[3541,3],[3542,2],[3543,3],[[3544,3551],2],[[3552,3557],3],[[3558,3567],2],[[3568,3569],3],[[3570,3571],2],[3572,2],[[3573,3584],3],[[3585,3634],2],[3635,1,"\u0E4D\u0E32"],[[3636,3642],2],[[3643,3646],3],[3647,2],[[3648,3662],2],[3663,2],[[3664,3673],2],[[3674,3675],2],[[3676,3712],3],[[3713,3714],2],[3715,3],[3716,2],[3717,3],[3718,2],[[3719,3720],2],[3721,2],[3722,2],[3723,3],[3724,2],[3725,2],[[3726,3731],2],[[3732,3735],2],[3736,2],[[3737,3743],2],[3744,2],[[3745,3747],2],[3748,3],[3749,2],[3750,3],[3751,2],[[3752,3753],2],[[3754,3755],2],[3756,2],[[3757,3762],2],[3763,1,"\u0ECD\u0EB2"],[[3764,3769],2],[3770,2],[[3771,3773],2],[[3774,3775],3],[[3776,3780],2],[3781,3],[3782,2],[3783,3],[[3784,3789],2],[[3790,3791],3],[[3792,3801],2],[[3802,3803],3],[3804,1,"\u0EAB\u0E99"],[3805,1,"\u0EAB\u0EA1"],[[3806,3807],2],[[3808,3839],3],[3840,2],[[3841,3850],2],[3851,2],[3852,1,"\u0F0B"],[[3853,3863],2],[[3864,3865],2],[[3866,3871],2],[[3872,3881],2],[[3882,3892],2],[3893,2],[3894,2],[3895,2],[3896,2],[3897,2],[[3898,3901],2],[[3902,3906],2],[3907,1,"\u0F42\u0FB7"],[[3908,3911],2],[3912,3],[[3913,3916],2],[3917,1,"\u0F4C\u0FB7"],[[3918,3921],2],[3922,1,"\u0F51\u0FB7"],[[3923,3926],2],[3927,1,"\u0F56\u0FB7"],[[3928,3931],2],[3932,1,"\u0F5B\u0FB7"],[[3933,3944],2],[3945,1,"\u0F40\u0FB5"],[3946,2],[[3947,3948],2],[[3949,3952],3],[[3953,3954],2],[3955,1,"\u0F71\u0F72"],[3956,2],[3957,1,"\u0F71\u0F74"],[3958,1,"\u0FB2\u0F80"],[3959,1,"\u0FB2\u0F71\u0F80"],[3960,1,"\u0FB3\u0F80"],[3961,1,"\u0FB3\u0F71\u0F80"],[[3962,3968],2],[3969,1,"\u0F71\u0F80"],[[3970,3972],2],[3973,2],[[3974,3979],2],[[3980,3983],2],[[3984,3986],2],[3987,1,"\u0F92\u0FB7"],[[3988,3989],2],[3990,2],[3991,2],[3992,3],[[3993,3996],2],[3997,1,"\u0F9C\u0FB7"],[[3998,4001],2],[4002,1,"\u0FA1\u0FB7"],[[4003,4006],2],[4007,1,"\u0FA6\u0FB7"],[[4008,4011],2],[4012,1,"\u0FAB\u0FB7"],[4013,2],[[4014,4016],2],[[4017,4023],2],[4024,2],[4025,1,"\u0F90\u0FB5"],[[4026,4028],2],[4029,3],[[4030,4037],2],[4038,2],[[4039,4044],2],[4045,3],[4046,2],[4047,2],[[4048,4049],2],[[4050,4052],2],[[4053,4056],2],[[4057,4058],2],[[4059,4095],3],[[4096,4129],2],[4130,2],[[4131,4135],2],[4136,2],[[4137,4138],2],[4139,2],[[4140,4146],2],[[4147,4149],2],[[4150,4153],2],[[4154,4159],2],[[4160,4169],2],[[4170,4175],2],[[4176,4185],2],[[4186,4249],2],[[4250,4253],2],[[4254,4255],2],[[4256,4293],3],[4294,3],[4295,1,"\u2D27"],[[4296,4300],3],[4301,1,"\u2D2D"],[[4302,4303],3],[[4304,4342],2],[[4343,4344],2],[[4345,4346],2],[4347,2],[4348,1,"\u10DC"],[[4349,4351],2],[[4352,4441],2],[[4442,4446],2],[[4447,4448],3],[[4449,4514],2],[[4515,4519],2],[[4520,4601],2],[[4602,4607],2],[[4608,4614],2],[4615,2],[[4616,4678],2],[4679,2],[4680,2],[4681,3],[[4682,4685],2],[[4686,4687],3],[[4688,4694],2],[4695,3],[4696,2],[4697,3],[[4698,4701],2],[[4702,4703],3],[[4704,4742],2],[4743,2],[4744,2],[4745,3],[[4746,4749],2],[[4750,4751],3],[[4752,4782],2],[4783,2],[4784,2],[4785,3],[[4786,4789],2],[[4790,4791],3],[[4792,4798],2],[4799,3],[4800,2],[4801,3],[[4802,4805],2],[[4806,4807],3],[[4808,4814],2],[4815,2],[[4816,4822],2],[4823,3],[[4824,4846],2],[4847,2],[[4848,4878],2],[4879,2],[4880,2],[4881,3],[[4882,4885],2],[[4886,4887],3],[[4888,4894],2],[4895,2],[[4896,4934],2],[4935,2],[[4936,4954],2],[[4955,4956],3],[[4957,4958],2],[4959,2],[4960,2],[[4961,4988],2],[[4989,4991],3],[[4992,5007],2],[[5008,5017],2],[[5018,5023],3],[[5024,5108],2],[5109,2],[[5110,5111],3],[5112,1,"\u13F0"],[5113,1,"\u13F1"],[5114,1,"\u13F2"],[5115,1,"\u13F3"],[5116,1,"\u13F4"],[5117,1,"\u13F5"],[[5118,5119],3],[5120,2],[[5121,5740],2],[[5741,5742],2],[[5743,5750],2],[[5751,5759],2],[5760,3],[[5761,5786],2],[[5787,5788],2],[[5789,5791],3],[[5792,5866],2],[[5867,5872],2],[[5873,5880],2],[[5881,5887],3],[[5888,5900],2],[5901,2],[[5902,5908],2],[5909,2],[[5910,5918],3],[5919,2],[[5920,5940],2],[[5941,5942],2],[[5943,5951],3],[[5952,5971],2],[[5972,5983],3],[[5984,5996],2],[5997,3],[[5998,6000],2],[6001,3],[[6002,6003],2],[[6004,6015],3],[[6016,6067],2],[[6068,6069],3],[[6070,6099],2],[[6100,6102],2],[6103,2],[[6104,6107],2],[6108,2],[6109,2],[[6110,6111],3],[[6112,6121],2],[[6122,6127],3],[[6128,6137],2],[[6138,6143],3],[[6144,6149],2],[6150,3],[[6151,6154],2],[[6155,6157],7],[6158,3],[6159,7],[[6160,6169],2],[[6170,6175],3],[[6176,6263],2],[6264,2],[[6265,6271],3],[[6272,6313],2],[6314,2],[[6315,6319],3],[[6320,6389],2],[[6390,6399],3],[[6400,6428],2],[[6429,6430],2],[6431,3],[[6432,6443],2],[[6444,6447],3],[[6448,6459],2],[[6460,6463],3],[6464,2],[[6465,6467],3],[[6468,6469],2],[[6470,6509],2],[[6510,6511],3],[[6512,6516],2],[[6517,6527],3],[[6528,6569],2],[[6570,6571],2],[[6572,6575],3],[[6576,6601],2],[[6602,6607],3],[[6608,6617],2],[6618,2],[[6619,6621],3],[[6622,6623],2],[[6624,6655],2],[[6656,6683],2],[[6684,6685],3],[[6686,6687],2],[[6688,6750],2],[6751,3],[[6752,6780],2],[[6781,6782],3],[[6783,6793],2],[[6794,6799],3],[[6800,6809],2],[[6810,6815],3],[[6816,6822],2],[6823,2],[[6824,6829],2],[[6830,6831],3],[[6832,6845],2],[6846,2],[[6847,6848],2],[[6849,6862],2],[[6863,6911],3],[[6912,6987],2],[6988,2],[[6989,6991],3],[[6992,7001],2],[[7002,7018],2],[[7019,7027],2],[[7028,7036],2],[[7037,7038],2],[7039,3],[[7040,7082],2],[[7083,7085],2],[[7086,7097],2],[[7098,7103],2],[[7104,7155],2],[[7156,7163],3],[[7164,7167],2],[[7168,7223],2],[[7224,7226],3],[[7227,7231],2],[[7232,7241],2],[[7242,7244],3],[[7245,7293],2],[[7294,7295],2],[7296,1,"\u0432"],[7297,1,"\u0434"],[7298,1,"\u043E"],[7299,1,"\u0441"],[[7300,7301],1,"\u0442"],[7302,1,"\u044A"],[7303,1,"\u0463"],[7304,1,"\uA64B"],[[7305,7311],3],[7312,1,"\u10D0"],[7313,1,"\u10D1"],[7314,1,"\u10D2"],[7315,1,"\u10D3"],[7316,1,"\u10D4"],[7317,1,"\u10D5"],[7318,1,"\u10D6"],[7319,1,"\u10D7"],[7320,1,"\u10D8"],[7321,1,"\u10D9"],[7322,1,"\u10DA"],[7323,1,"\u10DB"],[7324,1,"\u10DC"],[7325,1,"\u10DD"],[7326,1,"\u10DE"],[7327,1,"\u10DF"],[7328,1,"\u10E0"],[7329,1,"\u10E1"],[7330,1,"\u10E2"],[7331,1,"\u10E3"],[7332,1,"\u10E4"],[7333,1,"\u10E5"],[7334,1,"\u10E6"],[7335,1,"\u10E7"],[7336,1,"\u10E8"],[7337,1,"\u10E9"],[7338,1,"\u10EA"],[7339,1,"\u10EB"],[7340,1,"\u10EC"],[7341,1,"\u10ED"],[7342,1,"\u10EE"],[7343,1,"\u10EF"],[7344,1,"\u10F0"],[7345,1,"\u10F1"],[7346,1,"\u10F2"],[7347,1,"\u10F3"],[7348,1,"\u10F4"],[7349,1,"\u10F5"],[7350,1,"\u10F6"],[7351,1,"\u10F7"],[7352,1,"\u10F8"],[7353,1,"\u10F9"],[7354,1,"\u10FA"],[[7355,7356],3],[7357,1,"\u10FD"],[7358,1,"\u10FE"],[7359,1,"\u10FF"],[[7360,7367],2],[[7368,7375],3],[[7376,7378],2],[7379,2],[[7380,7410],2],[[7411,7414],2],[7415,2],[[7416,7417],2],[7418,2],[[7419,7423],3],[[7424,7467],2],[7468,1,"a"],[7469,1,"\xE6"],[7470,1,"b"],[7471,2],[7472,1,"d"],[7473,1,"e"],[7474,1,"\u01DD"],[7475,1,"g"],[7476,1,"h"],[7477,1,"i"],[7478,1,"j"],[7479,1,"k"],[7480,1,"l"],[7481,1,"m"],[7482,1,"n"],[7483,2],[7484,1,"o"],[7485,1,"\u0223"],[7486,1,"p"],[7487,1,"r"],[7488,1,"t"],[7489,1,"u"],[7490,1,"w"],[7491,1,"a"],[7492,1,"\u0250"],[7493,1,"\u0251"],[7494,1,"\u1D02"],[7495,1,"b"],[7496,1,"d"],[7497,1,"e"],[7498,1,"\u0259"],[7499,1,"\u025B"],[7500,1,"\u025C"],[7501,1,"g"],[7502,2],[7503,1,"k"],[7504,1,"m"],[7505,1,"\u014B"],[7506,1,"o"],[7507,1,"\u0254"],[7508,1,"\u1D16"],[7509,1,"\u1D17"],[7510,1,"p"],[7511,1,"t"],[7512,1,"u"],[7513,1,"\u1D1D"],[7514,1,"\u026F"],[7515,1,"v"],[7516,1,"\u1D25"],[7517,1,"\u03B2"],[7518,1,"\u03B3"],[7519,1,"\u03B4"],[7520,1,"\u03C6"],[7521,1,"\u03C7"],[7522,1,"i"],[7523,1,"r"],[7524,1,"u"],[7525,1,"v"],[7526,1,"\u03B2"],[7527,1,"\u03B3"],[7528,1,"\u03C1"],[7529,1,"\u03C6"],[7530,1,"\u03C7"],[7531,2],[[7532,7543],2],[7544,1,"\u043D"],[[7545,7578],2],[7579,1,"\u0252"],[7580,1,"c"],[7581,1,"\u0255"],[7582,1,"\xF0"],[7583,1,"\u025C"],[7584,1,"f"],[7585,1,"\u025F"],[7586,1,"\u0261"],[7587,1,"\u0265"],[7588,1,"\u0268"],[7589,1,"\u0269"],[7590,1,"\u026A"],[7591,1,"\u1D7B"],[7592,1,"\u029D"],[7593,1,"\u026D"],[7594,1,"\u1D85"],[7595,1,"\u029F"],[7596,1,"\u0271"],[7597,1,"\u0270"],[7598,1,"\u0272"],[7599,1,"\u0273"],[7600,1,"\u0274"],[7601,1,"\u0275"],[7602,1,"\u0278"],[7603,1,"\u0282"],[7604,1,"\u0283"],[7605,1,"\u01AB"],[7606,1,"\u0289"],[7607,1,"\u028A"],[7608,1,"\u1D1C"],[7609,1,"\u028B"],[7610,1,"\u028C"],[7611,1,"z"],[7612,1,"\u0290"],[7613,1,"\u0291"],[7614,1,"\u0292"],[7615,1,"\u03B8"],[[7616,7619],2],[[7620,7626],2],[[7627,7654],2],[[7655,7669],2],[[7670,7673],2],[7674,2],[7675,2],[7676,2],[7677,2],[[7678,7679],2],[7680,1,"\u1E01"],[7681,2],[7682,1,"\u1E03"],[7683,2],[7684,1,"\u1E05"],[7685,2],[7686,1,"\u1E07"],[7687,2],[7688,1,"\u1E09"],[7689,2],[7690,1,"\u1E0B"],[7691,2],[7692,1,"\u1E0D"],[7693,2],[7694,1,"\u1E0F"],[7695,2],[7696,1,"\u1E11"],[7697,2],[7698,1,"\u1E13"],[7699,2],[7700,1,"\u1E15"],[7701,2],[7702,1,"\u1E17"],[7703,2],[7704,1,"\u1E19"],[7705,2],[7706,1,"\u1E1B"],[7707,2],[7708,1,"\u1E1D"],[7709,2],[7710,1,"\u1E1F"],[7711,2],[7712,1,"\u1E21"],[7713,2],[7714,1,"\u1E23"],[7715,2],[7716,1,"\u1E25"],[7717,2],[7718,1,"\u1E27"],[7719,2],[7720,1,"\u1E29"],[7721,2],[7722,1,"\u1E2B"],[7723,2],[7724,1,"\u1E2D"],[7725,2],[7726,1,"\u1E2F"],[7727,2],[7728,1,"\u1E31"],[7729,2],[7730,1,"\u1E33"],[7731,2],[7732,1,"\u1E35"],[7733,2],[7734,1,"\u1E37"],[7735,2],[7736,1,"\u1E39"],[7737,2],[7738,1,"\u1E3B"],[7739,2],[7740,1,"\u1E3D"],[7741,2],[7742,1,"\u1E3F"],[7743,2],[7744,1,"\u1E41"],[7745,2],[7746,1,"\u1E43"],[7747,2],[7748,1,"\u1E45"],[7749,2],[7750,1,"\u1E47"],[7751,2],[7752,1,"\u1E49"],[7753,2],[7754,1,"\u1E4B"],[7755,2],[7756,1,"\u1E4D"],[7757,2],[7758,1,"\u1E4F"],[7759,2],[7760,1,"\u1E51"],[7761,2],[7762,1,"\u1E53"],[7763,2],[7764,1,"\u1E55"],[7765,2],[7766,1,"\u1E57"],[7767,2],[7768,1,"\u1E59"],[7769,2],[7770,1,"\u1E5B"],[7771,2],[7772,1,"\u1E5D"],[7773,2],[7774,1,"\u1E5F"],[7775,2],[7776,1,"\u1E61"],[7777,2],[7778,1,"\u1E63"],[7779,2],[7780,1,"\u1E65"],[7781,2],[7782,1,"\u1E67"],[7783,2],[7784,1,"\u1E69"],[7785,2],[7786,1,"\u1E6B"],[7787,2],[7788,1,"\u1E6D"],[7789,2],[7790,1,"\u1E6F"],[7791,2],[7792,1,"\u1E71"],[7793,2],[7794,1,"\u1E73"],[7795,2],[7796,1,"\u1E75"],[7797,2],[7798,1,"\u1E77"],[7799,2],[7800,1,"\u1E79"],[7801,2],[7802,1,"\u1E7B"],[7803,2],[7804,1,"\u1E7D"],[7805,2],[7806,1,"\u1E7F"],[7807,2],[7808,1,"\u1E81"],[7809,2],[7810,1,"\u1E83"],[7811,2],[7812,1,"\u1E85"],[7813,2],[7814,1,"\u1E87"],[7815,2],[7816,1,"\u1E89"],[7817,2],[7818,1,"\u1E8B"],[7819,2],[7820,1,"\u1E8D"],[7821,2],[7822,1,"\u1E8F"],[7823,2],[7824,1,"\u1E91"],[7825,2],[7826,1,"\u1E93"],[7827,2],[7828,1,"\u1E95"],[[7829,7833],2],[7834,1,"a\u02BE"],[7835,1,"\u1E61"],[[7836,7837],2],[7838,1,"ss"],[7839,2],[7840,1,"\u1EA1"],[7841,2],[7842,1,"\u1EA3"],[7843,2],[7844,1,"\u1EA5"],[7845,2],[7846,1,"\u1EA7"],[7847,2],[7848,1,"\u1EA9"],[7849,2],[7850,1,"\u1EAB"],[7851,2],[7852,1,"\u1EAD"],[7853,2],[7854,1,"\u1EAF"],[7855,2],[7856,1,"\u1EB1"],[7857,2],[7858,1,"\u1EB3"],[7859,2],[7860,1,"\u1EB5"],[7861,2],[7862,1,"\u1EB7"],[7863,2],[7864,1,"\u1EB9"],[7865,2],[7866,1,"\u1EBB"],[7867,2],[7868,1,"\u1EBD"],[7869,2],[7870,1,"\u1EBF"],[7871,2],[7872,1,"\u1EC1"],[7873,2],[7874,1,"\u1EC3"],[7875,2],[7876,1,"\u1EC5"],[7877,2],[7878,1,"\u1EC7"],[7879,2],[7880,1,"\u1EC9"],[7881,2],[7882,1,"\u1ECB"],[7883,2],[7884,1,"\u1ECD"],[7885,2],[7886,1,"\u1ECF"],[7887,2],[7888,1,"\u1ED1"],[7889,2],[7890,1,"\u1ED3"],[7891,2],[7892,1,"\u1ED5"],[7893,2],[7894,1,"\u1ED7"],[7895,2],[7896,1,"\u1ED9"],[7897,2],[7898,1,"\u1EDB"],[7899,2],[7900,1,"\u1EDD"],[7901,2],[7902,1,"\u1EDF"],[7903,2],[7904,1,"\u1EE1"],[7905,2],[7906,1,"\u1EE3"],[7907,2],[7908,1,"\u1EE5"],[7909,2],[7910,1,"\u1EE7"],[7911,2],[7912,1,"\u1EE9"],[7913,2],[7914,1,"\u1EEB"],[7915,2],[7916,1,"\u1EED"],[7917,2],[7918,1,"\u1EEF"],[7919,2],[7920,1,"\u1EF1"],[7921,2],[7922,1,"\u1EF3"],[7923,2],[7924,1,"\u1EF5"],[7925,2],[7926,1,"\u1EF7"],[7927,2],[7928,1,"\u1EF9"],[7929,2],[7930,1,"\u1EFB"],[7931,2],[7932,1,"\u1EFD"],[7933,2],[7934,1,"\u1EFF"],[7935,2],[[7936,7943],2],[7944,1,"\u1F00"],[7945,1,"\u1F01"],[7946,1,"\u1F02"],[7947,1,"\u1F03"],[7948,1,"\u1F04"],[7949,1,"\u1F05"],[7950,1,"\u1F06"],[7951,1,"\u1F07"],[[7952,7957],2],[[7958,7959],3],[7960,1,"\u1F10"],[7961,1,"\u1F11"],[7962,1,"\u1F12"],[7963,1,"\u1F13"],[7964,1,"\u1F14"],[7965,1,"\u1F15"],[[7966,7967],3],[[7968,7975],2],[7976,1,"\u1F20"],[7977,1,"\u1F21"],[7978,1,"\u1F22"],[7979,1,"\u1F23"],[7980,1,"\u1F24"],[7981,1,"\u1F25"],[7982,1,"\u1F26"],[7983,1,"\u1F27"],[[7984,7991],2],[7992,1,"\u1F30"],[7993,1,"\u1F31"],[7994,1,"\u1F32"],[7995,1,"\u1F33"],[7996,1,"\u1F34"],[7997,1,"\u1F35"],[7998,1,"\u1F36"],[7999,1,"\u1F37"],[[8000,8005],2],[[8006,8007],3],[8008,1,"\u1F40"],[8009,1,"\u1F41"],[8010,1,"\u1F42"],[8011,1,"\u1F43"],[8012,1,"\u1F44"],[8013,1,"\u1F45"],[[8014,8015],3],[[8016,8023],2],[8024,3],[8025,1,"\u1F51"],[8026,3],[8027,1,"\u1F53"],[8028,3],[8029,1,"\u1F55"],[8030,3],[8031,1,"\u1F57"],[[8032,8039],2],[8040,1,"\u1F60"],[8041,1,"\u1F61"],[8042,1,"\u1F62"],[8043,1,"\u1F63"],[8044,1,"\u1F64"],[8045,1,"\u1F65"],[8046,1,"\u1F66"],[8047,1,"\u1F67"],[8048,2],[8049,1,"\u03AC"],[8050,2],[8051,1,"\u03AD"],[8052,2],[8053,1,"\u03AE"],[8054,2],[8055,1,"\u03AF"],[8056,2],[8057,1,"\u03CC"],[8058,2],[8059,1,"\u03CD"],[8060,2],[8061,1,"\u03CE"],[[8062,8063],3],[8064,1,"\u1F00\u03B9"],[8065,1,"\u1F01\u03B9"],[8066,1,"\u1F02\u03B9"],[8067,1,"\u1F03\u03B9"],[8068,1,"\u1F04\u03B9"],[8069,1,"\u1F05\u03B9"],[8070,1,"\u1F06\u03B9"],[8071,1,"\u1F07\u03B9"],[8072,1,"\u1F00\u03B9"],[8073,1,"\u1F01\u03B9"],[8074,1,"\u1F02\u03B9"],[8075,1,"\u1F03\u03B9"],[8076,1,"\u1F04\u03B9"],[8077,1,"\u1F05\u03B9"],[8078,1,"\u1F06\u03B9"],[8079,1,"\u1F07\u03B9"],[8080,1,"\u1F20\u03B9"],[8081,1,"\u1F21\u03B9"],[8082,1,"\u1F22\u03B9"],[8083,1,"\u1F23\u03B9"],[8084,1,"\u1F24\u03B9"],[8085,1,"\u1F25\u03B9"],[8086,1,"\u1F26\u03B9"],[8087,1,"\u1F27\u03B9"],[8088,1,"\u1F20\u03B9"],[8089,1,"\u1F21\u03B9"],[8090,1,"\u1F22\u03B9"],[8091,1,"\u1F23\u03B9"],[8092,1,"\u1F24\u03B9"],[8093,1,"\u1F25\u03B9"],[8094,1,"\u1F26\u03B9"],[8095,1,"\u1F27\u03B9"],[8096,1,"\u1F60\u03B9"],[8097,1,"\u1F61\u03B9"],[8098,1,"\u1F62\u03B9"],[8099,1,"\u1F63\u03B9"],[8100,1,"\u1F64\u03B9"],[8101,1,"\u1F65\u03B9"],[8102,1,"\u1F66\u03B9"],[8103,1,"\u1F67\u03B9"],[8104,1,"\u1F60\u03B9"],[8105,1,"\u1F61\u03B9"],[8106,1,"\u1F62\u03B9"],[8107,1,"\u1F63\u03B9"],[8108,1,"\u1F64\u03B9"],[8109,1,"\u1F65\u03B9"],[8110,1,"\u1F66\u03B9"],[8111,1,"\u1F67\u03B9"],[[8112,8113],2],[8114,1,"\u1F70\u03B9"],[8115,1,"\u03B1\u03B9"],[8116,1,"\u03AC\u03B9"],[8117,3],[8118,2],[8119,1,"\u1FB6\u03B9"],[8120,1,"\u1FB0"],[8121,1,"\u1FB1"],[8122,1,"\u1F70"],[8123,1,"\u03AC"],[8124,1,"\u03B1\u03B9"],[8125,5," \u0313"],[8126,1,"\u03B9"],[8127,5," \u0313"],[8128,5," \u0342"],[8129,5," \u0308\u0342"],[8130,1,"\u1F74\u03B9"],[8131,1,"\u03B7\u03B9"],[8132,1,"\u03AE\u03B9"],[8133,3],[8134,2],[8135,1,"\u1FC6\u03B9"],[8136,1,"\u1F72"],[8137,1,"\u03AD"],[8138,1,"\u1F74"],[8139,1,"\u03AE"],[8140,1,"\u03B7\u03B9"],[8141,5," \u0313\u0300"],[8142,5," \u0313\u0301"],[8143,5," \u0313\u0342"],[[8144,8146],2],[8147,1,"\u0390"],[[8148,8149],3],[[8150,8151],2],[8152,1,"\u1FD0"],[8153,1,"\u1FD1"],[8154,1,"\u1F76"],[8155,1,"\u03AF"],[8156,3],[8157,5," \u0314\u0300"],[8158,5," \u0314\u0301"],[8159,5," \u0314\u0342"],[[8160,8162],2],[8163,1,"\u03B0"],[[8164,8167],2],[8168,1,"\u1FE0"],[8169,1,"\u1FE1"],[8170,1,"\u1F7A"],[8171,1,"\u03CD"],[8172,1,"\u1FE5"],[8173,5," \u0308\u0300"],[8174,5," \u0308\u0301"],[8175,5,"`"],[[8176,8177],3],[8178,1,"\u1F7C\u03B9"],[8179,1,"\u03C9\u03B9"],[8180,1,"\u03CE\u03B9"],[8181,3],[8182,2],[8183,1,"\u1FF6\u03B9"],[8184,1,"\u1F78"],[8185,1,"\u03CC"],[8186,1,"\u1F7C"],[8187,1,"\u03CE"],[8188,1,"\u03C9\u03B9"],[8189,5," \u0301"],[8190,5," \u0314"],[8191,3],[[8192,8202],5," "],[8203,7],[[8204,8205],6,""],[[8206,8207],3],[8208,2],[8209,1,"\u2010"],[[8210,8214],2],[8215,5," \u0333"],[[8216,8227],2],[[8228,8230],3],[8231,2],[[8232,8238],3],[8239,5," "],[[8240,8242],2],[8243,1,"\u2032\u2032"],[8244,1,"\u2032\u2032\u2032"],[8245,2],[8246,1,"\u2035\u2035"],[8247,1,"\u2035\u2035\u2035"],[[8248,8251],2],[8252,5,"!!"],[8253,2],[8254,5," \u0305"],[[8255,8262],2],[8263,5,"??"],[8264,5,"?!"],[8265,5,"!?"],[[8266,8269],2],[[8270,8274],2],[[8275,8276],2],[[8277,8278],2],[8279,1,"\u2032\u2032\u2032\u2032"],[[8280,8286],2],[8287,5," "],[8288,7],[[8289,8291],3],[8292,7],[8293,3],[[8294,8297],3],[[8298,8303],3],[8304,1,"0"],[8305,1,"i"],[[8306,8307],3],[8308,1,"4"],[8309,1,"5"],[8310,1,"6"],[8311,1,"7"],[8312,1,"8"],[8313,1,"9"],[8314,5,"+"],[8315,1,"\u2212"],[8316,5,"="],[8317,5,"("],[8318,5,")"],[8319,1,"n"],[8320,1,"0"],[8321,1,"1"],[8322,1,"2"],[8323,1,"3"],[8324,1,"4"],[8325,1,"5"],[8326,1,"6"],[8327,1,"7"],[8328,1,"8"],[8329,1,"9"],[8330,5,"+"],[8331,1,"\u2212"],[8332,5,"="],[8333,5,"("],[8334,5,")"],[8335,3],[8336,1,"a"],[8337,1,"e"],[8338,1,"o"],[8339,1,"x"],[8340,1,"\u0259"],[8341,1,"h"],[8342,1,"k"],[8343,1,"l"],[8344,1,"m"],[8345,1,"n"],[8346,1,"p"],[8347,1,"s"],[8348,1,"t"],[[8349,8351],3],[[8352,8359],2],[8360,1,"rs"],[[8361,8362],2],[8363,2],[8364,2],[[8365,8367],2],[[8368,8369],2],[[8370,8373],2],[[8374,8376],2],[8377,2],[8378,2],[[8379,8381],2],[8382,2],[8383,2],[8384,2],[[8385,8399],3],[[8400,8417],2],[[8418,8419],2],[[8420,8426],2],[8427,2],[[8428,8431],2],[8432,2],[[8433,8447],3],[8448,5,"a/c"],[8449,5,"a/s"],[8450,1,"c"],[8451,1,"\xB0c"],[8452,2],[8453,5,"c/o"],[8454,5,"c/u"],[8455,1,"\u025B"],[8456,2],[8457,1,"\xB0f"],[8458,1,"g"],[[8459,8462],1,"h"],[8463,1,"\u0127"],[[8464,8465],1,"i"],[[8466,8467],1,"l"],[8468,2],[8469,1,"n"],[8470,1,"no"],[[8471,8472],2],[8473,1,"p"],[8474,1,"q"],[[8475,8477],1,"r"],[[8478,8479],2],[8480,1,"sm"],[8481,1,"tel"],[8482,1,"tm"],[8483,2],[8484,1,"z"],[8485,2],[8486,1,"\u03C9"],[8487,2],[8488,1,"z"],[8489,2],[8490,1,"k"],[8491,1,"\xE5"],[8492,1,"b"],[8493,1,"c"],[8494,2],[[8495,8496],1,"e"],[8497,1,"f"],[8498,3],[8499,1,"m"],[8500,1,"o"],[8501,1,"\u05D0"],[8502,1,"\u05D1"],[8503,1,"\u05D2"],[8504,1,"\u05D3"],[8505,1,"i"],[8506,2],[8507,1,"fax"],[8508,1,"\u03C0"],[[8509,8510],1,"\u03B3"],[8511,1,"\u03C0"],[8512,1,"\u2211"],[[8513,8516],2],[[8517,8518],1,"d"],[8519,1,"e"],[8520,1,"i"],[8521,1,"j"],[[8522,8523],2],[8524,2],[8525,2],[8526,2],[8527,2],[8528,1,"1\u20447"],[8529,1,"1\u20449"],[8530,1,"1\u204410"],[8531,1,"1\u20443"],[8532,1,"2\u20443"],[8533,1,"1\u20445"],[8534,1,"2\u20445"],[8535,1,"3\u20445"],[8536,1,"4\u20445"],[8537,1,"1\u20446"],[8538,1,"5\u20446"],[8539,1,"1\u20448"],[8540,1,"3\u20448"],[8541,1,"5\u20448"],[8542,1,"7\u20448"],[8543,1,"1\u2044"],[8544,1,"i"],[8545,1,"ii"],[8546,1,"iii"],[8547,1,"iv"],[8548,1,"v"],[8549,1,"vi"],[8550,1,"vii"],[8551,1,"viii"],[8552,1,"ix"],[8553,1,"x"],[8554,1,"xi"],[8555,1,"xii"],[8556,1,"l"],[8557,1,"c"],[8558,1,"d"],[8559,1,"m"],[8560,1,"i"],[8561,1,"ii"],[8562,1,"iii"],[8563,1,"iv"],[8564,1,"v"],[8565,1,"vi"],[8566,1,"vii"],[8567,1,"viii"],[8568,1,"ix"],[8569,1,"x"],[8570,1,"xi"],[8571,1,"xii"],[8572,1,"l"],[8573,1,"c"],[8574,1,"d"],[8575,1,"m"],[[8576,8578],2],[8579,3],[8580,2],[[8581,8584],2],[8585,1,"0\u20443"],[[8586,8587],2],[[8588,8591],3],[[8592,8682],2],[[8683,8691],2],[[8692,8703],2],[[8704,8747],2],[8748,1,"\u222B\u222B"],[8749,1,"\u222B\u222B\u222B"],[8750,2],[8751,1,"\u222E\u222E"],[8752,1,"\u222E\u222E\u222E"],[[8753,8799],2],[8800,4],[[8801,8813],2],[[8814,8815],4],[[8816,8945],2],[[8946,8959],2],[8960,2],[8961,2],[[8962,9000],2],[9001,1,"\u3008"],[9002,1,"\u3009"],[[9003,9082],2],[9083,2],[9084,2],[[9085,9114],2],[[9115,9166],2],[[9167,9168],2],[[9169,9179],2],[[9180,9191],2],[9192,2],[[9193,9203],2],[[9204,9210],2],[[9211,9214],2],[9215,2],[[9216,9252],2],[[9253,9254],2],[[9255,9279],3],[[9280,9290],2],[[9291,9311],3],[9312,1,"1"],[9313,1,"2"],[9314,1,"3"],[9315,1,"4"],[9316,1,"5"],[9317,1,"6"],[9318,1,"7"],[9319,1,"8"],[9320,1,"9"],[9321,1,"10"],[9322,1,"11"],[9323,1,"12"],[9324,1,"13"],[9325,1,"14"],[9326,1,"15"],[9327,1,"16"],[9328,1,"17"],[9329,1,"18"],[9330,1,"19"],[9331,1,"20"],[9332,5,"(1)"],[9333,5,"(2)"],[9334,5,"(3)"],[9335,5,"(4)"],[9336,5,"(5)"],[9337,5,"(6)"],[9338,5,"(7)"],[9339,5,"(8)"],[9340,5,"(9)"],[9341,5,"(10)"],[9342,5,"(11)"],[9343,5,"(12)"],[9344,5,"(13)"],[9345,5,"(14)"],[9346,5,"(15)"],[9347,5,"(16)"],[9348,5,"(17)"],[9349,5,"(18)"],[9350,5,"(19)"],[9351,5,"(20)"],[[9352,9371],3],[9372,5,"(a)"],[9373,5,"(b)"],[9374,5,"(c)"],[9375,5,"(d)"],[9376,5,"(e)"],[9377,5,"(f)"],[9378,5,"(g)"],[9379,5,"(h)"],[9380,5,"(i)"],[9381,5,"(j)"],[9382,5,"(k)"],[9383,5,"(l)"],[9384,5,"(m)"],[9385,5,"(n)"],[9386,5,"(o)"],[9387,5,"(p)"],[9388,5,"(q)"],[9389,5,"(r)"],[9390,5,"(s)"],[9391,5,"(t)"],[9392,5,"(u)"],[9393,5,"(v)"],[9394,5,"(w)"],[9395,5,"(x)"],[9396,5,"(y)"],[9397,5,"(z)"],[9398,1,"a"],[9399,1,"b"],[9400,1,"c"],[9401,1,"d"],[9402,1,"e"],[9403,1,"f"],[9404,1,"g"],[9405,1,"h"],[9406,1,"i"],[9407,1,"j"],[9408,1,"k"],[9409,1,"l"],[9410,1,"m"],[9411,1,"n"],[9412,1,"o"],[9413,1,"p"],[9414,1,"q"],[9415,1,"r"],[9416,1,"s"],[9417,1,"t"],[9418,1,"u"],[9419,1,"v"],[9420,1,"w"],[9421,1,"x"],[9422,1,"y"],[9423,1,"z"],[9424,1,"a"],[9425,1,"b"],[9426,1,"c"],[9427,1,"d"],[9428,1,"e"],[9429,1,"f"],[9430,1,"g"],[9431,1,"h"],[9432,1,"i"],[9433,1,"j"],[9434,1,"k"],[9435,1,"l"],[9436,1,"m"],[9437,1,"n"],[9438,1,"o"],[9439,1,"p"],[9440,1,"q"],[9441,1,"r"],[9442,1,"s"],[9443,1,"t"],[9444,1,"u"],[9445,1,"v"],[9446,1,"w"],[9447,1,"x"],[9448,1,"y"],[9449,1,"z"],[9450,1,"0"],[[9451,9470],2],[9471,2],[[9472,9621],2],[[9622,9631],2],[[9632,9711],2],[[9712,9719],2],[[9720,9727],2],[[9728,9747],2],[[9748,9749],2],[[9750,9751],2],[9752,2],[9753,2],[[9754,9839],2],[[9840,9841],2],[[9842,9853],2],[[9854,9855],2],[[9856,9865],2],[[9866,9873],2],[[9874,9884],2],[9885,2],[[9886,9887],2],[[9888,9889],2],[[9890,9905],2],[9906,2],[[9907,9916],2],[[9917,9919],2],[[9920,9923],2],[[9924,9933],2],[9934,2],[[9935,9953],2],[9954,2],[9955,2],[[9956,9959],2],[[9960,9983],2],[9984,2],[[9985,9988],2],[9989,2],[[9990,9993],2],[[9994,9995],2],[[9996,10023],2],[10024,2],[[10025,10059],2],[10060,2],[10061,2],[10062,2],[[10063,10066],2],[[10067,10069],2],[10070,2],[10071,2],[[10072,10078],2],[[10079,10080],2],[[10081,10087],2],[[10088,10101],2],[[10102,10132],2],[[10133,10135],2],[[10136,10159],2],[10160,2],[[10161,10174],2],[10175,2],[[10176,10182],2],[[10183,10186],2],[10187,2],[10188,2],[10189,2],[[10190,10191],2],[[10192,10219],2],[[10220,10223],2],[[10224,10239],2],[[10240,10495],2],[[10496,10763],2],[10764,1,"\u222B\u222B\u222B\u222B"],[[10765,10867],2],[10868,5,"::="],[10869,5,"=="],[10870,5,"==="],[[10871,10971],2],[10972,1,"\u2ADD\u0338"],[[10973,11007],2],[[11008,11021],2],[[11022,11027],2],[[11028,11034],2],[[11035,11039],2],[[11040,11043],2],[[11044,11084],2],[[11085,11087],2],[[11088,11092],2],[[11093,11097],2],[[11098,11123],2],[[11124,11125],3],[[11126,11157],2],[11158,3],[11159,2],[[11160,11193],2],[[11194,11196],2],[[11197,11208],2],[11209,2],[[11210,11217],2],[11218,2],[[11219,11243],2],[[11244,11247],2],[[11248,11262],2],[11263,2],[11264,1,"\u2C30"],[11265,1,"\u2C31"],[11266,1,"\u2C32"],[11267,1,"\u2C33"],[11268,1,"\u2C34"],[11269,1,"\u2C35"],[11270,1,"\u2C36"],[11271,1,"\u2C37"],[11272,1,"\u2C38"],[11273,1,"\u2C39"],[11274,1,"\u2C3A"],[11275,1,"\u2C3B"],[11276,1,"\u2C3C"],[11277,1,"\u2C3D"],[11278,1,"\u2C3E"],[11279,1,"\u2C3F"],[11280,1,"\u2C40"],[11281,1,"\u2C41"],[11282,1,"\u2C42"],[11283,1,"\u2C43"],[11284,1,"\u2C44"],[11285,1,"\u2C45"],[11286,1,"\u2C46"],[11287,1,"\u2C47"],[11288,1,"\u2C48"],[11289,1,"\u2C49"],[11290,1,"\u2C4A"],[11291,1,"\u2C4B"],[11292,1,"\u2C4C"],[11293,1,"\u2C4D"],[11294,1,"\u2C4E"],[11295,1,"\u2C4F"],[11296,1,"\u2C50"],[11297,1,"\u2C51"],[11298,1,"\u2C52"],[11299,1,"\u2C53"],[11300,1,"\u2C54"],[11301,1,"\u2C55"],[11302,1,"\u2C56"],[11303,1,"\u2C57"],[11304,1,"\u2C58"],[11305,1,"\u2C59"],[11306,1,"\u2C5A"],[11307,1,"\u2C5B"],[11308,1,"\u2C5C"],[11309,1,"\u2C5D"],[11310,1,"\u2C5E"],[11311,1,"\u2C5F"],[[11312,11358],2],[11359,2],[11360,1,"\u2C61"],[11361,2],[11362,1,"\u026B"],[11363,1,"\u1D7D"],[11364,1,"\u027D"],[[11365,11366],2],[11367,1,"\u2C68"],[11368,2],[11369,1,"\u2C6A"],[11370,2],[11371,1,"\u2C6C"],[11372,2],[11373,1,"\u0251"],[11374,1,"\u0271"],[11375,1,"\u0250"],[11376,1,"\u0252"],[11377,2],[11378,1,"\u2C73"],[11379,2],[11380,2],[11381,1,"\u2C76"],[[11382,11383],2],[[11384,11387],2],[11388,1,"j"],[11389,1,"v"],[11390,1,"\u023F"],[11391,1,"\u0240"],[11392,1,"\u2C81"],[11393,2],[11394,1,"\u2C83"],[11395,2],[11396,1,"\u2C85"],[11397,2],[11398,1,"\u2C87"],[11399,2],[11400,1,"\u2C89"],[11401,2],[11402,1,"\u2C8B"],[11403,2],[11404,1,"\u2C8D"],[11405,2],[11406,1,"\u2C8F"],[11407,2],[11408,1,"\u2C91"],[11409,2],[11410,1,"\u2C93"],[11411,2],[11412,1,"\u2C95"],[11413,2],[11414,1,"\u2C97"],[11415,2],[11416,1,"\u2C99"],[11417,2],[11418,1,"\u2C9B"],[11419,2],[11420,1,"\u2C9D"],[11421,2],[11422,1,"\u2C9F"],[11423,2],[11424,1,"\u2CA1"],[11425,2],[11426,1,"\u2CA3"],[11427,2],[11428,1,"\u2CA5"],[11429,2],[11430,1,"\u2CA7"],[11431,2],[11432,1,"\u2CA9"],[11433,2],[11434,1,"\u2CAB"],[11435,2],[11436,1,"\u2CAD"],[11437,2],[11438,1,"\u2CAF"],[11439,2],[11440,1,"\u2CB1"],[11441,2],[11442,1,"\u2CB3"],[11443,2],[11444,1,"\u2CB5"],[11445,2],[11446,1,"\u2CB7"],[11447,2],[11448,1,"\u2CB9"],[11449,2],[11450,1,"\u2CBB"],[11451,2],[11452,1,"\u2CBD"],[11453,2],[11454,1,"\u2CBF"],[11455,2],[11456,1,"\u2CC1"],[11457,2],[11458,1,"\u2CC3"],[11459,2],[11460,1,"\u2CC5"],[11461,2],[11462,1,"\u2CC7"],[11463,2],[11464,1,"\u2CC9"],[11465,2],[11466,1,"\u2CCB"],[11467,2],[11468,1,"\u2CCD"],[11469,2],[11470,1,"\u2CCF"],[11471,2],[11472,1,"\u2CD1"],[11473,2],[11474,1,"\u2CD3"],[11475,2],[11476,1,"\u2CD5"],[11477,2],[11478,1,"\u2CD7"],[11479,2],[11480,1,"\u2CD9"],[11481,2],[11482,1,"\u2CDB"],[11483,2],[11484,1,"\u2CDD"],[11485,2],[11486,1,"\u2CDF"],[11487,2],[11488,1,"\u2CE1"],[11489,2],[11490,1,"\u2CE3"],[[11491,11492],2],[[11493,11498],2],[11499,1,"\u2CEC"],[11500,2],[11501,1,"\u2CEE"],[[11502,11505],2],[11506,1,"\u2CF3"],[11507,2],[[11508,11512],3],[[11513,11519],2],[[11520,11557],2],[11558,3],[11559,2],[[11560,11564],3],[11565,2],[[11566,11567],3],[[11568,11621],2],[[11622,11623],2],[[11624,11630],3],[11631,1,"\u2D61"],[11632,2],[[11633,11646],3],[11647,2],[[11648,11670],2],[[11671,11679],3],[[11680,11686],2],[11687,3],[[11688,11694],2],[11695,3],[[11696,11702],2],[11703,3],[[11704,11710],2],[11711,3],[[11712,11718],2],[11719,3],[[11720,11726],2],[11727,3],[[11728,11734],2],[11735,3],[[11736,11742],2],[11743,3],[[11744,11775],2],[[11776,11799],2],[[11800,11803],2],[[11804,11805],2],[[11806,11822],2],[11823,2],[11824,2],[11825,2],[[11826,11835],2],[[11836,11842],2],[[11843,11844],2],[[11845,11849],2],[[11850,11854],2],[11855,2],[[11856,11858],2],[[11859,11869],2],[[11870,11903],3],[[11904,11929],2],[11930,3],[[11931,11934],2],[11935,1,"\u6BCD"],[[11936,12018],2],[12019,1,"\u9F9F"],[[12020,12031],3],[12032,1,"\u4E00"],[12033,1,"\u4E28"],[12034,1,"\u4E36"],[12035,1,"\u4E3F"],[12036,1,"\u4E59"],[12037,1,"\u4E85"],[12038,1,"\u4E8C"],[12039,1,"\u4EA0"],[12040,1,"\u4EBA"],[12041,1,"\u513F"],[12042,1,"\u5165"],[12043,1,"\u516B"],[12044,1,"\u5182"],[12045,1,"\u5196"],[12046,1,"\u51AB"],[12047,1,"\u51E0"],[12048,1,"\u51F5"],[12049,1,"\u5200"],[12050,1,"\u529B"],[12051,1,"\u52F9"],[12052,1,"\u5315"],[12053,1,"\u531A"],[12054,1,"\u5338"],[12055,1,"\u5341"],[12056,1,"\u535C"],[12057,1,"\u5369"],[12058,1,"\u5382"],[12059,1,"\u53B6"],[12060,1,"\u53C8"],[12061,1,"\u53E3"],[12062,1,"\u56D7"],[12063,1,"\u571F"],[12064,1,"\u58EB"],[12065,1,"\u5902"],[12066,1,"\u590A"],[12067,1,"\u5915"],[12068,1,"\u5927"],[12069,1,"\u5973"],[12070,1,"\u5B50"],[12071,1,"\u5B80"],[12072,1,"\u5BF8"],[12073,1,"\u5C0F"],[12074,1,"\u5C22"],[12075,1,"\u5C38"],[12076,1,"\u5C6E"],[12077,1,"\u5C71"],[12078,1,"\u5DDB"],[12079,1,"\u5DE5"],[12080,1,"\u5DF1"],[12081,1,"\u5DFE"],[12082,1,"\u5E72"],[12083,1,"\u5E7A"],[12084,1,"\u5E7F"],[12085,1,"\u5EF4"],[12086,1,"\u5EFE"],[12087,1,"\u5F0B"],[12088,1,"\u5F13"],[12089,1,"\u5F50"],[12090,1,"\u5F61"],[12091,1,"\u5F73"],[12092,1,"\u5FC3"],[12093,1,"\u6208"],[12094,1,"\u6236"],[12095,1,"\u624B"],[12096,1,"\u652F"],[12097,1,"\u6534"],[12098,1,"\u6587"],[12099,1,"\u6597"],[12100,1,"\u65A4"],[12101,1,"\u65B9"],[12102,1,"\u65E0"],[12103,1,"\u65E5"],[12104,1,"\u66F0"],[12105,1,"\u6708"],[12106,1,"\u6728"],[12107,1,"\u6B20"],[12108,1,"\u6B62"],[12109,1,"\u6B79"],[12110,1,"\u6BB3"],[12111,1,"\u6BCB"],[12112,1,"\u6BD4"],[12113,1,"\u6BDB"],[12114,1,"\u6C0F"],[12115,1,"\u6C14"],[12116,1,"\u6C34"],[12117,1,"\u706B"],[12118,1,"\u722A"],[12119,1,"\u7236"],[12120,1,"\u723B"],[12121,1,"\u723F"],[12122,1,"\u7247"],[12123,1,"\u7259"],[12124,1,"\u725B"],[12125,1,"\u72AC"],[12126,1,"\u7384"],[12127,1,"\u7389"],[12128,1,"\u74DC"],[12129,1,"\u74E6"],[12130,1,"\u7518"],[12131,1,"\u751F"],[12132,1,"\u7528"],[12133,1,"\u7530"],[12134,1,"\u758B"],[12135,1,"\u7592"],[12136,1,"\u7676"],[12137,1,"\u767D"],[12138,1,"\u76AE"],[12139,1,"\u76BF"],[12140,1,"\u76EE"],[12141,1,"\u77DB"],[12142,1,"\u77E2"],[12143,1,"\u77F3"],[12144,1,"\u793A"],[12145,1,"\u79B8"],[12146,1,"\u79BE"],[12147,1,"\u7A74"],[12148,1,"\u7ACB"],[12149,1,"\u7AF9"],[12150,1,"\u7C73"],[12151,1,"\u7CF8"],[12152,1,"\u7F36"],[12153,1,"\u7F51"],[12154,1,"\u7F8A"],[12155,1,"\u7FBD"],[12156,1,"\u8001"],[12157,1,"\u800C"],[12158,1,"\u8012"],[12159,1,"\u8033"],[12160,1,"\u807F"],[12161,1,"\u8089"],[12162,1,"\u81E3"],[12163,1,"\u81EA"],[12164,1,"\u81F3"],[12165,1,"\u81FC"],[12166,1,"\u820C"],[12167,1,"\u821B"],[12168,1,"\u821F"],[12169,1,"\u826E"],[12170,1,"\u8272"],[12171,1,"\u8278"],[12172,1,"\u864D"],[12173,1,"\u866B"],[12174,1,"\u8840"],[12175,1,"\u884C"],[12176,1,"\u8863"],[12177,1,"\u897E"],[12178,1,"\u898B"],[12179,1,"\u89D2"],[12180,1,"\u8A00"],[12181,1,"\u8C37"],[12182,1,"\u8C46"],[12183,1,"\u8C55"],[12184,1,"\u8C78"],[12185,1,"\u8C9D"],[12186,1,"\u8D64"],[12187,1,"\u8D70"],[12188,1,"\u8DB3"],[12189,1,"\u8EAB"],[12190,1,"\u8ECA"],[12191,1,"\u8F9B"],[12192,1,"\u8FB0"],[12193,1,"\u8FB5"],[12194,1,"\u9091"],[12195,1,"\u9149"],[12196,1,"\u91C6"],[12197,1,"\u91CC"],[12198,1,"\u91D1"],[12199,1,"\u9577"],[12200,1,"\u9580"],[12201,1,"\u961C"],[12202,1,"\u96B6"],[12203,1,"\u96B9"],[12204,1,"\u96E8"],[12205,1,"\u9751"],[12206,1,"\u975E"],[12207,1,"\u9762"],[12208,1,"\u9769"],[12209,1,"\u97CB"],[12210,1,"\u97ED"],[12211,1,"\u97F3"],[12212,1,"\u9801"],[12213,1,"\u98A8"],[12214,1,"\u98DB"],[12215,1,"\u98DF"],[12216,1,"\u9996"],[12217,1,"\u9999"],[12218,1,"\u99AC"],[12219,1,"\u9AA8"],[12220,1,"\u9AD8"],[12221,1,"\u9ADF"],[12222,1,"\u9B25"],[12223,1,"\u9B2F"],[12224,1,"\u9B32"],[12225,1,"\u9B3C"],[12226,1,"\u9B5A"],[12227,1,"\u9CE5"],[12228,1,"\u9E75"],[12229,1,"\u9E7F"],[12230,1,"\u9EA5"],[12231,1,"\u9EBB"],[12232,1,"\u9EC3"],[12233,1,"\u9ECD"],[12234,1,"\u9ED1"],[12235,1,"\u9EF9"],[12236,1,"\u9EFD"],[12237,1,"\u9F0E"],[12238,1,"\u9F13"],[12239,1,"\u9F20"],[12240,1,"\u9F3B"],[12241,1,"\u9F4A"],[12242,1,"\u9F52"],[12243,1,"\u9F8D"],[12244,1,"\u9F9C"],[12245,1,"\u9FA0"],[[12246,12271],3],[[12272,12283],3],[[12284,12287],3],[12288,5," "],[12289,2],[12290,1,"."],[[12291,12292],2],[[12293,12295],2],[[12296,12329],2],[[12330,12333],2],[[12334,12341],2],[12342,1,"\u3012"],[12343,2],[12344,1,"\u5341"],[12345,1,"\u5344"],[12346,1,"\u5345"],[12347,2],[12348,2],[12349,2],[12350,2],[12351,2],[12352,3],[[12353,12436],2],[[12437,12438],2],[[12439,12440],3],[[12441,12442],2],[12443,5," \u3099"],[12444,5," \u309A"],[[12445,12446],2],[12447,1,"\u3088\u308A"],[12448,2],[[12449,12542],2],[12543,1,"\u30B3\u30C8"],[[12544,12548],3],[[12549,12588],2],[12589,2],[12590,2],[12591,2],[12592,3],[12593,1,"\u1100"],[12594,1,"\u1101"],[12595,1,"\u11AA"],[12596,1,"\u1102"],[12597,1,"\u11AC"],[12598,1,"\u11AD"],[12599,1,"\u1103"],[12600,1,"\u1104"],[12601,1,"\u1105"],[12602,1,"\u11B0"],[12603,1,"\u11B1"],[12604,1,"\u11B2"],[12605,1,"\u11B3"],[12606,1,"\u11B4"],[12607,1,"\u11B5"],[12608,1,"\u111A"],[12609,1,"\u1106"],[12610,1,"\u1107"],[12611,1,"\u1108"],[12612,1,"\u1121"],[12613,1,"\u1109"],[12614,1,"\u110A"],[12615,1,"\u110B"],[12616,1,"\u110C"],[12617,1,"\u110D"],[12618,1,"\u110E"],[12619,1,"\u110F"],[12620,1,"\u1110"],[12621,1,"\u1111"],[12622,1,"\u1112"],[12623,1,"\u1161"],[12624,1,"\u1162"],[12625,1,"\u1163"],[12626,1,"\u1164"],[12627,1,"\u1165"],[12628,1,"\u1166"],[12629,1,"\u1167"],[12630,1,"\u1168"],[12631,1,"\u1169"],[12632,1,"\u116A"],[12633,1,"\u116B"],[12634,1,"\u116C"],[12635,1,"\u116D"],[12636,1,"\u116E"],[12637,1,"\u116F"],[12638,1,"\u1170"],[12639,1,"\u1171"],[12640,1,"\u1172"],[12641,1,"\u1173"],[12642,1,"\u1174"],[12643,1,"\u1175"],[12644,3],[12645,1,"\u1114"],[12646,1,"\u1115"],[12647,1,"\u11C7"],[12648,1,"\u11C8"],[12649,1,"\u11CC"],[12650,1,"\u11CE"],[12651,1,"\u11D3"],[12652,1,"\u11D7"],[12653,1,"\u11D9"],[12654,1,"\u111C"],[12655,1,"\u11DD"],[12656,1,"\u11DF"],[12657,1,"\u111D"],[12658,1,"\u111E"],[12659,1,"\u1120"],[12660,1,"\u1122"],[12661,1,"\u1123"],[12662,1,"\u1127"],[12663,1,"\u1129"],[12664,1,"\u112B"],[12665,1,"\u112C"],[12666,1,"\u112D"],[12667,1,"\u112E"],[12668,1,"\u112F"],[12669,1,"\u1132"],[12670,1,"\u1136"],[12671,1,"\u1140"],[12672,1,"\u1147"],[12673,1,"\u114C"],[12674,1,"\u11F1"],[12675,1,"\u11F2"],[12676,1,"\u1157"],[12677,1,"\u1158"],[12678,1,"\u1159"],[12679,1,"\u1184"],[12680,1,"\u1185"],[12681,1,"\u1188"],[12682,1,"\u1191"],[12683,1,"\u1192"],[12684,1,"\u1194"],[12685,1,"\u119E"],[12686,1,"\u11A1"],[12687,3],[[12688,12689],2],[12690,1,"\u4E00"],[12691,1,"\u4E8C"],[12692,1,"\u4E09"],[12693,1,"\u56DB"],[12694,1,"\u4E0A"],[12695,1,"\u4E2D"],[12696,1,"\u4E0B"],[12697,1,"\u7532"],[12698,1,"\u4E59"],[12699,1,"\u4E19"],[12700,1,"\u4E01"],[12701,1,"\u5929"],[12702,1,"\u5730"],[12703,1,"\u4EBA"],[[12704,12727],2],[[12728,12730],2],[[12731,12735],2],[[12736,12751],2],[[12752,12771],2],[[12772,12783],3],[[12784,12799],2],[12800,5,"(\u1100)"],[12801,5,"(\u1102)"],[12802,5,"(\u1103)"],[12803,5,"(\u1105)"],[12804,5,"(\u1106)"],[12805,5,"(\u1107)"],[12806,5,"(\u1109)"],[12807,5,"(\u110B)"],[12808,5,"(\u110C)"],[12809,5,"(\u110E)"],[12810,5,"(\u110F)"],[12811,5,"(\u1110)"],[12812,5,"(\u1111)"],[12813,5,"(\u1112)"],[12814,5,"(\uAC00)"],[12815,5,"(\uB098)"],[12816,5,"(\uB2E4)"],[12817,5,"(\uB77C)"],[12818,5,"(\uB9C8)"],[12819,5,"(\uBC14)"],[12820,5,"(\uC0AC)"],[12821,5,"(\uC544)"],[12822,5,"(\uC790)"],[12823,5,"(\uCC28)"],[12824,5,"(\uCE74)"],[12825,5,"(\uD0C0)"],[12826,5,"(\uD30C)"],[12827,5,"(\uD558)"],[12828,5,"(\uC8FC)"],[12829,5,"(\uC624\uC804)"],[12830,5,"(\uC624\uD6C4)"],[12831,3],[12832,5,"(\u4E00)"],[12833,5,"(\u4E8C)"],[12834,5,"(\u4E09)"],[12835,5,"(\u56DB)"],[12836,5,"(\u4E94)"],[12837,5,"(\u516D)"],[12838,5,"(\u4E03)"],[12839,5,"(\u516B)"],[12840,5,"(\u4E5D)"],[12841,5,"(\u5341)"],[12842,5,"(\u6708)"],[12843,5,"(\u706B)"],[12844,5,"(\u6C34)"],[12845,5,"(\u6728)"],[12846,5,"(\u91D1)"],[12847,5,"(\u571F)"],[12848,5,"(\u65E5)"],[12849,5,"(\u682A)"],[12850,5,"(\u6709)"],[12851,5,"(\u793E)"],[12852,5,"(\u540D)"],[12853,5,"(\u7279)"],[12854,5,"(\u8CA1)"],[12855,5,"(\u795D)"],[12856,5,"(\u52B4)"],[12857,5,"(\u4EE3)"],[12858,5,"(\u547C)"],[12859,5,"(\u5B66)"],[12860,5,"(\u76E3)"],[12861,5,"(\u4F01)"],[12862,5,"(\u8CC7)"],[12863,5,"(\u5354)"],[12864,5,"(\u796D)"],[12865,5,"(\u4F11)"],[12866,5,"(\u81EA)"],[12867,5,"(\u81F3)"],[12868,1,"\u554F"],[12869,1,"\u5E7C"],[12870,1,"\u6587"],[12871,1,"\u7B8F"],[[12872,12879],2],[12880,1,"pte"],[12881,1,"21"],[12882,1,"22"],[12883,1,"23"],[12884,1,"24"],[12885,1,"25"],[12886,1,"26"],[12887,1,"27"],[12888,1,"28"],[12889,1,"29"],[12890,1,"30"],[12891,1,"31"],[12892,1,"32"],[12893,1,"33"],[12894,1,"34"],[12895,1,"35"],[12896,1,"\u1100"],[12897,1,"\u1102"],[12898,1,"\u1103"],[12899,1,"\u1105"],[12900,1,"\u1106"],[12901,1,"\u1107"],[12902,1,"\u1109"],[12903,1,"\u110B"],[12904,1,"\u110C"],[12905,1,"\u110E"],[12906,1,"\u110F"],[12907,1,"\u1110"],[12908,1,"\u1111"],[12909,1,"\u1112"],[12910,1,"\uAC00"],[12911,1,"\uB098"],[12912,1,"\uB2E4"],[12913,1,"\uB77C"],[12914,1,"\uB9C8"],[12915,1,"\uBC14"],[12916,1,"\uC0AC"],[12917,1,"\uC544"],[12918,1,"\uC790"],[12919,1,"\uCC28"],[12920,1,"\uCE74"],[12921,1,"\uD0C0"],[12922,1,"\uD30C"],[12923,1,"\uD558"],[12924,1,"\uCC38\uACE0"],[12925,1,"\uC8FC\uC758"],[12926,1,"\uC6B0"],[12927,2],[12928,1,"\u4E00"],[12929,1,"\u4E8C"],[12930,1,"\u4E09"],[12931,1,"\u56DB"],[12932,1,"\u4E94"],[12933,1,"\u516D"],[12934,1,"\u4E03"],[12935,1,"\u516B"],[12936,1,"\u4E5D"],[12937,1,"\u5341"],[12938,1,"\u6708"],[12939,1,"\u706B"],[12940,1,"\u6C34"],[12941,1,"\u6728"],[12942,1,"\u91D1"],[12943,1,"\u571F"],[12944,1,"\u65E5"],[12945,1,"\u682A"],[12946,1,"\u6709"],[12947,1,"\u793E"],[12948,1,"\u540D"],[12949,1,"\u7279"],[12950,1,"\u8CA1"],[12951,1,"\u795D"],[12952,1,"\u52B4"],[12953,1,"\u79D8"],[12954,1,"\u7537"],[12955,1,"\u5973"],[12956,1,"\u9069"],[12957,1,"\u512A"],[12958,1,"\u5370"],[12959,1,"\u6CE8"],[12960,1,"\u9805"],[12961,1,"\u4F11"],[12962,1,"\u5199"],[12963,1,"\u6B63"],[12964,1,"\u4E0A"],[12965,1,"\u4E2D"],[12966,1,"\u4E0B"],[12967,1,"\u5DE6"],[12968,1,"\u53F3"],[12969,1,"\u533B"],[12970,1,"\u5B97"],[12971,1,"\u5B66"],[12972,1,"\u76E3"],[12973,1,"\u4F01"],[12974,1,"\u8CC7"],[12975,1,"\u5354"],[12976,1,"\u591C"],[12977,1,"36"],[12978,1,"37"],[12979,1,"38"],[12980,1,"39"],[12981,1,"40"],[12982,1,"41"],[12983,1,"42"],[12984,1,"43"],[12985,1,"44"],[12986,1,"45"],[12987,1,"46"],[12988,1,"47"],[12989,1,"48"],[12990,1,"49"],[12991,1,"50"],[12992,1,"1\u6708"],[12993,1,"2\u6708"],[12994,1,"3\u6708"],[12995,1,"4\u6708"],[12996,1,"5\u6708"],[12997,1,"6\u6708"],[12998,1,"7\u6708"],[12999,1,"8\u6708"],[13000,1,"9\u6708"],[13001,1,"10\u6708"],[13002,1,"11\u6708"],[13003,1,"12\u6708"],[13004,1,"hg"],[13005,1,"erg"],[13006,1,"ev"],[13007,1,"ltd"],[13008,1,"\u30A2"],[13009,1,"\u30A4"],[13010,1,"\u30A6"],[13011,1,"\u30A8"],[13012,1,"\u30AA"],[13013,1,"\u30AB"],[13014,1,"\u30AD"],[13015,1,"\u30AF"],[13016,1,"\u30B1"],[13017,1,"\u30B3"],[13018,1,"\u30B5"],[13019,1,"\u30B7"],[13020,1,"\u30B9"],[13021,1,"\u30BB"],[13022,1,"\u30BD"],[13023,1,"\u30BF"],[13024,1,"\u30C1"],[13025,1,"\u30C4"],[13026,1,"\u30C6"],[13027,1,"\u30C8"],[13028,1,"\u30CA"],[13029,1,"\u30CB"],[13030,1,"\u30CC"],[13031,1,"\u30CD"],[13032,1,"\u30CE"],[13033,1,"\u30CF"],[13034,1,"\u30D2"],[13035,1,"\u30D5"],[13036,1,"\u30D8"],[13037,1,"\u30DB"],[13038,1,"\u30DE"],[13039,1,"\u30DF"],[13040,1,"\u30E0"],[13041,1,"\u30E1"],[13042,1,"\u30E2"],[13043,1,"\u30E4"],[13044,1,"\u30E6"],[13045,1,"\u30E8"],[13046,1,"\u30E9"],[13047,1,"\u30EA"],[13048,1,"\u30EB"],[13049,1,"\u30EC"],[13050,1,"\u30ED"],[13051,1,"\u30EF"],[13052,1,"\u30F0"],[13053,1,"\u30F1"],[13054,1,"\u30F2"],[13055,1,"\u4EE4\u548C"],[13056,1,"\u30A2\u30D1\u30FC\u30C8"],[13057,1,"\u30A2\u30EB\u30D5\u30A1"],[13058,1,"\u30A2\u30F3\u30DA\u30A2"],[13059,1,"\u30A2\u30FC\u30EB"],[13060,1,"\u30A4\u30CB\u30F3\u30B0"],[13061,1,"\u30A4\u30F3\u30C1"],[13062,1,"\u30A6\u30A9\u30F3"],[13063,1,"\u30A8\u30B9\u30AF\u30FC\u30C9"],[13064,1,"\u30A8\u30FC\u30AB\u30FC"],[13065,1,"\u30AA\u30F3\u30B9"],[13066,1,"\u30AA\u30FC\u30E0"],[13067,1,"\u30AB\u30A4\u30EA"],[13068,1,"\u30AB\u30E9\u30C3\u30C8"],[13069,1,"\u30AB\u30ED\u30EA\u30FC"],[13070,1,"\u30AC\u30ED\u30F3"],[13071,1,"\u30AC\u30F3\u30DE"],[13072,1,"\u30AE\u30AC"],[13073,1,"\u30AE\u30CB\u30FC"],[13074,1,"\u30AD\u30E5\u30EA\u30FC"],[13075,1,"\u30AE\u30EB\u30C0\u30FC"],[13076,1,"\u30AD\u30ED"],[13077,1,"\u30AD\u30ED\u30B0\u30E9\u30E0"],[13078,1,"\u30AD\u30ED\u30E1\u30FC\u30C8\u30EB"],[13079,1,"\u30AD\u30ED\u30EF\u30C3\u30C8"],[13080,1,"\u30B0\u30E9\u30E0"],[13081,1,"\u30B0\u30E9\u30E0\u30C8\u30F3"],[13082,1,"\u30AF\u30EB\u30BC\u30A4\u30ED"],[13083,1,"\u30AF\u30ED\u30FC\u30CD"],[13084,1,"\u30B1\u30FC\u30B9"],[13085,1,"\u30B3\u30EB\u30CA"],[13086,1,"\u30B3\u30FC\u30DD"],[13087,1,"\u30B5\u30A4\u30AF\u30EB"],[13088,1,"\u30B5\u30F3\u30C1\u30FC\u30E0"],[13089,1,"\u30B7\u30EA\u30F3\u30B0"],[13090,1,"\u30BB\u30F3\u30C1"],[13091,1,"\u30BB\u30F3\u30C8"],[13092,1,"\u30C0\u30FC\u30B9"],[13093,1,"\u30C7\u30B7"],[13094,1,"\u30C9\u30EB"],[13095,1,"\u30C8\u30F3"],[13096,1,"\u30CA\u30CE"],[13097,1,"\u30CE\u30C3\u30C8"],[13098,1,"\u30CF\u30A4\u30C4"],[13099,1,"\u30D1\u30FC\u30BB\u30F3\u30C8"],[13100,1,"\u30D1\u30FC\u30C4"],[13101,1,"\u30D0\u30FC\u30EC\u30EB"],[13102,1,"\u30D4\u30A2\u30B9\u30C8\u30EB"],[13103,1,"\u30D4\u30AF\u30EB"],[13104,1,"\u30D4\u30B3"],[13105,1,"\u30D3\u30EB"],[13106,1,"\u30D5\u30A1\u30E9\u30C3\u30C9"],[13107,1,"\u30D5\u30A3\u30FC\u30C8"],[13108,1,"\u30D6\u30C3\u30B7\u30A7\u30EB"],[13109,1,"\u30D5\u30E9\u30F3"],[13110,1,"\u30D8\u30AF\u30BF\u30FC\u30EB"],[13111,1,"\u30DA\u30BD"],[13112,1,"\u30DA\u30CB\u30D2"],[13113,1,"\u30D8\u30EB\u30C4"],[13114,1,"\u30DA\u30F3\u30B9"],[13115,1,"\u30DA\u30FC\u30B8"],[13116,1,"\u30D9\u30FC\u30BF"],[13117,1,"\u30DD\u30A4\u30F3\u30C8"],[13118,1,"\u30DC\u30EB\u30C8"],[13119,1,"\u30DB\u30F3"],[13120,1,"\u30DD\u30F3\u30C9"],[13121,1,"\u30DB\u30FC\u30EB"],[13122,1,"\u30DB\u30FC\u30F3"],[13123,1,"\u30DE\u30A4\u30AF\u30ED"],[13124,1,"\u30DE\u30A4\u30EB"],[13125,1,"\u30DE\u30C3\u30CF"],[13126,1,"\u30DE\u30EB\u30AF"],[13127,1,"\u30DE\u30F3\u30B7\u30E7\u30F3"],[13128,1,"\u30DF\u30AF\u30ED\u30F3"],[13129,1,"\u30DF\u30EA"],[13130,1,"\u30DF\u30EA\u30D0\u30FC\u30EB"],[13131,1,"\u30E1\u30AC"],[13132,1,"\u30E1\u30AC\u30C8\u30F3"],[13133,1,"\u30E1\u30FC\u30C8\u30EB"],[13134,1,"\u30E4\u30FC\u30C9"],[13135,1,"\u30E4\u30FC\u30EB"],[13136,1,"\u30E6\u30A2\u30F3"],[13137,1,"\u30EA\u30C3\u30C8\u30EB"],[13138,1,"\u30EA\u30E9"],[13139,1,"\u30EB\u30D4\u30FC"],[13140,1,"\u30EB\u30FC\u30D6\u30EB"],[13141,1,"\u30EC\u30E0"],[13142,1,"\u30EC\u30F3\u30C8\u30B2\u30F3"],[13143,1,"\u30EF\u30C3\u30C8"],[13144,1,"0\u70B9"],[13145,1,"1\u70B9"],[13146,1,"2\u70B9"],[13147,1,"3\u70B9"],[13148,1,"4\u70B9"],[13149,1,"5\u70B9"],[13150,1,"6\u70B9"],[13151,1,"7\u70B9"],[13152,1,"8\u70B9"],[13153,1,"9\u70B9"],[13154,1,"10\u70B9"],[13155,1,"11\u70B9"],[13156,1,"12\u70B9"],[13157,1,"13\u70B9"],[13158,1,"14\u70B9"],[13159,1,"15\u70B9"],[13160,1,"16\u70B9"],[13161,1,"17\u70B9"],[13162,1,"18\u70B9"],[13163,1,"19\u70B9"],[13164,1,"20\u70B9"],[13165,1,"21\u70B9"],[13166,1,"22\u70B9"],[13167,1,"23\u70B9"],[13168,1,"24\u70B9"],[13169,1,"hpa"],[13170,1,"da"],[13171,1,"au"],[13172,1,"bar"],[13173,1,"ov"],[13174,1,"pc"],[13175,1,"dm"],[13176,1,"dm2"],[13177,1,"dm3"],[13178,1,"iu"],[13179,1,"\u5E73\u6210"],[13180,1,"\u662D\u548C"],[13181,1,"\u5927\u6B63"],[13182,1,"\u660E\u6CBB"],[13183,1,"\u682A\u5F0F\u4F1A\u793E"],[13184,1,"pa"],[13185,1,"na"],[13186,1,"\u03BCa"],[13187,1,"ma"],[13188,1,"ka"],[13189,1,"kb"],[13190,1,"mb"],[13191,1,"gb"],[13192,1,"cal"],[13193,1,"kcal"],[13194,1,"pf"],[13195,1,"nf"],[13196,1,"\u03BCf"],[13197,1,"\u03BCg"],[13198,1,"mg"],[13199,1,"kg"],[13200,1,"hz"],[13201,1,"khz"],[13202,1,"mhz"],[13203,1,"ghz"],[13204,1,"thz"],[13205,1,"\u03BCl"],[13206,1,"ml"],[13207,1,"dl"],[13208,1,"kl"],[13209,1,"fm"],[13210,1,"nm"],[13211,1,"\u03BCm"],[13212,1,"mm"],[13213,1,"cm"],[13214,1,"km"],[13215,1,"mm2"],[13216,1,"cm2"],[13217,1,"m2"],[13218,1,"km2"],[13219,1,"mm3"],[13220,1,"cm3"],[13221,1,"m3"],[13222,1,"km3"],[13223,1,"m\u2215s"],[13224,1,"m\u2215s2"],[13225,1,"pa"],[13226,1,"kpa"],[13227,1,"mpa"],[13228,1,"gpa"],[13229,1,"rad"],[13230,1,"rad\u2215s"],[13231,1,"rad\u2215s2"],[13232,1,"ps"],[13233,1,"ns"],[13234,1,"\u03BCs"],[13235,1,"ms"],[13236,1,"pv"],[13237,1,"nv"],[13238,1,"\u03BCv"],[13239,1,"mv"],[13240,1,"kv"],[13241,1,"mv"],[13242,1,"pw"],[13243,1,"nw"],[13244,1,"\u03BCw"],[13245,1,"mw"],[13246,1,"kw"],[13247,1,"mw"],[13248,1,"k\u03C9"],[13249,1,"m\u03C9"],[13250,3],[13251,1,"bq"],[13252,1,"cc"],[13253,1,"cd"],[13254,1,"c\u2215kg"],[13255,3],[13256,1,"db"],[13257,1,"gy"],[13258,1,"ha"],[13259,1,"hp"],[13260,1,"in"],[13261,1,"kk"],[13262,1,"km"],[13263,1,"kt"],[13264,1,"lm"],[13265,1,"ln"],[13266,1,"log"],[13267,1,"lx"],[13268,1,"mb"],[13269,1,"mil"],[13270,1,"mol"],[13271,1,"ph"],[13272,3],[13273,1,"ppm"],[13274,1,"pr"],[13275,1,"sr"],[13276,1,"sv"],[13277,1,"wb"],[13278,1,"v\u2215m"],[13279,1,"a\u2215m"],[13280,1,"1\u65E5"],[13281,1,"2\u65E5"],[13282,1,"3\u65E5"],[13283,1,"4\u65E5"],[13284,1,"5\u65E5"],[13285,1,"6\u65E5"],[13286,1,"7\u65E5"],[13287,1,"8\u65E5"],[13288,1,"9\u65E5"],[13289,1,"10\u65E5"],[13290,1,"11\u65E5"],[13291,1,"12\u65E5"],[13292,1,"13\u65E5"],[13293,1,"14\u65E5"],[13294,1,"15\u65E5"],[13295,1,"16\u65E5"],[13296,1,"17\u65E5"],[13297,1,"18\u65E5"],[13298,1,"19\u65E5"],[13299,1,"20\u65E5"],[13300,1,"21\u65E5"],[13301,1,"22\u65E5"],[13302,1,"23\u65E5"],[13303,1,"24\u65E5"],[13304,1,"25\u65E5"],[13305,1,"26\u65E5"],[13306,1,"27\u65E5"],[13307,1,"28\u65E5"],[13308,1,"29\u65E5"],[13309,1,"30\u65E5"],[13310,1,"31\u65E5"],[13311,1,"gal"],[[13312,19893],2],[[19894,19903],2],[[19904,19967],2],[[19968,40869],2],[[40870,40891],2],[[40892,40899],2],[[40900,40907],2],[40908,2],[[40909,40917],2],[[40918,40938],2],[[40939,40943],2],[[40944,40956],2],[[40957,40959],2],[[40960,42124],2],[[42125,42127],3],[[42128,42145],2],[[42146,42147],2],[[42148,42163],2],[42164,2],[[42165,42176],2],[42177,2],[[42178,42180],2],[42181,2],[42182,2],[[42183,42191],3],[[42192,42237],2],[[42238,42239],2],[[42240,42508],2],[[42509,42511],2],[[42512,42539],2],[[42540,42559],3],[42560,1,"\uA641"],[42561,2],[42562,1,"\uA643"],[42563,2],[42564,1,"\uA645"],[42565,2],[42566,1,"\uA647"],[42567,2],[42568,1,"\uA649"],[42569,2],[42570,1,"\uA64B"],[42571,2],[42572,1,"\uA64D"],[42573,2],[42574,1,"\uA64F"],[42575,2],[42576,1,"\uA651"],[42577,2],[42578,1,"\uA653"],[42579,2],[42580,1,"\uA655"],[42581,2],[42582,1,"\uA657"],[42583,2],[42584,1,"\uA659"],[42585,2],[42586,1,"\uA65B"],[42587,2],[42588,1,"\uA65D"],[42589,2],[42590,1,"\uA65F"],[42591,2],[42592,1,"\uA661"],[42593,2],[42594,1,"\uA663"],[42595,2],[42596,1,"\uA665"],[42597,2],[42598,1,"\uA667"],[42599,2],[42600,1,"\uA669"],[42601,2],[42602,1,"\uA66B"],[42603,2],[42604,1,"\uA66D"],[[42605,42607],2],[[42608,42611],2],[[42612,42619],2],[[42620,42621],2],[42622,2],[42623,2],[42624,1,"\uA681"],[42625,2],[42626,1,"\uA683"],[42627,2],[42628,1,"\uA685"],[42629,2],[42630,1,"\uA687"],[42631,2],[42632,1,"\uA689"],[42633,2],[42634,1,"\uA68B"],[42635,2],[42636,1,"\uA68D"],[42637,2],[42638,1,"\uA68F"],[42639,2],[42640,1,"\uA691"],[42641,2],[42642,1,"\uA693"],[42643,2],[42644,1,"\uA695"],[42645,2],[42646,1,"\uA697"],[42647,2],[42648,1,"\uA699"],[42649,2],[42650,1,"\uA69B"],[42651,2],[42652,1,"\u044A"],[42653,1,"\u044C"],[42654,2],[42655,2],[[42656,42725],2],[[42726,42735],2],[[42736,42737],2],[[42738,42743],2],[[42744,42751],3],[[42752,42774],2],[[42775,42778],2],[[42779,42783],2],[[42784,42785],2],[42786,1,"\uA723"],[42787,2],[42788,1,"\uA725"],[42789,2],[42790,1,"\uA727"],[42791,2],[42792,1,"\uA729"],[42793,2],[42794,1,"\uA72B"],[42795,2],[42796,1,"\uA72D"],[42797,2],[42798,1,"\uA72F"],[[42799,42801],2],[42802,1,"\uA733"],[42803,2],[42804,1,"\uA735"],[42805,2],[42806,1,"\uA737"],[42807,2],[42808,1,"\uA739"],[42809,2],[42810,1,"\uA73B"],[42811,2],[42812,1,"\uA73D"],[42813,2],[42814,1,"\uA73F"],[42815,2],[42816,1,"\uA741"],[42817,2],[42818,1,"\uA743"],[42819,2],[42820,1,"\uA745"],[42821,2],[42822,1,"\uA747"],[42823,2],[42824,1,"\uA749"],[42825,2],[42826,1,"\uA74B"],[42827,2],[42828,1,"\uA74D"],[42829,2],[42830,1,"\uA74F"],[42831,2],[42832,1,"\uA751"],[42833,2],[42834,1,"\uA753"],[42835,2],[42836,1,"\uA755"],[42837,2],[42838,1,"\uA757"],[42839,2],[42840,1,"\uA759"],[42841,2],[42842,1,"\uA75B"],[42843,2],[42844,1,"\uA75D"],[42845,2],[42846,1,"\uA75F"],[42847,2],[42848,1,"\uA761"],[42849,2],[42850,1,"\uA763"],[42851,2],[42852,1,"\uA765"],[42853,2],[42854,1,"\uA767"],[42855,2],[42856,1,"\uA769"],[42857,2],[42858,1,"\uA76B"],[42859,2],[42860,1,"\uA76D"],[42861,2],[42862,1,"\uA76F"],[42863,2],[42864,1,"\uA76F"],[[42865,42872],2],[42873,1,"\uA77A"],[42874,2],[42875,1,"\uA77C"],[42876,2],[42877,1,"\u1D79"],[42878,1,"\uA77F"],[42879,2],[42880,1,"\uA781"],[42881,2],[42882,1,"\uA783"],[42883,2],[42884,1,"\uA785"],[42885,2],[42886,1,"\uA787"],[[42887,42888],2],[[42889,42890],2],[42891,1,"\uA78C"],[42892,2],[42893,1,"\u0265"],[42894,2],[42895,2],[42896,1,"\uA791"],[42897,2],[42898,1,"\uA793"],[42899,2],[[42900,42901],2],[42902,1,"\uA797"],[42903,2],[42904,1,"\uA799"],[42905,2],[42906,1,"\uA79B"],[42907,2],[42908,1,"\uA79D"],[42909,2],[42910,1,"\uA79F"],[42911,2],[42912,1,"\uA7A1"],[42913,2],[42914,1,"\uA7A3"],[42915,2],[42916,1,"\uA7A5"],[42917,2],[42918,1,"\uA7A7"],[42919,2],[42920,1,"\uA7A9"],[42921,2],[42922,1,"\u0266"],[42923,1,"\u025C"],[42924,1,"\u0261"],[42925,1,"\u026C"],[42926,1,"\u026A"],[42927,2],[42928,1,"\u029E"],[42929,1,"\u0287"],[42930,1,"\u029D"],[42931,1,"\uAB53"],[42932,1,"\uA7B5"],[42933,2],[42934,1,"\uA7B7"],[42935,2],[42936,1,"\uA7B9"],[42937,2],[42938,1,"\uA7BB"],[42939,2],[42940,1,"\uA7BD"],[42941,2],[42942,1,"\uA7BF"],[42943,2],[42944,1,"\uA7C1"],[42945,2],[42946,1,"\uA7C3"],[42947,2],[42948,1,"\uA794"],[42949,1,"\u0282"],[42950,1,"\u1D8E"],[42951,1,"\uA7C8"],[42952,2],[42953,1,"\uA7CA"],[42954,2],[[42955,42959],3],[42960,1,"\uA7D1"],[42961,2],[42962,3],[42963,2],[42964,3],[42965,2],[42966,1,"\uA7D7"],[42967,2],[42968,1,"\uA7D9"],[42969,2],[[42970,42993],3],[42994,1,"c"],[42995,1,"f"],[42996,1,"q"],[42997,1,"\uA7F6"],[42998,2],[42999,2],[43000,1,"\u0127"],[43001,1,"\u0153"],[43002,2],[[43003,43007],2],[[43008,43047],2],[[43048,43051],2],[43052,2],[[43053,43055],3],[[43056,43065],2],[[43066,43071],3],[[43072,43123],2],[[43124,43127],2],[[43128,43135],3],[[43136,43204],2],[43205,2],[[43206,43213],3],[[43214,43215],2],[[43216,43225],2],[[43226,43231],3],[[43232,43255],2],[[43256,43258],2],[43259,2],[43260,2],[43261,2],[[43262,43263],2],[[43264,43309],2],[[43310,43311],2],[[43312,43347],2],[[43348,43358],3],[43359,2],[[43360,43388],2],[[43389,43391],3],[[43392,43456],2],[[43457,43469],2],[43470,3],[[43471,43481],2],[[43482,43485],3],[[43486,43487],2],[[43488,43518],2],[43519,3],[[43520,43574],2],[[43575,43583],3],[[43584,43597],2],[[43598,43599],3],[[43600,43609],2],[[43610,43611],3],[[43612,43615],2],[[43616,43638],2],[[43639,43641],2],[[43642,43643],2],[[43644,43647],2],[[43648,43714],2],[[43715,43738],3],[[43739,43741],2],[[43742,43743],2],[[43744,43759],2],[[43760,43761],2],[[43762,43766],2],[[43767,43776],3],[[43777,43782],2],[[43783,43784],3],[[43785,43790],2],[[43791,43792],3],[[43793,43798],2],[[43799,43807],3],[[43808,43814],2],[43815,3],[[43816,43822],2],[43823,3],[[43824,43866],2],[43867,2],[43868,1,"\uA727"],[43869,1,"\uAB37"],[43870,1,"\u026B"],[43871,1,"\uAB52"],[[43872,43875],2],[[43876,43877],2],[[43878,43879],2],[43880,2],[43881,1,"\u028D"],[[43882,43883],2],[[43884,43887],3],[43888,1,"\u13A0"],[43889,1,"\u13A1"],[43890,1,"\u13A2"],[43891,1,"\u13A3"],[43892,1,"\u13A4"],[43893,1,"\u13A5"],[43894,1,"\u13A6"],[43895,1,"\u13A7"],[43896,1,"\u13A8"],[43897,1,"\u13A9"],[43898,1,"\u13AA"],[43899,1,"\u13AB"],[43900,1,"\u13AC"],[43901,1,"\u13AD"],[43902,1,"\u13AE"],[43903,1,"\u13AF"],[43904,1,"\u13B0"],[43905,1,"\u13B1"],[43906,1,"\u13B2"],[43907,1,"\u13B3"],[43908,1,"\u13B4"],[43909,1,"\u13B5"],[43910,1,"\u13B6"],[43911,1,"\u13B7"],[43912,1,"\u13B8"],[43913,1,"\u13B9"],[43914,1,"\u13BA"],[43915,1,"\u13BB"],[43916,1,"\u13BC"],[43917,1,"\u13BD"],[43918,1,"\u13BE"],[43919,1,"\u13BF"],[43920,1,"\u13C0"],[43921,1,"\u13C1"],[43922,1,"\u13C2"],[43923,1,"\u13C3"],[43924,1,"\u13C4"],[43925,1,"\u13C5"],[43926,1,"\u13C6"],[43927,1,"\u13C7"],[43928,1,"\u13C8"],[43929,1,"\u13C9"],[43930,1,"\u13CA"],[43931,1,"\u13CB"],[43932,1,"\u13CC"],[43933,1,"\u13CD"],[43934,1,"\u13CE"],[43935,1,"\u13CF"],[43936,1,"\u13D0"],[43937,1,"\u13D1"],[43938,1,"\u13D2"],[43939,1,"\u13D3"],[43940,1,"\u13D4"],[43941,1,"\u13D5"],[43942,1,"\u13D6"],[43943,1,"\u13D7"],[43944,1,"\u13D8"],[43945,1,"\u13D9"],[43946,1,"\u13DA"],[43947,1,"\u13DB"],[43948,1,"\u13DC"],[43949,1,"\u13DD"],[43950,1,"\u13DE"],[43951,1,"\u13DF"],[43952,1,"\u13E0"],[43953,1,"\u13E1"],[43954,1,"\u13E2"],[43955,1,"\u13E3"],[43956,1,"\u13E4"],[43957,1,"\u13E5"],[43958,1,"\u13E6"],[43959,1,"\u13E7"],[43960,1,"\u13E8"],[43961,1,"\u13E9"],[43962,1,"\u13EA"],[43963,1,"\u13EB"],[43964,1,"\u13EC"],[43965,1,"\u13ED"],[43966,1,"\u13EE"],[43967,1,"\u13EF"],[[43968,44010],2],[44011,2],[[44012,44013],2],[[44014,44015],3],[[44016,44025],2],[[44026,44031],3],[[44032,55203],2],[[55204,55215],3],[[55216,55238],2],[[55239,55242],3],[[55243,55291],2],[[55292,55295],3],[[55296,57343],3],[[57344,63743],3],[63744,1,"\u8C48"],[63745,1,"\u66F4"],[63746,1,"\u8ECA"],[63747,1,"\u8CC8"],[63748,1,"\u6ED1"],[63749,1,"\u4E32"],[63750,1,"\u53E5"],[[63751,63752],1,"\u9F9C"],[63753,1,"\u5951"],[63754,1,"\u91D1"],[63755,1,"\u5587"],[63756,1,"\u5948"],[63757,1,"\u61F6"],[63758,1,"\u7669"],[63759,1,"\u7F85"],[63760,1,"\u863F"],[63761,1,"\u87BA"],[63762,1,"\u88F8"],[63763,1,"\u908F"],[63764,1,"\u6A02"],[63765,1,"\u6D1B"],[63766,1,"\u70D9"],[63767,1,"\u73DE"],[63768,1,"\u843D"],[63769,1,"\u916A"],[63770,1,"\u99F1"],[63771,1,"\u4E82"],[63772,1,"\u5375"],[63773,1,"\u6B04"],[63774,1,"\u721B"],[63775,1,"\u862D"],[63776,1,"\u9E1E"],[63777,1,"\u5D50"],[63778,1,"\u6FEB"],[63779,1,"\u85CD"],[63780,1,"\u8964"],[63781,1,"\u62C9"],[63782,1,"\u81D8"],[63783,1,"\u881F"],[63784,1,"\u5ECA"],[63785,1,"\u6717"],[63786,1,"\u6D6A"],[63787,1,"\u72FC"],[63788,1,"\u90CE"],[63789,1,"\u4F86"],[63790,1,"\u51B7"],[63791,1,"\u52DE"],[63792,1,"\u64C4"],[63793,1,"\u6AD3"],[63794,1,"\u7210"],[63795,1,"\u76E7"],[63796,1,"\u8001"],[63797,1,"\u8606"],[63798,1,"\u865C"],[63799,1,"\u8DEF"],[63800,1,"\u9732"],[63801,1,"\u9B6F"],[63802,1,"\u9DFA"],[63803,1,"\u788C"],[63804,1,"\u797F"],[63805,1,"\u7DA0"],[63806,1,"\u83C9"],[63807,1,"\u9304"],[63808,1,"\u9E7F"],[63809,1,"\u8AD6"],[63810,1,"\u58DF"],[63811,1,"\u5F04"],[63812,1,"\u7C60"],[63813,1,"\u807E"],[63814,1,"\u7262"],[63815,1,"\u78CA"],[63816,1,"\u8CC2"],[63817,1,"\u96F7"],[63818,1,"\u58D8"],[63819,1,"\u5C62"],[63820,1,"\u6A13"],[63821,1,"\u6DDA"],[63822,1,"\u6F0F"],[63823,1,"\u7D2F"],[63824,1,"\u7E37"],[63825,1,"\u964B"],[63826,1,"\u52D2"],[63827,1,"\u808B"],[63828,1,"\u51DC"],[63829,1,"\u51CC"],[63830,1,"\u7A1C"],[63831,1,"\u7DBE"],[63832,1,"\u83F1"],[63833,1,"\u9675"],[63834,1,"\u8B80"],[63835,1,"\u62CF"],[63836,1,"\u6A02"],[63837,1,"\u8AFE"],[63838,1,"\u4E39"],[63839,1,"\u5BE7"],[63840,1,"\u6012"],[63841,1,"\u7387"],[63842,1,"\u7570"],[63843,1,"\u5317"],[63844,1,"\u78FB"],[63845,1,"\u4FBF"],[63846,1,"\u5FA9"],[63847,1,"\u4E0D"],[63848,1,"\u6CCC"],[63849,1,"\u6578"],[63850,1,"\u7D22"],[63851,1,"\u53C3"],[63852,1,"\u585E"],[63853,1,"\u7701"],[63854,1,"\u8449"],[63855,1,"\u8AAA"],[63856,1,"\u6BBA"],[63857,1,"\u8FB0"],[63858,1,"\u6C88"],[63859,1,"\u62FE"],[63860,1,"\u82E5"],[63861,1,"\u63A0"],[63862,1,"\u7565"],[63863,1,"\u4EAE"],[63864,1,"\u5169"],[63865,1,"\u51C9"],[63866,1,"\u6881"],[63867,1,"\u7CE7"],[63868,1,"\u826F"],[63869,1,"\u8AD2"],[63870,1,"\u91CF"],[63871,1,"\u52F5"],[63872,1,"\u5442"],[63873,1,"\u5973"],[63874,1,"\u5EEC"],[63875,1,"\u65C5"],[63876,1,"\u6FFE"],[63877,1,"\u792A"],[63878,1,"\u95AD"],[63879,1,"\u9A6A"],[63880,1,"\u9E97"],[63881,1,"\u9ECE"],[63882,1,"\u529B"],[63883,1,"\u66C6"],[63884,1,"\u6B77"],[63885,1,"\u8F62"],[63886,1,"\u5E74"],[63887,1,"\u6190"],[63888,1,"\u6200"],[63889,1,"\u649A"],[63890,1,"\u6F23"],[63891,1,"\u7149"],[63892,1,"\u7489"],[63893,1,"\u79CA"],[63894,1,"\u7DF4"],[63895,1,"\u806F"],[63896,1,"\u8F26"],[63897,1,"\u84EE"],[63898,1,"\u9023"],[63899,1,"\u934A"],[63900,1,"\u5217"],[63901,1,"\u52A3"],[63902,1,"\u54BD"],[63903,1,"\u70C8"],[63904,1,"\u88C2"],[63905,1,"\u8AAA"],[63906,1,"\u5EC9"],[63907,1,"\u5FF5"],[63908,1,"\u637B"],[63909,1,"\u6BAE"],[63910,1,"\u7C3E"],[63911,1,"\u7375"],[63912,1,"\u4EE4"],[63913,1,"\u56F9"],[63914,1,"\u5BE7"],[63915,1,"\u5DBA"],[63916,1,"\u601C"],[63917,1,"\u73B2"],[63918,1,"\u7469"],[63919,1,"\u7F9A"],[63920,1,"\u8046"],[63921,1,"\u9234"],[63922,1,"\u96F6"],[63923,1,"\u9748"],[63924,1,"\u9818"],[63925,1,"\u4F8B"],[63926,1,"\u79AE"],[63927,1,"\u91B4"],[63928,1,"\u96B8"],[63929,1,"\u60E1"],[63930,1,"\u4E86"],[63931,1,"\u50DA"],[63932,1,"\u5BEE"],[63933,1,"\u5C3F"],[63934,1,"\u6599"],[63935,1,"\u6A02"],[63936,1,"\u71CE"],[63937,1,"\u7642"],[63938,1,"\u84FC"],[63939,1,"\u907C"],[63940,1,"\u9F8D"],[63941,1,"\u6688"],[63942,1,"\u962E"],[63943,1,"\u5289"],[63944,1,"\u677B"],[63945,1,"\u67F3"],[63946,1,"\u6D41"],[63947,1,"\u6E9C"],[63948,1,"\u7409"],[63949,1,"\u7559"],[63950,1,"\u786B"],[63951,1,"\u7D10"],[63952,1,"\u985E"],[63953,1,"\u516D"],[63954,1,"\u622E"],[63955,1,"\u9678"],[63956,1,"\u502B"],[63957,1,"\u5D19"],[63958,1,"\u6DEA"],[63959,1,"\u8F2A"],[63960,1,"\u5F8B"],[63961,1,"\u6144"],[63962,1,"\u6817"],[63963,1,"\u7387"],[63964,1,"\u9686"],[63965,1,"\u5229"],[63966,1,"\u540F"],[63967,1,"\u5C65"],[63968,1,"\u6613"],[63969,1,"\u674E"],[63970,1,"\u68A8"],[63971,1,"\u6CE5"],[63972,1,"\u7406"],[63973,1,"\u75E2"],[63974,1,"\u7F79"],[63975,1,"\u88CF"],[63976,1,"\u88E1"],[63977,1,"\u91CC"],[63978,1,"\u96E2"],[63979,1,"\u533F"],[63980,1,"\u6EBA"],[63981,1,"\u541D"],[63982,1,"\u71D0"],[63983,1,"\u7498"],[63984,1,"\u85FA"],[63985,1,"\u96A3"],[63986,1,"\u9C57"],[63987,1,"\u9E9F"],[63988,1,"\u6797"],[63989,1,"\u6DCB"],[63990,1,"\u81E8"],[63991,1,"\u7ACB"],[63992,1,"\u7B20"],[63993,1,"\u7C92"],[63994,1,"\u72C0"],[63995,1,"\u7099"],[63996,1,"\u8B58"],[63997,1,"\u4EC0"],[63998,1,"\u8336"],[63999,1,"\u523A"],[64000,1,"\u5207"],[64001,1,"\u5EA6"],[64002,1,"\u62D3"],[64003,1,"\u7CD6"],[64004,1,"\u5B85"],[64005,1,"\u6D1E"],[64006,1,"\u66B4"],[64007,1,"\u8F3B"],[64008,1,"\u884C"],[64009,1,"\u964D"],[64010,1,"\u898B"],[64011,1,"\u5ED3"],[64012,1,"\u5140"],[64013,1,"\u55C0"],[[64014,64015],2],[64016,1,"\u585A"],[64017,2],[64018,1,"\u6674"],[[64019,64020],2],[64021,1,"\u51DE"],[64022,1,"\u732A"],[64023,1,"\u76CA"],[64024,1,"\u793C"],[64025,1,"\u795E"],[64026,1,"\u7965"],[64027,1,"\u798F"],[64028,1,"\u9756"],[64029,1,"\u7CBE"],[64030,1,"\u7FBD"],[64031,2],[64032,1,"\u8612"],[64033,2],[64034,1,"\u8AF8"],[[64035,64036],2],[64037,1,"\u9038"],[64038,1,"\u90FD"],[[64039,64041],2],[64042,1,"\u98EF"],[64043,1,"\u98FC"],[64044,1,"\u9928"],[64045,1,"\u9DB4"],[64046,1,"\u90DE"],[64047,1,"\u96B7"],[64048,1,"\u4FAE"],[64049,1,"\u50E7"],[64050,1,"\u514D"],[64051,1,"\u52C9"],[64052,1,"\u52E4"],[64053,1,"\u5351"],[64054,1,"\u559D"],[64055,1,"\u5606"],[64056,1,"\u5668"],[64057,1,"\u5840"],[64058,1,"\u58A8"],[64059,1,"\u5C64"],[64060,1,"\u5C6E"],[64061,1,"\u6094"],[64062,1,"\u6168"],[64063,1,"\u618E"],[64064,1,"\u61F2"],[64065,1,"\u654F"],[64066,1,"\u65E2"],[64067,1,"\u6691"],[64068,1,"\u6885"],[64069,1,"\u6D77"],[64070,1,"\u6E1A"],[64071,1,"\u6F22"],[64072,1,"\u716E"],[64073,1,"\u722B"],[64074,1,"\u7422"],[64075,1,"\u7891"],[64076,1,"\u793E"],[64077,1,"\u7949"],[64078,1,"\u7948"],[64079,1,"\u7950"],[64080,1,"\u7956"],[64081,1,"\u795D"],[64082,1,"\u798D"],[64083,1,"\u798E"],[64084,1,"\u7A40"],[64085,1,"\u7A81"],[64086,1,"\u7BC0"],[64087,1,"\u7DF4"],[64088,1,"\u7E09"],[64089,1,"\u7E41"],[64090,1,"\u7F72"],[64091,1,"\u8005"],[64092,1,"\u81ED"],[[64093,64094],1,"\u8279"],[64095,1,"\u8457"],[64096,1,"\u8910"],[64097,1,"\u8996"],[64098,1,"\u8B01"],[64099,1,"\u8B39"],[64100,1,"\u8CD3"],[64101,1,"\u8D08"],[64102,1,"\u8FB6"],[64103,1,"\u9038"],[64104,1,"\u96E3"],[64105,1,"\u97FF"],[64106,1,"\u983B"],[64107,1,"\u6075"],[64108,1,"\uD850\uDEEE"],[64109,1,"\u8218"],[[64110,64111],3],[64112,1,"\u4E26"],[64113,1,"\u51B5"],[64114,1,"\u5168"],[64115,1,"\u4F80"],[64116,1,"\u5145"],[64117,1,"\u5180"],[64118,1,"\u52C7"],[64119,1,"\u52FA"],[64120,1,"\u559D"],[64121,1,"\u5555"],[64122,1,"\u5599"],[64123,1,"\u55E2"],[64124,1,"\u585A"],[64125,1,"\u58B3"],[64126,1,"\u5944"],[64127,1,"\u5954"],[64128,1,"\u5A62"],[64129,1,"\u5B28"],[64130,1,"\u5ED2"],[64131,1,"\u5ED9"],[64132,1,"\u5F69"],[64133,1,"\u5FAD"],[64134,1,"\u60D8"],[64135,1,"\u614E"],[64136,1,"\u6108"],[64137,1,"\u618E"],[64138,1,"\u6160"],[64139,1,"\u61F2"],[64140,1,"\u6234"],[64141,1,"\u63C4"],[64142,1,"\u641C"],[64143,1,"\u6452"],[64144,1,"\u6556"],[64145,1,"\u6674"],[64146,1,"\u6717"],[64147,1,"\u671B"],[64148,1,"\u6756"],[64149,1,"\u6B79"],[64150,1,"\u6BBA"],[64151,1,"\u6D41"],[64152,1,"\u6EDB"],[64153,1,"\u6ECB"],[64154,1,"\u6F22"],[64155,1,"\u701E"],[64156,1,"\u716E"],[64157,1,"\u77A7"],[64158,1,"\u7235"],[64159,1,"\u72AF"],[64160,1,"\u732A"],[64161,1,"\u7471"],[64162,1,"\u7506"],[64163,1,"\u753B"],[64164,1,"\u761D"],[64165,1,"\u761F"],[64166,1,"\u76CA"],[64167,1,"\u76DB"],[64168,1,"\u76F4"],[64169,1,"\u774A"],[64170,1,"\u7740"],[64171,1,"\u78CC"],[64172,1,"\u7AB1"],[64173,1,"\u7BC0"],[64174,1,"\u7C7B"],[64175,1,"\u7D5B"],[64176,1,"\u7DF4"],[64177,1,"\u7F3E"],[64178,1,"\u8005"],[64179,1,"\u8352"],[64180,1,"\u83EF"],[64181,1,"\u8779"],[64182,1,"\u8941"],[64183,1,"\u8986"],[64184,1,"\u8996"],[64185,1,"\u8ABF"],[64186,1,"\u8AF8"],[64187,1,"\u8ACB"],[64188,1,"\u8B01"],[64189,1,"\u8AFE"],[64190,1,"\u8AED"],[64191,1,"\u8B39"],[64192,1,"\u8B8A"],[64193,1,"\u8D08"],[64194,1,"\u8F38"],[64195,1,"\u9072"],[64196,1,"\u9199"],[64197,1,"\u9276"],[64198,1,"\u967C"],[64199,1,"\u96E3"],[64200,1,"\u9756"],[64201,1,"\u97DB"],[64202,1,"\u97FF"],[64203,1,"\u980B"],[64204,1,"\u983B"],[64205,1,"\u9B12"],[64206,1,"\u9F9C"],[64207,1,"\uD84A\uDC4A"],[64208,1,"\uD84A\uDC44"],[64209,1,"\uD84C\uDFD5"],[64210,1,"\u3B9D"],[64211,1,"\u4018"],[64212,1,"\u4039"],[64213,1,"\uD854\uDE49"],[64214,1,"\uD857\uDCD0"],[64215,1,"\uD85F\uDED3"],[64216,1,"\u9F43"],[64217,1,"\u9F8E"],[[64218,64255],3],[64256,1,"ff"],[64257,1,"fi"],[64258,1,"fl"],[64259,1,"ffi"],[64260,1,"ffl"],[[64261,64262],1,"st"],[[64263,64274],3],[64275,1,"\u0574\u0576"],[64276,1,"\u0574\u0565"],[64277,1,"\u0574\u056B"],[64278,1,"\u057E\u0576"],[64279,1,"\u0574\u056D"],[[64280,64284],3],[64285,1,"\u05D9\u05B4"],[64286,2],[64287,1,"\u05F2\u05B7"],[64288,1,"\u05E2"],[64289,1,"\u05D0"],[64290,1,"\u05D3"],[64291,1,"\u05D4"],[64292,1,"\u05DB"],[64293,1,"\u05DC"],[64294,1,"\u05DD"],[64295,1,"\u05E8"],[64296,1,"\u05EA"],[64297,5,"+"],[64298,1,"\u05E9\u05C1"],[64299,1,"\u05E9\u05C2"],[64300,1,"\u05E9\u05BC\u05C1"],[64301,1,"\u05E9\u05BC\u05C2"],[64302,1,"\u05D0\u05B7"],[64303,1,"\u05D0\u05B8"],[64304,1,"\u05D0\u05BC"],[64305,1,"\u05D1\u05BC"],[64306,1,"\u05D2\u05BC"],[64307,1,"\u05D3\u05BC"],[64308,1,"\u05D4\u05BC"],[64309,1,"\u05D5\u05BC"],[64310,1,"\u05D6\u05BC"],[64311,3],[64312,1,"\u05D8\u05BC"],[64313,1,"\u05D9\u05BC"],[64314,1,"\u05DA\u05BC"],[64315,1,"\u05DB\u05BC"],[64316,1,"\u05DC\u05BC"],[64317,3],[64318,1,"\u05DE\u05BC"],[64319,3],[64320,1,"\u05E0\u05BC"],[64321,1,"\u05E1\u05BC"],[64322,3],[64323,1,"\u05E3\u05BC"],[64324,1,"\u05E4\u05BC"],[64325,3],[64326,1,"\u05E6\u05BC"],[64327,1,"\u05E7\u05BC"],[64328,1,"\u05E8\u05BC"],[64329,1,"\u05E9\u05BC"],[64330,1,"\u05EA\u05BC"],[64331,1,"\u05D5\u05B9"],[64332,1,"\u05D1\u05BF"],[64333,1,"\u05DB\u05BF"],[64334,1,"\u05E4\u05BF"],[64335,1,"\u05D0\u05DC"],[[64336,64337],1,"\u0671"],[[64338,64341],1,"\u067B"],[[64342,64345],1,"\u067E"],[[64346,64349],1,"\u0680"],[[64350,64353],1,"\u067A"],[[64354,64357],1,"\u067F"],[[64358,64361],1,"\u0679"],[[64362,64365],1,"\u06A4"],[[64366,64369],1,"\u06A6"],[[64370,64373],1,"\u0684"],[[64374,64377],1,"\u0683"],[[64378,64381],1,"\u0686"],[[64382,64385],1,"\u0687"],[[64386,64387],1,"\u068D"],[[64388,64389],1,"\u068C"],[[64390,64391],1,"\u068E"],[[64392,64393],1,"\u0688"],[[64394,64395],1,"\u0698"],[[64396,64397],1,"\u0691"],[[64398,64401],1,"\u06A9"],[[64402,64405],1,"\u06AF"],[[64406,64409],1,"\u06B3"],[[64410,64413],1,"\u06B1"],[[64414,64415],1,"\u06BA"],[[64416,64419],1,"\u06BB"],[[64420,64421],1,"\u06C0"],[[64422,64425],1,"\u06C1"],[[64426,64429],1,"\u06BE"],[[64430,64431],1,"\u06D2"],[[64432,64433],1,"\u06D3"],[[64434,64449],2],[64450,2],[[64451,64466],3],[[64467,64470],1,"\u06AD"],[[64471,64472],1,"\u06C7"],[[64473,64474],1,"\u06C6"],[[64475,64476],1,"\u06C8"],[64477,1,"\u06C7\u0674"],[[64478,64479],1,"\u06CB"],[[64480,64481],1,"\u06C5"],[[64482,64483],1,"\u06C9"],[[64484,64487],1,"\u06D0"],[[64488,64489],1,"\u0649"],[[64490,64491],1,"\u0626\u0627"],[[64492,64493],1,"\u0626\u06D5"],[[64494,64495],1,"\u0626\u0648"],[[64496,64497],1,"\u0626\u06C7"],[[64498,64499],1,"\u0626\u06C6"],[[64500,64501],1,"\u0626\u06C8"],[[64502,64504],1,"\u0626\u06D0"],[[64505,64507],1,"\u0626\u0649"],[[64508,64511],1,"\u06CC"],[64512,1,"\u0626\u062C"],[64513,1,"\u0626\u062D"],[64514,1,"\u0626\u0645"],[64515,1,"\u0626\u0649"],[64516,1,"\u0626\u064A"],[64517,1,"\u0628\u062C"],[64518,1,"\u0628\u062D"],[64519,1,"\u0628\u062E"],[64520,1,"\u0628\u0645"],[64521,1,"\u0628\u0649"],[64522,1,"\u0628\u064A"],[64523,1,"\u062A\u062C"],[64524,1,"\u062A\u062D"],[64525,1,"\u062A\u062E"],[64526,1,"\u062A\u0645"],[64527,1,"\u062A\u0649"],[64528,1,"\u062A\u064A"],[64529,1,"\u062B\u062C"],[64530,1,"\u062B\u0645"],[64531,1,"\u062B\u0649"],[64532,1,"\u062B\u064A"],[64533,1,"\u062C\u062D"],[64534,1,"\u062C\u0645"],[64535,1,"\u062D\u062C"],[64536,1,"\u062D\u0645"],[64537,1,"\u062E\u062C"],[64538,1,"\u062E\u062D"],[64539,1,"\u062E\u0645"],[64540,1,"\u0633\u062C"],[64541,1,"\u0633\u062D"],[64542,1,"\u0633\u062E"],[64543,1,"\u0633\u0645"],[64544,1,"\u0635\u062D"],[64545,1,"\u0635\u0645"],[64546,1,"\u0636\u062C"],[64547,1,"\u0636\u062D"],[64548,1,"\u0636\u062E"],[64549,1,"\u0636\u0645"],[64550,1,"\u0637\u062D"],[64551,1,"\u0637\u0645"],[64552,1,"\u0638\u0645"],[64553,1,"\u0639\u062C"],[64554,1,"\u0639\u0645"],[64555,1,"\u063A\u062C"],[64556,1,"\u063A\u0645"],[64557,1,"\u0641\u062C"],[64558,1,"\u0641\u062D"],[64559,1,"\u0641\u062E"],[64560,1,"\u0641\u0645"],[64561,1,"\u0641\u0649"],[64562,1,"\u0641\u064A"],[64563,1,"\u0642\u062D"],[64564,1,"\u0642\u0645"],[64565,1,"\u0642\u0649"],[64566,1,"\u0642\u064A"],[64567,1,"\u0643\u0627"],[64568,1,"\u0643\u062C"],[64569,1,"\u0643\u062D"],[64570,1,"\u0643\u062E"],[64571,1,"\u0643\u0644"],[64572,1,"\u0643\u0645"],[64573,1,"\u0643\u0649"],[64574,1,"\u0643\u064A"],[64575,1,"\u0644\u062C"],[64576,1,"\u0644\u062D"],[64577,1,"\u0644\u062E"],[64578,1,"\u0644\u0645"],[64579,1,"\u0644\u0649"],[64580,1,"\u0644\u064A"],[64581,1,"\u0645\u062C"],[64582,1,"\u0645\u062D"],[64583,1,"\u0645\u062E"],[64584,1,"\u0645\u0645"],[64585,1,"\u0645\u0649"],[64586,1,"\u0645\u064A"],[64587,1,"\u0646\u062C"],[64588,1,"\u0646\u062D"],[64589,1,"\u0646\u062E"],[64590,1,"\u0646\u0645"],[64591,1,"\u0646\u0649"],[64592,1,"\u0646\u064A"],[64593,1,"\u0647\u062C"],[64594,1,"\u0647\u0645"],[64595,1,"\u0647\u0649"],[64596,1,"\u0647\u064A"],[64597,1,"\u064A\u062C"],[64598,1,"\u064A\u062D"],[64599,1,"\u064A\u062E"],[64600,1,"\u064A\u0645"],[64601,1,"\u064A\u0649"],[64602,1,"\u064A\u064A"],[64603,1,"\u0630\u0670"],[64604,1,"\u0631\u0670"],[64605,1,"\u0649\u0670"],[64606,5," \u064C\u0651"],[64607,5," \u064D\u0651"],[64608,5," \u064E\u0651"],[64609,5," \u064F\u0651"],[64610,5," \u0650\u0651"],[64611,5," \u0651\u0670"],[64612,1,"\u0626\u0631"],[64613,1,"\u0626\u0632"],[64614,1,"\u0626\u0645"],[64615,1,"\u0626\u0646"],[64616,1,"\u0626\u0649"],[64617,1,"\u0626\u064A"],[64618,1,"\u0628\u0631"],[64619,1,"\u0628\u0632"],[64620,1,"\u0628\u0645"],[64621,1,"\u0628\u0646"],[64622,1,"\u0628\u0649"],[64623,1,"\u0628\u064A"],[64624,1,"\u062A\u0631"],[64625,1,"\u062A\u0632"],[64626,1,"\u062A\u0645"],[64627,1,"\u062A\u0646"],[64628,1,"\u062A\u0649"],[64629,1,"\u062A\u064A"],[64630,1,"\u062B\u0631"],[64631,1,"\u062B\u0632"],[64632,1,"\u062B\u0645"],[64633,1,"\u062B\u0646"],[64634,1,"\u062B\u0649"],[64635,1,"\u062B\u064A"],[64636,1,"\u0641\u0649"],[64637,1,"\u0641\u064A"],[64638,1,"\u0642\u0649"],[64639,1,"\u0642\u064A"],[64640,1,"\u0643\u0627"],[64641,1,"\u0643\u0644"],[64642,1,"\u0643\u0645"],[64643,1,"\u0643\u0649"],[64644,1,"\u0643\u064A"],[64645,1,"\u0644\u0645"],[64646,1,"\u0644\u0649"],[64647,1,"\u0644\u064A"],[64648,1,"\u0645\u0627"],[64649,1,"\u0645\u0645"],[64650,1,"\u0646\u0631"],[64651,1,"\u0646\u0632"],[64652,1,"\u0646\u0645"],[64653,1,"\u0646\u0646"],[64654,1,"\u0646\u0649"],[64655,1,"\u0646\u064A"],[64656,1,"\u0649\u0670"],[64657,1,"\u064A\u0631"],[64658,1,"\u064A\u0632"],[64659,1,"\u064A\u0645"],[64660,1,"\u064A\u0646"],[64661,1,"\u064A\u0649"],[64662,1,"\u064A\u064A"],[64663,1,"\u0626\u062C"],[64664,1,"\u0626\u062D"],[64665,1,"\u0626\u062E"],[64666,1,"\u0626\u0645"],[64667,1,"\u0626\u0647"],[64668,1,"\u0628\u062C"],[64669,1,"\u0628\u062D"],[64670,1,"\u0628\u062E"],[64671,1,"\u0628\u0645"],[64672,1,"\u0628\u0647"],[64673,1,"\u062A\u062C"],[64674,1,"\u062A\u062D"],[64675,1,"\u062A\u062E"],[64676,1,"\u062A\u0645"],[64677,1,"\u062A\u0647"],[64678,1,"\u062B\u0645"],[64679,1,"\u062C\u062D"],[64680,1,"\u062C\u0645"],[64681,1,"\u062D\u062C"],[64682,1,"\u062D\u0645"],[64683,1,"\u062E\u062C"],[64684,1,"\u062E\u0645"],[64685,1,"\u0633\u062C"],[64686,1,"\u0633\u062D"],[64687,1,"\u0633\u062E"],[64688,1,"\u0633\u0645"],[64689,1,"\u0635\u062D"],[64690,1,"\u0635\u062E"],[64691,1,"\u0635\u0645"],[64692,1,"\u0636\u062C"],[64693,1,"\u0636\u062D"],[64694,1,"\u0636\u062E"],[64695,1,"\u0636\u0645"],[64696,1,"\u0637\u062D"],[64697,1,"\u0638\u0645"],[64698,1,"\u0639\u062C"],[64699,1,"\u0639\u0645"],[64700,1,"\u063A\u062C"],[64701,1,"\u063A\u0645"],[64702,1,"\u0641\u062C"],[64703,1,"\u0641\u062D"],[64704,1,"\u0641\u062E"],[64705,1,"\u0641\u0645"],[64706,1,"\u0642\u062D"],[64707,1,"\u0642\u0645"],[64708,1,"\u0643\u062C"],[64709,1,"\u0643\u062D"],[64710,1,"\u0643\u062E"],[64711,1,"\u0643\u0644"],[64712,1,"\u0643\u0645"],[64713,1,"\u0644\u062C"],[64714,1,"\u0644\u062D"],[64715,1,"\u0644\u062E"],[64716,1,"\u0644\u0645"],[64717,1,"\u0644\u0647"],[64718,1,"\u0645\u062C"],[64719,1,"\u0645\u062D"],[64720,1,"\u0645\u062E"],[64721,1,"\u0645\u0645"],[64722,1,"\u0646\u062C"],[64723,1,"\u0646\u062D"],[64724,1,"\u0646\u062E"],[64725,1,"\u0646\u0645"],[64726,1,"\u0646\u0647"],[64727,1,"\u0647\u062C"],[64728,1,"\u0647\u0645"],[64729,1,"\u0647\u0670"],[64730,1,"\u064A\u062C"],[64731,1,"\u064A\u062D"],[64732,1,"\u064A\u062E"],[64733,1,"\u064A\u0645"],[64734,1,"\u064A\u0647"],[64735,1,"\u0626\u0645"],[64736,1,"\u0626\u0647"],[64737,1,"\u0628\u0645"],[64738,1,"\u0628\u0647"],[64739,1,"\u062A\u0645"],[64740,1,"\u062A\u0647"],[64741,1,"\u062B\u0645"],[64742,1,"\u062B\u0647"],[64743,1,"\u0633\u0645"],[64744,1,"\u0633\u0647"],[64745,1,"\u0634\u0645"],[64746,1,"\u0634\u0647"],[64747,1,"\u0643\u0644"],[64748,1,"\u0643\u0645"],[64749,1,"\u0644\u0645"],[64750,1,"\u0646\u0645"],[64751,1,"\u0646\u0647"],[64752,1,"\u064A\u0645"],[64753,1,"\u064A\u0647"],[64754,1,"\u0640\u064E\u0651"],[64755,1,"\u0640\u064F\u0651"],[64756,1,"\u0640\u0650\u0651"],[64757,1,"\u0637\u0649"],[64758,1,"\u0637\u064A"],[64759,1,"\u0639\u0649"],[64760,1,"\u0639\u064A"],[64761,1,"\u063A\u0649"],[64762,1,"\u063A\u064A"],[64763,1,"\u0633\u0649"],[64764,1,"\u0633\u064A"],[64765,1,"\u0634\u0649"],[64766,1,"\u0634\u064A"],[64767,1,"\u062D\u0649"],[64768,1,"\u062D\u064A"],[64769,1,"\u062C\u0649"],[64770,1,"\u062C\u064A"],[64771,1,"\u062E\u0649"],[64772,1,"\u062E\u064A"],[64773,1,"\u0635\u0649"],[64774,1,"\u0635\u064A"],[64775,1,"\u0636\u0649"],[64776,1,"\u0636\u064A"],[64777,1,"\u0634\u062C"],[64778,1,"\u0634\u062D"],[64779,1,"\u0634\u062E"],[64780,1,"\u0634\u0645"],[64781,1,"\u0634\u0631"],[64782,1,"\u0633\u0631"],[64783,1,"\u0635\u0631"],[64784,1,"\u0636\u0631"],[64785,1,"\u0637\u0649"],[64786,1,"\u0637\u064A"],[64787,1,"\u0639\u0649"],[64788,1,"\u0639\u064A"],[64789,1,"\u063A\u0649"],[64790,1,"\u063A\u064A"],[64791,1,"\u0633\u0649"],[64792,1,"\u0633\u064A"],[64793,1,"\u0634\u0649"],[64794,1,"\u0634\u064A"],[64795,1,"\u062D\u0649"],[64796,1,"\u062D\u064A"],[64797,1,"\u062C\u0649"],[64798,1,"\u062C\u064A"],[64799,1,"\u062E\u0649"],[64800,1,"\u062E\u064A"],[64801,1,"\u0635\u0649"],[64802,1,"\u0635\u064A"],[64803,1,"\u0636\u0649"],[64804,1,"\u0636\u064A"],[64805,1,"\u0634\u062C"],[64806,1,"\u0634\u062D"],[64807,1,"\u0634\u062E"],[64808,1,"\u0634\u0645"],[64809,1,"\u0634\u0631"],[64810,1,"\u0633\u0631"],[64811,1,"\u0635\u0631"],[64812,1,"\u0636\u0631"],[64813,1,"\u0634\u062C"],[64814,1,"\u0634\u062D"],[64815,1,"\u0634\u062E"],[64816,1,"\u0634\u0645"],[64817,1,"\u0633\u0647"],[64818,1,"\u0634\u0647"],[64819,1,"\u0637\u0645"],[64820,1,"\u0633\u062C"],[64821,1,"\u0633\u062D"],[64822,1,"\u0633\u062E"],[64823,1,"\u0634\u062C"],[64824,1,"\u0634\u062D"],[64825,1,"\u0634\u062E"],[64826,1,"\u0637\u0645"],[64827,1,"\u0638\u0645"],[[64828,64829],1,"\u0627\u064B"],[[64830,64831],2],[[64832,64847],2],[64848,1,"\u062A\u062C\u0645"],[[64849,64850],1,"\u062A\u062D\u062C"],[64851,1,"\u062A\u062D\u0645"],[64852,1,"\u062A\u062E\u0645"],[64853,1,"\u062A\u0645\u062C"],[64854,1,"\u062A\u0645\u062D"],[64855,1,"\u062A\u0645\u062E"],[[64856,64857],1,"\u062C\u0645\u062D"],[64858,1,"\u062D\u0645\u064A"],[64859,1,"\u062D\u0645\u0649"],[64860,1,"\u0633\u062D\u062C"],[64861,1,"\u0633\u062C\u062D"],[64862,1,"\u0633\u062C\u0649"],[[64863,64864],1,"\u0633\u0645\u062D"],[64865,1,"\u0633\u0645\u062C"],[[64866,64867],1,"\u0633\u0645\u0645"],[[64868,64869],1,"\u0635\u062D\u062D"],[64870,1,"\u0635\u0645\u0645"],[[64871,64872],1,"\u0634\u062D\u0645"],[64873,1,"\u0634\u062C\u064A"],[[64874,64875],1,"\u0634\u0645\u062E"],[[64876,64877],1,"\u0634\u0645\u0645"],[64878,1,"\u0636\u062D\u0649"],[[64879,64880],1,"\u0636\u062E\u0645"],[[64881,64882],1,"\u0637\u0645\u062D"],[64883,1,"\u0637\u0645\u0645"],[64884,1,"\u0637\u0645\u064A"],[64885,1,"\u0639\u062C\u0645"],[[64886,64887],1,"\u0639\u0645\u0645"],[64888,1,"\u0639\u0645\u0649"],[64889,1,"\u063A\u0645\u0645"],[64890,1,"\u063A\u0645\u064A"],[64891,1,"\u063A\u0645\u0649"],[[64892,64893],1,"\u0641\u062E\u0645"],[64894,1,"\u0642\u0645\u062D"],[64895,1,"\u0642\u0645\u0645"],[64896,1,"\u0644\u062D\u0645"],[64897,1,"\u0644\u062D\u064A"],[64898,1,"\u0644\u062D\u0649"],[[64899,64900],1,"\u0644\u062C\u062C"],[[64901,64902],1,"\u0644\u062E\u0645"],[[64903,64904],1,"\u0644\u0645\u062D"],[64905,1,"\u0645\u062D\u062C"],[64906,1,"\u0645\u062D\u0645"],[64907,1,"\u0645\u062D\u064A"],[64908,1,"\u0645\u062C\u062D"],[64909,1,"\u0645\u062C\u0645"],[64910,1,"\u0645\u062E\u062C"],[64911,1,"\u0645\u062E\u0645"],[[64912,64913],3],[64914,1,"\u0645\u062C\u062E"],[64915,1,"\u0647\u0645\u062C"],[64916,1,"\u0647\u0645\u0645"],[64917,1,"\u0646\u062D\u0645"],[64918,1,"\u0646\u062D\u0649"],[[64919,64920],1,"\u0646\u062C\u0645"],[64921,1,"\u0646\u062C\u0649"],[64922,1,"\u0646\u0645\u064A"],[64923,1,"\u0646\u0645\u0649"],[[64924,64925],1,"\u064A\u0645\u0645"],[64926,1,"\u0628\u062E\u064A"],[64927,1,"\u062A\u062C\u064A"],[64928,1,"\u062A\u062C\u0649"],[64929,1,"\u062A\u062E\u064A"],[64930,1,"\u062A\u062E\u0649"],[64931,1,"\u062A\u0645\u064A"],[64932,1,"\u062A\u0645\u0649"],[64933,1,"\u062C\u0645\u064A"],[64934,1,"\u062C\u062D\u0649"],[64935,1,"\u062C\u0645\u0649"],[64936,1,"\u0633\u062E\u0649"],[64937,1,"\u0635\u062D\u064A"],[64938,1,"\u0634\u062D\u064A"],[64939,1,"\u0636\u062D\u064A"],[64940,1,"\u0644\u062C\u064A"],[64941,1,"\u0644\u0645\u064A"],[64942,1,"\u064A\u062D\u064A"],[64943,1,"\u064A\u062C\u064A"],[64944,1,"\u064A\u0645\u064A"],[64945,1,"\u0645\u0645\u064A"],[64946,1,"\u0642\u0645\u064A"],[64947,1,"\u0646\u062D\u064A"],[64948,1,"\u0642\u0645\u062D"],[64949,1,"\u0644\u062D\u0645"],[64950,1,"\u0639\u0645\u064A"],[64951,1,"\u0643\u0645\u064A"],[64952,1,"\u0646\u062C\u062D"],[64953,1,"\u0645\u062E\u064A"],[64954,1,"\u0644\u062C\u0645"],[64955,1,"\u0643\u0645\u0645"],[64956,1,"\u0644\u062C\u0645"],[64957,1,"\u0646\u062C\u062D"],[64958,1,"\u062C\u062D\u064A"],[64959,1,"\u062D\u062C\u064A"],[64960,1,"\u0645\u062C\u064A"],[64961,1,"\u0641\u0645\u064A"],[64962,1,"\u0628\u062D\u064A"],[64963,1,"\u0643\u0645\u0645"],[64964,1,"\u0639\u062C\u0645"],[64965,1,"\u0635\u0645\u0645"],[64966,1,"\u0633\u062E\u064A"],[64967,1,"\u0646\u062C\u064A"],[[64968,64974],3],[64975,2],[[64976,65007],3],[65008,1,"\u0635\u0644\u06D2"],[65009,1,"\u0642\u0644\u06D2"],[65010,1,"\u0627\u0644\u0644\u0647"],[65011,1,"\u0627\u0643\u0628\u0631"],[65012,1,"\u0645\u062D\u0645\u062F"],[65013,1,"\u0635\u0644\u0639\u0645"],[65014,1,"\u0631\u0633\u0648\u0644"],[65015,1,"\u0639\u0644\u064A\u0647"],[65016,1,"\u0648\u0633\u0644\u0645"],[65017,1,"\u0635\u0644\u0649"],[65018,5,"\u0635\u0644\u0649 \u0627\u0644\u0644\u0647 \u0639\u0644\u064A\u0647 \u0648\u0633\u0644\u0645"],[65019,5,"\u062C\u0644 \u062C\u0644\u0627\u0644\u0647"],[65020,1,"\u0631\u06CC\u0627\u0644"],[65021,2],[[65022,65023],2],[[65024,65039],7],[65040,5,","],[65041,1,"\u3001"],[65042,3],[65043,5,":"],[65044,5,";"],[65045,5,"!"],[65046,5,"?"],[65047,1,"\u3016"],[65048,1,"\u3017"],[65049,3],[[65050,65055],3],[[65056,65059],2],[[65060,65062],2],[[65063,65069],2],[[65070,65071],2],[65072,3],[65073,1,"\u2014"],[65074,1,"\u2013"],[[65075,65076],5,"_"],[65077,5,"("],[65078,5,")"],[65079,5,"{"],[65080,5,"}"],[65081,1,"\u3014"],[65082,1,"\u3015"],[65083,1,"\u3010"],[65084,1,"\u3011"],[65085,1,"\u300A"],[65086,1,"\u300B"],[65087,1,"\u3008"],[65088,1,"\u3009"],[65089,1,"\u300C"],[65090,1,"\u300D"],[65091,1,"\u300E"],[65092,1,"\u300F"],[[65093,65094],2],[65095,5,"["],[65096,5,"]"],[[65097,65100],5," \u0305"],[[65101,65103],5,"_"],[65104,5,","],[65105,1,"\u3001"],[65106,3],[65107,3],[65108,5,";"],[65109,5,":"],[65110,5,"?"],[65111,5,"!"],[65112,1,"\u2014"],[65113,5,"("],[65114,5,")"],[65115,5,"{"],[65116,5,"}"],[65117,1,"\u3014"],[65118,1,"\u3015"],[65119,5,"#"],[65120,5,"&"],[65121,5,"*"],[65122,5,"+"],[65123,1,"-"],[65124,5,"<"],[65125,5,">"],[65126,5,"="],[65127,3],[65128,5,"\\"],[65129,5,"$"],[65130,5,"%"],[65131,5,"@"],[[65132,65135],3],[65136,5," \u064B"],[65137,1,"\u0640\u064B"],[65138,5," \u064C"],[65139,2],[65140,5," \u064D"],[65141,3],[65142,5," \u064E"],[65143,1,"\u0640\u064E"],[65144,5," \u064F"],[65145,1,"\u0640\u064F"],[65146,5," \u0650"],[65147,1,"\u0640\u0650"],[65148,5," \u0651"],[65149,1,"\u0640\u0651"],[65150,5," \u0652"],[65151,1,"\u0640\u0652"],[65152,1,"\u0621"],[[65153,65154],1,"\u0622"],[[65155,65156],1,"\u0623"],[[65157,65158],1,"\u0624"],[[65159,65160],1,"\u0625"],[[65161,65164],1,"\u0626"],[[65165,65166],1,"\u0627"],[[65167,65170],1,"\u0628"],[[65171,65172],1,"\u0629"],[[65173,65176],1,"\u062A"],[[65177,65180],1,"\u062B"],[[65181,65184],1,"\u062C"],[[65185,65188],1,"\u062D"],[[65189,65192],1,"\u062E"],[[65193,65194],1,"\u062F"],[[65195,65196],1,"\u0630"],[[65197,65198],1,"\u0631"],[[65199,65200],1,"\u0632"],[[65201,65204],1,"\u0633"],[[65205,65208],1,"\u0634"],[[65209,65212],1,"\u0635"],[[65213,65216],1,"\u0636"],[[65217,65220],1,"\u0637"],[[65221,65224],1,"\u0638"],[[65225,65228],1,"\u0639"],[[65229,65232],1,"\u063A"],[[65233,65236],1,"\u0641"],[[65237,65240],1,"\u0642"],[[65241,65244],1,"\u0643"],[[65245,65248],1,"\u0644"],[[65249,65252],1,"\u0645"],[[65253,65256],1,"\u0646"],[[65257,65260],1,"\u0647"],[[65261,65262],1,"\u0648"],[[65263,65264],1,"\u0649"],[[65265,65268],1,"\u064A"],[[65269,65270],1,"\u0644\u0622"],[[65271,65272],1,"\u0644\u0623"],[[65273,65274],1,"\u0644\u0625"],[[65275,65276],1,"\u0644\u0627"],[[65277,65278],3],[65279,7],[65280,3],[65281,5,"!"],[65282,5,"\""],[65283,5,"#"],[65284,5,"$"],[65285,5,"%"],[65286,5,"&"],[65287,5,"'"],[65288,5,"("],[65289,5,")"],[65290,5,"*"],[65291,5,"+"],[65292,5,","],[65293,1,"-"],[65294,1,"."],[65295,5,"/"],[65296,1,"0"],[65297,1,"1"],[65298,1,"2"],[65299,1,"3"],[65300,1,"4"],[65301,1,"5"],[65302,1,"6"],[65303,1,"7"],[65304,1,"8"],[65305,1,"9"],[65306,5,":"],[65307,5,";"],[65308,5,"<"],[65309,5,"="],[65310,5,">"],[65311,5,"?"],[65312,5,"@"],[65313,1,"a"],[65314,1,"b"],[65315,1,"c"],[65316,1,"d"],[65317,1,"e"],[65318,1,"f"],[65319,1,"g"],[65320,1,"h"],[65321,1,"i"],[65322,1,"j"],[65323,1,"k"],[65324,1,"l"],[65325,1,"m"],[65326,1,"n"],[65327,1,"o"],[65328,1,"p"],[65329,1,"q"],[65330,1,"r"],[65331,1,"s"],[65332,1,"t"],[65333,1,"u"],[65334,1,"v"],[65335,1,"w"],[65336,1,"x"],[65337,1,"y"],[65338,1,"z"],[65339,5,"["],[65340,5,"\\"],[65341,5,"]"],[65342,5,"^"],[65343,5,"_"],[65344,5,"`"],[65345,1,"a"],[65346,1,"b"],[65347,1,"c"],[65348,1,"d"],[65349,1,"e"],[65350,1,"f"],[65351,1,"g"],[65352,1,"h"],[65353,1,"i"],[65354,1,"j"],[65355,1,"k"],[65356,1,"l"],[65357,1,"m"],[65358,1,"n"],[65359,1,"o"],[65360,1,"p"],[65361,1,"q"],[65362,1,"r"],[65363,1,"s"],[65364,1,"t"],[65365,1,"u"],[65366,1,"v"],[65367,1,"w"],[65368,1,"x"],[65369,1,"y"],[65370,1,"z"],[65371,5,"{"],[65372,5,"|"],[65373,5,"}"],[65374,5,"~"],[65375,1,"\u2985"],[65376,1,"\u2986"],[65377,1,"."],[65378,1,"\u300C"],[65379,1,"\u300D"],[65380,1,"\u3001"],[65381,1,"\u30FB"],[65382,1,"\u30F2"],[65383,1,"\u30A1"],[65384,1,"\u30A3"],[65385,1,"\u30A5"],[65386,1,"\u30A7"],[65387,1,"\u30A9"],[65388,1,"\u30E3"],[65389,1,"\u30E5"],[65390,1,"\u30E7"],[65391,1,"\u30C3"],[65392,1,"\u30FC"],[65393,1,"\u30A2"],[65394,1,"\u30A4"],[65395,1,"\u30A6"],[65396,1,"\u30A8"],[65397,1,"\u30AA"],[65398,1,"\u30AB"],[65399,1,"\u30AD"],[65400,1,"\u30AF"],[65401,1,"\u30B1"],[65402,1,"\u30B3"],[65403,1,"\u30B5"],[65404,1,"\u30B7"],[65405,1,"\u30B9"],[65406,1,"\u30BB"],[65407,1,"\u30BD"],[65408,1,"\u30BF"],[65409,1,"\u30C1"],[65410,1,"\u30C4"],[65411,1,"\u30C6"],[65412,1,"\u30C8"],[65413,1,"\u30CA"],[65414,1,"\u30CB"],[65415,1,"\u30CC"],[65416,1,"\u30CD"],[65417,1,"\u30CE"],[65418,1,"\u30CF"],[65419,1,"\u30D2"],[65420,1,"\u30D5"],[65421,1,"\u30D8"],[65422,1,"\u30DB"],[65423,1,"\u30DE"],[65424,1,"\u30DF"],[65425,1,"\u30E0"],[65426,1,"\u30E1"],[65427,1,"\u30E2"],[65428,1,"\u30E4"],[65429,1,"\u30E6"],[65430,1,"\u30E8"],[65431,1,"\u30E9"],[65432,1,"\u30EA"],[65433,1,"\u30EB"],[65434,1,"\u30EC"],[65435,1,"\u30ED"],[65436,1,"\u30EF"],[65437,1,"\u30F3"],[65438,1,"\u3099"],[65439,1,"\u309A"],[65440,3],[65441,1,"\u1100"],[65442,1,"\u1101"],[65443,1,"\u11AA"],[65444,1,"\u1102"],[65445,1,"\u11AC"],[65446,1,"\u11AD"],[65447,1,"\u1103"],[65448,1,"\u1104"],[65449,1,"\u1105"],[65450,1,"\u11B0"],[65451,1,"\u11B1"],[65452,1,"\u11B2"],[65453,1,"\u11B3"],[65454,1,"\u11B4"],[65455,1,"\u11B5"],[65456,1,"\u111A"],[65457,1,"\u1106"],[65458,1,"\u1107"],[65459,1,"\u1108"],[65460,1,"\u1121"],[65461,1,"\u1109"],[65462,1,"\u110A"],[65463,1,"\u110B"],[65464,1,"\u110C"],[65465,1,"\u110D"],[65466,1,"\u110E"],[65467,1,"\u110F"],[65468,1,"\u1110"],[65469,1,"\u1111"],[65470,1,"\u1112"],[[65471,65473],3],[65474,1,"\u1161"],[65475,1,"\u1162"],[65476,1,"\u1163"],[65477,1,"\u1164"],[65478,1,"\u1165"],[65479,1,"\u1166"],[[65480,65481],3],[65482,1,"\u1167"],[65483,1,"\u1168"],[65484,1,"\u1169"],[65485,1,"\u116A"],[65486,1,"\u116B"],[65487,1,"\u116C"],[[65488,65489],3],[65490,1,"\u116D"],[65491,1,"\u116E"],[65492,1,"\u116F"],[65493,1,"\u1170"],[65494,1,"\u1171"],[65495,1,"\u1172"],[[65496,65497],3],[65498,1,"\u1173"],[65499,1,"\u1174"],[65500,1,"\u1175"],[[65501,65503],3],[65504,1,"\xA2"],[65505,1,"\xA3"],[65506,1,"\xAC"],[65507,5," \u0304"],[65508,1,"\xA6"],[65509,1,"\xA5"],[65510,1,"\u20A9"],[65511,3],[65512,1,"\u2502"],[65513,1,"\u2190"],[65514,1,"\u2191"],[65515,1,"\u2192"],[65516,1,"\u2193"],[65517,1,"\u25A0"],[65518,1,"\u25CB"],[[65519,65528],3],[[65529,65531],3],[65532,3],[65533,3],[[65534,65535],3],[[65536,65547],2],[65548,3],[[65549,65574],2],[65575,3],[[65576,65594],2],[65595,3],[[65596,65597],2],[65598,3],[[65599,65613],2],[[65614,65615],3],[[65616,65629],2],[[65630,65663],3],[[65664,65786],2],[[65787,65791],3],[[65792,65794],2],[[65795,65798],3],[[65799,65843],2],[[65844,65846],3],[[65847,65855],2],[[65856,65930],2],[[65931,65932],2],[[65933,65934],2],[65935,3],[[65936,65947],2],[65948,2],[[65949,65951],3],[65952,2],[[65953,65999],3],[[66000,66044],2],[66045,2],[[66046,66175],3],[[66176,66204],2],[[66205,66207],3],[[66208,66256],2],[[66257,66271],3],[66272,2],[[66273,66299],2],[[66300,66303],3],[[66304,66334],2],[66335,2],[[66336,66339],2],[[66340,66348],3],[[66349,66351],2],[[66352,66368],2],[66369,2],[[66370,66377],2],[66378,2],[[66379,66383],3],[[66384,66426],2],[[66427,66431],3],[[66432,66461],2],[66462,3],[66463,2],[[66464,66499],2],[[66500,66503],3],[[66504,66511],2],[[66512,66517],2],[[66518,66559],3],[66560,1,"\uD801\uDC28"],[66561,1,"\uD801\uDC29"],[66562,1,"\uD801\uDC2A"],[66563,1,"\uD801\uDC2B"],[66564,1,"\uD801\uDC2C"],[66565,1,"\uD801\uDC2D"],[66566,1,"\uD801\uDC2E"],[66567,1,"\uD801\uDC2F"],[66568,1,"\uD801\uDC30"],[66569,1,"\uD801\uDC31"],[66570,1,"\uD801\uDC32"],[66571,1,"\uD801\uDC33"],[66572,1,"\uD801\uDC34"],[66573,1,"\uD801\uDC35"],[66574,1,"\uD801\uDC36"],[66575,1,"\uD801\uDC37"],[66576,1,"\uD801\uDC38"],[66577,1,"\uD801\uDC39"],[66578,1,"\uD801\uDC3A"],[66579,1,"\uD801\uDC3B"],[66580,1,"\uD801\uDC3C"],[66581,1,"\uD801\uDC3D"],[66582,1,"\uD801\uDC3E"],[66583,1,"\uD801\uDC3F"],[66584,1,"\uD801\uDC40"],[66585,1,"\uD801\uDC41"],[66586,1,"\uD801\uDC42"],[66587,1,"\uD801\uDC43"],[66588,1,"\uD801\uDC44"],[66589,1,"\uD801\uDC45"],[66590,1,"\uD801\uDC46"],[66591,1,"\uD801\uDC47"],[66592,1,"\uD801\uDC48"],[66593,1,"\uD801\uDC49"],[66594,1,"\uD801\uDC4A"],[66595,1,"\uD801\uDC4B"],[66596,1,"\uD801\uDC4C"],[66597,1,"\uD801\uDC4D"],[66598,1,"\uD801\uDC4E"],[66599,1,"\uD801\uDC4F"],[[66600,66637],2],[[66638,66717],2],[[66718,66719],3],[[66720,66729],2],[[66730,66735],3],[66736,1,"\uD801\uDCD8"],[66737,1,"\uD801\uDCD9"],[66738,1,"\uD801\uDCDA"],[66739,1,"\uD801\uDCDB"],[66740,1,"\uD801\uDCDC"],[66741,1,"\uD801\uDCDD"],[66742,1,"\uD801\uDCDE"],[66743,1,"\uD801\uDCDF"],[66744,1,"\uD801\uDCE0"],[66745,1,"\uD801\uDCE1"],[66746,1,"\uD801\uDCE2"],[66747,1,"\uD801\uDCE3"],[66748,1,"\uD801\uDCE4"],[66749,1,"\uD801\uDCE5"],[66750,1,"\uD801\uDCE6"],[66751,1,"\uD801\uDCE7"],[66752,1,"\uD801\uDCE8"],[66753,1,"\uD801\uDCE9"],[66754,1,"\uD801\uDCEA"],[66755,1,"\uD801\uDCEB"],[66756,1,"\uD801\uDCEC"],[66757,1,"\uD801\uDCED"],[66758,1,"\uD801\uDCEE"],[66759,1,"\uD801\uDCEF"],[66760,1,"\uD801\uDCF0"],[66761,1,"\uD801\uDCF1"],[66762,1,"\uD801\uDCF2"],[66763,1,"\uD801\uDCF3"],[66764,1,"\uD801\uDCF4"],[66765,1,"\uD801\uDCF5"],[66766,1,"\uD801\uDCF6"],[66767,1,"\uD801\uDCF7"],[66768,1,"\uD801\uDCF8"],[66769,1,"\uD801\uDCF9"],[66770,1,"\uD801\uDCFA"],[66771,1,"\uD801\uDCFB"],[[66772,66775],3],[[66776,66811],2],[[66812,66815],3],[[66816,66855],2],[[66856,66863],3],[[66864,66915],2],[[66916,66926],3],[66927,2],[66928,1,"\uD801\uDD97"],[66929,1,"\uD801\uDD98"],[66930,1,"\uD801\uDD99"],[66931,1,"\uD801\uDD9A"],[66932,1,"\uD801\uDD9B"],[66933,1,"\uD801\uDD9C"],[66934,1,"\uD801\uDD9D"],[66935,1,"\uD801\uDD9E"],[66936,1,"\uD801\uDD9F"],[66937,1,"\uD801\uDDA0"],[66938,1,"\uD801\uDDA1"],[66939,3],[66940,1,"\uD801\uDDA3"],[66941,1,"\uD801\uDDA4"],[66942,1,"\uD801\uDDA5"],[66943,1,"\uD801\uDDA6"],[66944,1,"\uD801\uDDA7"],[66945,1,"\uD801\uDDA8"],[66946,1,"\uD801\uDDA9"],[66947,1,"\uD801\uDDAA"],[66948,1,"\uD801\uDDAB"],[66949,1,"\uD801\uDDAC"],[66950,1,"\uD801\uDDAD"],[66951,1,"\uD801\uDDAE"],[66952,1,"\uD801\uDDAF"],[66953,1,"\uD801\uDDB0"],[66954,1,"\uD801\uDDB1"],[66955,3],[66956,1,"\uD801\uDDB3"],[66957,1,"\uD801\uDDB4"],[66958,1,"\uD801\uDDB5"],[66959,1,"\uD801\uDDB6"],[66960,1,"\uD801\uDDB7"],[66961,1,"\uD801\uDDB8"],[66962,1,"\uD801\uDDB9"],[66963,3],[66964,1,"\uD801\uDDBB"],[66965,1,"\uD801\uDDBC"],[66966,3],[[66967,66977],2],[66978,3],[[66979,66993],2],[66994,3],[[66995,67001],2],[67002,3],[[67003,67004],2],[[67005,67071],3],[[67072,67382],2],[[67383,67391],3],[[67392,67413],2],[[67414,67423],3],[[67424,67431],2],[[67432,67455],3],[67456,2],[67457,1,"\u02D0"],[67458,1,"\u02D1"],[67459,1,"\xE6"],[67460,1,"\u0299"],[67461,1,"\u0253"],[67462,3],[67463,1,"\u02A3"],[67464,1,"\uAB66"],[67465,1,"\u02A5"],[67466,1,"\u02A4"],[67467,1,"\u0256"],[67468,1,"\u0257"],[67469,1,"\u1D91"],[67470,1,"\u0258"],[67471,1,"\u025E"],[67472,1,"\u02A9"],[67473,1,"\u0264"],[67474,1,"\u0262"],[67475,1,"\u0260"],[67476,1,"\u029B"],[67477,1,"\u0127"],[67478,1,"\u029C"],[67479,1,"\u0267"],[67480,1,"\u0284"],[67481,1,"\u02AA"],[67482,1,"\u02AB"],[67483,1,"\u026C"],[67484,1,"\uD837\uDF04"],[67485,1,"\uA78E"],[67486,1,"\u026E"],[67487,1,"\uD837\uDF05"],[67488,1,"\u028E"],[67489,1,"\uD837\uDF06"],[67490,1,"\xF8"],[67491,1,"\u0276"],[67492,1,"\u0277"],[67493,1,"q"],[67494,1,"\u027A"],[67495,1,"\uD837\uDF08"],[67496,1,"\u027D"],[67497,1,"\u027E"],[67498,1,"\u0280"],[67499,1,"\u02A8"],[67500,1,"\u02A6"],[67501,1,"\uAB67"],[67502,1,"\u02A7"],[67503,1,"\u0288"],[67504,1,"\u2C71"],[67505,3],[67506,1,"\u028F"],[67507,1,"\u02A1"],[67508,1,"\u02A2"],[67509,1,"\u0298"],[67510,1,"\u01C0"],[67511,1,"\u01C1"],[67512,1,"\u01C2"],[67513,1,"\uD837\uDF0A"],[67514,1,"\uD837\uDF1E"],[[67515,67583],3],[[67584,67589],2],[[67590,67591],3],[67592,2],[67593,3],[[67594,67637],2],[67638,3],[[67639,67640],2],[[67641,67643],3],[67644,2],[[67645,67646],3],[67647,2],[[67648,67669],2],[67670,3],[[67671,67679],2],[[67680,67702],2],[[67703,67711],2],[[67712,67742],2],[[67743,67750],3],[[67751,67759],2],[[67760,67807],3],[[67808,67826],2],[67827,3],[[67828,67829],2],[[67830,67834],3],[[67835,67839],2],[[67840,67861],2],[[67862,67865],2],[[67866,67867],2],[[67868,67870],3],[67871,2],[[67872,67897],2],[[67898,67902],3],[67903,2],[[67904,67967],3],[[67968,68023],2],[[68024,68027],3],[[68028,68029],2],[[68030,68031],2],[[68032,68047],2],[[68048,68049],3],[[68050,68095],2],[[68096,68099],2],[68100,3],[[68101,68102],2],[[68103,68107],3],[[68108,68115],2],[68116,3],[[68117,68119],2],[68120,3],[[68121,68147],2],[[68148,68149],2],[[68150,68151],3],[[68152,68154],2],[[68155,68158],3],[68159,2],[[68160,68167],2],[68168,2],[[68169,68175],3],[[68176,68184],2],[[68185,68191],3],[[68192,68220],2],[[68221,68223],2],[[68224,68252],2],[[68253,68255],2],[[68256,68287],3],[[68288,68295],2],[68296,2],[[68297,68326],2],[[68327,68330],3],[[68331,68342],2],[[68343,68351],3],[[68352,68405],2],[[68406,68408],3],[[68409,68415],2],[[68416,68437],2],[[68438,68439],3],[[68440,68447],2],[[68448,68466],2],[[68467,68471],3],[[68472,68479],2],[[68480,68497],2],[[68498,68504],3],[[68505,68508],2],[[68509,68520],3],[[68521,68527],2],[[68528,68607],3],[[68608,68680],2],[[68681,68735],3],[68736,1,"\uD803\uDCC0"],[68737,1,"\uD803\uDCC1"],[68738,1,"\uD803\uDCC2"],[68739,1,"\uD803\uDCC3"],[68740,1,"\uD803\uDCC4"],[68741,1,"\uD803\uDCC5"],[68742,1,"\uD803\uDCC6"],[68743,1,"\uD803\uDCC7"],[68744,1,"\uD803\uDCC8"],[68745,1,"\uD803\uDCC9"],[68746,1,"\uD803\uDCCA"],[68747,1,"\uD803\uDCCB"],[68748,1,"\uD803\uDCCC"],[68749,1,"\uD803\uDCCD"],[68750,1,"\uD803\uDCCE"],[68751,1,"\uD803\uDCCF"],[68752,1,"\uD803\uDCD0"],[68753,1,"\uD803\uDCD1"],[68754,1,"\uD803\uDCD2"],[68755,1,"\uD803\uDCD3"],[68756,1,"\uD803\uDCD4"],[68757,1,"\uD803\uDCD5"],[68758,1,"\uD803\uDCD6"],[68759,1,"\uD803\uDCD7"],[68760,1,"\uD803\uDCD8"],[68761,1,"\uD803\uDCD9"],[68762,1,"\uD803\uDCDA"],[68763,1,"\uD803\uDCDB"],[68764,1,"\uD803\uDCDC"],[68765,1,"\uD803\uDCDD"],[68766,1,"\uD803\uDCDE"],[68767,1,"\uD803\uDCDF"],[68768,1,"\uD803\uDCE0"],[68769,1,"\uD803\uDCE1"],[68770,1,"\uD803\uDCE2"],[68771,1,"\uD803\uDCE3"],[68772,1,"\uD803\uDCE4"],[68773,1,"\uD803\uDCE5"],[68774,1,"\uD803\uDCE6"],[68775,1,"\uD803\uDCE7"],[68776,1,"\uD803\uDCE8"],[68777,1,"\uD803\uDCE9"],[68778,1,"\uD803\uDCEA"],[68779,1,"\uD803\uDCEB"],[68780,1,"\uD803\uDCEC"],[68781,1,"\uD803\uDCED"],[68782,1,"\uD803\uDCEE"],[68783,1,"\uD803\uDCEF"],[68784,1,"\uD803\uDCF0"],[68785,1,"\uD803\uDCF1"],[68786,1,"\uD803\uDCF2"],[[68787,68799],3],[[68800,68850],2],[[68851,68857],3],[[68858,68863],2],[[68864,68903],2],[[68904,68911],3],[[68912,68921],2],[[68922,69215],3],[[69216,69246],2],[69247,3],[[69248,69289],2],[69290,3],[[69291,69292],2],[69293,2],[[69294,69295],3],[[69296,69297],2],[[69298,69375],3],[[69376,69404],2],[[69405,69414],2],[69415,2],[[69416,69423],3],[[69424,69456],2],[[69457,69465],2],[[69466,69487],3],[[69488,69509],2],[[69510,69513],2],[[69514,69551],3],[[69552,69572],2],[[69573,69579],2],[[69580,69599],3],[[69600,69622],2],[[69623,69631],3],[[69632,69702],2],[[69703,69709],2],[[69710,69713],3],[[69714,69733],2],[[69734,69743],2],[[69744,69749],2],[[69750,69758],3],[69759,2],[[69760,69818],2],[[69819,69820],2],[69821,3],[[69822,69825],2],[69826,2],[[69827,69836],3],[69837,3],[[69838,69839],3],[[69840,69864],2],[[69865,69871],3],[[69872,69881],2],[[69882,69887],3],[[69888,69940],2],[69941,3],[[69942,69951],2],[[69952,69955],2],[[69956,69958],2],[69959,2],[[69960,69967],3],[[69968,70003],2],[[70004,70005],2],[70006,2],[[70007,70015],3],[[70016,70084],2],[[70085,70088],2],[[70089,70092],2],[70093,2],[[70094,70095],2],[[70096,70105],2],[70106,2],[70107,2],[70108,2],[[70109,70111],2],[70112,3],[[70113,70132],2],[[70133,70143],3],[[70144,70161],2],[70162,3],[[70163,70199],2],[[70200,70205],2],[70206,2],[[70207,70271],3],[[70272,70278],2],[70279,3],[70280,2],[70281,3],[[70282,70285],2],[70286,3],[[70287,70301],2],[70302,3],[[70303,70312],2],[70313,2],[[70314,70319],3],[[70320,70378],2],[[70379,70383],3],[[70384,70393],2],[[70394,70399],3],[70400,2],[[70401,70403],2],[70404,3],[[70405,70412],2],[[70413,70414],3],[[70415,70416],2],[[70417,70418],3],[[70419,70440],2],[70441,3],[[70442,70448],2],[70449,3],[[70450,70451],2],[70452,3],[[70453,70457],2],[70458,3],[70459,2],[[70460,70468],2],[[70469,70470],3],[[70471,70472],2],[[70473,70474],3],[[70475,70477],2],[[70478,70479],3],[70480,2],[[70481,70486],3],[70487,2],[[70488,70492],3],[[70493,70499],2],[[70500,70501],3],[[70502,70508],2],[[70509,70511],3],[[70512,70516],2],[[70517,70655],3],[[70656,70730],2],[[70731,70735],2],[[70736,70745],2],[70746,2],[70747,2],[70748,3],[70749,2],[70750,2],[70751,2],[[70752,70753],2],[[70754,70783],3],[[70784,70853],2],[70854,2],[70855,2],[[70856,70863],3],[[70864,70873],2],[[70874,71039],3],[[71040,71093],2],[[71094,71095],3],[[71096,71104],2],[[71105,71113],2],[[71114,71127],2],[[71128,71133],2],[[71134,71167],3],[[71168,71232],2],[[71233,71235],2],[71236,2],[[71237,71247],3],[[71248,71257],2],[[71258,71263],3],[[71264,71276],2],[[71277,71295],3],[[71296,71351],2],[71352,2],[71353,2],[[71354,71359],3],[[71360,71369],2],[[71370,71423],3],[[71424,71449],2],[71450,2],[[71451,71452],3],[[71453,71467],2],[[71468,71471],3],[[71472,71481],2],[[71482,71487],2],[[71488,71494],2],[[71495,71679],3],[[71680,71738],2],[71739,2],[[71740,71839],3],[71840,1,"\uD806\uDCC0"],[71841,1,"\uD806\uDCC1"],[71842,1,"\uD806\uDCC2"],[71843,1,"\uD806\uDCC3"],[71844,1,"\uD806\uDCC4"],[71845,1,"\uD806\uDCC5"],[71846,1,"\uD806\uDCC6"],[71847,1,"\uD806\uDCC7"],[71848,1,"\uD806\uDCC8"],[71849,1,"\uD806\uDCC9"],[71850,1,"\uD806\uDCCA"],[71851,1,"\uD806\uDCCB"],[71852,1,"\uD806\uDCCC"],[71853,1,"\uD806\uDCCD"],[71854,1,"\uD806\uDCCE"],[71855,1,"\uD806\uDCCF"],[71856,1,"\uD806\uDCD0"],[71857,1,"\uD806\uDCD1"],[71858,1,"\uD806\uDCD2"],[71859,1,"\uD806\uDCD3"],[71860,1,"\uD806\uDCD4"],[71861,1,"\uD806\uDCD5"],[71862,1,"\uD806\uDCD6"],[71863,1,"\uD806\uDCD7"],[71864,1,"\uD806\uDCD8"],[71865,1,"\uD806\uDCD9"],[71866,1,"\uD806\uDCDA"],[71867,1,"\uD806\uDCDB"],[71868,1,"\uD806\uDCDC"],[71869,1,"\uD806\uDCDD"],[71870,1,"\uD806\uDCDE"],[71871,1,"\uD806\uDCDF"],[[71872,71913],2],[[71914,71922],2],[[71923,71934],3],[71935,2],[[71936,71942],2],[[71943,71944],3],[71945,2],[[71946,71947],3],[[71948,71955],2],[71956,3],[[71957,71958],2],[71959,3],[[71960,71989],2],[71990,3],[[71991,71992],2],[[71993,71994],3],[[71995,72003],2],[[72004,72006],2],[[72007,72015],3],[[72016,72025],2],[[72026,72095],3],[[72096,72103],2],[[72104,72105],3],[[72106,72151],2],[[72152,72153],3],[[72154,72161],2],[72162,2],[[72163,72164],2],[[72165,72191],3],[[72192,72254],2],[[72255,72262],2],[72263,2],[[72264,72271],3],[[72272,72323],2],[[72324,72325],2],[[72326,72345],2],[[72346,72348],2],[72349,2],[[72350,72354],2],[[72355,72367],3],[[72368,72383],2],[[72384,72440],2],[[72441,72703],3],[[72704,72712],2],[72713,3],[[72714,72758],2],[72759,3],[[72760,72768],2],[[72769,72773],2],[[72774,72783],3],[[72784,72793],2],[[72794,72812],2],[[72813,72815],3],[[72816,72817],2],[[72818,72847],2],[[72848,72849],3],[[72850,72871],2],[72872,3],[[72873,72886],2],[[72887,72959],3],[[72960,72966],2],[72967,3],[[72968,72969],2],[72970,3],[[72971,73014],2],[[73015,73017],3],[73018,2],[73019,3],[[73020,73021],2],[73022,3],[[73023,73031],2],[[73032,73039],3],[[73040,73049],2],[[73050,73055],3],[[73056,73061],2],[73062,3],[[73063,73064],2],[73065,3],[[73066,73102],2],[73103,3],[[73104,73105],2],[73106,3],[[73107,73112],2],[[73113,73119],3],[[73120,73129],2],[[73130,73439],3],[[73440,73462],2],[[73463,73464],2],[[73465,73647],3],[73648,2],[[73649,73663],3],[[73664,73713],2],[[73714,73726],3],[73727,2],[[73728,74606],2],[[74607,74648],2],[74649,2],[[74650,74751],3],[[74752,74850],2],[[74851,74862],2],[74863,3],[[74864,74867],2],[74868,2],[[74869,74879],3],[[74880,75075],2],[[75076,77711],3],[[77712,77808],2],[[77809,77810],2],[[77811,77823],3],[[77824,78894],2],[78895,3],[[78896,78904],3],[[78905,82943],3],[[82944,83526],2],[[83527,92159],3],[[92160,92728],2],[[92729,92735],3],[[92736,92766],2],[92767,3],[[92768,92777],2],[[92778,92781],3],[[92782,92783],2],[[92784,92862],2],[92863,3],[[92864,92873],2],[[92874,92879],3],[[92880,92909],2],[[92910,92911],3],[[92912,92916],2],[92917,2],[[92918,92927],3],[[92928,92982],2],[[92983,92991],2],[[92992,92995],2],[[92996,92997],2],[[92998,93007],3],[[93008,93017],2],[93018,3],[[93019,93025],2],[93026,3],[[93027,93047],2],[[93048,93052],3],[[93053,93071],2],[[93072,93759],3],[93760,1,"\uD81B\uDE60"],[93761,1,"\uD81B\uDE61"],[93762,1,"\uD81B\uDE62"],[93763,1,"\uD81B\uDE63"],[93764,1,"\uD81B\uDE64"],[93765,1,"\uD81B\uDE65"],[93766,1,"\uD81B\uDE66"],[93767,1,"\uD81B\uDE67"],[93768,1,"\uD81B\uDE68"],[93769,1,"\uD81B\uDE69"],[93770,1,"\uD81B\uDE6A"],[93771,1,"\uD81B\uDE6B"],[93772,1,"\uD81B\uDE6C"],[93773,1,"\uD81B\uDE6D"],[93774,1,"\uD81B\uDE6E"],[93775,1,"\uD81B\uDE6F"],[93776,1,"\uD81B\uDE70"],[93777,1,"\uD81B\uDE71"],[93778,1,"\uD81B\uDE72"],[93779,1,"\uD81B\uDE73"],[93780,1,"\uD81B\uDE74"],[93781,1,"\uD81B\uDE75"],[93782,1,"\uD81B\uDE76"],[93783,1,"\uD81B\uDE77"],[93784,1,"\uD81B\uDE78"],[93785,1,"\uD81B\uDE79"],[93786,1,"\uD81B\uDE7A"],[93787,1,"\uD81B\uDE7B"],[93788,1,"\uD81B\uDE7C"],[93789,1,"\uD81B\uDE7D"],[93790,1,"\uD81B\uDE7E"],[93791,1,"\uD81B\uDE7F"],[[93792,93823],2],[[93824,93850],2],[[93851,93951],3],[[93952,94020],2],[[94021,94026],2],[[94027,94030],3],[94031,2],[[94032,94078],2],[[94079,94087],2],[[94088,94094],3],[[94095,94111],2],[[94112,94175],3],[94176,2],[94177,2],[94178,2],[94179,2],[94180,2],[[94181,94191],3],[[94192,94193],2],[[94194,94207],3],[[94208,100332],2],[[100333,100337],2],[[100338,100343],2],[[100344,100351],3],[[100352,101106],2],[[101107,101589],2],[[101590,101631],3],[[101632,101640],2],[[101641,110575],3],[[110576,110579],2],[110580,3],[[110581,110587],2],[110588,3],[[110589,110590],2],[110591,3],[[110592,110593],2],[[110594,110878],2],[[110879,110882],2],[[110883,110927],3],[[110928,110930],2],[[110931,110947],3],[[110948,110951],2],[[110952,110959],3],[[110960,111355],2],[[111356,113663],3],[[113664,113770],2],[[113771,113775],3],[[113776,113788],2],[[113789,113791],3],[[113792,113800],2],[[113801,113807],3],[[113808,113817],2],[[113818,113819],3],[113820,2],[[113821,113822],2],[113823,2],[[113824,113827],7],[[113828,118527],3],[[118528,118573],2],[[118574,118575],3],[[118576,118598],2],[[118599,118607],3],[[118608,118723],2],[[118724,118783],3],[[118784,119029],2],[[119030,119039],3],[[119040,119078],2],[[119079,119080],3],[119081,2],[[119082,119133],2],[119134,1,"\uD834\uDD57\uD834\uDD65"],[119135,1,"\uD834\uDD58\uD834\uDD65"],[119136,1,"\uD834\uDD58\uD834\uDD65\uD834\uDD6E"],[119137,1,"\uD834\uDD58\uD834\uDD65\uD834\uDD6F"],[119138,1,"\uD834\uDD58\uD834\uDD65\uD834\uDD70"],[119139,1,"\uD834\uDD58\uD834\uDD65\uD834\uDD71"],[119140,1,"\uD834\uDD58\uD834\uDD65\uD834\uDD72"],[[119141,119154],2],[[119155,119162],3],[[119163,119226],2],[119227,1,"\uD834\uDDB9\uD834\uDD65"],[119228,1,"\uD834\uDDBA\uD834\uDD65"],[119229,1,"\uD834\uDDB9\uD834\uDD65\uD834\uDD6E"],[119230,1,"\uD834\uDDBA\uD834\uDD65\uD834\uDD6E"],[119231,1,"\uD834\uDDB9\uD834\uDD65\uD834\uDD6F"],[119232,1,"\uD834\uDDBA\uD834\uDD65\uD834\uDD6F"],[[119233,119261],2],[[119262,119272],2],[[119273,119274],2],[[119275,119295],3],[[119296,119365],2],[[119366,119519],3],[[119520,119539],2],[[119540,119551],3],[[119552,119638],2],[[119639,119647],3],[[119648,119665],2],[[119666,119672],2],[[119673,119807],3],[119808,1,"a"],[119809,1,"b"],[119810,1,"c"],[119811,1,"d"],[119812,1,"e"],[119813,1,"f"],[119814,1,"g"],[119815,1,"h"],[119816,1,"i"],[119817,1,"j"],[119818,1,"k"],[119819,1,"l"],[119820,1,"m"],[119821,1,"n"],[119822,1,"o"],[119823,1,"p"],[119824,1,"q"],[119825,1,"r"],[119826,1,"s"],[119827,1,"t"],[119828,1,"u"],[119829,1,"v"],[119830,1,"w"],[119831,1,"x"],[119832,1,"y"],[119833,1,"z"],[119834,1,"a"],[119835,1,"b"],[119836,1,"c"],[119837,1,"d"],[119838,1,"e"],[119839,1,"f"],[119840,1,"g"],[119841,1,"h"],[119842,1,"i"],[119843,1,"j"],[119844,1,"k"],[119845,1,"l"],[119846,1,"m"],[119847,1,"n"],[119848,1,"o"],[119849,1,"p"],[119850,1,"q"],[119851,1,"r"],[119852,1,"s"],[119853,1,"t"],[119854,1,"u"],[119855,1,"v"],[119856,1,"w"],[119857,1,"x"],[119858,1,"y"],[119859,1,"z"],[119860,1,"a"],[119861,1,"b"],[119862,1,"c"],[119863,1,"d"],[119864,1,"e"],[119865,1,"f"],[119866,1,"g"],[119867,1,"h"],[119868,1,"i"],[119869,1,"j"],[119870,1,"k"],[119871,1,"l"],[119872,1,"m"],[119873,1,"n"],[119874,1,"o"],[119875,1,"p"],[119876,1,"q"],[119877,1,"r"],[119878,1,"s"],[119879,1,"t"],[119880,1,"u"],[119881,1,"v"],[119882,1,"w"],[119883,1,"x"],[119884,1,"y"],[119885,1,"z"],[119886,1,"a"],[119887,1,"b"],[119888,1,"c"],[119889,1,"d"],[119890,1,"e"],[119891,1,"f"],[119892,1,"g"],[119893,3],[119894,1,"i"],[119895,1,"j"],[119896,1,"k"],[119897,1,"l"],[119898,1,"m"],[119899,1,"n"],[119900,1,"o"],[119901,1,"p"],[119902,1,"q"],[119903,1,"r"],[119904,1,"s"],[119905,1,"t"],[119906,1,"u"],[119907,1,"v"],[119908,1,"w"],[119909,1,"x"],[119910,1,"y"],[119911,1,"z"],[119912,1,"a"],[119913,1,"b"],[119914,1,"c"],[119915,1,"d"],[119916,1,"e"],[119917,1,"f"],[119918,1,"g"],[119919,1,"h"],[119920,1,"i"],[119921,1,"j"],[119922,1,"k"],[119923,1,"l"],[119924,1,"m"],[119925,1,"n"],[119926,1,"o"],[119927,1,"p"],[119928,1,"q"],[119929,1,"r"],[119930,1,"s"],[119931,1,"t"],[119932,1,"u"],[119933,1,"v"],[119934,1,"w"],[119935,1,"x"],[119936,1,"y"],[119937,1,"z"],[119938,1,"a"],[119939,1,"b"],[119940,1,"c"],[119941,1,"d"],[119942,1,"e"],[119943,1,"f"],[119944,1,"g"],[119945,1,"h"],[119946,1,"i"],[119947,1,"j"],[119948,1,"k"],[119949,1,"l"],[119950,1,"m"],[119951,1,"n"],[119952,1,"o"],[119953,1,"p"],[119954,1,"q"],[119955,1,"r"],[119956,1,"s"],[119957,1,"t"],[119958,1,"u"],[119959,1,"v"],[119960,1,"w"],[119961,1,"x"],[119962,1,"y"],[119963,1,"z"],[119964,1,"a"],[119965,3],[119966,1,"c"],[119967,1,"d"],[[119968,119969],3],[119970,1,"g"],[[119971,119972],3],[119973,1,"j"],[119974,1,"k"],[[119975,119976],3],[119977,1,"n"],[119978,1,"o"],[119979,1,"p"],[119980,1,"q"],[119981,3],[119982,1,"s"],[119983,1,"t"],[119984,1,"u"],[119985,1,"v"],[119986,1,"w"],[119987,1,"x"],[119988,1,"y"],[119989,1,"z"],[119990,1,"a"],[119991,1,"b"],[119992,1,"c"],[119993,1,"d"],[119994,3],[119995,1,"f"],[119996,3],[119997,1,"h"],[119998,1,"i"],[119999,1,"j"],[120000,1,"k"],[120001,1,"l"],[120002,1,"m"],[120003,1,"n"],[120004,3],[120005,1,"p"],[120006,1,"q"],[120007,1,"r"],[120008,1,"s"],[120009,1,"t"],[120010,1,"u"],[120011,1,"v"],[120012,1,"w"],[120013,1,"x"],[120014,1,"y"],[120015,1,"z"],[120016,1,"a"],[120017,1,"b"],[120018,1,"c"],[120019,1,"d"],[120020,1,"e"],[120021,1,"f"],[120022,1,"g"],[120023,1,"h"],[120024,1,"i"],[120025,1,"j"],[120026,1,"k"],[120027,1,"l"],[120028,1,"m"],[120029,1,"n"],[120030,1,"o"],[120031,1,"p"],[120032,1,"q"],[120033,1,"r"],[120034,1,"s"],[120035,1,"t"],[120036,1,"u"],[120037,1,"v"],[120038,1,"w"],[120039,1,"x"],[120040,1,"y"],[120041,1,"z"],[120042,1,"a"],[120043,1,"b"],[120044,1,"c"],[120045,1,"d"],[120046,1,"e"],[120047,1,"f"],[120048,1,"g"],[120049,1,"h"],[120050,1,"i"],[120051,1,"j"],[120052,1,"k"],[120053,1,"l"],[120054,1,"m"],[120055,1,"n"],[120056,1,"o"],[120057,1,"p"],[120058,1,"q"],[120059,1,"r"],[120060,1,"s"],[120061,1,"t"],[120062,1,"u"],[120063,1,"v"],[120064,1,"w"],[120065,1,"x"],[120066,1,"y"],[120067,1,"z"],[120068,1,"a"],[120069,1,"b"],[120070,3],[120071,1,"d"],[120072,1,"e"],[120073,1,"f"],[120074,1,"g"],[[120075,120076],3],[120077,1,"j"],[120078,1,"k"],[120079,1,"l"],[120080,1,"m"],[120081,1,"n"],[120082,1,"o"],[120083,1,"p"],[120084,1,"q"],[120085,3],[120086,1,"s"],[120087,1,"t"],[120088,1,"u"],[120089,1,"v"],[120090,1,"w"],[120091,1,"x"],[120092,1,"y"],[120093,3],[120094,1,"a"],[120095,1,"b"],[120096,1,"c"],[120097,1,"d"],[120098,1,"e"],[120099,1,"f"],[120100,1,"g"],[120101,1,"h"],[120102,1,"i"],[120103,1,"j"],[120104,1,"k"],[120105,1,"l"],[120106,1,"m"],[120107,1,"n"],[120108,1,"o"],[120109,1,"p"],[120110,1,"q"],[120111,1,"r"],[120112,1,"s"],[120113,1,"t"],[120114,1,"u"],[120115,1,"v"],[120116,1,"w"],[120117,1,"x"],[120118,1,"y"],[120119,1,"z"],[120120,1,"a"],[120121,1,"b"],[120122,3],[120123,1,"d"],[120124,1,"e"],[120125,1,"f"],[120126,1,"g"],[120127,3],[120128,1,"i"],[120129,1,"j"],[120130,1,"k"],[120131,1,"l"],[120132,1,"m"],[120133,3],[120134,1,"o"],[[120135,120137],3],[120138,1,"s"],[120139,1,"t"],[120140,1,"u"],[120141,1,"v"],[120142,1,"w"],[120143,1,"x"],[120144,1,"y"],[120145,3],[120146,1,"a"],[120147,1,"b"],[120148,1,"c"],[120149,1,"d"],[120150,1,"e"],[120151,1,"f"],[120152,1,"g"],[120153,1,"h"],[120154,1,"i"],[120155,1,"j"],[120156,1,"k"],[120157,1,"l"],[120158,1,"m"],[120159,1,"n"],[120160,1,"o"],[120161,1,"p"],[120162,1,"q"],[120163,1,"r"],[120164,1,"s"],[120165,1,"t"],[120166,1,"u"],[120167,1,"v"],[120168,1,"w"],[120169,1,"x"],[120170,1,"y"],[120171,1,"z"],[120172,1,"a"],[120173,1,"b"],[120174,1,"c"],[120175,1,"d"],[120176,1,"e"],[120177,1,"f"],[120178,1,"g"],[120179,1,"h"],[120180,1,"i"],[120181,1,"j"],[120182,1,"k"],[120183,1,"l"],[120184,1,"m"],[120185,1,"n"],[120186,1,"o"],[120187,1,"p"],[120188,1,"q"],[120189,1,"r"],[120190,1,"s"],[120191,1,"t"],[120192,1,"u"],[120193,1,"v"],[120194,1,"w"],[120195,1,"x"],[120196,1,"y"],[120197,1,"z"],[120198,1,"a"],[120199,1,"b"],[120200,1,"c"],[120201,1,"d"],[120202,1,"e"],[120203,1,"f"],[120204,1,"g"],[120205,1,"h"],[120206,1,"i"],[120207,1,"j"],[120208,1,"k"],[120209,1,"l"],[120210,1,"m"],[120211,1,"n"],[120212,1,"o"],[120213,1,"p"],[120214,1,"q"],[120215,1,"r"],[120216,1,"s"],[120217,1,"t"],[120218,1,"u"],[120219,1,"v"],[120220,1,"w"],[120221,1,"x"],[120222,1,"y"],[120223,1,"z"],[120224,1,"a"],[120225,1,"b"],[120226,1,"c"],[120227,1,"d"],[120228,1,"e"],[120229,1,"f"],[120230,1,"g"],[120231,1,"h"],[120232,1,"i"],[120233,1,"j"],[120234,1,"k"],[120235,1,"l"],[120236,1,"m"],[120237,1,"n"],[120238,1,"o"],[120239,1,"p"],[120240,1,"q"],[120241,1,"r"],[120242,1,"s"],[120243,1,"t"],[120244,1,"u"],[120245,1,"v"],[120246,1,"w"],[120247,1,"x"],[120248,1,"y"],[120249,1,"z"],[120250,1,"a"],[120251,1,"b"],[120252,1,"c"],[120253,1,"d"],[120254,1,"e"],[120255,1,"f"],[120256,1,"g"],[120257,1,"h"],[120258,1,"i"],[120259,1,"j"],[120260,1,"k"],[120261,1,"l"],[120262,1,"m"],[120263,1,"n"],[120264,1,"o"],[120265,1,"p"],[120266,1,"q"],[120267,1,"r"],[120268,1,"s"],[120269,1,"t"],[120270,1,"u"],[120271,1,"v"],[120272,1,"w"],[120273,1,"x"],[120274,1,"y"],[120275,1,"z"],[120276,1,"a"],[120277,1,"b"],[120278,1,"c"],[120279,1,"d"],[120280,1,"e"],[120281,1,"f"],[120282,1,"g"],[120283,1,"h"],[120284,1,"i"],[120285,1,"j"],[120286,1,"k"],[120287,1,"l"],[120288,1,"m"],[120289,1,"n"],[120290,1,"o"],[120291,1,"p"],[120292,1,"q"],[120293,1,"r"],[120294,1,"s"],[120295,1,"t"],[120296,1,"u"],[120297,1,"v"],[120298,1,"w"],[120299,1,"x"],[120300,1,"y"],[120301,1,"z"],[120302,1,"a"],[120303,1,"b"],[120304,1,"c"],[120305,1,"d"],[120306,1,"e"],[120307,1,"f"],[120308,1,"g"],[120309,1,"h"],[120310,1,"i"],[120311,1,"j"],[120312,1,"k"],[120313,1,"l"],[120314,1,"m"],[120315,1,"n"],[120316,1,"o"],[120317,1,"p"],[120318,1,"q"],[120319,1,"r"],[120320,1,"s"],[120321,1,"t"],[120322,1,"u"],[120323,1,"v"],[120324,1,"w"],[120325,1,"x"],[120326,1,"y"],[120327,1,"z"],[120328,1,"a"],[120329,1,"b"],[120330,1,"c"],[120331,1,"d"],[120332,1,"e"],[120333,1,"f"],[120334,1,"g"],[120335,1,"h"],[120336,1,"i"],[120337,1,"j"],[120338,1,"k"],[120339,1,"l"],[120340,1,"m"],[120341,1,"n"],[120342,1,"o"],[120343,1,"p"],[120344,1,"q"],[120345,1,"r"],[120346,1,"s"],[120347,1,"t"],[120348,1,"u"],[120349,1,"v"],[120350,1,"w"],[120351,1,"x"],[120352,1,"y"],[120353,1,"z"],[120354,1,"a"],[120355,1,"b"],[120356,1,"c"],[120357,1,"d"],[120358,1,"e"],[120359,1,"f"],[120360,1,"g"],[120361,1,"h"],[120362,1,"i"],[120363,1,"j"],[120364,1,"k"],[120365,1,"l"],[120366,1,"m"],[120367,1,"n"],[120368,1,"o"],[120369,1,"p"],[120370,1,"q"],[120371,1,"r"],[120372,1,"s"],[120373,1,"t"],[120374,1,"u"],[120375,1,"v"],[120376,1,"w"],[120377,1,"x"],[120378,1,"y"],[120379,1,"z"],[120380,1,"a"],[120381,1,"b"],[120382,1,"c"],[120383,1,"d"],[120384,1,"e"],[120385,1,"f"],[120386,1,"g"],[120387,1,"h"],[120388,1,"i"],[120389,1,"j"],[120390,1,"k"],[120391,1,"l"],[120392,1,"m"],[120393,1,"n"],[120394,1,"o"],[120395,1,"p"],[120396,1,"q"],[120397,1,"r"],[120398,1,"s"],[120399,1,"t"],[120400,1,"u"],[120401,1,"v"],[120402,1,"w"],[120403,1,"x"],[120404,1,"y"],[120405,1,"z"],[120406,1,"a"],[120407,1,"b"],[120408,1,"c"],[120409,1,"d"],[120410,1,"e"],[120411,1,"f"],[120412,1,"g"],[120413,1,"h"],[120414,1,"i"],[120415,1,"j"],[120416,1,"k"],[120417,1,"l"],[120418,1,"m"],[120419,1,"n"],[120420,1,"o"],[120421,1,"p"],[120422,1,"q"],[120423,1,"r"],[120424,1,"s"],[120425,1,"t"],[120426,1,"u"],[120427,1,"v"],[120428,1,"w"],[120429,1,"x"],[120430,1,"y"],[120431,1,"z"],[120432,1,"a"],[120433,1,"b"],[120434,1,"c"],[120435,1,"d"],[120436,1,"e"],[120437,1,"f"],[120438,1,"g"],[120439,1,"h"],[120440,1,"i"],[120441,1,"j"],[120442,1,"k"],[120443,1,"l"],[120444,1,"m"],[120445,1,"n"],[120446,1,"o"],[120447,1,"p"],[120448,1,"q"],[120449,1,"r"],[120450,1,"s"],[120451,1,"t"],[120452,1,"u"],[120453,1,"v"],[120454,1,"w"],[120455,1,"x"],[120456,1,"y"],[120457,1,"z"],[120458,1,"a"],[120459,1,"b"],[120460,1,"c"],[120461,1,"d"],[120462,1,"e"],[120463,1,"f"],[120464,1,"g"],[120465,1,"h"],[120466,1,"i"],[120467,1,"j"],[120468,1,"k"],[120469,1,"l"],[120470,1,"m"],[120471,1,"n"],[120472,1,"o"],[120473,1,"p"],[120474,1,"q"],[120475,1,"r"],[120476,1,"s"],[120477,1,"t"],[120478,1,"u"],[120479,1,"v"],[120480,1,"w"],[120481,1,"x"],[120482,1,"y"],[120483,1,"z"],[120484,1,"\u0131"],[120485,1,"\u0237"],[[120486,120487],3],[120488,1,"\u03B1"],[120489,1,"\u03B2"],[120490,1,"\u03B3"],[120491,1,"\u03B4"],[120492,1,"\u03B5"],[120493,1,"\u03B6"],[120494,1,"\u03B7"],[120495,1,"\u03B8"],[120496,1,"\u03B9"],[120497,1,"\u03BA"],[120498,1,"\u03BB"],[120499,1,"\u03BC"],[120500,1,"\u03BD"],[120501,1,"\u03BE"],[120502,1,"\u03BF"],[120503,1,"\u03C0"],[120504,1,"\u03C1"],[120505,1,"\u03B8"],[120506,1,"\u03C3"],[120507,1,"\u03C4"],[120508,1,"\u03C5"],[120509,1,"\u03C6"],[120510,1,"\u03C7"],[120511,1,"\u03C8"],[120512,1,"\u03C9"],[120513,1,"\u2207"],[120514,1,"\u03B1"],[120515,1,"\u03B2"],[120516,1,"\u03B3"],[120517,1,"\u03B4"],[120518,1,"\u03B5"],[120519,1,"\u03B6"],[120520,1,"\u03B7"],[120521,1,"\u03B8"],[120522,1,"\u03B9"],[120523,1,"\u03BA"],[120524,1,"\u03BB"],[120525,1,"\u03BC"],[120526,1,"\u03BD"],[120527,1,"\u03BE"],[120528,1,"\u03BF"],[120529,1,"\u03C0"],[120530,1,"\u03C1"],[[120531,120532],1,"\u03C3"],[120533,1,"\u03C4"],[120534,1,"\u03C5"],[120535,1,"\u03C6"],[120536,1,"\u03C7"],[120537,1,"\u03C8"],[120538,1,"\u03C9"],[120539,1,"\u2202"],[120540,1,"\u03B5"],[120541,1,"\u03B8"],[120542,1,"\u03BA"],[120543,1,"\u03C6"],[120544,1,"\u03C1"],[120545,1,"\u03C0"],[120546,1,"\u03B1"],[120547,1,"\u03B2"],[120548,1,"\u03B3"],[120549,1,"\u03B4"],[120550,1,"\u03B5"],[120551,1,"\u03B6"],[120552,1,"\u03B7"],[120553,1,"\u03B8"],[120554,1,"\u03B9"],[120555,1,"\u03BA"],[120556,1,"\u03BB"],[120557,1,"\u03BC"],[120558,1,"\u03BD"],[120559,1,"\u03BE"],[120560,1,"\u03BF"],[120561,1,"\u03C0"],[120562,1,"\u03C1"],[120563,1,"\u03B8"],[120564,1,"\u03C3"],[120565,1,"\u03C4"],[120566,1,"\u03C5"],[120567,1,"\u03C6"],[120568,1,"\u03C7"],[120569,1,"\u03C8"],[120570,1,"\u03C9"],[120571,1,"\u2207"],[120572,1,"\u03B1"],[120573,1,"\u03B2"],[120574,1,"\u03B3"],[120575,1,"\u03B4"],[120576,1,"\u03B5"],[120577,1,"\u03B6"],[120578,1,"\u03B7"],[120579,1,"\u03B8"],[120580,1,"\u03B9"],[120581,1,"\u03BA"],[120582,1,"\u03BB"],[120583,1,"\u03BC"],[120584,1,"\u03BD"],[120585,1,"\u03BE"],[120586,1,"\u03BF"],[120587,1,"\u03C0"],[120588,1,"\u03C1"],[[120589,120590],1,"\u03C3"],[120591,1,"\u03C4"],[120592,1,"\u03C5"],[120593,1,"\u03C6"],[120594,1,"\u03C7"],[120595,1,"\u03C8"],[120596,1,"\u03C9"],[120597,1,"\u2202"],[120598,1,"\u03B5"],[120599,1,"\u03B8"],[120600,1,"\u03BA"],[120601,1,"\u03C6"],[120602,1,"\u03C1"],[120603,1,"\u03C0"],[120604,1,"\u03B1"],[120605,1,"\u03B2"],[120606,1,"\u03B3"],[120607,1,"\u03B4"],[120608,1,"\u03B5"],[120609,1,"\u03B6"],[120610,1,"\u03B7"],[120611,1,"\u03B8"],[120612,1,"\u03B9"],[120613,1,"\u03BA"],[120614,1,"\u03BB"],[120615,1,"\u03BC"],[120616,1,"\u03BD"],[120617,1,"\u03BE"],[120618,1,"\u03BF"],[120619,1,"\u03C0"],[120620,1,"\u03C1"],[120621,1,"\u03B8"],[120622,1,"\u03C3"],[120623,1,"\u03C4"],[120624,1,"\u03C5"],[120625,1,"\u03C6"],[120626,1,"\u03C7"],[120627,1,"\u03C8"],[120628,1,"\u03C9"],[120629,1,"\u2207"],[120630,1,"\u03B1"],[120631,1,"\u03B2"],[120632,1,"\u03B3"],[120633,1,"\u03B4"],[120634,1,"\u03B5"],[120635,1,"\u03B6"],[120636,1,"\u03B7"],[120637,1,"\u03B8"],[120638,1,"\u03B9"],[120639,1,"\u03BA"],[120640,1,"\u03BB"],[120641,1,"\u03BC"],[120642,1,"\u03BD"],[120643,1,"\u03BE"],[120644,1,"\u03BF"],[120645,1,"\u03C0"],[120646,1,"\u03C1"],[[120647,120648],1,"\u03C3"],[120649,1,"\u03C4"],[120650,1,"\u03C5"],[120651,1,"\u03C6"],[120652,1,"\u03C7"],[120653,1,"\u03C8"],[120654,1,"\u03C9"],[120655,1,"\u2202"],[120656,1,"\u03B5"],[120657,1,"\u03B8"],[120658,1,"\u03BA"],[120659,1,"\u03C6"],[120660,1,"\u03C1"],[120661,1,"\u03C0"],[120662,1,"\u03B1"],[120663,1,"\u03B2"],[120664,1,"\u03B3"],[120665,1,"\u03B4"],[120666,1,"\u03B5"],[120667,1,"\u03B6"],[120668,1,"\u03B7"],[120669,1,"\u03B8"],[120670,1,"\u03B9"],[120671,1,"\u03BA"],[120672,1,"\u03BB"],[120673,1,"\u03BC"],[120674,1,"\u03BD"],[120675,1,"\u03BE"],[120676,1,"\u03BF"],[120677,1,"\u03C0"],[120678,1,"\u03C1"],[120679,1,"\u03B8"],[120680,1,"\u03C3"],[120681,1,"\u03C4"],[120682,1,"\u03C5"],[120683,1,"\u03C6"],[120684,1,"\u03C7"],[120685,1,"\u03C8"],[120686,1,"\u03C9"],[120687,1,"\u2207"],[120688,1,"\u03B1"],[120689,1,"\u03B2"],[120690,1,"\u03B3"],[120691,1,"\u03B4"],[120692,1,"\u03B5"],[120693,1,"\u03B6"],[120694,1,"\u03B7"],[120695,1,"\u03B8"],[120696,1,"\u03B9"],[120697,1,"\u03BA"],[120698,1,"\u03BB"],[120699,1,"\u03BC"],[120700,1,"\u03BD"],[120701,1,"\u03BE"],[120702,1,"\u03BF"],[120703,1,"\u03C0"],[120704,1,"\u03C1"],[[120705,120706],1,"\u03C3"],[120707,1,"\u03C4"],[120708,1,"\u03C5"],[120709,1,"\u03C6"],[120710,1,"\u03C7"],[120711,1,"\u03C8"],[120712,1,"\u03C9"],[120713,1,"\u2202"],[120714,1,"\u03B5"],[120715,1,"\u03B8"],[120716,1,"\u03BA"],[120717,1,"\u03C6"],[120718,1,"\u03C1"],[120719,1,"\u03C0"],[120720,1,"\u03B1"],[120721,1,"\u03B2"],[120722,1,"\u03B3"],[120723,1,"\u03B4"],[120724,1,"\u03B5"],[120725,1,"\u03B6"],[120726,1,"\u03B7"],[120727,1,"\u03B8"],[120728,1,"\u03B9"],[120729,1,"\u03BA"],[120730,1,"\u03BB"],[120731,1,"\u03BC"],[120732,1,"\u03BD"],[120733,1,"\u03BE"],[120734,1,"\u03BF"],[120735,1,"\u03C0"],[120736,1,"\u03C1"],[120737,1,"\u03B8"],[120738,1,"\u03C3"],[120739,1,"\u03C4"],[120740,1,"\u03C5"],[120741,1,"\u03C6"],[120742,1,"\u03C7"],[120743,1,"\u03C8"],[120744,1,"\u03C9"],[120745,1,"\u2207"],[120746,1,"\u03B1"],[120747,1,"\u03B2"],[120748,1,"\u03B3"],[120749,1,"\u03B4"],[120750,1,"\u03B5"],[120751,1,"\u03B6"],[120752,1,"\u03B7"],[120753,1,"\u03B8"],[120754,1,"\u03B9"],[120755,1,"\u03BA"],[120756,1,"\u03BB"],[120757,1,"\u03BC"],[120758,1,"\u03BD"],[120759,1,"\u03BE"],[120760,1,"\u03BF"],[120761,1,"\u03C0"],[120762,1,"\u03C1"],[[120763,120764],1,"\u03C3"],[120765,1,"\u03C4"],[120766,1,"\u03C5"],[120767,1,"\u03C6"],[120768,1,"\u03C7"],[120769,1,"\u03C8"],[120770,1,"\u03C9"],[120771,1,"\u2202"],[120772,1,"\u03B5"],[120773,1,"\u03B8"],[120774,1,"\u03BA"],[120775,1,"\u03C6"],[120776,1,"\u03C1"],[120777,1,"\u03C0"],[[120778,120779],1,"\u03DD"],[[120780,120781],3],[120782,1,"0"],[120783,1,"1"],[120784,1,"2"],[120785,1,"3"],[120786,1,"4"],[120787,1,"5"],[120788,1,"6"],[120789,1,"7"],[120790,1,"8"],[120791,1,"9"],[120792,1,"0"],[120793,1,"1"],[120794,1,"2"],[120795,1,"3"],[120796,1,"4"],[120797,1,"5"],[120798,1,"6"],[120799,1,"7"],[120800,1,"8"],[120801,1,"9"],[120802,1,"0"],[120803,1,"1"],[120804,1,"2"],[120805,1,"3"],[120806,1,"4"],[120807,1,"5"],[120808,1,"6"],[120809,1,"7"],[120810,1,"8"],[120811,1,"9"],[120812,1,"0"],[120813,1,"1"],[120814,1,"2"],[120815,1,"3"],[120816,1,"4"],[120817,1,"5"],[120818,1,"6"],[120819,1,"7"],[120820,1,"8"],[120821,1,"9"],[120822,1,"0"],[120823,1,"1"],[120824,1,"2"],[120825,1,"3"],[120826,1,"4"],[120827,1,"5"],[120828,1,"6"],[120829,1,"7"],[120830,1,"8"],[120831,1,"9"],[[120832,121343],2],[[121344,121398],2],[[121399,121402],2],[[121403,121452],2],[[121453,121460],2],[121461,2],[[121462,121475],2],[121476,2],[[121477,121483],2],[[121484,121498],3],[[121499,121503],2],[121504,3],[[121505,121519],2],[[121520,122623],3],[[122624,122654],2],[[122655,122879],3],[[122880,122886],2],[122887,3],[[122888,122904],2],[[122905,122906],3],[[122907,122913],2],[122914,3],[[122915,122916],2],[122917,3],[[122918,122922],2],[[122923,123135],3],[[123136,123180],2],[[123181,123183],3],[[123184,123197],2],[[123198,123199],3],[[123200,123209],2],[[123210,123213],3],[123214,2],[123215,2],[[123216,123535],3],[[123536,123566],2],[[123567,123583],3],[[123584,123641],2],[[123642,123646],3],[123647,2],[[123648,124895],3],[[124896,124902],2],[124903,3],[[124904,124907],2],[124908,3],[[124909,124910],2],[124911,3],[[124912,124926],2],[124927,3],[[124928,125124],2],[[125125,125126],3],[[125127,125135],2],[[125136,125142],2],[[125143,125183],3],[125184,1,"\uD83A\uDD22"],[125185,1,"\uD83A\uDD23"],[125186,1,"\uD83A\uDD24"],[125187,1,"\uD83A\uDD25"],[125188,1,"\uD83A\uDD26"],[125189,1,"\uD83A\uDD27"],[125190,1,"\uD83A\uDD28"],[125191,1,"\uD83A\uDD29"],[125192,1,"\uD83A\uDD2A"],[125193,1,"\uD83A\uDD2B"],[125194,1,"\uD83A\uDD2C"],[125195,1,"\uD83A\uDD2D"],[125196,1,"\uD83A\uDD2E"],[125197,1,"\uD83A\uDD2F"],[125198,1,"\uD83A\uDD30"],[125199,1,"\uD83A\uDD31"],[125200,1,"\uD83A\uDD32"],[125201,1,"\uD83A\uDD33"],[125202,1,"\uD83A\uDD34"],[125203,1,"\uD83A\uDD35"],[125204,1,"\uD83A\uDD36"],[125205,1,"\uD83A\uDD37"],[125206,1,"\uD83A\uDD38"],[125207,1,"\uD83A\uDD39"],[125208,1,"\uD83A\uDD3A"],[125209,1,"\uD83A\uDD3B"],[125210,1,"\uD83A\uDD3C"],[125211,1,"\uD83A\uDD3D"],[125212,1,"\uD83A\uDD3E"],[125213,1,"\uD83A\uDD3F"],[125214,1,"\uD83A\uDD40"],[125215,1,"\uD83A\uDD41"],[125216,1,"\uD83A\uDD42"],[125217,1,"\uD83A\uDD43"],[[125218,125258],2],[125259,2],[[125260,125263],3],[[125264,125273],2],[[125274,125277],3],[[125278,125279],2],[[125280,126064],3],[[126065,126132],2],[[126133,126208],3],[[126209,126269],2],[[126270,126463],3],[126464,1,"\u0627"],[126465,1,"\u0628"],[126466,1,"\u062C"],[126467,1,"\u062F"],[126468,3],[126469,1,"\u0648"],[126470,1,"\u0632"],[126471,1,"\u062D"],[126472,1,"\u0637"],[126473,1,"\u064A"],[126474,1,"\u0643"],[126475,1,"\u0644"],[126476,1,"\u0645"],[126477,1,"\u0646"],[126478,1,"\u0633"],[126479,1,"\u0639"],[126480,1,"\u0641"],[126481,1,"\u0635"],[126482,1,"\u0642"],[126483,1,"\u0631"],[126484,1,"\u0634"],[126485,1,"\u062A"],[126486,1,"\u062B"],[126487,1,"\u062E"],[126488,1,"\u0630"],[126489,1,"\u0636"],[126490,1,"\u0638"],[126491,1,"\u063A"],[126492,1,"\u066E"],[126493,1,"\u06BA"],[126494,1,"\u06A1"],[126495,1,"\u066F"],[126496,3],[126497,1,"\u0628"],[126498,1,"\u062C"],[126499,3],[126500,1,"\u0647"],[[126501,126502],3],[126503,1,"\u062D"],[126504,3],[126505,1,"\u064A"],[126506,1,"\u0643"],[126507,1,"\u0644"],[126508,1,"\u0645"],[126509,1,"\u0646"],[126510,1,"\u0633"],[126511,1,"\u0639"],[126512,1,"\u0641"],[126513,1,"\u0635"],[126514,1,"\u0642"],[126515,3],[126516,1,"\u0634"],[126517,1,"\u062A"],[126518,1,"\u062B"],[126519,1,"\u062E"],[126520,3],[126521,1,"\u0636"],[126522,3],[126523,1,"\u063A"],[[126524,126529],3],[126530,1,"\u062C"],[[126531,126534],3],[126535,1,"\u062D"],[126536,3],[126537,1,"\u064A"],[126538,3],[126539,1,"\u0644"],[126540,3],[126541,1,"\u0646"],[126542,1,"\u0633"],[126543,1,"\u0639"],[126544,3],[126545,1,"\u0635"],[126546,1,"\u0642"],[126547,3],[126548,1,"\u0634"],[[126549,126550],3],[126551,1,"\u062E"],[126552,3],[126553,1,"\u0636"],[126554,3],[126555,1,"\u063A"],[126556,3],[126557,1,"\u06BA"],[126558,3],[126559,1,"\u066F"],[126560,3],[126561,1,"\u0628"],[126562,1,"\u062C"],[126563,3],[126564,1,"\u0647"],[[126565,126566],3],[126567,1,"\u062D"],[126568,1,"\u0637"],[126569,1,"\u064A"],[126570,1,"\u0643"],[126571,3],[126572,1,"\u0645"],[126573,1,"\u0646"],[126574,1,"\u0633"],[126575,1,"\u0639"],[126576,1,"\u0641"],[126577,1,"\u0635"],[126578,1,"\u0642"],[126579,3],[126580,1,"\u0634"],[126581,1,"\u062A"],[126582,1,"\u062B"],[126583,1,"\u062E"],[126584,3],[126585,1,"\u0636"],[126586,1,"\u0638"],[126587,1,"\u063A"],[126588,1,"\u066E"],[126589,3],[126590,1,"\u06A1"],[126591,3],[126592,1,"\u0627"],[126593,1,"\u0628"],[126594,1,"\u062C"],[126595,1,"\u062F"],[126596,1,"\u0647"],[126597,1,"\u0648"],[126598,1,"\u0632"],[126599,1,"\u062D"],[126600,1,"\u0637"],[126601,1,"\u064A"],[126602,3],[126603,1,"\u0644"],[126604,1,"\u0645"],[126605,1,"\u0646"],[126606,1,"\u0633"],[126607,1,"\u0639"],[126608,1,"\u0641"],[126609,1,"\u0635"],[126610,1,"\u0642"],[126611,1,"\u0631"],[126612,1,"\u0634"],[126613,1,"\u062A"],[126614,1,"\u062B"],[126615,1,"\u062E"],[126616,1,"\u0630"],[126617,1,"\u0636"],[126618,1,"\u0638"],[126619,1,"\u063A"],[[126620,126624],3],[126625,1,"\u0628"],[126626,1,"\u062C"],[126627,1,"\u062F"],[126628,3],[126629,1,"\u0648"],[126630,1,"\u0632"],[126631,1,"\u062D"],[126632,1,"\u0637"],[126633,1,"\u064A"],[126634,3],[126635,1,"\u0644"],[126636,1,"\u0645"],[126637,1,"\u0646"],[126638,1,"\u0633"],[126639,1,"\u0639"],[126640,1,"\u0641"],[126641,1,"\u0635"],[126642,1,"\u0642"],[126643,1,"\u0631"],[126644,1,"\u0634"],[126645,1,"\u062A"],[126646,1,"\u062B"],[126647,1,"\u062E"],[126648,1,"\u0630"],[126649,1,"\u0636"],[126650,1,"\u0638"],[126651,1,"\u063A"],[[126652,126703],3],[[126704,126705],2],[[126706,126975],3],[[126976,127019],2],[[127020,127023],3],[[127024,127123],2],[[127124,127135],3],[[127136,127150],2],[[127151,127152],3],[[127153,127166],2],[127167,2],[127168,3],[[127169,127183],2],[127184,3],[[127185,127199],2],[[127200,127221],2],[[127222,127231],3],[127232,3],[127233,5,"0,"],[127234,5,"1,"],[127235,5,"2,"],[127236,5,"3,"],[127237,5,"4,"],[127238,5,"5,"],[127239,5,"6,"],[127240,5,"7,"],[127241,5,"8,"],[127242,5,"9,"],[[127243,127244],2],[[127245,127247],2],[127248,5,"(a)"],[127249,5,"(b)"],[127250,5,"(c)"],[127251,5,"(d)"],[127252,5,"(e)"],[127253,5,"(f)"],[127254,5,"(g)"],[127255,5,"(h)"],[127256,5,"(i)"],[127257,5,"(j)"],[127258,5,"(k)"],[127259,5,"(l)"],[127260,5,"(m)"],[127261,5,"(n)"],[127262,5,"(o)"],[127263,5,"(p)"],[127264,5,"(q)"],[127265,5,"(r)"],[127266,5,"(s)"],[127267,5,"(t)"],[127268,5,"(u)"],[127269,5,"(v)"],[127270,5,"(w)"],[127271,5,"(x)"],[127272,5,"(y)"],[127273,5,"(z)"],[127274,1,"\u3014s\u3015"],[127275,1,"c"],[127276,1,"r"],[127277,1,"cd"],[127278,1,"wz"],[127279,2],[127280,1,"a"],[127281,1,"b"],[127282,1,"c"],[127283,1,"d"],[127284,1,"e"],[127285,1,"f"],[127286,1,"g"],[127287,1,"h"],[127288,1,"i"],[127289,1,"j"],[127290,1,"k"],[127291,1,"l"],[127292,1,"m"],[127293,1,"n"],[127294,1,"o"],[127295,1,"p"],[127296,1,"q"],[127297,1,"r"],[127298,1,"s"],[127299,1,"t"],[127300,1,"u"],[127301,1,"v"],[127302,1,"w"],[127303,1,"x"],[127304,1,"y"],[127305,1,"z"],[127306,1,"hv"],[127307,1,"mv"],[127308,1,"sd"],[127309,1,"ss"],[127310,1,"ppv"],[127311,1,"wc"],[[127312,127318],2],[127319,2],[[127320,127326],2],[127327,2],[[127328,127337],2],[127338,1,"mc"],[127339,1,"md"],[127340,1,"mr"],[[127341,127343],2],[[127344,127352],2],[127353,2],[127354,2],[[127355,127356],2],[[127357,127358],2],[127359,2],[[127360,127369],2],[[127370,127373],2],[[127374,127375],2],[127376,1,"dj"],[[127377,127386],2],[[127387,127404],2],[127405,2],[[127406,127461],3],[[127462,127487],2],[127488,1,"\u307B\u304B"],[127489,1,"\u30B3\u30B3"],[127490,1,"\u30B5"],[[127491,127503],3],[127504,1,"\u624B"],[127505,1,"\u5B57"],[127506,1,"\u53CC"],[127507,1,"\u30C7"],[127508,1,"\u4E8C"],[127509,1,"\u591A"],[127510,1,"\u89E3"],[127511,1,"\u5929"],[127512,1,"\u4EA4"],[127513,1,"\u6620"],[127514,1,"\u7121"],[127515,1,"\u6599"],[127516,1,"\u524D"],[127517,1,"\u5F8C"],[127518,1,"\u518D"],[127519,1,"\u65B0"],[127520,1,"\u521D"],[127521,1,"\u7D42"],[127522,1,"\u751F"],[127523,1,"\u8CA9"],[127524,1,"\u58F0"],[127525,1,"\u5439"],[127526,1,"\u6F14"],[127527,1,"\u6295"],[127528,1,"\u6355"],[127529,1,"\u4E00"],[127530,1,"\u4E09"],[127531,1,"\u904A"],[127532,1,"\u5DE6"],[127533,1,"\u4E2D"],[127534,1,"\u53F3"],[127535,1,"\u6307"],[127536,1,"\u8D70"],[127537,1,"\u6253"],[127538,1,"\u7981"],[127539,1,"\u7A7A"],[127540,1,"\u5408"],[127541,1,"\u6E80"],[127542,1,"\u6709"],[127543,1,"\u6708"],[127544,1,"\u7533"],[127545,1,"\u5272"],[127546,1,"\u55B6"],[127547,1,"\u914D"],[[127548,127551],3],[127552,1,"\u3014\u672C\u3015"],[127553,1,"\u3014\u4E09\u3015"],[127554,1,"\u3014\u4E8C\u3015"],[127555,1,"\u3014\u5B89\u3015"],[127556,1,"\u3014\u70B9\u3015"],[127557,1,"\u3014\u6253\u3015"],[127558,1,"\u3014\u76D7\u3015"],[127559,1,"\u3014\u52DD\u3015"],[127560,1,"\u3014\u6557\u3015"],[[127561,127567],3],[127568,1,"\u5F97"],[127569,1,"\u53EF"],[[127570,127583],3],[[127584,127589],2],[[127590,127743],3],[[127744,127776],2],[[127777,127788],2],[[127789,127791],2],[[127792,127797],2],[127798,2],[[127799,127868],2],[127869,2],[[127870,127871],2],[[127872,127891],2],[[127892,127903],2],[[127904,127940],2],[127941,2],[[127942,127946],2],[[127947,127950],2],[[127951,127955],2],[[127956,127967],2],[[127968,127984],2],[[127985,127991],2],[[127992,127999],2],[[128000,128062],2],[128063,2],[128064,2],[128065,2],[[128066,128247],2],[128248,2],[[128249,128252],2],[[128253,128254],2],[128255,2],[[128256,128317],2],[[128318,128319],2],[[128320,128323],2],[[128324,128330],2],[[128331,128335],2],[[128336,128359],2],[[128360,128377],2],[128378,2],[[128379,128419],2],[128420,2],[[128421,128506],2],[[128507,128511],2],[128512,2],[[128513,128528],2],[128529,2],[[128530,128532],2],[128533,2],[128534,2],[128535,2],[128536,2],[128537,2],[128538,2],[128539,2],[[128540,128542],2],[128543,2],[[128544,128549],2],[[128550,128551],2],[[128552,128555],2],[128556,2],[128557,2],[[128558,128559],2],[[128560,128563],2],[128564,2],[[128565,128576],2],[[128577,128578],2],[[128579,128580],2],[[128581,128591],2],[[128592,128639],2],[[128640,128709],2],[[128710,128719],2],[128720,2],[[128721,128722],2],[[128723,128724],2],[128725,2],[[128726,128727],2],[[128728,128732],3],[[128733,128735],2],[[128736,128748],2],[[128749,128751],3],[[128752,128755],2],[[128756,128758],2],[[128759,128760],2],[128761,2],[128762,2],[[128763,128764],2],[[128765,128767],3],[[128768,128883],2],[[128884,128895],3],[[128896,128980],2],[[128981,128984],2],[[128985,128991],3],[[128992,129003],2],[[129004,129007],3],[129008,2],[[129009,129023],3],[[129024,129035],2],[[129036,129039],3],[[129040,129095],2],[[129096,129103],3],[[129104,129113],2],[[129114,129119],3],[[129120,129159],2],[[129160,129167],3],[[129168,129197],2],[[129198,129199],3],[[129200,129201],2],[[129202,129279],3],[[129280,129291],2],[129292,2],[[129293,129295],2],[[129296,129304],2],[[129305,129310],2],[129311,2],[[129312,129319],2],[[129320,129327],2],[129328,2],[[129329,129330],2],[[129331,129342],2],[129343,2],[[129344,129355],2],[129356,2],[[129357,129359],2],[[129360,129374],2],[[129375,129387],2],[[129388,129392],2],[129393,2],[129394,2],[[129395,129398],2],[[129399,129400],2],[129401,2],[129402,2],[129403,2],[[129404,129407],2],[[129408,129412],2],[[129413,129425],2],[[129426,129431],2],[[129432,129442],2],[[129443,129444],2],[[129445,129450],2],[[129451,129453],2],[[129454,129455],2],[[129456,129465],2],[[129466,129471],2],[129472,2],[[129473,129474],2],[[129475,129482],2],[129483,2],[129484,2],[[129485,129487],2],[[129488,129510],2],[[129511,129535],2],[[129536,129619],2],[[129620,129631],3],[[129632,129645],2],[[129646,129647],3],[[129648,129651],2],[129652,2],[[129653,129655],3],[[129656,129658],2],[[129659,129660],2],[[129661,129663],3],[[129664,129666],2],[[129667,129670],2],[[129671,129679],3],[[129680,129685],2],[[129686,129704],2],[[129705,129708],2],[[129709,129711],3],[[129712,129718],2],[[129719,129722],2],[[129723,129727],3],[[129728,129730],2],[[129731,129733],2],[[129734,129743],3],[[129744,129750],2],[[129751,129753],2],[[129754,129759],3],[[129760,129767],2],[[129768,129775],3],[[129776,129782],2],[[129783,129791],3],[[129792,129938],2],[129939,3],[[129940,129994],2],[[129995,130031],3],[130032,1,"0"],[130033,1,"1"],[130034,1,"2"],[130035,1,"3"],[130036,1,"4"],[130037,1,"5"],[130038,1,"6"],[130039,1,"7"],[130040,1,"8"],[130041,1,"9"],[[130042,131069],3],[[131070,131071],3],[[131072,173782],2],[[173783,173789],2],[[173790,173791],2],[[173792,173823],3],[[173824,177972],2],[[177973,177976],2],[[177977,177983],3],[[177984,178205],2],[[178206,178207],3],[[178208,183969],2],[[183970,183983],3],[[183984,191456],2],[[191457,194559],3],[194560,1,"\u4E3D"],[194561,1,"\u4E38"],[194562,1,"\u4E41"],[194563,1,"\uD840\uDD22"],[194564,1,"\u4F60"],[194565,1,"\u4FAE"],[194566,1,"\u4FBB"],[194567,1,"\u5002"],[194568,1,"\u507A"],[194569,1,"\u5099"],[194570,1,"\u50E7"],[194571,1,"\u50CF"],[194572,1,"\u349E"],[194573,1,"\uD841\uDE3A"],[194574,1,"\u514D"],[194575,1,"\u5154"],[194576,1,"\u5164"],[194577,1,"\u5177"],[194578,1,"\uD841\uDD1C"],[194579,1,"\u34B9"],[194580,1,"\u5167"],[194581,1,"\u518D"],[194582,1,"\uD841\uDD4B"],[194583,1,"\u5197"],[194584,1,"\u51A4"],[194585,1,"\u4ECC"],[194586,1,"\u51AC"],[194587,1,"\u51B5"],[194588,1,"\uD864\uDDDF"],[194589,1,"\u51F5"],[194590,1,"\u5203"],[194591,1,"\u34DF"],[194592,1,"\u523B"],[194593,1,"\u5246"],[194594,1,"\u5272"],[194595,1,"\u5277"],[194596,1,"\u3515"],[194597,1,"\u52C7"],[194598,1,"\u52C9"],[194599,1,"\u52E4"],[194600,1,"\u52FA"],[194601,1,"\u5305"],[194602,1,"\u5306"],[194603,1,"\u5317"],[194604,1,"\u5349"],[194605,1,"\u5351"],[194606,1,"\u535A"],[194607,1,"\u5373"],[194608,1,"\u537D"],[[194609,194611],1,"\u537F"],[194612,1,"\uD842\uDE2C"],[194613,1,"\u7070"],[194614,1,"\u53CA"],[194615,1,"\u53DF"],[194616,1,"\uD842\uDF63"],[194617,1,"\u53EB"],[194618,1,"\u53F1"],[194619,1,"\u5406"],[194620,1,"\u549E"],[194621,1,"\u5438"],[194622,1,"\u5448"],[194623,1,"\u5468"],[194624,1,"\u54A2"],[194625,1,"\u54F6"],[194626,1,"\u5510"],[194627,1,"\u5553"],[194628,1,"\u5563"],[[194629,194630],1,"\u5584"],[194631,1,"\u5599"],[194632,1,"\u55AB"],[194633,1,"\u55B3"],[194634,1,"\u55C2"],[194635,1,"\u5716"],[194636,1,"\u5606"],[194637,1,"\u5717"],[194638,1,"\u5651"],[194639,1,"\u5674"],[194640,1,"\u5207"],[194641,1,"\u58EE"],[194642,1,"\u57CE"],[194643,1,"\u57F4"],[194644,1,"\u580D"],[194645,1,"\u578B"],[194646,1,"\u5832"],[194647,1,"\u5831"],[194648,1,"\u58AC"],[194649,1,"\uD845\uDCE4"],[194650,1,"\u58F2"],[194651,1,"\u58F7"],[194652,1,"\u5906"],[194653,1,"\u591A"],[194654,1,"\u5922"],[194655,1,"\u5962"],[194656,1,"\uD845\uDEA8"],[194657,1,"\uD845\uDEEA"],[194658,1,"\u59EC"],[194659,1,"\u5A1B"],[194660,1,"\u5A27"],[194661,1,"\u59D8"],[194662,1,"\u5A66"],[194663,1,"\u36EE"],[194664,3],[194665,1,"\u5B08"],[[194666,194667],1,"\u5B3E"],[194668,1,"\uD846\uDDC8"],[194669,1,"\u5BC3"],[194670,1,"\u5BD8"],[194671,1,"\u5BE7"],[194672,1,"\u5BF3"],[194673,1,"\uD846\uDF18"],[194674,1,"\u5BFF"],[194675,1,"\u5C06"],[194676,3],[194677,1,"\u5C22"],[194678,1,"\u3781"],[194679,1,"\u5C60"],[194680,1,"\u5C6E"],[194681,1,"\u5CC0"],[194682,1,"\u5C8D"],[194683,1,"\uD847\uDDE4"],[194684,1,"\u5D43"],[194685,1,"\uD847\uDDE6"],[194686,1,"\u5D6E"],[194687,1,"\u5D6B"],[194688,1,"\u5D7C"],[194689,1,"\u5DE1"],[194690,1,"\u5DE2"],[194691,1,"\u382F"],[194692,1,"\u5DFD"],[194693,1,"\u5E28"],[194694,1,"\u5E3D"],[194695,1,"\u5E69"],[194696,1,"\u3862"],[194697,1,"\uD848\uDD83"],[194698,1,"\u387C"],[194699,1,"\u5EB0"],[194700,1,"\u5EB3"],[194701,1,"\u5EB6"],[194702,1,"\u5ECA"],[194703,1,"\uD868\uDF92"],[194704,1,"\u5EFE"],[[194705,194706],1,"\uD848\uDF31"],[194707,1,"\u8201"],[[194708,194709],1,"\u5F22"],[194710,1,"\u38C7"],[194711,1,"\uD84C\uDEB8"],[194712,1,"\uD858\uDDDA"],[194713,1,"\u5F62"],[194714,1,"\u5F6B"],[194715,1,"\u38E3"],[194716,1,"\u5F9A"],[194717,1,"\u5FCD"],[194718,1,"\u5FD7"],[194719,1,"\u5FF9"],[194720,1,"\u6081"],[194721,1,"\u393A"],[194722,1,"\u391C"],[194723,1,"\u6094"],[194724,1,"\uD849\uDED4"],[194725,1,"\u60C7"],[194726,1,"\u6148"],[194727,1,"\u614C"],[194728,1,"\u614E"],[194729,1,"\u614C"],[194730,1,"\u617A"],[194731,1,"\u618E"],[194732,1,"\u61B2"],[194733,1,"\u61A4"],[194734,1,"\u61AF"],[194735,1,"\u61DE"],[194736,1,"\u61F2"],[194737,1,"\u61F6"],[194738,1,"\u6210"],[194739,1,"\u621B"],[194740,1,"\u625D"],[194741,1,"\u62B1"],[194742,1,"\u62D4"],[194743,1,"\u6350"],[194744,1,"\uD84A\uDF0C"],[194745,1,"\u633D"],[194746,1,"\u62FC"],[194747,1,"\u6368"],[194748,1,"\u6383"],[194749,1,"\u63E4"],[194750,1,"\uD84A\uDFF1"],[194751,1,"\u6422"],[194752,1,"\u63C5"],[194753,1,"\u63A9"],[194754,1,"\u3A2E"],[194755,1,"\u6469"],[194756,1,"\u647E"],[194757,1,"\u649D"],[194758,1,"\u6477"],[194759,1,"\u3A6C"],[194760,1,"\u654F"],[194761,1,"\u656C"],[194762,1,"\uD84C\uDC0A"],[194763,1,"\u65E3"],[194764,1,"\u66F8"],[194765,1,"\u6649"],[194766,1,"\u3B19"],[194767,1,"\u6691"],[194768,1,"\u3B08"],[194769,1,"\u3AE4"],[194770,1,"\u5192"],[194771,1,"\u5195"],[194772,1,"\u6700"],[194773,1,"\u669C"],[194774,1,"\u80AD"],[194775,1,"\u43D9"],[194776,1,"\u6717"],[194777,1,"\u671B"],[194778,1,"\u6721"],[194779,1,"\u675E"],[194780,1,"\u6753"],[194781,1,"\uD84C\uDFC3"],[194782,1,"\u3B49"],[194783,1,"\u67FA"],[194784,1,"\u6785"],[194785,1,"\u6852"],[194786,1,"\u6885"],[194787,1,"\uD84D\uDC6D"],[194788,1,"\u688E"],[194789,1,"\u681F"],[194790,1,"\u6914"],[194791,1,"\u3B9D"],[194792,1,"\u6942"],[194793,1,"\u69A3"],[194794,1,"\u69EA"],[194795,1,"\u6AA8"],[194796,1,"\uD84D\uDEA3"],[194797,1,"\u6ADB"],[194798,1,"\u3C18"],[194799,1,"\u6B21"],[194800,1,"\uD84E\uDCA7"],[194801,1,"\u6B54"],[194802,1,"\u3C4E"],[194803,1,"\u6B72"],[194804,1,"\u6B9F"],[194805,1,"\u6BBA"],[194806,1,"\u6BBB"],[194807,1,"\uD84E\uDE8D"],[194808,1,"\uD847\uDD0B"],[194809,1,"\uD84E\uDEFA"],[194810,1,"\u6C4E"],[194811,1,"\uD84F\uDCBC"],[194812,1,"\u6CBF"],[194813,1,"\u6CCD"],[194814,1,"\u6C67"],[194815,1,"\u6D16"],[194816,1,"\u6D3E"],[194817,1,"\u6D77"],[194818,1,"\u6D41"],[194819,1,"\u6D69"],[194820,1,"\u6D78"],[194821,1,"\u6D85"],[194822,1,"\uD84F\uDD1E"],[194823,1,"\u6D34"],[194824,1,"\u6E2F"],[194825,1,"\u6E6E"],[194826,1,"\u3D33"],[194827,1,"\u6ECB"],[194828,1,"\u6EC7"],[194829,1,"\uD84F\uDED1"],[194830,1,"\u6DF9"],[194831,1,"\u6F6E"],[194832,1,"\uD84F\uDF5E"],[194833,1,"\uD84F\uDF8E"],[194834,1,"\u6FC6"],[194835,1,"\u7039"],[194836,1,"\u701E"],[194837,1,"\u701B"],[194838,1,"\u3D96"],[194839,1,"\u704A"],[194840,1,"\u707D"],[194841,1,"\u7077"],[194842,1,"\u70AD"],[194843,1,"\uD841\uDD25"],[194844,1,"\u7145"],[194845,1,"\uD850\uDE63"],[194846,1,"\u719C"],[194847,3],[194848,1,"\u7228"],[194849,1,"\u7235"],[194850,1,"\u7250"],[194851,1,"\uD851\uDE08"],[194852,1,"\u7280"],[194853,1,"\u7295"],[194854,1,"\uD851\uDF35"],[194855,1,"\uD852\uDC14"],[194856,1,"\u737A"],[194857,1,"\u738B"],[194858,1,"\u3EAC"],[194859,1,"\u73A5"],[[194860,194861],1,"\u3EB8"],[194862,1,"\u7447"],[194863,1,"\u745C"],[194864,1,"\u7471"],[194865,1,"\u7485"],[194866,1,"\u74CA"],[194867,1,"\u3F1B"],[194868,1,"\u7524"],[194869,1,"\uD853\uDC36"],[194870,1,"\u753E"],[194871,1,"\uD853\uDC92"],[194872,1,"\u7570"],[194873,1,"\uD848\uDD9F"],[194874,1,"\u7610"],[194875,1,"\uD853\uDFA1"],[194876,1,"\uD853\uDFB8"],[194877,1,"\uD854\uDC44"],[194878,1,"\u3FFC"],[194879,1,"\u4008"],[194880,1,"\u76F4"],[194881,1,"\uD854\uDCF3"],[194882,1,"\uD854\uDCF2"],[194883,1,"\uD854\uDD19"],[194884,1,"\uD854\uDD33"],[194885,1,"\u771E"],[[194886,194887],1,"\u771F"],[194888,1,"\u774A"],[194889,1,"\u4039"],[194890,1,"\u778B"],[194891,1,"\u4046"],[194892,1,"\u4096"],[194893,1,"\uD855\uDC1D"],[194894,1,"\u784E"],[194895,1,"\u788C"],[194896,1,"\u78CC"],[194897,1,"\u40E3"],[194898,1,"\uD855\uDE26"],[194899,1,"\u7956"],[194900,1,"\uD855\uDE9A"],[194901,1,"\uD855\uDEC5"],[194902,1,"\u798F"],[194903,1,"\u79EB"],[194904,1,"\u412F"],[194905,1,"\u7A40"],[194906,1,"\u7A4A"],[194907,1,"\u7A4F"],[194908,1,"\uD856\uDD7C"],[[194909,194910],1,"\uD856\uDEA7"],[194911,3],[194912,1,"\u4202"],[194913,1,"\uD856\uDFAB"],[194914,1,"\u7BC6"],[194915,1,"\u7BC9"],[194916,1,"\u4227"],[194917,1,"\uD857\uDC80"],[194918,1,"\u7CD2"],[194919,1,"\u42A0"],[194920,1,"\u7CE8"],[194921,1,"\u7CE3"],[194922,1,"\u7D00"],[194923,1,"\uD857\uDF86"],[194924,1,"\u7D63"],[194925,1,"\u4301"],[194926,1,"\u7DC7"],[194927,1,"\u7E02"],[194928,1,"\u7E45"],[194929,1,"\u4334"],[194930,1,"\uD858\uDE28"],[194931,1,"\uD858\uDE47"],[194932,1,"\u4359"],[194933,1,"\uD858\uDED9"],[194934,1,"\u7F7A"],[194935,1,"\uD858\uDF3E"],[194936,1,"\u7F95"],[194937,1,"\u7FFA"],[194938,1,"\u8005"],[194939,1,"\uD859\uDCDA"],[194940,1,"\uD859\uDD23"],[194941,1,"\u8060"],[194942,1,"\uD859\uDDA8"],[194943,1,"\u8070"],[194944,1,"\uD84C\uDF5F"],[194945,1,"\u43D5"],[194946,1,"\u80B2"],[194947,1,"\u8103"],[194948,1,"\u440B"],[194949,1,"\u813E"],[194950,1,"\u5AB5"],[194951,1,"\uD859\uDFA7"],[194952,1,"\uD859\uDFB5"],[194953,1,"\uD84C\uDF93"],[194954,1,"\uD84C\uDF9C"],[194955,1,"\u8201"],[194956,1,"\u8204"],[194957,1,"\u8F9E"],[194958,1,"\u446B"],[194959,1,"\u8291"],[194960,1,"\u828B"],[194961,1,"\u829D"],[194962,1,"\u52B3"],[194963,1,"\u82B1"],[194964,1,"\u82B3"],[194965,1,"\u82BD"],[194966,1,"\u82E6"],[194967,1,"\uD85A\uDF3C"],[194968,1,"\u82E5"],[194969,1,"\u831D"],[194970,1,"\u8363"],[194971,1,"\u83AD"],[194972,1,"\u8323"],[194973,1,"\u83BD"],[194974,1,"\u83E7"],[194975,1,"\u8457"],[194976,1,"\u8353"],[194977,1,"\u83CA"],[194978,1,"\u83CC"],[194979,1,"\u83DC"],[194980,1,"\uD85B\uDC36"],[194981,1,"\uD85B\uDD6B"],[194982,1,"\uD85B\uDCD5"],[194983,1,"\u452B"],[194984,1,"\u84F1"],[194985,1,"\u84F3"],[194986,1,"\u8516"],[194987,1,"\uD85C\uDFCA"],[194988,1,"\u8564"],[194989,1,"\uD85B\uDF2C"],[194990,1,"\u455D"],[194991,1,"\u4561"],[194992,1,"\uD85B\uDFB1"],[194993,1,"\uD85C\uDCD2"],[194994,1,"\u456B"],[194995,1,"\u8650"],[194996,1,"\u865C"],[194997,1,"\u8667"],[194998,1,"\u8669"],[194999,1,"\u86A9"],[195000,1,"\u8688"],[195001,1,"\u870E"],[195002,1,"\u86E2"],[195003,1,"\u8779"],[195004,1,"\u8728"],[195005,1,"\u876B"],[195006,1,"\u8786"],[195007,3],[195008,1,"\u87E1"],[195009,1,"\u8801"],[195010,1,"\u45F9"],[195011,1,"\u8860"],[195012,1,"\u8863"],[195013,1,"\uD85D\uDE67"],[195014,1,"\u88D7"],[195015,1,"\u88DE"],[195016,1,"\u4635"],[195017,1,"\u88FA"],[195018,1,"\u34BB"],[195019,1,"\uD85E\uDCAE"],[195020,1,"\uD85E\uDD66"],[195021,1,"\u46BE"],[195022,1,"\u46C7"],[195023,1,"\u8AA0"],[195024,1,"\u8AED"],[195025,1,"\u8B8A"],[195026,1,"\u8C55"],[195027,1,"\uD85F\uDCA8"],[195028,1,"\u8CAB"],[195029,1,"\u8CC1"],[195030,1,"\u8D1B"],[195031,1,"\u8D77"],[195032,1,"\uD85F\uDF2F"],[195033,1,"\uD842\uDC04"],[195034,1,"\u8DCB"],[195035,1,"\u8DBC"],[195036,1,"\u8DF0"],[195037,1,"\uD842\uDCDE"],[195038,1,"\u8ED4"],[195039,1,"\u8F38"],[195040,1,"\uD861\uDDD2"],[195041,1,"\uD861\uDDED"],[195042,1,"\u9094"],[195043,1,"\u90F1"],[195044,1,"\u9111"],[195045,1,"\uD861\uDF2E"],[195046,1,"\u911B"],[195047,1,"\u9238"],[195048,1,"\u92D7"],[195049,1,"\u92D8"],[195050,1,"\u927C"],[195051,1,"\u93F9"],[195052,1,"\u9415"],[195053,1,"\uD862\uDFFA"],[195054,1,"\u958B"],[195055,1,"\u4995"],[195056,1,"\u95B7"],[195057,1,"\uD863\uDD77"],[195058,1,"\u49E6"],[195059,1,"\u96C3"],[195060,1,"\u5DB2"],[195061,1,"\u9723"],[195062,1,"\uD864\uDD45"],[195063,1,"\uD864\uDE1A"],[195064,1,"\u4A6E"],[195065,1,"\u4A76"],[195066,1,"\u97E0"],[195067,1,"\uD865\uDC0A"],[195068,1,"\u4AB2"],[195069,1,"\uD865\uDC96"],[[195070,195071],1,"\u980B"],[195072,1,"\u9829"],[195073,1,"\uD865\uDDB6"],[195074,1,"\u98E2"],[195075,1,"\u4B33"],[195076,1,"\u9929"],[195077,1,"\u99A7"],[195078,1,"\u99C2"],[195079,1,"\u99FE"],[195080,1,"\u4BCE"],[195081,1,"\uD866\uDF30"],[195082,1,"\u9B12"],[195083,1,"\u9C40"],[195084,1,"\u9CFD"],[195085,1,"\u4CCE"],[195086,1,"\u4CED"],[195087,1,"\u9D67"],[195088,1,"\uD868\uDCCE"],[195089,1,"\u4CF8"],[195090,1,"\uD868\uDD05"],[195091,1,"\uD868\uDE0E"],[195092,1,"\uD868\uDE91"],[195093,1,"\u9EBB"],[195094,1,"\u4D56"],[195095,1,"\u9EF9"],[195096,1,"\u9EFE"],[195097,1,"\u9F05"],[195098,1,"\u9F0F"],[195099,1,"\u9F16"],[195100,1,"\u9F3B"],[195101,1,"\uD869\uDE00"],[[195102,196605],3],[[196606,196607],3],[[196608,201546],2],[[201547,262141],3],[[262142,262143],3],[[262144,327677],3],[[327678,327679],3],[[327680,393213],3],[[393214,393215],3],[[393216,458749],3],[[458750,458751],3],[[458752,524285],3],[[524286,524287],3],[[524288,589821],3],[[589822,589823],3],[[589824,655357],3],[[655358,655359],3],[[655360,720893],3],[[720894,720895],3],[[720896,786429],3],[[786430,786431],3],[[786432,851965],3],[[851966,851967],3],[[851968,917501],3],[[917502,917503],3],[917504,3],[917505,3],[[917506,917535],3],[[917536,917631],3],[[917632,917759],3],[[917760,917999],7],[[918000,983037],3],[[983038,983039],3],[[983040,1048573],3],[[1048574,1048575],3],[[1048576,1114109],3],[[1114110,1114111],3]]});var FC=w((VZ1,HC)=>{VZ1.STATUS_MAPPING={mapped:1,valid:2,disallowed:3,disallowed_STD3_valid:4,disallowed_STD3_mapped:5,deviation:6,ignored:7}});var wC=w((pj1,LC)=>{var LZ1=function(Z){return/[^\x00-\x7F]/u.test(Z)},VC=function(Z,{useSTD3ASCIIRules:Y}){let X=0,J=UC.length-1;while(X<=J){const $=Math.floor((X+J)/2),W=UC[$],G=Array.isArray(W[0])?W[0][0]:W[0],K=Array.isArray(W[0])?W[0][1]:W[0];if(G<=Z&&K>=Z){if(Y&&(W[1]===I8.disallowed_STD3_valid||W[1]===I8.disallowed_STD3_mapped))return[I8.disallowed,...W.slice(2)];else if(W[1]===I8.disallowed_STD3_valid)return[I8.valid,...W.slice(2)];else if(W[1]===I8.disallowed_STD3_mapped)return[I8.mapped,...W.slice(2)];return W.slice(1)}else if(G>Z)J=$-1;else X=$+1}return null},wZ1=function(Z,{useSTD3ASCIIRules:Y,processingOption:X}){let J=!1,$="";for(let W of Z){const[G,K]=VC(W.codePointAt(0),{useSTD3ASCIIRules:Y});switch(G){case I8.disallowed:J=!0,$+=W;break;case I8.ignored:break;case I8.mapped:$+=K;break;case I8.deviation:if(X==="transitional")$+=K;else $+=W;break;case I8.valid:$+=W;break}}return{string:$,error:J}},RZ1=function(Z,{checkHyphens:Y,checkBidi:X,checkJoiners:J,processingOption:$,useSTD3ASCIIRules:W}){if(Z.normalize("NFC")!==Z)return!1;const G=Array.from(Z);if(Y){if(G[2]==="-"&&G[3]==="-"||(Z.startsWith("-")||Z.endsWith("-")))return!1}if(Z.includes(".")||G.length>0&&v6.combiningMarks.test(G[0]))return!1;for(let K of G){const[Q]=VC(K.codePointAt(0),{useSTD3ASCIIRules:W});if($==="transitional"&&Q!==I8.valid||$==="nontransitional"&&Q!==I8.valid&&Q!==I8.deviation)return!1}if(J){let K=0;for(let[Q,z]of G.entries())if(z==="\u200C"||z==="\u200D"){if(Q>0){if(v6.combiningClassVirama.test(G[Q-1]))continue;if(z==="\u200C"){const H=G.indexOf("\u200C",Q+1),F=H<0?G.slice(K):G.slice(K,H);if(v6.validZWNJ.test(F.join(""))){K=Q+1;continue}}}return!1}}if(X){let K;if(v6.bidiS1LTR.test(G[0]))K=!1;else if(v6.bidiS1RTL.test(G[0]))K=!0;else return!1;if(K){if(!v6.bidiS2.test(Z)||!v6.bidiS3.test(Z)||v6.bidiS4EN.test(Z)&&v6.bidiS4AN.test(Z))return!1}else if(!v6.bidiS5.test(Z)||!v6.bidiS6.test(Z))return!1}return!0},MZ1=function(Z){const Y=Z.map((X)=>{if(X.startsWith("xn--"))try{return tU.decode(X.substring(4))}catch(J){return""}return X}).join(".");return v6.bidiDomain.test(Y)},qC=function(Z,Y){const{processingOption:X}=Y;let{string:J,error:$}=wZ1(Z,Y);J=J.normalize("NFC");const W=J.split("."),G=MZ1(W);for(let[K,Q]of W.entries()){let z=Q,H=X;if(z.startsWith("xn--")){try{z=tU.decode(z.substring(4)),W[K]=z}catch(U){$=!0;continue}H="nontransitional"}if($)continue;if(!RZ1(z,{...Y,processingOption:H,checkBidi:Y.checkBidi&&G}))$=!0}return{string:W.join("."),error:$}},BZ1=function(Z,{checkHyphens:Y=!1,checkBidi:X=!1,checkJoiners:J=!1,useSTD3ASCIIRules:$=!1,processingOption:W="nontransitional",verifyDNSLength:G=!1}={}){if(W!=="transitional"&&W!=="nontransitional")throw new RangeError("processingOption must be either transitional or nontransitional");const K=qC(Z,{processingOption:W,checkHyphens:Y,checkBidi:X,checkJoiners:J,useSTD3ASCIIRules:$});let Q=K.string.split(".");if(Q=Q.map((z)=>{if(LZ1(z))try{return`xn--${tU.encode(z)}`}catch(H){K.error=!0}return z}),G){const z=Q.join(".").length;if(z>253||z===0)K.error=!0;for(let H=0;H<Q.length;++H)if(Q[H].length>63||Q[H].length===0){K.error=!0;break}}if(K.error)return null;return Q.join(".")},NZ1=function(Z,{checkHyphens:Y=!1,checkBidi:X=!1,checkJoiners:J=!1,useSTD3ASCIIRules:$=!1,processingOption:W="nontransitional"}={}){const G=qC(Z,{processingOption:W,checkHyphens:Y,checkBidi:X,checkJoiners:J,useSTD3ASCIIRules:$});return{domain:G.string,error:G.error}},tU=import.meta.require("punycode"),v6=QC(),UC=zC(),{STATUS_MAPPING:I8}=FC();LC.exports={toASCII:BZ1,toUnicode:NZ1}});var eU=w((ij1,MC)=>{var oU=function(Z){return Z>=48&&Z<=57},RC=function(Z){return Z>=65&&Z<=90||Z>=97&&Z<=122},AZ1=function(Z){return RC(Z)||oU(Z)},DZ1=function(Z){return oU(Z)||Z>=65&&Z<=70||Z>=97&&Z<=102};MC.exports={isASCIIDigit:oU,isASCIIAlpha:RC,isASCIIAlphanumeric:AZ1,isASCIIHex:DZ1}});var KG=w((nj1,BC)=>{var IZ1=function(Z){return PZ1.encode(Z)},jZ1=function(Z){return TZ1.decode(Z)},PZ1=new TextEncoder,TZ1=new TextDecoder("utf-8",{ignoreBOM:!0});BC.exports={utf8Encode:IZ1,utf8DecodeWithoutBOM:jZ1}});var QG=w((aj1,jC)=>{var S1=function(Z){return Z.codePointAt(0)},EZ1=function(Z){let Y=Z.toString(16).toUpperCase();if(Y.length===1)Y=`0${Y}`;return`%${Y}`},DC=function(Z){const Y=new Uint8Array(Z.byteLength);let X=0;for(let J=0;J<Z.byteLength;++J){const $=Z[J];if($!==37)Y[X++]=$;else if($===37&&(!NC(Z[J+1])||!NC(Z[J+2])))Y[X++]=$;else{const W=parseInt(String.fromCodePoint(Z[J+1],Z[J+2]),16);Y[X++]=W,J+=2}}return Y.slice(0,X)},CZ1=function(Z){const Y=AC(Z);return DC(Y)},ZV=function(Z){return Z<=31||Z>126},SZ1=function(Z){return ZV(Z)||OZ1.has(Z)},YV=function(Z){return ZV(Z)||kZ1.has(Z)},_Z1=function(Z){return YV(Z)||Z===S1("'")},PC=function(Z){return YV(Z)||xZ1.has(Z)},TC=function(Z){return PC(Z)||fZ1.has(Z)},gZ1=function(Z){return TC(Z)||yZ1.has(Z)},vZ1=function(Z){return gZ1(Z)||bZ1.has(Z)},IC=function(Z,Y){const X=AC(Z);let J="";for(let $ of X)if(!Y($))J+=String.fromCharCode($);else J+=EZ1($);return J},hZ1=function(Z,Y){return IC(String.fromCodePoint(Z),Y)},mZ1=function(Z,Y,X=!1){let J="";for(let $ of Z)if(X&&$===" ")J+="+";else J+=IC($,Y);return J},{isASCIIHex:NC}=eU(),{utf8Encode:AC}=KG(),OZ1=new Set([S1(" "),S1("\""),S1("<"),S1(">"),S1("`")]),kZ1=new Set([S1(" "),S1("\""),S1("#"),S1("<"),S1(">")]),xZ1=new Set([S1("?"),S1("`"),S1("{"),S1("}")]),fZ1=new Set([S1("/"),S1(":"),S1(";"),S1("="),S1("@"),S1("["),S1("\\"),S1("]"),S1("^"),S1("|")]),yZ1=new Set([S1("$"),S1("%"),S1("&"),S1("+"),S1(",")]),bZ1=new Set([S1("!"),S1("'"),S1("("),S1(")"),S1("~")]);jC.exports={isC0ControlPercentEncode:ZV,isFragmentPercentEncode:SZ1,isQueryPercentEncode:YV,isSpecialQueryPercentEncode:_Z1,isPathPercentEncode:PC,isUserinfoPercentEncode:TC,isURLEncodedPercentEncode:vZ1,percentDecodeString:CZ1,percentDecodeBytes:DC,utf8PercentEncodeString:mZ1,utf8PercentEncodeCodePoint:hZ1}});var KV=w((qY1,j8)=>{var p=function(Z){return Z.codePointAt(0)},EC=function(Z){return[...Z].length},CC=function(Z,Y){const X=Z[Y];return isNaN(X)?void 0:String.fromCodePoint(X)},OC=function(Z){return Z==="."||Z.toLowerCase()==="%2e"},aZ1=function(Z){return Z=Z.toLowerCase(),Z===".."||Z==="%2e."||Z===".%2e"||Z==="%2e%2e"},sZ1=function(Z,Y){return Y8.isASCIIAlpha(Z)&&(Y===p(":")||Y===p("|"))},xC=function(Z){return Z.length===2&&Y8.isASCIIAlpha(Z.codePointAt(0))&&(Z[1]===":"||Z[1]==="|")},rZ1=function(Z){return Z.length===2&&Y8.isASCIIAlpha(Z.codePointAt(0))&&Z[1]===":"},tZ1=function(Z){return Z.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|%|\/|:|<|>|\?|@|\[|\\|\]|\^|\|/u)!==-1},oZ1=function(Z){return Z.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|\/|:|<|>|\?|@|\[|\\|\]|\^|\|/u)!==-1},zG=function(Z){return _C[Z]!==void 0},Z8=function(Z){return zG(Z.scheme)},XV=function(Z){return!zG(Z.scheme)},fC=function(Z){return _C[Z]},yC=function(Z){if(Z==="")return q1;let Y=10;if(Z.length>=2&&Z.charAt(0)==="0"&&Z.charAt(1).toLowerCase()==="x")Z=Z.substring(2),Y=16;else if(Z.length>=2&&Z.charAt(0)==="0")Z=Z.substring(1),Y=8;if(Z==="")return 0;let X=/[^0-7]/u;if(Y===10)X=/[^0-9]/u;if(Y===16)X=/[^0-9A-Fa-f]/u;if(X.test(Z))return q1;return parseInt(Z,Y)},eZ1=function(Z){const Y=Z.split(".");if(Y[Y.length-1]===""){if(Y.length>1)Y.pop()}if(Y.length>4)return q1;const X=[];for(let W of Y){const G=yC(W);if(G===q1)return q1;X.push(G)}for(let W=0;W<X.length-1;++W)if(X[W]>255)return q1;if(X[X.length-1]>=256**(5-X.length))return q1;let J=X.pop(),$=0;for(let W of X)J+=W*256**(3-$),++$;return J},ZY1=function(Z){let Y="",X=Z;for(let J=1;J<=4;++J){if(Y=String(X%256)+Y,J!==4)Y=`.${Y}`;X=Math.floor(X/256)}return Y},YY1=function(Z){const Y=[0,0,0,0,0,0,0,0];let X=0,J=null,$=0;if(Z=Array.from(Z,(W)=>W.codePointAt(0)),Z[$]===p(":")){if(Z[$+1]!==p(":"))return q1;$+=2,++X,J=X}while($<Z.length){if(X===8)return q1;if(Z[$]===p(":")){if(J!==null)return q1;++$,++X,J=X;continue}let W=0,G=0;while(G<4&&Y8.isASCIIHex(Z[$]))W=W*16+parseInt(CC(Z,$),16),++$,++G;if(Z[$]===p(".")){if(G===0)return q1;if($-=G,X>6)return q1;let K=0;while(Z[$]!==void 0){let Q=null;if(K>0)if(Z[$]===p(".")&&K<4)++$;else return q1;if(!Y8.isASCIIDigit(Z[$]))return q1;while(Y8.isASCIIDigit(Z[$])){const z=parseInt(CC(Z,$));if(Q===null)Q=z;else if(Q===0)return q1;else Q=Q*10+z;if(Q>255)return q1;++$}if(Y[X]=Y[X]*256+Q,++K,K===2||K===4)++X}if(K!==4)return q1;break}else if(Z[$]===p(":")){if(++$,Z[$]===void 0)return q1}else if(Z[$]!==void 0)return q1;Y[X]=W,++X}if(J!==null){let W=X-J;X=7;while(X!==0&&W>0){const G=Y[J+W-1];Y[J+W-1]=Y[X],Y[X]=G,--X,--W}}else if(J===null&&X!==8)return q1;return Y},XY1=function(Z){let Y="";const X=WY1(Z);let J=!1;for(let $=0;$<=7;++$){if(J&&Z[$]===0)continue;else if(J)J=!1;if(X===$){Y+=$===0?"::":":",J=!0;continue}if(Y+=Z[$].toString(16),$!==7)Y+=":"}return Y},JV=function(Z,Y=!1){if(Z[0]==="["){if(Z[Z.length-1]!=="]")return q1;return YY1(Z.substring(1,Z.length-1))}if(Y)return $Y1(Z);const X=dZ1(cZ1(Z)),J=GY1(X);if(J===q1)return q1;if(tZ1(J))return q1;if(JY1(J))return eZ1(J);return J},JY1=function(Z){const Y=Z.split(".");if(Y[Y.length-1]===""){if(Y.length===1)return!1;Y.pop()}const X=Y[Y.length-1];if(yC(X)!==q1)return!0;if(/^[0-9]+$/u.test(X))return!0;return!1},$Y1=function(Z){if(oZ1(Z))return q1;return FG(Z,kC)},WY1=function(Z){let Y=null,X=1,J=null,$=0;for(let W=0;W<Z.length;++W)if(Z[W]!==0){if($>X)Y=J,X=$;J=null,$=0}else{if(J===null)J=W;++$}if($>X)return J;return Y},WV=function(Z){if(typeof Z==="number")return ZY1(Z);if(Z instanceof Array)return`[${XY1(Z)}]`;return Z},GY1=function(Z,Y=!1){const X=uZ1.toASCII(Z,{checkBidi:!0,checkHyphens:!1,checkJoiners:!0,useSTD3ASCIIRules:Y,verifyDNSLength:Y});if(X===null||X==="")return q1;return X},KY1=function(Z){return Z.replace(/^[\u0000-\u001F\u0020]+|[\u0000-\u001F\u0020]+$/ug,"")},QY1=function(Z){return Z.replace(/\u0009|\u000A|\u000D/ug,"")},gC=function(Z){const{path:Y}=Z;if(Y.length===0)return;if(Z.scheme==="file"&&Y.length===1&&HY1(Y[0]))return;Y.pop()},bC=function(Z){return Z.username!==""||Z.password!==""},zY1=function(Z){return Z.host===null||Z.host===""||qY(Z)||Z.scheme==="file"},qY=function(Z){return typeof Z.path==="string"},HY1=function(Z){return/^[A-Za-z]:$/u.test(Z)},R0=function(Z,Y,X,J,$){if(this.pointer=0,this.input=Z,this.base=Y||null,this.encodingOverride=X||"utf-8",this.stateOverride=$,this.url=J,this.failure=!1,this.parseError=!1,!this.url){this.url={scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null};const G=KY1(this.input);if(G!==this.input)this.parseError=!0;this.input=G}const W=QY1(this.input);if(W!==this.input)this.parseError=!0;this.input=W,this.state=$||"scheme start",this.buffer="",this.atFlag=!1,this.arrFlag=!1,this.passwordTokenSeenFlag=!1,this.input=Array.from(this.input,(G)=>G.codePointAt(0));for(;this.pointer<=this.input.length;++this.pointer){const G=this.input[this.pointer],K=isNaN(G)?void 0:String.fromCodePoint(G),Q=this[`parse ${this.state}`](G,K);if(!Q)break;else if(Q===q1){this.failure=!0;break}}},vC=function(Z,Y){const X=Z.length-Y;return X>=2&&sZ1(Z[Y],Z[Y+1])&&(X===2||FY1.has(Z[Y+2]))},UY1=function(Z,Y){let X=`${Z.scheme}:`;if(Z.host!==null){if(X+="//",Z.username!==""||Z.password!==""){if(X+=Z.username,Z.password!=="")X+=`:${Z.password}`;X+="@"}if(X+=WV(Z.host),Z.port!==null)X+=`:${Z.port}`}if(Z.host===null&&!qY(Z)&&Z.path.length>1&&Z.path[0]==="")X+="/.";if(X+=GV(Z),Z.query!==null)X+=`?${Z.query}`;if(!Y&&Z.fragment!==null)X+=`#${Z.fragment}`;return X},VY1=function(Z){let Y=`${Z.scheme}://`;if(Y+=WV(Z.host),Z.port!==null)Y+=`:${Z.port}`;return Y},GV=function(Z){if(qY(Z))return Z.path;let Y="";for(let X of Z.path)Y+=`/${X}`;return Y},uZ1=wC(),Y8=eU(),{utf8DecodeWithoutBOM:dZ1}=KG(),{percentDecodeString:cZ1,utf8PercentEncodeCodePoint:HG,utf8PercentEncodeString:FG,isC0ControlPercentEncode:kC,isFragmentPercentEncode:lZ1,isQueryPercentEncode:pZ1,isSpecialQueryPercentEncode:iZ1,isPathPercentEncode:nZ1,isUserinfoPercentEncode:$V}=QG(),_C={ftp:21,file:null,http:80,https:443,ws:80,wss:443},q1=Symbol("failure");R0.prototype["parse scheme start"]=function Z(Y,X){if(Y8.isASCIIAlpha(Y))this.buffer+=X.toLowerCase(),this.state="scheme";else if(!this.stateOverride)this.state="no scheme",--this.pointer;else return this.parseError=!0,q1;return!0};R0.prototype["parse scheme"]=function Z(Y,X){if(Y8.isASCIIAlphanumeric(Y)||Y===p("+")||Y===p("-")||Y===p("."))this.buffer+=X.toLowerCase();else if(Y===p(":")){if(this.stateOverride){if(Z8(this.url)&&!zG(this.buffer))return!1;if(!Z8(this.url)&&zG(this.buffer))return!1;if((bC(this.url)||this.url.port!==null)&&this.buffer==="file")return!1;if(this.url.scheme==="file"&&this.url.host==="")return!1}if(this.url.scheme=this.buffer,this.stateOverride){if(this.url.port===fC(this.url.scheme))this.url.port=null;return!1}if(this.buffer="",this.url.scheme==="file"){if(this.input[this.pointer+1]!==p("/")||this.input[this.pointer+2]!==p("/"))this.parseError=!0;this.state="file"}else if(Z8(this.url)&&this.base!==null&&this.base.scheme===this.url.scheme)this.state="special relative or authority";else if(Z8(this.url))this.state="special authority slashes";else if(this.input[this.pointer+1]===p("/"))this.state="path or authority",++this.pointer;else this.url.path="",this.state="opaque path"}else if(!this.stateOverride)this.buffer="",this.state="no scheme",this.pointer=-1;else return this.parseError=!0,q1;return!0};R0.prototype["parse no scheme"]=function Z(Y){if(this.base===null||qY(this.base)&&Y!==p("#"))return q1;else if(qY(this.base)&&Y===p("#"))this.url.scheme=this.base.scheme,this.url.path=this.base.path,this.url.query=this.base.query,this.url.fragment="",this.state="fragment";else if(this.base.scheme==="file")this.state="file",--this.pointer;else this.state="relative",--this.pointer;return!0};R0.prototype["parse special relative or authority"]=function Z(Y){if(Y===p("/")&&this.input[this.pointer+1]===p("/"))this.state="special authority ignore slashes",++this.pointer;else this.parseError=!0,this.state="relative",--this.pointer;return!0};R0.prototype["parse path or authority"]=function Z(Y){if(Y===p("/"))this.state="authority";else this.state="path",--this.pointer;return!0};R0.prototype["parse relative"]=function Z(Y){if(this.url.scheme=this.base.scheme,Y===p("/"))this.state="relative slash";else if(Z8(this.url)&&Y===p("\\"))this.parseError=!0,this.state="relative slash";else if(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query,Y===p("?"))this.url.query="",this.state="query";else if(Y===p("#"))this.url.fragment="",this.state="fragment";else if(!isNaN(Y))this.url.query=null,this.url.path.pop(),this.state="path",--this.pointer;return!0};R0.prototype["parse relative slash"]=function Z(Y){if(Z8(this.url)&&(Y===p("/")||Y===p("\\"))){if(Y===p("\\"))this.parseError=!0;this.state="special authority ignore slashes"}else if(Y===p("/"))this.state="authority";else this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.state="path",--this.pointer;return!0};R0.prototype["parse special authority slashes"]=function Z(Y){if(Y===p("/")&&this.input[this.pointer+1]===p("/"))this.state="special authority ignore slashes",++this.pointer;else this.parseError=!0,this.state="special authority ignore slashes",--this.pointer;return!0};R0.prototype["parse special authority ignore slashes"]=function Z(Y){if(Y!==p("/")&&Y!==p("\\"))this.state="authority",--this.pointer;else this.parseError=!0;return!0};R0.prototype["parse authority"]=function Z(Y,X){if(Y===p("@")){if(this.parseError=!0,this.atFlag)this.buffer=`%40${this.buffer}`;this.atFlag=!0;const J=EC(this.buffer);for(let $=0;$<J;++$){const W=this.buffer.codePointAt($);if(W===p(":")&&!this.passwordTokenSeenFlag){this.passwordTokenSeenFlag=!0;continue}const G=HG(W,$V);if(this.passwordTokenSeenFlag)this.url.password+=G;else this.url.username+=G}this.buffer=""}else if(isNaN(Y)||Y===p("/")||Y===p("?")||Y===p("#")||Z8(this.url)&&Y===p("\\")){if(this.atFlag&&this.buffer==="")return this.parseError=!0,q1;this.pointer-=EC(this.buffer)+1,this.buffer="",this.state="host"}else this.buffer+=X;return!0};R0.prototype["parse hostname"]=R0.prototype["parse host"]=function Z(Y,X){if(this.stateOverride&&this.url.scheme==="file")--this.pointer,this.state="file host";else if(Y===p(":")&&!this.arrFlag){if(this.buffer==="")return this.parseError=!0,q1;if(this.stateOverride==="hostname")return!1;const J=JV(this.buffer,XV(this.url));if(J===q1)return q1;this.url.host=J,this.buffer="",this.state="port"}else if(isNaN(Y)||Y===p("/")||Y===p("?")||Y===p("#")||Z8(this.url)&&Y===p("\\")){if(--this.pointer,Z8(this.url)&&this.buffer==="")return this.parseError=!0,q1;else if(this.stateOverride&&this.buffer===""&&(bC(this.url)||this.url.port!==null))return this.parseError=!0,!1;const J=JV(this.buffer,XV(this.url));if(J===q1)return q1;if(this.url.host=J,this.buffer="",this.state="path start",this.stateOverride)return!1}else{if(Y===p("["))this.arrFlag=!0;else if(Y===p("]"))this.arrFlag=!1;this.buffer+=X}return!0};R0.prototype["parse port"]=function Z(Y,X){if(Y8.isASCIIDigit(Y))this.buffer+=X;else if(isNaN(Y)||Y===p("/")||Y===p("?")||Y===p("#")||Z8(this.url)&&Y===p("\\")||this.stateOverride){if(this.buffer!==""){const J=parseInt(this.buffer);if(J>65535)return this.parseError=!0,q1;this.url.port=J===fC(this.url.scheme)?null:J,this.buffer=""}if(this.stateOverride)return!1;this.state="path start",--this.pointer}else return this.parseError=!0,q1;return!0};var FY1=new Set([p("/"),p("\\"),p("?"),p("#")]);R0.prototype["parse file"]=function Z(Y){if(this.url.scheme="file",this.url.host="",Y===p("/")||Y===p("\\")){if(Y===p("\\"))this.parseError=!0;this.state="file slash"}else if(this.base!==null&&this.base.scheme==="file"){if(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query,Y===p("?"))this.url.query="",this.state="query";else if(Y===p("#"))this.url.fragment="",this.state="fragment";else if(!isNaN(Y)){if(this.url.query=null,!vC(this.input,this.pointer))gC(this.url);else this.parseError=!0,this.url.path=[];this.state="path",--this.pointer}}else this.state="path",--this.pointer;return!0};R0.prototype["parse file slash"]=function Z(Y){if(Y===p("/")||Y===p("\\")){if(Y===p("\\"))this.parseError=!0;this.state="file host"}else{if(this.base!==null&&this.base.scheme==="file"){if(!vC(this.input,this.pointer)&&rZ1(this.base.path[0]))this.url.path.push(this.base.path[0]);this.url.host=this.base.host}this.state="path",--this.pointer}return!0};R0.prototype["parse file host"]=function Z(Y,X){if(isNaN(Y)||Y===p("/")||Y===p("\\")||Y===p("?")||Y===p("#"))if(--this.pointer,!this.stateOverride&&xC(this.buffer))this.parseError=!0,this.state="path";else if(this.buffer===""){if(this.url.host="",this.stateOverride)return!1;this.state="path start"}else{let J=JV(this.buffer,XV(this.url));if(J===q1)return q1;if(J==="localhost")J="";if(this.url.host=J,this.stateOverride)return!1;this.buffer="",this.state="path start"}else this.buffer+=X;return!0};R0.prototype["parse path start"]=function Z(Y){if(Z8(this.url)){if(Y===p("\\"))this.parseError=!0;if(this.state="path",Y!==p("/")&&Y!==p("\\"))--this.pointer}else if(!this.stateOverride&&Y===p("?"))this.url.query="",this.state="query";else if(!this.stateOverride&&Y===p("#"))this.url.fragment="",this.state="fragment";else if(Y!==void 0){if(this.state="path",Y!==p("/"))--this.pointer}else if(this.stateOverride&&this.url.host===null)this.url.path.push("");return!0};R0.prototype["parse path"]=function Z(Y){if(isNaN(Y)||Y===p("/")||Z8(this.url)&&Y===p("\\")||!this.stateOverride&&(Y===p("?")||Y===p("#"))){if(Z8(this.url)&&Y===p("\\"))this.parseError=!0;if(aZ1(this.buffer)){if(gC(this.url),Y!==p("/")&&!(Z8(this.url)&&Y===p("\\")))this.url.path.push("")}else if(OC(this.buffer)&&Y!==p("/")&&!(Z8(this.url)&&Y===p("\\")))this.url.path.push("");else if(!OC(this.buffer)){if(this.url.scheme==="file"&&this.url.path.length===0&&xC(this.buffer))this.buffer=`${this.buffer[0]}:`;this.url.path.push(this.buffer)}if(this.buffer="",Y===p("?"))this.url.query="",this.state="query";if(Y===p("#"))this.url.fragment="",this.state="fragment"}else{if(Y===p("%")&&(!Y8.isASCIIHex(this.input[this.pointer+1])||!Y8.isASCIIHex(this.input[this.pointer+2])))this.parseError=!0;this.buffer+=HG(Y,nZ1)}return!0};R0.prototype["parse opaque path"]=function Z(Y){if(Y===p("?"))this.url.query="",this.state="query";else if(Y===p("#"))this.url.fragment="",this.state="fragment";else{if(!isNaN(Y)&&Y!==p("%"))this.parseError=!0;if(Y===p("%")&&(!Y8.isASCIIHex(this.input[this.pointer+1])||!Y8.isASCIIHex(this.input[this.pointer+2])))this.parseError=!0;if(!isNaN(Y))this.url.path+=HG(Y,kC)}return!0};R0.prototype["parse query"]=function Z(Y,X){if(!Z8(this.url)||this.url.scheme==="ws"||this.url.scheme==="wss")this.encodingOverride="utf-8";if(!this.stateOverride&&Y===p("#")||isNaN(Y)){const J=Z8(this.url)?iZ1:pZ1;if(this.url.query+=FG(this.buffer,J),this.buffer="",Y===p("#"))this.url.fragment="",this.state="fragment"}else if(!isNaN(Y)){if(Y===p("%")&&(!Y8.isASCIIHex(this.input[this.pointer+1])||!Y8.isASCIIHex(this.input[this.pointer+2])))this.parseError=!0;this.buffer+=X}return!0};R0.prototype["parse fragment"]=function Z(Y){if(!isNaN(Y)){if(Y===p("%")&&(!Y8.isASCIIHex(this.input[this.pointer+1])||!Y8.isASCIIHex(this.input[this.pointer+2])))this.parseError=!0;this.url.fragment+=HG(Y,lZ1)}return!0};qY1.serializeURL=UY1;qY1.serializePath=GV;qY1.serializeURLOrigin=function(Z){switch(Z.scheme){case"blob":try{return qY1.serializeURLOrigin(qY1.parseURL(GV(Z)))}catch(Y){return"null"}case"ftp":case"http":case"https":case"ws":case"wss":return VY1({scheme:Z.scheme,host:Z.host,port:Z.port});case"file":return"null";default:return"null"}};qY1.basicURLParse=function(Z,Y){if(Y===void 0)Y={};const X=new R0(Z,Y.baseURL,Y.encodingOverride,Y.url,Y.stateOverride);if(X.failure)return null;return X.url};qY1.setTheUsername=function(Z,Y){Z.username=FG(Y,$V)};qY1.setThePassword=function(Z,Y){Z.password=FG(Y,$V)};qY1.serializeHost=WV;qY1.cannotHaveAUsernamePasswordPort=zY1;qY1.hasAnOpaquePath=qY;qY1.serializeInteger=function(Z){return String(Z)};qY1.parseURL=function(Z,Y){if(Y===void 0)Y={};return qY1.basicURLParse(Z,{baseURL:Y.baseURL,encodingOverride:Y.encodingOverride})}});var QV=w((sj1,iC)=>{var lC=function(Z){return Z.codePointAt(0)},IY1=function(Z){const Y=CY1(Z,lC("&")),X=[];for(let J of Y){if(J.length===0)continue;let $,W;const G=J.indexOf(lC("="));if(G>=0)$=J.slice(0,G),W=J.slice(G+1);else $=J,W=new Uint8Array(0);$=pC($,43,32),W=pC(W,43,32);const K=mC(uC($)),Q=mC(uC(W));X.push([K,Q])}return X},jY1=function(Z){return IY1(TY1(Z))},EY1=function(Z,Y=void 0){let X="utf-8";if(Y!==void 0)X=Y;let J="";for(let[$,W]of Z.entries()){const G=dC(W[0],cC,!0);let K=W[1];if(W.length>2&&W[2]!==void 0){if(W[2]==="hidden"&&G==="_charset_")K=X;else if(W[2]==="file")K=K.name}if(K=dC(K,cC,!0),$!==0)J+="&";J+=`${G}=${K}`}return J},CY1=function(Z,Y){const X=[];let J=0,$=Z.indexOf(Y);while($>=0)X.push(Z.slice(J,$)),J=$+1,$=Z.indexOf(Y,J);if(J!==Z.length)X.push(Z.slice(J));return X},pC=function(Z,Y,X){let J=Z.indexOf(Y);while(J>=0)Z[J]=X,J=Z.indexOf(Y,J+1);return Z},{utf8Encode:TY1,utf8DecodeWithoutBOM:mC}=KG(),{percentDecodeBytes:uC,utf8PercentEncodeString:dC,isURLEncodedPercentEncode:cC}=QG();iC.exports={parseUrlencodedString:jY1,serializeUrlencoded:EY1}});var aC=w((OY1)=>{var nC=$G(),UG=GG();OY1.convert=(Z,Y,{context:X="The provided value"}={})=>{if(typeof Y!=="function")throw new Z.TypeError(X+" is not a function");function J(...$){const W=UG.tryWrapperForImpl(this);let G;for(let K=0;K<$.length;K++)$[K]=UG.tryWrapperForImpl($[K]);return G=Reflect.apply(Y,W,$),G=nC.any(G,{context:X,globals:Z}),G}return J.construct=(...$)=>{for(let G=0;G<$.length;G++)$[G]=UG.tryWrapperForImpl($[G]);let W=Reflect.construct(Y,$);return W=nC.any(W,{context:X,globals:Z}),W},J[UG.wrapperSymbol]=Y,J.objectReference=Y,J}});var sC=w((kY1)=>{var zV=QV();kY1.implementation=class Z{constructor(Y,X,{doNotStripQMark:J=!1}){let $=X[0];if(this._list=[],this._url=null,!J&&typeof $==="string"&&$[0]==="?")$=$.slice(1);if(Array.isArray($))for(let W of $){if(W.length!==2)throw new TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence's element does not contain exactly two elements.");this._list.push([W[0],W[1]])}else if(typeof $==="object"&&Object.getPrototypeOf($)===null)for(let W of Object.keys($)){const G=$[W];this._list.push([W,G])}else this._list=zV.parseUrlencodedString($)}_updateSteps(){if(this._url!==null){let Y=zV.serializeUrlencoded(this._list);if(Y==="")Y=null;this._url._url.query=Y}}append(Y,X){this._list.push([Y,X]),this._updateSteps()}delete(Y){let X=0;while(X<this._list.length)if(this._list[X][0]===Y)this._list.splice(X,1);else X++;this._updateSteps()}get(Y){for(let X of this._list)if(X[0]===Y)return X[1];return null}getAll(Y){const X=[];for(let J of this._list)if(J[0]===Y)X.push(J[1]);return X}has(Y){for(let X of this._list)if(X[0]===Y)return!0;return!1}set(Y,X){let J=!1,$=0;while($<this._list.length)if(this._list[$][0]===Y)if(J)this._list.splice($,1);else J=!0,this._list[$][1]=X,$++;else $++;if(!J)this._list.push([Y,X]);this._updateSteps()}sort(){this._list.sort((Y,X)=>{if(Y[0]<X[0])return-1;if(Y[0]>X[0])return 1;return 0}),this._updateSteps()}[Symbol.iterator](){return this._list[Symbol.iterator]()}toString(){return zV.serializeUrlencoded(this._list)}}});var FV=w((yY1)=>{var oC=function(Z,Y){let X;if(Y!==void 0)X=Y.prototype;if(!a1.isObject(X))X=Z[tC].URLSearchParams.prototype;return Object.create(X)},h6=$G(),a1=GG(),xY1=aC(),rC=a1.newObjectInRealm,C0=a1.implSymbol,tC=a1.ctorRegistrySymbol;yY1.is=(Z)=>{return a1.isObject(Z)&&a1.hasOwn(Z,C0)&&Z[C0]instanceof Q5.implementation};yY1.isImpl=(Z)=>{return a1.isObject(Z)&&Z instanceof Q5.implementation};yY1.convert=(Z,Y,{context:X="The provided value"}={})=>{if(yY1.is(Y))return a1.implForWrapper(Y);throw new Z.TypeError(`${X} is not of type 'URLSearchParams'.`)};yY1.createDefaultIterator=(Z,Y,X)=>{const $=Z[tC]["URLSearchParams Iterator"],W=Object.create($);return Object.defineProperty(W,a1.iterInternalSymbol,{value:{target:Y,kind:X,index:0},configurable:!0}),W};yY1.create=(Z,Y,X)=>{const J=oC(Z);return yY1.setup(J,Z,Y,X)};yY1.createImpl=(Z,Y,X)=>{const J=yY1.create(Z,Y,X);return a1.implForWrapper(J)};yY1._internalSetup=(Z,Y)=>{};yY1.setup=(Z,Y,X=[],J={})=>{if(J.wrapper=Z,yY1._internalSetup(Z,Y),Object.defineProperty(Z,C0,{value:new Q5.implementation(Y,X,J),configurable:!0}),Z[C0][a1.wrapperSymbol]=Z,Q5.init)Q5.init(Z[C0]);return Z};yY1.new=(Z,Y)=>{const X=oC(Z,Y);if(yY1._internalSetup(X,Z),Object.defineProperty(X,C0,{value:Object.create(Q5.implementation.prototype),configurable:!0}),X[C0][a1.wrapperSymbol]=X,Q5.init)Q5.init(X[C0]);return X[C0]};var fY1=new Set(["Window","Worker"]);yY1.install=(Z,Y)=>{if(!Y.some(($)=>fY1.has($)))return;const X=a1.initCtorRegistry(Z);class J{constructor(){const $=[];{let W=arguments[0];if(W!==void 0)if(a1.isObject(W))if(W[Symbol.iterator]!==void 0)if(!a1.isObject(W))throw new Z.TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence is not an iterable object.");else{const G=[],K=W;for(let Q of K){if(!a1.isObject(Q))throw new Z.TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence's element is not an iterable object.");else{const z=[],H=Q;for(let F of H)F=h6.USVString(F,{context:"Failed to construct 'URLSearchParams': parameter 1 sequence's element's element",globals:Z}),z.push(F);Q=z}G.push(Q)}W=G}else if(!a1.isObject(W))throw new Z.TypeError("Failed to construct 'URLSearchParams': parameter 1 record is not an object.");else{const G=Object.create(null);for(let K of Reflect.ownKeys(W)){const Q=Object.getOwnPropertyDescriptor(W,K);if(Q&&Q.enumerable){let z=K;z=h6.USVString(z,{context:"Failed to construct 'URLSearchParams': parameter 1 record's key",globals:Z});let H=W[K];H=h6.USVString(H,{context:"Failed to construct 'URLSearchParams': parameter 1 record's value",globals:Z}),G[z]=H}}W=G}else W=h6.USVString(W,{context:"Failed to construct 'URLSearchParams': parameter 1",globals:Z});else W="";$.push(W)}return yY1.setup(Object.create(new.target.prototype),Z,$)}append($,W){const G=this!==null&&this!==void 0?this:Z;if(!yY1.is(G))throw new Z.TypeError("'append' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<2)throw new Z.TypeError(`Failed to execute 'append' on 'URLSearchParams': 2 arguments required, but only ${arguments.length} present.`);const K=[];{let Q=arguments[0];Q=h6.USVString(Q,{context:"Failed to execute 'append' on 'URLSearchParams': parameter 1",globals:Z}),K.push(Q)}{let Q=arguments[1];Q=h6.USVString(Q,{context:"Failed to execute 'append' on 'URLSearchParams': parameter 2",globals:Z}),K.push(Q)}return a1.tryWrapperForImpl(G[C0].append(...K))}delete($){const W=this!==null&&this!==void 0?this:Z;if(!yY1.is(W))throw new Z.TypeError("'delete' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new Z.TypeError(`Failed to execute 'delete' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);const G=[];{let K=arguments[0];K=h6.USVString(K,{context:"Failed to execute 'delete' on 'URLSearchParams': parameter 1",globals:Z}),G.push(K)}return a1.tryWrapperForImpl(W[C0].delete(...G))}get($){const W=this!==null&&this!==void 0?this:Z;if(!yY1.is(W))throw new Z.TypeError("'get' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new Z.TypeError(`Failed to execute 'get' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);const G=[];{let K=arguments[0];K=h6.USVString(K,{context:"Failed to execute 'get' on 'URLSearchParams': parameter 1",globals:Z}),G.push(K)}return W[C0].get(...G)}getAll($){const W=this!==null&&this!==void 0?this:Z;if(!yY1.is(W))throw new Z.TypeError("'getAll' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new Z.TypeError(`Failed to execute 'getAll' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);const G=[];{let K=arguments[0];K=h6.USVString(K,{context:"Failed to execute 'getAll' on 'URLSearchParams': parameter 1",globals:Z}),G.push(K)}return a1.tryWrapperForImpl(W[C0].getAll(...G))}has($){const W=this!==null&&this!==void 0?this:Z;if(!yY1.is(W))throw new Z.TypeError("'has' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new Z.TypeError(`Failed to execute 'has' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);const G=[];{let K=arguments[0];K=h6.USVString(K,{context:"Failed to execute 'has' on 'URLSearchParams': parameter 1",globals:Z}),G.push(K)}return W[C0].has(...G)}set($,W){const G=this!==null&&this!==void 0?this:Z;if(!yY1.is(G))throw new Z.TypeError("'set' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<2)throw new Z.TypeError(`Failed to execute 'set' on 'URLSearchParams': 2 arguments required, but only ${arguments.length} present.`);const K=[];{let Q=arguments[0];Q=h6.USVString(Q,{context:"Failed to execute 'set' on 'URLSearchParams': parameter 1",globals:Z}),K.push(Q)}{let Q=arguments[1];Q=h6.USVString(Q,{context:"Failed to execute 'set' on 'URLSearchParams': parameter 2",globals:Z}),K.push(Q)}return a1.tryWrapperForImpl(G[C0].set(...K))}sort(){const $=this!==null&&this!==void 0?this:Z;if(!yY1.is($))throw new Z.TypeError("'sort' called on an object that is not a valid instance of URLSearchParams.");return a1.tryWrapperForImpl($[C0].sort())}toString(){const $=this!==null&&this!==void 0?this:Z;if(!yY1.is($))throw new Z.TypeError("'toString' called on an object that is not a valid instance of URLSearchParams.");return $[C0].toString()}keys(){if(!yY1.is(this))throw new Z.TypeError("'keys' called on an object that is not a valid instance of URLSearchParams.");return yY1.createDefaultIterator(Z,this,"key")}values(){if(!yY1.is(this))throw new Z.TypeError("'values' called on an object that is not a valid instance of URLSearchParams.");return yY1.createDefaultIterator(Z,this,"value")}entries(){if(!yY1.is(this))throw new Z.TypeError("'entries' called on an object that is not a valid instance of URLSearchParams.");return yY1.createDefaultIterator(Z,this,"key+value")}forEach($){if(!yY1.is(this))throw new Z.TypeError("'forEach' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new Z.TypeError("Failed to execute 'forEach' on 'iterable': 1 argument required, but only 0 present.");$=xY1.convert(Z,$,{context:"Failed to execute 'forEach' on 'iterable': The callback provided as parameter 1"});const W=arguments[1];let G=Array.from(this[C0]),K=0;while(K<G.length){const[Q,z]=G[K].map(a1.tryWrapperForImpl);$.call(W,z,Q,this),G=Array.from(this[C0]),K++}}}Object.defineProperties(J.prototype,{append:{enumerable:!0},delete:{enumerable:!0},get:{enumerable:!0},getAll:{enumerable:!0},has:{enumerable:!0},set:{enumerable:!0},sort:{enumerable:!0},toString:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0},forEach:{enumerable:!0},[Symbol.toStringTag]:{value:"URLSearchParams",configurable:!0},[Symbol.iterator]:{value:J.prototype.entries,configurable:!0,writable:!0}}),X["URLSearchParams"]=J,X["URLSearchParams Iterator"]=Object.create(X["%IteratorPrototype%"],{[Symbol.toStringTag]:{configurable:!0,value:"URLSearchParams Iterator"}}),a1.define(X["URLSearchParams Iterator"],{next(){const $=this&&this[a1.iterInternalSymbol];if(!$)throw new Z.TypeError("next() called on a value that is not a URLSearchParams iterator object");const{target:W,kind:G,index:K}=$,Q=Array.from(W[C0]),z=Q.length;if(K>=z)return rC(Z,{value:void 0,done:!0});const H=Q[K];return $.index=K+1,rC(Z,a1.iteratorResult(H.map(a1.tryWrapperForImpl),G))}}),Object.defineProperty(Z,"URLSearchParams",{configurable:!0,writable:!0,value:J})};var Q5=sC()});var XO=w((dY1)=>{var Y0=KV(),YO=QV(),uY1=FV();dY1.implementation=class Z{constructor(Y,X){const J=X[0],$=X[1];let W=null;if($!==void 0){if(W=Y0.basicURLParse($),W===null)throw new TypeError(`Invalid base URL: ${$}`)}const G=Y0.basicURLParse(J,{baseURL:W});if(G===null)throw new TypeError(`Invalid URL: ${J}`);const K=G.query!==null?G.query:"";this._url=G,this._query=uY1.createImpl(Y,[K],{doNotStripQMark:!0}),this._query._url=this}get href(){return Y0.serializeURL(this._url)}set href(Y){const X=Y0.basicURLParse(Y);if(X===null)throw new TypeError(`Invalid URL: ${Y}`);this._url=X,this._query._list.splice(0);const{query:J}=X;if(J!==null)this._query._list=YO.parseUrlencodedString(J)}get origin(){return Y0.serializeURLOrigin(this._url)}get protocol(){return`${this._url.scheme}:`}set protocol(Y){Y0.basicURLParse(`${Y}:`,{url:this._url,stateOverride:"scheme start"})}get username(){return this._url.username}set username(Y){if(Y0.cannotHaveAUsernamePasswordPort(this._url))return;Y0.setTheUsername(this._url,Y)}get password(){return this._url.password}set password(Y){if(Y0.cannotHaveAUsernamePasswordPort(this._url))return;Y0.setThePassword(this._url,Y)}get host(){const Y=this._url;if(Y.host===null)return"";if(Y.port===null)return Y0.serializeHost(Y.host);return`${Y0.serializeHost(Y.host)}:${Y0.serializeInteger(Y.port)}`}set host(Y){if(Y0.hasAnOpaquePath(this._url))return;Y0.basicURLParse(Y,{url:this._url,stateOverride:"host"})}get hostname(){if(this._url.host===null)return"";return Y0.serializeHost(this._url.host)}set hostname(Y){if(Y0.hasAnOpaquePath(this._url))return;Y0.basicURLParse(Y,{url:this._url,stateOverride:"hostname"})}get port(){if(this._url.port===null)return"";return Y0.serializeInteger(this._url.port)}set port(Y){if(Y0.cannotHaveAUsernamePasswordPort(this._url))return;if(Y==="")this._url.port=null;else Y0.basicURLParse(Y,{url:this._url,stateOverride:"port"})}get pathname(){return Y0.serializePath(this._url)}set pathname(Y){if(Y0.hasAnOpaquePath(this._url))return;this._url.path=[],Y0.basicURLParse(Y,{url:this._url,stateOverride:"path start"})}get search(){if(this._url.query===null||this._url.query==="")return"";return`?${this._url.query}`}set search(Y){const X=this._url;if(Y===""){X.query=null,this._query._list=[];return}const J=Y[0]==="?"?Y.substring(1):Y;X.query="",Y0.basicURLParse(J,{url:X,stateOverride:"query"}),this._query._list=YO.parseUrlencodedString(J)}get searchParams(){return this._query}get hash(){if(this._url.fragment===null||this._url.fragment==="")return"";return`#${this._url.fragment}`}set hash(Y){if(Y===""){this._url.fragment=null;return}const X=Y[0]==="#"?Y.substring(1):Y;this._url.fragment="",Y0.basicURLParse(X,{url:this._url,stateOverride:"fragment"})}toJSON(){return this.href}}});var GO=w((iY1)=>{var JO=function(Z,Y){let X;if(Y!==void 0)X=Y.prototype;if(!L6.isObject(X))X=Z[lY1].URL.prototype;return Object.create(X)},m6=$G(),L6=GG(),f1=L6.implSymbol,lY1=L6.ctorRegistrySymbol;iY1.is=(Z)=>{return L6.isObject(Z)&&L6.hasOwn(Z,f1)&&Z[f1]instanceof z5.implementation};iY1.isImpl=(Z)=>{return L6.isObject(Z)&&Z instanceof z5.implementation};iY1.convert=(Z,Y,{context:X="The provided value"}={})=>{if(iY1.is(Y))return L6.implForWrapper(Y);throw new Z.TypeError(`${X} is not of type 'URL'.`)};iY1.create=(Z,Y,X)=>{const J=JO(Z);return iY1.setup(J,Z,Y,X)};iY1.createImpl=(Z,Y,X)=>{const J=iY1.create(Z,Y,X);return L6.implForWrapper(J)};iY1._internalSetup=(Z,Y)=>{};iY1.setup=(Z,Y,X=[],J={})=>{if(J.wrapper=Z,iY1._internalSetup(Z,Y),Object.defineProperty(Z,f1,{value:new z5.implementation(Y,X,J),configurable:!0}),Z[f1][L6.wrapperSymbol]=Z,z5.init)z5.init(Z[f1]);return Z};iY1.new=(Z,Y)=>{const X=JO(Z,Y);if(iY1._internalSetup(X,Z),Object.defineProperty(X,f1,{value:Object.create(z5.implementation.prototype),configurable:!0}),X[f1][L6.wrapperSymbol]=X,z5.init)z5.init(X[f1]);return X[f1]};var pY1=new Set(["Window","Worker"]);iY1.install=(Z,Y)=>{if(!Y.some(($)=>pY1.has($)))return;const X=L6.initCtorRegistry(Z);class J{constructor($){if(arguments.length<1)throw new Z.TypeError(`Failed to construct 'URL': 1 argument required, but only ${arguments.length} present.`);const W=[];{let G=arguments[0];G=m6.USVString(G,{context:"Failed to construct 'URL': parameter 1",globals:Z}),W.push(G)}{let G=arguments[1];if(G!==void 0)G=m6.USVString(G,{context:"Failed to construct 'URL': parameter 2",globals:Z});W.push(G)}return iY1.setup(Object.create(new.target.prototype),Z,W)}toJSON(){const $=this!==null&&this!==void 0?this:Z;if(!iY1.is($))throw new Z.TypeError("'toJSON' called on an object that is not a valid instance of URL.");return $[f1].toJSON()}get href(){const $=this!==null&&this!==void 0?this:Z;if(!iY1.is($))throw new Z.TypeError("'get href' called on an object that is not a valid instance of URL.");return $[f1].href}set href($){const W=this!==null&&this!==void 0?this:Z;if(!iY1.is(W))throw new Z.TypeError("'set href' called on an object that is not a valid instance of URL.");$=m6.USVString($,{context:"Failed to set the 'href' property on 'URL': The provided value",globals:Z}),W[f1].href=$}toString(){const $=this;if(!iY1.is($))throw new Z.TypeError("'toString' called on an object that is not a valid instance of URL.");return $[f1].href}get origin(){const $=this!==null&&this!==void 0?this:Z;if(!iY1.is($))throw new Z.TypeError("'get origin' called on an object that is not a valid instance of URL.");return $[f1].origin}get protocol(){const $=this!==null&&this!==void 0?this:Z;if(!iY1.is($))throw new Z.TypeError("'get protocol' called on an object that is not a valid instance of URL.");return $[f1].protocol}set protocol($){const W=this!==null&&this!==void 0?this:Z;if(!iY1.is(W))throw new Z.TypeError("'set protocol' called on an object that is not a valid instance of URL.");$=m6.USVString($,{context:"Failed to set the 'protocol' property on 'URL': The provided value",globals:Z}),W[f1].protocol=$}get username(){const $=this!==null&&this!==void 0?this:Z;if(!iY1.is($))throw new Z.TypeError("'get username' called on an object that is not a valid instance of URL.");return $[f1].username}set username($){const W=this!==null&&this!==void 0?this:Z;if(!iY1.is(W))throw new Z.TypeError("'set username' called on an object that is not a valid instance of URL.");$=m6.USVString($,{context:"Failed to set the 'username' property on 'URL': The provided value",globals:Z}),W[f1].username=$}get password(){const $=this!==null&&this!==void 0?this:Z;if(!iY1.is($))throw new Z.TypeError("'get password' called on an object that is not a valid instance of URL.");return $[f1].password}set password($){const W=this!==null&&this!==void 0?this:Z;if(!iY1.is(W))throw new Z.TypeError("'set password' called on an object that is not a valid instance of URL.");$=m6.USVString($,{context:"Failed to set the 'password' property on 'URL': The provided value",globals:Z}),W[f1].password=$}get host(){const $=this!==null&&this!==void 0?this:Z;if(!iY1.is($))throw new Z.TypeError("'get host' called on an object that is not a valid instance of URL.");return $[f1].host}set host($){const W=this!==null&&this!==void 0?this:Z;if(!iY1.is(W))throw new Z.TypeError("'set host' called on an object that is not a valid instance of URL.");$=m6.USVString($,{context:"Failed to set the 'host' property on 'URL': The provided value",globals:Z}),W[f1].host=$}get hostname(){const $=this!==null&&this!==void 0?this:Z;if(!iY1.is($))throw new Z.TypeError("'get hostname' called on an object that is not a valid instance of URL.");return $[f1].hostname}set hostname($){const W=this!==null&&this!==void 0?this:Z;if(!iY1.is(W))throw new Z.TypeError("'set hostname' called on an object that is not a valid instance of URL.");$=m6.USVString($,{context:"Failed to set the 'hostname' property on 'URL': The provided value",globals:Z}),W[f1].hostname=$}get port(){const $=this!==null&&this!==void 0?this:Z;if(!iY1.is($))throw new Z.TypeError("'get port' called on an object that is not a valid instance of URL.");return $[f1].port}set port($){const W=this!==null&&this!==void 0?this:Z;if(!iY1.is(W))throw new Z.TypeError("'set port' called on an object that is not a valid instance of URL.");$=m6.USVString($,{context:"Failed to set the 'port' property on 'URL': The provided value",globals:Z}),W[f1].port=$}get pathname(){const $=this!==null&&this!==void 0?this:Z;if(!iY1.is($))throw new Z.TypeError("'get pathname' called on an object that is not a valid instance of URL.");return $[f1].pathname}set pathname($){const W=this!==null&&this!==void 0?this:Z;if(!iY1.is(W))throw new Z.TypeError("'set pathname' called on an object that is not a valid instance of URL.");$=m6.USVString($,{context:"Failed to set the 'pathname' property on 'URL': The provided value",globals:Z}),W[f1].pathname=$}get search(){const $=this!==null&&this!==void 0?this:Z;if(!iY1.is($))throw new Z.TypeError("'get search' called on an object that is not a valid instance of URL.");return $[f1].search}set search($){const W=this!==null&&this!==void 0?this:Z;if(!iY1.is(W))throw new Z.TypeError("'set search' called on an object that is not a valid instance of URL.");$=m6.USVString($,{context:"Failed to set the 'search' property on 'URL': The provided value",globals:Z}),W[f1].search=$}get searchParams(){const $=this!==null&&this!==void 0?this:Z;if(!iY1.is($))throw new Z.TypeError("'get searchParams' called on an object that is not a valid instance of URL.");return L6.getSameObject(this,"searchParams",()=>{return L6.tryWrapperForImpl($[f1].searchParams)})}get hash(){const $=this!==null&&this!==void 0?this:Z;if(!iY1.is($))throw new Z.TypeError("'get hash' called on an object that is not a valid instance of URL.");return $[f1].hash}set hash($){const W=this!==null&&this!==void 0?this:Z;if(!iY1.is(W))throw new Z.TypeError("'set hash' called on an object that is not a valid instance of URL.");$=m6.USVString($,{context:"Failed to set the 'hash' property on 'URL': The provided value",globals:Z}),W[f1].hash=$}}if(Object.defineProperties(J.prototype,{toJSON:{enumerable:!0},href:{enumerable:!0},toString:{enumerable:!0},origin:{enumerable:!0},protocol:{enumerable:!0},username:{enumerable:!0},password:{enumerable:!0},host:{enumerable:!0},hostname:{enumerable:!0},port:{enumerable:!0},pathname:{enumerable:!0},search:{enumerable:!0},searchParams:{enumerable:!0},hash:{enumerable:!0},[Symbol.toStringTag]:{value:"URL",configurable:!0}}),X["URL"]=J,Object.defineProperty(Z,"URL",{configurable:!0,writable:!0,value:J}),Y.includes("Window"))Object.defineProperty(Z,"webkitURL",{configurable:!0,writable:!0,value:J})};var z5=XO()});var KO=w((ZX1)=>{var oY1=GO(),eY1=FV();ZX1.URL=oY1;ZX1.URLSearchParams=eY1});var zO=w((WX1)=>{var{URL:JX1,URLSearchParams:$X1}=KO(),U7=KV(),QO=QG(),qG={Array,Object,Promise,String,TypeError};JX1.install(qG,["Window"]);$X1.install(qG,["Window"]);WX1.URL=qG.URL;WX1.URLSearchParams=qG.URLSearchParams;WX1.parseURL=U7.parseURL;WX1.basicURLParse=U7.basicURLParse;WX1.serializeURL=U7.serializeURL;WX1.serializePath=U7.serializePath;WX1.serializeHost=U7.serializeHost;WX1.serializeInteger=U7.serializeInteger;WX1.serializeURLOrigin=U7.serializeURLOrigin;WX1.setTheUsername=U7.setTheUsername;WX1.setThePassword=U7.setThePassword;WX1.cannotHaveAUsernamePasswordPort=U7.cannotHaveAUsernamePasswordPort;WX1.hasAnOpaquePath=U7.hasAnOpaquePath;WX1.percentDecodeString=QO.percentDecodeString;WX1.percentDecodeBytes=QO.percentDecodeBytes});var FO=w((u6)=>{var TX1=function(Z,Y){var X,J;const $=Z.clone(),W=(X=Y===null||Y===void 0?void 0:Y.replacementString)!==null&&X!==void 0?X:"_credentials_",G=(J=Y===null||Y===void 0?void 0:Y.redactUsernames)!==null&&J!==void 0?J:!0;if(($.username||$.password)&&G)$.username=W,$.password="";else if($.password)$.password=W;if($.searchParams.has("authMechanismProperties")){const K=new HO.CommaAndColonSeparatedRecord($.searchParams.get("authMechanismProperties"));if(K.get("AWS_SESSION_TOKEN"))K.set("AWS_SESSION_TOKEN",W),$.searchParams.set("authMechanismProperties",K.toString())}if($.searchParams.has("tlsCertificateKeyFilePassword"))$.searchParams.set("tlsCertificateKeyFilePassword",W);if($.searchParams.has("proxyUsername")&&G)$.searchParams.set("proxyUsername",W);if($.searchParams.has("proxyPassword"))$.searchParams.set("proxyPassword",W);return $},IX1=function(Z,Y){var X,J;const $=(X=Y===null||Y===void 0?void 0:Y.replacementString)!==null&&X!==void 0?X:"<credentials>",W=(J=Y===null||Y===void 0?void 0:Y.redactUsernames)!==null&&J!==void 0?J:!0;let G;try{G=new HO.default(Z)}catch(z){}if(G)return Y={...Y,replacementString:"___credentials___"},G.redact(Y).toString().replace(/___credentials___/g,$);const K=$,Q=[(z)=>z.replace(W?/(\/\/)(.*)(@)/g:/(\/\/[^@]*:)(.*)(@)/g,`\$1${K}\$3`),(z)=>z.replace(/(AWS_SESSION_TOKEN(:|%3A))([^,&]+)/gi,`\$1${K}`),(z)=>z.replace(/(tlsCertificateKeyFilePassword=)([^&]+)/gi,`\$1${K}`),(z)=>W?z.replace(/(proxyUsername=)([^&]+)/gi,`\$1${K}`):z,(z)=>z.replace(/(proxyPassword=)([^&]+)/gi,`\$1${K}`)];for(let z of Q)Z=z(Z);return Z},AX1=u6&&u6.__createBinding||(Object.create?function(Z,Y,X,J){if(J===void 0)J=X;var $=Object.getOwnPropertyDescriptor(Y,X);if(!$||("get"in $?!Y.__esModule:$.writable||$.configurable))$={enumerable:!0,get:function(){return Y[X]}};Object.defineProperty(Z,J,$)}:function(Z,Y,X,J){if(J===void 0)J=X;Z[J]=Y[X]}),DX1=u6&&u6.__setModuleDefault||(Object.create?function(Z,Y){Object.defineProperty(Z,"default",{enumerable:!0,value:Y})}:function(Z,Y){Z.default=Y}),PX1=u6&&u6.__importStar||function(Z){if(Z&&Z.__esModule)return Z;var Y={};if(Z!=null){for(var X in Z)if(X!=="default"&&Object.prototype.hasOwnProperty.call(Z,X))AX1(Y,Z,X)}return DX1(Y,Z),Y};Object.defineProperty(u6,"__esModule",{value:!0});u6.redactConnectionString=u6.redactValidConnectionString=void 0;var HO=PX1(VV());u6.redactValidConnectionString=TX1;u6.redactConnectionString=IX1});var VV=w((LV)=>{var EX1=function(Z){return Z.startsWith("mongodb://")||Z.startsWith("mongodb+srv://")},OX1=function(Z){return class Y extends Z{append(X,J){return super.append(this._normalizeKey(X),J)}delete(X){return super.delete(this._normalizeKey(X))}get(X){return super.get(this._normalizeKey(X))}getAll(X){return super.getAll(this._normalizeKey(X))}has(X){return super.has(this._normalizeKey(X))}set(X,J){return super.set(this._normalizeKey(X),J)}keys(){return super.keys()}values(){return super.values()}entries(){return super.entries()}[Symbol.iterator](){return super[Symbol.iterator]()}_normalizeKey(X){return qV.prototype._normalizeKey.call(this,X)}}};Object.defineProperty(LV,"__esModule",{value:!0});LV.CommaAndColonSeparatedRecord=LV.ConnectionString=LV.redactConnectionString=void 0;var jX1=zO(),UO=FO();Object.defineProperty(LV,"redactConnectionString",{enumerable:!0,get:function(){return UO.redactConnectionString}});var cJ="__this_is_a_placeholder__",CX1=/^(?<protocol>[^/]+):\/\/(?:(?<username>[^:@]*)(?::(?<password>[^@]*))?@)?(?<hosts>(?!:)[^/?@]*)(?<rest>.*)/;class qV extends Map{delete(Z){return super.delete(this._normalizeKey(Z))}get(Z){return super.get(this._normalizeKey(Z))}has(Z){return super.has(this._normalizeKey(Z))}set(Z,Y){return super.set(this._normalizeKey(Z),Y)}_normalizeKey(Z){Z=`${Z}`;for(let Y of this.keys())if(Y.toLowerCase()===Z.toLowerCase()){Z=Y;break}return Z}}class VO extends jX1.URL{}class v7 extends Error{get name(){return"MongoParseError"}}class lJ extends VO{constructor(Z,Y={}){var X;const{looseValidation:J}=Y;if(!J&&!EX1(Z))throw new v7('Invalid scheme, expected connection string to start with "mongodb://" or "mongodb+srv://"');const $=Z.match(CX1);if(!$)throw new v7(`Invalid connection string "${Z}"`);const{protocol:W,username:G,password:K,hosts:Q,rest:z}=(X=$.groups)!==null&&X!==void 0?X:{};if(!J){if(!W||!Q)throw new v7(`Protocol and host list are required in "${Z}"`);try{decodeURIComponent(G!==null&&G!==void 0?G:""),decodeURIComponent(K!==null&&K!==void 0?K:"")}catch(U){throw new v7(U.message)}const F=/[:/?#[\]@]/gi;if(G===null||G===void 0?void 0:G.match(F))throw new v7(`Username contains unescaped characters ${G}`);if(!G||!K){const U=Z.replace(`${W}://`,"");if(U.startsWith("@")||U.startsWith(":"))throw new v7("URI contained empty userinfo section")}if(K===null||K===void 0?void 0:K.match(F))throw new v7("Password contains unescaped characters")}let H="";if(typeof G==="string")H+=G;if(typeof K==="string")H+=`:${K}`;if(H)H+="@";try{super(`${W.toLowerCase()}://${H}${cJ}${z}`)}catch(F){if(J)new lJ(Z,{...Y,looseValidation:!1});if(typeof F.message==="string")F.message=F.message.replace(cJ,Q);throw F}if(this._hosts=Q.split(","),!J){if(this.isSRV&&this.hosts.length!==1)throw new v7("mongodb+srv URI cannot have multiple service names");if(this.isSRV&&this.hosts.some((F)=>F.includes(":")))throw new v7("mongodb+srv URI cannot have port number")}if(!this.pathname)this.pathname="/";Object.setPrototypeOf(this.searchParams,OX1(this.searchParams.constructor).prototype)}get host(){return cJ}set host(Z){throw new Error("No single host for connection string")}get hostname(){return cJ}set hostname(Z){throw new Error("No single host for connection string")}get port(){return""}set port(Z){throw new Error("No single host for connection string")}get href(){return this.toString()}set href(Z){throw new Error("Cannot set href for connection strings")}get isSRV(){return this.protocol.includes("srv")}get hosts(){return this._hosts}set hosts(Z){this._hosts=Z}toString(){return super.toString().replace(cJ,this.hosts.join(","))}clone(){return new lJ(this.toString(),{looseValidation:!0})}redact(Z){return(0,UO.redactValidConnectionString)(this,Z)}typedSearchParams(){return this.searchParams}[Symbol.for("nodejs.util.inspect.custom")](){const{href:Z,origin:Y,protocol:X,username:J,password:$,hosts:W,pathname:G,search:K,searchParams:Q,hash:z}=this;return{href:Z,origin:Y,protocol:X,username:J,password:$,hosts:W,pathname:G,search:K,searchParams:Q,hash:z}}}LV.ConnectionString=lJ;class qO extends qV{constructor(Z){super();for(let Y of(Z!==null&&Z!==void 0?Z:"").split(",")){if(!Y)continue;const X=Y.indexOf(":");if(X===-1)this.set(Y,"");else this.set(Y.slice(0,X),Y.slice(X+1))}}toString(){return[...this].map((Z)=>Z.join(":")).join(",")}}LV.CommaAndColonSeparatedRecord=qO;LV.default=lJ});var wO=w((GE1,_X1)=>{_X1.exports={name:"mongodb",version:"6.2.0",description:"The official MongoDB driver for Node.js",main:"lib/index.js",files:["lib","src","etc/prepare.js","mongodb.d.ts","tsconfig.json"],types:"mongodb.d.ts",repository:{type:"git",url:"git@github.com:mongodb/node-mongodb-native.git"},keywords:["mongodb","driver","official"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},dependencies:{"@mongodb-js/saslprep":"^1.1.0",bson:"^6.2.0","mongodb-connection-string-url":"^2.6.0"},peerDependencies:{"@aws-sdk/credential-providers":"^3.188.0","@mongodb-js/zstd":"^1.1.0","gcp-metadata":"^5.2.0",kerberos:"^2.0.1","mongodb-client-encryption":">=6.0.0 <7",snappy:"^7.2.2",socks:"^2.7.1"},peerDependenciesMeta:{"@aws-sdk/credential-providers":{optional:!0},"@mongodb-js/zstd":{optional:!0},kerberos:{optional:!0},snappy:{optional:!0},"mongodb-client-encryption":{optional:!0},"gcp-metadata":{optional:!0},socks:{optional:!0}},devDependencies:{"@iarna/toml":"^2.2.5","@istanbuljs/nyc-config-typescript":"^1.0.2","@microsoft/api-extractor":"^7.36.4","@microsoft/tsdoc-config":"^0.16.2","@mongodb-js/zstd":"^1.1.0","@octokit/core":"^4.2.4","@types/chai":"^4.3.5","@types/chai-subset":"^1.3.3","@types/express":"^4.17.17","@types/kerberos":"^1.1.2","@types/mocha":"^10.0.1","@types/node":"^20.5.9","@types/saslprep":"^1.0.1","@types/semver":"^7.5.0","@types/sinon":"^10.0.16","@types/sinon-chai":"^3.2.9","@types/whatwg-url":"^11.0.0","@typescript-eslint/eslint-plugin":"^5.62.0","@typescript-eslint/parser":"^5.62.0",chai:"^4.3.7","chai-subset":"^1.6.0",chalk:"^4.1.2",eslint:"^8.48.0","eslint-config-prettier":"^8.10.0","eslint-plugin-import":"^2.28.1","eslint-plugin-prettier":"^4.2.1","eslint-plugin-simple-import-sort":"^10.0.0","eslint-plugin-tsdoc":"^0.2.17","eslint-plugin-unused-imports":"^2.0.0",express:"^4.18.2","gcp-metadata":"^5.2.0","js-yaml":"^4.1.0",mocha:"^10.2.0","mocha-sinon":"^2.1.2","mongodb-client-encryption":"^6.0.0","mongodb-legacy":"^6.0.0",nyc:"^15.1.0",prettier:"^2.8.8",semver:"^7.5.4",sinon:"^15.2.0","sinon-chai":"^3.7.0",snappy:"^7.2.2",socks:"^2.7.1","source-map-support":"^0.5.21","ts-node":"^10.9.1",tsd:"^0.28.1",typescript:"^5.0.4","typescript-cached-transpile":"^0.0.6","v8-heapsnapshot":"^1.3.1",yargs:"^17.7.2"},license:"Apache-2.0",engines:{node:">=16.20.1"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},homepage:"https://github.com/mongodb/node-mongodb-native",scripts:{"build:evergreen":"node .evergreen/generate_evergreen_tasks.js","build:ts":"node ./node_modules/typescript/bin/tsc","build:dts":"npm run build:ts && api-extractor run && node etc/clean_definition_files.cjs && eslint mongodb.d.ts --fix","build:docs":"./etc/docs/build.ts","build:typedoc":"typedoc","build:nightly":"node ./.github/scripts/nightly.mjs","check:bench":"node test/benchmarks/driverBench","check:coverage":"nyc npm run test:all","check:integration-coverage":"nyc npm run check:test","check:lambda":"mocha --config test/mocha_lambda.json test/integration/node-specific/examples/handler.test.js","check:lambda:aws":"mocha --config test/mocha_lambda.json test/integration/node-specific/examples/aws_handler.test.js","check:lint":"npm run build:dts && npm run check:dts && npm run check:eslint && npm run check:tsd","check:eslint":"eslint -v && eslint --max-warnings=0 --ext '.js,.ts' src test","check:tsd":"tsd --version && tsd","check:dependencies":"mocha test/action/dependency.test.ts","check:dts":"node ./node_modules/typescript/bin/tsc --noEmit mongodb.d.ts && tsd","check:search-indexes":"nyc mocha --config test/mocha_mongodb.json test/manual/search-index-management.prose.test.ts","check:test":"mocha --config test/mocha_mongodb.json test/integration","check:unit":"mocha test/unit","check:ts":"node ./node_modules/typescript/bin/tsc -v && node ./node_modules/typescript/bin/tsc --noEmit","check:atlas":"mocha --config test/manual/mocharc.json test/manual/atlas_connectivity.test.js","check:drivers-atlas-testing":"mocha --config test/mocha_mongodb.json test/atlas/drivers_atlas_testing.test.ts","check:adl":"mocha --config test/mocha_mongodb.json test/manual/atlas-data-lake-testing","check:aws":"nyc mocha --config test/mocha_mongodb.json test/integration/auth/mongodb_aws.test.ts","check:oidc":"mocha --config test/mocha_mongodb.json test/manual/mongodb_oidc.prose.test.ts","check:oidc-azure":"mocha --config test/mocha_mongodb.json test/integration/auth/mongodb_oidc_azure.prose.test.ts","check:ocsp":"mocha --config test/manual/mocharc.json test/manual/ocsp_support.test.js","check:kerberos":"nyc mocha --config test/manual/mocharc.json test/manual/kerberos.test.ts","check:tls":"mocha --config test/manual/mocharc.json test/manual/tls_support.test.ts","check:ldap":"nyc mocha --config test/manual/mocharc.json test/manual/ldap.test.js","check:socks5":"mocha --config test/manual/mocharc.json test/manual/socks5.test.ts","check:csfle":"mocha --config test/mocha_mongodb.json test/integration/client-side-encryption","check:snappy":"mocha test/unit/assorted/snappy.test.js","fix:eslint":"npm run check:eslint -- --fix",prepare:"node etc/prepare.js","preview:docs":"ts-node etc/docs/preview.ts",test:"npm run check:lint && npm run test:all","test:all":"npm run check:unit && npm run check:test","update:docs":"npm run build:docs -- --yes"},tsd:{directory:"test/types",compilerOptions:{strict:!0,target:"esnext",module:"commonjs",moduleResolution:"node"}}}});var DO=w((NO)=>{var xX1=function(Z){const Y=new wV(512),{appName:X=""}=Z;if(X.length>0){const H=Buffer.byteLength(X,"utf8")<=128?Z.appName:Buffer.from(X,"utf8").subarray(0,128).toString("utf8");Y.ifItFitsItSits("application",{name:H})}const{name:J="",version:$="",platform:W=""}=Z.driverInfo,G={name:J.length>0?`nodejs|${J}`:"nodejs",version:$.length>0?`${MO}|${$}`:MO};if(!Y.ifItFitsItSits("driver",G))throw new RO.MongoInvalidArgumentError("Unable to include driverInfo name and version, metadata cannot exceed 512 bytes");let K=fX1();if(W.length>0)K=`${K}|${W}`;if(!Y.ifItFitsItSits("platform",K))throw new RO.MongoInvalidArgumentError("Unable to include driverInfo platform, metadata cannot exceed 512 bytes");const Q=(new Map()).set("name",LG.platform).set("architecture",LG.arch).set("version",pJ.release()).set("type",pJ.type());if(!Y.ifItFitsItSits("os",Q))for(let H of Q.keys()){if(Q.delete(H),Q.size===0)break;if(Y.ifItFitsItSits("os",Q))break}const z=BO();if(z!=null){if(!Y.ifItFitsItSits("env",z))for(let H of z.keys()){if(z.delete(H),z.size===0)break;if(Y.ifItFitsItSits("env",z))break}}return Y.toObject()},BO=function(){const{AWS_EXECUTION_ENV:Z="",AWS_LAMBDA_RUNTIME_API:Y="",FUNCTIONS_WORKER_RUNTIME:X="",K_SERVICE:J="",FUNCTION_NAME:$="",VERCEL:W="",AWS_LAMBDA_FUNCTION_MEMORY_SIZE:G="",AWS_REGION:K="",FUNCTION_MEMORY_MB:Q="",FUNCTION_REGION:z="",FUNCTION_TIMEOUT_SEC:H="",VERCEL_REGION:F=""}=LG.env,U=Z.startsWith("AWS_Lambda_")||Y.length>0,V=X.length>0,q=J.length>0||$.length>0,L=W.length>0,R=new Map;if(L&&!(V||q)){if(F.length>0)R.set("region",F);return R.set("name","vercel"),R}if(U&&!(V||q||L)){if(K.length>0)R.set("region",K);if(G.length>0&&Number.isInteger(+G))R.set("memory_mb",new LY.Int32(G));return R.set("name","aws.lambda"),R}if(V&&!(q||U||L))return R.set("name","azure.func"),R;if(q&&!(V||U||L)){if(z.length>0)R.set("region",z);if(Q.length>0&&Number.isInteger(+Q))R.set("memory_mb",new LY.Int32(Q));if(H.length>0&&Number.isInteger(+H))R.set("timeout_sec",new LY.Int32(H));return R.set("name","gcp.func"),R}return null},fX1=function(){if("Deno"in globalThis)return`Deno v${typeof Deno?.version?.deno==="string"?Deno?.version?.deno:"0.0.0-unknown"}, ${pJ.endianness()}`;if("Bun"in globalThis)return`Bun v${typeof Bun?.version==="string"?Bun?.version:"0.0.0-unknown"}, ${pJ.endianness()}`;return`Node.js ${LG.version}, ${pJ.endianness()}`};Object.defineProperty(NO,"__esModule",{value:!0});NO.getFAASEnv=NO.makeClientMetadata=NO.LimitedSizeDocument=void 0;var pJ=import.meta.require("os"),LG=import.meta.require("process"),LY=Z0(),RO=r(),MO=wO().version;class wV{constructor(Z){this.maxSize=Z,this.document=new Map,this.documentSize=5}ifItFitsItSits(Z,Y){const X=LY.BSON.serialize((new Map()).set(Z,Y)).byteLength-5;if(X+this.documentSize>this.maxSize)return!1;return this.documentSize+=X,this.document.set(Z,Y),!0}toObject(){return LY.BSON.deserialize(LY.BSON.serialize(this.document),{promoteLongs:!1,promoteBuffers:!1,promoteValues:!1,useBigInt64:!1})}}NO.LimitedSizeDocument=wV;NO.makeClientMetadata=xX1;NO.getFAASEnv=BO});var RG=w((CO)=>{var jO=function(){if(B9==null){const Z=(0,TO.getSnappy)();if("kModuleError"in Z)throw Z.kModuleError;B9=Z}return B9};async function uX1(Z,Y){const X={};switch(Z.agreedCompressor){case"snappy":return B9??=jO(),B9.compress(Y);case"zstd":{if(EO(),("kModuleError"in F5))throw F5.kModuleError;return F5.compress(Y,vX1)}case"zlib":{if(Z.zlibCompressionLevel)X.level=Z.zlibCompressionLevel;return mX1(Y,X)}default:throw new IO.MongoInvalidArgumentError(`Unknown compressor ${Z.agreedCompressor} failed to compress`)}}async function dX1(Z,Y){if(Z!==CO.Compressor.snappy&&Z!==CO.Compressor.zstd&&Z!==CO.Compressor.zlib&&Z!==CO.Compressor.none)throw new IO.MongoDecompressionError(`Server sent message compressed using an unsupported compressor. (Received compressor ID ${Z})`);switch(Z){case CO.Compressor.snappy:return B9??=jO(),B9.uncompress(Y,{asBuffer:!0});case CO.Compressor.zstd:{if(EO(),("kModuleError"in F5))throw F5.kModuleError;return F5.decompress(Y)}case CO.Compressor.zlib:return hX1(Y);default:return Y}}var EO=function(){if(!F5)F5=(0,TO.getZstdLibrary)()};Object.defineProperty(CO,"__esModule",{value:!0});CO.decompress=CO.compress=CO.uncompressibleCommands=CO.Compressor=void 0;var PO=import.meta.require("util"),wG=import.meta.require("zlib"),bX1=c0(),TO=F7(),IO=r();CO.Compressor=Object.freeze({none:0,snappy:1,zlib:2,zstd:3});CO.uncompressibleCommands=new Set([bX1.LEGACY_HELLO_COMMAND,"saslStart","saslContinue","getnonce","authenticate","createUser","updateUser","copydbSaslStart","copydbgetnonce","copydb"]);var vX1=3,hX1=(0,PO.promisify)(wG.inflate.bind(wG)),mX1=(0,PO.promisify)(wG.deflate.bind(wG)),F5,B9=null;CO.compress=uX1;CO.decompress=dX1});var MV=w((SO)=>{var nJ=function(Z,Y){return function(X,J,$,W){let G;try{const K=iJ[Z](Y,X,J);K.setAutoPadding(!1),G=K.update($);const Q=K.final();if(Q.length>0)G=Buffer.concat([G,Q])}catch(K){return K}return G.copy(W),G.length}},pX1=function(Z,Y){try{iJ.randomFillSync(Z,0,Y)}catch(X){return X}return Y},iX1=function(Z,Y){let X;try{X=iJ.createHash("sha256").update(Z).digest()}catch(J){return J}return X.copy(Y),X.length},RV=function(Z){return(Y,X,J)=>{let $;try{$=iJ.createHmac(Z,Y).update(X).digest()}catch(W){return W}return $.copy(J),$.length}},nX1=function(Z,Y,X){let J;try{const $=iJ.createSign("sha256WithRSAEncryption"),W=Buffer.from(`-----BEGIN PRIVATE KEY-----\n${Z.toString("base64")}\n-----END PRIVATE KEY-----\n`);J=$.update(Y).end().sign(W)}catch($){return $}return J.copy(X),J.length};Object.defineProperty(SO,"__esModule",{value:!0});SO.hmacSha256Hook=SO.hmacSha512Hook=SO.aes256CtrDecryptHook=SO.aes256CtrEncryptHook=SO.aes256CbcDecryptHook=SO.aes256CbcEncryptHook=SO.signRsaSha256Hook=SO.makeHmacHook=SO.sha256Hook=SO.randomHook=SO.makeAES256Hook=void 0;var iJ=import.meta.require("crypto");SO.makeAES256Hook=nJ;SO.randomHook=pX1;SO.sha256Hook=iX1;SO.makeHmacHook=RV;SO.signRsaSha256Hook=nX1;SO.aes256CbcEncryptHook=nJ("createCipheriv","aes-256-cbc");SO.aes256CbcDecryptHook=nJ("createDecipheriv","aes-256-cbc");SO.aes256CtrEncryptHook=nJ("createCipheriv","aes-256-ctr");SO.aes256CtrDecryptHook=nJ("createDecipheriv","aes-256-ctr");SO.hmacSha512Hook=RV("sha512");SO.hmacSha256Hook=RV("sha256")});var A9=w((bO)=>{Object.defineProperty(bO,"__esModule",{value:!0});bO.MongoCryptKMSRequestNetworkTimeoutError=bO.MongoCryptAzureKMSRequestError=bO.MongoCryptCreateEncryptedCollectionError=bO.MongoCryptCreateDataKeyError=bO.MongoCryptInvalidArgumentError=bO.MongoCryptError=void 0;var $J1=r();class N9 extends $J1.MongoError{constructor(Z,Y={}){super(Z,Y)}get name(){return"MongoCryptError"}}bO.MongoCryptError=N9;class _O extends N9{constructor(Z){super(Z)}get name(){return"MongoCryptInvalidArgumentError"}}bO.MongoCryptInvalidArgumentError=_O;class xO extends N9{constructor(Z,{cause:Y}){super(`Unable to complete creating data keys: ${Y.message}`,{cause:Y});this.encryptedFields=Z}get name(){return"MongoCryptCreateDataKeyError"}}bO.MongoCryptCreateDataKeyError=xO;class fO extends N9{constructor(Z,{cause:Y}){super(`Unable to create collection: ${Y.message}`,{cause:Y});this.encryptedFields=Z}get name(){return"MongoCryptCreateEncryptedCollectionError"}}bO.MongoCryptCreateEncryptedCollectionError=fO;class yO extends N9{constructor(Z,Y){super(Z);this.body=Y}get name(){return"MongoCryptAzureKMSRequestError"}}bO.MongoCryptAzureKMSRequestError=yO;class gO extends N9{get name(){return"MongoCryptKMSRequestNetworkTimeoutError"}}bO.MongoCryptKMSRequestNetworkTimeoutError=gO});var uO=w((hO)=>{Object.defineProperty(hO,"__esModule",{value:!0});hO.MongocryptdManager=void 0;var HJ1=r();class MG{constructor(Z={}){if(this.uri=typeof Z.mongocryptdURI==="string"&&Z.mongocryptdURI.length>0?Z.mongocryptdURI:MG.DEFAULT_MONGOCRYPTD_URI,this.bypassSpawn=!!Z.mongocryptdBypassSpawn,this.spawnPath=Z.mongocryptdSpawnPath||"",this.spawnArgs=[],Array.isArray(Z.mongocryptdSpawnArgs))this.spawnArgs=this.spawnArgs.concat(Z.mongocryptdSpawnArgs);if(this.spawnArgs.filter((Y)=>typeof Y==="string").every((Y)=>Y.indexOf("--idleShutdownTimeoutSecs")<0))this.spawnArgs.push("--idleShutdownTimeoutSecs","60")}async spawn(){const Z=this.spawnPath||"mongocryptd",{spawn:Y}=import.meta.require("child_process");this._child=Y(Z,this.spawnArgs,{stdio:"ignore",detached:!0}),this._child.on("error",()=>{}),this._child.unref()}async withRespawn(Z){try{return await Z()}catch(X){if(!(X instanceof HJ1.MongoNetworkTimeoutError&&!this.bypassSpawn))throw X}return await this.spawn(),await Z()}}MG.DEFAULT_MONGOCRYPTD_URI="mongodb://localhost:27020";hO.MongocryptdManager=MG});var lO=w((dO)=>{async function UJ1(Z){const Y=(0,FJ1.getAwsCredentialProvider)();if("kModuleError"in Y)return Z;const{fromNodeProviderChain:X}=Y,$=await X()();return{...Z,aws:$}}Object.defineProperty(dO,"__esModule",{value:!0});dO.loadAWSCredentials=void 0;var FJ1=F7();dO.loadAWSCredentials=UJ1});var nO=w((pO)=>{var LJ1=function(Z,Y={}){return new Promise((X,J)=>{let $;const W=VJ1.get(Z,Y,(G)=>{G.setEncoding("utf8");let K="";G.on("data",(Q)=>K+=Q),G.on("end",()=>{(0,BV.clearTimeout)($),X({status:G.statusCode,body:K})})}).on("error",(G)=>{(0,BV.clearTimeout)($),J(G)}).end();$=(0,BV.setTimeout)(()=>{W.destroy(new qJ1.MongoCryptKMSRequestNetworkTimeoutError("request timed out after 10 seconds"))},1e4)})};Object.defineProperty(pO,"__esModule",{value:!0});pO.get=void 0;var VJ1=import.meta.require("http"),BV=import.meta.require("timers"),qJ1=A9();pO.get=LJ1});var eO=w((rO)=>{async function MJ1(Z){const{status:Y,body:X}=Z,J=(()=>{try{return JSON.parse(X)}catch{throw new D9.MongoCryptAzureKMSRequestError("Malformed JSON body in GET request.")}})();if(Y!==200)throw new D9.MongoCryptAzureKMSRequestError("Unable to complete request.",J);if(!J.access_token)throw new D9.MongoCryptAzureKMSRequestError("Malformed response body - missing field `access_token`.");if(!J.expires_in)throw new D9.MongoCryptAzureKMSRequestError("Malformed response body - missing field `expires_in`.");const $=Number(J.expires_in)*1000;if(Number.isNaN($))throw new D9.MongoCryptAzureKMSRequestError("Malformed response body - unable to parse int from `expires_in` field.");return{accessToken:J.access_token,expiresOnTimestamp:Date.now()+$}}var aO=function(Z){const Y=new URL(Z.url?.toString()??"http://169.254.169.254/metadata/identity/oauth2/token");return Y.searchParams.append("api-version","2018-02-01"),Y.searchParams.append("resource","https://vault.azure.net"),{headers:{...Z.headers,"Content-Type":"application/json",Metadata:!0},url:Y}};async function sO(Z={}){const{headers:Y,url:X}=aO(Z),J=await(0,wJ1.get)(X,{headers:Y}).catch(($)=>{if($ instanceof D9.MongoCryptKMSRequestNetworkTimeoutError)throw new D9.MongoCryptAzureKMSRequestError(`[Azure KMS] ${$.message}`);throw $});return MJ1(J)}async function BJ1(Z){const Y=await rO.tokenCache.getToken();return{...Z,azure:Y}}Object.defineProperty(rO,"__esModule",{value:!0});rO.loadAzureCredentials=rO.fetchAzureKMSToken=rO.prepareRequest=rO.tokenCache=rO.AzureCredentialCache=void 0;var D9=A9(),wJ1=nO(),RJ1=6000;class NV{constructor(){this.cachedToken=null}async getToken(){if(this.cachedToken==null||this.needsRefresh(this.cachedToken))this.cachedToken=await this._getToken();return{accessToken:this.cachedToken.accessToken}}needsRefresh(Z){return Z.expiresOnTimestamp-Date.now()<=RJ1}resetCache(){this.cachedToken=null}_getToken(){return sO()}}rO.AzureCredentialCache=NV;rO.tokenCache=new NV;rO.prepareRequest=aO;rO.fetchAzureKMSToken=sO;rO.loadAzureCredentials=BJ1});var XS=w((ZS)=>{async function TJ1(Z){const Y=(0,PJ1.getGcpMetadata)();if("kModuleError"in Y)return Z;const{access_token:X}=await Y.instance({property:"service-accounts/default/token"});return{...Z,gcp:{accessToken:X}}}Object.defineProperty(ZS,"__esModule",{value:!0});ZS.loadGCPCredentials=void 0;var PJ1=F7();ZS.loadGCPCredentials=TJ1});var AV=w((JS)=>{var BG=function(Z,Y){const X=Y[Z];if(X==null)return!1;return typeof X==="object"&&Object.keys(X).length===0};async function CJ1(Z){let Y=Z;if(BG("aws",Z))Y=await(0,IJ1.loadAWSCredentials)(Y);if(BG("gcp",Z))Y=await(0,EJ1.loadGCPCredentials)(Y);if(BG("azure",Z))Y=await(0,jJ1.loadAzureCredentials)(Y);return Y}Object.defineProperty(JS,"__esModule",{value:!0});JS.refreshKMSCredentials=JS.isEmptyCredentials=void 0;var IJ1=lO(),jJ1=eO(),EJ1=XS();JS.isEmptyCredentials=BG;JS.refreshKMSCredentials=CJ1});var DV=w((LS)=>{var xJ1=function(){if(aJ==null){const Z=(0,_J1.getSocks)();if("kModuleError"in Z)throw Z.kModuleError;aJ=Z}return aJ},GS=function(Z){if(process.env.MONGODB_CRYPT_DEBUG)console.error(Z)};Object.defineProperty(LS,"__esModule",{value:!0});LS.StateMachine=void 0;var WS=import.meta.require("fs/promises"),SJ1=import.meta.require("net"),kJ1=import.meta.require("tls"),B4=Z0(),_J1=F7(),NG=$1(),U5=A9(),aJ=null,AG=0,KS=1,QS=2,zS=3,HS=7,FS=4,US=5,VS=6,fJ1=443,yJ1=new Map([[AG,"MONGOCRYPT_CTX_ERROR"],[KS,"MONGOCRYPT_CTX_NEED_MONGO_COLLINFO"],[QS,"MONGOCRYPT_CTX_NEED_MONGO_MARKINGS"],[zS,"MONGOCRYPT_CTX_NEED_MONGO_KEYS"],[HS,"MONGOCRYPT_CTX_NEED_KMS_CREDENTIALS"],[FS,"MONGOCRYPT_CTX_NEED_KMS"],[US,"MONGOCRYPT_CTX_READY"],[VS,"MONGOCRYPT_CTX_DONE"]]),gJ1=["tlsInsecure","tlsAllowInvalidCertificates","tlsAllowInvalidHostnames","tlsDisableOCSPEndpointCheck","tlsDisableCertificateRevocationCheck"];class qS{constructor(Z,Y=(0,B4.pluckBSONSerializeOptions)(Z)){this.options=Z,this.bsonOptions=Y}async execute(Z,Y){const{_keyVaultNamespace:X,_keyVaultClient:J,_metaDataClient:$,_mongocryptdClient:W,_mongocryptdManager:G}=Z;let K=null;while(Y.state!==VS&&Y.state!==AG)switch(GS(`[context#${Y.id}] ${yJ1.get(Y.state)||Y.state}`),Y.state){case KS:{const Q=(0,B4.deserialize)(Y.nextMongoOperation());if(!$)throw new U5.MongoCryptError("unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_COLLINFO but metadata client is undefined");const z=await this.fetchCollectionInfo($,Y.ns,Q);if(z)Y.addMongoOperationResponse(z);Y.finishMongoOperation();break}case QS:{const Q=Y.nextMongoOperation();if(!W)throw new U5.MongoCryptError("unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_MARKINGS but mongocryptdClient is undefined");const z=G?await G.withRespawn(this.markCommand.bind(this,W,Y.ns,Q)):await this.markCommand(W,Y.ns,Q);Y.addMongoOperationResponse(z),Y.finishMongoOperation();break}case zS:{const Q=Y.nextMongoOperation(),z=await this.fetchKeys(J,X,Q);if(z.length===0)K={v:[]};for await(let H of z)Y.addMongoOperationResponse((0,B4.serialize)(H));Y.finishMongoOperation();break}case HS:{const Q=await Z.askForKMSCredentials();Y.provideKMSProviders((0,B4.serialize)(Q));break}case FS:{const Q=Array.from(this.requests(Y));await Promise.all(Q),Y.finishKMSRequests();break}case US:{const Q=Y.finalize();if(Y.state===AG){const z=Y.status.message||"Finalization error";throw new U5.MongoCryptError(z)}K=(0,B4.deserialize)(Q,this.options);break}default:throw new U5.MongoCryptError(`Unknown state: ${Y.state}`)}if(Y.state===AG||K==null){const Q=Y.status.message;if(!Q)GS("unidentifiable error in MongoCrypt - received an error status from \`libmongocrypt\` but received no error message.");throw new U5.MongoCryptError(Q??"unidentifiable error in MongoCrypt - received an error status from `libmongocrypt` but received no error message.")}return K}kmsRequest(Z){const Y=Z.endpoint.split(":"),X=Y[1]!=null?Number.parseInt(Y[1],10):fJ1,J={host:Y[0],servername:Y[0],port:X},$=Z.message;return new Promise(async(W,G)=>{const K=new NG.BufferPool;let Q,z;function H(){for(let q of[Q,z])if(q)q.removeAllListeners(),q.destroy()}function F(){H(),G(new U5.MongoCryptError("KMS request timed out"))}function U(q){H();const L=new U5.MongoCryptError("KMS request failed",{cause:q});G(L)}if(this.options.proxyOptions&&this.options.proxyOptions.proxyHost){z=SJ1.connect({host:this.options.proxyOptions.proxyHost,port:this.options.proxyOptions.proxyPort||1080}),z.on("timeout",F),z.on("error",U);try{await import.meta.require("events").once(z,"connect"),aJ??=xJ1(),J.socket=(await aJ.SocksClient.createConnection({existing_socket:z,command:"connect",destination:{host:J.host,port:J.port},proxy:{host:"iLoveJavaScript",port:0,type:5,userId:this.options.proxyOptions.proxyUsername,password:this.options.proxyOptions.proxyPassword}})).socket}catch(q){return U(q)}}const V=this.options.tlsOptions;if(V){const q=Z.kmsProvider,L=V[q];if(L){const R=this.validateTlsOptions(q,L);if(R)G(R);try{await this.setTlsOptions(L,J)}catch(B){return U(B)}}}Q=kJ1.connect(J,()=>{Q.write($)}),Q.once("timeout",F),Q.once("error",U),Q.on("data",(q)=>{K.append(q);while(Z.bytesNeeded>0&&K.length){const L=Math.min(Z.bytesNeeded,K.length);Z.addResponse(K.read(L))}if(Z.bytesNeeded<=0)H(),W()})})}*requests(Z){for(let Y=Z.nextKMSRequest();Y!=null;Y=Z.nextKMSRequest())yield this.kmsRequest(Y)}validateTlsOptions(Z,Y){const X=Object.keys(Y);for(let J of gJ1)if(X.includes(J))return new U5.MongoCryptError(`Insecure TLS options prohibited for ${Z}: ${J}`)}async setTlsOptions(Z,Y){if(Z.tlsCertificateKeyFile){const X=await WS.readFile(Z.tlsCertificateKeyFile);Y.cert=Y.key=X}if(Z.tlsCAFile)Y.ca=await WS.readFile(Z.tlsCAFile);if(Z.tlsCertificateKeyFilePassword)Y.passphrase=Z.tlsCertificateKeyFilePassword}async fetchCollectionInfo(Z,Y,X){const{db:J}=NG.MongoDBCollectionNamespace.fromString(Y),$=await Z.db(J).listCollections(X,{promoteLongs:!1,promoteValues:!1}).toArray();return $.length>0?(0,B4.serialize)($[0]):null}async markCommand(Z,Y,X){const J={promoteLongs:!1,promoteValues:!1},{db:$}=NG.MongoDBCollectionNamespace.fromString(Y),W=(0,B4.deserialize)(X,J),G=await Z.db($).command(W,J);return(0,B4.serialize)(G,this.bsonOptions)}fetchKeys(Z,Y,X){const{db:J,collection:$}=NG.MongoDBCollectionNamespace.fromString(Y);return Z.db(J).collection($,{readConcern:{level:"majority"}}).find((0,B4.deserialize)(X)).toArray()}}LS.StateMachine=qS});var TV=w((AS)=>{var NS=function(Z,Y,X=!0){if(X){if(Buffer.isBuffer(Y))Y=(0,wY.deserialize)(Y);if(Buffer.isBuffer(Z))throw new DG.MongoRuntimeError("Expected result of decryption to be deserialized BSON object")}if(!Z||typeof Z!=="object")return;for(let J of Object.keys(Z)){const $=Y[J];if($&&$._bsontype==="Binary"&&$.sub_type===6){if(!Z[PV])Object.defineProperty(Z,PV,{value:[],configurable:!0,enumerable:!1,writable:!1});Z[PV].push(J);continue}NS(Z[J],$,!1)}},MS;Object.defineProperty(AS,"__esModule",{value:!0});AS.AutoEncrypter=AS.AutoEncryptionLoggerLevel=void 0;var wY=Z0(),bJ1=F7(),DG=r(),vJ1=P9(),hJ1=$1(),mJ1=MV(),uJ1=A9(),dJ1=uO(),cJ1=AV(),RS=DV();AS.AutoEncryptionLoggerLevel=Object.freeze({FatalError:0,Error:1,Warning:2,Info:3,Trace:4});var BS=Symbol.for("@@mdb.decorateDecryptionResult"),PV=Symbol.for("@@mdb.decryptedKeys");class PG{static getMongoCrypt(){const Z=(0,bJ1.getMongoDBClientEncryption)();if("kModuleError"in Z)throw Z.kModuleError;return Z.MongoCrypt}constructor(Z,Y){this[MS]=!1,this._client=Z,this._bypassEncryption=Y.bypassAutoEncryption===!0,this._keyVaultNamespace=Y.keyVaultNamespace||"admin.datakeys",this._keyVaultClient=Y.keyVaultClient||Z,this._metaDataClient=Y.metadataClient||Z,this._proxyOptions=Y.proxyOptions||{},this._tlsOptions=Y.tlsOptions||{},this._kmsProviders=Y.kmsProviders||{};const X={cryptoCallbacks:mJ1};if(Y.schemaMap)X.schemaMap=Buffer.isBuffer(Y.schemaMap)?Y.schemaMap:(0,wY.serialize)(Y.schemaMap);if(Y.encryptedFieldsMap)X.encryptedFieldsMap=Buffer.isBuffer(Y.encryptedFieldsMap)?Y.encryptedFieldsMap:(0,wY.serialize)(Y.encryptedFieldsMap);if(X.kmsProviders=!Buffer.isBuffer(this._kmsProviders)?(0,wY.serialize)(this._kmsProviders):this._kmsProviders,Y.options?.logger)X.logger=Y.options.logger;if(Y.extraOptions&&Y.extraOptions.cryptSharedLibPath)X.cryptSharedLibPath=Y.extraOptions.cryptSharedLibPath;if(Y.bypassQueryAnalysis)X.bypassQueryAnalysis=Y.bypassQueryAnalysis;if(this._bypassMongocryptdAndCryptShared=this._bypassEncryption||!!Y.bypassQueryAnalysis,Y.extraOptions&&Y.extraOptions.cryptSharedLibSearchPaths)X.cryptSharedLibSearchPaths=Y.extraOptions.cryptSharedLibSearchPaths;else if(!this._bypassMongocryptdAndCryptShared)X.cryptSharedLibSearchPaths=["$SYSTEM"];const J=PG.getMongoCrypt();if(this._mongocrypt=new J(X),this._contextCounter=0,Y.extraOptions&&Y.extraOptions.cryptSharedLibRequired&&!this.cryptSharedLibVersionInfo)throw new uJ1.MongoCryptInvalidArgumentError("`cryptSharedLibRequired` set but no crypt_shared library loaded");if(!this._bypassMongocryptdAndCryptShared&&!this.cryptSharedLibVersionInfo){this._mongocryptdManager=new dJ1.MongocryptdManager(Y.extraOptions);const $={serverSelectionTimeoutMS:1e4};if(Y.extraOptions==null||typeof Y.extraOptions.mongocryptdURI!=="string")$.family=4;this._mongocryptdClient=new vJ1.MongoClient(this._mongocryptdManager.uri,$)}}async init(){if(this._bypassMongocryptdAndCryptShared||this.cryptSharedLibVersionInfo)return;if(!this._mongocryptdManager)throw new DG.MongoRuntimeError("Reached impossible state: mongocryptdManager is undefined when neither bypassSpawn nor the shared lib are specified.");if(!this._mongocryptdClient)throw new DG.MongoRuntimeError("Reached impossible state: mongocryptdClient is undefined when neither bypassSpawn nor the shared lib are specified.");if(!this._mongocryptdManager.bypassSpawn)await this._mongocryptdManager.spawn();try{return await this._mongocryptdClient.connect()}catch(Z){const{message:Y}=Z;if(Y&&(Y.match(/timed out after/)||Y.match(/ENOTFOUND/)))throw new DG.MongoRuntimeError("Unable to connect to `mongocryptd`, please make sure it is running or in your PATH for auto-spawn",{cause:Z});throw Z}}async teardown(Z){await this._mongocryptdClient?.close(Z)}async encrypt(Z,Y,X={}){if(this._bypassEncryption)return Y;const J=Buffer.isBuffer(Y)?Y:(0,wY.serialize)(Y,X),$=this._mongocrypt.makeEncryptionContext(hJ1.MongoDBCollectionNamespace.fromString(Z).db,J);return $.id=this._contextCounter++,$.ns=Z,$.document=Y,new RS.StateMachine({promoteValues:!1,promoteLongs:!1,proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions}).execute(this,$)}async decrypt(Z,Y={}){const X=Buffer.isBuffer(Z)?Z:(0,wY.serialize)(Z,Y),J=this._mongocrypt.makeDecryptionContext(X);J.id=this._contextCounter++;const $=new RS.StateMachine({...Y,proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions}),W=this[BS],G=await $.execute(this,J);if(W)NS(G,Z);return G}async askForKMSCredentials(){return(0,cJ1.refreshKMSCredentials)(this._kmsProviders)}get cryptSharedLibVersionInfo(){return this._mongocrypt.cryptSharedLibVersionInfo}static get libmongocryptVersion(){return PG.getMongoCrypt().libmongocryptVersion}}AS.AutoEncrypter=PG;MS=BS});var ES=w((IS)=>{Object.defineProperty(IS,"__esModule",{value:!0});IS.Encrypter=void 0;var pJ1=import.meta.require("util"),iJ1=TV(),nJ1=c0(),aJ1=F7(),PS=r(),sJ1=P9(),sJ=Symbol("internalClient");class TS{constructor(Z,Y,X){if(typeof X.autoEncryption!=="object")throw new PS.MongoInvalidArgumentError('Option "autoEncryption" must be specified');if(this[sJ]=null,this.bypassAutoEncryption=!!X.autoEncryption.bypassAutoEncryption,this.needsConnecting=!1,X.maxPoolSize===0&&X.autoEncryption.keyVaultClient==null)X.autoEncryption.keyVaultClient=Z;else if(X.autoEncryption.keyVaultClient==null)X.autoEncryption.keyVaultClient=this.getInternalClient(Z,Y,X);if(this.bypassAutoEncryption)X.autoEncryption.metadataClient=void 0;else if(X.maxPoolSize===0)X.autoEncryption.metadataClient=Z;else X.autoEncryption.metadataClient=this.getInternalClient(Z,Y,X);if(X.proxyHost)X.autoEncryption.proxyOptions={proxyHost:X.proxyHost,proxyPort:X.proxyPort,proxyUsername:X.proxyUsername,proxyPassword:X.proxyPassword};this.autoEncrypter=new iJ1.AutoEncrypter(Z,X.autoEncryption)}getInternalClient(Z,Y,X){let J=this[sJ];if(J==null){const $={};for(let W of[...Object.getOwnPropertyNames(X),...Object.getOwnPropertySymbols(X)]){if(["autoEncryption","minPoolSize","servers","caseTranslate","dbName"].includes(W))continue;Reflect.set($,W,Reflect.get(X,W))}$.minPoolSize=0,J=new sJ1.MongoClient(Y,$),this[sJ]=J;for(let W of nJ1.MONGO_CLIENT_EVENTS)for(let G of Z.listeners(W))J.on(W,G);Z.on("newListener",(W,G)=>{J?.on(W,G)}),this.needsConnecting=!0}return J}async connectInternalClient(){const Z=this[sJ];if(this.needsConnecting&&Z!=null)this.needsConnecting=!1,await Z.connect()}closeCallback(Z,Y,X){(0,pJ1.callbackify)(this.close.bind(this))(Z,Y,X)}async close(Z,Y){const X=await this.autoEncrypter.teardown(!!Y).catch(($)=>$),J=this[sJ];if(J!=null&&Z!==J)return J.close(Y);if(X)throw X}static checkForMongoCrypt(){if("kModuleError"in(0,aJ1.getMongoDBClientEncryption)())throw new PS.MongoMissingDependencyError("Auto-encryption requested, but the module is not installed. Please add `mongodb-client-encryption` as a dependency of your project")}}IS.Encrypter=TS});var OV=w((SS)=>{var rJ=function(Z){const Y=Object.values(SS.SeverityLevel),X=Z?.toLowerCase();if(X!=null&&Y.includes(X))return X;return null},RY=function(Z){return{write:(Y)=>{Z.write((0,tJ1.inspect)(Y,{compact:!0,breakLength:Infinity}),"utf-8");return}}},oJ1=function({MONGODB_LOG_PATH:Z},{mongodbLogPath:Y}){if(typeof Y==="string"&&/^stderr$/i.test(Y))return RY(process.stderr);if(typeof Y==="string"&&/^stdout$/i.test(Y))return RY(process.stdout);if(typeof Y==="object"&&typeof Y?.write==="function")return Y;if(Z&&/^stderr$/i.test(Z))return RY(process.stderr);if(Z&&/^stdout$/i.test(Z))return RY(process.stdout);return RY(process.stderr)},eJ1=function(Z,Y){const X=SS.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(Z),J=SS.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(Y);return X<J?-1:X>J?1:0},jV=function(Z,Y){const X=rJ1.EJSON.stringify(Z);return Y!==0&&X.length>Y?`${X.slice(0,Y)}...`:X},Z31=function(Z){const Y=Z;return Y.toLog!==void 0&&typeof Y.toLog==="function"},IV=function(Z,Y){Z.commandName=Y.commandName,Z.requestId=Y.requestId,Z.driverConnectionId=Y?.connectionId;const{host:X,port:J}=CV.HostAddress.fromString(Y.address).toHostPort();if(Z.serverHost=X,Z.serverPort=J,Y?.serviceId)Z.serviceId=Y.serviceId.toHexString();return Z},V7=function(Z,Y){const{host:X,port:J}=CV.HostAddress.fromString(Y.address).toHostPort();return Z.serverHost=X,Z.serverPort=J,Z},Y31=function(Z,Y=SS.DEFAULT_MAX_DOCUMENT_LENGTH){let X=Object.create(null);switch(Z.name){case i8.COMMAND_STARTED:return X=IV(X,Z),X.message="Command started",X.command=jV(Z.command,Y),X.databaseName=Z.databaseName,X;case i8.COMMAND_SUCCEEDED:return X=IV(X,Z),X.message="Command succeeded",X.durationMS=Z.duration,X.reply=jV(Z.reply,Y),X;case i8.COMMAND_FAILED:return X=IV(X,Z),X.message="Command failed",X.durationMS=Z.duration,X.failure=Z.failure,X;case i8.CONNECTION_POOL_CREATED:if(X=V7(X,Z),X.message="Connection pool created",Z.options){const{maxIdleTimeMS:J,minPoolSize:$,maxPoolSize:W,maxConnecting:G,waitQueueTimeoutMS:K}=Z.options;X={...X,maxIdleTimeMS:J,minPoolSize:$,maxPoolSize:W,maxConnecting:G,waitQueueTimeoutMS:K}}return X;case i8.CONNECTION_POOL_READY:return X=V7(X,Z),X.message="Connection pool ready",X;case i8.CONNECTION_POOL_CLEARED:if(X=V7(X,Z),X.message="Connection pool cleared",Z.serviceId?._bsontype==="ObjectId")X.serviceId=Z.serviceId.toHexString();return X;case i8.CONNECTION_POOL_CLOSED:return X=V7(X,Z),X.message="Connection pool closed",X;case i8.CONNECTION_CREATED:return X=V7(X,Z),X.message="Connection created",X.driverConnectionId=Z.connectionId,X;case i8.CONNECTION_READY:return X=V7(X,Z),X.message="Connection ready",X.driverConnectionId=Z.connectionId,X;case i8.CONNECTION_CLOSED:switch(X=V7(X,Z),X.message="Connection closed",X.driverConnectionId=Z.connectionId,Z.reason){case"stale":X.reason="Connection became stale because the pool was cleared";break;case"idle":X.reason="Connection has been available but unused for longer than the configured max idle time";break;case"error":if(X.reason="An error occurred while using the connection",Z.error)X.error=Z.error;break;case"poolClosed":X.reason="Connection pool was closed";break;default:X.reason=`Unknown close reason: ${Z.reason}`}return X;case i8.CONNECTION_CHECK_OUT_STARTED:return X=V7(X,Z),X.message="Connection checkout started",X;case i8.CONNECTION_CHECK_OUT_FAILED:switch(X=V7(X,Z),X.message="Connection checkout failed",Z.reason){case"poolClosed":X.reason="Connection pool was closed";break;case"timeout":X.reason="Wait queue timeout elapsed without a connection becoming available";break;case"connectionError":if(X.reason="An error occurred while trying to establish a new connection",Z.error)X.error=Z.error;break;default:X.reason=`Unknown close reason: ${Z.reason}`}return X;case i8.CONNECTION_CHECKED_OUT:return X=V7(X,Z),X.message="Connection checked out",X.driverConnectionId=Z.connectionId,X;case i8.CONNECTION_CHECKED_IN:return X=V7(X,Z),X.message="Connection checked in",X.driverConnectionId=Z.connectionId,X;default:for(let[J,$]of Object.entries(Z))if($!=null)X[J]=$}return X};Object.defineProperty(SS,"__esModule",{value:!0});SS.MongoLogger=SS.stringifyWithMaxLen=SS.createStdioLogger=SS.MongoLoggableComponent=SS.SEVERITY_LEVEL_MAP=SS.DEFAULT_MAX_DOCUMENT_LENGTH=SS.SeverityLevel=void 0;var rJ1=S6(),tJ1=import.meta.require("util"),i8=c0(),CV=$1();SS.SeverityLevel=Object.freeze({EMERGENCY:"emergency",ALERT:"alert",CRITICAL:"critical",ERROR:"error",WARNING:"warn",NOTICE:"notice",INFORMATIONAL:"info",DEBUG:"debug",TRACE:"trace",OFF:"off"});SS.DEFAULT_MAX_DOCUMENT_LENGTH=1000;class CS extends Map{constructor(Z){const Y=[];for(let[X,J]of Z)Y.push([J,X]);Y.push(...Z);super(Y)}getNumericSeverityLevel(Z){return this.get(Z)}getSeverityLevelName(Z){return this.get(Z)}}SS.SEVERITY_LEVEL_MAP=new CS([[SS.SeverityLevel.OFF,(-Infinity)],[SS.SeverityLevel.EMERGENCY,0],[SS.SeverityLevel.ALERT,1],[SS.SeverityLevel.CRITICAL,2],[SS.SeverityLevel.ERROR,3],[SS.SeverityLevel.WARNING,4],[SS.SeverityLevel.NOTICE,5],[SS.SeverityLevel.INFORMATIONAL,6],[SS.SeverityLevel.DEBUG,7],[SS.SeverityLevel.TRACE,8]]);SS.MongoLoggableComponent=Object.freeze({COMMAND:"command",TOPOLOGY:"topology",SERVER_SELECTION:"serverSelection",CONNECTION:"connection"});SS.createStdioLogger=RY;SS.stringifyWithMaxLen=jV;class OS{constructor(Z){this.error=this.log.bind(this,"error"),this.warn=this.log.bind(this,"warn"),this.info=this.log.bind(this,"info"),this.debug=this.log.bind(this,"debug"),this.trace=this.log.bind(this,"trace"),this.componentSeverities=Z.componentSeverities,this.maxDocumentLength=Z.maxDocumentLength,this.logDestination=Z.logDestination}log(Z,Y,X){if(eJ1(Z,this.componentSeverities[Y])>0)return;let J={t:new Date,c:Y,s:Z};if(typeof X==="string")J.message=X;else if(typeof X==="object")if(Z31(X))J={...J,...X.toLog()};else J={...J,...Y31(X,this.maxDocumentLength)};this.logDestination.write(J)}static resolveOptions(Z,Y){const X={...Z,...Y,mongodbLogPath:oJ1(Z,Y)},J=rJ(X.MONGODB_LOG_ALL)??SS.SeverityLevel.OFF;return{componentSeverities:{command:rJ(X.MONGODB_LOG_COMMAND)??J,topology:rJ(X.MONGODB_LOG_TOPOLOGY)??J,serverSelection:rJ(X.MONGODB_LOG_SERVER_SELECTION)??J,connection:rJ(X.MONGODB_LOG_CONNECTION)??J,default:J},maxDocumentLength:(0,CV.parseUnsignedInteger)(X.MONGODB_LOG_MAX_DOCUMENT_LENGTH)??1000,logDestination:X.mongodbLogPath}}}SS.MongoLogger=OS});var gV=w((vS)=>{async function U31(Z){if(typeof Z.srvHost!=="string")throw new Y1.MongoAPIError('Option "srvHost" must not be empty');if(Z.srvHost.split(".").length<3)throw new Y1.MongoAPIError("URI must include hostname, domain name, and tld");const Y=Z.srvHost,X=await xS.promises.resolveSrv(`_${Z.srvServiceName}._tcp.${Y}`);if(X.length===0)throw new Y1.MongoAPIError("No addresses found at host");for(let{name:H}of X)if(!(0,E8.matchesParentDomain)(H,Y))throw new Y1.MongoAPIError("Server record does not share hostname with parent URI");const J=X.map((H)=>E8.HostAddress.fromString(`${H.name}:${H.port??27017}`));_V(J,Z,!0);let $;try{$=await xS.promises.resolveTxt(Y)}catch(H){if(H.code!=="ENODATA"&&H.code!=="ENOTFOUND")throw H;return J}if($.length>1)throw new Y1.MongoParseError("Multiple text records not allowed");const W=new G31.URLSearchParams($[0].join(""));if([...W.keys()].some((H)=>!kV.includes(H)))throw new Y1.MongoParseError(`Text record may only set any of: ${kV.join(", ")}`);if(kV.some((H)=>W.get(H)===""))throw new Y1.MongoParseError("Cannot have empty URI params in DNS TXT Record");const K=W.get("authSource")??void 0,Q=W.get("replicaSet")??void 0,z=W.get("loadBalanced")??void 0;if(!Z.userSpecifiedAuthSource&&K&&Z.credentials&&!h7.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(Z.credentials.mechanism))Z.credentials=MY.MongoCredentials.merge(Z.credentials,{source:K});if(!Z.userSpecifiedReplicaSet&&Q)Z.replicaSet=Q;if(z==="true")Z.loadBalanced=!0;if(Z.replicaSet&&Z.srvMaxHosts>0)throw new Y1.MongoParseError("Cannot combine replicaSet option with srvMaxHosts");return _V(J,Z,!0),J}var V31=function(Z){if(!Z)return;const Y=(X,J)=>{if(Z.has(X)&&Z.has(J))throw new Y1.MongoAPIError(`The '${X}' option cannot be used with the '${J}' option`)};Y("tlsInsecure","tlsAllowInvalidCertificates"),Y("tlsInsecure","tlsAllowInvalidHostnames"),Y("tlsInsecure","tlsDisableCertificateRevocationCheck"),Y("tlsInsecure","tlsDisableOCSPEndpointCheck"),Y("tlsAllowInvalidCertificates","tlsDisableCertificateRevocationCheck"),Y("tlsAllowInvalidCertificates","tlsDisableOCSPEndpointCheck"),Y("tlsDisableCertificateRevocationCheck","tlsDisableOCSPEndpointCheck")},A4=function(Z,Y){if(typeof Y==="boolean")return Y;switch(Y){case"true":return!0;case"false":return!1;default:throw new Y1.MongoParseError(`${Z} must be either "true" or "false"`)}},fV=function(Z,Y){const X=(0,E8.parseInteger)(Y);if(X!=null)return X;throw new Y1.MongoParseError(`Expected ${Z} to be stringified int value, got: ${Y}`)},tJ=function(Z,Y){const X=fV(Z,Y);if(X<0)throw new Y1.MongoParseError(`${Z} can only be a positive int value, got: ${Y}`);return X};function*gS(Z){if(Z==="")return;const Y=Z.split(",");for(let X of Y){const[J,$]=X.split(/:(.*)/);if($==null)throw new Y1.MongoParseError("Cannot have undefined values in key value pairs");yield[J,$]}}var q31=function(Z,Y=void 0,X={}){if(Y!=null&&!(Y instanceof TG.MongoClient))X=Y,Y=void 0;if(X.useBigInt64&&typeof X.promoteLongs==="boolean"&&!X.promoteLongs)throw new Y1.MongoAPIError("Must request either bigint or Long for int64 deserialization");if(X.useBigInt64&&typeof X.promoteValues==="boolean"&&!X.promoteValues)throw new Y1.MongoAPIError("Must request either bigint or Long for int64 deserialization");const J=new W31.default(Z),{hosts:$,isSRV:W}=J,G=Object.create(null);for(let B of Object.getOwnPropertySymbols(X))if(vS.FEATURE_FLAGS.has(B))G[B]=X[B];G.hosts=W?[]:$.map(E8.HostAddress.fromString);const K=new oJ;if(J.pathname!=="/"&&J.pathname!==""){const B=decodeURIComponent(J.pathname[0]==="/"?J.pathname.slice(1):J.pathname);if(B)K.set("dbName",[B])}if(J.username!==""){const B={username:decodeURIComponent(J.username)};if(typeof J.password==="string")B.password=decodeURIComponent(J.password);K.set("auth",[B])}for(let B of J.searchParams.keys()){const N=J.searchParams.getAll(B),M=/readPreferenceTags/i.test(B);if(!M&&N.length>1)throw new Y1.MongoInvalidArgumentError(`URI option "${B}" cannot appear more than once in the connection string`);if(!M&&N.includes(""))throw new Y1.MongoAPIError(`URI option "${B}" cannot be specified with no value`);if(!K.has(B))K.set(B,N)}const Q=new oJ(Object.entries(X).filter(([,B])=>B!=null));if(K.has("serverApi"))throw new Y1.MongoParseError("URI cannot contain `serverApi`, it can only be passed to the client");const z=K.get("authMechanismProperties");if(z){for(let B of z)if(/(^|,)ALLOWED_HOSTS:/.test(B))throw new Y1.MongoParseError("Auth mechanism property ALLOWED_HOSTS is not allowed in the connection string.")}if(Q.has("loadBalanced"))throw new Y1.MongoParseError("loadBalanced is only a valid option in the URI");const H=new oJ,F=new Set([...K.keys(),...Q.keys()]);for(let B of F){const N=[],M=Q.get(B);if(M!=null)N.push(M);const D=K.get(B)??[];N.push(...D),H.set(B,N)}if(H.has("tls")||H.has("ssl")){const B=(H.get("tls")||[]).concat(H.get("ssl")||[]).map(A4.bind(null,"tls/ssl"));if(new Set(B).size!==1)throw new Y1.MongoParseError("All values of tls/ssl must be the same.")}V31(H);const U=(0,E8.setDifference)(F,Array.from(Object.keys(vS.OPTIONS)).map((B)=>B.toLowerCase()));if(U.size!==0){const B=U.size>1?"options":"option",N=U.size>1?"are":"is";throw new Y1.MongoParseError(`${B} ${Array.from(U).join(", ")} ${N} not supported`)}for(let[B,N]of Object.entries(vS.OPTIONS)){const M=H.get(B);if(!M||M.length===0){if(vS.DEFAULT_OPTIONS.has(B))bS(G,B,N,[vS.DEFAULT_OPTIONS.get(B)])}else{const{deprecated:D}=N;if(D){const m=typeof D==="string"?`: ${D}`:"";(0,E8.emitWarning)(`${B} is a deprecated option${m}`)}bS(G,B,N,M)}}if(G.credentials){const B=G.credentials.mechanism===h7.AuthMechanism.MONGODB_GSSAPI,N=G.credentials.mechanism===h7.AuthMechanism.MONGODB_X509,M=G.credentials.mechanism===h7.AuthMechanism.MONGODB_AWS,D=G.credentials.mechanism===h7.AuthMechanism.MONGODB_OIDC;if((B||N)&&H.has("authSource")&&G.credentials.source!=="$external")throw new Y1.MongoParseError(`authMechanism ${G.credentials.mechanism} requires an authSource of '\$external'`);if(!(B||N||M||D)&&G.dbName&&!H.has("authSource"))G.credentials=MY.MongoCredentials.merge(G.credentials,{source:G.dbName});if(M&&G.credentials.username&&!G.credentials.password)throw new Y1.MongoMissingCredentialsError(`When using ${G.credentials.mechanism} password must be set when a username is specified`);if(G.credentials.validate(),G.credentials.password===""&&G.credentials.username===""&&G.credentials.mechanism===h7.AuthMechanism.MONGODB_DEFAULT&&Object.keys(G.credentials.mechanismProperties).length===0)delete G.credentials}if(!G.dbName)G.dbName="test";if(_V($,G,W),Y&&G.autoEncryption)yS.Encrypter.checkForMongoCrypt(),G.encrypter=new yS.Encrypter(Y,Z,X),G.autoEncrypter=G.encrypter.autoEncrypter;if(G.userSpecifiedAuthSource=Q.has("authSource")||K.has("authSource"),G.userSpecifiedReplicaSet=Q.has("replicaSet")||K.has("replicaSet"),W){if(G.srvHost=$[0],G.directConnection)throw new Y1.MongoAPIError("SRV URI does not support directConnection");if(G.srvMaxHosts>0&&typeof G.replicaSet==="string")throw new Y1.MongoParseError("Cannot use srvMaxHosts option with replicaSet");const B=!Q.has("tls")&&!K.has("tls"),N=!Q.has("ssl")&&!K.has("ssl");if(B&&N)G.tls=!0}else if(K.has("srvMaxHosts")||Q.has("srvMaxHosts")||K.has("srvServiceName")||Q.has("srvServiceName"))throw new Y1.MongoParseError("Cannot use srvMaxHosts or srvServiceName with a non-srv connection string");if(G.directConnection&&G.hosts.length!==1)throw new Y1.MongoParseError("directConnection option requires exactly one host");if(!G.proxyHost&&(G.proxyPort||G.proxyUsername||G.proxyPassword))throw new Y1.MongoParseError("Must specify proxyHost if other proxy options are passed");if(G.proxyUsername&&!G.proxyPassword||!G.proxyUsername&&G.proxyPassword)throw new Y1.MongoParseError("Can only specify both of proxy username/password or neither");if(["proxyHost","proxyPort","proxyUsername","proxyPassword"].map((B)=>K.get(B)??[]).some((B)=>B.length>1))throw new Y1.MongoParseError("Proxy options cannot be specified multiple times in the connection string");const q=Symbol.for("@@mdb.enableMongoLogger");G[q]=G[q]??!1;let L={},R={};if(G[q])L={MONGODB_LOG_COMMAND:process.env.MONGODB_LOG_COMMAND,MONGODB_LOG_TOPOLOGY:process.env.MONGODB_LOG_TOPOLOGY,MONGODB_LOG_SERVER_SELECTION:process.env.MONGODB_LOG_SERVER_SELECTION,MONGODB_LOG_CONNECTION:process.env.MONGODB_LOG_CONNECTION,MONGODB_LOG_ALL:process.env.MONGODB_LOG_ALL,MONGODB_LOG_MAX_DOCUMENT_LENGTH:process.env.MONGODB_LOG_MAX_DOCUMENT_LENGTH,MONGODB_LOG_PATH:process.env.MONGODB_LOG_PATH,...G[Symbol.for("@@mdb.internalLoggerConfig")]},R={mongodbLogPath:G.mongodbLogPath};return G.mongoLoggerOptions=Q31.MongoLogger.resolveOptions(L,R),G.metadata=(0,K31.makeClientMetadata)(G),G},_V=function(Z,Y,X){if(Y.loadBalanced){if(Z.length>1)throw new Y1.MongoParseError(z31);if(Y.replicaSet)throw new Y1.MongoParseError(H31);if(Y.directConnection)throw new Y1.MongoParseError(F31);if(X&&Y.srvMaxHosts>0)throw new Y1.MongoParseError("Cannot limit srv hosts with loadBalanced enabled")}return},bS=function(Z,Y,X,J){const{target:$,type:W,transform:G}=X,K=$??Y;switch(W){case"boolean":Z[K]=A4(K,J[0]);break;case"int":Z[K]=fV(K,J[0]);break;case"uint":Z[K]=tJ(K,J[0]);break;case"string":if(J[0]==null)break;Z[K]=String(J[0]);break;case"record":if(!(0,E8.isRecord)(J[0]))throw new Y1.MongoParseError(`${K} must be an object`);Z[K]=J[0];break;case"any":Z[K]=J[0];break;default:{if(!G)throw new Y1.MongoParseError("Descriptors missing a type must define a transform");const Q=G({name:K,options:Z,values:J});Z[K]=Q;break}}};Object.defineProperty(vS,"__esModule",{value:!0});vS.FEATURE_FLAGS=vS.DEFAULT_OPTIONS=vS.OPTIONS=vS.parseOptions=vS.resolveSRVRecord=void 0;var xS=import.meta.require("dns"),W31=VV(),G31=import.meta.require("url"),MY=XG(),h7=b7(),K31=DO(),fS=RG(),yS=ES(),Y1=r(),TG=P9(),Q31=OV(),SV=_6(),V5=x0(),E8=$1(),N4=d8(),kV=["authSource","replicaSet","loadBalanced"],z31="loadBalanced option only supported with a single host in the URI",H31="loadBalanced option not supported with a replicaSet option",F31="loadBalanced option not supported when directConnection is provided";vS.resolveSRVRecord=U31;class oJ extends Map{constructor(Z=[]){super(Z.map(([Y,X])=>[Y.toLowerCase(),X]))}has(Z){return super.has(Z.toLowerCase())}get(Z){return super.get(Z.toLowerCase())}set(Z,Y){return super.set(Z.toLowerCase(),Y)}delete(Z){return super.delete(Z.toLowerCase())}}vS.parseOptions=q31;vS.OPTIONS={appName:{type:"string"},auth:{target:"credentials",transform({name:Z,options:Y,values:[X]}){if(!(0,E8.isRecord)(X,["username","password"]))throw new Y1.MongoParseError(`${Z} must be an object with 'username' and 'password' properties`);return MY.MongoCredentials.merge(Y.credentials,{username:X.username,password:X.password})}},authMechanism:{target:"credentials",transform({options:Z,values:[Y]}){const X=Object.values(h7.AuthMechanism),[J]=X.filter((G)=>G.match(RegExp(String.raw`\b${Y}\b`,"i")));if(!J)throw new Y1.MongoParseError(`authMechanism one of ${X}, got ${Y}`);let $=Z.credentials?.source;if(J===h7.AuthMechanism.MONGODB_PLAIN||h7.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(J))$="$external";let W=Z.credentials?.password;if(J===h7.AuthMechanism.MONGODB_X509&&W==="")W=void 0;return MY.MongoCredentials.merge(Z.credentials,{mechanism:J,source:$,password:W})}},authMechanismProperties:{target:"credentials",transform({options:Z,values:Y}){let X=Object.create(null);for(let J of Y)if(typeof J==="string")for(let[$,W]of gS(J))try{X[$]=A4($,W)}catch{X[$]=W}else{if(!(0,E8.isRecord)(J))throw new Y1.MongoParseError("AuthMechanismProperties must be an object");X={...J}}return MY.MongoCredentials.merge(Z.credentials,{mechanismProperties:X})}},authSource:{target:"credentials",transform({options:Z,values:[Y]}){const X=String(Y);return MY.MongoCredentials.merge(Z.credentials,{source:X})}},autoEncryption:{type:"record"},bsonRegExp:{type:"boolean"},serverApi:{target:"serverApi",transform({values:[Z]}){const Y=typeof Z==="string"?{version:Z}:Z,X=Y&&Y.version;if(!X)throw new Y1.MongoParseError(`Invalid \`serverApi\` property; must specify a version from the following enum: ["${Object.values(TG.ServerApiVersion).join('", "')}"]`);if(!Object.values(TG.ServerApiVersion).some((J)=>J===X))throw new Y1.MongoParseError(`Invalid server API version=${X}; must be in the following enum: ["${Object.values(TG.ServerApiVersion).join('", "')}"]`);return Y}},checkKeys:{type:"boolean"},compressors:{default:"none",target:"compressors",transform({values:Z}){const Y=new Set;for(let X of Z){const J=typeof X==="string"?X.split(","):X;if(!Array.isArray(J))throw new Y1.MongoInvalidArgumentError("compressors must be an array or a comma-delimited list of strings");for(let $ of J)if(Object.keys(fS.Compressor).includes(String($)))Y.add(String($));else throw new Y1.MongoInvalidArgumentError(`${$} is not a valid compression mechanism. Must be one of: ${Object.keys(fS.Compressor)}.`)}return[...Y]}},connectTimeoutMS:{default:30000,type:"uint"},dbName:{type:"string"},directConnection:{default:!1,type:"boolean"},driverInfo:{default:{},type:"record"},enableUtf8Validation:{type:"boolean",default:!0},family:{transform({name:Z,values:[Y]}){const X=fV(Z,Y);if(X===4||X===6)return X;throw new Y1.MongoParseError(`Option 'family' must be 4 or 6 got ${X}.`)}},fieldsAsRaw:{type:"record"},forceServerObjectId:{default:!1,type:"boolean"},fsync:{deprecated:"Please use journal instead",target:"writeConcern",transform({name:Z,options:Y,values:[X]}){const J=N4.WriteConcern.fromOptions({writeConcern:{...Y.writeConcern,fsync:A4(Z,X)}});if(!J)throw new Y1.MongoParseError(`Unable to make a writeConcern from fsync=${X}`);return J}},heartbeatFrequencyMS:{default:1e4,type:"uint"},ignoreUndefined:{type:"boolean"},j:{deprecated:"Please use journal instead",target:"writeConcern",transform({name:Z,options:Y,values:[X]}){const J=N4.WriteConcern.fromOptions({writeConcern:{...Y.writeConcern,journal:A4(Z,X)}});if(!J)throw new Y1.MongoParseError(`Unable to make a writeConcern from journal=${X}`);return J}},journal:{target:"writeConcern",transform({name:Z,options:Y,values:[X]}){const J=N4.WriteConcern.fromOptions({writeConcern:{...Y.writeConcern,journal:A4(Z,X)}});if(!J)throw new Y1.MongoParseError(`Unable to make a writeConcern from journal=${X}`);return J}},loadBalanced:{default:!1,type:"boolean"},localThresholdMS:{default:15,type:"uint"},maxConnecting:{default:2,transform({name:Z,values:[Y]}){const X=tJ(Z,Y);if(X===0)throw new Y1.MongoInvalidArgumentError("maxConnecting must be > 0 if specified");return X}},maxIdleTimeMS:{default:0,type:"uint"},maxPoolSize:{default:100,type:"uint"},maxStalenessSeconds:{target:"readPreference",transform({name:Z,options:Y,values:[X]}){const J=tJ(Z,X);if(Y.readPreference)return V5.ReadPreference.fromOptions({readPreference:{...Y.readPreference,maxStalenessSeconds:J}});else return new V5.ReadPreference("secondary",void 0,{maxStalenessSeconds:J})}},minInternalBufferSize:{type:"uint"},minPoolSize:{default:0,type:"uint"},minHeartbeatFrequencyMS:{default:500,type:"uint"},monitorCommands:{default:!1,type:"boolean"},name:{target:"driverInfo",transform({values:[Z],options:Y}){return{...Y.driverInfo,name:String(Z)}}},noDelay:{default:!0,type:"boolean"},pkFactory:{default:E8.DEFAULT_PK_FACTORY,transform({values:[Z]}){if((0,E8.isRecord)(Z,["createPk"])&&typeof Z.createPk==="function")return Z;throw new Y1.MongoParseError(`Option pkFactory must be an object with a createPk function, got ${Z}`)}},promoteBuffers:{type:"boolean"},promoteLongs:{type:"boolean"},promoteValues:{type:"boolean"},useBigInt64:{type:"boolean"},proxyHost:{type:"string"},proxyPassword:{type:"string"},proxyPort:{type:"uint"},proxyUsername:{type:"string"},raw:{default:!1,type:"boolean"},readConcern:{transform({values:[Z],options:Y}){if(Z instanceof SV.ReadConcern||(0,E8.isRecord)(Z,["level"]))return SV.ReadConcern.fromOptions({...Y.readConcern,...Z});throw new Y1.MongoParseError(`ReadConcern must be an object, got ${JSON.stringify(Z)}`)}},readConcernLevel:{target:"readConcern",transform({values:[Z],options:Y}){return SV.ReadConcern.fromOptions({...Y.readConcern,level:Z})}},readPreference:{default:V5.ReadPreference.primary,transform({values:[Z],options:Y}){if(Z instanceof V5.ReadPreference)return V5.ReadPreference.fromOptions({readPreference:{...Y.readPreference,...Z},...Z});if((0,E8.isRecord)(Z,["mode"])){const X=V5.ReadPreference.fromOptions({readPreference:{...Y.readPreference,...Z},...Z});if(X)return X;else throw new Y1.MongoParseError(`Cannot make read preference from ${JSON.stringify(Z)}`)}if(typeof Z==="string"){const X={hedge:Y.readPreference?.hedge,maxStalenessSeconds:Y.readPreference?.maxStalenessSeconds};return new V5.ReadPreference(Z,Y.readPreference?.tags,X)}throw new Y1.MongoParseError(`Unknown ReadPreference value: ${Z}`)}},readPreferenceTags:{target:"readPreference",transform({values:Z,options:Y}){const X=Array.isArray(Z[0])?Z[0]:Z,J=[];for(let $ of X){const W=Object.create(null);if(typeof $==="string")for(let[G,K]of gS($))W[G]=K;if((0,E8.isRecord)($))for(let[G,K]of Object.entries($))W[G]=K;J.push(W)}return V5.ReadPreference.fromOptions({readPreference:Y.readPreference,readPreferenceTags:J})}},replicaSet:{type:"string"},retryReads:{default:!0,type:"boolean"},retryWrites:{default:!0,type:"boolean"},serializeFunctions:{type:"boolean"},serverSelectionTimeoutMS:{default:30000,type:"uint"},servername:{type:"string"},socketTimeoutMS:{default:0,type:"uint"},srvMaxHosts:{type:"uint",default:0},srvServiceName:{type:"string",default:"mongodb"},ssl:{target:"tls",type:"boolean"},tls:{type:"boolean"},tlsAllowInvalidCertificates:{target:"rejectUnauthorized",transform({name:Z,values:[Y]}){return!A4(Z,Y)}},tlsAllowInvalidHostnames:{target:"checkServerIdentity",transform({name:Z,values:[Y]}){return A4(Z,Y)?()=>{return}:void 0}},tlsCAFile:{type:"string"},tlsCRLFile:{type:"string"},tlsCertificateKeyFile:{type:"string"},tlsCertificateKeyFilePassword:{target:"passphrase",type:"any"},tlsInsecure:{transform({name:Z,options:Y,values:[X]}){const J=A4(Z,X);if(J)Y.checkServerIdentity=()=>{return},Y.rejectUnauthorized=!1;else Y.checkServerIdentity=Y.tlsAllowInvalidHostnames?()=>{return}:void 0,Y.rejectUnauthorized=Y.tlsAllowInvalidCertificates?!1:!0;return J}},w:{target:"writeConcern",transform({values:[Z],options:Y}){return N4.WriteConcern.fromOptions({writeConcern:{...Y.writeConcern,w:Z}})}},waitQueueTimeoutMS:{default:0,type:"uint"},writeConcern:{target:"writeConcern",transform({values:[Z],options:Y}){if((0,E8.isRecord)(Z)||Z instanceof N4.WriteConcern)return N4.WriteConcern.fromOptions({writeConcern:{...Y.writeConcern,...Z}});else if(Z==="majority"||typeof Z==="number")return N4.WriteConcern.fromOptions({writeConcern:{...Y.writeConcern,w:Z}});throw new Y1.MongoParseError(`Invalid WriteConcern cannot parse: ${JSON.stringify(Z)}`)}},wtimeout:{deprecated:"Please use wtimeoutMS instead",target:"writeConcern",transform({values:[Z],options:Y}){const X=N4.WriteConcern.fromOptions({writeConcern:{...Y.writeConcern,wtimeout:tJ("wtimeout",Z)}});if(X)return X;throw new Y1.MongoParseError("Cannot make WriteConcern from wtimeout")}},wtimeoutMS:{target:"writeConcern",transform({values:[Z],options:Y}){const X=N4.WriteConcern.fromOptions({writeConcern:{...Y.writeConcern,wtimeoutMS:tJ("wtimeoutMS",Z)}});if(X)return X;throw new Y1.MongoParseError("Cannot make WriteConcern from wtimeout")}},zlibCompressionLevel:{default:0,type:"int"},connectionType:{type:"any"},srvPoller:{type:"any"},minDHSize:{type:"any"},pskCallback:{type:"any"},secureContext:{type:"any"},enableTrace:{type:"any"},requestCert:{type:"any"},rejectUnauthorized:{type:"any"},checkServerIdentity:{type:"any"},ALPNProtocols:{type:"any"},SNICallback:{type:"any"},session:{type:"any"},requestOCSP:{type:"any"},localAddress:{type:"any"},localPort:{type:"any"},hints:{type:"any"},lookup:{type:"any"},ca:{type:"any"},cert:{type:"any"},ciphers:{type:"any"},crl:{type:"any"},ecdhCurve:{type:"any"},key:{type:"any"},passphrase:{type:"any"},pfx:{type:"any"},secureProtocol:{type:"any"},index:{type:"any"},useNewUrlParser:{type:"boolean",deprecated:"useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version"},useUnifiedTopology:{type:"boolean",deprecated:"useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version"},mongodbLogPath:{type:"any"}};vS.DEFAULT_OPTIONS=new oJ(Object.entries(vS.OPTIONS).filter(([,Z])=>Z.default!=null).map(([Z,Y])=>[Z,Y.default]));vS.FEATURE_FLAGS=new Set([Symbol.for("@@mdb.skipPingOnConnect"),Symbol.for("@@mdb.enableMongoLogger"),Symbol.for("@@mdb.internalLoggerConfig")])});var jG=w((aS)=>{Object.defineProperty(aS,"__esModule",{value:!0});aS.ServerHeartbeatFailedEvent=aS.ServerHeartbeatSucceededEvent=aS.ServerHeartbeatStartedEvent=aS.TopologyClosedEvent=aS.TopologyOpeningEvent=aS.TopologyDescriptionChangedEvent=aS.ServerClosedEvent=aS.ServerOpeningEvent=aS.ServerDescriptionChangedEvent=void 0;class hS{constructor(Z,Y,X,J){this.topologyId=Z,this.address=Y,this.previousDescription=X,this.newDescription=J}}aS.ServerDescriptionChangedEvent=hS;class mS{constructor(Z,Y){this.topologyId=Z,this.address=Y}}aS.ServerOpeningEvent=mS;class uS{constructor(Z,Y){this.topologyId=Z,this.address=Y}}aS.ServerClosedEvent=uS;class dS{constructor(Z,Y,X){this.topologyId=Z,this.previousDescription=Y,this.newDescription=X}}aS.TopologyDescriptionChangedEvent=dS;class cS{constructor(Z){this.topologyId=Z}}aS.TopologyOpeningEvent=cS;class lS{constructor(Z){this.topologyId=Z}}aS.TopologyClosedEvent=lS;class pS{constructor(Z,Y){this.connectionId=Z,this.awaited=Y}}aS.ServerHeartbeatStartedEvent=pS;class iS{constructor(Z,Y,X,J){this.connectionId=Z,this.duration=Y,this.reply=X??{},this.awaited=J}}aS.ServerHeartbeatSucceededEvent=iS;class nS{constructor(Z,Y,X,J){this.connectionId=Z,this.duration=Y,this.failure=X,this.awaited=J}}aS.ServerHeartbeatFailedEvent=nS});var EG=w((Yk)=>{Object.defineProperty(Yk,"__esModule",{value:!0});Yk.BinMsg=Yk.Msg=Yk.Response=Yk.Query=void 0;var q5=Z0(),Z3=r(),I31=x0(),eJ=z9(),BY=0,j31=2,E31=4,C31=8,O31=16,S31=32,k31=64,_31=128,x31=1,f31=2,y31=4,g31=8;class bV{constructor(Z,Y,X){this.databaseName=Z,this.query=Y;const J=`${Z}.\$cmd`;if(typeof Z!=="string")throw new Z3.MongoRuntimeError("Database name must be a string for a query");if(Y==null)throw new Z3.MongoRuntimeError("A query document must be specified for query");if(J.indexOf("\0")!==-1)throw new Z3.MongoRuntimeError("Namespace cannot contain a null character");this.ns=J,this.numberToSkip=X.numberToSkip||0,this.numberToReturn=X.numberToReturn||0,this.returnFieldSelector=X.returnFieldSelector||void 0,this.requestId=bV.getRequestId(),this.pre32Limit=X.pre32Limit,this.serializeFunctions=typeof X.serializeFunctions==="boolean"?X.serializeFunctions:!1,this.ignoreUndefined=typeof X.ignoreUndefined==="boolean"?X.ignoreUndefined:!1,this.maxBsonSize=X.maxBsonSize||16777216,this.checkKeys=typeof X.checkKeys==="boolean"?X.checkKeys:!1,this.batchSize=this.numberToReturn,this.tailable=!1,this.secondaryOk=typeof X.secondaryOk==="boolean"?X.secondaryOk:!1,this.oplogReplay=!1,this.noCursorTimeout=!1,this.awaitData=!1,this.exhaust=!1,this.partial=!1}incRequestId(){this.requestId=BY++}nextRequestId(){return BY+1}static getRequestId(){return++BY}toBin(){const Z=[];let Y=null,X=0;if(this.tailable)X|=j31;if(this.secondaryOk)X|=E31;if(this.oplogReplay)X|=C31;if(this.noCursorTimeout)X|=O31;if(this.awaitData)X|=S31;if(this.exhaust)X|=k31;if(this.partial)X|=_31;if(this.batchSize!==this.numberToReturn)this.numberToReturn=this.batchSize;const J=Buffer.alloc(20+Buffer.byteLength(this.ns)+1+4+4);Z.push(J);const $=q5.serialize(this.query,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined});if(Z.push($),this.returnFieldSelector&&Object.keys(this.returnFieldSelector).length>0)Y=q5.serialize(this.returnFieldSelector,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined}),Z.push(Y);const W=J.length+$.length+(Y?Y.length:0);let G=4;return J[3]=W>>24&255,J[2]=W>>16&255,J[1]=W>>8&255,J[0]=W&255,J[G+3]=this.requestId>>24&255,J[G+2]=this.requestId>>16&255,J[G+1]=this.requestId>>8&255,J[G]=this.requestId&255,G=G+4,J[G+3]=0>>24&255,J[G+2]=0>>16&255,J[G+1]=0>>8&255,J[G]=0&255,G=G+4,J[G+3]=eJ.OP_QUERY>>24&255,J[G+2]=eJ.OP_QUERY>>16&255,J[G+1]=eJ.OP_QUERY>>8&255,J[G]=eJ.OP_QUERY&255,G=G+4,J[G+3]=X>>24&255,J[G+2]=X>>16&255,J[G+1]=X>>8&255,J[G]=X&255,G=G+4,G=G+J.write(this.ns,G,"utf8")+1,J[G-1]=0,J[G+3]=this.numberToSkip>>24&255,J[G+2]=this.numberToSkip>>16&255,J[G+1]=this.numberToSkip>>8&255,J[G]=this.numberToSkip&255,G=G+4,J[G+3]=this.numberToReturn>>24&255,J[G+2]=this.numberToReturn>>16&255,J[G+1]=this.numberToReturn>>8&255,J[G]=this.numberToReturn&255,G=G+4,Z}}Yk.Query=bV;class rS{constructor(Z,Y,X,J){this.documents=new Array(0),this.parsed=!1,this.raw=Z,this.data=X,this.opts=J??{useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.length=Y.length,this.requestId=Y.requestId,this.responseTo=Y.responseTo,this.opCode=Y.opCode,this.fromCompressed=Y.fromCompressed,this.useBigInt64=typeof this.opts.useBigInt64==="boolean"?this.opts.useBigInt64:!1,this.promoteLongs=typeof this.opts.promoteLongs==="boolean"?this.opts.promoteLongs:!0,this.promoteValues=typeof this.opts.promoteValues==="boolean"?this.opts.promoteValues:!0,this.promoteBuffers=typeof this.opts.promoteBuffers==="boolean"?this.opts.promoteBuffers:!1,this.bsonRegExp=typeof this.opts.bsonRegExp==="boolean"?this.opts.bsonRegExp:!1}isParsed(){return this.parsed}parse(Z){if(this.parsed)return;Z=Z??{};const Y=Z.raw||!1,X=Z.documentsReturnedIn||null,J=Z.useBigInt64??this.opts.useBigInt64,$=Z.promoteLongs??this.opts.promoteLongs,W=Z.promoteValues??this.opts.promoteValues,G=Z.promoteBuffers??this.opts.promoteBuffers,K=Z.bsonRegExp??this.opts.bsonRegExp;let Q;const z={useBigInt64:J,promoteLongs:$,promoteValues:W,promoteBuffers:G,bsonRegExp:K};this.index=20,this.responseFlags=this.data.readInt32LE(0),this.cursorId=new q5.Long(this.data.readInt32LE(4),this.data.readInt32LE(8)),this.startingFrom=this.data.readInt32LE(12),this.numberReturned=this.data.readInt32LE(16),this.documents=new Array(this.numberReturned),this.cursorNotFound=(this.responseFlags&x31)!==0,this.queryFailure=(this.responseFlags&f31)!==0,this.shardConfigStale=(this.responseFlags&y31)!==0,this.awaitCapable=(this.responseFlags&g31)!==0;for(let H=0;H<this.numberReturned;H++){if(Q=this.data[this.index]|this.data[this.index+1]<<8|this.data[this.index+2]<<16|this.data[this.index+3]<<24,Y)this.documents[H]=this.data.slice(this.index,this.index+Q);else this.documents[H]=q5.deserialize(this.data.slice(this.index,this.index+Q),z);this.index=this.index+Q}if(this.documents.length===1&&X!=null&&Y){const H={};H[X]=!0,z.fieldsAsRaw=H;const F=q5.deserialize(this.documents[0],z);this.documents=[F]}this.parsed=!0}}Yk.Response=rS;var tS=1,oS=2,eS=1<<16;class vV{constructor(Z,Y,X){if(this.databaseName=Z,this.command=Y,this.options=X,Y==null)throw new Z3.MongoInvalidArgumentError("Query document must be specified for query");if(this.command.$db=Z,X.readPreference&&X.readPreference.mode!==I31.ReadPreference.PRIMARY)this.command.$readPreference=X.readPreference.toJSON();this.options=X??{},this.requestId=X.requestId?X.requestId:vV.getRequestId(),this.serializeFunctions=typeof X.serializeFunctions==="boolean"?X.serializeFunctions:!1,this.ignoreUndefined=typeof X.ignoreUndefined==="boolean"?X.ignoreUndefined:!1,this.checkKeys=typeof X.checkKeys==="boolean"?X.checkKeys:!1,this.maxBsonSize=X.maxBsonSize||16777216,this.checksumPresent=!1,this.moreToCome=X.moreToCome||!1,this.exhaustAllowed=typeof X.exhaustAllowed==="boolean"?X.exhaustAllowed:!1}toBin(){const Z=[];let Y=0;if(this.checksumPresent)Y|=tS;if(this.moreToCome)Y|=oS;if(this.exhaustAllowed)Y|=eS;const X=Buffer.alloc(20);Z.push(X);let J=X.length;const $=this.command;return J+=this.makeDocumentSegment(Z,$),X.writeInt32LE(J,0),X.writeInt32LE(this.requestId,4),X.writeInt32LE(0,8),X.writeInt32LE(eJ.OP_MSG,12),X.writeUInt32LE(Y,16),Z}makeDocumentSegment(Z,Y){const X=Buffer.alloc(1);X[0]=0;const J=this.serializeBson(Y);return Z.push(X),Z.push(J),X.length+J.length}serializeBson(Z){return q5.serialize(Z,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined})}static getRequestId(){return BY=BY+1&2147483647,BY}}Yk.Msg=vV;class Zk{constructor(Z,Y,X,J){this.parsed=!1,this.raw=Z,this.data=X,this.opts=J??{useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.length=Y.length,this.requestId=Y.requestId,this.responseTo=Y.responseTo,this.opCode=Y.opCode,this.fromCompressed=Y.fromCompressed,this.responseFlags=X.readInt32LE(0),this.checksumPresent=(this.responseFlags&tS)!==0,this.moreToCome=(this.responseFlags&oS)!==0,this.exhaustAllowed=(this.responseFlags&eS)!==0,this.useBigInt64=typeof this.opts.useBigInt64==="boolean"?this.opts.useBigInt64:!1,this.promoteLongs=typeof this.opts.promoteLongs==="boolean"?this.opts.promoteLongs:!0,this.promoteValues=typeof this.opts.promoteValues==="boolean"?this.opts.promoteValues:!0,this.promoteBuffers=typeof this.opts.promoteBuffers==="boolean"?this.opts.promoteBuffers:!1,this.bsonRegExp=typeof this.opts.bsonRegExp==="boolean"?this.opts.bsonRegExp:!1,this.documents=[]}isParsed(){return this.parsed}parse(Z){if(this.parsed)return;Z=Z??{},this.index=4;const Y=Z.raw||!1,X=Z.documentsReturnedIn||null,J=Z.useBigInt64??this.opts.useBigInt64,$=Z.promoteLongs??this.opts.promoteLongs,W=Z.promoteValues??this.opts.promoteValues,G=Z.promoteBuffers??this.opts.promoteBuffers,K=Z.bsonRegExp??this.opts.bsonRegExp,Q=this.parseBsonSerializationOptions(Z),z={useBigInt64:J,promoteLongs:$,promoteValues:W,promoteBuffers:G,bsonRegExp:K,validation:Q};while(this.index<this.data.length){const H=this.data.readUInt8(this.index++);if(H===0){const F=this.data.readUInt32LE(this.index),U=this.data.slice(this.index,this.index+F);this.documents.push(Y?U:q5.deserialize(U,z)),this.index+=F}else if(H===1)throw new Z3.MongoRuntimeError("OP_MSG Payload Type 1 detected unsupported protocol")}if(this.documents.length===1&&X!=null&&Y){const H={};H[X]=!0,z.fieldsAsRaw=H;const F=q5.deserialize(this.documents[0],z);this.documents=[F]}this.parsed=!0}parseBsonSerializationOptions({enableUtf8Validation:Z}){if(Z===!1)return{utf8:!1};return{utf8:{writeErrors:!1}}}}Yk.BinMsg=Zk});var cV=w((zk)=>{var uV=function(Z){if(Z instanceof Wk.Msg)return(0,q7.deepCopy)(Z.command);if(Z.query?.$query){let J;if(Z.ns==="admin.$cmd")J=Object.assign({},Z.query.$query);else J={find:d31(Z)},Object.keys(Jk).forEach(($)=>{if(Z.query[$]!=null)J[Jk[$]]=(0,q7.deepCopy)(Z.query[$])});if(Object.keys($k).forEach(($)=>{const W=$;if(Z[W]!=null)J[$k[W]]=(0,q7.deepCopy)(Z[W])}),c31.forEach(($)=>{if(Z[$])J[$]=Z[$]}),Z.pre32Limit!=null)J.limit=Z.pre32Limit;if(Z.query.$explain)return{explain:J};return J}const Y={},X={};if(Z.query){for(let J in Z.query)Y[J]=(0,q7.deepCopy)(Z.query[J]);X.query=Y}for(let J in Z){if(J==="query")continue;X[J]=(0,q7.deepCopy)(Z[J])}return Z.query?Y:X},l31=function(Z,Y){if(!Y)return Y;if(Z instanceof Wk.Msg)return(0,q7.deepCopy)(Y.result?Y.result:Y);if(Z.query&&Z.query.$query!=null)return{ok:1,cursor:{id:(0,q7.deepCopy)(Y.cursorId),ns:u31(Z),firstBatch:(0,q7.deepCopy)(Y.documents)}};return(0,q7.deepCopy)(Y.result?Y.result:Y)},dV=function(Z){let Y;if("id"in Z)Y=Z.id;return{address:Z.address,serviceId:Z.serviceId,connectionId:Y}};Object.defineProperty(zk,"__esModule",{value:!0});zk.SENSITIVE_COMMANDS=zk.CommandFailedEvent=zk.CommandSucceededEvent=zk.CommandStartedEvent=void 0;var Y3=c0(),q7=$1(),Wk=EG();class Gk{constructor(Z,Y){this.name=Y3.COMMAND_STARTED;const X=uV(Y),J=hV(X),{address:$,connectionId:W,serviceId:G}=dV(Z);if(zk.SENSITIVE_COMMANDS.has(J))this.commandObj={},this.commandObj[J]=!0;this.address=$,this.connectionId=W,this.serviceId=G,this.requestId=Y.requestId,this.databaseName=Y.databaseName,this.commandName=J,this.command=mV(J,X,X)}get hasServiceId(){return!!this.serviceId}}zk.CommandStartedEvent=Gk;class Kk{constructor(Z,Y,X,J){this.name=Y3.COMMAND_SUCCEEDED;const $=uV(Y),W=hV($),{address:G,connectionId:K,serviceId:Q}=dV(Z);this.address=G,this.connectionId=K,this.serviceId=Q,this.requestId=Y.requestId,this.commandName=W,this.duration=(0,q7.calculateDurationInMs)(J),this.reply=mV(W,$,l31(Y,X))}get hasServiceId(){return!!this.serviceId}}zk.CommandSucceededEvent=Kk;class Qk{constructor(Z,Y,X,J){this.name=Y3.COMMAND_FAILED;const $=uV(Y),W=hV($),{address:G,connectionId:K,serviceId:Q}=dV(Z);this.address=G,this.connectionId=K,this.serviceId=Q,this.requestId=Y.requestId,this.commandName=W,this.duration=(0,q7.calculateDurationInMs)(J),this.failure=mV(W,$,X)}get hasServiceId(){return!!this.serviceId}}zk.CommandFailedEvent=Qk;zk.SENSITIVE_COMMANDS=new Set(["authenticate","saslStart","saslContinue","getnonce","createUser","updateUser","copydbgetnonce","copydbsaslstart","copydb"]);var m31=new Set(["hello",Y3.LEGACY_HELLO_COMMAND,Y3.LEGACY_HELLO_COMMAND_CAMEL_CASE]),hV=(Z)=>Object.keys(Z)[0],u31=(Z)=>Z.ns,d31=(Z)=>Z.ns.split(".")[1],mV=(Z,Y,X)=>zk.SENSITIVE_COMMANDS.has(Z)||m31.has(Z)&&Y.speculativeAuthenticate?{}:X,Jk={$query:"filter",$orderby:"sort",$hint:"hint",$comment:"comment",$maxScan:"maxScan",$max:"max",$min:"min",$returnKey:"returnKey",$showDiskLoc:"showRecordId",$maxTimeMS:"maxTimeMS",$snapshot:"snapshot"},$k={numberToSkip:"skip",numberToReturn:"batchSize",returnFieldSelector:"projection"},c31=["tailable","oplogReplay","noCursorTimeout","awaitData","partial","exhaust"]});var qk=w((Uk)=>{var t31=function(Z){const Y=Z instanceof X3.Msg?Z.command:Z.query,X=Object.keys(Y)[0];return!kG.uncompressibleCommands.has(X)},J3=function(Z,Y){const X=Z[SG],J=X.getInt32();if(J==null)return Y();if(J<0)return Y(new lV.MongoParseError(`Invalid message size: ${J}`));if(J>Z.maxBsonMessageSize)return Y(new lV.MongoParseError(`Invalid message size: ${J}, max allowed: ${Z.maxBsonMessageSize}`));if(J>X.length)return Y();const $=X.read(J),W={length:$.readInt32LE(0),requestId:$.readInt32LE(4),responseTo:$.readInt32LE(8),opCode:$.readInt32LE(12)},G=()=>{if(Z.isMonitoringConnection){const H=X.getInt32();if(H!=null&&H<=X.length)return!0}return!1};let K=W.opCode===OG.OP_MSG?X3.BinMsg:X3.Response;if(W.opCode!==OG.OP_COMPRESSED){const H=$.subarray(L5);if(G())return J3(Z,Y);if(Z.emit("message",new K($,W,H)),X.length>=4)return J3(Z,Y);return Y()}W.fromCompressed=!0,W.opCode=$.readInt32LE(L5),W.length=$.readInt32LE(L5+4);const Q=$[L5+8],z=$.slice(L5+9);K=W.opCode===OG.OP_MSG?X3.BinMsg:X3.Response,(0,kG.decompress)(Q,z).then((H)=>{if(H.length!==W.length)return Y(new lV.MongoDecompressionError("Message body and message header must be the same length"));if(G())return J3(Z,Y);if(Z.emit("message",new K($,W,H)),X.length>=4)return J3(Z,Y);return Y()},(H)=>{return Y(H)})};Object.defineProperty(Uk,"__esModule",{value:!0});Uk.MessageStream=void 0;var a31=import.meta.require("stream"),lV=r(),s31=$1(),X3=EG(),kG=RG(),OG=z9(),L5=16,Hk=9,r31=67108864,SG=Symbol("buffer");class Fk extends a31.Duplex{constructor(Z={}){super(Z);this.isMonitoringConnection=!1,this.maxBsonMessageSize=Z.maxBsonMessageSize||r31,this[SG]=new s31.BufferPool}get buffer(){return this[SG]}_write(Z,Y,X){this[SG].append(Z),J3(this,X)}_read(){return}writeCommand(Z,Y){const X=Y.agreedCompressor??"none";if(X==="none"||!t31(Z)){const K=Z.toBin();this.push(Array.isArray(K)?Buffer.concat(K):K);return}const J=Buffer.concat(Z.toBin()),$=J.slice(L5),W=J.readInt32LE(12),G={agreedCompressor:X,zlibCompressionLevel:Y.zlibCompressionLevel??0};(0,kG.compress)(G,$).then((K)=>{const Q=Buffer.alloc(L5);Q.writeInt32LE(L5+Hk+K.length,0),Q.writeInt32LE(Z.requestId,4),Q.writeInt32LE(0,8),Q.writeInt32LE(OG.OP_COMPRESSED,12);const z=Buffer.alloc(Hk);z.writeInt32LE(W,0),z.writeInt32LE($.length,4),z.writeUInt8(kG.Compressor[X],8),this.push(Buffer.concat([Q,z,K]))},(K)=>{Y.cb(K)})}}Uk.MessageStream=Fk});var Mk=w((wk)=>{Object.defineProperty(wk,"__esModule",{value:!0});wk.StreamDescription=void 0;var o31=k6(),e31=jJ(),Z$1=["minWireVersion","maxWireVersion","maxBsonObjectSize","maxMessageSizeBytes","maxWriteBatchSize","logicalSessionTimeoutMinutes"];class Lk{constructor(Z,Y){this.address=Z,this.type=o31.ServerType.Unknown,this.minWireVersion=void 0,this.maxWireVersion=void 0,this.maxBsonObjectSize=16777216,this.maxMessageSizeBytes=48000000,this.maxWriteBatchSize=1e5,this.logicalSessionTimeoutMinutes=Y?.logicalSessionTimeoutMinutes,this.loadBalanced=!!Y?.loadBalanced,this.compressors=Y&&Y.compressors&&Array.isArray(Y.compressors)?Y.compressors:[]}receiveResponse(Z){if(Z==null)return;this.type=(0,e31.parseServerType)(Z);for(let Y of Z$1){if(Z[Y]!=null)this[Y]=Z[Y];if("__nodejs_mock_server__"in Z)this.__nodejs_mock_server__=Z.__nodejs_mock_server__}if(Z.compression)this.compressor=this.compressors.filter((Y)=>Z.compression?.includes(Y))[0]}}wk.StreamDescription=Lk});var $3=w((jk)=>{var Ik=function(Z){return Z.description.logicalSessionTimeoutMinutes!=null},G$1=function(Z){const Y=Z.description;if(Y==null)return!1;return(0,w5.maxWireVersion)(Z)>=6&&!Y.__nodejs_mock_server__},K$1=function(Z,Y){if(Y.proxyHost)return Y.hostAddress.toString();const{remoteAddress:X,remotePort:J}=Z;if(typeof X==="string"&&typeof J==="number")return w5.HostAddress.fromHostPort(X,J).toString();return(0,w5.uuidV4)().toString("hex")},Q$1=function(Z,Y,X,J){X=X??{};const $={requestId:Y.requestId,cb:J,session:X.session,noResponse:typeof X.noResponse==="boolean"?X.noResponse:!1,documentsReturnedIn:X.documentsReturnedIn,useBigInt64:typeof X.useBigInt64==="boolean"?X.useBigInt64:!1,promoteLongs:typeof X.promoteLongs==="boolean"?X.promoteLongs:!0,promoteValues:typeof X.promoteValues==="boolean"?X.promoteValues:!0,promoteBuffers:typeof X.promoteBuffers==="boolean"?X.promoteBuffers:!1,bsonRegExp:typeof X.bsonRegExp==="boolean"?X.bsonRegExp:!1,enableUtf8Validation:typeof X.enableUtf8Validation==="boolean"?X.enableUtf8Validation:!0,raw:typeof X.raw==="boolean"?X.raw:!1,started:0};if(Z[d7]&&Z[d7].compressor){if($.agreedCompressor=Z[d7].compressor,Z[d7].zlibCompressionLevel)$.zlibCompressionLevel=Z[d7].zlibCompressionLevel}if(typeof X.socketTimeoutMS==="number")Z[X8].setTimeout(X.socketTimeoutMS);else if(Z.socketTimeoutMS!==0)Z[X8].setTimeout(Z.socketTimeoutMS);if(Z.monitorCommands)Z.emit(y0.COMMAND_STARTED,new _G.CommandStartedEvent(Z,Y)),$.started=(0,w5.now)(),$.cb=(W,G)=>{if(W&&G?.ok!==1)Z.emit(y0.COMMAND_FAILED,new _G.CommandFailedEvent(Z,Y,W,$.started));else if(G&&(G.ok===0||G.$err))Z.emit(y0.COMMAND_FAILED,new _G.CommandFailedEvent(Z,Y,G,$.started));else Z.emit(y0.COMMAND_SUCCEEDED,new _G.CommandSucceededEvent(Z,Y,G,$.started));if(typeof J==="function")J(W,W instanceof u7.MongoWriteConcernError?void 0:G)};if(!$.noResponse)Z[L7].set($.requestId,$);try{Z[m7].writeCommand(Y,$)}catch(W){if(!$.noResponse){Z[L7].delete($.requestId),$.cb(W);return}}if($.noResponse)$.cb()};Object.defineProperty(jk,"__esModule",{value:!0});jk.hasSessionSupport=jk.CryptoConnection=jk.Connection=void 0;var Bk=import.meta.require("timers"),Y$1=import.meta.require("util"),R5=c0(),u7=r(),X$1=U6(),Nk=OJ(),w5=$1(),_G=cV(),Ak=EG(),J$1=qk(),$$1=Mk(),Dk=cF(),X8=Symbol("stream"),L7=Symbol("queue"),m7=Symbol("messageStream"),pV=Symbol("generation"),iV=Symbol("lastUseTime"),nV=Symbol("clusterTime"),d7=Symbol("description"),aV=Symbol("hello"),Pk=Symbol("autoEncrypter"),xG=Symbol("delayedTimeoutId"),W$1="Connection internal queue contains more than 1 operation description";class y0 extends X$1.TypedEventEmitter{constructor(Z,Y){super();this.commandAsync=(0,Y$1.promisify)((X,J,$,W)=>this.command(X,J,$,W)),this.id=Y.id,this.address=K$1(Z,Y),this.socketTimeoutMS=Y.socketTimeoutMS??0,this.monitorCommands=Y.monitorCommands,this.serverApi=Y.serverApi,this.closed=!1,this[aV]=null,this[nV]=null,this[d7]=new $$1.StreamDescription(this.address,Y),this[pV]=Y.generation,this[iV]=(0,w5.now)(),this[L7]=new Map,this[m7]=new J$1.MessageStream({...Y,maxBsonMessageSize:this.hello?.maxBsonMessageSize}),this[X8]=Z,this[xG]=null,this[m7].on("message",(X)=>this.onMessage(X)),this[m7].on("error",(X)=>this.onError(X)),this[X8].on("close",()=>this.onClose()),this[X8].on("timeout",()=>this.onTimeout()),this[X8].on("error",()=>{}),this[X8].pipe(this[m7]),this[m7].pipe(this[X8])}get description(){return this[d7]}get hello(){return this[aV]}set hello(Z){this[d7].receiveResponse(Z),this[d7]=Object.freeze(this[d7]),this[aV]=Z}set isMonitoringConnection(Z){this[m7].isMonitoringConnection=Z}get isMonitoringConnection(){return this[m7].isMonitoringConnection}get serviceId(){return this.hello?.serviceId}get loadBalanced(){return this.description.loadBalanced}get generation(){return this[pV]||0}set generation(Z){this[pV]=Z}get idleTime(){return(0,w5.calculateDurationInMs)(this[iV])}get clusterTime(){return this[nV]}get stream(){return this[X8]}markAvailable(){this[iV]=(0,w5.now)()}onError(Z){this.cleanup(!0,Z)}onClose(){const Z=`connection ${this.id} to ${this.address} closed`;this.cleanup(!0,new u7.MongoNetworkError(Z))}onTimeout(){this[xG]=(0,Bk.setTimeout)(()=>{const Z=`connection ${this.id} to ${this.address} timed out`,Y=this.hello==null;this.cleanup(!0,new u7.MongoNetworkTimeoutError(Z,{beforeHandshake:Y}))},1).unref()}onMessage(Z){const Y=this[xG];if(Y!=null)(0,Bk.clearTimeout)(Y),this[xG]=null;const X=this[X8].timeout??0;this[X8].setTimeout(0),this.emit("message",Z);let J=this[L7].get(Z.responseTo);if(!J&&this.isMonitoringConnection)if(this[L7].size>1)this.cleanup(!0,new u7.MongoRuntimeError(W$1));else{const W=this[L7].entries().next();if(W.value!=null){const[G,K]=W.value;J=K,this[L7].delete(G)}}if(!J)return;const $=J.cb;if(this[L7].delete(Z.responseTo),("moreToCome"in Z)&&Z.moreToCome)this[L7].set(Z.requestId,J),this[X8].setTimeout(X);try{Z.parse(J)}catch(W){$(W);return}if(Z.documents[0]){const W=Z.documents[0],G=J.session;if(G)(0,Nk.updateSessionFromResponse)(G,W);if(W.$clusterTime)this[nV]=W.$clusterTime,this.emit(y0.CLUSTER_TIME_RECEIVED,W.$clusterTime);if(W.writeConcernError){$(new u7.MongoWriteConcernError(W.writeConcernError,W),W);return}if(W.ok===0||W.$err||W.errmsg||W.code){$(new u7.MongoServerError(W));return}}$(void 0,Z.documents[0])}destroy(Z,Y){if(this.closed){process.nextTick(()=>Y?.());return}if(typeof Y==="function")this.once("close",()=>process.nextTick(()=>Y()));this.removeAllListeners(y0.PINNED),this.removeAllListeners(y0.UNPINNED);const X=`connection ${this.id} to ${this.address} closed`;this.cleanup(Z.force,new u7.MongoNetworkError(X))}cleanup(Z,Y){if(this.closed)return;this.closed=!0;const X=()=>{for(let J of this[L7].values())J.cb(Y);this[L7].clear(),this.emit(y0.CLOSE)};if(this[X8].removeAllListeners(),this[m7].removeAllListeners(),this[m7].destroy(),Z){this[X8].destroy(),X();return}if(!this[X8].writableEnded)this[X8].end(()=>{this[X8].destroy(),X()});else X()}command(Z,Y,X,J){let $={...Y};const W=(0,Dk.getReadPreference)(X),G=G$1(this),K=X?.session;let Q=this.clusterTime;if(this.serverApi){const{version:F,strict:U,deprecationErrors:V}=this.serverApi;if($.apiVersion=F,U!=null)$.apiStrict=U;if(V!=null)$.apiDeprecationErrors=V}if(Ik(this)&&K){if(K.clusterTime&&Q&&K.clusterTime.clusterTime.greaterThan(Q.clusterTime))Q=K.clusterTime;const F=(0,Nk.applySession)(K,$,X);if(F)return J(F)}else if(K?.explicit)return J(new u7.MongoCompatibilityError("Current topology does not support sessions"));if(Q)$.$clusterTime=Q;if((0,Dk.isSharded)(this)&&!G&&W&&W.mode!=="primary")$={$query:$,$readPreference:W.toJSON()};const z=Object.assign({numberToSkip:0,numberToReturn:-1,checkKeys:!1,secondaryOk:W.secondaryOk()},X),H=G?new Ak.Msg(Z.db,$,z):new Ak.Query(Z.db,$,z);try{Q$1(this,H,z,J)}catch(F){J(F)}}}y0.COMMAND_STARTED=R5.COMMAND_STARTED;y0.COMMAND_SUCCEEDED=R5.COMMAND_SUCCEEDED;y0.COMMAND_FAILED=R5.COMMAND_FAILED;y0.CLUSTER_TIME_RECEIVED=R5.CLUSTER_TIME_RECEIVED;y0.CLOSE=R5.CLOSE;y0.MESSAGE=R5.MESSAGE;y0.PINNED=R5.PINNED;y0.UNPINNED=R5.UNPINNED;jk.Connection=y0;class Tk extends y0{constructor(Z,Y){super(Z,Y);this[Pk]=Y.autoEncrypter}command(Z,Y,X,J){const $=this[Pk];if(!$)return J(new u7.MongoMissingDependencyError("No AutoEncrypter available for encryption"));const W=(0,w5.maxWireVersion)(this);if(W===0)return super.command(Z,Y,X,J);if(W<8){J(new u7.MongoCompatibilityError("Auto-encryption requires a minimum MongoDB version of 4.2"));return}const G=Y.find||Y.findAndModify?Y.sort:null,K=Y.createIndexes?Y.indexes.map((Q)=>Q.key):null;$.encrypt(Z.toString(),Y,X).then((Q)=>{if(G!=null&&(Y.find||Y.findAndModify))Q.sort=G;if(K!=null&&Y.createIndexes)for(let[z,H]of K.entries())Q.indexes[z].key=H;super.command(Z,Q,X,(z,H)=>{if(z||H==null){J(z,H);return}$.decrypt(H,X).then((F)=>J(void 0,F),(F)=>J(F))})},(Q)=>{if(Q)J(Q,null)})}}jk.CryptoConnection=Tk;jk.hasSessionSupport=Ik});var xk=w((kk)=>{Object.defineProperty(kk,"__esModule",{value:!0});kk.MongoCR=void 0;var Ck=import.meta.require("crypto"),F$1=r(),Ok=$1(),U$1=M4();class Sk extends U$1.AuthProvider{async auth(Z){const{connection:Y,credentials:X}=Z;if(!X)throw new F$1.MongoMissingCredentialsError("AuthContext must provide credentials.");const{username:J,password:$,source:W}=X,{nonce:G}=await Y.commandAsync((0,Ok.ns)(`${W}.\$cmd`),{getnonce:1},void 0),K=Ck.createHash("md5").update(`${J}:mongo:${$}`,"utf8").digest("hex"),Q=Ck.createHash("md5").update(`${G}${J}${K}`,"utf8").digest("hex"),z={authenticate:1,user:J,nonce:G,key:Q};await Y.commandAsync((0,Ok.ns)(`${W}.\$cmd`),z,void 0)}}kk.MongoCR=Sk});var bk=w((yk)=>{async function A$1(Z){function Y(X){if(!X.AccessKeyId||!X.SecretAccessKey||!X.Token)throw new T9.MongoMissingCredentialsError("Could not obtain temporary MONGODB-AWS credentials");return new w$1.MongoCredentials({username:X.AccessKeyId,password:X.SecretAccessKey,source:Z.source,mechanism:R$1.AuthMechanism.MONGODB_AWS,mechanismProperties:{AWS_SESSION_TOKEN:X.Token}})}if(I9.credentialProvider??=(0,fG.getAwsCredentialProvider)(),("kModuleError"in I9.credentialProvider)){if(sV.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI)return Y(await(0,D4.request)(`${N$1}${sV.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI}`));const X=await(0,D4.request)(`${tV}/latest/api/token`,{method:"PUT",json:!1,headers:{"X-aws-ec2-metadata-token-ttl-seconds":30}}),J=await(0,D4.request)(`${tV}/${fk}`,{json:!1,headers:{"X-aws-ec2-metadata-token":X}}),$=await(0,D4.request)(`${tV}/${fk}/${J}`,{headers:{"X-aws-ec2-metadata-token":X}});return Y($)}else{let{AWS_STS_REGIONAL_ENDPOINTS:X="",AWS_REGION:J=""}=sV.env;X=X.toLowerCase(),J=J.toLowerCase();const $=J.length!==0&&X.length!==0,W=X==="regional"||X==="legacy"&&!M$1.has(J),G=$&&W?I9.credentialProvider.fromNodeProviderChain({clientConfig:{region:J}}):I9.credentialProvider.fromNodeProviderChain();try{const K=await G();return Y({AccessKeyId:K.accessKeyId,SecretAccessKey:K.secretAccessKey,Token:K.sessionToken,Expiration:K.expiration})}catch(K){throw new T9.MongoAWSError(K.message)}}}var D$1=function(Z){const Y=Z.split(".");if(Y.length===1||Y[1]==="amazonaws")return"us-east-1";return Y[1]};Object.defineProperty(yk,"__esModule",{value:!0});yk.MongoDBAWS=void 0;var V$1=import.meta.require("crypto"),sV=import.meta.require("process"),q$1=import.meta.require("util"),rV=Z0(),fG=F7(),T9=r(),D4=$1(),L$1=M4(),w$1=XG(),R$1=b7(),M$1=new Set(["ap-northeast-1","ap-south-1","ap-southeast-1","ap-southeast-2","aws-global","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),B$1=110,N$1="http://169.254.170.2",tV="http://169.254.169.254",fk="/latest/meta-data/iam/security-credentials",oV={useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1};class I9 extends L$1.AuthProvider{constructor(){super();this.randomBytesAsync=(0,q$1.promisify)(V$1.randomBytes)}async auth(Z){const{connection:Y}=Z;if(!Z.credentials)throw new T9.MongoMissingCredentialsError("AuthContext must provide credentials.");if("kModuleError"in fG.aws4)throw fG.aws4.kModuleError;const{sign:X}=fG.aws4;if((0,D4.maxWireVersion)(Y)<9)throw new T9.MongoCompatibilityError("MONGODB-AWS authentication requires MongoDB version 4.4 or later");if(!Z.credentials.username)Z.credentials=await A$1(Z.credentials);const{credentials:J}=Z,$=J.username,W=J.password,G=J.mechanismProperties.AWS_SESSION_TOKEN,K=$&&W&&G?{accessKeyId:$,secretAccessKey:W,sessionToken:G}:$&&W?{accessKeyId:$,secretAccessKey:W}:void 0,Q=J.source,z=await this.randomBytesAsync(32),H={saslStart:1,mechanism:"MONGODB-AWS",payload:rV.serialize({r:z,p:B$1},oV)},F=await Y.commandAsync((0,D4.ns)(`${Q}.\$cmd`),H,void 0),U=rV.deserialize(F.payload.buffer,oV),V=U.h,q=U.s.buffer;if(q.length!==64)throw new T9.MongoRuntimeError(`Invalid server nonce length ${q.length}, expected 64`);if(!D4.ByteUtils.equals(q.subarray(0,z.byteLength),z))throw new T9.MongoRuntimeError("Server nonce does not begin with client nonce");if(V.length<1||V.length>255||V.indexOf("..")!==-1)throw new T9.MongoRuntimeError(`Server returned an invalid host: "${V}"`);const L="Action=GetCallerIdentity&Version=2011-06-15",R=X({method:"POST",host:V,region:D$1(U.h),service:"sts",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Length":L.length,"X-MongoDB-Server-Nonce":D4.ByteUtils.toBase64(q),"X-MongoDB-GS2-CB-Flag":"n"},path:"/",body:L},K),B={a:R.headers.Authorization,d:R.headers["X-Amz-Date"]};if(G)B.t=G;const N={saslContinue:1,conversationId:1,payload:rV.serialize(B,oV)};await Y.commandAsync((0,D4.ns)(`${Q}.\$cmd`),N,void 0)}}I9.credentialProvider=null;yk.MongoDBAWS=I9});var Zq=w((hk)=>{var eV=function(Z){return{saslStart:1,mechanism:I$1.AuthMechanism.MONGODB_OIDC,payload:P$1.BSON.serialize({jwt:Z})}};Object.defineProperty(hk,"__esModule",{value:!0});hk.commandDocument=hk.ServiceWorkflow=void 0;var P$1=S6(),T$1=$1(),I$1=b7();class vk{async execute(Z,Y){const X=await this.getToken(Y),J=eV(X);return Z.commandAsync((0,T$1.ns)(Y.source),J,void 0)}async speculativeAuth(Z){const Y=await this.getToken(Z),X=eV(Y);return X.db=Z.source,{speculativeAuthenticate:X}}}hk.ServiceWorkflow=vk;hk.commandDocument=eV});var lk=w((dk)=>{Object.defineProperty(dk,"__esModule",{value:!0});dk.AwsServiceWorkflow=void 0;var E$1=import.meta.require("fs"),C$1=r(),O$1=Zq(),S$1="AWS_WEB_IDENTITY_TOKEN_FILE must be set in the environment.";class uk extends O$1.ServiceWorkflow{constructor(){super()}async getToken(){const Z=process.env.AWS_WEB_IDENTITY_TOKEN_FILE;if(!Z)throw new C$1.MongoAWSError(S$1);return E$1.promises.readFile(Z,"utf8")}}dk.AwsServiceWorkflow=uk});var yG=w((nk)=>{Object.defineProperty(nk,"__esModule",{value:!0});nk.Cache=nk.ExpiringCacheEntry=void 0;var k$1=300000;class pk{constructor(Z){this.expiration=this.expirationTime(Z)}isValid(){return this.expiration-Date.now()>k$1}expirationTime(Z){return Date.now()+Z*1000}}nk.ExpiringCacheEntry=pk;class ik{constructor(){this.entries=new Map}clear(){this.entries.clear()}hashedCacheKey(Z,Y,X){return JSON.stringify([Z,Y,X])}}nk.Cache=ik});var ek=w((tk)=>{Object.defineProperty(tk,"__esModule",{value:!0});tk.AzureTokenCache=tk.AzureTokenEntry=void 0;var sk=yG();class Yq extends sk.ExpiringCacheEntry{constructor(Z,Y){super(Y);this.token=Z}}tk.AzureTokenEntry=Yq;class rk extends sk.Cache{addEntry(Z,Y){const X=new Yq(Y.access_token,Y.expires_in);return this.entries.set(Z,X),X}cacheKey(Z){return Z}deleteEntry(Z){this.entries.delete(Z)}getEntry(Z){return this.entries.get(Z)}}tk.AzureTokenCache=rk});var $_=w((X_)=>{async function u$1(Z){const Y=`${b$1}&resource=${Z}`;return await(0,f$1.request)(Y,{json:!0,headers:v$1})}var d$1=function(Z){if(Z==null||typeof Z!=="object")return!1;return("access_token"in Z)&&("expires_in"in Z)};Object.defineProperty(X_,"__esModule",{value:!0});X_.AzureServiceWorkflow=void 0;var Z_=r(),f$1=$1(),y$1=ek(),g$1=Zq(),b$1="http://169.254.169.254/metadata/identity/oauth2/token?api-version=2018-02-01",v$1=Object.freeze({Metadata:"true",Accept:"application/json"}),h$1="Azure endpoint did not return a value with only access_token and expires_in properties",m$1="TOKEN_AUDIENCE must be set in the auth mechanism properties when PROVIDER_NAME is azure.";class Y_ extends g$1.ServiceWorkflow{constructor(){super(...arguments);this.cache=new y$1.AzureTokenCache}async getToken(Z){const Y=Z?.mechanismProperties.TOKEN_AUDIENCE;if(!Y)throw new Z_.MongoAzureError(m$1);let X;const J=this.cache.getEntry(Y);if(J?.isValid())X=J.token;else{this.cache.deleteEntry(Y);const $=await u$1(Y);if(!d$1($))throw new Z_.MongoAzureError(h$1);this.cache.addEntry(Y,$),X=$.access_token}return X}}X_.AzureServiceWorkflow=Y_});var H_=w((Q_)=>{var W_=function(Z){let Y=Promise.resolve();return async(X,J)=>{return await Y,Y=Y.then(()=>Z(X,J)),Y}},i$1=function(Z,Y){let X=W3.get(Z),J=W3.get(Y??G_);if(X==null)j9++,X=j9,W3.set(Z,j9);if(J==null&&Y)j9++,J=j9,W3.set(Y,j9);return`${X}-${J}`};Object.defineProperty(Q_,"__esModule",{value:!0});Q_.CallbackLockCache=void 0;var c$1=r(),l$1=yG(),p$1="Auth mechanism property REQUEST_TOKEN_CALLBACK is required.",j9=0,G_=async()=>({accessToken:"test"}),W3=new WeakMap;W3.set(G_,j9);class K_ extends l$1.Cache{getEntry(Z,Y){const X=Y.mechanismProperties.REQUEST_TOKEN_CALLBACK,J=Y.mechanismProperties.REFRESH_TOKEN_CALLBACK;if(!X)throw new c$1.MongoInvalidArgumentError(p$1);const $=i$1(X,J),W=this.cacheKey(Z.address,Y.username,$),G=this.entries.get(W);if(G)return G;return this.addEntry(W,$,X,J)}addEntry(Z,Y,X,J){const $={requestCallback:W_(X),refreshCallback:J?W_(J):void 0,callbackHash:Y};return this.entries.set(Z,$),$}cacheKey(Z,Y,X){return this.hashedCacheKey(Z,Y,X)}}Q_.CallbackLockCache=K_});var L_=w((V_)=>{Object.defineProperty(V_,"__esModule",{value:!0});V_.TokenEntryCache=V_.TokenEntry=void 0;var F_=yG(),n$1=0;class Xq extends F_.ExpiringCacheEntry{constructor(Z,Y,X){super(X);this.tokenResult=Z,this.serverInfo=Y}}V_.TokenEntry=Xq;class U_ extends F_.Cache{addEntry(Z,Y,X,J,$){const W=new Xq(J,$,J.expiresInSeconds??n$1);return this.entries.set(this.cacheKey(Z,Y,X),W),W}deleteEntry(Z,Y,X){this.entries.delete(this.cacheKey(Z,Y,X))}getEntry(Z,Y,X){return this.entries.get(this.cacheKey(Z,Y,X))}deleteExpiredEntries(){for(let[Z,Y]of this.entries)if(!Y.isValid())this.entries.delete(Z)}cacheKey(Z,Y,X){return this.hashedCacheKey(Z,Y,X)}}V_.TokenEntryCache=U_});var D_=w((N_)=>{var YW1=function(Z,Y){if(Y!=null&&typeof Y==="number")return{saslContinue:1,conversationId:Y,payload:new E9.Binary(E9.BSON.serialize({jwt:Z}))};return{saslStart:1,mechanism:M_.AuthMechanism.MONGODB_OIDC,payload:new E9.Binary(E9.BSON.serialize({jwt:Z}))}},XW1=function(Z){if(Z==null||typeof Z!=="object")return!0;if(!("accessToken"in Z))return!0;return!Object.getOwnPropertyNames(Z).every((Y)=>e$1.includes(Y))},R_=function(Z){const Y={};if(Z.username)Y.n=Z.username;return{saslStart:1,autoAuthorize:1,mechanism:M_.AuthMechanism.MONGODB_OIDC,payload:new E9.Binary(E9.BSON.serialize(Y))}};Object.defineProperty(N_,"__esModule",{value:!0});N_.CallbackWorkflow=void 0;var E9=S6(),Jq=r(),w_=$1(),M_=b7(),s$1=H_(),r$1=L_(),t$1=0,o$1=300,e$1=["accessToken","expiresInSeconds","refreshToken"],ZW1="User provided OIDC callbacks must return a valid object with an accessToken.";class B_{constructor(){this.cache=new r$1.TokenEntryCache,this.callbackCache=new s$1.CallbackLockCache}async speculativeAuth(Z){const Y=R_(Z);return Y.db=Z.source,{speculativeAuthenticate:Y}}async execute(Z,Y,X,J){const{requestCallback:$,refreshCallback:W,callbackHash:G}=this.callbackCache.getEntry(Z,Y),K=this.cache.getEntry(Z.address,Y.username,G);let Q;if(K)if(K.isValid()&&!X)Q=await this.finishAuthentication(Z,Y,K.tokenResult,J?.speculativeAuthenticate?.conversationId);else{const z=await this.fetchAccessToken(Z,Y,K.serverInfo,X,G,$,W);try{Q=await this.finishAuthentication(Z,Y,z,X?void 0:J?.speculativeAuthenticate?.conversationId)}catch(H){if(X&&H instanceof Jq.MongoError&&H.code===Jq.MONGODB_ERROR_CODES.Reauthenticate)this.cache.deleteEntry(Z.address,Y.username,G),Q=await this.execute(Z,Y,X);else throw H}}else{const z=await this.startAuthentication(Z,Y,X,J),H=z.conversationId,F=E9.BSON.deserialize(z.payload.buffer),U=await this.fetchAccessToken(Z,Y,F,X,G,$,W);Q=await this.finishAuthentication(Z,Y,U,H)}return Q}async startAuthentication(Z,Y,X,J){let $;if(!X&&J?.speculativeAuthenticate)$=J.speculativeAuthenticate;else $=await Z.commandAsync((0,w_.ns)(Y.source),R_(Y),void 0);return $}async finishAuthentication(Z,Y,X,J){return await Z.commandAsync((0,w_.ns)(Y.source),YW1(X.accessToken,J),void 0)}async fetchAccessToken(Z,Y,X,J,$,W,G){const K=this.cache.getEntry(Z.address,Y.username,$);let Q;const z={timeoutSeconds:o$1,version:t$1};if(K){if(K.isValid()&&!J)return K.tokenResult;if(G)z.refreshToken=K.tokenResult.refreshToken,Q=await G(X,z);else Q=await W(X,z)}else Q=await W(X,z);if(XW1(Q))throw this.cache.deleteEntry(Z.address,Y.username,$),new Jq.MongoMissingCredentialsError(ZW1);return this.cache.deleteExpiredEntries(),this.cache.addEntry(Z.address,Y.username||"",$,Q,X),Q}}N_.CallbackWorkflow=B_});var O_=w((E_)=>{var P_=function(Z){const{credentials:Y}=Z;if(!Y)throw new I_.MongoMissingCredentialsError(KW1);return Y},T_=function(Z){const Y=Z.mechanismProperties.PROVIDER_NAME,X=E_.OIDC_WORKFLOWS.get(Y||"callback");if(!X)throw new I_.MongoInvalidArgumentError(`Could not load workflow for provider ${Z.mechanismProperties.PROVIDER_NAME}`);return X};Object.defineProperty(E_,"__esModule",{value:!0});E_.MongoDBOIDC=E_.OIDC_WORKFLOWS=void 0;var I_=r(),JW1=M4(),$W1=lk(),WW1=$_(),GW1=D_(),KW1="AuthContext must provide credentials.";E_.OIDC_WORKFLOWS=new Map;E_.OIDC_WORKFLOWS.set("callback",new GW1.CallbackWorkflow);E_.OIDC_WORKFLOWS.set("aws",new $W1.AwsServiceWorkflow);E_.OIDC_WORKFLOWS.set("azure",new WW1.AzureServiceWorkflow);class j_ extends JW1.AuthProvider{constructor(){super()}async auth(Z){const{connection:Y,reauthenticating:X,response:J}=Z,$=P_(Z);await T_($).execute(Y,$,X,J)}async prepare(Z,Y){const X=P_(Y),$=await T_(X).speculativeAuth(X);return{...Z,...$}}}E_.MongoDBOIDC=j_});var x_=w((k_)=>{Object.defineProperty(k_,"__esModule",{value:!0});k_.Plain=void 0;var QW1=Z0(),zW1=r(),HW1=$1(),FW1=M4();class S_ extends FW1.AuthProvider{async auth(Z){const{connection:Y,credentials:X}=Z;if(!X)throw new zW1.MongoMissingCredentialsError("AuthContext must provide credentials.");const{username:J,password:$}=X,G={saslStart:1,mechanism:"PLAIN",payload:new QW1.Binary(Buffer.from(`\0${J}\0${$}`)),autoAuthorize:1};await Y.commandAsync((0,HW1.ns)("$external.$cmd"),G,void 0)}}k_.Plain=S_});var g_=w((mE1,y_)=>{var P4=function(Z,Y){if(!(this instanceof P4))return new P4(Z,Y);this.length=0,this.updates=[],this.path=new Uint16Array(4),this.pages=new Array(32768),this.maxPages=this.pages.length,this.level=0,this.pageSize=Z||1024,this.deduplicate=Y?Y.deduplicate:null,this.zeros=this.deduplicate?gG(this.deduplicate.length):null},UW1=function(Z,Y){while(Z.maxPages<Y){var X=Z.pages;Z.pages=new Array(32768),Z.pages[0]=X,Z.level++,Z.maxPages*=32768}},VW1=function(Z,Y){if(Z.length===Y)return Z;if(Z.length>Y)return Z.slice(0,Y);var X=gG(Y);return Z.copy(X),X},gG=function(Z){if(Buffer.alloc)return Buffer.alloc(Z);var Y=new Buffer(Z);return Y.fill(0),Y},qW1=function(Z){var Y=Buffer.allocUnsafe?Buffer.allocUnsafe(Z.length):new Buffer(Z.length);return Z.copy(Y),Y},f_=function(Z,Y){this.offset=Z*Y.length,this.buffer=Y,this.updated=!1,this.deduplicate=0},LW1=function(Z,Y){Z=(Z-(Y[0]=Z&32767))/32768,Z=(Z-(Y[1]=Z&32767))/32768,Y[3]=(Z-(Y[2]=Z&32767))/32768&32767};y_.exports=P4;P4.prototype.updated=function(Z){while(this.deduplicate&&Z.buffer[Z.deduplicate]===this.deduplicate[Z.deduplicate])if(Z.deduplicate++,Z.deduplicate===this.deduplicate.length){if(Z.deduplicate=0,Z.buffer.equals&&Z.buffer.equals(this.deduplicate))Z.buffer=this.deduplicate;break}if(Z.updated||!this.updates)return;Z.updated=!0,this.updates.push(Z)};P4.prototype.lastUpdate=function(){if(!this.updates||!this.updates.length)return null;var Z=this.updates.pop();return Z.updated=!1,Z};P4.prototype._array=function(Z,Y){if(Z>=this.maxPages){if(Y)return;UW1(this,Z)}LW1(Z,this.path);var X=this.pages;for(var J=this.level;J>0;J--){var $=this.path[J],W=X[$];if(!W){if(Y)return;W=X[$]=new Array(32768)}X=W}return X};P4.prototype.get=function(Z,Y){var X=this._array(Z,Y),J=this.path[0],$=X&&X[J];if(!$&&!Y){if($=X[J]=new f_(Z,gG(this.pageSize)),Z>=this.length)this.length=Z+1}if($&&$.buffer===this.deduplicate&&this.deduplicate&&!Y)$.buffer=qW1($.buffer),$.deduplicate=0;return $};P4.prototype.set=function(Z,Y){var X=this._array(Z,!1),J=this.path[0];if(Z>=this.length)this.length=Z+1;if(!Y||this.zeros&&Y.equals&&Y.equals(this.zeros)){X[J]=void 0;return}if(this.deduplicate&&Y.equals&&Y.equals(this.deduplicate))Y=this.deduplicate;var $=X[J],W=VW1(Y,this.pageSize);if($)$.buffer=W;else X[J]=new f_(Z,W)};P4.prototype.toBuffer=function(){var Z=new Array(this.length),Y=gG(this.pageSize),X=0;while(X<Z.length){var J=this._array(X,!0);for(var $=0;$<32768&&X<Z.length;$++)Z[X++]=J&&J[$]?J[$].buffer:Y}return Buffer.concat(Z)}});var v_=w((uE1,b_)=>{var M5=function(Z){if(!(this instanceof M5))return new M5(Z);if(!Z)Z={};if(Buffer.isBuffer(Z))Z={buffer:Z};if(this.pageOffset=Z.pageOffset||0,this.pageSize=Z.pageSize||1024,this.pages=Z.pages||wW1(this.pageSize),this.byteLength=this.pages.length*this.pageSize,this.length=8*this.byteLength,!MW1(this.pageSize))throw new Error("The page size should be a power of two");if(this._trackUpdates=!!Z.trackUpdates,this._pageMask=this.pageSize-1,Z.buffer){for(var Y=0;Y<Z.buffer.length;Y+=this.pageSize)this.pages.set(Y/this.pageSize,Z.buffer.slice(Y,Y+this.pageSize));this.byteLength=Z.buffer.length,this.length=8*this.byteLength}},RW1=function(Z){if(Buffer.alloc)return Buffer.alloc(Z);var Y=new Buffer(Z);return Y.fill(0),Y},MW1=function(Z){return!(Z&Z-1)},wW1=g_();b_.exports=M5;M5.prototype.get=function(Z){var Y=Z&7,X=(Z-Y)/8;return!!(this.getByte(X)&128>>Y)};M5.prototype.getByte=function(Z){var Y=Z&this._pageMask,X=(Z-Y)/this.pageSize,J=this.pages.get(X,!0);return J?J.buffer[Y+this.pageOffset]:0};M5.prototype.set=function(Z,Y){var X=Z&7,J=(Z-X)/8,$=this.getByte(J);return this.setByte(J,Y?$|128>>X:$&(255^128>>X))};M5.prototype.toBuffer=function(){var Z=RW1(this.pages.length*this.pageSize);for(var Y=0;Y<this.pages.length;Y++){var X=this.pages.get(Y,!0),J=Y*this.pageSize;if(X)X.buffer.copy(Z,J,this.pageOffset,this.pageOffset+this.pageSize)}return Z};M5.prototype.setByte=function(Z,Y){var X=Z&this._pageMask,J=(Z-X)/this.pageSize,$=this.pages.get(J,!1);if(X+=this.pageOffset,$.buffer[X]===Y)return!1;if($.buffer[X]=Y,Z>=this.byteLength)this.byteLength=Z+1,this.length=this.byteLength*8;if(this._trackUpdates)this.pages.updated($);return!0}});var m_=w((h_)=>{Object.defineProperty(h_,"__esModule",{value:!0});var BW1=import.meta.require("zlib");h_.default=(0,BW1.gunzipSync)(Buffer.from("H4sIAAAAAAACA+3dTYgcWR0A8FfTnekQ47aCkBxiZpYV8RhwYQM7bA/ksoLgSRD0IOSiePAkLrowvWSF4CkHEW856MlTQHA9RKZ1ZJODsEcVcTOyhxUEbXdXtpPp1PNVV39Uz4czEyaTVOb3G6a7XtWrr/devX49/+qekG2Go7Aa2jHGyozG+Dmrzi2mP/xb/zMhLI+WlRm2byubm2h0ivVi7BYzusVjuNkt1l9uFWsutWL8OP4rzV9KeXdsKx1HFhbSc6vIG0fKBZ14UNfLFS6FRrGRtXh98ZvphL/x4uLV/IOzaat/vlikv/TixavxR8PQitfPpKNbffXSwgtr8fV07GX+L1967urwg5W0/t0LV37y/oWFlQtX8ping7reXE3LT680r9yPKyn/3Vn64SwdVs6m/KN0yHrp9D+RvXsqpe6MSia5mH6LSog//Xq/++O74YVTjfDFWK2VIuNSemiPppphcVYeyzcudKqFMiq6cs3vVkrzlcnE0mxeZ1Jf2ZXsSvk8TmRZWYdpalydxd5bc8eUkt1wlEbtqTVLr8XQLFpKMb+dpr9SbSOt4ozTgXUq8+Ihm8cTt0shtCvT6dwao6sxPf5ydmU208/Z0yH8IZtlvZi3e5fG12yn3PLSdPvnQ7vsK9rxyKpqevzFZGVfu3YHezvbnbvit9Xdm5fGbf/MZ7PuuNrTjLJnaofH7gm0h+VKU/g/tdUocrer3cO4yOcuycGoyLrba6Ta+lrlnkZ5ntvWCrfV39wLTuNg9QvsvHb37P8BAGCP0eNTOH5szf154JmnNQIcn7b+FziyAfX4eWnn+C6Lm4M0mj31ubkViiDV4WLvs56qN54xGS3HWER5su6nQtZubl9tcY/4atbr9e5kWewew/g2a8fdy2Yaa97+pgQAAAAAAIBHtt+dYmWwaN/byI5g/9PYVfMvb4YvvDpOLJxvFgueP9VbPXh8/yCZViZxNYATaejmDQAAAACgfjJ/3QUA4JD3Px1InT+5PtQCAAAAAAAAAKD2xP8BAAAAAAAAoP7E/wEAAAAAAACg/sT/AQAAAAAAAKD+xP8BAAAAAAAAoP7E/wEAAAAAAACg/sT/AQAAAAAAAKD+xP8BAAAAAAAAoP7E/wEAAAAAAACg/sT/AQAAAAAAAKD+xP8BAAAAAAAAoP6G6+khVCgSAAAAAAAAAKidYQjLYVfNcPSyAE+dhQsnvAAq59/VHAAAAAAAAOCJmv8E/w4HiLqf3nWuWCB1pe0esg/pT3sKd+m4XjhpFpZH3/1THTcU6cfRLnrHf3ZNPZs+bf9rwPuIUPYAWb+j/Zy0EaAxAAAAAADwrPJ1IMBenu6ea99M+0W/17wCAAAAAAAAnGRLm8oA4JnQUAQAAAAAAAAAUHvi/wAAAAAAAABQf+L/AAAAAAAAAFB/4v8AAAAAAAAAUH/i/wAAAAAAAABQf+L/AAAAAAAAAFB/4v8AAAAAAAAAUH/i/wAAAAAAAABQf+L/AAAAAAAAAFB/4v8AAAAAAAAAUH/i/wAAAAAAAABQf+L/AAAAAAAAAFB/jdX0ECsUCQAAAAAAAADUTiMCAAAAAAAAAHU3VAQAAAAAAAAAUH8hLNf1uwsWbhT/uWBzUEx/ei1Nxc001VqrnN2wuRjCK3G4HuNgtuJoSVj17Q9QyBQBAAAAAAAAHMKpuJ4/+Otc5L2XZi8dJlQ/LCPXhc4keJ9UI9uFre3rDfY9uoXZPQBFHL34HSWWm8sx5rH83d967IfZMRZHHG/2Qi8MFnbscXnhnzHei5NND8P2bW2OT3G8vFeebBHbz9dGEf5jDt+fK4/mTve1bnwndsNL92+mE/75xhs/yz65Ed/ZbP29SP96oxvCDxrxcjj333R262/d6X6tG66lYy/z/+rtMn83nHvv9nfOv/dw4+pvspCl4v7+1npa/nHvtbSvjSJ/mf79/VuLC7N03LiW8o/SMU8ldO+jPOul1OVQ3vVwK+TZqBLCt3/RXvveS7eaD0L8YyhrJeV/cC0WGTdD1hzlCo2H98vzK9a+963V7qRVTeaNa+ZGpWp+N62jSmOetJD8dn67fB4n8nzchG7n4+os2tcgzLWUQVg70rta8lE7nqW7IW710v7eDsV1F7e6433njYfd9j9Gl2KIveptMePVamOXQuhXO5tUk6Pv+kiPX43T7/3YevDy4MN+HLw8CHPX6OqOOwKe73z0+pnf3rvT6pX76j/SUU7/3UjqX5r7ZW7PdZU8Vq2id+29Pphdh3n1Tqp/t0aXaWVOPnsFGre+waRdpKf/TK+7fiX3bOWluVeJg77AAPNDwr37fwAA2GP0+BSOHwcn6/231ghwfPr6X+DIBtTj582d47s8LD3xMeYktt+YHXHe6XQuH9P4Nu+H3ctmGmve/qYEAAAAAACAR7bfnWJlsGgSNNoM54tPZ23EI4vYzPY1/fzq1ud/GP/01jjx8P2tYsG7DzrrB4/vHySTz5YB+n8AAAAAgJrJ/XEXAIDHEf/2yXUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgGdABAAAAAAAAADqbqgIAAAAAAAAAKD2hv8DWK79UBhoBgA=","base64"))});var c_=w((w8)=>{var NY=function(){const Z=u_.default.readUInt32BE(K3);K3+=4;const Y=u_.default.slice(K3,K3+Z);return K3+=Z,(0,AW1.default)({buffer:Y})},d_=w8&&w8.__importDefault||function(Z){return Z&&Z.__esModule?Z:{default:Z}};Object.defineProperty(w8,"__esModule",{value:!0});w8.bidirectional_l=w8.bidirectional_r_al=w8.prohibited_characters=w8.non_ASCII_space_characters=w8.commonly_mapped_to_nothing=w8.unassigned_code_points=void 0;var AW1=d_(v_()),u_=d_(m_()),K3=0;w8.unassigned_code_points=NY();w8.commonly_mapped_to_nothing=NY();w8.non_ASCII_space_characters=NY();w8.prohibited_characters=NY();w8.bidirectional_r_al=NY();w8.bidirectional_l=NY()});var n_=w((lE1,i_)=>{var p_=function(Z){const Y=[],X=Z.length;for(let J=0;J<X;J+=1){const $=Z.charCodeAt(J);if($>=55296&&$<=56319&&X>J+1){const W=Z.charCodeAt(J+1);if(W>=56320&&W<=57343){Y.push(($-55296)*1024+W-56320+65536),J+=1;continue}}Y.push($)}return Y},Q3=function(Z,Y={}){if(typeof Z!=="string")throw new TypeError("Expected string.");if(Z.length===0)return"";const X=p_(Z).map((H)=>DW1.get(H)?32:H).filter((H)=>!PW1.get(H)),J=String.fromCodePoint.apply(null,X).normalize("NFKC"),$=p_(J);if($.some((H)=>B5.prohibited_characters.get(H)))throw new Error("Prohibited character, see https://tools.ietf.org/html/rfc4013#section-2.3");if(Y.allowUnassigned!==!0){if($.some((F)=>B5.unassigned_code_points.get(F)))throw new Error("Unassigned code point, see https://tools.ietf.org/html/rfc4013#section-2.5")}const G=$.some((H)=>B5.bidirectional_r_al.get(H)),K=$.some((H)=>B5.bidirectional_l.get(H));if(G&&K)throw new Error("String must not contain RandALCat and LCat at the same time, see https://tools.ietf.org/html/rfc3454#section-6");const Q=B5.bidirectional_r_al.get(l_(TW1(J))),z=B5.bidirectional_r_al.get(l_(IW1(J)));if(G&&!(Q&&z))throw new Error("Bidirectional RandALCat character must be the first and the last character of the string, see https://tools.ietf.org/html/rfc3454#section-6");return J},B5=c_(),DW1=B5.non_ASCII_space_characters,PW1=B5.commonly_mapped_to_nothing,l_=(Z)=>Z.codePointAt(0),TW1=(Z)=>Z[0],IW1=(Z)=>Z[Z.length-1];Q3.saslprep=Q3;Q3.default=Q3;i_.exports=Q3});var $x=w((Xx)=>{var r_=function(Z){return Z.replace("=","=3D").replace(",","=2C")},t_=function(Z,Y){return Buffer.concat([Buffer.from("n=","utf8"),Buffer.from(Z,"utf8"),Buffer.from(",r=","utf8"),Buffer.from(Y.toString("base64"),"utf8")])},o_=function(Z,Y,X){const J=r_(Y.username);return{saslStart:1,mechanism:Z==="sha1"?a_.AuthMechanism.MONGODB_SCRAM_SHA1:a_.AuthMechanism.MONGODB_SCRAM_SHA256,payload:new $q.Binary(Buffer.concat([Buffer.from("n,,","utf8"),t_(J,X)])),autoAuthorize:1,options:{skipEmptyExchange:!0}}};async function OW1(Z,Y){const{connection:X,credentials:J}=Y;if(!J)throw new w7.MongoMissingCredentialsError("AuthContext must provide credentials.");if(!Y.nonce)throw new w7.MongoInvalidArgumentError("AuthContext must contain a valid nonce property");const $=Y.nonce,W=J.source,G=o_(Z,J,$),K=await X.commandAsync((0,Wq.ns)(`${W}.\$cmd`),G,void 0);await e_(Z,K,Y)}async function e_(Z,Y,X){const{connection:J,credentials:$}=X;if(!$)throw new w7.MongoMissingCredentialsError("AuthContext must provide credentials.");if(!X.nonce)throw new w7.MongoInvalidArgumentError("Unable to continue SCRAM without valid nonce");const W=X.nonce,G=$.source,K=r_($.username),Q=$.password,z=Z==="sha256"?(0,jW1.saslprep)(Q):SW1(K,Q),H=Buffer.isBuffer(Y.payload)?new $q.Binary(Y.payload):Y.payload,F=s_(H),U=parseInt(F.i,10);if(U&&U<4096)throw new w7.MongoRuntimeError(`Server returned an invalid iteration count ${U}`);const{s:V,r:q}=F;if(q.startsWith("nonce"))throw new w7.MongoRuntimeError(`Server returned an invalid nonce: ${q}`);const L=`c=biws,r=${q}`,R=yW1(z,Buffer.from(V,"base64"),U,Z),B=bG(Z,R,"Client Key"),N=bG(Z,R,"Server Key"),M=_W1(Z,B),D=[t_(K,W),H.toString("utf8"),L].join(","),m=bG(Z,M,D),O=`p=${kW1(B,m)}`,E=[L,O].join(","),j=bG(Z,N,D),n={saslContinue:1,conversationId:Y.conversationId,payload:new $q.Binary(Buffer.from(E))},c=await J.commandAsync((0,Wq.ns)(`${G}.\$cmd`),n,void 0),y=s_(c.payload);if(!gW1(Buffer.from(y.v,"base64"),j))throw new w7.MongoRuntimeError("Server returned an invalid signature");if(c.done!==!1)return;const C={saslContinue:1,conversationId:c.conversationId,payload:Buffer.alloc(0)};await J.commandAsync((0,Wq.ns)(`${G}.\$cmd`),C,void 0)}var s_=function(Z){const Y=Z.toString("utf8"),X={},J=Y.split(",");for(let $=0;$<J.length;$++){const W=J[$].split("=");X[W[0]]=W[1]}return X},SW1=function(Z,Y){if(typeof Z!=="string")throw new w7.MongoInvalidArgumentError("Username must be a string");if(typeof Y!=="string")throw new w7.MongoInvalidArgumentError("Password must be a string");if(Y.length===0)throw new w7.MongoInvalidArgumentError("Password cannot be empty");let X;try{X=N5.createHash("md5")}catch(J){if(N5.getFips())throw new Error("Auth mechanism SCRAM-SHA-1 is not supported in FIPS mode");throw J}return X.update(`${Z}:mongo:${Y}`,"utf8"),X.digest("hex")},kW1=function(Z,Y){if(!Buffer.isBuffer(Z))Z=Buffer.from(Z);if(!Buffer.isBuffer(Y))Y=Buffer.from(Y);const X=Math.max(Z.length,Y.length),J=[];for(let $=0;$<X;$+=1)J.push(Z[$]^Y[$]);return Buffer.from(J).toString("base64")},_W1=function(Z,Y){return N5.createHash(Z).update(Y).digest()},bG=function(Z,Y,X){return N5.createHmac(Z,Y).update(X).digest()},xW1=function(){vG={},Gq=0},yW1=function(Z,Y,X,J){const $=[Z,Y.toString("base64"),X].join("_");if(vG[$]!=null)return vG[$];const W=N5.pbkdf2Sync(Z,Y,X,fW1[J],J);if(Gq>=200)xW1();return vG[$]=W,Gq+=1,W},gW1=function(Z,Y){if(Z.length!==Y.length)return!1;if(typeof N5.timingSafeEqual==="function")return N5.timingSafeEqual(Z,Y);let X=0;for(let J=0;J<Z.length;J++)X|=Z[J]^Y[J];return X===0};Object.defineProperty(Xx,"__esModule",{value:!0});Xx.ScramSHA256=Xx.ScramSHA1=void 0;var jW1=n_(),N5=import.meta.require("crypto"),EW1=import.meta.require("util"),$q=Z0(),w7=r(),Wq=$1(),CW1=M4(),a_=b7();class Kq extends CW1.AuthProvider{constructor(Z){super();this.cryptoMethod=Z||"sha1",this.randomBytesAsync=(0,EW1.promisify)(N5.randomBytes)}async prepare(Z,Y){const X=this.cryptoMethod,J=Y.credentials;if(!J)throw new w7.MongoMissingCredentialsError("AuthContext must provide credentials.");const $=await this.randomBytesAsync(24);return Y.nonce=$,{...Z,speculativeAuthenticate:{...o_(X,J,$),db:J.source}}}async auth(Z){const{reauthenticating:Y,response:X}=Z;if(X?.speculativeAuthenticate&&!Y)return e_(this.cryptoMethod,X.speculativeAuthenticate,Z);return OW1(this.cryptoMethod,Z)}}var vG={},Gq=0,fW1={sha256:32,sha1:20};class Zx extends Kq{constructor(){super("sha1")}}Xx.ScramSHA1=Zx;class Yx extends Kq{constructor(){super("sha256")}}Xx.ScramSHA256=Yx});var Hx=w((Qx)=>{var Gx=function(Z){const Y={authenticate:1,mechanism:"MONGODB-X509"};if(Z.username)Y.user=Z.username;return Y};Object.defineProperty(Qx,"__esModule",{value:!0});Qx.X509=void 0;var Wx=r(),vW1=$1(),hW1=M4();class Kx extends hW1.AuthProvider{async prepare(Z,Y){const{credentials:X}=Y;if(!X)throw new Wx.MongoMissingCredentialsError("AuthContext must provide credentials.");return{...Z,speculativeAuthenticate:Gx(X)}}async auth(Z){const{connection:Y,credentials:X}=Z;if(!X)throw new Wx.MongoMissingCredentialsError("AuthContext must provide credentials.");if(Z.response?.speculativeAuthenticate)return;await Y.commandAsync((0,vW1.ns)("$external.$cmd"),Gx(X),void 0)}}Qx.X509=Kx});var Uq=w((Mx)=>{var sW1=function(Z,Y){zq({...Z,existingSocket:void 0},(X,J)=>{if(X||!J)return Y(X);let $=Z.connectionType??Ux.Connection;if(Z.autoEncrypter)$=Ux.CryptoConnection;const W=new $(J,Z);tW1(W,Z).then(()=>Y(void 0,W),(G)=>{W.destroy({force:!1}),Y(G)})})},rW1=function(Z,Y){const X=Number(Z.maxWireVersion),J=Number(Z.minWireVersion),$=!Number.isNaN(X)&&X>=AY.MIN_SUPPORTED_WIRE_VERSION,W=!Number.isNaN(J)&&J<=AY.MAX_SUPPORTED_WIRE_VERSION;if($){if(W)return null;const K=`Server at ${Y.hostAddress} reports minimum wire version ${JSON.stringify(Z.minWireVersion)}, but this version of the Node.js Driver requires at most ${AY.MAX_SUPPORTED_WIRE_VERSION} (MongoDB ${AY.MAX_SUPPORTED_SERVER_VERSION})`;return new O0.MongoCompatibilityError(K)}const G=`Server at ${Y.hostAddress} reports maximum wire version ${JSON.stringify(Z.maxWireVersion)??0}, but this version of the Node.js Driver requires at least ${AY.MIN_SUPPORTED_WIRE_VERSION} (MongoDB ${AY.MIN_SUPPORTED_SERVER_VERSION})`;return new O0.MongoCompatibilityError(G)};async function tW1(Z,Y){const X=Y.credentials;if(X){if(X.mechanism!==d6.AuthMechanism.MONGODB_DEFAULT&&!Mx.AUTH_PROVIDERS.get(X.mechanism))throw new O0.MongoInvalidArgumentError(`AuthMechanism '${X.mechanism}' not supported`)}const J=new dW1.AuthContext(Z,X,Y);Z.authContext=J;const $=await wx(J),W={...Y};if(typeof Y.connectTimeoutMS==="number")W.socketTimeoutMS=Y.connectTimeoutMS;const G=(new Date()).getTime(),K=await Z.commandAsync((0,Lx.ns)("admin.$cmd"),$,W);if(!("isWritablePrimary"in K))K.isWritablePrimary=K[qx.LEGACY_HELLO_COMMAND];if(K.helloOk)Z.helloOk=!0;const Q=rW1(K,Y);if(Q)throw Q;if(Y.loadBalanced){if(!K.serviceId)throw new O0.MongoCompatibilityError("Driver attempted to initialize in load balancing mode, but the server does not support this mode.")}if(Z.hello=K,Z.lastHelloMS=(new Date()).getTime()-G,!K.arbiterOnly&&X){J.response=K;const z=X.resolveAuthMechanism(K),H=Mx.AUTH_PROVIDERS.get(z.mechanism);if(!H)throw new O0.MongoInvalidArgumentError(`No AuthProvider for ${z.mechanism} defined.`);try{await H.auth(J)}catch(F){if(F instanceof O0.MongoError){if(F.addErrorLabel(O0.MongoErrorLabel.HandshakeError),(0,O0.needsRetryableWriteLabel)(F,K.maxWireVersion))F.addErrorLabel(O0.MongoErrorLabel.RetryableWriteError)}throw F}}}async function wx(Z){const Y=Z.options,X=Y.compressors?Y.compressors:[],{serverApi:J}=Z.connection,$={[J?.version?"hello":qx.LEGACY_HELLO_COMMAND]:1,helloOk:!0,client:Y.metadata,compression:X};if(Y.loadBalanced===!0)$.loadBalanced=!0;const W=Z.credentials;if(W){if(W.mechanism===d6.AuthMechanism.MONGODB_DEFAULT&&W.username){$.saslSupportedMechs=`${W.source}.${W.username}`;const K=Mx.AUTH_PROVIDERS.get(d6.AuthMechanism.MONGODB_SCRAM_SHA256);if(!K)throw new O0.MongoInvalidArgumentError(`No AuthProvider for ${d6.AuthMechanism.MONGODB_SCRAM_SHA256} defined.`);return K.prepare($,Z)}const G=Mx.AUTH_PROVIDERS.get(W.mechanism);if(!G)throw new O0.MongoInvalidArgumentError(`No AuthProvider for ${W.mechanism} defined.`);return G.prepare($,Z)}return $}var Hq=function(Z){const Y=Z.hostAddress;if(!Y)throw new O0.MongoInvalidArgumentError('Option "hostAddress" is required');const X={};for(let J of Mx.LEGAL_TCP_SOCKET_OPTIONS)if(Z[J]!=null)X[J]=Z[J];if(typeof Y.socketPath==="string")return X.path=Y.socketPath,X;else if(typeof Y.host==="string")return X.host=Y.host,X.port=Y.port,X;else throw new O0.MongoRuntimeError(`Unexpected HostAddress ${JSON.stringify(Y)}`)},oW1=function(Z){const Y=Hq(Z);for(let X of Mx.LEGAL_TLS_SOCKET_OPTIONS)if(Z[X]!=null)Y[X]=Z[X];if(Z.existingSocket)Y.socket=Z.existingSocket;if(Y.servername==null&&Y.host&&!Vx.isIP(Y.host))Y.servername=Y.host;return Y},zq=function(Z,Y){const X=Z.tls??!1,J=Z.noDelay??!0,$=Z.connectTimeoutMS??30000,W=Z.rejectUnauthorized??!0,G=Z.existingSocket;let K;const Q=function(V,q){if(V&&K)K.destroy();Y(V,q)};if(Z.proxyHost!=null)return YG1({...Z,connectTimeoutMS:$},Q);if(X){const V=mW1.connect(oW1(Z));if(typeof V.disableRenegotiation==="function")V.disableRenegotiation();K=V}else if(G)K=G;else K=Vx.createConnection(Hq(Z));K.setKeepAlive(!0,300000),K.setTimeout($),K.setNoDelay(J);const z=X?"secureConnect":"connect";let H;function F(V){return(q)=>{if(Qq.forEach((L)=>K.removeAllListeners(L)),H&&Z.cancellationToken)Z.cancellationToken.removeListener("cancel",H);K.removeListener(z,U),Q(Rx(V,q))}}function U(){if(Qq.forEach((V)=>K.removeAllListeners(V)),H&&Z.cancellationToken)Z.cancellationToken.removeListener("cancel",H);if("authorizationError"in K){if(K.authorizationError&&W)return Q(K.authorizationError)}K.setTimeout(0),Q(void 0,K)}if(Qq.forEach((V)=>K.once(V,F(V))),Z.cancellationToken)H=F("cancel"),Z.cancellationToken.once("cancel",H);if(G)process.nextTick(U);else K.once(z,U)},ZG1=function(){if(z3==null){const Z=(0,uW1.getSocks)();if("kModuleError"in Z)throw Z.kModuleError;z3=Z}return z3},YG1=function(Z,Y){const X=Lx.HostAddress.fromHostPort(Z.proxyHost??"",Z.proxyPort??1080);zq({...Z,hostAddress:X,tls:!1,proxyHost:void 0},(J,$)=>{if(J||!$)return Y(J);const W=Hq(Z);if(typeof W.host!=="string"||typeof W.port!=="number")return Y(new O0.MongoInvalidArgumentError("Can only make Socks5 connections to TCP hosts"));try{z3??=ZG1()}catch(G){return Y(G)}z3.SocksClient.createConnection({existing_socket:$,timeout:Z.connectTimeoutMS,command:"connect",destination:{host:W.host,port:W.port},proxy:{host:"iLoveJavaScript",port:0,type:5,userId:Z.proxyUsername||void 0,password:Z.proxyPassword||void 0}}).then(({socket:G})=>{zq({...Z,existingSocket:G,proxyHost:void 0},Y)},(G)=>Y(Rx("error",G)))})},Rx=function(Z,Y){switch(Z){case"error":return new O0.MongoNetworkError(O0.MongoError.buildErrorMessage(Y),{cause:Y});case"timeout":return new O0.MongoNetworkTimeoutError("connection timed out");case"close":return new O0.MongoNetworkError("connection closed");case"cancel":return new O0.MongoNetworkError("connection establishment was cancelled");default:return new O0.MongoNetworkError("unknown network error")}};Object.defineProperty(Mx,"__esModule",{value:!0});Mx.LEGAL_TCP_SOCKET_OPTIONS=Mx.LEGAL_TLS_SOCKET_OPTIONS=Mx.prepareHandshakeDocument=Mx.connect=Mx.AUTH_PROVIDERS=void 0;var Vx=import.meta.require("net"),mW1=import.meta.require("tls"),qx=c0(),uW1=F7(),O0=r(),Lx=$1(),dW1=M4(),cW1=ZG(),lW1=xk(),pW1=bk(),iW1=O_(),nW1=x_(),d6=b7(),Fx=$x(),aW1=Hx(),Ux=$3(),AY=z9();Mx.AUTH_PROVIDERS=new Map([[d6.AuthMechanism.MONGODB_AWS,new pW1.MongoDBAWS],[d6.AuthMechanism.MONGODB_CR,new lW1.MongoCR],[d6.AuthMechanism.MONGODB_GSSAPI,new cW1.GSSAPI],[d6.AuthMechanism.MONGODB_OIDC,new iW1.MongoDBOIDC],[d6.AuthMechanism.MONGODB_PLAIN,new nW1.Plain],[d6.AuthMechanism.MONGODB_SCRAM_SHA1,new Fx.ScramSHA1],[d6.AuthMechanism.MONGODB_SCRAM_SHA256,new Fx.ScramSHA256],[d6.AuthMechanism.MONGODB_X509,new aW1.X509]]);Mx.connect=sW1;Mx.prepareHandshakeDocument=wx;Mx.LEGAL_TLS_SOCKET_OPTIONS=["ALPNProtocols","ca","cert","checkServerIdentity","ciphers","crl","ecdhCurve","key","minDHSize","passphrase","pfx","rejectUnauthorized","secureContext","secureProtocol","servername","session"];Mx.LEGAL_TCP_SOCKET_OPTIONS=["family","hints","localAddress","localPort","lookup"];var eW1=["error","close","timeout","parseError"],Qq=new Set(eW1),z3=null});var Vq=w((kx)=>{Object.defineProperty(kx,"__esModule",{value:!0});kx.ConnectionPoolClearedEvent=kx.ConnectionCheckedInEvent=kx.ConnectionCheckedOutEvent=kx.ConnectionCheckOutFailedEvent=kx.ConnectionCheckOutStartedEvent=kx.ConnectionClosedEvent=kx.ConnectionReadyEvent=kx.ConnectionCreatedEvent=kx.ConnectionPoolClosedEvent=kx.ConnectionPoolReadyEvent=kx.ConnectionPoolCreatedEvent=kx.ConnectionPoolMonitoringEvent=void 0;var R7=c0();class R6{constructor(Z){this.time=new Date,this.address=Z.address}}kx.ConnectionPoolMonitoringEvent=R6;class Nx extends R6{constructor(Z){super(Z);this.name=R7.CONNECTION_POOL_CREATED;const{maxConnecting:Y,maxPoolSize:X,minPoolSize:J,maxIdleTimeMS:$,waitQueueTimeoutMS:W}=Z.options;this.options={maxConnecting:Y,maxPoolSize:X,minPoolSize:J,maxIdleTimeMS:$,waitQueueTimeoutMS:W}}}kx.ConnectionPoolCreatedEvent=Nx;class Ax extends R6{constructor(Z){super(Z);this.name=R7.CONNECTION_POOL_READY}}kx.ConnectionPoolReadyEvent=Ax;class Dx extends R6{constructor(Z){super(Z);this.name=R7.CONNECTION_POOL_CLOSED}}kx.ConnectionPoolClosedEvent=Dx;class Px extends R6{constructor(Z,Y){super(Z);this.name=R7.CONNECTION_CREATED,this.connectionId=Y.id}}kx.ConnectionCreatedEvent=Px;class Tx extends R6{constructor(Z,Y){super(Z);this.name=R7.CONNECTION_READY,this.connectionId=Y.id}}kx.ConnectionReadyEvent=Tx;class Ix extends R6{constructor(Z,Y,X,J){super(Z);this.name=R7.CONNECTION_CLOSED,this.connectionId=Y.id,this.reason=X,this.serviceId=Y.serviceId,this.error=J??null}}kx.ConnectionClosedEvent=Ix;class jx extends R6{constructor(Z){super(Z);this.name=R7.CONNECTION_CHECK_OUT_STARTED}}kx.ConnectionCheckOutStartedEvent=jx;class Ex extends R6{constructor(Z,Y,X){super(Z);this.name=R7.CONNECTION_CHECK_OUT_FAILED,this.reason=Y,this.error=X}}kx.ConnectionCheckOutFailedEvent=Ex;class Cx extends R6{constructor(Z,Y){super(Z);this.name=R7.CONNECTION_CHECKED_OUT,this.connectionId=Y.id}}kx.ConnectionCheckedOutEvent=Cx;class Ox extends R6{constructor(Z,Y){super(Z);this.name=R7.CONNECTION_CHECKED_IN,this.connectionId=Y.id}}kx.ConnectionCheckedInEvent=Ox;class Sx extends R6{constructor(Z,Y={}){super(Z);this.name=R7.CONNECTION_POOL_CLEARED,this.serviceId=Y.serviceId,this.interruptInUseConnections=Y.interruptInUseConnections}}kx.ConnectionPoolClearedEvent=Sx});var Lq=w((gx)=>{Object.defineProperty(gx,"__esModule",{value:!0});gx.WaitQueueTimeoutError=gx.PoolClearedOnNetworkError=gx.PoolClearedError=gx.PoolClosedError=void 0;var hG=r();class xx extends hG.MongoDriverError{constructor(Z){super("Attempted to check out a connection from closed connection pool");this.address=Z.address}get name(){return"MongoPoolClosedError"}}gx.PoolClosedError=xx;class qq extends hG.MongoNetworkError{constructor(Z,Y){const X=Y?Y:`Connection pool for ${Z.address} was cleared because another operation failed with: "${Z.serverError?.message}"`;super(X,Z.serverError?{cause:Z.serverError}:void 0);this.address=Z.address,this.addErrorLabel(hG.MongoErrorLabel.RetryableWriteError)}get name(){return"MongoPoolClearedError"}}gx.PoolClearedError=qq;class fx extends qq{constructor(Z){super(Z,`Connection to ${Z.address} interrupted due to server monitor timeout`)}get name(){return"PoolClearedOnNetworkError"}}gx.PoolClearedOnNetworkError=fx;class yx extends hG.MongoDriverError{constructor(Z,Y){super(Z);this.address=Y}get name(){return"MongoWaitQueueTimeoutError"}}gx.WaitQueueTimeoutError=yx});var cx=w((ux)=>{Object.defineProperty(ux,"__esModule",{value:!0});ux.ConnectionPool=ux.PoolState=void 0;var DY=import.meta.require("timers"),l6=c0(),M7=r(),vx=U6(),F3=$1(),hx=Uq(),mG=$3(),J8=Vq(),PY=Lq(),MG1=hF(),uG=Symbol("server"),T4=Symbol("connections"),TY=Symbol("pending"),A5=Symbol("checkedOut"),C9=Symbol("minPoolSizeTimer"),IY=Symbol("generation"),mx=Symbol("serviceGenerations"),dG=Symbol("connectionCounter"),cG=Symbol("cancellationToken"),I4=Symbol("waitQueue"),lG=Symbol("cancelled"),pG=Symbol("metrics"),iG=Symbol("processingWaitQueue"),B7=Symbol("poolState");ux.PoolState=Object.freeze({paused:"paused",ready:"ready",closed:"closed"});class u1 extends vx.TypedEventEmitter{constructor(Z,Y){super();if(this.options=Object.freeze({...Y,connectionType:mG.Connection,maxPoolSize:Y.maxPoolSize??100,minPoolSize:Y.minPoolSize??0,maxConnecting:Y.maxConnecting??2,maxIdleTimeMS:Y.maxIdleTimeMS??0,waitQueueTimeoutMS:Y.waitQueueTimeoutMS??0,minPoolSizeCheckFrequencyMS:Y.minPoolSizeCheckFrequencyMS??100,autoEncrypter:Y.autoEncrypter,metadata:Y.metadata}),this.options.minPoolSize>this.options.maxPoolSize)throw new M7.MongoInvalidArgumentError("Connection pool minimum size must not be greater than maximum pool size");this[B7]=ux.PoolState.paused,this[uG]=Z,this[T4]=new F3.List,this[TY]=0,this[A5]=new Set,this[C9]=void 0,this[IY]=0,this[mx]=new Map,this[dG]=(0,F3.makeCounter)(1),this[cG]=new vx.CancellationToken,this[cG].setMaxListeners(Infinity),this[I4]=new F3.List,this[pG]=new MG1.ConnectionPoolMetrics,this[iG]=!1,this.mongoLogger=this[uG].topology.client.mongoLogger,this.component="connection",process.nextTick(()=>{this.emitAndLog(u1.CONNECTION_POOL_CREATED,new J8.ConnectionPoolCreatedEvent(this))})}get address(){return this.options.hostAddress.toString()}get closed(){return this[B7]===ux.PoolState.closed}get generation(){return this[IY]}get totalConnectionCount(){return this.availableConnectionCount+this.pendingConnectionCount+this.currentCheckedOutCount}get availableConnectionCount(){return this[T4].length}get pendingConnectionCount(){return this[TY]}get currentCheckedOutCount(){return this[A5].size}get waitQueueSize(){return this[I4].length}get loadBalanced(){return this.options.loadBalanced}get serviceGenerations(){return this[mx]}get serverError(){return this[uG].description.error}get checkedOutConnections(){return this[A5]}waitQueueErrorMetrics(){return this[pG].info(this.options.maxPoolSize)}ready(){if(this[B7]!==ux.PoolState.paused)return;this[B7]=ux.PoolState.ready,this.emitAndLog(u1.CONNECTION_POOL_READY,new J8.ConnectionPoolReadyEvent(this)),(0,DY.clearTimeout)(this[C9]),this.ensureMinPoolSize()}checkOut(Z){this.emitAndLog(u1.CONNECTION_CHECK_OUT_STARTED,new J8.ConnectionCheckOutStartedEvent(this));const Y=this.options.waitQueueTimeoutMS,X={callback:Z,timeoutController:new F3.TimeoutController(Y)};X.timeoutController.signal.addEventListener("abort",()=>{X[lG]=!0,X.timeoutController.clear(),this.emitAndLog(u1.CONNECTION_CHECK_OUT_FAILED,new J8.ConnectionCheckOutFailedEvent(this,"timeout")),X.callback(new PY.WaitQueueTimeoutError(this.loadBalanced?this.waitQueueErrorMetrics():"Timed out while checking out a connection from connection pool",this.address))}),this[I4].push(X),process.nextTick(()=>this.processWaitQueue())}checkIn(Z){if(!this[A5].has(Z))return;const Y=this.closed,X=this.connectionIsStale(Z),J=!!(Y||X||Z.closed);if(!J)Z.markAvailable(),this[T4].unshift(Z);if(this[A5].delete(Z),this.emitAndLog(u1.CONNECTION_CHECKED_IN,new J8.ConnectionCheckedInEvent(this,Z)),J){const $=Z.closed?"error":Y?"poolClosed":"stale";this.destroyConnection(Z,$)}process.nextTick(()=>this.processWaitQueue())}clear(Z={}){if(this.closed)return;if(this.loadBalanced){const{serviceId:$}=Z;if(!$)throw new M7.MongoRuntimeError("ConnectionPool.clear() called in load balanced mode with no serviceId.");const W=$.toHexString(),G=this.serviceGenerations.get(W);if(G==null)throw new M7.MongoRuntimeError("Service generations are required in load balancer mode.");else this.serviceGenerations.set(W,G+1);this.emitAndLog(u1.CONNECTION_POOL_CLEARED,new J8.ConnectionPoolClearedEvent(this,{serviceId:$}));return}const Y=Z.interruptInUseConnections??!1,X=this[IY];this[IY]+=1;const J=this[B7]===ux.PoolState.paused;if(this[B7]=ux.PoolState.paused,this.clearMinPoolSizeTimer(),!J)this.emitAndLog(u1.CONNECTION_POOL_CLEARED,new J8.ConnectionPoolClearedEvent(this,{interruptInUseConnections:Y}));if(Y)process.nextTick(()=>this.interruptInUseConnections(X));this.processWaitQueue()}interruptInUseConnections(Z){for(let Y of this[A5])if(Y.generation<=Z)this.checkIn(Y),Y.onError(new PY.PoolClearedOnNetworkError(this))}close(Z,Y){let X=Z;const J=Y??Z;if(typeof X==="function")X={};if(X=Object.assign({force:!1},X),this.closed)return J();if(this[cG].emit("cancel"),typeof this[dG].return==="function")this[dG].return(void 0);this[B7]=ux.PoolState.closed,this.clearMinPoolSizeTimer(),this.processWaitQueue(),(0,F3.eachAsync)(this[T4].toArray(),($,W)=>{this.emitAndLog(u1.CONNECTION_CLOSED,new J8.ConnectionClosedEvent(this,$,"poolClosed")),$.destroy({force:!!X.force},W)},($)=>{this[T4].clear(),this.emitAndLog(u1.CONNECTION_POOL_CLOSED,new J8.ConnectionPoolClosedEvent(this)),J($)})}withConnection(Z,Y,X){if(Z){Y(void 0,Z,(J,$)=>{if(J)return this.withReauthentication(J,Z,Y,X);X(void 0,$)});return}this.checkOut((J,$)=>{Y(J,$,(W,G)=>{if(W)if($)this.withReauthentication(W,$,Y,X);else X(W);else X(void 0,G);if($)this.checkIn($)})})}withReauthentication(Z,Y,X,J){if(Z instanceof M7.MongoError&&Z.code===M7.MONGODB_ERROR_CODES.Reauthenticate)this.reauthenticate(Y,X,($,W)=>{if($)return J($);J(void 0,W)});else J(Z)}reauthenticate(Z,Y,X){const J=Z.authContext;if(!J)return X(new M7.MongoRuntimeError("No auth context found on connection."));const $=J.credentials;if(!$)return X(new M7.MongoMissingCredentialsError("Connection is missing credentials when asked to reauthenticate"));const W=$.resolveAuthMechanism(Z.hello||void 0),G=hx.AUTH_PROVIDERS.get(W.mechanism);if(!G)return X(new M7.MongoMissingCredentialsError(`Reauthenticate failed due to no auth provider for ${$.mechanism}`));G.reauth(J).then(()=>{Y(void 0,Z,(K,Q)=>{if(K)return X(K);X(void 0,Q)})},(K)=>X(K))}clearMinPoolSizeTimer(){const Z=this[C9];if(Z)(0,DY.clearTimeout)(Z)}destroyConnection(Z,Y){this.emitAndLog(u1.CONNECTION_CLOSED,new J8.ConnectionClosedEvent(this,Z,Y)),process.nextTick(()=>Z.destroy({force:!1}))}connectionIsStale(Z){const Y=Z.serviceId;if(this.loadBalanced&&Y){const X=Y.toHexString(),J=this.serviceGenerations.get(X);return Z.generation!==J}return Z.generation!==this[IY]}connectionIsIdle(Z){return!!(this.options.maxIdleTimeMS&&Z.idleTime>this.options.maxIdleTimeMS)}destroyConnectionIfPerished(Z){const Y=this.connectionIsStale(Z),X=this.connectionIsIdle(Z);if(!Y&&!X&&!Z.closed)return!1;const J=Z.closed?"error":Y?"stale":"idle";return this.destroyConnection(Z,J),!0}createConnection(Z){const Y={...this.options,id:this[dG].next().value,generation:this[IY],cancellationToken:this[cG]};this[TY]++,this.emitAndLog(u1.CONNECTION_CREATED,new J8.ConnectionCreatedEvent(this,{id:Y.id})),(0,hx.connect)(Y,(X,J)=>{if(X||!J){if(this[TY]--,this.emitAndLog(u1.CONNECTION_CLOSED,new J8.ConnectionClosedEvent(this,{id:Y.id,serviceId:void 0},"error",X)),X instanceof M7.MongoNetworkError||X instanceof M7.MongoServerError)X.connectionGeneration=Y.generation;Z(X??new M7.MongoRuntimeError("Connection creation failed without error"));return}if(this[B7]!==ux.PoolState.ready){this[TY]--,J.destroy({force:!0}),Z(this.closed?new PY.PoolClosedError(this):new PY.PoolClearedError(this));return}for(let $ of[...l6.APM_EVENTS,mG.Connection.CLUSTER_TIME_RECEIVED])J.on($,(W)=>this.emit($,W));if(this.loadBalanced){J.on(mG.Connection.PINNED,(W)=>this[pG].markPinned(W)),J.on(mG.Connection.UNPINNED,(W)=>this[pG].markUnpinned(W));const $=J.serviceId;if($){let W;const G=$.toHexString();if(W=this.serviceGenerations.get(G))J.generation=W;else this.serviceGenerations.set(G,0),J.generation=0}}J.markAvailable(),this.emitAndLog(u1.CONNECTION_READY,new J8.ConnectionReadyEvent(this,J)),this[TY]--,Z(void 0,J);return})}ensureMinPoolSize(){const Z=this.options.minPoolSize;if(this[B7]!==ux.PoolState.ready||Z===0)return;if(this[T4].prune((Y)=>this.destroyConnectionIfPerished(Y)),this.totalConnectionCount<Z&&this.pendingConnectionCount<this.options.maxConnecting)this.createConnection((Y,X)=>{if(Y)this[uG].handleError(Y);if(!Y&&X)this[T4].push(X),process.nextTick(()=>this.processWaitQueue());if(this[B7]===ux.PoolState.ready)(0,DY.clearTimeout)(this[C9]),this[C9]=(0,DY.setTimeout)(()=>this.ensureMinPoolSize(),this.options.minPoolSizeCheckFrequencyMS)});else(0,DY.clearTimeout)(this[C9]),this[C9]=(0,DY.setTimeout)(()=>this.ensureMinPoolSize(),this.options.minPoolSizeCheckFrequencyMS)}processWaitQueue(){if(this[iG])return;this[iG]=!0;while(this.waitQueueSize){const X=this[I4].first();if(!X){this[I4].shift();continue}if(X[lG]){this[I4].shift();continue}if(this[B7]!==ux.PoolState.ready){const $=this.closed?"poolClosed":"connectionError",W=this.closed?new PY.PoolClosedError(this):new PY.PoolClearedError(this);this.emitAndLog(u1.CONNECTION_CHECK_OUT_FAILED,new J8.ConnectionCheckOutFailedEvent(this,$,W)),X.timeoutController.clear(),this[I4].shift(),X.callback(W);continue}if(!this.availableConnectionCount)break;const J=this[T4].shift();if(!J)break;if(!this.destroyConnectionIfPerished(J))this[A5].add(J),this.emitAndLog(u1.CONNECTION_CHECKED_OUT,new J8.ConnectionCheckedOutEvent(this,J)),X.timeoutController.clear(),this[I4].shift(),X.callback(void 0,J)}const{maxPoolSize:Z,maxConnecting:Y}=this.options;while(this.waitQueueSize>0&&this.pendingConnectionCount<Y&&(Z===0||this.totalConnectionCount<Z)){const X=this[I4].shift();if(!X||X[lG])continue;this.createConnection((J,$)=>{if(X[lG]){if(!J&&$)this[T4].push($)}else{if(J)this.emitAndLog(u1.CONNECTION_CHECK_OUT_FAILED,new J8.ConnectionCheckOutFailedEvent(this,"connectionError",J));else if($)this[A5].add($),this.emitAndLog(u1.CONNECTION_CHECKED_OUT,new J8.ConnectionCheckedOutEvent(this,$));X.timeoutController.clear(),X.callback(J,$)}process.nextTick(()=>this.processWaitQueue())})}this[iG]=!1}}u1.CONNECTION_POOL_CREATED=l6.CONNECTION_POOL_CREATED;u1.CONNECTION_POOL_CLOSED=l6.CONNECTION_POOL_CLOSED;u1.CONNECTION_POOL_CLEARED=l6.CONNECTION_POOL_CLEARED;u1.CONNECTION_POOL_READY=l6.CONNECTION_POOL_READY;u1.CONNECTION_CREATED=l6.CONNECTION_CREATED;u1.CONNECTION_READY=l6.CONNECTION_READY;u1.CONNECTION_CLOSED=l6.CONNECTION_CLOSED;u1.CONNECTION_CHECK_OUT_STARTED=l6.CONNECTION_CHECK_OUT_STARTED;u1.CONNECTION_CHECK_OUT_FAILED=l6.CONNECTION_CHECK_OUT_FAILED;u1.CONNECTION_CHECKED_OUT=l6.CONNECTION_CHECKED_OUT;u1.CONNECTION_CHECKED_IN=l6.CONNECTION_CHECKED_IN;ux.ConnectionPool=u1});var ex=w((tx)=>{var L3=function(Z){return Z.s.state===$8.STATE_CLOSED||Z.s.state===$8.STATE_CLOSING},ix=function(Z){Z[c7]?.stop(),Z[c7]=void 0,Z[O9]?.close(),Z[O9]=void 0,Z[k9].emit("cancel"),Z[W8]?.destroy({force:!0}),Z[W8]=void 0},AG1=function(Z,Y){let X=(0,M6.now)();const J=Z[nG].description.topologyVersion,$=J!=null;Z.emit(V3.Server.SERVER_HEARTBEAT_STARTED,new U3.ServerHeartbeatStartedEvent(Z.address,$));function W(K){Z[W8]?.destroy({force:!0}),Z[W8]=void 0,Z.emit(V3.Server.SERVER_HEARTBEAT_FAILED,new U3.ServerHeartbeatFailedEvent(Z.address,(0,M6.calculateDurationInMs)(X),K,$));const Q=!(K instanceof jY.MongoError)?new jY.MongoError(jY.MongoError.buildErrorMessage(K),{cause:K}):K;if(Q.addErrorLabel(jY.MongoErrorLabel.ResetPool),Q instanceof jY.MongoNetworkTimeoutError)Q.addErrorLabel(jY.MongoErrorLabel.InterruptInUseConnections);Z.emit("resetServer",Q),Y(K)}const G=Z[W8];if(G&&!G.closed){const{serverApi:K,helloOk:Q}=G,z=Z.options.connectTimeoutMS,H=Z.options.heartbeatFrequencyMS,F={[K?.version||Q?"hello":wq.LEGACY_HELLO_COMMAND]:1,...$&&J?{maxAwaitTimeMS:H,topologyVersion:DG1(J)}:{}},U=$?{socketTimeoutMS:z?z+H:0,exhaustAllowed:!0}:{socketTimeoutMS:z};if($&&Z[O9]==null)Z[O9]=new Rq(Z[k9],Object.assign({heartbeatFrequencyMS:Z.options.heartbeatFrequencyMS},Z.connectOptions));G.command((0,M6.ns)("admin.$cmd"),F,U,(V,q)=>{if(V)return W(V);if(!("isWritablePrimary"in q))q.isWritablePrimary=q[wq.LEGACY_HELLO_COMMAND];const L=Z[O9],R=$&&L?L.roundTripTime:(0,M6.calculateDurationInMs)(X),B=$&&q.topologyVersion!=null;if(Z.emit(V3.Server.SERVER_HEARTBEAT_SUCCEEDED,new U3.ServerHeartbeatSucceededEvent(Z.address,R,q,B)),B)Z.emit(V3.Server.SERVER_HEARTBEAT_STARTED,new U3.ServerHeartbeatStartedEvent(Z.address,!0)),X=(0,M6.now)();else Z[O9]?.close(),Z[O9]=void 0,Y(void 0,q)});return}(0,ax.connect)(Z.connectOptions,(K,Q)=>{if(K){Z[W8]=void 0,W(K);return}if(Q){if(Q.isMonitoringConnection=!0,L3(Z)){Q.destroy({force:!0});return}Z[W8]=Q,Z.emit(V3.Server.SERVER_HEARTBEAT_SUCCEEDED,new U3.ServerHeartbeatSucceededEvent(Z.address,(0,M6.calculateDurationInMs)(X),Q.hello,!1)),Y(void 0,Q.hello)}})},nx=function(Z){return(Y)=>{if(Z.s.state===S9){process.nextTick(Y);return}CY(Z,S9);function X(){if(!L3(Z))CY(Z,EY);Y()}AG1(Z,(J,$)=>{if(J){if(Z[nG].description.type===$8.ServerType.Unknown)return X()}if($&&$.topologyVersion)(0,D5.setTimeout)(()=>{if(!L3(Z))Z[c7]?.wake()},0);X()})}},DG1=function(Z){return{processId:Z.processId,counter:lx.Long.isLong(Z.counter)?Z.counter:lx.Long.fromNumber(Z.counter)}},rx=function(Z,Y){const X=(0,M6.now)();Y.cancellationToken=Z[k9];const J=Y.heartbeatFrequencyMS;if(Z.closed)return;function $(G){if(Z.closed){G?.destroy({force:!0});return}if(Z[W8]==null)Z[W8]=G;Z[q3]=(0,M6.calculateDurationInMs)(X),Z[c7]=(0,D5.setTimeout)(()=>rx(Z,Y),J)}const W=Z[W8];if(W==null){(0,ax.connect)(Y,(G,K)=>{if(G){Z[W8]=void 0,Z[q3]=0;return}$(K)});return}W.command((0,M6.ns)("admin.$cmd"),{[wq.LEGACY_HELLO_COMMAND]:1},void 0,(G)=>{if(G){Z[W8]=void 0,Z[q3]=0;return}$()})};Object.defineProperty(tx,"__esModule",{value:!0});tx.MonitorInterval=tx.RTTPinger=tx.Monitor=void 0;var D5=import.meta.require("timers"),lx=Z0(),ax=Uq(),BG1=$3(),wq=c0(),jY=r(),px=U6(),M6=$1(),$8=k6(),U3=jG(),V3=Mq(),nG=Symbol("server"),c7=Symbol("monitorId"),W8=Symbol("connection"),k9=Symbol("cancellationToken"),O9=Symbol("rttPinger"),q3=Symbol("roundTripTime"),EY="idle",S9="monitoring",CY=(0,M6.makeStateMachine)({[$8.STATE_CLOSING]:[$8.STATE_CLOSING,EY,$8.STATE_CLOSED],[$8.STATE_CLOSED]:[$8.STATE_CLOSED,S9],[EY]:[EY,S9,$8.STATE_CLOSING],[S9]:[S9,EY,$8.STATE_CLOSING]}),NG1=new Set([$8.STATE_CLOSING,$8.STATE_CLOSED,S9]);class sx extends px.TypedEventEmitter{get connection(){return this[W8]}constructor(Z,Y){super();this[nG]=Z,this[W8]=void 0,this[k9]=new px.CancellationToken,this[k9].setMaxListeners(Infinity),this[c7]=void 0,this.s={state:$8.STATE_CLOSED},this.address=Z.description.address,this.options=Object.freeze({connectTimeoutMS:Y.connectTimeoutMS??1e4,heartbeatFrequencyMS:Y.heartbeatFrequencyMS??1e4,minHeartbeatFrequencyMS:Y.minHeartbeatFrequencyMS??500});const X=this[k9],J=Object.assign({id:"<monitor>",generation:Z.pool.generation,connectionType:BG1.Connection,cancellationToken:X,hostAddress:Z.description.hostAddress},Y,{raw:!1,useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!0});if(delete J.credentials,J.autoEncrypter)delete J.autoEncrypter;this.connectOptions=Object.freeze(J)}connect(){if(this.s.state!==$8.STATE_CLOSED)return;const Z=this.options.heartbeatFrequencyMS,Y=this.options.minHeartbeatFrequencyMS;this[c7]=new aG(nx(this),{heartbeatFrequencyMS:Z,minHeartbeatFrequencyMS:Y,immediate:!0})}requestCheck(){if(NG1.has(this.s.state))return;this[c7]?.wake()}reset(){const Z=this[nG].description.topologyVersion;if(L3(this)||Z==null)return;CY(this,$8.STATE_CLOSING),ix(this),CY(this,EY);const Y=this.options.heartbeatFrequencyMS,X=this.options.minHeartbeatFrequencyMS;this[c7]=new aG(nx(this),{heartbeatFrequencyMS:Y,minHeartbeatFrequencyMS:X})}close(){if(L3(this))return;CY(this,$8.STATE_CLOSING),ix(this),this.emit("close"),CY(this,$8.STATE_CLOSED)}}tx.Monitor=sx;class Rq{constructor(Z,Y){this[W8]=void 0,this[k9]=Z,this[q3]=0,this.closed=!1;const X=Y.heartbeatFrequencyMS;this[c7]=(0,D5.setTimeout)(()=>rx(this,Y),X)}get roundTripTime(){return this[q3]}close(){this.closed=!0,(0,D5.clearTimeout)(this[c7]),this[W8]?.destroy({force:!0}),this[W8]=void 0}}tx.RTTPinger=Rq;class aG{constructor(Z,Y={}){if(this.isExpeditedCallToFnScheduled=!1,this.stopped=!1,this.isExecutionInProgress=!1,this.hasExecutedOnce=!1,this._executeAndReschedule=()=>{if(this.stopped)return;if(this.timerId)(0,D5.clearTimeout)(this.timerId);this.isExpeditedCallToFnScheduled=!1,this.isExecutionInProgress=!0,this.fn(()=>{this.lastExecutionEnded=(0,M6.now)(),this.isExecutionInProgress=!1,this._reschedule(this.heartbeatFrequencyMS)})},this.fn=Z,this.lastExecutionEnded=(-Infinity),this.heartbeatFrequencyMS=Y.heartbeatFrequencyMS??1000,this.minHeartbeatFrequencyMS=Y.minHeartbeatFrequencyMS??500,Y.immediate)this._executeAndReschedule();else this._reschedule(void 0)}wake(){const Y=(0,M6.now)()-this.lastExecutionEnded;if(Y<0)return this._executeAndReschedule();if(this.isExecutionInProgress)return;if(this.isExpeditedCallToFnScheduled)return;if(Y<this.minHeartbeatFrequencyMS){this.isExpeditedCallToFnScheduled=!0,this._reschedule(this.minHeartbeatFrequencyMS-Y);return}this._executeAndReschedule()}stop(){if(this.stopped=!0,this.timerId)(0,D5.clearTimeout)(this.timerId),this.timerId=void 0;this.lastExecutionEnded=(-Infinity),this.isExpeditedCallToFnScheduled=!1}toString(){return JSON.stringify(this)}toJSON(){const Z=(0,M6.now)(),Y=Z-this.lastExecutionEnded;return{timerId:this.timerId!=null?"set":"cleared",lastCallTime:this.lastExecutionEnded,isExpeditedCheckScheduled:this.isExpeditedCallToFnScheduled,stopped:this.stopped,heartbeatFrequencyMS:this.heartbeatFrequencyMS,minHeartbeatFrequencyMS:this.minHeartbeatFrequencyMS,currentTime:Z,timeSinceLastCall:Y}}_reschedule(Z){if(this.stopped)return;if(this.timerId)(0,D5.clearTimeout)(this.timerId);this.timerId=(0,D5.setTimeout)(this._executeAndReschedule,Z||this.heartbeatFrequencyMS)}}tx.MonitorInterval=aG});var Mq=w((Yf)=>{var kG1=function(Z,Y){if(Z===-1)return Y;const X=0.2;return X*Y+(1-X)*Z},Bq=function(Z,Y){if(Z.loadBalanced)return;if(Y instanceof Q0.MongoNetworkError&&!(Y instanceof Q0.MongoNetworkTimeoutError))Z[OY]?.reset();Z.emit(n8.DESCRIPTION_RECEIVED,new Dq.ServerDescription(Z.description.hostAddress,void 0,{error:Y}))},_G1=function(Z,Y){if(Y)return Y.inTransaction()||("aggregate"in Z)||("find"in Z)||("getMore"in Z)||("listCollections"in Z)||("listIndexes"in Z);return!1},xG1=function(Z,Y){if(Y.serviceId)return Y.generation!==Z.serviceGenerations.get(Y.serviceId.toHexString());return Y.generation!==Z.generation},fG1=function(Z,Y){const X=Y.topologyVersion,J=Z.description.topologyVersion;return(0,Dq.compareTopologyVersion)(J,X)<0},Nq=function(Z,Y){return Z&&Z.inTransaction()&&!(0,Aq.isTransactionCommand)(Y)},Zf=function(Z){return Z.s.options.retryWrites!==!1},yG1=function(Z,Y,X,J,$){const W=J?.session;return function G(K,Q){if(K==null&&Q!=null)return $(void 0,Q);if(J!=null&&("noResponse"in J)&&J.noResponse===!0)return $(void 0,null);if(!K)return $(new Q0.MongoUnexpectedServerResponseError("Empty response with no error"));if(!(K instanceof Q0.MongoError))return $(K);if(xG1(Z.pool,Y))return $(K);if(K instanceof Q0.MongoNetworkError){if(W&&!W.hasEnded&&W.serverSession)W.serverSession.isDirty=!0;if(Nq(W,X)&&!K.hasErrorLabel(Q0.MongoErrorLabel.TransientTransactionError))K.addErrorLabel(Q0.MongoErrorLabel.TransientTransactionError);if((Zf(Z.topology)||(0,Aq.isTransactionCommand)(X))&&(0,sG.supportsRetryableWrites)(Z)&&!Nq(W,X))K.addErrorLabel(Q0.MongoErrorLabel.RetryableWriteError)}else if((Zf(Z.topology)||(0,Aq.isTransactionCommand)(X))&&(0,Q0.needsRetryableWriteLabel)(K,(0,sG.maxWireVersion)(Z))&&!Nq(W,X))K.addErrorLabel(Q0.MongoErrorLabel.RetryableWriteError);if(W&&W.isPinned&&K.hasErrorLabel(Q0.MongoErrorLabel.TransientTransactionError))W.unpin({force:!0});return Z.handleError(K,Y),$(K)}};Object.defineProperty(Yf,"__esModule",{value:!0});Yf.Server=void 0;var IG1=import.meta.require("util"),jG1=$3(),EG1=cx(),CG1=Lq(),l7=c0(),Q0=r(),OG1=U6(),Aq=lF(),sG=$1(),s1=k6(),SG1=ex(),Dq=jJ(),w3=(0,sG.makeStateMachine)({[s1.STATE_CLOSED]:[s1.STATE_CLOSED,s1.STATE_CONNECTING],[s1.STATE_CONNECTING]:[s1.STATE_CONNECTING,s1.STATE_CLOSING,s1.STATE_CONNECTED,s1.STATE_CLOSED],[s1.STATE_CONNECTED]:[s1.STATE_CONNECTED,s1.STATE_CLOSING,s1.STATE_CLOSED],[s1.STATE_CLOSING]:[s1.STATE_CLOSING,s1.STATE_CLOSED]}),OY=Symbol("monitor");class n8 extends OG1.TypedEventEmitter{constructor(Z,Y,X){super();this.commandAsync=(0,IG1.promisify)((W,G,K,Q)=>this.command(W,G,K,Q)),this.serverApi=X.serverApi;const J={hostAddress:Y.hostAddress,...X};this.topology=Z,this.pool=new EG1.ConnectionPool(this,J),this.s={description:Y,options:X,state:s1.STATE_CLOSED,operationCount:0};for(let W of[...l7.CMAP_EVENTS,...l7.APM_EVENTS])this.pool.on(W,(G)=>this.emit(W,G));if(this.pool.on(jG1.Connection.CLUSTER_TIME_RECEIVED,(W)=>{this.clusterTime=W}),this.loadBalanced){this[OY]=null;return}const $=new SG1.Monitor(this,this.s.options);this[OY]=$;for(let W of l7.HEARTBEAT_EVENTS)$.on(W,(G)=>this.emit(W,G));$.on("resetServer",(W)=>Bq(this,W)),$.on(n8.SERVER_HEARTBEAT_SUCCEEDED,(W)=>{if(this.emit(n8.DESCRIPTION_RECEIVED,new Dq.ServerDescription(this.description.hostAddress,W.reply,{roundTripTime:kG1(this.description.roundTripTime,W.duration)})),this.s.state===s1.STATE_CONNECTING)w3(this,s1.STATE_CONNECTED),this.emit(n8.CONNECT,this)})}get clusterTime(){return this.topology.clusterTime}set clusterTime(Z){this.topology.clusterTime=Z}get description(){return this.s.description}get name(){return this.s.description.address}get autoEncrypter(){if(this.s.options&&this.s.options.autoEncrypter)return this.s.options.autoEncrypter;return}get loadBalanced(){return this.topology.description.type===s1.TopologyType.LoadBalanced}connect(){if(this.s.state!==s1.STATE_CLOSED)return;if(w3(this,s1.STATE_CONNECTING),!this.loadBalanced)this[OY]?.connect();else w3(this,s1.STATE_CONNECTED),this.emit(n8.CONNECT,this)}destroy(Z,Y){if(typeof Z==="function")Y=Z,Z={force:!1};if(Z=Object.assign({},{force:!1},Z),this.s.state===s1.STATE_CLOSED){if(typeof Y==="function")Y();return}if(w3(this,s1.STATE_CLOSING),!this.loadBalanced)this[OY]?.close();this.pool.close(Z,(X)=>{if(w3(this,s1.STATE_CLOSED),this.emit("closed"),typeof Y==="function")Y(X)})}requestCheck(){if(!this.loadBalanced)this[OY]?.requestCheck()}command(Z,Y,X,J){if(J==null)throw new Q0.MongoInvalidArgumentError("Callback must be provided");if(Z.db==null||typeof Z==="string")throw new Q0.MongoInvalidArgumentError("Namespace must not be a string");if(this.s.state===s1.STATE_CLOSING||this.s.state===s1.STATE_CLOSED){J(new Q0.MongoServerClosedError);return}const $=Object.assign({},X,{wireProtocolCommand:!1});if($.omitReadPreference)delete $.readPreference;const W=$.session,G=W?.pinnedConnection;if(this.loadBalanced&&W&&G==null&&_G1(Y,W)){this.pool.checkOut((K,Q)=>{if(K||Q==null){if(J)return J(K);return}W.pin(Q),this.command(Z,Y,$,J)});return}this.incrementOperationCount(),this.pool.withConnection(G,(K,Q,z)=>{if(K||!Q){if(this.decrementOperationCount(),!K)return z(new Q0.MongoRuntimeError("Failed to create connection without error"));if(!(K instanceof CG1.PoolClearedError))this.handleError(K);return z(K)}Q.command(Z,Y,$,yG1(this,Q,Y,$,(H,F)=>{this.decrementOperationCount(),z(H,F)}))},J)}handleError(Z,Y){if(!(Z instanceof Q0.MongoError))return;if(Z.connectionGeneration&&Z.connectionGeneration<this.pool.generation)return;const J=Z instanceof Q0.MongoNetworkError&&!(Z instanceof Q0.MongoNetworkTimeoutError),$=(0,Q0.isNetworkErrorBeforeHandshake)(Z),W=Z.hasErrorLabel(Q0.MongoErrorLabel.HandshakeError);if(J||$||W){if(!this.loadBalanced)Z.addErrorLabel(Q0.MongoErrorLabel.ResetPool),Bq(this,Z);else if(Y)this.pool.clear({serviceId:Y.serviceId})}else if((0,Q0.isSDAMUnrecoverableError)(Z)){if(fG1(this,Z)){const G=(0,sG.maxWireVersion)(this)<=7||(0,Q0.isNodeShuttingDownError)(Z);if(this.loadBalanced&&Y&&G)this.pool.clear({serviceId:Y.serviceId});if(!this.loadBalanced){if(G)Z.addErrorLabel(Q0.MongoErrorLabel.ResetPool);Bq(this,Z),process.nextTick(()=>this.requestCheck())}}}}decrementOperationCount(){return this.s.operationCount-=1}incrementOperationCount(){return this.s.operationCount+=1}}n8.SERVER_HEARTBEAT_STARTED=l7.SERVER_HEARTBEAT_STARTED;n8.SERVER_HEARTBEAT_SUCCEEDED=l7.SERVER_HEARTBEAT_SUCCEEDED;n8.SERVER_HEARTBEAT_FAILED=l7.SERVER_HEARTBEAT_FAILED;n8.CONNECT=l7.CONNECT;n8.DESCRIPTION_RECEIVED=l7.DESCRIPTION_RECEIVED;n8.CLOSED=l7.CLOSED;n8.ENDED=l7.ENDED;Yf.Server=n8});var Iq=w(($f)=>{Object.defineProperty($f,"__esModule",{value:!0});$f.SrvPoller=$f.SrvPollingEvent=void 0;var gG1=import.meta.require("dns"),Pq=import.meta.require("timers"),bG1=r(),vG1=U6(),Jf=$1();class Tq{constructor(Z){this.srvRecords=Z}hostnames(){return new Set(this.srvRecords.map((Z)=>Jf.HostAddress.fromSrvRecord(Z).toString()))}}$f.SrvPollingEvent=Tq;class rG extends vG1.TypedEventEmitter{constructor(Z){super();if(!Z||!Z.srvHost)throw new bG1.MongoRuntimeError("Options for SrvPoller must exist and include srvHost");this.srvHost=Z.srvHost,this.srvMaxHosts=Z.srvMaxHosts??0,this.srvServiceName=Z.srvServiceName??"mongodb",this.rescanSrvIntervalMS=60000,this.heartbeatFrequencyMS=Z.heartbeatFrequencyMS??1e4,this.haMode=!1,this.generation=0,this._timeout=void 0}get srvAddress(){return`_${this.srvServiceName}._tcp.${this.srvHost}`}get intervalMS(){return this.haMode?this.heartbeatFrequencyMS:this.rescanSrvIntervalMS}start(){if(!this._timeout)this.schedule()}stop(){if(this._timeout)(0,Pq.clearTimeout)(this._timeout),this.generation+=1,this._timeout=void 0}schedule(){if(this._timeout)(0,Pq.clearTimeout)(this._timeout);this._timeout=(0,Pq.setTimeout)(()=>{this._poll().catch(()=>null)},this.intervalMS)}success(Z){this.haMode=!1,this.schedule(),this.emit(rG.SRV_RECORD_DISCOVERY,new Tq(Z))}failure(){this.haMode=!0,this.schedule()}async _poll(){const Z=this.generation;let Y;try{Y=await gG1.promises.resolveSrv(this.srvAddress)}catch(J){this.failure();return}if(Z!==this.generation)return;const X=[];for(let J of Y)if((0,Jf.matchesParentDomain)(J.name,this.srvHost))X.push(J);if(!X.length){this.failure();return}this.success(X)}}rG.SRV_RECORD_DISCOVERY="srvRecordDiscovery";$f.SrvPoller=rG});var Rf=w((Lf)=>{var Uf=function(Z,Y,X,J){X=X??{force:!1};for(let $ of a8.LOCAL_SERVER_EVENTS)Z.removeAllListeners($);Z.destroy(X,()=>{Y.emit(p1.SERVER_CLOSED,new P5.ServerClosedEvent(Y.s.id,Z.description.address));for(let $ of a8.SERVER_RELAY_EVENTS)Z.removeAllListeners($);if(typeof J==="function")J()})},dG1=function(Z){if(Z?.directConnection)return w1.TopologyType.Single;if(Z?.replicaSet)return w1.TopologyType.ReplicaSetNoPrimary;if(Z?.loadBalanced)return w1.TopologyType.LoadBalanced;return w1.TopologyType.Unknown},Vf=function(Z,Y){Z.emit(p1.SERVER_OPENING,new P5.ServerOpeningEvent(Z.s.id,Y.address));const X=new Qf.Server(Z,Y,Z.s.options);for(let J of a8.SERVER_RELAY_EVENTS)X.on(J,($)=>Z.emit(J,$));return X.on(Qf.Server.DESCRIPTION_RECEIVED,(J)=>Z.serverUpdateHandler(J)),X.connect(),X},Hf=function(Z,Y){if(Y&&Z.s.servers.has(Y.address)){const X=Z.s.servers.get(Y.address);if(X){if(X.s.description=Y,Y.error instanceof E4.MongoError&&Y.error.hasErrorLabel(E4.MongoErrorLabel.ResetPool)){const J=Y.error.hasErrorLabel(E4.MongoErrorLabel.InterruptInUseConnections);X.pool.clear({interruptInUseConnections:J})}else if(Y.error==null){const J=Z.s.description.type;if(Y.isDataBearing||Y.type!==w1.ServerType.Unknown&&J===w1.TopologyType.Single)X.pool.ready()}}}for(let X of Z.description.servers.values())if(!Z.s.servers.has(X.address)){const J=Vf(Z,X);Z.s.servers.set(X.address,J)}for(let X of Z.s.servers){const J=X[0];if(Z.description.hasServer(J))continue;if(!Z.s.servers.has(J))continue;const $=Z.s.servers.get(J);if(Z.s.servers.delete(J),$)Uf($,Z)}},qf=function(Z,Y){while(Z.length){const X=Z.shift();if(!X)continue;if(X.timeoutController.clear(),!X[Cq])X.callback(Y)}},Ff=function(Z){if(Z.s.state===w1.STATE_CLOSED){qf(Z[j4],new E4.MongoTopologyClosedError);return}const Y=Z.description.type===w1.TopologyType.Sharded,X=Array.from(Z.description.servers.values()),J=Z[j4].length;for(let $=0;$<J;++$){const W=Z[j4].shift();if(!W)continue;if(W[Cq])continue;let G;try{const z=W.serverSelector;G=z?z(Z.description,X):X}catch(z){W.timeoutController.clear(),W.callback(z);continue}let K;if(G.length===0){Z[j4].push(W);continue}else if(G.length===1)K=Z.s.servers.get(G[0].address);else{const z=(0,p7.shuffle)(G,2),H=Z.s.servers.get(z[0].address),F=Z.s.servers.get(z[1].address);K=H&&F&&H.s.operationCount<F.s.operationCount?H:F}if(!K){W.callback(new E4.MongoServerSelectionError("server selection returned a server description but the server was not found in the topology",Z.description));return}const Q=W.transaction;if(Y&&Q&&Q.isActive&&K)Q.pinServer(K);W.timeoutController.clear(),W.callback(void 0,K)}if(Z[j4].length>0)for(let[,$]of Z.s.servers)process.nextTick(function W(){return $.requestCheck()})},cG1=function(Z,Y){const J=Z.servers.get(Y.address)?.topologyVersion;return(0,Eq.compareTopologyVersion)(J,Y.topologyVersion)>0};Object.defineProperty(Lf,"__esModule",{value:!0});Lf.ServerCapabilities=Lf.Topology=void 0;var Gf=import.meta.require("util"),Kf=gV(),a8=c0(),E4=r(),mG1=U6(),R3=x0(),p7=$1(),w1=k6(),P5=jG(),Qf=Mq(),Eq=jJ(),jq=UJ(),tG=Iq(),zf=uF(),uG1=0,M3=(0,p7.makeStateMachine)({[w1.STATE_CLOSED]:[w1.STATE_CLOSED,w1.STATE_CONNECTING],[w1.STATE_CONNECTING]:[w1.STATE_CONNECTING,w1.STATE_CLOSING,w1.STATE_CONNECTED,w1.STATE_CLOSED],[w1.STATE_CONNECTED]:[w1.STATE_CONNECTED,w1.STATE_CLOSING,w1.STATE_CLOSED],[w1.STATE_CLOSING]:[w1.STATE_CLOSING,w1.STATE_CLOSED]}),Cq=Symbol("cancelled"),j4=Symbol("waitQueue");class p1 extends mG1.TypedEventEmitter{constructor(Z,Y,X){super();if(this.client=Z,this.selectServerAsync=(0,Gf.promisify)((Q,z,H)=>this.selectServer(Q,z,H)),X=X??{hosts:[p7.HostAddress.fromString("localhost:27017")],...Object.fromEntries(Kf.DEFAULT_OPTIONS.entries()),...Object.fromEntries(Kf.FEATURE_FLAGS.entries())},typeof Y==="string")Y=[p7.HostAddress.fromString(Y)];else if(!Array.isArray(Y))Y=[Y];const J=[];for(let Q of Y)if(typeof Q==="string")J.push(p7.HostAddress.fromString(Q));else if(Q instanceof p7.HostAddress)J.push(Q);else throw new E4.MongoRuntimeError(`Topology cannot be constructed from ${JSON.stringify(Q)}`);const $=dG1(X),W=uG1++,G=X.srvMaxHosts==null||X.srvMaxHosts===0||X.srvMaxHosts>=J.length?J:(0,p7.shuffle)(J,X.srvMaxHosts),K=new Map;for(let Q of G)K.set(Q.toString(),new Eq.ServerDescription(Q));if(this[j4]=new p7.List,this.s={id:W,options:X,seedlist:J,state:w1.STATE_CLOSED,description:new zf.TopologyDescription($,K,X.replicaSet,void 0,void 0,void 0,X),serverSelectionTimeoutMS:X.serverSelectionTimeoutMS,heartbeatFrequencyMS:X.heartbeatFrequencyMS,minHeartbeatFrequencyMS:X.minHeartbeatFrequencyMS,servers:new Map,credentials:X?.credentials,clusterTime:void 0,connectionTimers:new Set,detectShardedTopology:(Q)=>this.detectShardedTopology(Q),detectSrvRecords:(Q)=>this.detectSrvRecords(Q)},X.srvHost&&!X.loadBalanced)this.s.srvPoller=X.srvPoller??new tG.SrvPoller({heartbeatFrequencyMS:this.s.heartbeatFrequencyMS,srvHost:X.srvHost,srvMaxHosts:X.srvMaxHosts,srvServiceName:X.srvServiceName}),this.on(p1.TOPOLOGY_DESCRIPTION_CHANGED,this.s.detectShardedTopology)}detectShardedTopology(Z){const Y=Z.previousDescription.type,X=Z.newDescription.type,J=Y!==w1.TopologyType.Sharded&&X===w1.TopologyType.Sharded,W=!!this.s.srvPoller?.listeners(tG.SrvPoller.SRV_RECORD_DISCOVERY)?.includes(this.s.detectSrvRecords);if(J&&!W)this.s.srvPoller?.on(tG.SrvPoller.SRV_RECORD_DISCOVERY,this.s.detectSrvRecords),this.s.srvPoller?.start()}detectSrvRecords(Z){const Y=this.s.description;if(this.s.description=this.s.description.updateFromSrvPollingEvent(Z,this.s.options.srvMaxHosts),this.s.description===Y)return;Hf(this),this.emit(p1.TOPOLOGY_DESCRIPTION_CHANGED,new P5.TopologyDescriptionChangedEvent(this.s.id,Y,this.s.description))}get description(){return this.s.description}get loadBalanced(){return this.s.options.loadBalanced}get capabilities(){return new Oq(this.lastHello())}connect(Z,Y){if(typeof Z==="function")Y=Z,Z={};if(Z=Z??{},this.s.state===w1.STATE_CONNECTED){if(typeof Y==="function")Y();return}M3(this,w1.STATE_CONNECTING),this.emit(p1.TOPOLOGY_OPENING,new P5.TopologyOpeningEvent(this.s.id)),this.emit(p1.TOPOLOGY_DESCRIPTION_CHANGED,new P5.TopologyDescriptionChangedEvent(this.s.id,new zf.TopologyDescription(w1.TopologyType.Unknown),this.s.description));const X=Array.from(this.s.description.servers.values());if(this.s.servers=new Map(X.map((W)=>[W.address,Vf(this,W)])),this.s.options.loadBalanced)for(let W of X){const G=new Eq.ServerDescription(W.hostAddress,void 0,{loadBalanced:this.s.options.loadBalanced});this.serverUpdateHandler(G)}const J=(W)=>Y?Y(W):this.emit(p1.ERROR,W),$=Z.readPreference??R3.ReadPreference.primary;this.selectServer((0,jq.readPreferenceServerSelector)($),Z,(W,G)=>{if(W)return this.close({force:!1},()=>J(W));if(this.s.options[Symbol.for("@@mdb.skipPingOnConnect")]!==!0&&G&&this.s.credentials){G.command((0,p7.ns)("admin.$cmd"),{ping:1},{},(Q)=>{if(Q)return J(Q);M3(this,w1.STATE_CONNECTED),this.emit(p1.OPEN,this),this.emit(p1.CONNECT,this),Y?.(void 0,this)});return}M3(this,w1.STATE_CONNECTED),this.emit(p1.OPEN,this),this.emit(p1.CONNECT,this),Y?.(void 0,this)})}close(Z,Y){if(Z=Z??{force:!1},this.s.state===w1.STATE_CLOSED||this.s.state===w1.STATE_CLOSING)return Y?.();const X=Array.from(this.s.servers.values(),(J)=>{return(0,Gf.promisify)(Uf)(J,this,{force:!!Z?.force})});Promise.all(X).then(()=>{if(this.s.servers.clear(),M3(this,w1.STATE_CLOSING),qf(this[j4],new E4.MongoTopologyClosedError),(0,w1.drainTimerQueue)(this.s.connectionTimers),this.s.srvPoller)this.s.srvPoller.stop(),this.s.srvPoller.removeListener(tG.SrvPoller.SRV_RECORD_DISCOVERY,this.s.detectSrvRecords);this.removeListener(p1.TOPOLOGY_DESCRIPTION_CHANGED,this.s.detectShardedTopology),M3(this,w1.STATE_CLOSED),this.emit(p1.TOPOLOGY_CLOSED,new P5.TopologyClosedEvent(this.s.id))}).finally(()=>Y?.())}selectServer(Z,Y,X){let J;if(typeof Z!=="function")if(typeof Z==="string")J=(0,jq.readPreferenceServerSelector)(R3.ReadPreference.fromString(Z));else{let Q;if(Z instanceof R3.ReadPreference)Q=Z;else R3.ReadPreference.translate(Y),Q=Y.readPreference||R3.ReadPreference.primary;J=(0,jq.readPreferenceServerSelector)(Q)}else J=Z;Y=Object.assign({},{serverSelectionTimeoutMS:this.s.serverSelectionTimeoutMS},Y);const $=this.description.type===w1.TopologyType.Sharded,W=Y.session,G=W&&W.transaction;if($&&G&&G.server){X(void 0,G.server);return}const K={serverSelector:J,transaction:G,callback:X,timeoutController:new p7.TimeoutController(Y.serverSelectionTimeoutMS)};K.timeoutController.signal.addEventListener("abort",()=>{K[Cq]=!0,K.timeoutController.clear();const Q=new E4.MongoServerSelectionError(`Server selection timed out after ${Y.serverSelectionTimeoutMS} ms`,this.description);K.callback(Q)}),this[j4].push(K),Ff(this)}serverUpdateHandler(Z){if(!this.s.description.hasServer(Z.address))return;if(cG1(this.s.description,Z))return;const Y=this.s.description,X=this.s.description.servers.get(Z.address);if(!X)return;const J=Z.$clusterTime;if(J)(0,w1._advanceClusterTime)(this,J);const $=X&&X.equals(Z);if(this.s.description=this.s.description.update(Z),this.s.description.compatibilityError){this.emit(p1.ERROR,new E4.MongoCompatibilityError(this.s.description.compatibilityError));return}if(!$){const W=this.s.description.servers.get(Z.address);if(W)this.emit(p1.SERVER_DESCRIPTION_CHANGED,new P5.ServerDescriptionChangedEvent(this.s.id,Z.address,X,W))}if(Hf(this,Z),this[j4].length>0)Ff(this);if(!$)this.emit(p1.TOPOLOGY_DESCRIPTION_CHANGED,new P5.TopologyDescriptionChangedEvent(this.s.id,Y,this.s.description))}auth(Z,Y){if(typeof Z==="function")Y=Z,Z=void 0;if(typeof Y==="function")Y(void 0,!0)}get clientMetadata(){return this.s.options.metadata}isConnected(){return this.s.state===w1.STATE_CONNECTED}isDestroyed(){return this.s.state===w1.STATE_CLOSED}lastHello(){const Z=Array.from(this.description.servers.values());if(Z.length===0)return{};return Z.filter((J)=>J.type!==w1.ServerType.Unknown)[0]||{maxWireVersion:this.description.commonWireVersion}}get commonWireVersion(){return this.description.commonWireVersion}get logicalSessionTimeoutMinutes(){return this.description.logicalSessionTimeoutMinutes}get clusterTime(){return this.s.clusterTime}set clusterTime(Z){this.s.clusterTime=Z}}p1.SERVER_OPENING=a8.SERVER_OPENING;p1.SERVER_CLOSED=a8.SERVER_CLOSED;p1.SERVER_DESCRIPTION_CHANGED=a8.SERVER_DESCRIPTION_CHANGED;p1.TOPOLOGY_OPENING=a8.TOPOLOGY_OPENING;p1.TOPOLOGY_CLOSED=a8.TOPOLOGY_CLOSED;p1.TOPOLOGY_DESCRIPTION_CHANGED=a8.TOPOLOGY_DESCRIPTION_CHANGED;p1.ERROR=a8.ERROR;p1.OPEN=a8.OPEN;p1.CONNECT=a8.CONNECT;p1.CLOSE=a8.CLOSE;p1.TIMEOUT=a8.TIMEOUT;Lf.Topology=p1;class Oq{constructor(Z){this.minWireVersion=Z.minWireVersion||0,this.maxWireVersion=Z.maxWireVersion||0}get hasAggregationCursor(){return this.maxWireVersion>=1}get hasWriteCommands(){return this.maxWireVersion>=2}get hasTextSearch(){return this.minWireVersion>=0}get hasAuthCommands(){return this.maxWireVersion>=1}get hasListCollectionsCommand(){return this.maxWireVersion>=3}get hasListIndexesCommand(){return this.maxWireVersion>=3}get supportsSnapshotReads(){return this.maxWireVersion>=13}get commandsTakeWriteConcern(){return this.maxWireVersion>=5}get commandsTakeCollation(){return this.maxWireVersion>=5}}Lf.ServerCapabilities=Oq});var P9=w((Tf)=>{Object.defineProperty(Tf,"__esModule",{value:!0});Tf.MongoClient=Tf.ServerApiVersion=void 0;var Sq=import.meta.require("fs"),pG1=import.meta.require("util"),iG1=Z0(),nG1=$Y(),aG1=XG(),sG1=b7(),Mf=gV(),rG1=c0(),tG1=aW(),Bf=r(),oG1=OV(),eG1=U6(),ZK1=c8(),YK1=nZ(),Nf=x0(),XK1=UJ(),Af=Rf(),Df=OJ(),kq=$1();Tf.ServerApiVersion=Object.freeze({v1:"1"});var G8=Symbol("options");class Pf extends eG1.TypedEventEmitter{constructor(Z,Y){super();this[G8]=(0,Mf.parseOptions)(Z,this,Y),this.mongoLogger=new oG1.MongoLogger(this[G8].mongoLoggerOptions);const X=this;this.s={url:Z,bsonOptions:(0,iG1.resolveBSONOptions)(this[G8]),namespace:(0,kq.ns)("admin"),hasBeenClosed:!1,sessionPool:new Df.ServerSessionPool(this),activeSessions:new Set,get options(){return X[G8]},get readConcern(){return X[G8].readConcern},get writeConcern(){return X[G8].writeConcern},get readPreference(){return X[G8].readPreference},get isMongoClient(){return!0}}}get options(){return Object.freeze({...this[G8]})}get serverApi(){return this[G8].serverApi&&Object.freeze({...this[G8].serverApi})}get monitorCommands(){return this[G8].monitorCommands}set monitorCommands(Z){this[G8].monitorCommands=Z}get autoEncrypter(){return this[G8].autoEncrypter}get readConcern(){return this.s.readConcern}get writeConcern(){return this.s.writeConcern}get readPreference(){return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}async connect(){if(this.connectionLock)return this.connectionLock;try{this.connectionLock=this._connect(),await this.connectionLock}finally{this.connectionLock=void 0}return this}async _connect(){if(this.topology&&this.topology.isConnected())return this;const Z=this[G8];if(Z.tls){if(typeof Z.tlsCAFile==="string")Z.ca??=await Sq.promises.readFile(Z.tlsCAFile);if(typeof Z.tlsCRLFile==="string")Z.crl??=await Sq.promises.readFile(Z.tlsCRLFile);if(typeof Z.tlsCertificateKeyFile==="string"){if(!Z.key||!Z.cert){const X=await Sq.promises.readFile(Z.tlsCertificateKeyFile);Z.key??=X,Z.cert??=X}}}if(typeof Z.srvHost==="string"){const X=await(0,Mf.resolveSRVRecord)(Z);for(let[J,$]of X.entries())Z.hosts[J]=$}if(Z.credentials?.mechanism===sG1.AuthMechanism.MONGODB_OIDC){const X=Z.credentials?.mechanismProperties?.ALLOWED_HOSTS||aG1.DEFAULT_ALLOWED_HOSTS;if(!Z.credentials?.mechanismProperties?.PROVIDER_NAME){for(let $ of Z.hosts)if(!(0,kq.hostMatchesWildcards)($.toHostPort().host,X))throw new Bf.MongoInvalidArgumentError(`Host '${$}' is not valid for OIDC authentication with ALLOWED_HOSTS of '${X.join(",")}'`)}}this.topology=new Af.Topology(this,Z.hosts,Z),this.topology.once(Af.Topology.OPEN,()=>this.emit("open",this));for(let X of rG1.MONGO_CLIENT_EVENTS)this.topology.on(X,(...J)=>this.emit(X,...J));const Y=async()=>{try{await(0,pG1.promisify)((X)=>this.topology?.connect(Z,X))()}catch(X){throw this.topology?.close({force:!0}),X}};if(this.autoEncrypter)await this.autoEncrypter?.init(),await Y(),await Z.encrypter.connectInternalClient();else await Y();return this}async close(Z=!1){Object.defineProperty(this.s,"hasBeenClosed",{value:!0,enumerable:!0,configurable:!1,writable:!1});const Y=Array.from(this.s.activeSessions,(K)=>K.endSession());if(this.s.activeSessions.clear(),await Promise.all(Y),this.topology==null)return;const X=(0,XK1.readPreferenceServerSelector)(Nf.ReadPreference.primaryPreferred),J=this.topology.description,$=Array.from(J.servers.values());if(X(J,$).length!==0){const K=Array.from(this.s.sessionPool.sessions,({id:Q})=>Q);if(K.length!==0)await(0,ZK1.executeOperation)(this,new YK1.RunAdminCommandOperation({endSessions:K},{readPreference:Nf.ReadPreference.primaryPreferred,noResponse:!0})).catch(()=>null)}const G=this.topology;this.topology=void 0,await new Promise((K,Q)=>{G.close({force:Z},(z)=>{if(z)return Q(z);const{encrypter:H}=this[G8];if(H)return H.closeCallback(this,Z,(F)=>{if(F)return Q(F);K()});K()})})}db(Z,Y){if(Y=Y??{},!Z)Z=this.options.dbName;const X=Object.assign({},this[G8],Y);return new tG1.Db(this,Z,X)}static async connect(Z,Y){return new this(Z,Y).connect()}startSession(Z){const Y=new Df.ClientSession(this,this.s.sessionPool,{explicit:!0,...Z},this[G8]);return this.s.activeSessions.add(Y),Y.once("ended",()=>{this.s.activeSessions.delete(Y)}),Y}async withSession(Z,Y){const X={owner:Symbol(),...typeof Z==="object"?Z:{}},J=typeof Z==="function"?Z:Y;if(J==null)throw new Bf.MongoInvalidArgumentError("Missing required callback parameter");const $=this.startSession(X);try{return await J($)}finally{try{await $.endSession()}catch{}}}watch(Z=[],Y={}){if(!Array.isArray(Z))Y=Z,Z=[];return new nG1.ChangeStream(this,Z,(0,kq.resolveOptions)(this,Y))}}Tf.MongoClient=Pf});var $Y=w((jf)=>{Object.defineProperty(jf,"__esModule",{value:!0});jf.ChangeStream=void 0;var $K1=L9(),A7=c0(),WK1=OU(),GK1=aW(),N7=r(),KK1=P9(),QK1=U6(),_q=$1(),SY=Symbol("cursorStream"),kY=Symbol("closed"),B3=Symbol("mode"),zK1=["resumeAfter","startAfter","startAtOperationTime","fullDocument","fullDocumentBeforeChange","showExpandedEvents"],_9={COLLECTION:Symbol("Collection"),DATABASE:Symbol("Database"),CLUSTER:Symbol("Cluster")},HK1=[A7.RESUME_TOKEN_CHANGED,A7.END,A7.CLOSE],FK1="A change stream document has been received that lacks a resume token (_id).",oG="ChangeStream is closed";class s8 extends QK1.TypedEventEmitter{constructor(Z,Y=[],X={}){super();if(this.pipeline=Y,this.options={...X},delete this.options.writeConcern,Z instanceof $K1.Collection)this.type=_9.COLLECTION;else if(Z instanceof GK1.Db)this.type=_9.DATABASE;else if(Z instanceof KK1.MongoClient)this.type=_9.CLUSTER;else throw new N7.MongoChangeStreamError("Parent provided to ChangeStream constructor must be an instance of Collection, Db, or MongoClient");if(this.parent=Z,this.namespace=Z.s.namespace,!this.options.readPreference&&Z.readPreference)this.options.readPreference=Z.readPreference;this.cursor=this._createChangeStreamCursor(X),this[kY]=!1,this[B3]=!1,this.on("newListener",(J)=>{if(J==="change"&&this.cursor&&this.listenerCount("change")===0)this._streamEvents(this.cursor)}),this.on("removeListener",(J)=>{if(J==="change"&&this.listenerCount("change")===0&&this.cursor)this[SY]?.removeAllListeners("data")})}get cursorStream(){return this[SY]}get resumeToken(){return this.cursor?.resumeToken}async hasNext(){this._setIsIterator();while(!0)try{return await this.cursor.hasNext()}catch(Z){try{await this._processErrorIteratorMode(Z)}catch(Y){try{await this.close()}catch{}throw Y}}}async next(){this._setIsIterator();while(!0)try{const Z=await this.cursor.next();return this._processChange(Z??null)}catch(Z){try{await this._processErrorIteratorMode(Z)}catch(Y){try{await this.close()}catch{}throw Y}}}async tryNext(){this._setIsIterator();while(!0)try{return await this.cursor.tryNext()??null}catch(Z){try{await this._processErrorIteratorMode(Z)}catch(Y){try{await this.close()}catch{}throw Y}}}async*[Symbol.asyncIterator](){if(this.closed)return;try{while(!0)yield await this.next()}finally{try{await this.close()}catch{}}}get closed(){return this[kY]||this.cursor.closed}async close(){this[kY]=!0;const Z=this.cursor;try{await Z.close()}finally{this._endStream()}}stream(Z){if(this.closed)throw new N7.MongoChangeStreamError(oG);return this.streamOptions=Z,this.cursor.stream(Z)}_setIsEmitter(){if(this[B3]==="iterator")throw new N7.MongoAPIError("ChangeStream cannot be used as an EventEmitter after being used as an iterator");this[B3]="emitter"}_setIsIterator(){if(this[B3]==="emitter")throw new N7.MongoAPIError("ChangeStream cannot be used as an iterator after being used as an EventEmitter");this[B3]="iterator"}_createChangeStreamCursor(Z){const Y=(0,_q.filterOptions)(Z,zK1);if(this.type===_9.CLUSTER)Y.allChangesForCluster=!0;const X=[{$changeStream:Y},...this.pipeline],J=this.type===_9.CLUSTER?this.parent:this.type===_9.DATABASE?this.parent.client:this.type===_9.COLLECTION?this.parent.client:null;if(J==null)throw new N7.MongoRuntimeError(`Changestream type should only be one of cluster, database, collection. Found ${this.type.toString()}`);const $=new WK1.ChangeStreamCursor(J,this.namespace,X,Z);for(let W of HK1)$.on(W,(G)=>this.emit(W,G));if(this.listenerCount(s8.CHANGE)>0)this._streamEvents($);return $}_closeEmitterModeWithError(Z){this.emit(s8.ERROR,Z),this.close().catch(()=>null)}_streamEvents(Z){this._setIsEmitter();const Y=this[SY]??Z.stream();this[SY]=Y,Y.on("data",(X)=>{try{const J=this._processChange(X);this.emit(s8.CHANGE,J)}catch(J){this.emit(s8.ERROR,J)}}),Y.on("error",(X)=>this._processErrorStreamMode(X))}_endStream(){const Z=this[SY];if(Z)["data","close","end","error"].forEach((Y)=>Z.removeAllListeners(Y)),Z.destroy();this[SY]=void 0}_processChange(Z){if(this[kY])throw new N7.MongoAPIError(oG);if(Z==null)throw new N7.MongoRuntimeError(oG);if(Z&&!Z._id)throw new N7.MongoChangeStreamError(FK1);return this.cursor.cacheResumeToken(Z._id),this.options.startAtOperationTime=void 0,Z}_processErrorStreamMode(Z){if(this[kY])return;if((0,N7.isResumableError)(Z,this.cursor.maxWireVersion))this._endStream(),this.cursor.close().catch(()=>null),(0,_q.getTopology)(this.parent).selectServer(this.cursor.readPreference,{},(X)=>{if(X)return this._closeEmitterModeWithError(Z);this.cursor=this._createChangeStreamCursor(this.cursor.resumeOptions)});else this._closeEmitterModeWithError(Z)}async _processErrorIteratorMode(Z){if(this[kY])throw new N7.MongoAPIError(oG);if(!(0,N7.isResumableError)(Z,this.cursor.maxWireVersion)){try{await this.close()}catch{}throw Z}await this.cursor.close().catch(()=>null);const Y=(0,_q.getTopology)(this.parent);try{await Y.selectServerAsync(this.cursor.readPreference,{}),this.cursor=this._createChangeStreamCursor(this.cursor.resumeOptions)}catch{throw await this.close(),Z}}}s8.RESPONSE=A7.RESPONSE;s8.MORE=A7.MORE;s8.INIT=A7.INIT;s8.CLOSE=A7.CLOSE;s8.CHANGE=A7.CHANGE;s8.END=A7.END;s8.ERROR=A7.ERROR;s8.RESUME_TOKEN_CHANGED=A7.RESUME_TOKEN_CHANGED;jf.ChangeStream=s8});var xq=w((Of)=>{var Cf=function(Z){if(Z.s.init)throw new B6.MongoGridFSStreamError("Options cannot be changed after the stream is initialized")},VK1=function(Z){if(Z.destroyed)return;if(!Z.s.cursor)return;if(!Z.s.file)return;const Y=({error:X,doc:J})=>{if(Z.destroyed)return;if(X){Z.destroy(X);return}if(!J){Z.push(null),Z.s.cursor?.close().then(()=>null,(U)=>Z.destroy(U));return}if(!Z.s.file)return;const $=Z.s.file.length-Z.s.bytesRead,W=Z.s.expected++,G=Math.min(Z.s.file.chunkSize,$);if(J.n>W)return Z.destroy(new B6.MongoGridFSChunkError(`ChunkIsMissing: Got unexpected n: ${J.n}, expected: ${W}`));if(J.n<W)return Z.destroy(new B6.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${J.n}, expected: ${W}`));let K=Buffer.isBuffer(J.data)?J.data:J.data.buffer;if(K.byteLength!==G){if($<=0)return Z.destroy(new B6.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${J.n}, expected file length ${Z.s.file.length} bytes but already read ${Z.s.bytesRead} bytes`));return Z.destroy(new B6.MongoGridFSChunkError(`ChunkIsWrongSize: Got unexpected length: ${K.byteLength}, expected: ${G}`))}if(Z.s.bytesRead+=K.byteLength,K.byteLength===0)return Z.push(null);let Q=null,z=null;if(Z.s.bytesToSkip!=null)Q=Z.s.bytesToSkip,Z.s.bytesToSkip=0;const H=W===Z.s.expectedEnd-1,F=Z.s.options.end-Z.s.bytesToSkip;if(H&&Z.s.bytesToTrim!=null)z=Z.s.file.chunkSize-Z.s.bytesToTrim;else if(Z.s.options.end&&F<J.data.byteLength)z=F;if(Q!=null||z!=null)K=K.slice(Q||0,z||K.byteLength);Z.push(K);return};Z.s.cursor.next().then((X)=>Y({error:null,doc:X}),(X)=>Y({error:X,doc:null}))},qK1=function(Z){const Y={};if(Z.s.readPreference)Y.readPreference=Z.s.readPreference;if(Z.s.options&&Z.s.options.sort)Y.sort=Z.s.options.sort;if(Z.s.options&&Z.s.options.skip)Y.skip=Z.s.options.skip;const X=({error:J,doc:$})=>{if(J)return Z.destroy(J);if(!$){const K=`FileNotFound: file ${Z.s.filter._id?Z.s.filter._id.toString():Z.s.filter.filename} was not found`,Q=new B6.MongoRuntimeError(K);return Q.code="ENOENT",Z.destroy(Q)}if($.length<=0){Z.push(null);return}if(Z.destroyed){Z.destroy();return}try{Z.s.bytesToSkip=wK1(Z,$,Z.s.options)}catch(G){return Z.destroy(G)}const W={files_id:$._id};if(Z.s.options&&Z.s.options.start!=null){const G=Math.floor(Z.s.options.start/$.chunkSize);if(G>0)W.n={$gte:G}}if(Z.s.cursor=Z.s.chunks.find(W).sort({n:1}),Z.s.readPreference)Z.s.cursor.withReadPreference(Z.s.readPreference);Z.s.expectedEnd=Math.ceil($.length/$.chunkSize),Z.s.file=$;try{Z.s.bytesToTrim=RK1(Z,$,Z.s.cursor,Z.s.options)}catch(G){return Z.destroy(G)}Z.emit(eG.FILE,$);return};Z.s.files.findOne(Z.s.filter,Y).then((J)=>X({error:null,doc:J}),(J)=>X({error:J,doc:null}))},LK1=function(Z,Y){if(Z.s.file)return Y();if(!Z.s.init)qK1(Z),Z.s.init=!0;Z.once("file",()=>{Y()})},wK1=function(Z,Y,X){if(X&&X.start!=null){if(X.start>Y.length)throw new B6.MongoInvalidArgumentError(`Stream start (${X.start}) must not be more than the length of the file (${Y.length})`);if(X.start<0)throw new B6.MongoInvalidArgumentError(`Stream start (${X.start}) must not be negative`);if(X.end!=null&&X.end<X.start)throw new B6.MongoInvalidArgumentError(`Stream start (${X.start}) must not be greater than stream end (${X.end})`);return Z.s.bytesRead=Math.floor(X.start/Y.chunkSize)*Y.chunkSize,Z.s.expected=Math.floor(X.start/Y.chunkSize),X.start-Z.s.bytesRead}throw new B6.MongoInvalidArgumentError("Start option must be defined")},RK1=function(Z,Y,X,J){if(J&&J.end!=null){if(J.end>Y.length)throw new B6.MongoInvalidArgumentError(`Stream end (${J.end}) must not be more than the length of the file (${Y.length})`);if(J.start==null||J.start<0)throw new B6.MongoInvalidArgumentError(`Stream end (${J.end}) must not be negative`);const $=J.start!=null?Math.floor(J.start/Y.chunkSize):0;return X.limit(Math.ceil(J.end/Y.chunkSize)-$),Z.s.expectedEnd=Math.ceil(J.end/Y.chunkSize),Math.ceil(J.end/Y.chunkSize)*Y.chunkSize-J.end}throw new B6.MongoInvalidArgumentError("End option must be defined")};Object.defineProperty(Of,"__esModule",{value:!0});Of.GridFSBucketReadStream=void 0;var UK1=import.meta.require("stream"),B6=r();class eG extends UK1.Readable{constructor(Z,Y,X,J,$){super({emitClose:!0});this.s={bytesToTrim:0,bytesToSkip:0,bytesRead:0,chunks:Z,expected:0,files:Y,filter:J,init:!1,expectedEnd:0,options:{start:0,end:0,...$},readPreference:X}}_read(){if(this.destroyed)return;LK1(this,()=>VK1(this))}start(Z=0){return Cf(this),this.s.options.start=Z,this}end(Z=0){return Cf(this),this.s.options.end=Z,this}async abort(){this.push(null),this.destroy(),await this.s.cursor?.close()}}eG.FILE="file";Of.GridFSBucketReadStream=eG});var gq=w((ff)=>{var yq=function(Z,Y,X){if(Z.state.errored){process.nextTick(X);return}Z.state.errored=!0,process.nextTick(X,Y)},xf=function(Z,Y,X){return{_id:new kf.ObjectId,files_id:Z,n:Y,data:X}};async function NK1(Z){const Y={files_id:1,n:1};let X;try{X=await Z.chunks.listIndexes().toArray()}catch($){if($ instanceof x9.MongoError&&$.code===x9.MONGODB_ERROR_CODES.NamespaceNotFound)X=[];else throw $}if(!X.find(($)=>{if(Object.keys($.key).length===2&&$.key.files_id===1&&$.key.n===1)return!0;return!1}))await Z.chunks.createIndex(Y,{...Z.writeConcern,background:!0,unique:!0})}var fq=function(Z,Y){if(Z.done)return process.nextTick(Y);if(Z.state.streamEnd&&Z.state.outstandingRequests===0&&!Z.state.errored){Z.done=!0;const X=DK1(Z.id,Z.length,Z.chunkSizeBytes,Z.filename,Z.options.contentType,Z.options.aliases,Z.options.metadata);if(ZK(Z,Y))return;Z.files.insertOne(X,{writeConcern:Z.writeConcern}).then(()=>{Z.gridFSFile=X,Y()},(J)=>yq(Z,J,Y));return}process.nextTick(Y)};async function AK1(Z){if(await Z.files.findOne({},{projection:{_id:1}})!=null)return;const X={filename:1,uploadDate:1};let J;try{J=await Z.files.listIndexes().toArray()}catch(W){if(W instanceof x9.MongoError&&W.code===x9.MONGODB_ERROR_CODES.NamespaceNotFound)J=[];else throw W}if(!J.find((W)=>{if(Object.keys(W.key).length===2&&W.key.filename===1&&W.key.uploadDate===1)return!0;return!1}))await Z.files.createIndex(X,{background:!1});await NK1(Z)}var DK1=function(Z,Y,X,J,$,W,G){const K={_id:Z,length:Y,chunkSize:X,uploadDate:new Date,filename:J};if($)K.contentType=$;if(W)K.aliases=W;if(G)K.metadata=G;return K},PK1=function(Z,Y,X,J){if(ZK(Z,J))return;const $=Buffer.isBuffer(Y)?Y:Buffer.from(Y,X);if(Z.length+=$.length,Z.pos+$.length<Z.chunkSizeBytes){$.copy(Z.bufToStore,Z.pos),Z.pos+=$.length,process.nextTick(J);return}let W=$.length,G=Z.chunkSizeBytes-Z.pos,K=Math.min(G,$.length),Q=0;while(W>0){const z=$.length-W;$.copy(Z.bufToStore,Z.pos,z,z+K),Z.pos+=K,G-=K;let H;if(G===0){if(H=xf(Z.id,Z.n,Buffer.from(Z.bufToStore)),++Z.state.outstandingRequests,++Q,ZK(Z,J))return;Z.chunks.insertOne(H,{writeConcern:Z.writeConcern}).then(()=>{if(--Z.state.outstandingRequests,--Q,!Q)fq(Z,J)},(F)=>yq(Z,F,J)),G=Z.chunkSizeBytes,Z.pos=0,++Z.n}W-=K,K=Math.min(G,W)}},TK1=function(Z,Y){if(Z.pos===0)return fq(Z,Y);++Z.state.outstandingRequests;const X=Buffer.alloc(Z.pos);Z.bufToStore.copy(X,0,0,Z.pos);const J=xf(Z.id,Z.n,X);if(ZK(Z,Y))return;Z.chunks.insertOne(J,{writeConcern:Z.writeConcern}).then(()=>{--Z.state.outstandingRequests,fq(Z,Y)},($)=>yq(Z,$,Y))},ZK=function(Z,Y){if(Z.state.aborted)return process.nextTick(Y,new x9.MongoAPIError("Stream has been aborted")),!0;return!1};Object.defineProperty(ff,"__esModule",{value:!0});ff.GridFSBucketWriteStream=void 0;var MK1=import.meta.require("stream"),kf=Z0(),x9=r(),BK1=d8();class _f extends MK1.Writable{constructor(Z,Y,X){super();if(this.gridFSFile=null,X=X??{},this.bucket=Z,this.chunks=Z.s._chunksCollection,this.filename=Y,this.files=Z.s._filesCollection,this.options=X,this.writeConcern=BK1.WriteConcern.fromOptions(X)||Z.s.options.writeConcern,this.done=!1,this.id=X.id?X.id:new kf.ObjectId,this.chunkSizeBytes=X.chunkSizeBytes||this.bucket.s.options.chunkSizeBytes,this.bufToStore=Buffer.alloc(this.chunkSizeBytes),this.length=0,this.n=0,this.pos=0,this.state={streamEnd:!1,outstandingRequests:0,errored:!1,aborted:!1},!this.bucket.s.calledOpenUploadStream)this.bucket.s.calledOpenUploadStream=!0,AK1(this).then(()=>{this.bucket.s.checkedIndexes=!0,this.bucket.emit("index")},()=>null)}_construct(Z){if(this.bucket.s.checkedIndexes)return process.nextTick(Z);this.bucket.once("index",Z)}_write(Z,Y,X){PK1(this,Z,Y,X)}_final(Z){if(this.state.streamEnd)return process.nextTick(Z);this.state.streamEnd=!0,TK1(this,Z)}async abort(){if(this.state.streamEnd)throw new x9.MongoAPIError("Cannot abort a stream that has already completed");if(this.state.aborted)throw new x9.MongoAPIError("Cannot call abort() on a stream twice");this.state.aborted=!0,await this.chunks.deleteMany({files_id:this.id})}}ff.GridFSBucketWriteStream=_f});var uf=w((hf)=>{Object.defineProperty(hf,"__esModule",{value:!0});hf.GridFSBucket=void 0;var gf=r(),IK1=U6(),jK1=d8(),bf=xq(),vf=gq(),EK1={bucketName:"fs",chunkSizeBytes:261120};class bq extends IK1.TypedEventEmitter{constructor(Z,Y){super();this.setMaxListeners(0);const X={...EK1,...Y,writeConcern:jK1.WriteConcern.fromOptions(Y)};this.s={db:Z,options:X,_chunksCollection:Z.collection(X.bucketName+".chunks"),_filesCollection:Z.collection(X.bucketName+".files"),checkedIndexes:!1,calledOpenUploadStream:!1}}openUploadStream(Z,Y){return new vf.GridFSBucketWriteStream(this,Z,Y)}openUploadStreamWithId(Z,Y,X){return new vf.GridFSBucketWriteStream(this,Y,{...X,id:Z})}openDownloadStream(Z,Y){return new bf.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{_id:Z},Y)}async delete(Z){const{deletedCount:Y}=await this.s._filesCollection.deleteOne({_id:Z});if(await this.s._chunksCollection.deleteMany({files_id:Z}),Y===0)throw new gf.MongoRuntimeError(`File not found for id ${Z}`)}find(Z={},Y={}){return this.s._filesCollection.find(Z,Y)}openDownloadStreamByName(Z,Y){let X={uploadDate:-1},J=void 0;if(Y&&Y.revision!=null)if(Y.revision>=0)X={uploadDate:1},J=Y.revision;else J=-Y.revision-1;return new bf.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{filename:Z},{...Y,sort:X,skip:J})}async rename(Z,Y){const X={_id:Z},J={$set:{filename:Y}},{matchedCount:$}=await this.s._filesCollection.updateOne(X,J);if($===0)throw new gf.MongoRuntimeError(`File with id ${Z} not found`)}async drop(){await this.s._filesCollection.drop(),await this.s._chunksCollection.drop()}}bq.INDEX="index";hf.GridFSBucket=bq});var lf=w((df)=>{Object.defineProperty(df,"__esModule",{value:!0});df.ClientEncryption=void 0;var i7=Z0(),CK1=F7(),T5=$1(),OK1=MV(),f9=A9(),SK1=AV(),YK=DV();class XK{static getMongoCrypt(){const Z=(0,CK1.getMongoDBClientEncryption)();if("kModuleError"in Z)throw Z.kModuleError;return Z.MongoCrypt}constructor(Z,Y){if(this._client=Z,this._proxyOptions=Y.proxyOptions??{},this._tlsOptions=Y.tlsOptions??{},this._kmsProviders=Y.kmsProviders||{},Y.keyVaultNamespace==null)throw new f9.MongoCryptInvalidArgumentError("Missing required option `keyVaultNamespace`");const X={...Y,cryptoCallbacks:OK1,kmsProviders:!Buffer.isBuffer(this._kmsProviders)?(0,i7.serialize)(this._kmsProviders):this._kmsProviders};this._keyVaultNamespace=Y.keyVaultNamespace,this._keyVaultClient=Y.keyVaultClient||Z;const J=XK.getMongoCrypt();this._mongoCrypt=new J(X)}async createDataKey(Z,Y={}){if(Y.keyAltNames&&!Array.isArray(Y.keyAltNames))throw new f9.MongoCryptInvalidArgumentError(`Option "keyAltNames" must be an array of strings, but was of type ${typeof Y.keyAltNames}.`);let X=void 0;if(Y.keyAltNames&&Y.keyAltNames.length>0)X=Y.keyAltNames.map((F,U)=>{if(typeof F!=="string")throw new f9.MongoCryptInvalidArgumentError(`Option "keyAltNames" must be an array of strings, but item at index ${U} was of type ${typeof F}`);return(0,i7.serialize)({keyAltName:F})});let J=void 0;if(Y.keyMaterial)J=(0,i7.serialize)({keyMaterial:Y.keyMaterial});const $=(0,i7.serialize)({provider:Z,...Y.masterKey}),W=this._mongoCrypt.makeDataKeyContext($,{keyAltNames:X,keyMaterial:J}),K=await new YK.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions}).execute(this,W),{db:Q,collection:z}=T5.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),{insertedId:H}=await this._keyVaultClient.db(Q).collection(z).insertOne(K,{writeConcern:{w:"majority"}});return H}async rewrapManyDataKey(Z,Y){let X=void 0;if(Y){const F=Object.assign({provider:Y.provider},Y.masterKey);X=(0,i7.serialize)(F)}const J=(0,i7.serialize)(Z),$=this._mongoCrypt.makeRewrapManyDataKeyContext(J,X),W=new YK.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions}),{v:G}=await W.execute(this,$);if(G.length===0)return{};const{db:K,collection:Q}=T5.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),z=G.map((F)=>({updateOne:{filter:{_id:F._id},update:{$set:{masterKey:F.masterKey,keyMaterial:F.keyMaterial},$currentDate:{updateDate:!0}}}}));return{bulkWriteResult:await this._keyVaultClient.db(K).collection(Q).bulkWrite(z,{writeConcern:{w:"majority"}})}}async deleteKey(Z){const{db:Y,collection:X}=T5.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return this._keyVaultClient.db(Y).collection(X).deleteOne({_id:Z},{writeConcern:{w:"majority"}})}getKeys(){const{db:Z,collection:Y}=T5.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return this._keyVaultClient.db(Z).collection(Y).find({},{readConcern:{level:"majority"}})}async getKey(Z){const{db:Y,collection:X}=T5.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return this._keyVaultClient.db(Y).collection(X).findOne({_id:Z},{readConcern:{level:"majority"}})}async getKeyByAltName(Z){const{db:Y,collection:X}=T5.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return this._keyVaultClient.db(Y).collection(X).findOne({keyAltNames:Z},{readConcern:{level:"majority"}})}async addKeyAltName(Z,Y){const{db:X,collection:J}=T5.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(X).collection(J).findOneAndUpdate({_id:Z},{$addToSet:{keyAltNames:Y}},{writeConcern:{w:"majority"},returnDocument:"before"})}async removeKeyAltName(Z,Y){const{db:X,collection:J}=T5.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),$=[{$set:{keyAltNames:{$cond:[{$eq:["$keyAltNames",[Y]]},"$$REMOVE",{$filter:{input:"$keyAltNames",cond:{$ne:["$$this",Y]}}}]}}}];return await this._keyVaultClient.db(X).collection(J).findOneAndUpdate({_id:Z},$,{writeConcern:{w:"majority"},returnDocument:"before"})}async createEncryptedCollection(Z,Y,X){const{provider:J,masterKey:$,createCollectionOptions:{encryptedFields:{...W},...G}}=X;if(Array.isArray(W.fields)){const K=W.fields.map(async(H)=>H==null||typeof H!=="object"||H.keyId!=null?H:{...H,keyId:await this.createDataKey(J,{masterKey:$})}),Q=await Promise.allSettled(K);W.fields=Q.map((H,F)=>H.status==="fulfilled"?H.value:W.fields[F]);const z=Q.find((H)=>H.status==="rejected");if(z!=null)throw new f9.MongoCryptCreateDataKeyError(W,{cause:z.reason})}try{return{collection:await Z.createCollection(Y,{...G,encryptedFields:W}),encryptedFields:W}}catch(K){throw new f9.MongoCryptCreateEncryptedCollectionError(W,{cause:K})}}async encrypt(Z,Y){return this._encrypt(Z,!1,Y)}async encryptExpression(Z,Y){return this._encrypt(Z,!0,Y)}async decrypt(Z){const Y=(0,i7.serialize)({v:Z}),X=this._mongoCrypt.makeExplicitDecryptionContext(Y),J=new YK.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions}),{v:$}=await J.execute(this,X);return $}async askForKMSCredentials(){return(0,SK1.refreshKMSCredentials)(this._kmsProviders)}static get libmongocryptVersion(){return XK.getMongoCrypt().libmongocryptVersion}async _encrypt(Z,Y,X){const{algorithm:J,keyId:$,keyAltName:W,contentionFactor:G,queryType:K,rangeOptions:Q}=X,z={expressionMode:Y,algorithm:J};if($)z.keyId=$.buffer;if(W){if($)throw new f9.MongoCryptInvalidArgumentError('"options" cannot contain both "keyId" and "keyAltName"');if(typeof W!=="string")throw new f9.MongoCryptInvalidArgumentError(`"options.keyAltName" must be of type string, but was of type ${typeof W}`);z.keyAltName=(0,i7.serialize)({keyAltName:W})}if(typeof G==="number"||typeof G==="bigint")z.contentionFactor=G;if(typeof K==="string")z.queryType=K;if(typeof Q==="object")z.rangeOptions=(0,i7.serialize)(Q);const H=(0,i7.serialize)({v:Z}),F=new YK.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions}),U=this._mongoCrypt.makeExplicitEncryptionContext(H,z);return(await F.execute(this,U)).v}}df.ClientEncryption=XK});var JK=w((x)=>{Object.defineProperty(x,"__esModule",{value:!0});x.MongoUnexpectedServerResponseError=x.MongoTransactionError=x.MongoTopologyClosedError=x.MongoTailableCursorError=x.MongoSystemError=x.MongoServerSelectionError=x.MongoServerError=x.MongoServerClosedError=x.MongoRuntimeError=x.MongoParseError=x.MongoNotConnectedError=x.MongoNetworkTimeoutError=x.MongoNetworkError=x.MongoMissingDependencyError=x.MongoMissingCredentialsError=x.MongoKerberosError=x.MongoInvalidArgumentError=x.MongoGridFSStreamError=x.MongoGridFSChunkError=x.MongoExpiredSessionError=x.MongoError=x.MongoDriverError=x.MongoDecompressionError=x.MongoCursorInUseError=x.MongoCursorExhaustedError=x.MongoCompatibilityError=x.MongoChangeStreamError=x.MongoBatchReExecutionError=x.MongoAzureError=x.MongoAWSError=x.MongoAPIError=x.ChangeStreamCursor=x.ClientEncryption=x.MongoBulkWriteError=x.UUID=x.Timestamp=x.ObjectId=x.MinKey=x.MaxKey=x.Long=x.Int32=x.Double=x.Decimal128=x.DBRef=x.Code=x.BSONType=x.BSONSymbol=x.BSONRegExp=x.Binary=x.BSON=void 0;x.ConnectionPoolReadyEvent=x.ConnectionPoolMonitoringEvent=x.ConnectionPoolCreatedEvent=x.ConnectionPoolClosedEvent=x.ConnectionPoolClearedEvent=x.ConnectionCreatedEvent=x.ConnectionClosedEvent=x.ConnectionCheckOutStartedEvent=x.ConnectionCheckOutFailedEvent=x.ConnectionCheckedOutEvent=x.ConnectionCheckedInEvent=x.CommandSucceededEvent=x.CommandStartedEvent=x.CommandFailedEvent=x.WriteConcern=x.ReadPreference=x.ReadConcern=x.TopologyType=x.ServerType=x.ReadPreferenceMode=x.ReadConcernLevel=x.ProfilingLevel=x.ReturnDocument=x.ServerApiVersion=x.ExplainVerbosity=x.MongoErrorLabel=x.CURSOR_FLAGS=x.Compressor=x.AuthMechanism=x.GSSAPICanonicalizationValue=x.AutoEncryptionLoggerLevel=x.BatchType=x.UnorderedBulkOperation=x.OrderedBulkOperation=x.MongoClient=x.ListIndexesCursor=x.ListCollectionsCursor=x.GridFSBucketWriteStream=x.GridFSBucketReadStream=x.GridFSBucket=x.FindCursor=x.Db=x.Collection=x.ClientSession=x.ChangeStream=x.CancellationToken=x.AggregationCursor=x.Admin=x.AbstractCursor=x.MongoWriteConcernError=void 0;x.MongoCryptKMSRequestNetworkTimeoutError=x.MongoCryptInvalidArgumentError=x.MongoCryptError=x.MongoCryptCreateEncryptedCollectionError=x.MongoCryptCreateDataKeyError=x.MongoCryptAzureKMSRequestError=x.SrvPollingEvent=x.TopologyOpeningEvent=x.TopologyDescriptionChangedEvent=x.TopologyClosedEvent=x.ServerOpeningEvent=x.ServerHeartbeatSucceededEvent=x.ServerHeartbeatStartedEvent=x.ServerHeartbeatFailedEvent=x.ServerDescriptionChangedEvent=x.ServerClosedEvent=x.ConnectionReadyEvent=void 0;var kK1=zF();Object.defineProperty(x,"Admin",{enumerable:!0,get:function(){return kK1.Admin}});var _K1=SF();Object.defineProperty(x,"OrderedBulkOperation",{enumerable:!0,get:function(){return _K1.OrderedBulkOperation}});var xK1=kF();Object.defineProperty(x,"UnorderedBulkOperation",{enumerable:!0,get:function(){return xK1.UnorderedBulkOperation}});var fK1=$Y();Object.defineProperty(x,"ChangeStream",{enumerable:!0,get:function(){return fK1.ChangeStream}});var yK1=L9();Object.defineProperty(x,"Collection",{enumerable:!0,get:function(){return yK1.Collection}});var gK1=R4();Object.defineProperty(x,"AbstractCursor",{enumerable:!0,get:function(){return gK1.AbstractCursor}});var bK1=xJ();Object.defineProperty(x,"AggregationCursor",{enumerable:!0,get:function(){return bK1.AggregationCursor}});var vK1=GU();Object.defineProperty(x,"FindCursor",{enumerable:!0,get:function(){return vK1.FindCursor}});var hK1=_U();Object.defineProperty(x,"ListCollectionsCursor",{enumerable:!0,get:function(){return hK1.ListCollectionsCursor}});var mK1=LU();Object.defineProperty(x,"ListIndexesCursor",{enumerable:!0,get:function(){return mK1.ListIndexesCursor}});var uK1=aW();Object.defineProperty(x,"Db",{enumerable:!0,get:function(){return uK1.Db}});var dK1=uf();Object.defineProperty(x,"GridFSBucket",{enumerable:!0,get:function(){return dK1.GridFSBucket}});var cK1=xq();Object.defineProperty(x,"GridFSBucketReadStream",{enumerable:!0,get:function(){return cK1.GridFSBucketReadStream}});var lK1=gq();Object.defineProperty(x,"GridFSBucketWriteStream",{enumerable:!0,get:function(){return lK1.GridFSBucketWriteStream}});var pK1=P9();Object.defineProperty(x,"MongoClient",{enumerable:!0,get:function(){return pK1.MongoClient}});var iK1=U6();Object.defineProperty(x,"CancellationToken",{enumerable:!0,get:function(){return iK1.CancellationToken}});var nK1=OJ();Object.defineProperty(x,"ClientSession",{enumerable:!0,get:function(){return nK1.ClientSession}});var aK1=Z0();Object.defineProperty(x,"BSON",{enumerable:!0,get:function(){return aK1.BSON}});var C8=Z0();Object.defineProperty(x,"Binary",{enumerable:!0,get:function(){return C8.Binary}});Object.defineProperty(x,"BSONRegExp",{enumerable:!0,get:function(){return C8.BSONRegExp}});Object.defineProperty(x,"BSONSymbol",{enumerable:!0,get:function(){return C8.BSONSymbol}});Object.defineProperty(x,"BSONType",{enumerable:!0,get:function(){return C8.BSONType}});Object.defineProperty(x,"Code",{enumerable:!0,get:function(){return C8.Code}});Object.defineProperty(x,"DBRef",{enumerable:!0,get:function(){return C8.DBRef}});Object.defineProperty(x,"Decimal128",{enumerable:!0,get:function(){return C8.Decimal128}});Object.defineProperty(x,"Double",{enumerable:!0,get:function(){return C8.Double}});Object.defineProperty(x,"Int32",{enumerable:!0,get:function(){return C8.Int32}});Object.defineProperty(x,"Long",{enumerable:!0,get:function(){return C8.Long}});Object.defineProperty(x,"MaxKey",{enumerable:!0,get:function(){return C8.MaxKey}});Object.defineProperty(x,"MinKey",{enumerable:!0,get:function(){return C8.MinKey}});Object.defineProperty(x,"ObjectId",{enumerable:!0,get:function(){return C8.ObjectId}});Object.defineProperty(x,"Timestamp",{enumerable:!0,get:function(){return C8.Timestamp}});Object.defineProperty(x,"UUID",{enumerable:!0,get:function(){return C8.UUID}});var sK1=TJ();Object.defineProperty(x,"MongoBulkWriteError",{enumerable:!0,get:function(){return sK1.MongoBulkWriteError}});var rK1=lf();Object.defineProperty(x,"ClientEncryption",{enumerable:!0,get:function(){return rK1.ClientEncryption}});var tK1=OU();Object.defineProperty(x,"ChangeStreamCursor",{enumerable:!0,get:function(){return tK1.ChangeStreamCursor}});var g1=r();Object.defineProperty(x,"MongoAPIError",{enumerable:!0,get:function(){return g1.MongoAPIError}});Object.defineProperty(x,"MongoAWSError",{enumerable:!0,get:function(){return g1.MongoAWSError}});Object.defineProperty(x,"MongoAzureError",{enumerable:!0,get:function(){return g1.MongoAzureError}});Object.defineProperty(x,"MongoBatchReExecutionError",{enumerable:!0,get:function(){return g1.MongoBatchReExecutionError}});Object.defineProperty(x,"MongoChangeStreamError",{enumerable:!0,get:function(){return g1.MongoChangeStreamError}});Object.defineProperty(x,"MongoCompatibilityError",{enumerable:!0,get:function(){return g1.MongoCompatibilityError}});Object.defineProperty(x,"MongoCursorExhaustedError",{enumerable:!0,get:function(){return g1.MongoCursorExhaustedError}});Object.defineProperty(x,"MongoCursorInUseError",{enumerable:!0,get:function(){return g1.MongoCursorInUseError}});Object.defineProperty(x,"MongoDecompressionError",{enumerable:!0,get:function(){return g1.MongoDecompressionError}});Object.defineProperty(x,"MongoDriverError",{enumerable:!0,get:function(){return g1.MongoDriverError}});Object.defineProperty(x,"MongoError",{enumerable:!0,get:function(){return g1.MongoError}});Object.defineProperty(x,"MongoExpiredSessionError",{enumerable:!0,get:function(){return g1.MongoExpiredSessionError}});Object.defineProperty(x,"MongoGridFSChunkError",{enumerable:!0,get:function(){return g1.MongoGridFSChunkError}});Object.defineProperty(x,"MongoGridFSStreamError",{enumerable:!0,get:function(){return g1.MongoGridFSStreamError}});Object.defineProperty(x,"MongoInvalidArgumentError",{enumerable:!0,get:function(){return g1.MongoInvalidArgumentError}});Object.defineProperty(x,"MongoKerberosError",{enumerable:!0,get:function(){return g1.MongoKerberosError}});Object.defineProperty(x,"MongoMissingCredentialsError",{enumerable:!0,get:function(){return g1.MongoMissingCredentialsError}});Object.defineProperty(x,"MongoMissingDependencyError",{enumerable:!0,get:function(){return g1.MongoMissingDependencyError}});Object.defineProperty(x,"MongoNetworkError",{enumerable:!0,get:function(){return g1.MongoNetworkError}});Object.defineProperty(x,"MongoNetworkTimeoutError",{enumerable:!0,get:function(){return g1.MongoNetworkTimeoutError}});Object.defineProperty(x,"MongoNotConnectedError",{enumerable:!0,get:function(){return g1.MongoNotConnectedError}});Object.defineProperty(x,"MongoParseError",{enumerable:!0,get:function(){return g1.MongoParseError}});Object.defineProperty(x,"MongoRuntimeError",{enumerable:!0,get:function(){return g1.MongoRuntimeError}});Object.defineProperty(x,"MongoServerClosedError",{enumerable:!0,get:function(){return g1.MongoServerClosedError}});Object.defineProperty(x,"MongoServerError",{enumerable:!0,get:function(){return g1.MongoServerError}});Object.defineProperty(x,"MongoServerSelectionError",{enumerable:!0,get:function(){return g1.MongoServerSelectionError}});Object.defineProperty(x,"MongoSystemError",{enumerable:!0,get:function(){return g1.MongoSystemError}});Object.defineProperty(x,"MongoTailableCursorError",{enumerable:!0,get:function(){return g1.MongoTailableCursorError}});Object.defineProperty(x,"MongoTopologyClosedError",{enumerable:!0,get:function(){return g1.MongoTopologyClosedError}});Object.defineProperty(x,"MongoTransactionError",{enumerable:!0,get:function(){return g1.MongoTransactionError}});Object.defineProperty(x,"MongoUnexpectedServerResponseError",{enumerable:!0,get:function(){return g1.MongoUnexpectedServerResponseError}});Object.defineProperty(x,"MongoWriteConcernError",{enumerable:!0,get:function(){return g1.MongoWriteConcernError}});var oK1=TJ();Object.defineProperty(x,"BatchType",{enumerable:!0,get:function(){return oK1.BatchType}});var eK1=TV();Object.defineProperty(x,"AutoEncryptionLoggerLevel",{enumerable:!0,get:function(){return eK1.AutoEncryptionLoggerLevel}});var ZQ1=ZG();Object.defineProperty(x,"GSSAPICanonicalizationValue",{enumerable:!0,get:function(){return ZQ1.GSSAPICanonicalizationValue}});var YQ1=b7();Object.defineProperty(x,"AuthMechanism",{enumerable:!0,get:function(){return YQ1.AuthMechanism}});var XQ1=RG();Object.defineProperty(x,"Compressor",{enumerable:!0,get:function(){return XQ1.Compressor}});var JQ1=R4();Object.defineProperty(x,"CURSOR_FLAGS",{enumerable:!0,get:function(){return JQ1.CURSOR_FLAGS}});var $Q1=r();Object.defineProperty(x,"MongoErrorLabel",{enumerable:!0,get:function(){return $Q1.MongoErrorLabel}});var WQ1=JF();Object.defineProperty(x,"ExplainVerbosity",{enumerable:!0,get:function(){return WQ1.ExplainVerbosity}});var GQ1=P9();Object.defineProperty(x,"ServerApiVersion",{enumerable:!0,get:function(){return GQ1.ServerApiVersion}});var KQ1=NU();Object.defineProperty(x,"ReturnDocument",{enumerable:!0,get:function(){return KQ1.ReturnDocument}});var QQ1=xU();Object.defineProperty(x,"ProfilingLevel",{enumerable:!0,get:function(){return QQ1.ProfilingLevel}});var zQ1=_6();Object.defineProperty(x,"ReadConcernLevel",{enumerable:!0,get:function(){return zQ1.ReadConcernLevel}});var HQ1=x0();Object.defineProperty(x,"ReadPreferenceMode",{enumerable:!0,get:function(){return HQ1.ReadPreferenceMode}});var pf=k6();Object.defineProperty(x,"ServerType",{enumerable:!0,get:function(){return pf.ServerType}});Object.defineProperty(x,"TopologyType",{enumerable:!0,get:function(){return pf.TopologyType}});var FQ1=_6();Object.defineProperty(x,"ReadConcern",{enumerable:!0,get:function(){return FQ1.ReadConcern}});var UQ1=x0();Object.defineProperty(x,"ReadPreference",{enumerable:!0,get:function(){return UQ1.ReadPreference}});var VQ1=d8();Object.defineProperty(x,"WriteConcern",{enumerable:!0,get:function(){return VQ1.WriteConcern}});var vq=cV();Object.defineProperty(x,"CommandFailedEvent",{enumerable:!0,get:function(){return vq.CommandFailedEvent}});Object.defineProperty(x,"CommandStartedEvent",{enumerable:!0,get:function(){return vq.CommandStartedEvent}});Object.defineProperty(x,"CommandSucceededEvent",{enumerable:!0,get:function(){return vq.CommandSucceededEvent}});var p6=Vq();Object.defineProperty(x,"ConnectionCheckedInEvent",{enumerable:!0,get:function(){return p6.ConnectionCheckedInEvent}});Object.defineProperty(x,"ConnectionCheckedOutEvent",{enumerable:!0,get:function(){return p6.ConnectionCheckedOutEvent}});Object.defineProperty(x,"ConnectionCheckOutFailedEvent",{enumerable:!0,get:function(){return p6.ConnectionCheckOutFailedEvent}});Object.defineProperty(x,"ConnectionCheckOutStartedEvent",{enumerable:!0,get:function(){return p6.ConnectionCheckOutStartedEvent}});Object.defineProperty(x,"ConnectionClosedEvent",{enumerable:!0,get:function(){return p6.ConnectionClosedEvent}});Object.defineProperty(x,"ConnectionCreatedEvent",{enumerable:!0,get:function(){return p6.ConnectionCreatedEvent}});Object.defineProperty(x,"ConnectionPoolClearedEvent",{enumerable:!0,get:function(){return p6.ConnectionPoolClearedEvent}});Object.defineProperty(x,"ConnectionPoolClosedEvent",{enumerable:!0,get:function(){return p6.ConnectionPoolClosedEvent}});Object.defineProperty(x,"ConnectionPoolCreatedEvent",{enumerable:!0,get:function(){return p6.ConnectionPoolCreatedEvent}});Object.defineProperty(x,"ConnectionPoolMonitoringEvent",{enumerable:!0,get:function(){return p6.ConnectionPoolMonitoringEvent}});Object.defineProperty(x,"ConnectionPoolReadyEvent",{enumerable:!0,get:function(){return p6.ConnectionPoolReadyEvent}});Object.defineProperty(x,"ConnectionReadyEvent",{enumerable:!0,get:function(){return p6.ConnectionReadyEvent}});var C4=jG();Object.defineProperty(x,"ServerClosedEvent",{enumerable:!0,get:function(){return C4.ServerClosedEvent}});Object.defineProperty(x,"ServerDescriptionChangedEvent",{enumerable:!0,get:function(){return C4.ServerDescriptionChangedEvent}});Object.defineProperty(x,"ServerHeartbeatFailedEvent",{enumerable:!0,get:function(){return C4.ServerHeartbeatFailedEvent}});Object.defineProperty(x,"ServerHeartbeatStartedEvent",{enumerable:!0,get:function(){return C4.ServerHeartbeatStartedEvent}});Object.defineProperty(x,"ServerHeartbeatSucceededEvent",{enumerable:!0,get:function(){return C4.ServerHeartbeatSucceededEvent}});Object.defineProperty(x,"ServerOpeningEvent",{enumerable:!0,get:function(){return C4.ServerOpeningEvent}});Object.defineProperty(x,"TopologyClosedEvent",{enumerable:!0,get:function(){return C4.TopologyClosedEvent}});Object.defineProperty(x,"TopologyDescriptionChangedEvent",{enumerable:!0,get:function(){return C4.TopologyDescriptionChangedEvent}});Object.defineProperty(x,"TopologyOpeningEvent",{enumerable:!0,get:function(){return C4.TopologyOpeningEvent}});var qQ1=Iq();Object.defineProperty(x,"SrvPollingEvent",{enumerable:!0,get:function(){return qQ1.SrvPollingEvent}});var _Y=A9();Object.defineProperty(x,"MongoCryptAzureKMSRequestError",{enumerable:!0,get:function(){return _Y.MongoCryptAzureKMSRequestError}});Object.defineProperty(x,"MongoCryptCreateDataKeyError",{enumerable:!0,get:function(){return _Y.MongoCryptCreateDataKeyError}});Object.defineProperty(x,"MongoCryptCreateEncryptedCollectionError",{enumerable:!0,get:function(){return _Y.MongoCryptCreateEncryptedCollectionError}});Object.defineProperty(x,"MongoCryptError",{enumerable:!0,get:function(){return _Y.MongoCryptError}});Object.defineProperty(x,"MongoCryptInvalidArgumentError",{enumerable:!0,get:function(){return _Y.MongoCryptInvalidArgumentError}});Object.defineProperty(x,"MongoCryptKMSRequestNetworkTimeoutError",{enumerable:!0,get:function(){return _Y.MongoCryptKMSRequestNetworkTimeoutError}})});var r8=w((qS1,nf)=>{nf.exports=function Z(Y){if(Y==null)return;if(typeof Y.constructor!=="function")return;return Y.constructor.name}});var n7=w((MQ1)=>{/*!
 * ignore
 */MQ1.internalToObjectOptions={transform:!1,virtuals:!1,getters:!1,_skipDepopulateTopLevel:!0,depopulate:!0,flattenDecimals:!1,useProjection:!1}});var rf=w((wS1,sf)=>{var D7=function(Z,Y,X){this.collection=null,this.Promise=X.Promise||Promise,this.modelName=X.modelName,delete X.modelName,this._closed=!1,$K.apply(this,arguments)},PQ1=function(Z){D7.prototype[Z]=function(){const Y=this._getCollection(),X=Array.from(arguments),J=this,$=J&&J.conn&&J.conn.base&&J.conn.base.options&&J.conn.base.options.debug,W=J&&J.conn&&J.conn.options&&J.conn.options.debug,G=W==null?$:W,K=arguments[arguments.length-1],Q=new NQ1;if(this.conn.$wasForceClosed){const F=new hq("Connection was force closed");if(X.length>0&&typeof X[X.length-1]==="function"){X[X.length-1](F);return}else throw F}let z=X,H=null;if(this._shouldBufferCommands()&&this.buffer){this.conn.emit("buffer",{_id:Q,modelName:J.modelName,collectionName:J.name,method:Z,args:X});let F,U=X,V=null,q=null;if(N3[Z]&&typeof K==="function")this.addQueue(()=>{K.call(this,null,this[Z].apply(this,U.slice(0,U.length-1)))},[]);else if(N3[Z])V=new Promise((R,B)=>{F=function N(M,D){if(q!=null)clearTimeout(q);if(M!=null)return B(M);R(D)},U=X.concat([F]),this.addQueue(Z,U)});else if(typeof K==="function")F=function R(){if(q!=null)clearTimeout(q);return K.apply(this,arguments)},U=X.slice(0,X.length-1).concat([F]);else V=new Promise((R,B)=>{F=function N(M,D){if(q!=null)clearTimeout(q);if(M!=null)return B(M);R(D)},U=X.concat([F]),this.addQueue(Z,U)});const L=this._getBufferTimeoutMS();if(q=setTimeout(()=>{if(this.removeQueue(Z,U)){const B="Operation `"+this.name+"."+Z+"()` buffering timed out after "+L+"ms",N=new hq(B);this.conn.emit("buffer-end",{_id:Q,modelName:J.modelName,collectionName:J.name,method:Z,error:N}),F(N)}},L),!N3[Z]&&typeof K==="function"){this.addQueue(Z,U);return}return V}else if(!N3[Z]&&typeof K==="function")H=function F(U,V){if(U!=null)J.conn.emit("operation-end",{_id:Q,modelName:J.modelName,collectionName:J.name,method:Z,error:U});else J.conn.emit("operation-end",{_id:Q,modelName:J.modelName,collectionName:J.name,method:Z,result:V});return K.apply(this,arguments)},z=X.slice(0,X.length-1).concat([H]);if(G)if(typeof G==="function"){let F=null;if(typeof X[X.length-1]=="function")F=X.slice(0,X.length-1);else F=X;G.apply(J,[J.name,Z].concat(F))}else if(G instanceof DQ1.Writable)this.$printToStream(J.name,Z,X,G);else{const F=G.color==null?!0:G.color,U=G.shell==null?!1:G.shell;this.$print(J.name,Z,X,F,U)}this.conn.emit("operation-start",{_id:Q,modelName:J.modelName,collectionName:this.name,method:Z,params:z});try{if(Y==null){const U="Cannot call `"+this.name+"."+Z+"()` before initial connection is complete if `bufferCommands = false`. Make sure you `await mongoose.connect()` if you have `bufferCommands = false`.";throw new hq(U)}if(N3[Z]&&typeof K==="function"){const U=Y[Z].apply(Y,z.slice(0,z.length-1));return K.call(this,null,U)}const F=Y[Z].apply(Y,z);if(F!=null&&typeof F.then==="function")return F.then((U)=>{return typeof K==="function"&&K(null,U),U},(U)=>{if(typeof K==="function"){K(U);return}throw U});return F}catch(F){if(typeof K==="function")return K(F);else throw this.conn.emit("operation-end",{_id:Q,modelName:J.modelName,collectionName:this.name,method:Z,error:F}),F}}},xY=function(Z){const Y={inspect:function(){return Z}};if(uq.inspect.custom)Y[uq.inspect.custom]=Y.inspect;return Y},TQ1=function(Z){return dq(Z,!0)},IQ1=function(Z,Y){Z[Y]=xY('ObjectId("'+Z[Y].toHexString()+'")')},jQ1=function(Z,Y,X){if(X)Z[Y]=xY('ISODate("'+Z[Y].toUTCString()+'")');else Z[Y]=xY('new Date("'+Z[Y].toUTCString()+'")')},dq=function(Z,Y,X,J){if(Z&&typeof Z.toBSON==="function")Z=Z.toBSON();if(Z==null)return Z;let W=w0()(Z,AQ1);const G=af(W);if(G==="Binary")W="BinData("+W.sub_type+', "'+W.toString("base64")+'")';else if(G==="ObjectId")W=xY('ObjectId("'+W.toHexString()+'")');else if(G==="Date")W=xY('new Date("'+W.toUTCString()+'")');else if(G==="Object"){const K=Object.keys(W),Q=K.length;let z;for(let H=0;H<Q;++H)if(z=K[H],W[z]){let F;if(typeof W[z].toBSON==="function")try{W[z]=W[z].toBSON()}catch(V){F=V}const U=af(W[z]);if(U==="Binary")W[z]="BinData("+W[z].sub_type+', "'+W[z].buffer.toString("base64")+'")';else if(U==="Object")W[z]=dq(W[z],!0);else if(U==="ObjectId")IQ1(W,z);else if(U==="Date")jQ1(W,z,J);else if(U==="ClientSession")W[z]=xY('ClientSession("'+(W[z]&&W[z].id&&W[z].id.id&&W[z].id.id.buffer||"").toString("hex")+'")');else if(Array.isArray(W[z]))W[z]=W[z].map(TQ1);else if(F!=null)throw F}}if(Y)return W;return uq.inspect(W,!1,10,X).replace(/\n/g,"").replace(/\s{2,}/g," ")};/*!
 * Module dependencies.
 */var $K=eA(),hq=W0(),mq=JK().Collection,NQ1=U4(),af=r8(),AQ1=n7().internalToObjectOptions,DQ1=import.meta.require("stream"),uq=import.meta.require("util");/*!
 * Inherit from abstract Collection.
 */Object.setPrototypeOf(D7.prototype,$K.prototype);D7.prototype.onOpen=function(){return this.collection=this.conn.db.collection(this.name),$K.prototype.onOpen.call(this),this.collection};D7.prototype.onClose=function(Z){$K.prototype.onClose.call(this,Z)};D7.prototype._getCollection=function Z(){if(this.collection)return this.collection;if(this.conn.db!=null)return this.collection=this.conn.db.collection(this.name),this.collection;return null};/*!
 * ignore
 */var N3={watch:!0,find:!0,aggregate:!0};for(let Z of Object.getOwnPropertyNames(mq.prototype)){if(Object.getOwnPropertyDescriptor(mq.prototype,Z).get!==void 0)continue;if(typeof mq.prototype[Z]!=="function")continue;PQ1(Z)}D7.prototype.$print=function(Z,Y,X,J,$){const W=J?"\x1B[0;36mMongoose:\x1B[0m ":"Mongoose: ",G=[Z,Y].join("."),K=[];for(let z=X.length-1;z>=0;--z)if(this.$format(X[z])||K.length)K.unshift(this.$format(X[z],J,$));const Q="("+K.join(", ")+")";console.info(W+G+Q)};D7.prototype.$printToStream=function(Z,Y,X,J){const $=[Z,Y].join("."),W=[];for(let K=X.length-1;K>=0;--K)if(this.$format(X[K])||W.length)W.unshift(this.$format(X[K]));const G="("+W.join(", ")+")";J.write($+G,"utf8")};D7.prototype.$format=function(Z,Y,X){const J=typeof Z;if(J==="function"||J==="undefined")return"";return dq(Z,!1,Y,X)};D7.prototype.getIndexes=D7.prototype.indexInformation;/*!
 * Module exports.
 */sf.exports=D7});var cq=w((RS1,ef)=>{/*!
 * Module dependencies.
 */var EQ1=import.meta.require("events").EventEmitter;/*!
 * ignore
 */var tf=["close","change","end","error","resumeTokenChanged"];/*!
 * ignore
 */class of extends EQ1{constructor(Z,Y,X){super();if(this.driverChangeStream=null,this.closed=!1,this.bindedEvents=!1,this.pipeline=Y,this.options=X,X&&X.hydrate&&!X.model)throw new Error("Cannot create change stream with `hydrate: true` unless calling `Model.watch()`");Z((J,$)=>{if(J!=null){this.emit("error",J);return}this.driverChangeStream=$,this.emit("ready")})}_bindEvents(){if(this.bindedEvents)return;if(this.bindedEvents=!0,this.driverChangeStream==null){this.once("ready",()=>{this.driverChangeStream.on("close",()=>{this.closed=!0}),tf.forEach((Z)=>{this.driverChangeStream.on(Z,(Y)=>{if(Z==="error"&&this.closed)return;if(Y!=null&&Y.fullDocument!=null&&this.options&&this.options.hydrate)Y.fullDocument=this.options.model.hydrate(Y.fullDocument);this.emit(Z,Y)})})});return}this.driverChangeStream.on("close",()=>{this.closed=!0}),tf.forEach((Z)=>{this.driverChangeStream.on(Z,(Y)=>{if(Z==="error"&&this.closed)return;if(Y!=null&&Y.fullDocument!=null&&this.options&&this.options.hydrate)Y.fullDocument=this.options.model.hydrate(Y.fullDocument);this.emit(Z,Y)})})}hasNext(Z){return this.driverChangeStream.hasNext(Z)}next(Z){if(this.options&&this.options.hydrate){if(Z!=null){const X=Z;Z=(J,$)=>{if(J!=null)return X(J);if($.fullDocument!=null)$.fullDocument=this.options.model.hydrate($.fullDocument);return X(null,$)}}let Y=this.driverChangeStream.next(Z);if(Y&&typeof Y.then==="function")Y=Y.then((X)=>{if(X.fullDocument!=null)X.fullDocument=this.options.model.hydrate(X.fullDocument);return X});return Y}return this.driverChangeStream.next(Z)}addListener(Z,Y){return this._bindEvents(),super.addListener(Z,Y)}on(Z,Y){return this._bindEvents(),super.on(Z,Y)}once(Z,Y){return this._bindEvents(),super.once(Z,Y)}_queue(Z){this.once("ready",()=>Z())}close(){if(this.closed=!0,this.driverChangeStream)this.driverChangeStream.close()}}/*!
 * ignore
 */ef.exports=of});var fY=w((MS1,Xy)=>{var d1=function(){this._pres=new Map,this._posts=new Map},Zy=function(Z,Y,X,J,$,W,G){if(W.useErrorHandlers)return Z.execPost(X,J,$,{error:Y},function(K){return typeof G==="function"&&G(K)});else return typeof G==="function"&&G(Y)},WK=function(Z,Y,X,J){let $;try{$=Z.apply(Y,X)}catch(W){return J(W)}if(GK($))$.then(()=>J(),(W)=>J(W))},GK=function(Z){return typeof Z==="object"&&Z!==null&&typeof Z.then==="function"},A3=function(Z){let Y=!1;const X=this;return function(){if(Y)return;return Y=!0,D3(()=>Z.apply(X,arguments))}},Yy=function(Z,Y){if(Z.errorHandler)return!0;return Z.fn.length===Y+2};d1.skipWrappedFunction=function Z(){if(!(this instanceof d1.skipWrappedFunction))return new d1.skipWrappedFunction(...arguments);this.args=[...arguments]};d1.overwriteResult=function Z(){if(!(this instanceof d1.overwriteResult))return new d1.overwriteResult(...arguments);this.args=[...arguments]};d1.prototype.execPre=function(Z,Y,X,J){if(arguments.length===3)J=X,X=[];const $=this._pres.get(Z)||[],W=$.length,G=$.numAsync||0;let K=0,Q=G,z=!1;const H=X;let F=null;if(!W)return D3(function(){J(null)});function U(){if(K>=W)return;const q=$[K];if(q.isAsync){const L=[A3(V),A3(function(R){if(R){if(z)return;if(R instanceof d1.skipWrappedFunction)F=R;else return z=!0,J(R)}if(--Q===0&&K>=W)return J(F)})];WK(q.fn,Y,L,L[0])}else if(q.fn.length>0){const L=[A3(V)],R=arguments.length>=2?arguments:[null].concat(H);for(let B=1;B<R.length;++B){if(B===R.length-1&&typeof R[B]==="function")continue;L.push(R[B])}WK(q.fn,Y,L,L[0])}else{let L=null;try{L=q.fn.call(Y)}catch(R){if(R!=null)return J(R)}if(GK(L))L.then(()=>V(),(R)=>V(R));else{if(++K>=W)if(Q>0)return;else return D3(function(){J(F)});U()}}}U.apply(null,[null].concat(X));function V(q){if(q){if(z)return;if(q instanceof d1.skipWrappedFunction)F=q;else return z=!0,J(q)}if(++K>=W)if(Q>0)return;else return J(F);U.apply(Y,arguments)}};d1.prototype.execPreSync=function(Z,Y,X){const J=this._pres.get(Z)||[],$=J.length;for(let W=0;W<$;++W)J[W].fn.apply(Y,X||[])};d1.prototype.execPost=function(Z,Y,X,J,$){if(arguments.length<5)$=J,J=null;const W=this._posts.get(Z)||[],G=W.length;let K=0,Q=null;if(J&&J.error)Q=J.error;if(!G)return D3(function(){$.apply(null,[Q].concat(X))});function z(){const H=W[K].fn;let F=0;const U=X.length,V=[];for(let q=0;q<U;++q)if(F+=X[q]&&X[q]._kareemIgnore?0:1,!X[q]||!X[q]._kareemIgnore)V.push(X[q]);if(Q)if(Yy(W[K],F)){const q=A3(function(L){if(L){if(L instanceof d1.overwriteResult){if(X=L.args,++K>=G)return $.call(null,Q);return z()}Q=L}if(++K>=G)return $.call(null,Q);z()});WK(H,Y,[Q].concat(V).concat([q]),q)}else{if(++K>=G)return $.call(null,Q);z()}else{const q=A3(function(L){if(L){if(L instanceof d1.overwriteResult){if(X=L.args,++K>=G)return $.apply(null,[null].concat(X));return z()}return Q=L,z()}if(++K>=G)return $.apply(null,[null].concat(X));z()});if(Yy(W[K],F)){if(++K>=G)return $.apply(null,[null].concat(X));return z()}if(H.length===F+1)WK(H,Y,V.concat([q]),q);else{let L,R;try{R=H.apply(Y,V)}catch(B){L=B,Q=B}if(GK(R))return R.then((B)=>{q(B instanceof d1.overwriteResult?B:null)},(B)=>q(B));if(R instanceof d1.overwriteResult)X=R.args;if(++K>=G)return $.apply(null,[L].concat(X));z()}}}z()};d1.prototype.execPostSync=function(Z,Y,X){const J=this._posts.get(Z)||[],$=J.length;for(let W=0;W<$;++W){const G=J[W].fn.apply(Y,X||[]);if(G instanceof d1.overwriteResult)X=G.args}return X};d1.prototype.createWrapperSync=function(Z,Y){const X=this;return function J(){X.execPreSync(Z,this,arguments);const $=Y.apply(this,arguments);return X.execPostSync(Z,this,[$])[0]}};d1.prototype.wrap=function(Z,Y,X,J,$){const W=J.length>0?J[J.length-1]:null,G=Array.from(J);typeof W==="function"&&G.pop();const K=this;$=$||{};const Q=$.checkForPromise;this.execPre(Z,X,J,function(z){if(z&&!(z instanceof d1.skipWrappedFunction)){const V=$.numCallbackParams||0,q=$.contextParameter?[X]:[];for(let L=q.length;L<V;++L)q.push(null);return Zy(K,z,Z,X,q,$,W)}const H=Y.length;let F;if(z instanceof d1.skipWrappedFunction)return F=z.args[0],U(null,...z.args);else try{F=Y.apply(X,G.concat(U))}catch(V){return U(V)}if(Q){if(GK(F))return F.then((V)=>U(null,V),(V)=>U(V));if(H<G.length+1)return U(null,F)}function U(){const V=Array.from(arguments);if(V.shift(),$.nullResultByDefault&&V.length===0)V.push(null);if(arguments[0])return Zy(K,arguments[0],Z,X,V,$,W);else K.execPost(Z,X,V,function(){if(W===null)return;arguments[0]?W(arguments[0]):W.apply(X,arguments)})}})};d1.prototype.filter=function(Z){const Y=this.clone(),X=Array.from(Y._pres.keys());for(let $ of X){const W=this._pres.get($).map((G)=>Object.assign({},G,{name:$})).filter(Z);if(W.length===0){Y._pres.delete($);continue}W.numAsync=W.filter((G)=>G.isAsync).length,Y._pres.set($,W)}const J=Array.from(Y._posts.keys());for(let $ of J){const W=this._posts.get($).map((G)=>Object.assign({},G,{name:$})).filter(Z);if(W.length===0){Y._posts.delete($);continue}Y._posts.set($,W)}return Y};d1.prototype.hasHooks=function(Z){return this._pres.has(Z)||this._posts.has(Z)};d1.prototype.createWrapper=function(Z,Y,X,J){const $=this;if(!this.hasHooks(Z))return function(){D3(()=>Y.apply(this,arguments))};return function(){const W=X||this;$.wrap(Z,Y,W,Array.from(arguments),J)}};d1.prototype.pre=function(Z,Y,X,J,$){let W={};if(typeof Y==="object"&&Y!==null)W=Y,Y=W.isAsync;else if(typeof arguments[1]!=="boolean")X=Y,Y=!1;const G=this._pres.get(Z)||[];if(this._pres.set(Z,G),Y)G.numAsync=G.numAsync||0,++G.numAsync;if(typeof X!=="function")throw new Error('pre() requires a function, got "'+typeof X+'"');if($)G.unshift(Object.assign({},W,{fn:X,isAsync:Y}));else G.push(Object.assign({},W,{fn:X,isAsync:Y}));return this};d1.prototype.post=function(Z,Y,X,J){const $=this._posts.get(Z)||[];if(typeof Y==="function")J=!!X,X=Y,Y={};if(typeof X!=="function")throw new Error('post() requires a function, got "'+typeof X+'"');if(J)$.unshift(Object.assign({},Y,{fn:X}));else $.push(Object.assign({},Y,{fn:X}));return this._posts.set(Z,$),this};d1.prototype.clone=function(){const Z=new d1;for(let Y of this._pres.keys()){const X=this._pres.get(Y).slice();X.numAsync=this._pres.get(Y).numAsync,Z._pres.set(Y,X)}for(let Y of this._posts.keys())Z._posts.set(Y,this._posts.get(Y).slice());return Z};d1.prototype.merge=function(Z,Y){Y=arguments.length===1?!0:Y;const X=Y?this.clone():this;for(let J of Z._pres.keys()){const $=X._pres.get(J)||[],W=Z._pres.get(J).filter((K)=>$.map((Q)=>Q.fn).indexOf(K.fn)===-1),G=$.concat(W);G.numAsync=$.numAsync||0,G.numAsync+=W.filter((K)=>K.isAsync).length,X._pres.set(J,G)}for(let J of Z._posts.keys()){const $=X._posts.get(J)||[],W=Z._posts.get(J).filter((G)=>$.indexOf(G)===-1);X._posts.set(J,$.concat(W))}return X};var D3=typeof process==="object"&&process!==null&&process.nextTick||function Z(Y){setTimeout(Y,0)};Xy.exports=d1});var Wy=w((Jy,$y)=>{var R8=$y.exports=Jy={};R8.DocumentNotFoundError=null;R8.general={};R8.general.default="Validator failed for path `{PATH}` with value `{VALUE}`";R8.general.required="Path `{PATH}` is required.";R8.Number={};R8.Number.min="Path `{PATH}` ({VALUE}) is less than minimum allowed value ({MIN}).";R8.Number.max="Path `{PATH}` ({VALUE}) is more than maximum allowed value ({MAX}).";R8.Number.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.";R8.Date={};R8.Date.min="Path `{PATH}` ({VALUE}) is before minimum allowed value ({MIN}).";R8.Date.max="Path `{PATH}` ({VALUE}) is after maximum allowed value ({MAX}).";R8.String={};R8.String.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.";R8.String.match="Path `{PATH}` is invalid ({VALUE}).";R8.String.minlength="Path `{PATH}` (`{VALUE}`) is shorter than the minimum allowed length ({MINLENGTH}).";R8.String.maxlength="Path `{PATH}` (`{VALUE}`) is longer than the maximum allowed length ({MAXLENGTH})."});var KK=w((BS1,Ky)=>{/*!
 * Module dependencies.
 */var Gy=n1(),CQ1=import.meta.require("util");class lq extends Gy{constructor(Z,Y,X,J){let $;const W=Gy.messages;if(W.DocumentNotFoundError!=null)$=typeof W.DocumentNotFoundError==="function"?W.DocumentNotFoundError(Z,Y):W.DocumentNotFoundError;else $='No document found for query "'+CQ1.inspect(Z)+'" on model "'+Y+'"';super($);this.result=J,this.numAffected=X,this.filter=Z,this.query=Z}}Object.defineProperty(lq.prototype,"name",{value:"DocumentNotFoundError"});/*!
 * exports
 */Ky.exports=lq});var O8=w((NS1,Hy)=>{var iq=function(Z){let Y=SQ1.inspect(Z);if(Y=Y.replace(/^'|'$/g,'"'),!Y.startsWith('"'))Y='"'+Y+'"';return Y},Qy=function(Z){if(Z==null)return""+Z;const Y=typeof Z;if(Y!=="object")return Y;if(typeof Z.constructor!=="function")return Y;return Z.constructor.name},zy=function(Z){const Y=Z&&Z._castErrorMessage||null;if(typeof Y==="string"||typeof Y==="function")return Y},pq=function(Z,Y,X,J,$,W,G){if(typeof $==="string"){const K=iq(X);let Q=$.replace("{KIND}",Y).replace("{VALUE}",K).replace("{PATH}",J);if(Z!=null)Q=Q.replace("{MODEL}",Z.modelName);return Q}else if(typeof $==="function")return $(X,J,Z,Y);else{const K=iq(X),Q=W?" (type "+W+")":"";let z="Cast to "+Y+" failed for value "+K+Q+' at path "'+J+'"';if(Z!=null)z+=' for model "'+Z.modelName+'"';if(G!=null&&typeof G.constructor==="function"&&G.constructor.name!=="AssertionError"&&G.constructor.name!=="Error")z+=' because of "'+G.constructor.name+'"';return z}};/*!
 * Module dependencies.
 */var OQ1=W0(),SQ1=import.meta.require("util");class nq extends OQ1{constructor(Z,Y,X,J,$){if(arguments.length>0){const W=Qy(Y),G=zy($),K=pq(null,Z,Y,X,G,W,J);super(K);this.init(Z,Y,X,J,$)}else super(pq())}toJSON(){return{stringValue:this.stringValue,valueType:this.valueType,kind:this.kind,value:this.value,path:this.path,reason:this.reason,name:this.name,message:this.message}}init(Z,Y,X,J,$){/*!
   * ignore
   */this.stringValue=iq(Y),this.messageFormat=zy($),this.kind=Z,this.value=Y,this.path=X,this.reason=J,this.valueType=Qy(Y)}copy(Z){this.messageFormat=Z.messageFormat,this.stringValue=Z.stringValue,this.kind=Z.kind,this.value=Z.value,this.path=Z.path,this.reason=Z.reason,this.message=Z.message,this.valueType=Z.valueType}setModel(Z){/*!
   * ignore
   */this.model=Z,this.message=pq(Z,this.kind,this.value,this.path,this.messageFormat,this.valueType)}}Object.defineProperty(nq.prototype,"name",{value:"CastError"});/*!
 * ignore
 *//*!
 * exports
 */Hy.exports=nq});var aq=w((AS1,Fy)=>{/*!
 * ignore
 */Fy.exports=function Z(Y){const X=Object.keys(Y.errors||{}),J=X.length,$=[];let W;for(let G=0;G<J;++G){if(W=X[G],Y===Y.errors[W])continue;$.push(W+": "+Y.errors[W].message)}return $.join(", ")}});var g9=w((DS1,qy)=>{/*!
 * Module requirements
 */var kQ1=W0(),_Q1=r8(),Uy=import.meta.require("util"),Vy=aq();class y9 extends kQ1{constructor(Z){let Y;if(_Q1(Z)==="model")Y=Z.constructor.modelName+" validation failed";else Y="Validation failed";super(Y);if(this.errors={},this._message=Y,Z)Z.$errors=this.errors}toString(){return this.name+": "+Vy(this)}inspect(){return Object.assign(new Error(this.message),this)}addError(Z,Y){if(Y instanceof y9){const{errors:X}=Y;for(let J of Object.keys(X))this.addError(`${Z}.${J}`,X[J]);return}this.errors[Z]=Y,this.message=this._message+": "+Vy(this)}}if(Uy.inspect.custom)y9.prototype[Uy.inspect.custom]=y9.prototype.inspect;Object.defineProperty(y9.prototype,"toJSON",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}});Object.defineProperty(y9.prototype,"name",{value:"ValidationError"});/*!
 * Module exports
 */qy.exports=y9});var sq=w((PS1,Ry)=>{var wy=function(Z,Y,X){if(typeof Z==="function")return Z(Y,X);const J=Object.keys(Y);for(let $ of J){if($==="message")continue;Z=Z.replace("{"+$.toUpperCase()+"}",Y[$])}return Z};/*!
 * Module dependencies.
 */var Ly=n1();class P3 extends Ly{constructor(Z,Y){let X=Z.message;if(!X)X=Ly.messages.general.default;const J=wy(X,Z,Y);super(J);Z=Object.assign({},Z,{message:J}),this.properties=Z,this.kind=Z.type,this.path=Z.path,this.value=Z.value,this.reason=Z.reason}toString(){return this.message}toJSON(){return Object.assign({name:this.name,message:this.message},this)}}Object.defineProperty(P3.prototype,"name",{value:"ValidatorError"});Object.defineProperty(P3.prototype,"properties",{enumerable:!1,writable:!0,value:null});P3.prototype.formatMessage=wy;/*!
 * exports
 */Ry.exports=P3});var tq=w((TS1,My)=>{/*!
 * Module dependencies.
 */var xQ1=n1();class rq extends xQ1{constructor(Z,Y,X){const J=X.join(", ");super('No matching document found for id "'+Z._id+'" version '+Y+' modifiedPaths "'+J+'"');this.version=Y,this.modifiedPaths=X}}Object.defineProperty(rq.prototype,"name",{value:"VersionError"});/*!
 * exports
 */My.exports=rq});var eq=w((IS1,By)=>{/*!
 * Module dependencies.
 */var fQ1=n1();class oq extends fQ1{constructor(Z){super("Can\'t save() the same doc multiple times in parallel. Document: "+Z._id)}}Object.defineProperty(oq.prototype,"name",{value:"ParallelSaveError"});/*!
 * exports
 */By.exports=oq});var YL=w((jS1,Ny)=>{/*!
 * Module dependencies.
 */var yQ1=n1();class ZL extends yQ1{constructor(Z){super("Cannot overwrite `"+Z+"` model once compiled.")}}Object.defineProperty(ZL.prototype,"name",{value:"OverwriteModelError"});/*!
 * exports
 */Ny.exports=ZL});var Dy=w((ES1,Ay)=>{/*!
 * Module dependencies.
 */var gQ1=n1();class XL extends gQ1{constructor(Z){const Y='Schema hasn\'t been registered for model "'+Z+'".\nUse mongoose.model(name, schema)';super(Y)}}Object.defineProperty(XL.prototype,"name",{value:"MissingSchemaError"});/*!
 * exports
 */Ay.exports=XL});var Ty=w((CS1,Py)=>{var bQ1=r8();Py.exports=function Z(Y){if(bQ1(Y)!=="TopologyDescription")return!1;const X=Array.from(Y.servers.values());return X.length>0&&X.every((J)=>J.type==="Unknown")}});var jy=w((OS1,Iy)=>{var vQ1=r8();Iy.exports=function Z(Y){if(vQ1(Y)!=="TopologyDescription")return!1;if(Y.servers.size===0)return!1;for(let X of Y.servers.values())if(X.host.endsWith(".mongodb.net")===!1||X.port!==27017)return!1;return!0}});var Cy=w((SS1,Ey)=>{var hQ1=r8(),mQ1="Client network socket disconnected before secure TLS connection was established";Ey.exports=function Z(Y){if(hQ1(Y)!=="TopologyDescription")return!1;const X=Array.from(Y.servers.values());return X.length>0&&X.every((J)=>J.error&&J.error.message.indexOf(mQ1)!==-1)}});var $L=w((kS1,Oy)=>{/*!
 * Module dependencies.
 */var uQ1=W0(),dQ1=Ty(),cQ1=jy(),lQ1=Cy();/*!
 * ignore
 */var pQ1="Could not connect to any servers in your MongoDB Atlas cluster. One common reason is that you\'re trying to access the database from an IP that isn\'t whitelisted. Make sure your current IP address is on your Atlas cluster\'s IP whitelist: https://www.mongodb.com/docs/atlas/security-whitelist/",iQ1="Mongoose is connecting with SSL enabled, but the server is not accepting SSL connections. Please ensure that the MongoDB server you are connecting to is configured to accept SSL connections. Learn more: https://mongoosejs.com/docs/tutorials/ssl.html";class JL extends uQ1{assimilateError(Z){const Y=Z.reason;if(cQ1(Y)&&dQ1(Y)&&Z.message.indexOf("bad auth")===-1&&Z.message.indexOf("Authentication failed")===-1)this.message=pQ1;else if(lQ1(Y))this.message=iQ1;else this.message=Z.message;for(let J in Z)if(J!=="name")this[J]=Z[J];return this}}Object.defineProperty(JL.prototype,"name",{value:"MongooseServerSelectionError"});Oy.exports=JL});var GL=w((_S1,Sy)=>{/*!
 * Module dependencies.
 */var nQ1=n1();class WL extends nQ1{constructor(Z){const Y="For your own good, using `document.save()` to update an array which was selected using an $elemMatch projection OR populated using skip, limit, query conditions, or exclusion of the _id field when the operation results in a $pop or $set of the entire array is not supported. The following path(s) would have been modified unsafely:\n  "+Z.join("\n  ")+"\nUse Model.updateOne() to update these arrays instead.";super(Y)}}Object.defineProperty(WL.prototype,"name",{value:"DivergentArrayError"});/*!
 * exports
 */Sy.exports=WL});var I5=w((xS1,ky)=>{/*!
 * Module dependencies.
 */var aQ1=n1();class KL extends aQ1{constructor(Z,Y,X){Y=Y||"Field `"+Z+"` is not in schema and strict mode is set to throw.";super(Y);this.isImmutableError=!!X,this.path=Z}}Object.defineProperty(KL.prototype,"name",{value:"StrictModeError"});ky.exports=KL});var zL=w((fS1,_y)=>{/*!
 * Module dependencies.
 */var sQ1=n1();class QL extends sQ1{constructor(Z,Y){Y=Y||"Cannot populate path `"+Z+"` because it is not in your schema. Set the `strictPopulate` option to false to override.";super(Y);this.path=Z}}Object.defineProperty(QL.prototype,"name",{value:"StrictPopulateError"});_y.exports=QL});var n1=w((xy,fy)=>{var M8=W0();/*!
 * Module exports.
 */fy.exports=xy=M8;M8.messages=Wy();M8.Messages=M8.messages;M8.DocumentNotFoundError=KK();M8.CastError=O8();M8.ValidationError=g9();M8.ValidatorError=sq();M8.VersionError=tq();M8.ParallelSaveError=eq();M8.OverwriteModelError=YL();M8.MissingSchemaError=Dy();M8.MongooseServerSelectionError=$L();M8.DivergentArrayError=GL();M8.StrictModeError=I5();M8.StrictPopulateError=zL()});var i6=w((yS1,yy)=>{yy.exports=Object.freeze({enumerable:!0,configurable:!0,writable:!0,value:void 0})});var N6=w((gS1,gy)=>{var rQ1=w0();class B8{constructor(Z){if(Z==null)return this;Object.assign(this,rQ1(Z))}}var t8=i6();Object.defineProperty(B8.prototype,"type",t8);Object.defineProperty(B8.prototype,"validate",t8);Object.defineProperty(B8.prototype,"cast",t8);Object.defineProperty(B8.prototype,"required",t8);Object.defineProperty(B8.prototype,"default",t8);Object.defineProperty(B8.prototype,"ref",t8);Object.defineProperty(B8.prototype,"refPath",t8);Object.defineProperty(B8.prototype,"select",t8);Object.defineProperty(B8.prototype,"index",t8);Object.defineProperty(B8.prototype,"unique",t8);Object.defineProperty(B8.prototype,"immutable",t8);Object.defineProperty(B8.prototype,"sparse",t8);Object.defineProperty(B8.prototype,"text",t8);Object.defineProperty(B8.prototype,"transform",t8);gy.exports=B8});var QK=w((bS1,yY)=>{var tQ1=O8();yY.exports=function Z(Y,X){if(yY.exports.convertToTrue.has(Y))return!0;if(yY.exports.convertToFalse.has(Y))return!1;if(Y==null)return Y;throw new tQ1("boolean",Y,X)};yY.exports.convertToTrue=new Set([!0,"true",1,"1","yes"]);yY.exports.convertToFalse=new Set([!1,"false",0,"0","no"])});var zK=w((vS1,by)=>{var oQ1=QK();/*!
 * ignore
 */by.exports=function(Z){const Y=this!=null?this.path:null;return oQ1(Z,Y)}});var HL=w((hS1,vy)=>{/*!
 * ignore
 */vy.exports=function(Z){if(Array.isArray(Z)){if(!Z.every((Y)=>typeof Y==="number"||typeof Y==="string"))throw new Error("$type array values must be strings or numbers");return Z}if(typeof Z!=="number"&&typeof Z!=="string")throw new Error("$type parameter must be number, string, or array of numbers and strings");return Z}});var my=w((mS1,hy)=>{var Zz1=function(Z,Y){return function X(J,$,W,G){if(this==null||this.$__==null)return J;if(this.isNew)return J;if(G&&G.overwriteImmutable)return J;if(!(typeof Y==="function"?Y.call(this,this):Y))return J;const Q=this.$__.priorDoc!=null?this.$__.priorDoc.$__getValue(Z):this.$__getValue(Z);if(this.$__.strictMode==="throw"&&J!==Q)throw new eQ1(Z,"Path `"+Z+"` is immutable and strict mode is set to throw.",!0);return Q}},eQ1=I5();/*!
 * ignore
 */hy.exports=function(Z){if(Z.$immutable)Z.$immutableSetter=Zz1(Z.path,Z.options.immutable),Z.set(Z.$immutableSetter);else if(Z.$immutableSetter)Z.setters=Z.setters.filter((Y)=>Y!==Z.$immutableSetter),delete Z.$immutableSetter}});var dy=w((uS1,uy)=>{uy.exports=function Z(Y){return typeof Y==="function"&&Y.constructor&&Y.constructor.name==="AsyncFunction"}});var ly=w((dS1,cy)=>{cy.exports=function Z(Y){const X=Object.keys(Y);let J=!0;for(let $=0,W=X.length;$<W;++$)if(typeof Y[X[$]]==="object"&&Y[X[$]]!==null){J=!1;break}return J}});var iy=w((cS1,py)=>{var Jz1=function(Z){if(Z=String(Z),Z.length>100)return;var Y=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(Z);if(!Y)return;var X=parseFloat(Y[1]),J=(Y[2]||"ms").toLowerCase();switch(J){case"years":case"year":case"yrs":case"yr":case"y":return X*Xz1;case"weeks":case"week":case"w":return X*Yz1;case"days":case"day":case"d":return X*b9;case"hours":case"hour":case"hrs":case"hr":case"h":return X*vY;case"minutes":case"minute":case"mins":case"min":case"m":return X*bY;case"seconds":case"second":case"secs":case"sec":case"s":return X*gY;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return X;default:return}},$z1=function(Z){var Y=Math.abs(Z);if(Y>=b9)return Math.round(Z/b9)+"d";if(Y>=vY)return Math.round(Z/vY)+"h";if(Y>=bY)return Math.round(Z/bY)+"m";if(Y>=gY)return Math.round(Z/gY)+"s";return Z+"ms"},Wz1=function(Z){var Y=Math.abs(Z);if(Y>=b9)return HK(Z,Y,b9,"day");if(Y>=vY)return HK(Z,Y,vY,"hour");if(Y>=bY)return HK(Z,Y,bY,"minute");if(Y>=gY)return HK(Z,Y,gY,"second");return Z+" ms"},HK=function(Z,Y,X,J){var $=Y>=X*1.5;return Math.round(Z/X)+" "+J+($?"s":"")},gY=1000,bY=gY*60,vY=bY*60,b9=vY*24,Yz1=b9*7,Xz1=b9*365.25;py.exports=function(Z,Y){Y=Y||{};var X=typeof Z;if(X==="string"&&Z.length>0)return Jz1(Z);else if(X==="number"&&isFinite(Z))return Y.long?Wz1(Z):$z1(Z);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(Z))}});var ay=w((lS1,ny)=>{ny.exports=function Z(Y){const X=[];let J="",$="DEFAULT";for(let W=0;W<Y.length;++W){if($==="IN_SQUARE_BRACKETS"&&!/\d/.test(Y[W])&&Y[W]!=="]")$="DEFAULT",J=X[X.length-1]+"["+J,X.splice(X.length-1,1);if(Y[W]==="["){if($!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS")X.push(J),J="";$="IN_SQUARE_BRACKETS"}else if(Y[W]==="]")if($==="IN_SQUARE_BRACKETS")$="IMMEDIATELY_AFTER_SQUARE_BRACKETS",X.push(J),J="";else $="DEFAULT",J+=Y[W];else if(Y[W]==="."){if($!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS")X.push(J),J="";$="DEFAULT"}else J+=Y[W]}if($!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS")X.push(J);return X}});var ey=w((Gz1)=>{var ty=function(Z,Y,X,J,$,W){for(var G,K=0;K<Z.length&&K<Y.length;++K)if(G=Z[K],Array.isArray(G)&&Array.isArray(Y[K]))ty(G,Y[K],X,J,$,W);else if(G)if(J)J(G,X,W(Y[K]));else{if(G[$])G=G[$];G[X]=W(Y[K])}},oy=function(Z){return Z},T3=ay(),ry=["__proto__","constructor","prototype"];Gz1.get=function(Z,Y,X,J){var $;if(typeof X=="function")if(X.length<2)J=X,X=void 0;else $=X,X=void 0;J||(J=oy);var W=typeof Z=="string"?T3(Z):Z;if(!Array.isArray(W))throw new TypeError("Invalid `path`. Must be either string or array");var G=Y,K;for(var Q=0;Q<W.length;++Q){if(K=W[Q],typeof W[Q]!=="string"&&typeof W[Q]!=="number")throw new TypeError("Each segment of path to `get()` must be a string or number, got "+typeof W[Q]);if(Array.isArray(G)&&!/^\d+$/.test(K)){var z=W.slice(Q);return[].concat(G).map(function(F){return F?Gz1.get(z,F,X||$,J):J(void 0)})}if($)G=$(G,K);else{var H=X&&G[X]?G[X]:G;G=H instanceof Map?H.get(K):H[K]}if(!G)return J(G)}return J(G)};Gz1.has=function(Z,Y){var X=typeof Z==="string"?T3(Z):Z;if(!Array.isArray(X))throw new TypeError("Invalid `path`. Must be either string or array");var J=X.length,$=Y;for(var W=0;W<J;++W){if(typeof X[W]!=="string"&&typeof X[W]!=="number")throw new TypeError("Each segment of path to `has()` must be a string or number, got "+typeof X[W]);if($==null||typeof $!=="object"||!(X[W]in $))return!1;$=$[X[W]]}return!0};Gz1.unset=function(Z,Y){var X=typeof Z==="string"?T3(Z):Z;if(!Array.isArray(X))throw new TypeError("Invalid `path`. Must be either string or array");var J=X.length,$=Y;for(var W=0;W<J;++W){if($==null||typeof $!=="object"||!(X[W]in $))return!1;if(typeof X[W]!=="string"&&typeof X[W]!=="number")throw new TypeError("Each segment of path to `unset()` must be a string or number, got "+typeof X[W]);if(ry.indexOf(X[W])!==-1)return!1;if(W===J-1)return delete $[X[W]],!0;$=$ instanceof Map?$.get(X[W]):$[X[W]]}return!0};Gz1.set=function(Z,Y,X,J,$,W){var G;if(typeof J=="function")if(J.length<2)$=J,J=void 0;else G=J,J=void 0;$||($=oy);var K=typeof Z=="string"?T3(Z):Z;if(!Array.isArray(K))throw new TypeError("Invalid `path`. Must be either string or array");if(X==null)return;for(var Q=0;Q<K.length;++Q){if(typeof K[Q]!=="string"&&typeof K[Q]!=="number")throw new TypeError("Each segment of path to `set()` must be a string or number, got "+typeof K[Q]);if(ry.indexOf(K[Q])!==-1)return}var z=W||/\$/.test(Z)&&W!==!1,H=X,F;for(var Q=0,U=K.length-1;Q<U;++Q){if(F=K[Q],F=="$")if(Q==U-1)break;else continue;if(Array.isArray(H)&&!/^\d+$/.test(F)){var V=K.slice(Q);if(!z&&Array.isArray(Y))for(var q=0;q<H.length&&q<Y.length;++q)Gz1.set(V,Y[q],H[q],J||G,$,z);else for(var q=0;q<H.length;++q)Gz1.set(V,Y,H[q],J||G,$,z);return}if(G)H=G(H,F);else{var L=J&&H[J]?H[J]:H;H=L instanceof Map?L.get(F):L[F]}if(!H)return}if(F=K[U],J&&H[J])H=H[J];if(Array.isArray(H)&&!/^\d+$/.test(F))if(!z&&Array.isArray(Y))ty(H,Y,F,G,J,$);else for(var q=0;q<H.length;++q){var R=H[q];if(R)if(G)G(R,F,$(Y));else{if(R[J])R=R[J];R[F]=$(Y)}}else if(G)G(H,F,$(Y));else if(H instanceof Map)H.set(F,$(Y));else H[F]=$(Y)};/*!
 * Split a string path into components delimited by '.' or
 * '[\d+]'
 *
 * #### Example:
 *     stringToParts('foo[0].bar.1'); // ['foo', '0', 'bar', '1']
 */Gz1.stringToParts=T3;/*!
 * Recursively set nested arrays
 *//*!
 * Returns the value passed to it.
 */});var P7=w((Zg,Yg)=>{Yg.exports=Zg=ey()});var $g=w((iS1,Jg)=>{var Hz1=w0();class Xg{constructor(Z){if(this._docs={},this._childDocs=[],Z==null)return;if(Z=Hz1(Z),Object.assign(this,Z),typeof Z.subPopulate==="object")this.populate=Z.subPopulate;if(Z.perDocumentLimit!=null&&Z.limit!=null)throw new Error("Can not use `limit` and `perDocumentLimit` at the same time. Path: `"+Z.path+"`.")}}Jg.exports=Xg});var Wg=w((Fz1)=>{Fz1.isMongooseDocumentArray=function(Z){return Array.isArray(Z)&&Z.isMongooseDocumentArray}});var FK=w((aS1,Gg)=>{var Vz1=H6(),hY=Symbol("mongoose#emitted");Gg.exports=function Z(Y,X,J,$){if(typeof Y==="function")try{return X(function(W){if(W!=null){if(J!=null&&J.listeners!=null&&J.listeners("error").length>0&&!W[hY])W[hY]=!0,J.emit("error",W);try{Y(W)}catch(G){return Vz1(()=>{throw G})}return}Y.apply(this,arguments)})}catch(W){if(J!=null&&J.listeners!=null&&J.listeners("error").length>0&&!W[hY])W[hY]=!0,J.emit("error",W);return Y(W)}return $=$||global.Promise,new $((W,G)=>{X(function(K,Q){if(K!=null){if(J!=null&&J.listeners!=null&&J.listeners("error").length>0&&!K[hY])K[hY]=!0,J.emit("error",K);return G(K)}if(arguments.length>2)return W(Array.prototype.slice.call(arguments,1));W(Q)})})}});var UK=w((sS1,Kg)=>{Kg.exports=function Z(Y,X,J){const $=Object.keys(X.tree),W={};for(let G of $){if(J&&(Y.paths[G]||Y.nested[G]||Y.singleNestedPaths[G]))continue;W[G]=X.tree[G]}Y.options._isMerging=!0,Y.add(W,null),delete Y.options._isMerging,Y.callQueue=Y.callQueue.concat(X.callQueue),Y.method(X.methods),Y.static(X.statics);for(let[G,K]of Object.entries(X._userProvidedOptions))if(!(G in Y._userProvidedOptions))Y.set(G,K);for(let G in X.query)Y.query[G]=X.query[G];for(let G in X.virtuals)Y.virtuals[G]=X.virtuals[G].clone();Y._indexes=Y._indexes.concat(X._indexes||[]),Y.s.hooks.merge(X.s.hooks,!1)}});var Hg=w((Qg,zg)=>{/*!
 * Module dependencies.
 */var rS1=G1(),T7=zg.exports=Qg=function Z(){};T7.ctor=function(){const Z=[...arguments],Y=function(){T7.apply(this,arguments),this.paths={},this.states={}};return Y.prototype=new T7,Y.prototype.stateNames=Z,Z.forEach(function(X){Y.prototype[X]=function(J){this._changeState(J,X)}}),Y};T7.prototype._changeState=function Z(Y,X){const J=this.paths[Y];if(J===X)return;const $=this.states[J];if($)delete $[Y];this.paths[Y]=X,this.states[X]=this.states[X]||{},this.states[X][Y]=!0};/*!
 * ignore
 */T7.prototype.clear=function Z(Y){if(this.states[Y]==null)return;const X=Object.keys(this.states[Y]);let J=X.length,$;while(J--)$=X[J],delete this.states[Y][$],delete this.paths[$]};/*!
 * ignore
 */T7.prototype.clearPath=function Z(Y){const X=this.paths[Y];if(!X)return;delete this.paths[Y],delete this.states[X][Y]};T7.prototype.getStatePaths=function Z(Y){if(this.states[Y]!=null)return this.states[Y];return{}};T7.prototype.some=function Z(){const Y=this,X=arguments.length?arguments:this.stateNames;return Array.prototype.some.call(X,function(J){if(Y.states[J]==null)return!1;return Object.keys(Y.states[J]).length})};T7.prototype._iter=function Z(Y){return function(){let X=[...arguments];const J=X.pop();if(!X.length)X=this.stateNames;const $=this;return X.reduce(function(G,K){if($.states[K]==null)return G;return G.concat(Object.keys($.states[K]))},[])[Y](function(G,K,Q){return J(G,K,Q)})}};T7.prototype.forEach=function Z(){return this.forEach=this._iter("forEach"),this.forEach.apply(this,arguments)};T7.prototype.map=function Z(){return this.map=this._iter("map"),this.map.apply(this,arguments)}});var Vg=w((Fg,Ug)=>{var M0=function(){this.activePaths=new Lz1};/*!
 * Dependencies
 */var qz1=Hg(),Lz1=qz1.ctor("require","modify","init","default","ignore");Ug.exports=Fg=M0;M0.prototype.strictMode=!0;M0.prototype.fullPath=void 0;M0.prototype.selected=void 0;M0.prototype.shardval=void 0;M0.prototype.saveError=void 0;M0.prototype.validationError=void 0;M0.prototype.adhocPaths=void 0;M0.prototype.removing=void 0;M0.prototype.inserting=void 0;M0.prototype.saving=void 0;M0.prototype.version=void 0;M0.prototype._id=void 0;M0.prototype.ownerDocument=void 0;M0.prototype.populate=void 0;M0.prototype.populated=void 0;M0.prototype.primitiveAtomics=void 0;M0.prototype.wasPopulated=!1;M0.prototype.scope=void 0;M0.prototype.session=null;M0.prototype.pathsToScopes=null;M0.prototype.cachedRequired=null});var v9=w((wz1)=>{wz1.schemaMixedSymbol=Symbol.for("mongoose:schema_mixed");wz1.builtInMiddleware=Symbol.for("mongoose:built-in-middleware")});var h9=w((oS1,qg)=>{var I7=function(Z,Y){if(Y&&Y.default){const X=Y.default;if(Array.isArray(X)&&X.length===0)Y.default=Array;else if(!Y.shared&&Nz1(X)&&Object.keys(X).length===0)Y.default=function(){return{}}}VK.call(this,Z,Y,"Mixed"),this[Bz1.schemaMixedSymbol]=!0};/*!
 * Module dependencies.
 */var VK=i0(),Bz1=v9(),Nz1=o4(),Az1=G1();I7.schemaName="Mixed";I7.defaultOptions={};/*!
 * Inherits from SchemaType.
 */I7.prototype=Object.create(VK.prototype);I7.prototype.constructor=I7;I7.get=VK.get;I7.set=VK.set;I7.setters=[];I7.prototype.cast=function(Z){if(Z instanceof Error)return Az1.errorToPOJO(Z);return Z};I7.prototype.castForQuery=function(Z,Y){return Y};/*!
 * Module exports.
 */qg.exports=I7});var VL=w((eS1,Lg)=>{/*!
 * Module dependencies.
 */var Dz1=n1();class UL extends Dz1{constructor(Z,Y){const X=Array.isArray(Y)?"array":"primitive value";super("Tried to set nested object field `"+Z+`\` to ${X} \``+Y+"`");this.path=Z}}Object.defineProperty(UL.prototype,"name",{value:"ObjectExpectedError"});Lg.exports=UL});var LL=w((Zk1,wg)=>{/*!
 * Module dependencies.
 */var Pz1=n1();class qL extends Pz1{constructor(Z,Y,X){super('Parameter "'+Y+'" to '+X+'() must be an object, got "'+Z.toString()+'" (type '+typeof Z+")")}}Object.defineProperty(qL.prototype,"name",{value:"ObjectParameterError"});wg.exports=qL});var Mg=w((Yk1,Rg)=>{/*!
 * Module dependencies.
 */var Tz1=W0();class wL extends Tz1{constructor(Z){super("Can\'t validate() the same doc multiple times in parallel. Document: "+Z._id)}}Object.defineProperty(wL.prototype,"name",{value:"ParallelValidateError"});/*!
 * exports
 */Rg.exports=wL});var RL=w((Xk1,Bg)=>{Bg.exports=function Z(Y){const X={},J=Object.keys(Y);for(let $ of J){if($.indexOf(".")===-1){X[$]=1;continue}const W=$.split(".");let G=W[0];for(let K=0;K<W.length;++K)if(X[G]=1,K+1<W.length)G=G+"."+W[K+1]}return X}});var qK=w((Jk1,Ng)=>{var ML=function(Z,Y){if(Z.$__.activePaths.default(Y),Z.$isSubdocument&&Z.$isSingleNested&&Z.$parent()!=null)Z.$parent().$__.activePaths.default(Z.$__pathRelativeToParent(Y))};Ng.exports=function Z(Y,X,J,$,W,G){const K=Object.keys(Y.$__schema.paths),Q=K.length;for(let z=0;z<Q;++z){let H,F="";const U=K[z];if(U==="_id"&&Y.$__.skipId)continue;const V=Y.$__schema.paths[U],q=V.splitPath(),L=q.length;let R=!1,B=Y._doc;for(let N=0;N<L;++N){if(B==null)break;const M=q[N];if(F+=(!F.length?"":".")+M,J===!0){if(F in X)break}else if(J===!1&&X&&!R){const D=V.$isSingleNested||V.$isMongooseDocumentArray;if((F in X)||N===L-1&&D&&$!=null&&$[F])R=!0;else if($!=null&&!$[F])break}if(N===L-1){if(B[M]!==void 0)break;if(W!=null){if(typeof V.defaultValue==="function"){if(!V.defaultValue.$runBeforeSetters&&W)break;if(V.defaultValue.$runBeforeSetters&&!W)break}else if(!W)continue}if(G&&G[F])break;if(X&&J!==null){if(J===!0){if(U in X)continue;try{H=V.getDefault(Y,!1)}catch(D){Y.invalidate(U,D);break}if(typeof H!=="undefined")B[M]=H,ML(Y,U)}else if(R){try{H=V.getDefault(Y,!1)}catch(D){Y.invalidate(U,D);break}if(typeof H!=="undefined")B[M]=H,ML(Y,U)}}else{try{H=V.getDefault(Y,!1)}catch(D){Y.invalidate(U,D);break}if(typeof H!=="undefined")B[M]=H,ML(Y,U)}}else B=B[M]}}};/*!
 * ignore
 */});var BL=w(($k1,Ag)=>{/*!
 * ignore
 */Ag.exports=function Z(Y,X,J){J=J||{};const $=J.skipDocArrays;let W=0;if(!Y)return W;for(let G of Object.keys(Y.$__.activePaths.getStatePaths("modify"))){if($){const K=Y.$__schema.path(G);if(K&&K.$isMongooseDocumentArray)continue}if(G.startsWith(X+".")){if(Y.$__.activePaths.clearPath(G),++W,Y.$isSubdocument){const K=Y.ownerDocument(),Q=Y.$__fullPath(G);K.$__.activePaths.clearPath(Q)}}}return W}});var wK=w((xz1)=>{var Pg=function(Z,Y,X,J){mY=mY||o8();const $=J.typeKey;for(let W of Object.keys(Z)){const G=Z[W],Q=Dg(G)&&Object.keys(G).length>0&&(!G[$]||$==="type"&&Dg(G.type)&&G.type.type)?G:null;Tg({prop:W,subprops:Q,prototype:Y,prefix:X,options:J})}},Tg=function({prop:Z,subprops:Y,prototype:X,prefix:J,options:$}){mY=mY||o8();const W=(J?J+".":"")+Z;J=J||"";const G=J?Object.freeze({}):kz1;if(Y)Object.defineProperty(X,Z,{enumerable:!0,configurable:!0,get:function(){const K=this;if(!this.$__.getters)this.$__.getters={};if(!this.$__.getters[W]){const Q=Object.create(mY.prototype,_z1(this));if(!J)Q.$__[LK]=this;Q.$__.nestedPath=W,Object.defineProperty(Q,"schema",{enumerable:!1,configurable:!0,writable:!1,value:X.schema}),Object.defineProperty(Q,"$__schema",{enumerable:!1,configurable:!0,writable:!1,value:X.schema}),Object.defineProperty(Q,jz1,{enumerable:!1,configurable:!0,writable:!1,value:X.schema}),Object.defineProperty(Q,"toObject",{enumerable:!1,configurable:!0,writable:!1,value:function(){return Iz1(K.get(W,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toObject&&this.schema.options.toObject.virtuals||null}))}}),Object.defineProperty(Q,"$__get",{enumerable:!1,configurable:!0,writable:!1,value:function(){return K.get(W,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toObject&&this.schema.options.toObject.virtuals||null})}}),Object.defineProperty(Q,"toJSON",{enumerable:!1,configurable:!0,writable:!1,value:function(){return K.get(W,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toJSON&&this.schema.options.toJSON.virtuals||null})}}),Object.defineProperty(Q,"$__isNested",{enumerable:!1,configurable:!0,writable:!1,value:!0}),Object.defineProperty(Q,"$isEmpty",{enumerable:!1,configurable:!0,writable:!1,value:function(){return Object.keys(this.get(W,null,Sz1)||{}).length===0}}),Object.defineProperty(Q,"$__parent",{enumerable:!1,configurable:!0,writable:!1,value:this}),Pg(Y,Q,W,$),this.$__.getters[W]=Q}return this.$__.getters[W]},set:function(K){if(K!=null&&K.$__isNested)K=K.$__get();else if(K instanceof mY&&!K.$__isNested)K=K.$toObject(Ez1);(this.$__[LK]||this).$set(W,K)}});else Object.defineProperty(X,Z,{enumerable:!0,configurable:!0,get:function(){return this[Oz1].call(this.$__[LK]||this,W,null,G)},set:function(K){this.$set.call(this.$__[LK]||this,W,K)}})},_z1=function(Z){const Y={};return Object.getOwnPropertyNames(Z).forEach(function(X){if(["isNew","$__","$errors","errors","_doc","$locals","$op","__parentArray","__index","$isDocumentArrayElement"].indexOf(X)===-1)return;Y[X]=Object.getOwnPropertyDescriptor(Z,X),Y[X].enumerable=!1}),Y},Iz1=w0(),jz1=Z1().documentSchemaSymbol,Ez1=n7().internalToObjectOptions,Cz1=G1(),mY,Oz1=Z1().getSymbol,LK=Z1().scopeSymbol,Dg=Cz1.isPOJO;/*!
 * exports
 */xz1.compile=Pg;xz1.defineKey=Tg;var Sz1=Object.freeze({minimize:!0,virtuals:!1,getters:!1,transform:!1}),kz1=Object.freeze({noDottedPath:!0})});var uY=w((hz1)=>{var Eg=function(Z,Y,X,J){let $;if(Z&&jg(Z)&&!Buffer.isBuffer(Z))$=Object.keys(Z.toObject({transform:!1,virtuals:!1})||{});else $=Object.keys(Z||{});const W=$.length,G={};Y=Y?Y+".":"";for(let K=0;K<W;++K){const Q=$[K],z=Z[Q];G[Y+Q]=z;const H=J&&J.path&&J.path(Y+Q),F=J&&J.nested&&J.nested[Y+Q];if(H&&H.instance==="Mixed")continue;if(Og(z)){if(X&&X.skipArrays&&Array.isArray(z))continue;const U=Eg(z,Y+Q,X,J);for(let V in U)G[V]=U[V];if(Array.isArray(z))G[Y+Q]=z}if(F){const U=Object.keys(J.paths);for(let V of U)if(V.startsWith(Y+Q+".")&&!G.hasOwnProperty(V))G[V]=void 0}}return G},Cg=function(Z,Y,X,J=null){if(Z==null||typeof Z!=="object")return;if(J==null)J={raw:{update:Z,path:Y},trace:new WeakSet};if(J.trace.has(Z))throw new bz1(`a circular reference in the update value, updateValue:
${vz1.inspect(J.raw.update,{showHidden:!1,depth:1})}
updatePath: '${J.raw.path}'`);J.trace.add(Z);const $=Object.keys(Z||{}),W=$.length;X=X||{},Y=Y?Y+".":"";for(let G=0;G<W;++G){const K=$[G];let Q=Z[K];const z=Y+K;if(X[z]=!0,!Buffer.isBuffer(Q)&&jg(Q))Q=Q.toObject({transform:!1,virtuals:!1});if(Og(Q))Cg(Q,Y+K,X,J)}return J.trace.delete(Z),X},Og=function(Z){return Z&&typeof Z==="object"&&!(Z instanceof Date)&&!Ig(Z,"ObjectId")&&(!Array.isArray(Z)||Z.length!==0)&&!(Z instanceof Buffer)&&!Ig(Z,"Decimal128")&&!(Z instanceof gz1)};/*!
 * Module dependencies.
 */var gz1=S6().Binary,Ig=u8(),jg=KJ(),bz1=n1(),vz1=import.meta.require("util");hz1.flatten=Eg;hz1.modifiedPaths=Cg;/*!
 * ignore
 *//*!
 * ignore
 *//*!
 * ignore
 */});var z0=w((Kk1,Sg)=>{var NL=function(Z,Y){if(Z==null)return Z;if(Z instanceof Map)return Z.get(Y);return Z[Y]};Sg.exports=function Z(Y,X,J){let $,W=!1;if(typeof X==="string"){if(X.indexOf(".")===-1){const Q=NL(Y,X);if(Q==null)return J;return Q}$=X.split(".")}else if(W=!0,$=X,$.length===1){const Q=NL(Y,$[0]);if(Q==null)return J;return Q}let G=X,K=Y;for(let Q of $){if(K==null)return J;if(!W&&K[G]!=null)return K[G];if(K=NL(K,Q),!W)G=G.substr(Q.length+1)}return K==null?J:K}});var AL=w((Qk1,_g)=>{var kg=u8();_g.exports=function Z(Y,X){if(typeof Y==="string"&&typeof X==="string")return Y===X;if(typeof Y==="number"&&typeof X==="number")return Y===X;if(kg(Y,"ObjectId")&&kg(X,"ObjectId"))return Y.toString()===X.toString();return!1}});var RK=w((zk1,xg)=>{var dz1=AL();xg.exports=function Z(Y,X){if(Y==null||Y.discriminators==null)return null;for(let J of Object.keys(Y.discriminators)){const $=Y.discriminators[J];if($.discriminatorMapping==null)continue;if(dz1($.discriminatorMapping.value,X))return $}return null}});var yg=w((Hk1,fg)=>{var cz1=z0(),lz1=RK();fg.exports=function Z(Y,X,J){J=J||{};const $=J.typeOnly,W=Array.isArray(X)?X:X.indexOf(".")===-1?[X]:X.split(".");let G=null,K="adhocOrUndefined";const Q=lz1(Y.schema,Y.get(Y.schema.options.discriminatorKey))||Y.schema;for(let z=0;z<W.length;++z){const H=W.slice(0,z+1).join(".");if(G=Q.path(H),G==null){K="adhocOrUndefined";continue}if(G.instance==="Mixed")return $?"real":G;if(K=Q.pathType(H),(G.$isSingleNested||G.$isMongooseDocumentArrayElement)&&G.schema.discriminators!=null){const F=G.schema.discriminators,U=Y.get(H+"."+cz1(G,"schema.options.discriminatorKey"));if(U==null||F[U]==null)continue;const V=W.slice(z+1).join(".");return Z(Y.get(H),V,J)}}return $?K:G}});var bg=w((Fk1,gg)=>{var pz1=z0();gg.exports=function Z(Y,X,J){const $=J!=null?Object.keys(pz1(Y.tree,J,{})):Object.keys(Y.tree),W=new Set(Object.keys(X));let G;if(W.size>1){G=new Set;for(let K of $)if(W.has(K))G.add(K);for(let K of W)if(!G.has(K))G.add(K);G=Array.from(G)}else G=Array.from(W);return G}});var hg=w((Uk1,vg)=>{vg.exports=function Z(Y,X){if(X.length===1)return;let J=X[0],$=void 0;for(let W=0;W<X.length-1;++W){const G=Y.path(J);if(G&&G.schema)$=G.schema.options.strict,Y=G.schema,J=G.$isMongooseDocumentArray&&!isNaN(X[W+1])?"":X[W+1];else J+=J.length?"."+X[W+1]:X[W+1]}return $}});var MK=w((Vk1,mg)=>{var iz1=G1(),nz1=new Set(["__index","__parentArray","_doc"]);mg.exports=function Z(Y,X){if(iz1.isPOJO(Y)&&Y.$__!=null&&Y._doc!=null){if(X){const J={};for(let $ of Object.keys(Y)){if(typeof $==="symbol")continue;if($[0]==="$")continue;if(nz1.has($))continue;J[$]=Y[$]}return{...Y._doc,...J}}return Y._doc}return Y}});var dY=w((qk1,ug)=>{/*!
 * ignore
 */ug.exports=function Z(Y){if(Y==null)return!0;if(typeof Y==="object")return!("$meta"in Y)&&!("$slice"in Y);return!0}});var cY=w((Lk1,dg)=>{var az1=dY();/*!
 * ignore
 */dg.exports=function Z(Y){if(Y==null)return null;const X=Object.keys(Y);let J=X.length,$=null;if(J===1&&X[0]==="_id")$=!Y._id;else while(J--){const W=X[J];if(W!=="_id"&&az1(Y[W])){$=Y[W]!=null&&typeof Y[W]==="object"?Z(Y[W]):!Y[W];break}}return $}});var DL=w((wk1,cg)=>{var sz1=G1();cg.exports=function Z(Y,X){if(Y._id==null||X==null||X.length===0)return;const J=String(Y._id);for(let $ of X){if($.isVirtual)continue;const G=$.path.split(".");for(let K=0;K<G.length-1;++K){const Q=G.slice(0,K+1).join("."),z=G.slice(K+1).join("."),H=Y.get(Q);if(H==null)continue;if(sz1.isMongooseDocumentArray(H)){for(let F=0;F<H.length;++F)if(H[F])H[F].populated(z,$._docs[J]==null?void 0:$._docs[J][F],$);break}}}}});var PL=w((Rk1,pg)=>{var lg=function(Z){const Y=Object.keys(Z);let X=Y.length,J,$,W;while(X--){if($=Y[X],W=Z[$],rz1(W))Z[$]=lg(W);if(Z[$]===void 0){delete Z[$];continue}J=!0}return J?Z:void 0},{isPOJO:rz1}=G1();pg.exports=lg});var ng=w((Mk1,ig)=>{ig.exports=function Z(Y,X,J,$,W){const G=Object.keys(Y).reduce((Q,z)=>Q||z.startsWith(X+"."),!1),K=X+"."+J.options.discriminatorKey;if(!G&&W.length===1&&W[0]===K)$.splice($.indexOf(K),1)}});var j7=w((Bk1,ag)=>{var tz1=AL();ag.exports=function Z(Y,X){if(Y==null)return null;for(let J of Object.keys(Y)){const $=Y[J];if($.schema&&$.schema.discriminatorMapping&&tz1($.schema.discriminatorMapping.value,X))return $}return null}});var BK=w((Nk1,sg)=>{/*!
 * ignore
 */sg.exports=function Z(Y,X){const J=X.split(".");let $="",W,G,K;for(let Q=0;Q<J.length;++Q)if($+=$.length?".":""+J[Q],Y[$]){G=Object.keys(Y),K=G.length;for(W=0;W<K;++W)if(G[Q].indexOf($+".")===0&&G[Q].indexOf(X)!==0)continue;return!0}return!1}});var lY=w((JH1)=>{var tg=function(Z){return function(Y){if(Y.options||(Y.options={}),Z!=null&&Array.isArray(Z.virtuals))Z=Object.assign({},Z),Z.virtuals=Z.virtuals.filter((X)=>typeof X==="string"&&X.startsWith(Y.path+".")).map((X)=>X.slice(Y.path.length+1));Y.options.lean=Z}};/*!
 * Module dependencies
 */var oz1=ng(),rg=z0(),ez1=j7(),ZH1=dY(),YH1=w0(),XH1=BK();JH1.preparePopulationOptions=function Z(Y,X){const J=Y.options.populate,$=Object.keys(J).reduce((W,G)=>W.concat([J[G]]),[]);if(X.lean!=null)$.filter((W)=>(W&&W.options&&W.options.lean)==null).forEach(tg(X.lean));return $.forEach((W)=>{W._localModel=Y.model}),$};JH1.preparePopulationOptionsMQ=function Z(Y,X){const J=Y._mongooseOptions.populate,$=Object.keys(J).reduce((K,Q)=>K.concat([J[Q]]),[]);if(X.lean!=null)$.filter((K)=>(K&&K.options&&K.options.lean)==null).forEach(tg(X.lean));const W=Y&&Y.options&&Y.options.session||null;if(W!=null)$.forEach((K)=>{if(K.options==null){K.options={session:W};return}if(!("session"in K.options))K.options.session=W});const G=Y._fieldsForExec();return $.forEach((K)=>{K._queryProjection=G}),$.forEach((K)=>{K._localModel=Y.model}),$};JH1.createModel=function Z(Y,X,J,$,W){Y.hooks.execPreSync("createModel",X);const G=Y.schema?Y.schema.discriminatorMapping:null,K=G&&G.isRoot?G.key:null,Q=X[K];if(K&&Q&&Y.discriminators){const H=Y.discriminators[Q]||ez1(Y.discriminators,Q);if(H){const F=YH1($);return JH1.applyPaths(F,H.schema),new H(void 0,F,!0)}}const z={skipId:!0,isNew:!1,willInit:!0};if(W!=null&&("defaults"in W))z.defaults=W.defaults;return new Y(void 0,J,z)};/*!
 * ignore
 */JH1.createModelAndInit=function Z(Y,X,J,$,W,G,K){const Q=G?{populated:G}:void 0,z=JH1.createModel(Y,X,J,$,W);try{z.$init(X,Q,K)}catch(H){K(H,z)}};/*!
 * ignore
 */JH1.applyPaths=function Z(Y,X){let J,$;const W=new Set;if(Y){$=Object.keys(Y);const F=[];for(let U=0;U<$.length;++U){const V=$[U];if($[U][0]!=="-")continue;if(delete Y[V],V==="-_id")Y._id=0;else F.push(V.slice(1))}$=Object.keys(Y);for(let U=0;U<$.length;++U){if($[U][0]==="+")continue;const V=Y[$[U]];if(!ZH1(V))continue;if($[U]==="_id"&&$.length>1)continue;J=!V;break}for(let U of F){const V=X.path(U);if(!V||!V.selected||J!==!1)Y[U]=0,J=!0;else if(V&&V.selected&&J===!1)W.add(U)}}const G=[],K=[],Q=[];switch(z(X),J){case!0:for(let F of K)Y[F]=0;break;case!1:if(X&&X.paths._id&&X.paths._id.options&&X.paths._id.options.select===!1)Y._id=0;for(let F of G){if(W.has(F))continue;if(XH1(Y,F))continue;Y[F]=Y[F]||1}break;case void 0:if(Y==null)break;for(let F of Object.keys(Y||{}))if(F.startsWith("+"))delete Y[F];for(let F of K){if(Y[F]!=null)continue;Y[F]=0}break}function z(F,U){if(U||(U=""),Q.indexOf(F)!==-1)return[];Q.push(F);const V=[];return F.eachPath(function(q,L){if(U)q=U+"."+q;if(L.$isSchemaMap||q.endsWith(".$*")){const B="+"+q,N=Y&&(B in Y);if(L.options&&L.options.select===!1&&!N)K.push(q);return}let R=H(q,L);if(R==null&&!Array.isArray(L)&&L.$isMongooseArray&&!L.$isMongooseDocumentArray)R=H(q,L.caster);if(R!=null)V.push(R);if(L.schema){const B=z(L.schema,q);if(J===!1)oz1(Y,q,L.schema,G,B)}}),Q.pop(),V}function H(F,U){if(Y==null)return;if(typeof U.selected!=="boolean")return;if(U.selected===!1&&Y[F])return;if(!J&&U.selected&&F===X.options.discriminatorKey&&Y[F]!=null&&!Y[F]){delete Y[F];return}if(J===!1&&U.selected&&Y[F]!=null&&!Y[F]){delete Y[F];return}const V="+"+F;if(Y&&(V in Y)){if(delete Y[V],J===!1&&$.length>1&&!~$.indexOf(F))Y[F]=1;return}const L=F.split(".");let R="";for(let B=0;B<L.length;++B)if(R+=R.length?"."+L[B]:L[B],K.indexOf(R)!==-1)return;if(!J&&(U&&U.options&&U.options.$skipDiscriminatorCheck||!1)){let B="";for(let N=0;N<L.length;++N){B+=(B.length===0?"":".")+L[N];const M=rg(Y,B,!1)||rg(Y,B+".$",!1);if(M&&typeof M!=="object")return}}return(U.selected?G:K).push(F),F}}});var Zb=w((Dk1,eg)=>{var QH1=function(Z){return!!Z&&(typeof Z==="object"||typeof Z==="function")&&typeof Z.then==="function"};eg.exports=QH1});var NK=w((Pk1,Yb)=>{var zH1=/\./g;Yb.exports=function Z(Y){if(Y.indexOf(".")===-1)return[Y];const X=Y.split(zH1),J=X.length,$=new Array(J);let W="";for(let G=0;G<J;++G)W+=W.length!==0?"."+X[G]:X[G],$[G]=W;return $}});var Jb=w((Tk1,Xb)=>{Xb.exports=function Z(Y,X,J){let $=X[0],W=J,G=Y;for(let K=0;K<X.length-1;++K){const Q=W.path($);if(Q&&Q.schema){let z=G.get($);if(W=Q.schema,$=X[K+1],Array.isArray(z)&&!isNaN($))z=z[$],$="";if(z==null)break;G=z}else $+=$.length?"."+X[K+1]:X[K+1]}return G}});var AK=w((Ik1,Wb)=>{var r1=function(Z,Y,X,J,$){if(typeof J==="object"&&J!=null&&$==null)$=J,J=void 0;if(X!=null){const W={isNew:X.isNew};if("defaults"in X.$__)W.defaults=X.$__.defaults;$=Object.assign(W,$)}if($!=null&&$.path!=null)this.$basePath=$.path;j5.call(this,Z,Y,J,$),delete this.$__.priorDoc},VH1=function(Z){let Y=Z.ownerDocument();function X(){Y.$removeListener("save",X),Y.$removeListener("deleteOne",X),Z.emit("deleteOne",Z),Z.constructor.emit("deleteOne",Z),Y=Z=null}Y.$on("save",X),Y.$on("deleteOne",X)},j5=o8(),HH1=H6(),FH1=n7().internalToObjectOptions,$b=import.meta.require("util"),UH1=G1();Wb.exports=r1;r1.prototype=Object.create(j5.prototype);Object.defineProperty(r1.prototype,"$isSubdocument",{configurable:!1,writable:!1,value:!0});Object.defineProperty(r1.prototype,"$isSingleNested",{configurable:!1,writable:!1,value:!0});/*!
 * ignore
 */r1.prototype.toBSON=function(){return this.toObject(FH1)};r1.prototype.save=async function Z(Y){if(Y=Y||{},!Y.suppressWarning)UH1.warn("mongoose: calling `save()` on a subdoc does **not** save the document to MongoDB, it only runs save middleware. Use `subdoc.save({ suppressWarning: true })` to hide this warning if you\'re sure this behavior is right for your app.");return new Promise((X,J)=>{this.$__save(($)=>{if($!=null)return J($);X(this)})})};r1.prototype.$__fullPath=function(Z){if(!this.$__.fullPath)this.ownerDocument();return Z?this.$__.fullPath+"."+Z:this.$__.fullPath};r1.prototype.$__pathRelativeToParent=function(Z){if(Z==null)return this.$basePath;return[this.$basePath,Z].join(".")};r1.prototype.$__save=function(Z){return HH1(()=>Z(null,this))};/*!
 * ignore
 */r1.prototype.$isValid=function(Z){const Y=this.$parent(),X=this.$__pathRelativeToParent(Z);if(Y!=null&&X!=null)return Y.$isValid(X);return j5.prototype.$isValid.call(this,Z)};/*!
 * ignore
 */r1.prototype.markModified=function(Z){j5.prototype.markModified.call(this,Z);const Y=this.$parent(),X=this.$__pathRelativeToParent(Z);if(Y==null||X==null)return;const J=this.$__pathRelativeToParent().replace(/\.$/,"");if(Y.isDirectModified(J)||this.isNew)return;this.$__parent.markModified(X,this)};/*!
 * ignore
 */r1.prototype.isModified=function(Z,Y){const X=this.$parent();if(X!=null){if(Array.isArray(Z)||typeof Z==="string")Z=Array.isArray(Z)?Z:Z.split(" "),Z=Z.map((J)=>this.$__pathRelativeToParent(J)).filter((J)=>J!=null);else if(!Z)Z=this.$__pathRelativeToParent();return X.$isModified(Z,Y)}return j5.prototype.isModified.call(this,Z,Y)};r1.prototype.$markValid=function(Z){j5.prototype.$markValid.call(this,Z);const Y=this.$parent(),X=this.$__pathRelativeToParent(Z);if(Y!=null&&X!=null)Y.$markValid(X)};/*!
 * ignore
 */r1.prototype.invalidate=function(Z,Y,X){j5.prototype.invalidate.call(this,Z,Y,X);const J=this.$parent(),$=this.$__pathRelativeToParent(Z);if(J!=null&&$!=null)J.invalidate($,Y,X);else if(Y.kind==="cast"||Y.name==="CastError"||$==null)throw Y;return this.ownerDocument().$__.validationError};/*!
 * ignore
 */r1.prototype.$ignore=function(Z){j5.prototype.$ignore.call(this,Z);const Y=this.$parent(),X=this.$__pathRelativeToParent(Z);if(Y!=null&&X!=null)Y.$ignore(X)};r1.prototype.ownerDocument=function(){if(this.$__.ownerDocument)return this.$__.ownerDocument;let Z=this;const Y=[],X=new Set([Z]);while(!0){if(typeof Z.$__pathRelativeToParent!=="function")break;Y.unshift(Z.$__pathRelativeToParent(void 0,!0));const J=Z.$parent();if(J==null)break;if(Z=J,X.has(Z))throw new Error("Infinite subdocument loop: subdoc with _id "+Z._id+" is a parent of itself");X.add(Z)}return this.$__.fullPath=Y.join("."),this.$__.ownerDocument=Z,this.$__.ownerDocument};/*!
 * ignore
 */r1.prototype.$__fullPathWithIndexes=function(){let Z=this;const Y=[],X=new Set([Z]);while(!0){if(typeof Z.$__pathRelativeToParent!=="function")break;Y.unshift(Z.$__pathRelativeToParent(void 0,!1));const J=Z.$parent();if(J==null)break;if(Z=J,X.has(Z))throw new Error("Infinite subdocument loop: subdoc with _id "+Z._id+" is a parent of itself");X.add(Z)}return Y.join(".")};r1.prototype.parent=function(){return this.$__parent};r1.prototype.$parent=r1.prototype.parent;r1.prototype.$__deleteOne=function(Z){if(Z==null)return;return Z(null,this)};r1.prototype.$__removeFromParent=function(){this.$__parent.set(this.$basePath,null)};r1.prototype.deleteOne=function(Z,Y){if(typeof Z==="function")Y=Z,Z=null;if(VH1(this),!Z||!Z.noop)this.$__removeFromParent();return this.$__deleteOne(Y)};/*!
 * ignore
 */r1.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.nested.populate("path")`, use `doc.populate("nested.path")`')};r1.prototype.inspect=function(){return this.toObject({transform:!1,virtuals:!1,flattenDecimals:!1})};if($b.inspect.custom)r1.prototype[$b.inspect.custom]=r1.prototype.inspect});var pY=w((jk1,Qb)=>{var e8=function(Z,Y,X,J,$){if(qH1.isMongooseDocumentArray(Y))this.__parentArray=Y,this[I3]=Y.$parent();else this.__parentArray=void 0,this[I3]=void 0;this.$setIndex($),this.$__parent=this[I3];let W;if(typeof X==="object"&&X!=null)W={isNew:!0,...X},X=void 0;else W={isNew:!0};Kb.call(this,Z,J,this[I3],X,W)};/*!
 * Module dependencies.
 */var Gb=import.meta.require("events").EventEmitter,Kb=AK(),qH1=G1(),I3=Z1().documentArrayParent;/*!
 * Inherit from Subdocument
 */e8.prototype=Object.create(Kb.prototype);e8.prototype.constructor=e8;Object.defineProperty(e8.prototype,"$isSingleNested",{configurable:!1,writable:!1,value:!1});Object.defineProperty(e8.prototype,"$isDocumentArrayElement",{configurable:!1,writable:!1,value:!0});for(let Z in Gb.prototype)e8[Z]=Gb.prototype[Z];/*!
 * ignore
 */e8.prototype.$setIndex=function(Z){if(this.__index=Z,this.$__!=null&&this.$__.validationError!=null){const Y=Object.keys(this.$__.validationError.errors);for(let X of Y)this.invalidate(X,this.$__.validationError.errors[X])}};/*!
 * ignore
 */e8.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.arr[0].populate("path")`, use `doc.populate("arr.0.path")`')};/*!
 * ignore
 */e8.prototype.$__removeFromParent=function(){const Z=this._doc._id;if(!Z)throw new Error("For your own good, Mongoose does not know how to remove an ArraySubdocument that has no _id");this.__parentArray.pull({_id:Z})};e8.prototype.$__fullPath=function(Z,Y){if(this.__index==null)return null;if(!this.$__.fullPath)this.ownerDocument();if(Y)return Z?this.$__.fullPath+"."+Z:this.$__.fullPath;return Z?this.$__.fullPath+"."+this.__index+"."+Z:this.$__.fullPath+"."+this.__index};e8.prototype.$__pathRelativeToParent=function(Z,Y){if(this.__index==null)return null;if(Y)return Z==null?this.__parentArray.$path():this.__parentArray.$path()+"."+Z;if(Z==null)return this.__parentArray.$path()+"."+this.__index;return this.__parentArray.$path()+"."+this.__index+"."+Z};e8.prototype.$parent=function(){return this[I3]};e8.prototype.parentArray=function(){return this.__parentArray};/*!
 * Module exports.
 */Qb.exports=e8});var TK=w((Ek1,Lb)=>{var RH1=function(Z,Y){if(!Y)return!1;for(let X of Z){if(X==null)return!1;const J=X.constructor;if(!(X instanceof EL)||J.modelName!==Y&&J.baseModelName!==Y)return!1}return!0},qb=function(Z,Y,X){if(typeof Y==="string"){if(Y.indexOf(".")===-1)return;Y=Ub.stringToParts(Y)}if(X=X||0,X>=Y.length)return;if(Z==null||typeof Z!=="object")return;if(qb(Z[Y[0]],Y,X+1),Z[Y[0]]!=null&&typeof Z[Y[0]]==="object"&&Object.keys(Z[Y[0]]).length===0)delete Z[Y[0]]},DK=function(Z,Y){const X=Z==null?null:Z[a7]&&Z[a7].caster&&Z[a7].caster.options&&Z[a7].caster.options.ref||null;if(Z.length===0&&Y.length!==0){if(RH1(Y,X))Z[E5].$populated(Z[C5],[],{[Vb]:Y[0].constructor})}},EL=o8(),TL=pY(),IL=W0(),zb=BL(),LH1=w0(),Hb=n7().internalToObjectOptions,Ub=P7(),Z6=G1(),jL=u8(),O4=Z1().arrayAtomicsSymbol,E5=Z1().arrayParentSymbol,C5=Z1().arrayPathSymbol,a7=Z1().arraySchemaSymbol,Vb=Z1().populateModelSymbol,wH1=Symbol("mongoose#Array#sliced"),Fb=Array.prototype.push;/*!
 * ignore
 */var PK={$__getAtomics(){const Z=[],Y=Object.keys(this[O4]||{});let X=Y.length;const J=Object.assign({},Hb,{_isNested:!0});if(X===0)return Z[0]=["$set",this.toObject(J)],Z;while(X--){const $=Y[X];let W=this[O4][$];if(Z6.isMongooseObject(W))W=W.toObject(J);else if(Array.isArray(W))W=this.toObject.call(W,J);else if(W!=null&&Array.isArray(W.$each))W.$each=this.toObject.call(W.$each,J);else if(W!=null&&typeof W.valueOf==="function")W=W.valueOf();if($==="$addToSet")W={$each:W};Z.push([$,W])}return Z},$atomics(){/*!
   * ignore
   */return this[O4]},$parent(){/*!
   * ignore
   */return this[E5]},$path(){/*!
   * ignore
   */return this[C5]},$shift(){this._registerAtomic("$pop",-1),this._markModified();const Z=this.__array;if(Z._shifted)return;return Z._shifted=!0,[].shift.call(Z)},$pop(){if(this._registerAtomic("$pop",1),this._markModified(),this._popped)return;return this._popped=!0,[].pop.call(this)},$schema(){/*!
   * ignore
   */return this[a7]},_cast(Z){let Y=!1,X;const J=this[E5];if(J)Y=J.$populated(this[C5],!0);if(Y&&Z!==null&&Z!==void 0){if(X=Y.options[Vb],X==null)throw new IL("No populated model found for path `"+this[C5]+"`. This is likely a bug in Mongoose, please report an issue on github.com/Automattic/mongoose.");if(Buffer.isBuffer(Z)||jL(Z,"ObjectId")||!Z6.isObject(Z))Z={_id:Z};if(!(Z.schema&&Z.schema.discriminatorMapping&&Z.schema.discriminatorMapping.key!==void 0))Z=new X(Z);return this[a7].caster.applySetters(Z,J,!0)}return this[a7].caster.applySetters(Z,J,!1)},_mapCast(Z,Y){return this._cast(Z,this.length+Y)},_markModified(Z){const Y=this[E5];let X;if(Y){if(X=this[C5],arguments.length)X=X+"."+Z;if(X!=null&&X.endsWith(".$"))return this;Y.markModified(X,arguments.length!==0?Z:Y)}return this},_registerAtomic(Z,Y){if(this[wH1])return;if(Z==="$set")return this[O4]={$set:Y},zb(this[E5],this[C5]),this._markModified(),this;const X=this[O4];if(Z==="$pop"&&!("$pop"in X)){const $=this;this[E5].once("save",function(){$._popped=$._shifted=null})}if(X.$set||Object.keys(X).length&&!(Z in X))return this[O4]={$set:this},this;let J;if(Z==="$pullAll"||Z==="$addToSet")X[Z]||(X[Z]=[]),X[Z]=X[Z].concat(Y);else if(Z==="$pullDocs"){const $=X.$pull||(X.$pull={});if(Y[0]instanceof TL)J=$.$or||($.$or=[]),Array.prototype.push.apply(J,Y.map((W)=>{return W.toObject({transform:(G,K)=>{if(W==null||W.$__==null)return K;return Object.keys(W.$__.activePaths.getStatePaths("default")).forEach((Q)=>{Ub.unset(Q,K),qb(K,Q)}),K},virtuals:!1})}));else J=$._id||($._id={$in:[]}),J.$in=J.$in.concat(Y)}else if(Z==="$push")if(X.$push=X.$push||{$each:[]},Y!=null&&Z6.hasUserDefinedProperty(Y,"$each"))X.$push=Y;else if(Y.length===1)X.$push.$each.push(Y[0]);else if(Y.length<1e4)X.$push.$each.push(...Y);else for(let $ of Y)X.$push.$each.push($);else X[Z]=Y;return this},addToSet(){DK(this,arguments);const Z=[].map.call(arguments,this._mapCast,this),Y=[];let X="";if(Z[0]instanceof TL)X="doc";else if(Z[0]instanceof Date)X="date";else if(jL(Z[0],"ObjectId"))X="ObjectId";const J=Z6.isMongooseArray(Z)?Z.__array:Z,$=Z6.isMongooseArray(this)?this.__array:this;return J.forEach(function(W){let G;const K=+W;switch(X){case"doc":G=this.some(function(Q){return Q.equals(W)});break;case"date":G=this.some(function(Q){return+Q===K});break;case"ObjectId":G=this.find((Q)=>Q.toString()===W.toString());break;default:G=~this.indexOf(W);break}if(!G)this._markModified(),$.push(W),this._registerAtomic("$addToSet",W),[].push.call(Y,W)},this),Y},hasAtomics(){if(!Z6.isPOJO(this[O4]))return 0;return Object.keys(this[O4]).length},includes(Z,Y){return this.indexOf(Z,Y)!==-1},indexOf(Z,Y){if(jL(Z,"ObjectId"))Z=Z.toString();Y=Y==null?0:Y;const X=this.length;for(let J=Y;J<X;++J)if(Z==this[J])return J;return-1},inspect(){return JSON.stringify(this)},nonAtomicPush(){const Z=[].map.call(arguments,this._mapCast,this);this._markModified();const Y=[].push.apply(this,Z);return this._registerAtomic("$set",this),Y},pop(){this._markModified();const Z=[].pop.call(this);return this._registerAtomic("$set",this),Z},pull(){const Z=[].map.call(arguments,($,W)=>this._cast($,W,{defaults:!1}),this),Y=this[E5].get(this[C5]);let X=Y.length,J;this._markModified();while(X--)if(J=Y[X],J instanceof EL){if(Z.some(function(W){return J.equals(W)}))[].splice.call(Y,X,1)}else if(~Y.indexOf.call(Z,J))[].splice.call(Y,X,1);if(Z[0]instanceof TL)this._registerAtomic("$pullDocs",Z.map(function($){const W=$.$__getValue("_id");if(W===void 0||$.$isDefault("_id"))return $;return W}));else this._registerAtomic("$pullAll",Z);if(zb(this[E5],this[C5])>0)this._registerAtomic("$set",this);return this},push(){let Z=arguments,Y=Z;const X=Z[0]!=null&&Z6.hasUserDefinedProperty(Z[0],"$each"),J=Z6.isMongooseArray(this)?this.__array:this;if(X)Y=Z[0],Z=Z[0].$each;if(this[a7]==null)return Fb.apply(this,Z);DK(this,Z),Z=[].map.call(Z,this._mapCast,this);let $;const W=this[O4];if(this._markModified(),X){if(Y.$each=Z,(W.$push&&W.$push.$each&&W.$push.$each.length||0)!==0&&W.$push.$position!=Y.$position)throw new IL("Cannot call `Array#push()` multiple times with different `$position`");if(Y.$position!=null)[].splice.apply(J,[Y.$position,0].concat(Z)),$=this.length;else $=[].push.apply(J,Z)}else{if((W.$push&&W.$push.$each&&W.$push.$each.length||0)!==0&&W.$push.$position!=null)throw new IL("Cannot call `Array#push()` multiple times with different `$position`");Y=Z,$=Fb.apply(J,Z)}return this._registerAtomic("$push",Y),$},remove(){return this.pull.apply(this,arguments)},set(Z,Y,X){const J=this.__array;if(X)return J[Z]=Y,this;const $=PK._cast.call(this,Y,Z);return PK._markModified.call(this,Z),J[Z]=$,this},shift(){const Z=Z6.isMongooseArray(this)?this.__array:this;this._markModified();const Y=[].shift.call(Z);return this._registerAtomic("$set",this),Y},sort(){const Z=Z6.isMongooseArray(this)?this.__array:this,Y=[].sort.apply(Z,arguments);return this._registerAtomic("$set",this),Y},splice(){let Z;const Y=Z6.isMongooseArray(this)?this.__array:this;if(this._markModified(),DK(this,Array.prototype.slice.call(arguments,2)),arguments.length){let X;if(this[a7]==null)X=arguments;else{X=[];for(let J=0;J<arguments.length;++J)X[J]=J<2?arguments[J]:this._cast(arguments[J],arguments[0]+(J-2))}Z=[].splice.apply(Y,X),this._registerAtomic("$set",this)}return Z},toBSON(){/*!
   * ignore
   */return this.toObject(Hb)},toObject(Z){const Y=Z6.isMongooseArray(this)?this.__array:this;if(Z&&Z.depopulate)return Z=LH1(Z),Z._isNested=!0,[].concat(Y).map(function(X){return X instanceof EL?X.toObject(Z):X});return[].concat(Y)},$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)},unshift(){DK(this,arguments);let Z;if(this[a7]==null)Z=arguments;else Z=[].map.call(arguments,this._cast,this);const Y=Z6.isMongooseArray(this)?this.__array:this;return this._markModified(),[].unshift.apply(Y,Z),this._registerAtomic("$set",this),this.length}};/*!
 * ignore
 *//*!
 * Minimize _just_ empty objects along the path chain specified
 * by `parts`, ignoring all other paths. Useful in cases where
 * you want to minimize after unsetting a path.
 *
 * #### Example:
 *
 *     const obj = { foo: { bar: { baz: {} } }, a: {} };
 *     _minimizePath(obj, 'foo.bar.baz');
 *     obj; // { a: {} }
 *//*!
 * ignore
 */var MH1=["filter","flat","flatMap","map","slice"];for(let Z of MH1){if(Array.prototype[Z]==null)continue;PK[Z]=function(){const Y=Z6.isMongooseArray(this)?this.__array:this,X=[].concat(Y);return X[Z].apply(X,arguments)}}Lb.exports=PK});var OL=w((Nb,Ab)=>{var DH1=function(Z,Y,X,J){let $;if(Array.isArray(Z)){const K=Z.length;if(K===0)$=new Array;else if(K===1)$=new Array(1),$[0]=Z[0];else if(K<1e4)$=new Array,Mb.apply($,Z);else{$=new Array;for(let Q=0;Q<K;++Q)Mb.call($,Z[Q])}}else $=[];const W={[IK]:{},[NH1]:void 0,[AH1]:Y,[Rb]:J,[wb]:void 0,isMongooseArray:!0,isMongooseArrayProxy:!0,__array:$};if(Z&&Z[IK]!=null)W[IK]=Z[IK];if(X!=null&&X instanceof BH1)W[wb]=X,W[Rb]=J||X.schema.path(Y);const G=new Proxy($,{get:function(K,Q){if(W.hasOwnProperty(Q))return W[Q];if(CL.hasOwnProperty(Q))return CL[Q];if(typeof Q==="string"&&Bb.test(Q)&&J?.$embeddedSchemaType!=null)return J.$embeddedSchemaType.applyGetters($[Q],X);return $[Q]},set:function(K,Q,z){if(typeof Q==="string"&&Bb.test(Q))CL.set.call(G,Q,z,!1);else if(W.hasOwnProperty(Q))W[Q]=z;else $[Q]=z;return!0}});return G};/*!
 * Module dependencies.
 */var BH1=o8(),CL=TK(),IK=Z1().arrayAtomicsSymbol,NH1=Z1().arrayAtomicsBackupSymbol,wb=Z1().arrayParentSymbol,AH1=Z1().arrayPathSymbol,Rb=Z1().arraySchemaSymbol,Mb=Array.prototype.push,Bb=/^\d+$/;/*!
 * Module exports.
 */Ab.exports=Nb=DH1});var kL=w((Ck1,Pb)=>{var Db=u8(),SL=U4();Pb.exports=function Z(Y){if(Y==null)return Y;if(Db(Y,"ObjectId"))return Y;if(Y._id){if(Db(Y._id,"ObjectId"))return Y._id;if(Y._id.toString instanceof Function)return new SL(Y._id.toString())}if(Y.toString instanceof Function)return new SL(Y.toString());return new SL(Y)}});var Eb=w((Ok1,jb)=>{var CK=function(Z){const Y=Z[OK];if(!Y||Y.$__.populated==null)return;const X=Object.keys(Y.$__.populated).filter((J)=>J.startsWith(Z[fL]+"."));for(let J of X){const $=J.slice((Z[fL]+".").length);if(!Array.isArray(Y.$__.populated[J].value))continue;Y.$__.populated[J].value=Z.map((W)=>W.$populated($))}},jK=TK(),PH1=o8(),TH1=kL(),Tb=j7(),IH1=n7().internalToObjectOptions,EK=G1(),_L=u8(),OK=Z1().arrayParentSymbol,fL=Z1().arrayPathSymbol,xL=Z1().arraySchemaSymbol,Ib=Z1().documentArrayParent,yL={toBSON(){/*!
   * ignore
   */return this.toObject(IH1)},getArrayParent(){/*!
   * ignore
   */return this[OK]},_cast(Z,Y,X){if(this[xL]==null)return Z;let J=this[xL].casterConstructor;if((J.$isMongooseDocumentArray?EK.isMongooseDocumentArray(Z):Z instanceof J)||Z&&Z.constructor&&Z.constructor.baseCasterConstructor===J){if(!(Z[Ib]&&Z.__parentArray))Z[Ib]=this[OK],Z.__parentArray=this;return Z.$setIndex(Y),Z}if(Z===void 0||Z===null)return null;if(Buffer.isBuffer(Z)||_L(Z,"ObjectId")||!EK.isObject(Z))Z={_id:Z};if(Z&&J.discriminators&&J.schema&&J.schema.options&&J.schema.options.discriminatorKey)if(typeof Z[J.schema.options.discriminatorKey]==="string"&&J.discriminators[Z[J.schema.options.discriminatorKey]])J=J.discriminators[Z[J.schema.options.discriminatorKey]];else{const G=Tb(J.discriminators,Z[J.schema.options.discriminatorKey]);if(G)J=G}if(J.$isMongooseDocumentArray)return J.cast(Z,this,void 0,void 0,Y);const W=new J(Z,this,X,void 0,Y);return W.isNew=!0,W},id(Z){let Y,X,J;try{Y=TH1(Z).toString()}catch($){Y=null}for(let $ of this){if(!$)continue;if(J=$.get("_id"),J===null||typeof J==="undefined")continue;else if(J instanceof PH1){if(X||(X=String(Z)),X==J._id)return $}else if(!_L(Z,"ObjectId")&&!_L(J,"ObjectId")){if(Z==J||EK.deepEqual(Z,J))return $}else if(Y==J)return $}return null},toObject(Z){return[].concat(this.map(function(Y){if(Y==null)return null;if(typeof Y.toObject!=="function")return Y;return Y.toObject(Z)}))},$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)},push(){const Z=jK.push.apply(this,arguments);return CK(this),Z},pull(){const Z=jK.pull.apply(this,arguments);return CK(this),Z},shift(){const Z=jK.shift.apply(this,arguments);return CK(this),Z},splice(){const Z=jK.splice.apply(this,arguments);return CK(this),Z},inspect(){return this.toObject()},create(Z){let Y=this[xL].casterConstructor;if(Z&&Y.discriminators&&Y.schema&&Y.schema.options&&Y.schema.options.discriminatorKey)if(typeof Z[Y.schema.options.discriminatorKey]==="string"&&Y.discriminators[Z[Y.schema.options.discriminatorKey]])Y=Y.discriminators[Z[Y.schema.options.discriminatorKey]];else{const X=Tb(Y.discriminators,Z[Y.schema.options.discriminatorKey]);if(X)Y=X}return new Y(Z,this)},notify(Z){/*!
   * ignore
   */const Y=this;return function X(J,$){$=$||Y;let W=$.length;while(W--){if($[W]==null)continue;switch(Z){case"save":J=Y[W];break;default:break}if(EK.isMongooseArray($[W]))X(J,$[W]);else if($[W])$[W].emit(Z,J)}}},set(Z,Y,X){const J=this.__array;if(X)return J[Z]=Y,this;const $=yL._cast.call(this,Y,Z);return yL._markModified.call(this,Z),J[Z]=$,this},_markModified(Z,Y){const X=this[OK];let J;if(X){if(J=this[fL],arguments.length)if(Y!=null){const $=Z.__index;J=J+"."+$+"."+Y}else J=J+"."+Z;if(J!=null&&J.endsWith(".$"))return this;X.markModified(J,arguments.length!==0?Z:X)}return this}};jb.exports=yL});var u9=w((Sk1,Ob)=>{var SH1=function(Z,Y,X){const J=[],$={[bL]:{},[EH1]:void 0,[hL]:Y,[m9]:void 0,[vL]:void 0};if(Array.isArray(Z)){if(Z[hL]===Y&&Z[vL]===X)$[bL]=Object.assign({},Z[bL]);Z.forEach((G)=>{CH1.call(J,G)})}if($[hL]=Y,$.__array=J,X&&X instanceof jH1){$[vL]=X,$[m9]=X.$__schema.path(Y);while($[m9]!=null&&$[m9].$isMongooseArray&&!$[m9].$isMongooseDocumentArray)$[m9]=$[m9].casterConstructor}const W=new Proxy(J,{get:function(G,K){if(K==="isMongooseArray"||K==="isMongooseArrayProxy"||K==="isMongooseDocumentArray"||K==="isMongooseDocumentArrayProxy")return!0;if($.hasOwnProperty(K))return $[K];if(gL.hasOwnProperty(K))return gL[K];if(Cb.hasOwnProperty(K))return Cb[K];return J[K]},set:function(G,K,Q){if(typeof K==="string"&&OH1.test(K))gL.set.call(W,K,Q,!1);else if($.hasOwnProperty(K))$[K]=Q;else J[K]=Q;return!0}});return W};/*!
 * Module dependencies.
 */var Cb=TK(),gL=Eb(),jH1=o8(),bL=Z1().arrayAtomicsSymbol,EH1=Z1().arrayAtomicsBackupSymbol,vL=Z1().arrayParentSymbol,hL=Z1().arrayPathSymbol,m9=Z1().arraySchemaSymbol,CH1=Array.prototype.push,OH1=/^\d+$/;/*!
 * Module exports.
 */Ob.exports=SH1});var o8=w((nb,ab)=>{var b=function(Z,Y,X,J){if(typeof X==="object"&&X!=null)J=X,X=J.skipId;if(J=Object.assign({},J),this.$__schema==null){const z=M1.isObject(Y)&&!Y.instanceOfSchema?new fH1(Y):Y;this.$__setSchema(z),Y=X,X=J,J=arguments[4]||{}}if(this.$__=new kH1,J.isNew!=null&&J.isNew!==!0)this.$isNew=J.isNew;if(J.priorDoc!=null)this.$__.priorDoc=J.priorDoc;if(X)this.$__.skipId=X;if(Z!=null&&typeof Z!=="object")throw new xH1(Z,"obj","Document");let $=!0;if(J.defaults!==void 0)this.$__.defaults=J.defaults,$=J.defaults;const W=this.$__schema;if(typeof Y==="boolean"||Y==="throw"){if(Y!==!0)this.$__.strictMode=Y;Y=void 0}else if(W.options.strict!==!0)this.$__.strictMode=W.options.strict;const G=W.requiredPaths(!0);for(let z of G)this.$__.activePaths.require(z);let K=null;if(M1.isPOJO(Y)&&Object.keys(Y).length>0)K=uH1(Y),this.$__.selected=Y,this.$__.exclude=K;const Q=K===!1&&Y?vb(Y):null;if(this._doc==null){if(this.$__buildDoc(Z,Y,X,K,Q,!1),$)lL(this,Y,K,Q,!0,null)}if(Z){if(this.$__original_set)this.$__original_set(Z,void 0,!0,J);else this.$set(Z,void 0,!0,J);if(Z instanceof b)this.$isNew=Z.$isNew}if(J.willInit&&$){if(J.skipDefaults)this.$__.skipDefaults=J.skipDefaults}else if($)lL(this,Y,K,Q,!1,J.skipDefaults);if(!this.$__.strictMode&&Z){const z=this;Object.keys(this._doc).forEach(function(F){if(!(F in W.tree)&&!(F in W.methods)&&!(F in W.virtuals)&&!F.startsWith("$"))gH1({prop:F,subprops:null,prototype:z})})}QF1(this)},YF1=function(Z,Y,X){if(Z==null)return;const J=Object.keys(X.$__schema.paths),$=J.length,W=Y.indexOf(".")===-1?[Y]:Y.split(".");for(let G=0;G<$;++G){let K="";const Q=J[G];if(!Q.startsWith(Y+"."))continue;const z=X.$__schema.paths[Q],H=z.splitPath().slice(W.length),F=H.length;if(z.defaultValue===void 0)continue;let U=Z;for(let V=0;V<F;++V){if(U==null)break;const q=H[V];if(V===F-1){if(U[q]!==void 0)break;try{const L=z.getDefault(X,!1);if(L!==void 0)U[q]=L}catch(L){X.invalidate(Y+"."+K,L);break}break}K+=(!K.length?"":".")+q,U[q]=U[q]||{},U=U[q]}}},cb=function(Z,Y,X,J,$){if($=$||"",Y.$__!=null)Y=Y._doc;const W=Object.keys(Y),G=W.length;let K,Q,z,H=0;const F=Z.$__.strictMode,U=Z.$__schema;while(H<G)V(H++);function V(q){if(z=W[q],z==="__proto__"||z==="constructor")return;if(Q=$+z,K=U.path(Q),U.$isRootDiscriminator&&!Z.$__isSelected(Q))return;if(!K&&M1.isPOJO(Y[z])){if(!X[z]){if(X[z]={},!F&&!(z in U.tree)&&!(z in U.methods)&&!(z in U.virtuals))Z[z]=X[z]}cb(Z,Y[z],X[z],J,Q+".")}else if(!K){if(X[z]=Y[z],!F&&!$)Z[z]=Y[z]}else{if(X.hasOwnProperty(z)&&Y[z]!==void 0)delete X[z];if(Y[z]===null)X[z]=K._castNullish(null);else if(Y[z]!==void 0){const L=Y[z].$__==null?null:Y[z].$__.wasPopulated;if(K&&!L)try{if(J&&J.setters)X[z]=K.applySetters(Y[z],Z,!1);else X[z]=K.cast(Y[z],Z,!0)}catch(R){Z.invalidate(R.path,new bb({path:R.path,message:R.message,type:"cast",value:R.value,reason:R}))}else X[z]=Y[z]}if(!Z.$isModified(Q))Z.$__.activePaths.init(Q)}}},XF1=function(Z,Y){if(!Array.isArray(Z))return!1;if(Z.length===0)return!1;for(let X of Z){if(!(X instanceof b))return!1;if(X.constructor.modelName==null)return!1;if(X.constructor.modelName!=Y&&X.constructor.baseModelName!=Y)return!1}return!0},lb=function(Z){if(Z==null)return!0;if(typeof Z!=="object"||Array.isArray(Z))return!1;for(let Y of Object.keys(Z))if(!lb(Z[Y]))return!1;return!0},JF1=function(Z){const Y=Object.keys(Z.$__.activePaths.getStatePaths("require"));let X=0;const J=Y.length;for(X=0;X<J;++X){const $=Y[X],W=Z.$__schema.path($);if(W!=null&&typeof W.originalRequiredValue==="function"){Z.$__.cachedRequired=Z.$__.cachedRequired||{};try{Z.$__.cachedRequired[$]=W.originalRequiredValue.call(Z,Z)}catch(G){Z.invalidate($,G)}}}},pb=function(Z,Y,X){const J={};JF1(Z);let $=new Set(Object.keys(Z.$__.activePaths.getStatePaths("require")).filter(function(H){if(!Z.$__isSelected(H)&&!Z.$isModified(H))return!1;if(Z.$__.cachedRequired!=null&&(H in Z.$__.cachedRequired))return Z.$__.cachedRequired[H];return!0}));Object.keys(Z.$__.activePaths.getStatePaths("init")).forEach(W),Object.keys(Z.$__.activePaths.getStatePaths("modify")).forEach(W),Object.keys(Z.$__.activePaths.getStatePaths("default")).forEach(W);function W(H){$.add(H)}const G=Z.$getAllSubdocs(),K=Z.modifiedPaths();for(let H of G)if(H.$basePath){const F=H.$isSingleNested?H.$__pathRelativeToParent():H.$__fullPathWithIndexes();for(let U of H.modifiedPaths())$.delete(F+"."+U);if(Z.$isModified(F,K)&&!Z.isDirectModified(F)&&!Z.$isDefault(F)){if($.add(F),Z.$__.pathsToScopes==null)Z.$__.pathsToScopes={};if(Z.$__.pathsToScopes[F]=H.$isDocumentArrayElement?H.__parentArray:H.$parent(),J[F]={skipSchemaValidators:!0},H.$isDocumentArrayElement&&H.__index!=null)J[F].index=H.__index}}for(let H of $){const F=Z.$__schema.path(H);if(!F)continue;if(F.$isMongooseDocumentArray){for(let U of $)if(U==null||U.startsWith(F.path+"."))$.delete(U)}if(!F.caster&&F.validators.length===0&&!F.$parentSchemaDocArray)$.delete(H);else if(F.$isMongooseArray&&!F.$isMongooseDocumentArray&&!F.$embeddedSchemaType.$isMongooseArray&&F.validators.length===0&&F.$embeddedSchemaType.validators.length===0)$.delete(H)}for(let H of $)if(Z.$__schema.singleNestedPaths.hasOwnProperty(H)){$.delete(H);continue}if(Array.isArray(Y))$=$F1($,Y);else if(Array.isArray(X))$=WF1($,X);for(let H of $){const F=Z.$__schema.path(H);if(!F)continue;if(!F.$isMongooseArray||!Array.isArray(F)&&F.$isMongooseDocumentArray&&!(F&&F.schemaOptions&&F.schemaOptions.required))continue;if(F.$isMongooseArray&&!F.$isMongooseDocumentArray&&!F.$embeddedSchemaType.$isMongooseArray&&F.$embeddedSchemaType.validators.length===0)continue;const U=Z.$__getValue(H);Q(U,$,H)}function Q(H,F,U){if(H!=null){const V=H.length;for(let q=0;q<V;++q)if(Array.isArray(H[q]))Q(H[q],F,U+"."+q);else F.add(U+"."+q)}}const z={skipArrays:!0};for(let H of $)if(Z.$__schema.nested[H]){let F=Z.$__getValue(H);if(nH1(F))F=F.toObject({transform:!1});const U=bH1(F,H,z,Z.$__schema);Object.keys(U).forEach(W)}for(let H of $){const F=Z.$__schema.path(H);if(!F)continue;if(F.$parentSchemaDocArray&&typeof F.$parentSchemaDocArray.path==="string")$.add(F.$parentSchemaDocArray.path);if(!F.$isSchemaMap)continue;const U=Z.$__getValue(H);if(U==null)continue;for(let V of U.keys())$.add(H+"."+V)}return $=Array.from($),[$,J]},$F1=function(Z,Y){const X=new Set(Y),J=new Map([]);for(let W of Y){if(W.indexOf(".")===-1)continue;const G=W.split(".");let K=G[0];for(let Q=1;Q<G.length;++Q)J.set(K,W),K=K+"."+G[Q]}const $=new Set;for(let W of Z)if(X.has(W))$.add(W);else if(J.has(W))$.add(J.get(W));return $},WF1=function(Z,Y){return Y=new Set(Y),Z=Array.from(Z).filter((X)=>!Y.has(X)),new Set(Z)},GF1=function(Z,Y){if(!Z.$__.validationError)return;const X=Object.keys(Z.$__.validationError.errors);for(let J of X)if(J.startsWith(Y+"."))delete Z.$__.validationError.errors[J];if(Object.keys(Z.$__.validationError.errors).length===0)Z.$__.validationError=null},KF1=function(Z,Y,X){const J=Y.schema;if(J==null)return;for(let $ of Object.keys(J.paths)){const W=J.paths[$];if(W.$immutableSetter==null)continue;const G=X==null?void 0:X.$__getValue($);W.$immutableSetter.call(Z,G)}},QF1=function(Z){const Y=Z.$__schema&&Z.$__schema.callQueue;if(!Y.length)return;for(let X of Y)if(X[0]!=="pre"&&X[0]!=="post"&&X[0]!=="on")Z[X[0]].apply(Z,X[1])},ib=function(Z,Y,X,J){const $=Z.$__schema,W=Object.keys($.virtuals);let G=W.length;const K=G;let Q,z,H=Z._doc,F;const U=typeof(J&&J.aliases)==="boolean"?J.aliases:!0;let V=null;if(Array.isArray(X.virtuals))V=new Set(X.virtuals);else if(X.virtuals&&X.virtuals.pathsToSkip){V=new Set(W);for(let q=0;q<X.virtuals.pathsToSkip.length;q++)if(V.has(X.virtuals.pathsToSkip[q]))V.delete(X.virtuals.pathsToSkip[q])}if(!H)return Y;X=X||{};for(G=0;G<K;++G){if(Q=W[G],V!=null&&!V.has(Q))continue;if(!U&&$.aliases.hasOwnProperty(Q))continue;if(z=Q,X.path!=null){if(!Q.startsWith(X.path+"."))continue;z=Q.substring(X.path.length+1)}const q=z.split(".");if(F=E7(Z.get(Q),X),F===void 0)continue;const L=q.length;H=Y;for(let R=0;R<L-1;++R)H[q[R]]=H[q[R]]||{},H=H[q[R]];H[q[L-1]]=F}return Y},zF1=function(Z,Y,X){const J=Z.$__schema,$=Object.keys(J.paths);let W=$.length,G,K=Z._doc,Q;if(!K)return Y;while(W--){G=$[W];const z=G.split("."),H=z.length,F=H-1;let U=Y,V;if(K=Z._doc,!Z.$__isSelected(G))continue;for(let q=0;q<H;++q){if(V=z[q],Q=K[V],q===F){const L=Z.$get(G);if(U[V]=E7(L,X),Array.isArray(U[V])&&J.paths[G].$embeddedSchemaType)for(let R=0;R<U[V].length;++R)U[V][R]=J.paths[G].$embeddedSchemaType.applyGetters(U[V][R],Z)}else if(Q==null){if(V in K)U[V]=Q;break}else U=U[V]||(U[V]={});K=Q}}return Y},HF1=function(Z,Y){const X=Z.$__schema,J=Object.keys(X.paths||{});if(!Z._doc)return Y;for(let W of J){const G=X.paths[W];if(typeof G.options.transform==="function"){const K=Z.$get(W);if(K===void 0)continue;const Q=G.options.transform.call(Z,K);gb(W,Q),M1.setValue(W,Q,Y)}else if(G.$embeddedSchemaType!=null&&typeof G.$embeddedSchemaType.options.transform==="function"){const K=Z.$get(W);if(K===void 0)continue;const Q=[].concat(K),z=G.$embeddedSchemaType.options.transform;for(let H=0;H<Q.length;++H){const F=z.call(Z,Q[H]);Q[H]=F,gb(W,F)}Y[W]=Q}}return Y},gb=function(Z,Y){if(iH1(Y))throw new Error("`transform` function must be synchronous, but the transform on path `"+Z+"` returned a promise.")},FF1=function(Z,Y){const X=Z.$__schema,J=Object.keys(X.paths||{});if(!Z._doc)return Y;let W=Z.$__.selected;if(W===void 0)W={},pH1.applyPaths(W,X);if(W==null||Object.keys(W).length===0)return Y;for(let G of J)if(W[G]!=null&&!W[G])delete Y[G];return Y};/*!
 * Module dependencies.
 */var dL=import.meta.require("events").EventEmitter,kH1=Vg(),Y6=n1(),Sb=h9(),_H1=VL(),xH1=LL(),kb=Mg(),fH1=nY(),cL=I5(),xK=g9(),bb=sq(),vb=RL(),lL=qK(),mL=BL(),E7=w0(),yH1=wK().compile,gH1=wK().defineKey,bH1=uY().flatten,vH1=z0(),uL=yg(),_b=bg(),hH1=hg(),mH1=MK(),xb=H6(),hb=dY(),uH1=cY(),pL=import.meta.require("util").inspect,mb=n7().internalToObjectOptions,dH1=DL(),cH1=PL(),lH1=P7(),pH1=lY(),M1=G1(),iH1=Zb(),kK=M1.deepEqual,nH1=M1.isMongooseObject,iY=Z1().arrayAtomicsBackupSymbol,n6=Z1().arrayAtomicsSymbol,aH1=Z1().documentArrayParent,sH1=Z1().documentIsModified,ub=Z1().documentModifiedPaths,iL=Z1().documentSchemaSymbol,rH1=Z1().getSymbol,fb=Z1().populateModelSymbol,tH1=Z1().scopeSymbol,oH1=v9().schemaMixedSymbol,db=NK(),eH1=Jb(),SK=Z1().sessionNewDocuments,_K,yb,d9,ZF1=M1.specialProperties;b.prototype.$isMongooseDocumentPrototype=!0;Object.defineProperty(b.prototype,"isNew",{get:function(){return this.$isNew},set:function(Z){this.$isNew=Z}});Object.defineProperty(b.prototype,"errors",{get:function(){return this.$errors},set:function(Z){this.$errors=Z}});/*!
 * ignore
 */b.prototype.$isNew=!0;/*!
 * Document exposes the NodeJS event emitter API, so you can use
 * `on`, `once`, etc.
 */M1.each(["on","once","emit","listeners","removeListener","setMaxListeners","removeAllListeners","addListener"],function(Z){b.prototype[Z]=function(){if(!this.$__.emitter){if(Z==="emit")return;this.$__.emitter=new dL,this.$__.emitter.setMaxListeners(0)}return this.$__.emitter[Z].apply(this.$__.emitter,arguments)},b.prototype[`\$${Z}`]=b.prototype[Z]});b.prototype.constructor=b;for(let Z in dL.prototype)b[Z]=dL.prototype[Z];b.prototype.$__schema;b.prototype.schema;Object.defineProperty(b.prototype,"$locals",{configurable:!1,enumerable:!1,get:function(){if(this.$__.locals==null)this.$__.locals={};return this.$__.locals},set:function(Z){this.$__.locals=Z}});b.prototype.isNew;Object.defineProperty(b.prototype,"$where",{configurable:!1,enumerable:!1,writable:!0});b.prototype.id;b.prototype.$errors;Object.defineProperty(b.prototype,"$op",{get:function(){return this.$__.op||null},set:function(Z){this.$__.op=Z}});/*!
 * ignore
 */b.prototype.$__buildDoc=function(Z,Y,X,J,$){const W={},G=Object.keys(this.$__schema.paths).filter((z)=>!z.includes("$*")),K=G.length;let Q=0;for(;Q<K;++Q){const z=G[Q];if(z==="_id"){if(X)continue;if(Z&&("_id"in Z))continue}const H=this.$__schema.paths[z].splitPath(),F=H.length,U=F-1;let V="",q=W,L=!1;for(let R=0;R<F;++R){const B=H[R];if(!V.length)V=B;else V+="."+B;if(J===!0){if(V in Y)break}else if(J===!1&&Y&&!L){if(V in Y)L=!0;else if(!$[V])break}if(R<U)q=q[B]||(q[B]={})}}this._doc=W};/*!
 * Converts to POJO when you use the document for querying
 */b.prototype.toBSON=function(){return this.toObject(mb)};b.prototype.init=function(Z,Y,X){if(typeof Y==="function")X=Y,Y=null;if(this.$__init(Z,Y),X)X(null,this);return this};b.prototype.$init=function(){return this.constructor.prototype.init.apply(this,arguments)};b.prototype.$__init=function(Z,Y){if(this.$isNew=!1,Y=Y||{},Z._id!=null&&Y.populated&&Y.populated.length){const J=String(Z._id);for(let $ of Y.populated){if($.isVirtual)this.$populated($.path,M1.getValue($.path,Z),$);else this.$populated($.path,$._docs[J],$);if($._childDocs==null)continue;for(let W of $._childDocs){if(W==null||W.$__==null)continue;W.$__.parent=this}$._childDocs=[]}}cb(this,Z,this._doc,Y),dH1(this,Y.populated),this.$emit("init",this),this.constructor.emit("init",this);const X=this.$__.exclude===!1&&this.$__.selected?vb(this.$__.selected):null;return lL(this,this.$__.selected,this.$__.exclude,X,!1,this.$__.skipDefaults),this};b.prototype.updateOne=function Z(Y,X,J){const $=this.constructor.updateOne({_id:this._id},Y,X),W=this;if($.pre(function G(K){W.constructor._middleware.execPre("updateOne",W,[W],K)}),$.post(function G(K){W.constructor._middleware.execPost("updateOne",W,[W],{},K)}),this.$session()!=null){if(!("session"in $.options))$.options.session=this.$session()}if(J!=null)return $.exec(J);return $};b.prototype.replaceOne=function Z(){const Y=[...arguments];return Y.unshift({_id:this._id}),this.constructor.replaceOne.apply(this.constructor,Y)};b.prototype.$session=function Z(Y){if(arguments.length===0){if(this.$__.session!=null&&this.$__.session.hasEnded)return this.$__.session=null,null;return this.$__.session}if(Y!=null&&Y.hasEnded)throw new Y6("Cannot set a document\'s session to a session that has ended. Make sure you haven\'t called `endSession()` on the session you are passing to `$session()`.");if(Y==null&&this.$__.session==null)return;if(this.$__.session=Y,!this.$isSubdocument){const X=this.$getAllSubdocs();for(let J of X)J.$session(Y)}return Y};b.prototype.$timestamps=function Z(Y){if(arguments.length===0){if(this.$__.timestamps!=null)return this.$__.timestamps;if(this.$__schema)return this.$__schema.options.timestamps;return}const X=this.$timestamps();if(Y!==X)this.$__.timestamps=Y;return this};b.prototype.overwrite=function Z(Y){const X=Array.from(new Set(Object.keys(this._doc).concat(Object.keys(Y))));for(let J of X){if(J==="_id")continue;if(this.$__schema.options.versionKey&&J===this.$__schema.options.versionKey)continue;if(this.$__schema.options.discriminatorKey&&J===this.$__schema.options.discriminatorKey)continue;this.$set(J,Y[J])}return this};b.prototype.$set=function Z(Y,X,J,$){if(M1.isPOJO(J))$=J,J=void 0;const W=$&&$.merge,G=J&&J!==!0,K=J===!0;let Q,z,H=0,F,U,V;const q=$&&("strict"in $);let L=q?$.strict:this.$__.strictMode;if(G)Q=this.$__.adhocPaths||(this.$__.adhocPaths={}),Q[Y]=this.$__schema.interpretAsType(Y,J,this.$__schema.options);if(Y==null)[Y,X]=[X,Y];else if(typeof Y!=="string"){if(Y instanceof b)if(Y.$__isNested)Y=Y.toObject();else Y=Y._doc;if(Y==null)[Y,X]=[X,Y];V=X?X+".":"",z=_b(this.$__schema,Y);const j=z.length,n=$&&$._skipMinimizeTopLevel||!1;if(j===0&&n){if(delete $._skipMinimizeTopLevel,X)this.$set(X,{});return this}$=Object.assign({},$,{_skipMinimizeTopLevel:!1});for(let C=0;C<j;++C){U=z[C];const S=V?V+U:U;F=this.$__schema.pathType(S);const a=Y[U];if(J===!0&&!V&&a!=null&&F==="nested"&&this._doc[U]!=null)delete this._doc[U];if(M1.isNonBuiltinObject(a)&&F==="nested"){this.$set(S,a,K,Object.assign({},$,{_skipMarkModified:!0})),YF1(this.$get(S),S,this);continue}else if(L){if(K&&a===void 0&&this.$get(S)!==void 0)continue;if(F==="adhocOrUndefined")F=uL(this,S,{typeOnly:!0});if(F==="real"||F==="virtual")this.$set(S,a,K,$);else if(F==="nested"&&a instanceof b)this.$set(S,a.toObject({transform:!1}),K,$);else if(L==="throw")if(F==="nested")throw new _H1(U,a);else throw new cL(U)}else if(a!==void 0)this.$set(S,a,K,$)}const c={},y=Object.keys(this.$__schema.tree);for(let C=0,S=y.length;C<S;++C)(U=y[C])&&this._doc.hasOwnProperty(U)&&(c[U]=void 0);return this._doc=Object.assign(c,this._doc),this}let R=this.$__schema.pathType(Y),B=null;if(R==="adhocOrUndefined")B=Y.indexOf(".")===-1?[Y]:Y.split("."),R=uL(this,B,{typeOnly:!0});if(R==="adhocOrUndefined"&&!q){if(B==null)B=Y.indexOf(".")===-1?[Y]:Y.split(".");const j=hH1(this.$__schema,B);if(j!==void 0)L=j}X=mH1(X);const N=(()=>{if(this.$__.priorDoc!=null)return this.$__.priorDoc.$__getValue(Y);if(K)return;return this.$__getValue(Y)})();if(R==="nested"&&X){if(typeof X==="object"&&X!=null){if(X.$__!=null)X=X.toObject(mb);if(X==null)return this.invalidate(Y,new Y6.CastError("Object",X,Y)),this;const j=this.$isModified(Y),n=this.$__.savedState!=null&&this.$__.savedState.hasOwnProperty(Y);if(this.$__.savedState!=null&&!this.$isNew&&!this.$__.savedState.hasOwnProperty(Y)){const y=this.$__getValue(Y);this.$__.savedState[Y]=y;const C=Object.keys(y||{});for(let S of C)this.$__.savedState[Y+"."+S]=y[S]}if(!W)this.$__setValue(Y,null),mL(this,Y);else return this.$set(X,Y,K);const c=_b(this.$__schema,X,Y);this.$__setValue(Y,{});for(let y of c)this.$set(Y+"."+y,X[y],K,{...$,_skipMarkModified:!0});if(N!=null&&(!j||n)&&M1.deepEqual(n?this.$__.savedState[Y]:N,X))this.unmarkModified(Y);else this.markModified(Y);return this}return this.invalidate(Y,new Y6.CastError("Object",X,Y)),this}let M;if(B==null)B=Y.indexOf(".")===-1?[Y]:Y.split(".");if(typeof this.$__schema.aliases[B[0]]==="string")B[0]=this.$__schema.aliases[B[0]];if(R==="adhocOrUndefined"&&L){let j;for(H=0;H<B.length;++H){const n=B.slice(0,H+1).join(".");if(H+1<B.length&&this.$__schema.pathType(n)==="virtual")return lH1.set(Y,X,this),this;if(M=this.$__schema.path(n),M==null)continue;if(M instanceof Sb){j=!0;break}else if(M.$isSchemaMap&&M.$__schemaType instanceof Sb&&H<B.length-1){j=!0,M=M.$__schemaType;break}}if(M==null)M=uL(this,Y);if(!j&&!M){if(L==="throw")throw new cL(Y);return this}}else if(R==="virtual")return M=this.$__schema.virtualpath(Y),M.applySetters(X,this),this;else M=this.$__path(Y);let D=this._doc,m="";for(H=0;H<B.length-1;++H)if(D=D[B[H]],m+=(m.length!==0?".":"")+B[H],!D){if(this.$set(m,{}),!this.$__isSelected(m))this.unmarkModified(m);D=this.$__getValue(m)}let O;if(B.length<=1)O=Y;else{const j=B.length;for(H=0;H<j;++H){const n=B.slice(0,H+1).join(".");if(this.$get(n,null,{getters:!1})===null){O=n;break}}if(!O)O=Y}if(!M){if(this.$__set(O,Y,$,K,B,M,X,N),R==="nested"&&X==null)mL(this,Y);return this}if(M.$isSingleNested||M.$isMongooseArray)GF1(this,Y);if(X!=null&&W&&M.$isSingleNested){if(X instanceof b)X=X.toObject({virtuals:!1,transform:!1});const j=Object.keys(X);for(let n of j)this.$set(Y+"."+n,X[n],K,$);return this}let E=!0;try{const j=(()=>{if(M.options==null)return!1;if(!(X instanceof b))return!1;const C=X.constructor,S=M.options.ref;if(S!=null&&(S===C.modelName||S===C.baseModelName))return!0;const a=M.options.refPath;if(a==null)return!1;const E1=X.get(a);return E1===C.modelName||E1===C.baseModelName})();let n=!1;if(j&&X instanceof b&&(!X.$__.wasPopulated||M1.deepEqual(X.$__.wasPopulated.value,X._id))){const C=M&&M.$isSingleNested?M.cast(X,this):X._id;this.$populated(Y,C,{[fb]:X.constructor}),X.$__.wasPopulated={value:C},n=!0}let c;const y=this.$__schema.options.typeKey;if(M.options&&Array.isArray(M.options[y])&&M.options[y].length&&M.options[y][0].ref&&XF1(X,M.options[y][0].ref)){c={[fb]:X[0].constructor},this.$populated(Y,X.map(function(C){return C._id}),c);for(let C of X)C.$__.wasPopulated={value:C._id};n=!0}if(!j||!M.$isSingleNested||!X.$__){let C=this;if(this.$__schema.singleNestedPaths[Y]!=null&&B.length>1)C=eH1(this,B,this.schema);if($!=null&&$.overwriteImmutable)X=M.applySetters(X,C,!1,N,{overwriteImmutable:!0});else X=M.applySetters(X,C,!1,N)}if(Array.isArray(X)&&!Array.isArray(M)&&M.$isMongooseDocumentArray&&X.length!==0&&X[0]!=null&&X[0].$__!=null&&X[0].$__.populated!=null){const C=Object.keys(X[0].$__.populated);for(let S of C)this.$populated(Y+"."+S,X.map((a)=>a.$populated(S)),X[0].$__.populated[S].options);n=!0}if(!n&&this.$__.populated){if(Array.isArray(X)&&this.$__.populated[Y]){for(let C=0;C<X.length;++C)if(X[C]instanceof b)X.set(C,X[C]._id,!0)}delete this.$__.populated[Y]}if(X!=null&&M.$isSingleNested)KF1(X,M,N);this.$markValid(Y)}catch(j){if(j instanceof Y6.StrictModeError&&j.isImmutableError)this.invalidate(Y,j);else if(j instanceof Y6.CastError){if(this.invalidate(j.path,j),j.$originalErrorPath)this.invalidate(Y,new Y6.CastError(M.instance,X,Y,j.$originalErrorPath))}else this.invalidate(Y,new Y6.CastError(M.instance,X,Y,j));E=!1}if(E){let j=null,n=null;if(!K){const C=this.$isSubdocument?this.ownerDocument():this;j=C.$__.savedState,n=this.$isSubdocument?this.$__.fullPath+"."+Y:Y,C.$__saveInitialState(n)}this.$__set(O,Y,$,K,B,M,X,N);const c=!!this.$__.session?.transaction,y=this.$__.session&&this.$__.session[SK]&&this.$__.session[SK].has(this)&&this.$__.session[SK].get(this).modifiedPaths&&!this.$__.session[SK].get(this).modifiedPaths.has(n);if(j!=null&&j.hasOwnProperty(n)&&(!c||y)&&M1.deepEqual(X,j[n]))this.unmarkModified(Y)}if(M.$isSingleNested&&(this.isDirectModified(Y)||X==null))mL(this,Y);return this};/*!
 * ignore
 */b.prototype.set=b.prototype.$set;b.prototype.$__shouldModify=function(Z,Y,X,J,$,W,G,K){if(X&&X._skipMarkModified)return!1;if(this.$isNew)return!0;if(Y in this.$__.activePaths.getStatePaths("modify"))return!0;if(G===void 0&&!this.$__isSelected(Y))return!0;if(G===void 0&&(Y in this.$__.activePaths.getStatePaths("default")))return!1;if(this.$populated(Y)&&G instanceof b&&kK(G._id,K))return!1;if(!kK(G,K!==void 0?K:M1.getValue(Y,this)))return!0;if(!J&&G!==null&&G!==void 0&&(Y in this.$__.activePaths.getStatePaths("default"))&&kK(G,W.getDefault(this,J)))return!0;return!1};b.prototype.$__set=function(Z,Y,X,J,$,W,G,K){if(d9=d9||pY(),this.$__shouldModify(Z,Y,X,J,$,W,G,K)){if(this.$__.primitiveAtomics&&this.$__.primitiveAtomics[Y]){if(delete this.$__.primitiveAtomics[Y],Object.keys(this.$__.primitiveAtomics).length===0)delete this.$__.primitiveAtomics}if(this.markModified(Z),yb||(yb=OL()),G&&M1.isMongooseArray(G)){if(G._registerAtomic("$set",G),M1.isMongooseDocumentArray(G))G.forEach(function(V){V&&V.__parentArray&&(V.__parentArray=G)})}}else if(Array.isArray(G)&&Array.isArray(K)&&M1.isMongooseArray(G)&&M1.isMongooseArray(K)){if(G[n6]=K[n6],G[iY]=K[iY],M1.isMongooseDocumentArray(G))G.forEach((V)=>{if(V!=null)V.$isNew=!1})}let z=this._doc,H=0;const F=$.length;let U="";for(;H<F;H++){const q=H+1===F;if(U+=U?"."+$[H]:$[H],ZF1.has($[H]))return;if(q)if(z instanceof Map)z.set($[H],G);else if(z.$isSingleNested)if(!($[H]in z))z[$[H]]=G,z._doc[$[H]]=G;else z._doc[$[H]]=G;else z[$[H]]=G;else{const L=z instanceof Map;let R=L?z.get($[H]):z[$[H]];if(M1.isPOJO(R))z=R;else if(R&&R instanceof d9)z=R;else if(R&&!Array.isArray(R)&&R.$isSingleNested)z=R;else if(R&&Array.isArray(R))z=R;else if(R==null){if(R={},L)z.set($[H],R);else z[$[H]]=R;z=R}else z=R}}};b.prototype.$__getValue=function(Z){return M1.getValue(Z,this._doc)};b.prototype.$inc=function Z(Y,X){if(X==null)X=1;if(Array.isArray(Y))return Y.forEach((Q)=>this.$inc(Q,X)),this;const J=this.$__path(Y);if(J==null){if(this.$__.strictMode==="throw")throw new cL(Y);else if(this.$__.strictMode===!0)return this}else if(J.instance!=="Number")return this.invalidate(Y,new Y6.CastError(J.instance,X,Y)),this;const $=this.$__getValue(Y)||0;let W=!1,G=null,K=X;try{X=J.cast(X),G=J.applySetters($+X,this),K=G-$,W=!0}catch(Q){this.invalidate(Y,new Y6.CastError("number",X,Y,Q))}if(W){if(this.$__.primitiveAtomics=this.$__.primitiveAtomics||{},this.$__.primitiveAtomics[Y]==null)this.$__.primitiveAtomics[Y]={$inc:K};else this.$__.primitiveAtomics[Y].$inc+=K;this.markModified(Y),this.$__setValue(Y,G)}return this};b.prototype.$__setValue=function(Z,Y){return M1.setValue(Z,Y,this._doc),this};b.prototype.get=function(Z,Y,X){let J;if(X==null)X={};if(Y)J=this.$__schema.interpretAsType(Z,Y,this.$__schema.options);const $=X.noDottedPath;let W=$?this.$__schema.paths[Z]:this.$__path(Z);if(W==null){if(W=this.$__schema.virtualpath(Z),W!=null)return W.applyGetters(void 0,this)}if($){let z=this._doc[Z];if(J)z=J.cast(z);if(W!=null&&X.getters!==!1)return W.applyGetters(z,this);return z}if(W!=null&&W.instance==="Mixed"){const z=this.$__schema.virtualpath(Z);if(z!=null)W=z}const G=Z.indexOf(".")!==-1;let K=this._doc;const Q=G?Z.split("."):[Z];if(typeof this.$__schema.aliases[Q[0]]==="string")Q[0]=this.$__schema.aliases[Q[0]];for(let z=0,H=Q.length;z<H;z++){if(K&&K._doc)K=K._doc;if(K==null)K=void 0;else if(K instanceof Map)K=K.get(Q[z],{getters:!1});else if(z===H-1)K=M1.getValue(Q[z],K);else K=K[Q[z]]}if(J)K=J.cast(K);if(W!=null&&X.getters!==!1)K=W.applyGetters(K,this);else if(this.$__schema.nested[Z]&&X.virtuals)return ib(this,E7(K)||{},{path:Z});return K};/*!
 * ignore
 */b.prototype[rH1]=b.prototype.get;b.prototype.$get=b.prototype.get;b.prototype.$__path=function(Z){const Y=this.$__.adhocPaths,X=Y&&Y.hasOwnProperty(Z)?Y[Z]:null;if(X)return X;return this.$__schema.path(Z)};b.prototype.markModified=function(Z,Y){if(this.$__saveInitialState(Z),this.$__.activePaths.modify(Z),Y!=null&&!this.$isSubdocument)this.$__.pathsToScopes=this.$__pathsToScopes||{},this.$__.pathsToScopes[Z]=Y};/*!
 * ignore
 */b.prototype.$__saveInitialState=function Z(Y){const X=this.$__.savedState,J=Y;if(X!=null){const $=J.indexOf("."),W=$===-1?J:J.slice(0,$);if(!X.hasOwnProperty(W))X[W]=E7(this.$__getValue(W))}};b.prototype.unmarkModified=function(Z){if(this.$__.activePaths.init(Z),this.$__.pathsToScopes!=null)delete this.$__.pathsToScopes[Z]};b.prototype.$ignore=function(Z){this.$__.activePaths.ignore(Z)};b.prototype.directModifiedPaths=function(){return Object.keys(this.$__.activePaths.getStatePaths("modify"))};b.prototype.$isEmpty=function(Z){const Y={minimize:!0,virtuals:!1,getters:!1,transform:!1};if(arguments.length!==0){const X=this.$get(Z);if(X==null)return!0;if(typeof X!=="object")return!1;if(M1.isPOJO(X))return lb(X);return Object.keys(X.toObject(Y)).length===0}return Object.keys(this.toObject(Y)).length===0};/*!
 * ignore
 */b.prototype.modifiedPaths=function(Z){Z=Z||{};const Y=Object.keys(this.$__.activePaths.getStatePaths("modify")),X=new Set;let J=0,$=0;const W=Y.length;for(J=0;J<W;++J){const G=Y[J],K=db(G),Q=K.length;for($=0;$<Q;++$)X.add(K[$]);if(!Z.includeChildren)continue;let z=0,H=this.$get(G);if(typeof H==="object"&&H!==null){if(H._doc)H=H._doc;const F=H.length;if(Array.isArray(H))for(z=0;z<F;++z){const U=G+"."+z;if(!X.has(U)){if(X.add(U),H[z]!=null&&H[z].$__){const V=H[z].modifiedPaths();let q=0;const L=V.length;for(q=0;q<L;++q)X.add(U+"."+V[q])}}}else{const U=Object.keys(H);let V=0;const q=U.length;for(V=0;V<q;++V)X.add(G+"."+U[V])}}}return Array.from(X)};b.prototype[ub]=b.prototype.modifiedPaths;b.prototype.isModified=function(Z,Y){if(Z){const X=this.$__.activePaths.states.modify;if(X==null)return!1;if(typeof Z==="string")Z=Z.indexOf(" ")===-1?[Z]:Z.split(" ");for(let G of Z)if(X[G]!=null)return!0;const J=Y||this[ub](),$=Z.some(function(G){return!!~J.indexOf(G)}),W=Object.keys(X);return $||Z.some(function(G){return W.some(function(K){return K===G||G.startsWith(K+".")})})}return this.$__.activePaths.some("modify")};b.prototype.$isModified=b.prototype.isModified;b.prototype[sH1]=b.prototype.isModified;b.prototype.$isDefault=function(Z){if(Z==null)return this.$__.activePaths.some("default");if(typeof Z==="string"&&Z.indexOf(" ")===-1)return this.$__.activePaths.getStatePaths("default").hasOwnProperty(Z);let Y=Z;if(!Array.isArray(Y))Y=Y.split(" ");return Y.some((X)=>this.$__.activePaths.getStatePaths("default").hasOwnProperty(X))};b.prototype.$isDeleted=function(Z){if(arguments.length===0)return!!this.$__.isDeleted;return this.$__.isDeleted=!!Z,this};b.prototype.isDirectModified=function(Z){if(Z==null)return this.$__.activePaths.some("modify");if(typeof Z==="string"&&Z.indexOf(" ")===-1)return this.$__.activePaths.getStatePaths("modify").hasOwnProperty(Z);let Y=Z;if(!Array.isArray(Y))Y=Y.split(" ");return Y.some((X)=>this.$__.activePaths.getStatePaths("modify").hasOwnProperty(X))};b.prototype.isInit=function(Z){if(Z==null)return this.$__.activePaths.some("init");if(typeof Z==="string"&&Z.indexOf(" ")===-1)return this.$__.activePaths.getStatePaths("init").hasOwnProperty(Z);let Y=Z;if(!Array.isArray(Y))Y=Y.split(" ");return Y.some((X)=>this.$__.activePaths.getStatePaths("init").hasOwnProperty(X))};b.prototype.isSelected=function Z(Y){if(this.$__.selected==null)return!0;if(!Y)return!1;if(Y==="_id")return this.$__.selected._id!==0;if(Y.indexOf(" ")!==-1)Y=Y.split(" ");if(Array.isArray(Y))return Y.some((W)=>this.$__isSelected(W));const X=Object.keys(this.$__.selected);let J=null;if(X.length===1&&X[0]==="_id")return this.$__.selected._id===0;for(let W of X){if(W==="_id")continue;if(!hb(this.$__.selected[W]))continue;J=!!this.$__.selected[W];break}if(J===null)return!0;if(Y in this.$__.selected)return J;const $=Y+".";for(let W of X){if(W==="_id")continue;if(W.startsWith($))return J||W!==$;if($.startsWith(W+"."))return J}return!J};b.prototype.$__isSelected=b.prototype.isSelected;b.prototype.isDirectSelected=function Z(Y){if(this.$__.selected==null)return!0;if(Y==="_id")return this.$__.selected._id!==0;if(Y.indexOf(" ")!==-1)Y=Y.split(" ");if(Array.isArray(Y))return Y.some(($)=>this.isDirectSelected($));const X=Object.keys(this.$__.selected);let J=null;if(X.length===1&&X[0]==="_id")return this.$__.selected._id===0;for(let $ of X){if($==="_id")continue;if(!hb(this.$__.selected[$]))continue;J=!!this.$__.selected[$];break}if(J===null)return!0;if(this.$__.selected.hasOwnProperty(Y))return J;return!J};b.prototype.validate=async function Z(Y,X){if(typeof Y==="function"||typeof X==="function"||typeof arguments[2]==="function")throw new Y6("Document.prototype.validate() no longer accepts a callback");let J;if(this.$op="validate",this.$isSubdocument!=null);else if(this.$__.validating)J=new kb(this,{parentStack:X&&X.parentStack,conflictStack:this.$__.validating.stack});else this.$__.validating=new kb(this,{parentStack:X&&X.parentStack});if(arguments.length===1){if(typeof arguments[0]==="object"&&!Array.isArray(arguments[0]))X=arguments[0],Y=null}if(X&&typeof X.pathsToSkip==="string"){const $=X.pathsToSkip.indexOf(" ")===-1;X.pathsToSkip=$?[X.pathsToSkip]:X.pathsToSkip.split(" ")}if(J!=null)throw J;return new Promise(($,W)=>{this.$__validate(Y,X,(G)=>{if(this.$op=null,this.$__.validating=null,G!=null)return W(G);$()})})};b.prototype.$validate=b.prototype.validate;/*!
 * ignore
 *//*!
 * ignore
 *//*!
 * ignore
 */b.prototype.$__validate=function(Z,Y,X){if(typeof Z==="function")X=Z,Y=null,Z=null;else if(typeof Y==="function")X=Y,Y=null;const J=Y&&typeof Y==="object"&&("validateModifiedOnly"in Y),$=Y&&Y.pathsToSkip||null;let W;if(J)W=!!Y.validateModifiedOnly;else W=this.$__schema.options.validateModifiedOnly;const G=this,K=()=>{let L=this.$__.validationError;if(this.$__.validationError=null,this.$__.validating=null,W&&L!=null){const R=Object.keys(L.errors);for(let B of R)if(!this.$isModified(B))delete L.errors[B];if(Object.keys(L.errors).length===0)L=void 0}if(this.$__.cachedRequired={},this.$emit("validate",G),this.constructor.emit("validate",G),L){for(let R in L.errors)if(!this[aH1]&&L.errors[R]instanceof Y6.CastError)this.invalidate(R,L.errors[R]);return L}},Q=pb(this,Z,$),z=W?Q[0].filter((L)=>this.$isModified(L)):Q[0],H=Q[1];if(typeof Z==="string")Z=Z.split(" ");if(z.length===0)return xb(function(){const L=K();if(L)return G.$__schema.s.hooks.execPost("validate:error",G,[G],{error:L},function(R){X(R)});X(null,G)});const F={};let U=0;for(let L of z)V(L);function V(L){if(L==null||F[L])return;F[L]=!0,U++,xb(function(){const R=G.$__schema.path(L);if(!R)return--U||q();if(!G.$isValid(L)){--U||q();return}if(R[oH1]!=null&&L!==R.path)return--U||q();let B=G.$__getValue(L),N;if(N=G.$populated(L))B=N;else if(B!=null&&B.$__!=null&&B.$__.wasPopulated)B=B._id;const M=G.$__.pathsToScopes!=null&&(L in G.$__.pathsToScopes)?G.$__.pathsToScopes[L]:G,D={...H[L],path:L,validateModifiedOnly:W};R.doValidate(B,function(m){if(m){if((R.$isSingleNested||R.$isArraySubdocument||R.$isMongooseDocumentArray)&&m instanceof xK)return--U||q();G.invalidate(L,m,void 0,!0)}--U||q()},M,D)})}function q(){const L=K();if(L)return G.$__schema.s.hooks.execPost("validate:error",G,[G],{error:L},function(R){X(R)});X(null,G)}};/*!
 * ignore
 *//*!
 * ignore
 */b.prototype.validateSync=function(Z,Y){const X=this;if(arguments.length===1&&typeof arguments[0]==="object"&&!Array.isArray(arguments[0]))Y=arguments[0],Z=null;const J=Y&&typeof Y==="object"&&("validateModifiedOnly"in Y);let $;if(J)$=!!Y.validateModifiedOnly;else $=this.$__schema.options.validateModifiedOnly;let W=Y&&Y.pathsToSkip;if(typeof Z==="string")Z=Z.indexOf(" ")===-1?[Z]:Z.split(" ");else if(typeof W==="string"&&W.indexOf(" ")!==-1)W=W.split(" ");const G=pb(this,Z,W),K=$?G[0].filter((F)=>this.$isModified(F)):G[0],Q=G[1],z={};for(let F=0,U=K.length;F<U;++F){const V=K[F];if(z[V])continue;z[V]=!0;const q=X.$__schema.path(V);if(!q)continue;if(!X.$isValid(V))continue;const L=X.$__getValue(V),R=q.doValidateSync(L,X,{skipSchemaValidators:Q[V],path:V,validateModifiedOnly:$});if(R){if((q.$isSingleNested||q.$isArraySubdocument||q.$isMongooseDocumentArray)&&R instanceof xK)continue;X.invalidate(V,R,void 0,!0)}}const H=X.$__.validationError;if(X.$__.validationError=void 0,X.$emit("validate",X),X.constructor.emit("validate",X),H){for(let F in H.errors)if(H.errors[F]instanceof Y6.CastError)X.invalidate(F,H.errors[F])}return H};b.prototype.invalidate=function(Z,Y,X,J){if(!this.$__.validationError)this.$__.validationError=new xK(this);if(this.$__.validationError.errors[Z])return;if(!Y||typeof Y==="string")Y=new bb({path:Z,message:Y,type:J||"user defined",value:X});if(this.$__.validationError===Y)return this.$__.validationError;return this.$__.validationError.addError(Z,Y),this.$__.validationError};b.prototype.$markValid=function(Z){if(!this.$__.validationError||!this.$__.validationError.errors[Z])return;if(delete this.$__.validationError.errors[Z],Object.keys(this.$__.validationError.errors).length===0)this.$__.validationError=null};/*!
 * ignore
 *//*!
 * ignore
 */b.prototype.$isValid=function(Z){if(this.$__.validationError==null||Object.keys(this.$__.validationError.errors).length===0)return!0;if(Z==null)return!1;if(Z.indexOf(" ")!==-1)Z=Z.split(" ");if(Array.isArray(Z))return Z.some((Y)=>this.$__.validationError.errors[Y]==null);return this.$__.validationError.errors[Z]==null};b.prototype.$__reset=function Z(){let Y=this;const X=this.$parent()===this?this.$getAllSubdocs():[],J=new Set;for(let W of X){const G=W.$__fullPathWithIndexes();if(W.$__reset(),this.isModified(G)||$(G))if(W.$isDocumentArrayElement)J.add(W.parentArray());else{const K=W.$parent();if(K===this)this.$__.activePaths.clearPath(W.$basePath);else if(K!=null&&K.$isSubdocument)K.$__reset()}}for(let W of J)this.$__.activePaths.clearPath(W.$path()),W[iY]=W[n6],W[n6]={};function $(W){W=W.indexOf(".")===-1?[W]:W.split(".");let G="";for(let K=0;K<W.length;++K)if(G+=(G.length?".":"")+W[K],Y.$__.activePaths[G]==="init")return!0;return!1}return this.$__dirty().forEach(function(W){const G=W.value;if(G&&G[n6])G[iY]=G[n6],G[n6]={}}),this.$__.backup={},this.$__.backup.activePaths={modify:Object.assign({},this.$__.activePaths.getStatePaths("modify")),default:Object.assign({},this.$__.activePaths.getStatePaths("default"))},this.$__.backup.validationError=this.$__.validationError,this.$__.backup.errors=this.$errors,this.$__.activePaths.clear("modify"),this.$__.activePaths.clear("default"),this.$__.validationError=void 0,this.$errors=void 0,Y=this,this.$__schema.requiredPaths().forEach(function(W){Y.$__.activePaths.require(W)}),this};/*!
 * ignore
 */b.prototype.$__undoReset=function Z(){if(this.$__.backup==null||this.$__.backup.activePaths==null)return;this.$__.activePaths.states.modify=this.$__.backup.activePaths.modify,this.$__.activePaths.states.default=this.$__.backup.activePaths.default,this.$__.validationError=this.$__.backup.validationError,this.$errors=this.$__.backup.errors;for(let Y of this.$__dirty()){const X=Y.value;if(X&&X[n6]&&X[iY])X[n6]=X[iY]}for(let Y of this.$getAllSubdocs())Y.$__undoReset()};b.prototype.$__dirty=function(){const Z=this;let Y=this.$__.activePaths.map("modify",function($){return{path:$,value:Z.$__getValue($),schema:Z.$__path($)}});Y=Y.concat(this.$__.activePaths.map("default",function($){if($==="_id"||Z.$__getValue($)==null)return;return{path:$,value:Z.$__getValue($),schema:Z.$__path($)}}));const X=new Map(Y.filter(($)=>$!=null).map(($)=>[$.path,$.value])),J=[];return Y.forEach(function($){if(!$)return;let W=null;const G=db($.path);for(let K=0;K<G.length-1;K++)if(X.has(G[K])){W=X.get(G[K]);break}if(W==null)J.push($);else if(W!=null&&W[n6]!=null&&W.hasAtomics())W[n6]={},W[n6].$set=W}),J};b.prototype.$__setSchema=function(Z){yH1(Z.tree,this,void 0,Z.options);for(let Y of Object.keys(Z.virtuals))Z.virtuals[Y]._applyDefaultGetters();if(Z.path("schema")==null)this.schema=Z;this.$__schema=Z,this[iL]=Z};b.prototype.$__getArrayPathsToValidate=function(){return _K||(_K=u9()),this.$__.activePaths.map("init","modify",function(Z){return this.$__getValue(Z)}.bind(this)).filter(function(Z){return Z&&Array.isArray(Z)&&M1.isMongooseDocumentArray(Z)&&Z.length}).reduce(function(Z,Y){return Z.concat(Y)},[]).filter(function(Z){return Z})};b.prototype.$getAllSubdocs=function(){_K||(_K=u9()),d9=d9||pY();function Z(X,J,$){let W=X,G=!1;if($)if(X instanceof b&&X[iL].paths[$])W=X._doc[$];else if(X instanceof b&&X[iL].nested[$])W=X._doc[$],G=!0;else W=X[$];if(W instanceof d9)J.push(W);else if(W instanceof Map)J=Array.from(W.keys()).reduce(function(K,Q){return Z(W.get(Q),K,null)},J);else if(W&&!Array.isArray(W)&&W.$isSingleNested)J=Object.keys(W._doc).reduce(function(K,Q){return Z(W,K,Q)},J),J.push(W);else if(W&&M1.isMongooseDocumentArray(W))W.forEach(function K(Q){if(!Q||!Q._doc)return;if(J=Object.keys(Q._doc).reduce(function(z,H){return Z(Q._doc,z,H)},J),Q instanceof d9)J.push(Q)});else if(G&&W!=null)for(let K of Object.keys(W))Z(W,J,K);return J}const Y=[];for(let X of Object.keys(this._doc))Z(this,Y,X);return Y};/*!
 * Runs queued functions
 *//*!
 * ignore
 */b.prototype.$__handleReject=function Z(Y){if(this.$listeners("error").length)this.$emit("error",Y);else if(this.constructor.listeners&&this.constructor.listeners("error").length)this.constructor.emit("error",Y)};b.prototype.$toObject=function(Z,Y){let X={transform:!0,flattenDecimals:!0};const J=Y?"toJSON":"toObject",$=this.constructor&&this.constructor.base&&this.constructor.base.options&&vH1(this.constructor.base.options,J)||{},W=this.$__schema&&this.$__schema.options||{};X=M1.options(X,E7($)),X=M1.options(X,E7(W[J]||{})),Z=M1.isPOJO(Z)?{...Z}:{},Z._calledWithOptions=Z._calledWithOptions||{...Z};let G;if(Z._calledWithOptions.minimize!=null)G=Z.minimize;else if(X.minimize!=null)G=X.minimize;else G=W.minimize;let K;if(Z._calledWithOptions.flattenMaps!=null)K=Z.flattenMaps;else if(X.flattenMaps!=null)K=X.flattenMaps;else K=W.flattenMaps;let Q;if(Z._calledWithOptions.flattenObjectIds!=null)Q=Z.flattenObjectIds;else if(X.flattenObjectIds!=null)Q=X.flattenObjectIds;else Q=W.flattenObjectIds;const z=Object.assign({},Z,{_isNested:!0,json:Y,minimize:G,flattenMaps:K,flattenObjectIds:Q,_seen:Z&&Z._seen||new Map});if(M1.hasUserDefinedProperty(Z,"getters"))z.getters=Z.getters;if(M1.hasUserDefinedProperty(Z,"virtuals"))z.virtuals=Z.virtuals;if((Z.depopulate||(Z._parentOptions&&Z._parentOptions.depopulate||!1))&&Z._isNested&&this.$__.wasPopulated)return E7(this.$__.wasPopulated.value||this._id,z);Z=M1.options(X,Z),Z._isNested=!0,Z.json=Y,Z.minimize=G,z._parentOptions=Z,z._skipSingleNestedGetters=!1;const F=Object.assign({},z);F._skipSingleNestedGetters=!0;const U=Z.transform;let V=E7(this._doc,z)||{};if(Z.getters){if(zF1(this,V,F),Z.minimize)V=cH1(V)||{}}if(Z.virtuals||Z.getters&&Z.virtuals!==!1)ib(this,V,F,Z);if(Z.versionKey===!1&&this.$__schema.options.versionKey)delete V[this.$__schema.options.versionKey];let q=Z.transform;if(q)HF1(this,V);if(Z.useProjection)FF1(this,V);if(q===!0||W.toObject&&q){const L=Z.json?W.toJSON:W.toObject;if(L)q=typeof Z.transform==="function"?Z.transform:L.transform}else Z.transform=U;if(typeof q==="function"){const L=q(this,V,Z);if(typeof L!=="undefined")V=L}return V};b.prototype.toObject=function(Z){return this.$toObject(Z)};/*!
 * Applies virtuals properties to `json`.
 *//*!
 * ignore
 */b.prototype.toJSON=function(Z){return this.$toObject(Z,!0)};/*!
 * ignore
 */b.prototype.ownerDocument=function(){return this};b.prototype.parent=function(){if(this.$isSubdocument||this.$__.wasPopulated)return this.$__.parent;return this};b.prototype.$parent=b.prototype.parent;b.prototype.inspect=function(Z){const Y=M1.isPOJO(Z);let X;if(Y)X=Z,X.minimize=!1;const J=this.toObject(X);if(J==null)return"MongooseDocument { "+J+" }";return J};if(pL.custom)b.prototype[pL.custom]=b.prototype.inspect;b.prototype.toString=function(){const Z=this.inspect();if(typeof Z==="string")return Z;return pL(Z)};b.prototype.equals=function(Z){if(!Z)return!1;const Y=this.$__getValue("_id"),X=Z.$__!=null?Z.$__getValue("_id"):Z;if(!Y&&!X)return kK(this,Z);return Y&&Y.equals?Y.equals(X):Y===X};b.prototype.populate=async function Z(){const Y={},X=[...arguments];if(typeof X[X.length-1]==="function")throw new Y6("Document.prototype.populate() no longer accepts a callback");if(X.length!==0){const W=M1.populate.apply(null,X);for(let G of W)Y[G.path]=G}const J=M1.object.vals(Y);let $=this.constructor;if(this.$__isNested){$=this.$__[tH1].constructor;const W=this.$__.nestedPath;J.forEach(function(G){G.path=W+"."+G.path})}if(this.$session()!=null){const W=this.$session();J.forEach((G)=>{if(G.options==null){G.options={session:W};return}if(!("session"in G.options))G.options.session=W})}return J.forEach((W)=>{W._localModel=$}),$.populate(this,J)};b.prototype.$getPopulatedDocs=function Z(){let Y=[];if(this.$__.populated!=null)Y=Y.concat(Object.keys(this.$__.populated));let X=[];for(let J of Y){const $=this.$get(J);if(Array.isArray($))X=X.concat($);else if($ instanceof b)X.push($)}return X};b.prototype.populated=function(Z,Y,X){if(Y==null||Y===!0){if(!this.$__.populated)return;if(typeof Z!=="string")return;const $=Z.endsWith(".$*")?Z.replace(/\.\$\*$/,""):Z,W=this.$__.populated[$];if(W)return Y===!0?W:W.value;return}this.$__.populated||(this.$__.populated={}),this.$__.populated[Z]={value:Y,options:X};const J=Z.split(".");for(let $=0;$<J.length-1;++$){const W=J.slice(0,$+1).join("."),G=this.$get(W);if(G!=null&&G.$__!=null&&this.$populated(W)){const K=J.slice($+1).join(".");G.$populated(K,Y,X);break}}return Y};b.prototype.$populated=b.prototype.populated;b.prototype.$assertPopulated=function Z(Y,X){if(Array.isArray(Y))return Y.forEach((J)=>this.$assertPopulated(J,X)),this;if(arguments.length>1)this.$set(X);if(!this.$populated(Y))throw new Y6(`Expected path "${Y}" to be populated`);return this};b.prototype.depopulate=function(Z){if(typeof Z==="string")Z=Z.indexOf(" ")===-1?[Z]:Z.split(" ");let Y;const X=this.$$populatedVirtuals?Object.keys(this.$$populatedVirtuals):[],J=this.$__&&this.$__.populated||{};if(arguments.length===0){for(let W of X)delete this.$$populatedVirtuals[W],delete this._doc[W],delete J[W];const $=Object.keys(J);for(let W of $){if(Y=this.$populated(W),!Y)continue;delete J[W],M1.setValue(W,Y,this._doc)}return this}for(let $ of Z)if(Y=this.$populated($),delete J[$],X.indexOf($)!==-1)delete this.$$populatedVirtuals[$],delete this._doc[$];else if(Y)M1.setValue($,Y,this._doc);return this};b.prototype.$__fullPath=function(Z){return Z||""};b.prototype.getChanges=function(){const Z=this.$__delta();return Z?Z[1]:{}};b.prototype.$clone=function(){const Y=new this.constructor;if(Y.$isNew=this.$isNew,this._doc)Y._doc=E7(this._doc);if(this.$__){const J=new this.$__.constructor;for(let $ of Object.getOwnPropertyNames(this.$__)){if($==="activePaths")continue;J[$]=E7(this.$__[$])}Object.assign(J.activePaths,E7({...this.$__.activePaths})),Y.$__=J}return Y};/*!
 * Module exports.
 */b.ValidationError=xK;ab.exports=nb=b});var G1=w((IF1)=>{var NF1=function(Z){if(Array.isArray(Z.populate)){const J=[];Z.populate.forEach(function($){if(sL.test($.path)){const W=Object.assign({},$);W.path.split(rL).forEach(function(K){W.path=K,J.push(IF1.populate(W)[0])})}else J.push(IF1.populate($)[0])}),Z.populate=IF1.populate(J)}else if(Z.populate!=null&&typeof Z.populate==="object")Z.populate=IF1.populate(Z.populate);const Y=[],X=sL.test(Z.path)?Z.path.split(rL):[Z.path];if(Z.options!=null)Z.options=aL(Z.options);for(let J of X)Y.push(new Yv(Object.assign({},Z,{path:J})));return Y},DF1=function(Z,Y){let X=Z?._doc||Z;if(X!=null&&X.isMongooseArrayProxy)X=X.__array;return X instanceof Map?X.get(Y,AF1):X[Y]};/*!
 * Module dependencies.
 */var UF1=S6().UUID,VF1=iy(),Zv=P7(),qF1=U4(),Yv=$g(),aL=w0(),LF1=H6(),wF1=o4(),Xv=QW(),Jv=Wg(),O5=u8(),RF1=CH(),j3=KJ(),MF1=FK(),BF1=UK(),E3=G9(),{trustedSymbol:sY}=dZ(),nL;IF1.specialProperties=E3;IF1.isMongooseArray=Xv.isMongooseArray;IF1.isMongooseDocumentArray=Jv.isMongooseDocumentArray;IF1.registerMongooseArray=Xv.registerMongooseArray;IF1.registerMongooseDocumentArray=Jv.registerMongooseDocumentArray;var sL=/\s/,rL=/\s+/;IF1.toCollectionName=function(Z,Y){if(Z==="system.profile")return Z;if(Z==="system.indexes")return Z;if(typeof Y==="function")return Y(Z);return Z};IF1.deepEqual=function Z(Y,X){if(Y===X)return!0;if(typeof Y!=="object"||typeof X!=="object")return Y===X;if(Y instanceof Date&&X instanceof Date)return Y.getTime()===X.getTime();if(O5(Y,"ObjectId")&&O5(X,"ObjectId")||O5(Y,"Decimal128")&&O5(X,"Decimal128"))return Y.toString()===X.toString();if(Y instanceof RegExp&&X instanceof RegExp)return Y.source===X.source&&Y.ignoreCase===X.ignoreCase&&Y.multiline===X.multiline&&Y.global===X.global&&Y.dotAll===X.dotAll&&Y.unicode===X.unicode&&Y.sticky===X.sticky&&Y.hasIndices===X.hasIndices;if(Y==null||X==null)return!1;if(Y.prototype!==X.prototype)return!1;if(Y instanceof Map||X instanceof Map){if(!(Y instanceof Map)||!(X instanceof Map))return!1;return Z(Array.from(Y.keys()),Array.from(X.keys()))&&Z(Array.from(Y.values()),Array.from(X.values()))}if(Y instanceof Number&&X instanceof Number)return Y.valueOf()===X.valueOf();if(Buffer.isBuffer(Y))return IF1.buffer.areEqual(Y,X);if(Array.isArray(Y)||Array.isArray(X)){if(!Array.isArray(Y)||!Array.isArray(X))return!1;const G=Y.length;if(G!==X.length)return!1;for(let K=0;K<G;++K)if(!Z(Y[K],X[K]))return!1;return!0}if(Y.$__!=null)Y=Y._doc;else if(j3(Y))Y=Y.toObject();if(X.$__!=null)X=X._doc;else if(j3(X))X=X.toObject();const J=Object.keys(Y),$=Object.keys(X),W=J.length;if(W!==$.length)return!1;for(let G=W-1;G>=0;G--)if(J[G]!==$[G])return!1;for(let G of J)if(!Z(Y[G],X[G]))return!1;return!0};IF1.last=function(Z){if(Z.length>0)return Z[Z.length-1];return};/*!
 * ignore
 */IF1.promiseOrCallback=MF1;/*!
 * ignore
 */IF1.cloneArrays=function Z(Y){if(!Array.isArray(Y))return Y;return Y.map((X)=>IF1.cloneArrays(X))};/*!
 * ignore
 */IF1.omit=function Z(Y,X){if(X==null)return Object.assign({},Y);if(!Array.isArray(X))X=[X];const J=Object.assign({},Y);for(let $ of X)delete J[$];return J};IF1.options=function(Z,Y){const X=Object.keys(Z);let J=X.length,$;Y=Y||{};while(J--)if($=X[J],!($ in Y))Y[$]=Z[$];return Y};IF1.merge=function Z(Y,X,J,$){J=J||{};const W=Object.keys(X);let G=0;const K=W.length;let Q;if(X[sY])Y[sY]=X[sY];$=$||"";const z=J.omitNested||{};while(G<K){if(Q=W[G++],J.omit&&J.omit[Q])continue;if(z[$])continue;if(E3.has(Q))continue;if(Y[Q]==null)Y[Q]=X[Q];else if(IF1.isObject(X[Q])){if(!IF1.isObject(Y[Q]))Y[Q]={};if(X[Q]!=null){if(J.isDiscriminatorSchemaMerge&&(X[Q].$isSingleNested&&Y[Q].$isMongooseDocumentArray)||X[Q].$isMongooseDocumentArray&&Y[Q].$isSingleNested)continue;else if(X[Q].instanceOfSchema){if(Y[Q].instanceOfSchema)BF1(Y[Q],X[Q].clone(),J.isDiscriminatorSchemaMerge);else Y[Q]=X[Q].clone();continue}else if(O5(X[Q],"ObjectId")){Y[Q]=new qF1(X[Q]);continue}}Z(Y[Q],X[Q],J,$?$+"."+Q:Q)}else if(J.overwrite)Y[Q]=X[Q]}};IF1.toObject=function Z(Y){nL||(nL=o8());let X;if(Y==null)return Y;if(Y instanceof nL)return Y.toObject();if(Array.isArray(Y)){X=[];for(let J of Y)X.push(Z(J));return X}if(IF1.isPOJO(Y)){if(X={},Y[sY])X[sY]=Y[sY];for(let J of Object.keys(Y)){if(E3.has(J))continue;X[J]=Z(Y[J])}return X}return Y};IF1.isObject=wF1;IF1.isPOJO=OH();IF1.isNonBuiltinObject=function Z(Y){return typeof Y==="object"&&!IF1.isNativeObject(Y)&&!IF1.isMongooseType(Y)&&!(Y instanceof UF1)&&Y!=null};IF1.isNativeObject=function(Z){return Array.isArray(Z)||Z instanceof Date||Z instanceof Boolean||Z instanceof Number||Z instanceof String};IF1.isEmptyObject=function(Z){return Z!=null&&typeof Z==="object"&&Object.keys(Z).length===0};IF1.hasKey=function Z(Y,X){const J=Object.keys(Y);for(let $ of J){if($===X)return!0;if(IF1.isPOJO(Y[$])&&IF1.hasKey(Y[$],X))return!0}return!1};IF1.tick=function Z(Y){if(typeof Y!=="function")return;return function(){try{Y.apply(this,arguments)}catch(X){LF1(function(){throw X})}}};IF1.isMongooseType=function(Z){return O5(Z,"ObjectId")||O5(Z,"Decimal128")||Z instanceof Buffer};IF1.isMongooseObject=j3;IF1.expires=function Z(Y){if(!(Y&&Y.constructor.name==="Object"))return;if(!("expires"in Y))return;Y.expireAfterSeconds=typeof Y.expires!=="string"?Y.expires:Math.round(VF1(Y.expires)/1000),delete Y.expires};IF1.populate=function Z(Y,X,J,$,W,G,K,Q){let z=null;if(arguments.length===1){if(Y instanceof Yv)return Y._docs=[],Y._childDocs=[],[Y];if(Array.isArray(Y))return H(Y).map((U)=>IF1.populate(U)[0]);if(IF1.isObject(Y))z=Object.assign({},Y);else z={path:Y}}else if(typeof J==="object")z={path:Y,select:X,match:J,options:$};else z={path:Y,select:X,model:J,match:$,options:W,populate:G,justOne:K,count:Q};if(typeof z.path!=="string")throw new TypeError("utils.populate: invalid path. Expected string. Got typeof `"+typeof Y+"`");return NF1(z);function H(F){const U=[];return F.forEach(function(V){if(sL.test(V.path))V.path.split(rL).forEach(function(L){const R=Object.assign({},V);R.path=L,U.push(R)});else U.push(V)}),U}};IF1.getValue=function(Z,Y,X){return Zv.get(Z,Y,DF1,X)};/*!
 * ignore
 */var AF1=Object.freeze({getters:!1});IF1.setValue=function(Z,Y,X,J,$){Zv.set(Z,Y,X,"_doc",J,$)};IF1.object={};IF1.object.vals=function Z(Y){const X=Object.keys(Y);let J=X.length;const $=[];while(J--)$.push(Y[X[J]]);return $};IF1.object.shallowCopy=IF1.options;var PF1=Object.prototype.hasOwnProperty;IF1.object.hasOwnProperty=function(Z,Y){return PF1.call(Z,Y)};IF1.isNullOrUndefined=function(Z){return Z===null||Z===void 0};/*!
 * ignore
 */IF1.array={};IF1.array.flatten=function Z(Y,X,J){return J||(J=[]),Y.forEach(function($){if(Array.isArray($))Z($,X,J);else if(!X||X($))J.push($)}),J};/*!
 * ignore
 */var TF1=Object.prototype.hasOwnProperty;IF1.hasUserDefinedProperty=function(Z,Y){if(Z==null)return!1;if(Array.isArray(Y)){for(let X of Y)if(IF1.hasUserDefinedProperty(Z,X))return!0;return!1}if(TF1.call(Z,Y))return!0;if(typeof Z==="object"&&(Y in Z)){const X=Z[Y];return X!==Object.prototype[Y]&&X!==Array.prototype[Y]}return!1};/*!
 * ignore
 */var sb=Math.pow(2,32)-1;IF1.isArrayIndex=function(Z){if(typeof Z==="number")return Z>=0&&Z<=sb;if(typeof Z==="string"){if(!/^\d+$/.test(Z))return!1;return Z=+Z,Z>=0&&Z<=sb}return!1};IF1.array.unique=function(Z){const Y=new Set,X=new Set,J=[];for(let $ of Z)if(typeof $==="number"||typeof $==="string"||$==null){if(Y.has($))continue;J.push($),Y.add($)}else if(O5($,"ObjectId")){if(X.has($.toString()))continue;J.push($),X.add($.toString())}else J.push($);return J};IF1.buffer={};IF1.buffer.areEqual=function(Z,Y){if(!Buffer.isBuffer(Z))return!1;if(!Buffer.isBuffer(Y))return!1;if(Z.length!==Y.length)return!1;for(let X=0,J=Z.length;X<J;++X)if(Z[X]!==Y[X])return!1;return!0};IF1.getFunctionName=RF1;IF1.decorate=function(Z,Y){for(let X in Y){if(E3.has(X))continue;Z[X]=Y[X]}};IF1.mergeClone=function(Z,Y){if(j3(Y))Y=Y.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});const X=Object.keys(Y),J=X.length;let $=0,W;while($<J){if(W=X[$++],E3.has(W))continue;if(typeof Z[W]==="undefined")Z[W]=aL(Y[W],{transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});else{let G=Y[W];if(G!=null&&G.valueOf&&!(G instanceof Date))G=G.valueOf();if(IF1.isObject(G)){let K=G;if(j3(G)&&!G.isMongooseBuffer)K=K.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});if(G.isMongooseBuffer)K=Buffer.from(K);IF1.mergeClone(Z[W],K)}else Z[W]=aL(G,{flattenDecimals:!1})}}};IF1.each=function(Z,Y){for(let X of Z)Y(X)};IF1.renameObjKey=function(Z,Y,X){return Object.keys(Z).reduce(($,W)=>{if(W===Y)$[X]=Z[Y];else $[W]=Z[W];return $},{})};/*!
 * ignore
 */IF1.getOption=function(Z){const Y=Array.prototype.slice.call(arguments,1);for(let X of Y){if(X==null)continue;if(X[Z]!=null)return X[Z]}return null};/*!
 * ignore
 */IF1.noop=function(){};IF1.errorToPOJO=function Z(Y){if(!(Y instanceof Error))throw new Error("`error` must be `instanceof Error`.");const J={};for(let $ of Object.getOwnPropertyNames(Y))J[$]=Y[$];return J};/*!
 * ignore
 */IF1.warn=function Z(Y){return process.emitWarning(Y,{code:"MONGOOSE"})};IF1.injectTimestampsOption=function Z(Y,X){if(X==null)return;Y.timestamps=X}});var i0=w((bK,qv)=>{var B1=function(Z,Y,X){this[KU1]=!0,this.path=Z,this.instance=X,this.validators=[],this.getters=this.constructor.hasOwnProperty("getters")?this.constructor.getters.slice():[],this.setters=this.constructor.hasOwnProperty("setters")?this.constructor.setters.slice():[],this.splitPath(),Y=Y||{};const J=this.constructor.defaultOptions||{},$=Object.keys(J);for(let K of $)if(J.hasOwnProperty(K)&&!Object.prototype.hasOwnProperty.call(Y,K))Y[K]=J[K];if(Y.select==null)delete Y.select;const W=this.OptionsConstructor||Fv;if(this.options=new W(Y),this._index=null,c9.hasUserDefinedProperty(this.options,"immutable"))this.$immutable=this.options.immutable,oL(this);const G=Object.keys(this.options);for(let K of G){if(K==="cast"){if(Array.isArray(this.options[K]))this.castFunction.apply(this,this.options[K]);else this.castFunction(this.options[K]);continue}if(c9.hasUserDefinedProperty(this.options,K)&&typeof this[K]==="function"){if(K==="index"&&this._index){if(Y.index===!1){const H=this._index;if(typeof H==="object"&&H!=null){if(H.unique)throw new Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true');if(H.sparse)throw new Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}this._index=!1}continue}const Q=Y[K];if(K==="default"){this.default(Q);continue}const z=Array.isArray(Q)?Q:[Q];this[K].apply(this,z)}}Object.defineProperty(this,"$$context",{enumerable:!1,configurable:!1,writable:!0,value:null})},Qv=function(Z,Y){if(Z!==void 0&&!Z){const J=new(Y.ErrorConstructor||Zw)(Y);return J[Uv]=!0,J}},zv=function(Z,Y){return this.castForQuery(null,Z,Y)},FU1=function(Z,Y){const X=this;if(!Array.isArray(Z))return[this.castForQuery(null,Z,Y)];return Z.map(function(J){return X.castForQuery(null,J,Y)})},Hv=function(Z,Y){const X=this;if(!Array.isArray(Z))return[this.castForQuery(null,Z,Y)];return Z.map(function(J){if(Array.isArray(J)&&J.length===0)return J;return X.castForQuery(null,J,Y)})};/*!
 * Module dependencies.
 */var C3=n1(),Fv=N6(),$U1=zK(),WU1=HL(),gK=w0(),oL=my(),GU1=dy(),eL=ly(),Kv=H6(),KU1=Z1().schemaTypeSymbol,c9=G1(),Uv=Z1().validatorErrorSymbol,QU1=Z1().documentIsModified,zU1=Z1().populateModelSymbol,Vv=C3.CastError,Zw=C3.ValidatorError,HU1={_skipMarkModified:!0};B1.prototype.OptionsConstructor=Fv;B1.prototype.path;B1.prototype.validators;B1.prototype.isRequired;B1.prototype.splitPath=function(){if(this._presplitPath!=null)return this._presplitPath;if(this.path==null)return;return this._presplitPath=this.path.indexOf(".")===-1?[this.path]:this.path.split("."),this._presplitPath};B1.cast=function Z(Y){if(arguments.length===0)return this._cast;if(Y===!1)Y=(X)=>X;return this._cast=Y,this._cast};B1.prototype.castFunction=function Z(Y,X){if(arguments.length===0)return this._castFunction;if(Y===!1)Y=this.constructor._defaultCaster||((J)=>J);if(typeof Y==="string")return this._castErrorMessage=Y,this._castFunction;if(Y!=null)this._castFunction=Y;if(X!=null)this._castErrorMessage=X;return this._castFunction};B1.prototype.cast=function Z(){throw new Error("Base SchemaType class does not implement a `cast()` function")};B1.set=function Z(Y,X){if(!this.hasOwnProperty("defaultOptions"))this.defaultOptions=Object.assign({},this.defaultOptions);this.defaultOptions[Y]=X};B1.get=function(Z){this.getters=this.hasOwnProperty("getters")?this.getters:[],this.getters.push(Z)};B1.prototype.default=function(Z){if(arguments.length===1){if(Z===void 0){this.defaultValue=void 0;return}if(Z!=null&&Z.instanceOfSchema)throw new C3("Cannot set default value of path `"+this.path+"` to a mongoose Schema instance.");return this.defaultValue=Z,this.defaultValue}else if(arguments.length>1)this.defaultValue=[...arguments];return this.defaultValue};B1.prototype.index=function(Z){return this._index=Z,c9.expires(this._index),this};B1.prototype.unique=function(Z){if(this._index===!1){if(!Z)return;throw new Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true')}if(!this.options.hasOwnProperty("index")&&Z===!1)return this;if(this._index==null||this._index===!0)this._index={};else if(typeof this._index==="string")this._index={type:this._index};return this._index.unique=Z,this};B1.prototype.text=function(Z){if(this._index===!1){if(!Z)return this;throw new Error('Path "'+this.path+'" may not have `index` set to false and `text` set to true')}if(!this.options.hasOwnProperty("index")&&Z===!1)return this;if(this._index===null||this._index===void 0||typeof this._index==="boolean")this._index={};else if(typeof this._index==="string")this._index={type:this._index};return this._index.text=Z,this};B1.prototype.sparse=function(Z){if(this._index===!1){if(!Z)return this;throw new Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}if(!this.options.hasOwnProperty("index")&&Z===!1)return this;if(this._index==null||typeof this._index==="boolean")this._index={};else if(typeof this._index==="string")this._index={type:this._index};return this._index.sparse=Z,this};B1.prototype.immutable=function(Z){return this.$immutable=Z,oL(this),this};B1.prototype.transform=function(Z){return this.options.transform=Z,this};B1.prototype.set=function(Z){if(typeof Z!=="function")throw new TypeError("A setter must be a function.");return this.setters.push(Z),this};B1.prototype.get=function(Z){if(typeof Z!=="function")throw new TypeError("A getter must be a function.");return this.getters.push(Z),this};B1.prototype.validate=function(Z,Y,X){if(typeof Z==="function"||Z&&c9.getFunctionName(Z.constructor)==="RegExp"){let G;if(typeof Y==="function")G={validator:Z,message:Y},G.type=X||"user defined";else if(Y instanceof Object&&!X){if(G=eL(Y)?Object.assign({},Y):gK(Y),!G.message)G.message=G.msg;G.validator=Z,G.type=G.type||"user defined"}else{if(Y==null)Y=C3.messages.general.default;if(!X)X="user defined";G={message:Y,type:X,validator:Z}}return this.validators.push(G),this}let J,$,W;for(J=0,$=arguments.length;J<$;J++){if(W=arguments[J],!c9.isPOJO(W)){const G="Invalid validator. Received ("+typeof W+") "+W+". See https://mongoosejs.com/docs/api/schematype.html#SchemaType.prototype.validate()";throw new Error(G)}this.validate(W.validator,W)}return this};B1.prototype.required=function(Z,Y){let X={};if(arguments.length>0&&Z==null)return this.validators=this.validators.filter(function(W){return W.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;if(typeof Z==="object")X=Z,Y=X.message||Y,Z=Z.isRequired;if(Z===!1)return this.validators=this.validators.filter(function(W){return W.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;const J=this;if(this.isRequired=!0,this.requiredValidator=function(W){const G=this&&this.$__&&this.$__.cachedRequired;if(G!=null&&!this.$__isSelected(J.path)&&!this[QU1](J.path))return!0;if(G!=null&&(J.path in G)){const K=G[J.path]?J.checkRequired(W,this):!0;return delete G[J.path],K}else if(typeof Z==="function")return Z.apply(this)?J.checkRequired(W,this):!0;return J.checkRequired(W,this)},this.originalRequiredValue=Z,typeof Z==="string")Y=Z,Z=void 0;const $=Y||C3.messages.general.required;return this.validators.unshift(Object.assign({},X,{validator:this.requiredValidator,message:$,type:"required"})),this};B1.prototype.ref=function(Z){return this.options.ref=Z,this};B1.prototype.getDefault=function(Z,Y,X){let J;if(typeof this.defaultValue==="function")if(this.defaultValue===Date.now||this.defaultValue===Array||this.defaultValue.name.toLowerCase()==="objectid")J=this.defaultValue.call(Z);else J=this.defaultValue.call(Z,Z);else J=this.defaultValue;if(J!==null&&J!==void 0){if(typeof J==="object"&&(!this.options||!this.options.shared))J=gK(J);if(X&&X.skipCast)return this._applySetters(J,Z);const $=this.applySetters(J,Z,Y,void 0,HU1);if($&&!Array.isArray($)&&$.$isSingleNested)$.$__parent=Z;return $}return J};B1.prototype._applySetters=function(Z,Y,X,J,$){let W=Z;if(X)return W;const G=this.setters;for(let K=G.length-1;K>=0;K--)W=G[K].call(Y,W,J,this,$);return W};/*!
 * ignore
 */B1.prototype._castNullish=function Z(Y){return Y};B1.prototype.applySetters=function(Z,Y,X,J,$){let W=this._applySetters(Z,Y,X,J,$);if(W==null)return this._castNullish(W);return W=this.cast(W,Y,X,J,$),W};B1.prototype.applyGetters=function(Z,Y){let X=Z;const J=this.getters,$=J.length;if($===0)return X;for(let W=0;W<$;++W)X=J[W].call(Y,X,this);return X};B1.prototype.select=function Z(Y){return this.selected=!!Y,this};B1.prototype.doValidate=function(Z,Y,X,J){let $=!1;const W=this.path,G=this.validators.filter((z)=>typeof z==="object"&&z!==null);let K=G.length;if(!K)return Y(null);for(let z=0,H=G.length;z<H;++z){if($)break;const F=G[z],U=F.validator;let V;const q=eL(F)?Object.assign({},F):gK(F);if(q.path=J&&J.path?J.path:W,q.fullPath=this.$fullPath,q.value=Z,U instanceof RegExp){Q(U.test(Z),q,X);continue}if(typeof U!=="function")continue;if(Z===void 0&&U!==this.requiredValidator){Q(!0,q,X);continue}try{if(q.propsParameter)V=U.call(X,Z,q);else V=U.call(X,Z)}catch(L){if(V=!1,q.reason=L,L.message)q.message=L.message}if(V!=null&&typeof V.then==="function")V.then(function(L){Q(L,q,X)},function(L){q.reason=L,q.message=L.message,V=!1,Q(V,q,X)});else Q(V,q,X)}function Q(z,H,F){if($)return;if(z===void 0||z){if(--K<=0)Kv(function(){Y(null)})}else $=new(H.ErrorConstructor||Zw)(H,F),$[Uv]=!0,Kv(function(){Y($)})}};B1.prototype.doValidateSync=function(Z,Y,X){const J=this.path;if(!this.validators.length)return null;let W=this.validators;if(Z===void 0)if(this.validators.length!==0&&this.validators[0].type==="required")W=[this.validators[0]];else return null;let G=null,K=0;const Q=W.length;for(K=0;K<Q;++K){const z=W[K];if(z===null||typeof z!=="object")continue;const H=z.validator,F=eL(z)?Object.assign({},z):gK(z);F.path=X&&X.path?X.path:J,F.fullPath=this.$fullPath,F.value=Z;let U=!1;if(GU1(H))continue;if(H instanceof RegExp){G=Qv(H.test(Z),F);continue}if(typeof H!=="function")continue;try{if(F.propsParameter)U=H.call(Y,Z,F);else U=H.call(Y,Z)}catch(V){U=!1,F.reason=V}if(U!=null&&typeof U.then==="function")continue;if(G=Qv(U,F),G)break}return G};B1._isRef=function(Z,Y,X,J){let $=J&&Z.options&&(Z.options.ref||Z.options.refPath);if(!$&&X&&X.$__!=null){const W=X.$__fullPath(Z.path,!0),G=X.ownerDocument();$=W!=null&&G.$populated(W)||X.$populated(Z.path)}if($){if(Y==null)return!0;if(!Buffer.isBuffer(Y)&&Y._bsontype!=="Binary"&&c9.isObject(Y))return!0;return J}return!1};/*!
 * ignore
 */B1.prototype._castRef=function Z(Y,X,J){if(Y==null)return Y;if(Y.$__!=null)return Y.$__.wasPopulated=Y.$__.wasPopulated||!0,Y;if(Buffer.isBuffer(Y)||!c9.isObject(Y)){if(J)return Y;throw new Vv(this.instance,Y,this.path,null,this)}const $=X.$__fullPath(this.path,!0),G=X.ownerDocument().$populated($,!0);let K=Y;if(!X.$__.populated||!X.$__.populated[$]||!X.$__.populated[$].options||!X.$__.populated[$].options.options||!X.$__.populated[$].options.options.lean)K=new G.options[zU1](Y),K.$__.wasPopulated=!0;return K};/*!
 * ignore
 *//*!
 * ignore
 *//*!
 * ignore
 */B1.prototype.$conditionalHandlers={$all:FU1,$eq:zv,$in:Hv,$ne:zv,$nin:Hv,$exists:$U1,$type:WU1};B1.prototype.castForQuery=function(Z,Y,X){let J;if(Z!=null){if(J=this.$conditionalHandlers[Z],!J)throw new Error("Can\'t use "+Z);return J.call(this,Y,X)}return this.applySetters(Y,X)};B1.checkRequired=function(Z){if(arguments.length!==0)this._checkRequired=Z;return this._checkRequired};B1.prototype.checkRequired=function(Z){return Z!=null};B1.prototype.clone=function(){const Z=Object.assign({},this.options),Y=new this.constructor(this.path,Z,this.instance);if(Y.validators=this.validators.slice(),this.requiredValidator!==void 0)Y.requiredValidator=this.requiredValidator;if(this.defaultValue!==void 0)Y.defaultValue=this.defaultValue;if(this.$immutable!==void 0&&this.options.immutable===void 0)Y.$immutable=this.$immutable,oL(Y);if(this._index!==void 0)Y._index=this._index;if(this.selected!==void 0)Y.selected=this.selected;if(this.isRequired!==void 0)Y.isRequired=this.isRequired;if(this.originalRequiredValue!==void 0)Y.originalRequiredValue=this.originalRequiredValue;return Y.getters=this.getters.slice(),Y.setters=this.setters.slice(),Y};/*!
 * Module exports.
 */qv.exports=bK=B1;bK.CastError=Vv;bK.ValidatorError=Zw});var wv=w((_k1,Lv)=>{var C7=i6();class A6{constructor(Z){if(Object.assign(this,Z),Z!=null&&Z.options!=null)this.options=Object.assign({},Z.options)}}Object.defineProperty(A6.prototype,"ref",C7);Object.defineProperty(A6.prototype,"refPath",C7);Object.defineProperty(A6.prototype,"localField",C7);Object.defineProperty(A6.prototype,"foreignField",C7);Object.defineProperty(A6.prototype,"justOne",C7);Object.defineProperty(A6.prototype,"count",C7);Object.defineProperty(A6.prototype,"match",C7);Object.defineProperty(A6.prototype,"options",C7);Object.defineProperty(A6.prototype,"skip",C7);Object.defineProperty(A6.prototype,"limit",C7);Object.defineProperty(A6.prototype,"perDocumentLimit",C7);Lv.exports=A6});var Yw=w((xk1,Rv)=>{var S5=function(Z,Y){this.path=Y,this.getters=[],this.setters=[],this.options=Object.assign({},Z)},UU1=G1();S5.prototype._applyDefaultGetters=function(){if(this.getters.length>0||this.setters.length>0)return;const Y="$"+this.path;this.getters.push(function(){return this.$locals[Y]}),this.setters.push(function(X){this.$locals[Y]=X})};/*!
 * ignore
 */S5.prototype.clone=function(){const Z=new S5(this.options,this.path);return Z.getters=[].concat(this.getters),Z.setters=[].concat(this.setters),Z};S5.prototype.get=function(Z){return this.getters.push(Z),this};S5.prototype.set=function(Z){return this.setters.push(Z),this};S5.prototype.applyGetters=function(Z,Y){if(UU1.hasUserDefinedProperty(this.options,["ref","refPath"])&&Y.$$populatedVirtuals&&Y.$$populatedVirtuals.hasOwnProperty(this.path))Z=Y.$$populatedVirtuals[this.path];let X=Z;for(let J of this.getters)X=J.call(Y,X,this,Y);return X};S5.prototype.applySetters=function(Z,Y){let X=Z;for(let J of this.setters)X=J.call(Y,X,this,Y);return X};/*!
 * exports
 */Rv.exports=S5});var Xw=w((fk1,Mv)=>{Mv.exports=function Z(Y){const X={_id:{auto:!0}};X._id[Y.options.typeKey]="ObjectId",Y.add(X)}});var Jw=w((yk1,Bv)=>{Bv.exports=function Z(Y,X){const J=Y.discriminatorMapping&&Y.discriminatorMapping.value;if(J&&!("sparse"in X)){const $=Y.options.discriminatorKey;X.partialFilterExpression=X.partialFilterExpression||{},X.partialFilterExpression[$]=J}return X}});var Av=w((gk1,Nv)=>{var $w=z0(),VU1=o4(),qU1=Jw();Nv.exports=function Z(Y){let X=[];const J=new WeakMap,$=Y.constructor.indexTypes,W=new Map;return G(Y),X;function G(Q,z,H){if(J.has(Q))return;J.set(Q,!0),z=z||"";const F=Object.keys(Q.paths);for(let U of F){const V=Q.paths[U];if(H!=null&&H.paths[U])continue;if(V.$isMongooseDocumentArray||V.$isSingleNested){if($w(V,"options.excludeIndexes")!==!0&&$w(V,"schemaOptions.excludeIndexes")!==!0&&$w(V,"schema.options.excludeIndexes")!==!0)G(V.schema,z+U+".");if(V.schema.discriminators!=null){const L=V.schema.discriminators,R=Object.keys(L);for(let B of R)G(L[B],z+U+".",V.schema)}if(V.$isMongooseDocumentArray)continue}const q=V._index||V.caster&&V.caster._index;if(q!==!1&&q!==null&&q!==void 0){const L={},R=VU1(q),B=R?q:{},N=typeof q==="string"?q:R?q.type:!1;if(N&&$.indexOf(N)!==-1)L[z+U]=N;else if(B.text)L[z+U]="text",delete B.text;else{let D=!1;if(q==="descending"||q==="desc")D=!0;else if(q==="ascending"||q==="asc")D=!1;else D=Number(q)===-1;L[z+U]=D?-1:1}if(delete B.type,!("background"in B))B.background=!0;if(Q.options.autoIndex!=null)B._autoIndex=Q.options.autoIndex;const M=B&&B.name;if(typeof M==="string")if(W.has(M))Object.assign(W.get(M),L);else X.push([L,B]),W.set(M,L);else X.push([L,B]),W.set(M,L)}}if(J.delete(Q),z)K(Q,z);else Q._indexes.forEach(function(U){const V=U[1];if(!("background"in V))V.background=!0;qU1(Q,V)}),X=X.concat(Q._indexes)}function K(Q,z){const H=Q._indexes,F=H.length;for(let U=0;U<F;++U){const V=H[U][0],q=H[U][1],L=Object.keys(V),R=L.length,B={};for(let M=0;M<R;++M){const D=L[M];B[z+D]=V[D]}const N=Object.assign({},q);if(q!=null&&q.partialFilterExpression!=null){N.partialFilterExpression={};const M=q.partialFilterExpression;for(let D of Object.keys(M))N.partialFilterExpression[z+D]=M[D]}X.push([B,N])}}}});var Ww=w((bk1,Dv)=>{Dv.exports=function Z(Y){switch(Y){case"p":Y="primary";break;case"pp":Y="primaryPreferred";break;case"s":Y="secondary";break;case"sp":Y="secondaryPreferred";break;case"n":Y="nearest";break}return Y}});var Tv=w((vk1,Pv)=>{var LU1=function(){if(this._id!=null)return String(this._id);return null};/*!
 * ignore
 */Pv.exports=function Z(Y){if(!(!Y.paths.id&&Y.paths._id&&Y.options.id))return Y;if(Y.aliases&&Y.aliases.id)return Y;return Y.virtual("id").get(LU1),Y}});var O3=w((hk1,Iv)=>{Iv.exports=function Z(Y){return Y.replace(/\.\$(\[[^\]]*\])?(?=\.)/g,".0").replace(/\.\$(\[[^\]]*\])?$/g,".0")}});var Gw=w((mk1,jv)=>{var wU1=function(Z,Y){if(Z==null)return null;if(typeof Z==="boolean")return Y;if(typeof Z[Y]==="boolean")return Z[Y]?Y:null;if(!(Y in Z))return Y;return Z[Y]};jv.exports=wU1;/*!
 * ignore
 */});var Qw=w((uk1,Ev)=>{var l9=function(Z,Y,X){if(Y==null)return;if(Object.keys(Y).some((K)=>K[0]==="$")){if(Y.$push)G(Y.$push);if(Y.$addToSet)G(Y.$addToSet);if(Y.$set!=null){const K=Object.keys(Y.$set);for(let Q of K)Kw(X,Q,Y.$set,Z)}if(Y.$setOnInsert!=null){const K=Object.keys(Y.$setOnInsert);for(let Q of K)Kw(X,Q,Y.$setOnInsert,Z)}}const W=Object.keys(Y).filter((K)=>K[0]!=="$");for(let K of W)Kw(X,K,Y,Z);function G(K){for(let Q of Object.keys(K)){const z=X.path(Q.replace(/\.\$\./i,".").replace(/.\$$/,""));if(K[Q]&&z&&z.$isMongooseDocumentArray&&z.schema.options.timestamps){const H=z.schema.options.timestamps,F=S4(H,"createdAt"),U=S4(H,"updatedAt");if(K[Q].$each)K[Q].$each.forEach(function(V){if(U!=null)V[U]=Z;if(F!=null)V[F]=Z;l9(Z,V,z.schema)});else{if(U!=null)K[Q][U]=Z;if(F!=null)K[Q][F]=Z;l9(Z,K[Q],z.schema)}}}}},MU1=function(Z,Y,X){const J=Y.schema.options.timestamps,$=Z.length;if(!J){for(let K=0;K<$;++K)l9(X,Z[K],Y.schema);return}const W=S4(J,"createdAt"),G=S4(J,"updatedAt");for(let K=0;K<$;++K){if(G!=null)Z[K][G]=X;if(W!=null)Z[K][W]=X;l9(X,Z[K],Y.schema)}},BU1=function(Z,Y,X){const J=Y.schema.options.timestamps;if(!J){l9(X,Z,Y.schema);return}const $=S4(J,"createdAt"),W=S4(J,"updatedAt");if(W!=null)Z[W]=X;if($!=null)Z[$]=X;l9(X,Z,Y.schema)},Kw=function(Z,Y,X,J){const $=RU1(Y),W=Z.path($);if(!W)return;const G=[],K=$.split(".");for(let Q=K.length-1;Q>0;--Q){const z=Z.path(K.slice(0,Q).join("."));if(z!=null&&(z.$isMongooseDocumentArray||z.$isSingleNested))G.push({parentPath:Y.split(".").slice(0,Q).join("."),parentSchemaType:z})}if(Array.isArray(X[Y])&&W.$isMongooseDocumentArray)MU1(X[Y],W,J);else if(X[Y]&&W.$isSingleNested)BU1(X[Y],W,J);else if(G.length>0)for(let Q of G){const{parentPath:z,parentSchemaType:H}=Q,F=H.schema.options.timestamps,U=S4(F,"updatedAt");if(!F||U==null)continue;if(H.$isSingleNested)X[z+"."+U]=J;else if(H.$isMongooseDocumentArray){let V=Y.substring(z.length+1);if(/^\d+$/.test(V)){X[z+"."+V][U]=J;continue}const q=V.indexOf(".");V=q!==-1?V.substring(0,q):V,X[z+"."+V+"."+U]=J}}else if(W.schema!=null&&W.schema!=Z&&X[Y]){const Q=W.schema.options.timestamps,z=S4(Q,"createdAt"),H=S4(Q,"updatedAt");if(!Q)return;if(H!=null)X[Y][H]=J;if(z!=null)X[Y][z]=J}},RU1=O3(),S4=Gw();Ev.exports=l9;/*!
 * ignore
 */});var zw=w((dk1,Cv)=>{var AU1=function(Z,Y,X,J,$,W){const G=J;let K=G;const Q=NU1($,"timestamps",!0);if(!Q||G==null)return J;const z=Q!=null&&Q.createdAt===!1,H=Q!=null&&Q.updatedAt===!1;if(W){if(J&&J.$set)J=J.$set,G.$set={},K=G.$set;if(!H&&X&&!J[X])K[X]=Z;if(!z&&Y&&!J[Y])K[Y]=Z;return G}if(J=J||{},Array.isArray(G)){if(X==null)return G;return G.push({$set:{[X]:Z}}),G}if(G.$set=G.$set||{},!H&&X&&(!J.$currentDate||!J.$currentDate[X])){let F=!1;if(X.indexOf(".")!==-1){const U=X.split(".");for(let V=1;V<U.length;++V){const q=U.slice(-V).join("."),L=U.slice(0,-V).join(".");if(J[L]!=null){J[L][q]=Z,F=!0;break}else if(J.$set&&J.$set[L]){J.$set[L][q]=Z,F=!0;break}}}if(!F)G.$set[X]=Z;if(G.hasOwnProperty(X))delete G[X]}if(!z&&Y){if(J[Y])delete J[Y];if(J.$set&&J.$set[Y])delete J.$set[Y];let F=!1;if(Y.indexOf(".")!==-1){const U=Y.split(".");for(let V=1;V<U.length;++V){const q=U.slice(-V).join("."),L=U.slice(0,-V).join(".");if(J[L]!=null){J[L][q]=Z,F=!0;break}else if(J.$set&&J.$set[L]){J.$set[L][q]=Z,F=!0;break}}}if(!F)G.$setOnInsert=G.$setOnInsert||{},G.$setOnInsert[Y]=Z}if(Object.keys(G.$set).length===0)delete G.$set;return G};/*!
 * ignore
 */var NU1=z0();Cv.exports=AU1;/*!
 * ignore
 */});var Sv=w((ck1,Ov)=>{Ov.exports=function Z(Y,X,J,$,W){const G=X!=null&&X.updatedAt===!1,K=X!=null&&X.createdAt===!1,Q=J!=null?J():Y.ownerDocument().constructor.base.now();if(!K&&(Y.isNew||Y.$isSubdocument)&&$&&!Y.$__getValue($)&&Y.$__isSelected($))Y.$set($,Q,void 0,{overwriteImmutable:!0});if(!G&&W&&(Y.isNew||Y.$isModified())){let z=Q;if(Y.isNew&&$!=null)z=Y.$__getValue($);Y.$set(W,z)}}});var fv=w((lk1,xv)=>{var DU1=Qw(),PU1=zw(),TU1=z0(),kv=Gw(),IU1=Sv(),jU1=v9(),_v=new Set(["replaceOne","findOneAndReplace"]);xv.exports=function Z(Y,X){const J=Y.childSchemas.find($);function $(F){return!!F.schema.options.timestamps}if(!X&&!J)return;const W=kv(X,"createdAt"),G=kv(X,"updatedAt"),K=X!=null&&X.hasOwnProperty("currentTime")?X.currentTime:null,Q={};if(Y.$timestamps={createdAt:W,updatedAt:G},W&&!Y.paths[W]){const F=Y.base!=null?Y.base.get("timestamps.createdAt.immutable"):null,U=F!=null?F:!0;Q[W]={[Y.options.typeKey||"type"]:Date,immutable:U}}if(G&&!Y.paths[G])Q[G]=Date;Y.add(Q),Y.pre("save",function F(U){const V=TU1(this,"$__.saveOptions.timestamps");if(V===!1)return U();IU1(this,V,K,W,G),U()}),Y.methods.initializeTimestamps=function(){const F=K!=null?K():this.constructor.base.now();if(W&&!this.get(W))this.$set(W,F);if(G&&!this.get(G))this.$set(G,F);if(this.$isSubdocument)return this;const U=this.$getAllSubdocs();for(let V of U)if(V.initializeTimestamps)V.initializeTimestamps();return this},H[jU1.builtInMiddleware]=!0;const z={query:!0,model:!1};Y.pre("findOneAndReplace",z,H),Y.pre("findOneAndUpdate",z,H),Y.pre("replaceOne",z,H),Y.pre("update",z,H),Y.pre("updateOne",z,H),Y.pre("updateMany",z,H);function H(F){const U=K!=null?K():this.model.base.now();if(_v.has(this.op)&&this.getUpdate()==null)this.setUpdate({});PU1(U,W,G,this.getUpdate(),this._mongooseOptions,_v.has(this.op)),DU1(U,this.getUpdate(),this.model.schema),F()}}});var gv=w((pk1,yv)=>{var OU1=function(Z,Y){if(typeof Z==="string")return;if(typeof Z==="function")return;throw new EU1('Invalid ref at path "'+Y+'". Got '+CU1.inspect(Z,{depth:0}))},EU1=W0(),CU1=import.meta.require("util");yv.exports=OU1});var Hw=w((ik1,bv)=>{bv.exports=Object.freeze(["countDocuments","distinct","estimatedDocumentCount","find","findOne","findOneAndReplace","findOneAndUpdate","replaceOne","updateMany","updateOne","deleteMany","deleteOne","findOneAndDelete"])});var vK=w((nk1,hv)=>{var vv=function(Z,Y){const X=Y.schema.s.hooks.filter((J)=>{const $=kU1(J);if(J.name==="validate")return!!$.query;if(J.name==="deleteOne"||J.name==="updateOne")return!!$.query||Object.keys($).length===0;if(J.query!=null||J.document!=null)return!!J.query;return!0});Z.prototype._queryMiddleware=X},kU1=function(Z){const Y={};if(Z.hasOwnProperty("query"))Y.query=Z.query;if(Z.hasOwnProperty("document"))Y.document=Z.document;return Y};/*!
 * ignore
 */hv.exports=vv;var SU1=Hw();/*!
 * ignore
 */vv.middlewareFunctions=SU1.concat(["validate"])});var hK=w((ak1,mv)=>{var S3=function(Z,Y,X){X=X||{};const J={useErrorHandlers:!0,numCallbackParams:1,nullResultByDefault:!0,contextParameter:!0},$=X.decorateDoc?Z:Z.prototype;Z.$appliedHooks=!0;for(let z of Object.keys(Y.paths)){const H=Y.paths[z];let F=null;if(H.$isSingleNested)F=H.caster;else if(H.$isMongooseDocumentArray)F=H.Constructor;else continue;if(F.$appliedHooks)continue;if(S3(F,H.schema,{...X,isChildSchema:!0}),F.discriminators!=null){const U=Object.keys(F.discriminators);for(let V of U)S3(F.discriminators[V],F.discriminators[V].schema,X)}}const W=Y.s.hooks.filter((z)=>{if(z.name==="updateOne"||z.name==="deleteOne")return!!z.document;if(z.name==="remove"||z.name==="init")return z.document==null||!!z.document;if(z.query!=null||z.document!=null)return z.document!==!1;return!0}).filter((z)=>{if(Y.methods[z.name])return!z.fn[_U1.builtInMiddleware];return!0});Z._middleware=W,$.$__originalValidate=$.$__originalValidate||$.$__validate;const G=X&&X.isChildSchema?["save","validate","deleteOne"]:["save","validate"];for(let z of G){const H=z==="validate"?"$__originalValidate":`\$__${z}`,F=W.createWrapper(z,$[H],null,J);$[`\$__${z}`]=F}$.$__init=W.createWrapperSync("init",$.$__init,null,J);const K=Object.keys(Y.methods),Q=Object.assign({},J,{checkForPromise:!0});for(let z of K){if(fU1.has(z))continue;if(!W.hasHooks(z))continue;const H=$[z];$[z]=function(){const F=Array.prototype.slice.call(arguments),U=F.slice(-1).pop(),V=typeof U==="function"?F.slice(0,F.length-1):F;return xU1(U,(q)=>{return this[`\$__${z}`].apply(this,V.concat([q]))},Z.events)},$[`\$__${z}`]=W.createWrapper(z,H,null,Q)}},_U1=v9(),xU1=FK();/*!
 * ignore
 */mv.exports=S3;/*!
 * ignore
 */S3.middlewareFunctions=["deleteOne","save","validate","remove","updateOne","init"];/*!
 * ignore
 */var fU1=new Set(S3.middlewareFunctions.flatMap((Z)=>[Z,`\$__${Z}`]))});var k3=w((sk1,cv)=>{var X6=function(Z,Y,X){let J=Z;if(Z==null)J=0;let $,W,G;if(Array.isArray(Y))W=Y[0],G=Y[1];else $=Y;let K;if(typeof J==="number"||J instanceof Number)K=Buffer.alloc(J);else K=Buffer.from(J,$,X);return uv.decorate(K,X6.mixin),K.isMongooseBuffer=!0,K[X6.pathSymbol]=W,K[dv]=G,K._subtype=0,K};/*!
 * Module dependencies.
 */var Fw=S6().Binary,uv=G1(),yU1=Symbol.for("mongoose#Buffer#_path"),dv=Symbol.for("mongoose#Buffer#_parent");X6.pathSymbol=yU1;/*!
 * Inherit from Buffer.
 */X6.mixin={_subtype:void 0,_markModified:function(){const Z=this[dv];if(Z)Z.markModified(this[X6.pathSymbol]);return this},write:function(){const Z=Buffer.prototype.write.apply(this,arguments);if(Z>0)this._markModified();return Z},copy:function(Z){const Y=Buffer.prototype.copy.apply(this,arguments);if(Z&&Z.isMongooseBuffer)Z._markModified();return Y}};/*!
 * Compile other Buffer methods marking this buffer as modified.
 */uv.each(["writeUInt8","writeUInt16","writeUInt32","writeInt8","writeInt16","writeInt32","writeFloat","writeDouble","fill","utf8Write","binaryWrite","asciiWrite","set","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE"],function(Z){if(!Buffer.prototype[Z])return;X6.mixin[Z]=function(){const Y=Buffer.prototype[Z].apply(this,arguments);return this._markModified(),Y}});X6.mixin.toObject=function(Z){const Y=typeof Z==="number"?Z:this._subtype||0;return new Fw(Buffer.from(this),Y)};X6.mixin.$toObject=X6.mixin.toObject;X6.mixin.toBSON=function(){return new Fw(this,this._subtype||0)};X6.mixin.equals=function(Z){if(!Buffer.isBuffer(Z))return!1;if(this.length!==Z.length)return!1;for(let Y=0;Y<this.length;++Y)if(this[Y]!==Z[Y])return!1;return!0};X6.mixin.subtype=function(Z){if(typeof Z!=="number")throw new TypeError("Invalid subtype. Expected a number");if(this._subtype!==Z)this._markModified();this._subtype=Z};/*!
 * Module exports.
 */X6.Binary=Fw;cv.exports=X6});var mK=w((rk1,av)=>{var nv=function(Z){const Y=typeof Z;if(Y!=="string")throw new TypeError(`Mongoose maps only support string keys, got ${Y}`);if(Z.startsWith("$"))throw new Error(`Mongoose maps do not support keys that start with "\$", got "${Z}"`);if(Z.includes("."))throw new Error(`Mongoose maps do not support keys that contain ".", got "${Z}"`);if(uU1.has(Z))throw new Error(`Mongoose maps do not support reserved key name "${Z}"`)},gU1=h9(),bU1=W0(),lv=w0(),vU1=G1().deepEqual,hU1=r8(),mU1=MK(),pv=import.meta.require("util"),uU1=G9(),Uw=u8(),iv=Z1().populateModelSymbol;/*!
 * ignore
 */class s7 extends Map{constructor(Z,Y,X,J){if(hU1(Z)==="Object")Z=Object.keys(Z).reduce(($,W)=>$.concat([[W,Z[W]]]),[]);super(Z);this.$__parent=X!=null&&X.$__!=null?X:null,this.$__path=Y,this.$__schemaType=J==null?new gU1(Y):J,this.$__runDeferred()}$init(Z,Y){if(nv(Z),super.set(Z,Y),Y!=null&&Y.$isSingleNested)Y.$basePath=this.$__path+"."+Z}$__set(Z,Y){super.set(Z,Y)}get(Z,Y){if(Uw(Z,"ObjectId"))Z=Z.toString();if(Y=Y||{},Y.getters===!1)return super.get(Z);return this.$__schemaType.applyGetters(super.get(Z),this.$__parent)}set(Z,Y){if(Uw(Z,"ObjectId"))Z=Z.toString();if(nv(Z),Y=mU1(Y),this.$__schemaType==null){this.$__deferred=this.$__deferred||[],this.$__deferred.push({key:Z,value:Y});return}let X;const J=this.$__parent,$=J!=null&&J.$__&&J.$__.populated?J.$populated(G.call(this),!0)||J.$populated(this.$__path,!0):null,W=this.get(Z);if($!=null){if(this.$__schemaType.$isSingleNested)throw new bU1("Cannot manually populate single nested subdoc underneath Map "+`at path "${this.$__path}". Try using an array instead of a Map.`);if(Array.isArray(Y)&&this.$__schemaType.$isMongooseArray)Y=Y.map((K)=>{if(K.$__==null)K=new $.options[iv](K);return K.$__.wasPopulated={value:K._id},K});else{if(Y.$__==null)Y=new $.options[iv](Y);Y.$__.wasPopulated={value:Y._id}}}else try{const K=this.$__schemaType.$isMongooseDocumentArray||this.$__schemaType.$isSingleNested?{path:G.call(this)}:null;Y=this.$__schemaType.applySetters(Y,this.$__parent,!1,this.get(Z),K)}catch(K){if(this.$__parent!=null&&this.$__parent.$__!=null){this.$__parent.invalidate(G.call(this),K);return}throw K}if(super.set(Z,Y),J!=null&&J.$__!=null&&!vU1(Y,W))J.markModified(G.call(this));function G(){if(X)return X;return X=this.$__path+"."+Z,X}}clear(){super.clear();const Z=this.$__parent;if(Z!=null)Z.markModified(this.$__path)}delete(Z){if(Uw(Z,"ObjectId"))Z=Z.toString();return this.set(Z,void 0),super.delete(Z)}toBSON(){return new Map(this)}toObject(Z){if(Z&&Z.flattenMaps){const Y={},X=this.keys();for(let J of X)Y[J]=lv(this.get(J),Z);return Y}return new Map(this)}$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)}toJSON(Z){if(typeof(Z&&Z.flattenMaps)==="boolean"?Z.flattenMaps:!0){const Y={},X=this.keys();for(let J of X)Y[J]=lv(this.get(J),Z);return Y}return new Map(this)}inspect(){return new Map(this)}$__runDeferred(){if(!this.$__deferred)return;for(let Z of this.$__deferred)this.set(Z.key,Z.value);this.$__deferred=null}}if(pv.inspect.custom)Object.defineProperty(s7.prototype,pv.inspect.custom,{enumerable:!1,writable:!1,configurable:!1,value:s7.prototype.inspect});Object.defineProperty(s7.prototype,"$__set",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(s7.prototype,"$__parent",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(s7.prototype,"$__path",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(s7.prototype,"$__schemaType",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(s7.prototype,"$isMongooseMap",{enumerable:!1,writable:!1,configurable:!1,value:!0});Object.defineProperty(s7.prototype,"$__deferredCalls",{enumerable:!1,writable:!1,configurable:!1,value:!0});av.exports=s7});var rv=w((tk1,sv)=>{sv.exports=S6().UUID});var rY=w((dU1)=>{/*!
 * Module exports.
 */dU1.Array=OL();dU1.Buffer=k3();dU1.Document=dU1.Embedded=pY();dU1.DocumentArray=u9();dU1.Decimal128=KW();dU1.ObjectId=U4();dU1.Map=mK();dU1.Subdocument=AK();dU1.UUID=rv()});var ov=w((Z_1,tv)=>{var oU1=N6();class _3 extends oU1{}var Vw=i6();Object.defineProperty(_3.prototype,"enum",Vw);Object.defineProperty(_3.prototype,"of",Vw);Object.defineProperty(_3.prototype,"castNonArrays",Vw);/*!
 * ignore
 */tv.exports=_3});var Zh=w((Y_1,ev)=>{var qw=function(Z){if(!Array.isArray(Z))return{min:0,max:0,containsNonArrayItem:!0};if(Z.length===0)return{min:1,max:1,containsNonArrayItem:!1};if(Z.length===1&&!Array.isArray(Z[0]))return{min:1,max:1,containsNonArrayItem:!1};const Y=qw(Z[0]);for(let X=1;X<Z.length;++X){const J=qw(Z[X]);if(J.min<Y.min)Y.min=J.min;if(J.max>Y.max)Y.max=J.max;Y.containsNonArrayItem=Y.containsNonArrayItem||J.containsNonArrayItem}return Y.min=Y.min+1,Y.max=Y.max+1,Y};ev.exports=qw});var x3=w((X_1,Xh)=>{var Yh=import.meta.require("assert");Xh.exports=function Z(Y){if(Y==null)return Y;if(Y==="")return null;if(typeof Y==="string"||typeof Y==="boolean")Y=Number(Y);if(Yh.ok(!isNaN(Y)),Y instanceof Number)return Y.valueOf();if(typeof Y==="number")return Y;if(!Array.isArray(Y)&&typeof Y.valueOf==="function")return Number(Y.valueOf());if(Y.toString&&!Array.isArray(Y)&&Y.toString()==Number(Y))return Number(Y);Yh.ok(!1)}});var Wh=w((J_1,$h)=>{var a6=function(Z,Y,X){if(f3(Z)||Z===null)return Z;if(Z.$cond!=null)if(Array.isArray(Z.$cond))Z.$cond=Z.$cond.map(($)=>a6($,Y,X));else Z.$cond.if=a6(Z.$cond.if,Y,X),Z.$cond.then=a6(Z.$cond.then,Y,X),Z.$cond.else=a6(Z.$cond.else,Y,X);else if(Z.$ifNull!=null)Z.$ifNull.map(($)=>a6($,Y,X));else if(Z.$switch!=null)Z.branches.map(($)=>a6($,Y,X)),Z.default=a6(Z.default,Y,X);const J=Object.keys(Z);for(let $ of J)if(eU1.has($))Z[$]=Z[$].map((W)=>a6(W,Y,X));else if(ZV1.has($))Z[$]=zV1(Z[$],Y,X);else if(YV1.has($))Z[$]=QV1(Z[$],Y,X);else if(XV1.has($))Z[$]=Lw(Z[$],Y,X);else if(WV1.has($))Z[$]=a6(Z[$],Y,X);if(Z.$in)Z.$in=KV1(Z.$in,Y,X);if(Z.$size)Z.$size=Lw(Z.$size,Y,X);if(Z.$round){const $=Z.$round;if(!Array.isArray($)||$.length<1||$.length>2)throw new tY("Array",$,"$round");Z.$round=$.map((W)=>Lw(W,Y,X))}return GV1(Z),Z},GV1=function(Z){const Y=Object.keys(Z);for(let X=0,J=Y.length;X<J;++X)Z[Y[X]]===void 0&&delete Z[Y[X]]},Lw=function(Z){if(!dK(Z))return Z;try{return uK(Z)}catch(Y){throw new tY("Number",Z)}},KV1=function(Z,Y,X){const J=Z[1];if(!f3(J))return Z;const $=Z[0],W=Y.path(J.slice(1));if(W===null){if(X===!1)return Z;else if(X==="throw")throw new Jh("$in");return}if(!W.$isMongooseArray)throw new Error("Path must be an array for $in");return[W.$isMongooseDocumentArray?W.$embeddedSchemaType.cast($):W.caster.cast($),J]},QV1=function(Z){if(!Array.isArray(Z)){if(!dK(Z))return Z;try{return uK(Z)}catch(Y){throw new tY("Number",Z)}}return Z.map((Y)=>{if(!dK(Y))return Y;try{return uK(Y)}catch(X){throw new tY("Number",Y)}})},zV1=function(Z,Y,X){if(!Array.isArray(Z)||Z.length!==2)throw new Error("Comparison operator must be an array of length 2");Z[0]=a6(Z[0],Y,X);const J=Z[0];if(dK(Z[1])){let $=null,W=null,G=null;if(f3(J))$=J.slice(1),W=Y.path($);else if(typeof J==="object"&&J!=null){for(let Q of Object.keys(J))if($V1.has(Q)&&f3(J[Q]))$=J[Q].slice(1)+"."+Q,G=uK;else if(JV1.has(Q)&&f3(J[Q])){if($=J[Q].slice(1)+"."+Q,W=Y.path(J[Q].slice(1)),W!=null){if(W.$isMongooseDocumentArray)W=W.$embeddedSchemaType;else if(W.$isMongooseArray)W=W.caster}}}const K=typeof Z[1]==="object"&&Z[1]!=null&&Z[1].$literal!=null;if(W!=null)if(K)Z[1]={$literal:W.cast(Z[1].$literal)};else Z[1]=W.cast(Z[1]);else if(G!=null)if(K)try{Z[1]={$literal:G(Z[1].$literal)}}catch(Q){throw new tY(G.name.replace(/^cast/,""),Z[1],$+".$literal")}else try{Z[1]=G(Z[1])}catch(Q){throw new tY(G.name.replace(/^cast/,""),Z[1],$)}else if($!=null&&X===!0)return;else if($!=null&&X==="throw")throw new Jh($)}else Z[1]=a6(Z[1]);return Z},f3=function(Z){return typeof Z==="string"&&Z[0]==="$"},dK=function(Z){if(typeof Z==="string"&&Z[0]==="$")return!1;if(typeof Z==="object"&&Z!==null&&Object.keys(Z).find((Y)=>Y[0]==="$"))return Z.$literal!=null;return!0},tY=O8(),Jh=I5(),uK=x3(),eU1=new Set(["$and","$or"]),ZV1=new Set(["$cmp","$eq","$lt","$lte","$gt","$gte"]),YV1=new Set(["$multiply","$divide","$log","$mod","$trunc","$avg","$max","$min","$stdDevPop","$stdDevSamp","$sum"]),XV1=new Set(["$abs","$exp","$ceil","$floor","$ln","$log10","$sqrt","$sin","$cos","$tan","$asin","$acos","$atan","$atan2","$asinh","$acosh","$atanh","$sinh","$cosh","$tanh","$degreesToRadians","$radiansToDegrees"]),JV1=new Set(["$arrayElemAt","$first","$last"]),$V1=new Set(["$year","$month","$week","$dayOfMonth","$dayOfYear","$hour","$minute","$second","$isoDayOfWeek","$isoWeekYear","$isoWeek","$millisecond"]),WV1=new Set(["$not"]);$h.exports=function Z(Y,X,J){if(typeof Y!=="object"||Y===null)throw new Error("`$expr` must be an object");return a6(Y,X,J)}});var ww=w(($_1,Gh)=>{var HV1=O8();Gh.exports=function Z(Y,X){if(Y==null)return Y;if(Y._id&&typeof Y._id==="string")return Y._id;if(Y.toString&&Y.toString!==Object.prototype.toString&&!Array.isArray(Y))return Y.toString();throw new HV1("string",Y,X)}});var Hh=w((W_1,zh)=>{var FV1=O8(),Kh=QK(),Qh=ww();zh.exports=function(Z,Y){if(Z==null||typeof Z!=="object")throw new FV1("$text",Z,Y);if(Z.$search!=null)Z.$search=Qh(Z.$search,Y+".$search");if(Z.$language!=null)Z.$language=Qh(Z.$language,Y+".$language");if(Z.$caseSensitive!=null)Z.$caseSensitive=Kh(Z.$caseSensitive,Y+".$castSensitive");if(Z.$diacriticSensitive!=null)Z.$diacriticSensitive=Kh(Z.$diacriticSensitive,Y+".$diacriticSensitive");return Z}});var cK=w((G_1,Fh)=>{var UV1=new Set(["$ref","$id","$db"]);Fh.exports=function Z(Y){return Y[0]==="$"&&!UV1.has(Y)}});var oY=w((K_1,wh)=>{var Nw=function(Z,Y,X){if(Array.isArray(Z))Z.forEach(function(J,$){if(Array.isArray(J)||Bw(J))return Nw(J,Y,X);Z[$]=Y.castForQuery(null,J,X)});else{const J=Object.keys(Z);let $=J.length;while($--){const W=J[$],G=Z[W];if(Array.isArray(G)||Bw(G))Nw(G,Y,X),Z[W]=G;else Z[W]=Y.castForQuery({val:G,context:X})}}},BV1=function(Z,Y,X,J){if("strictQuery"in Z)return Z.strictQuery;if("strictQuery"in Y)return Y.strictQuery;const $=J&&J.mongooseCollection&&J.mongooseCollection.conn&&J.mongooseCollection.conn.base&&J.mongooseCollection.conn.base.options;if($){if("strictQuery"in $)return $.strictQuery}return X.strictQuery};/*!
 * Module dependencies.
 */var Uh=O8(),Rw=I5(),VV1=y3(),qV1=Wh(),LV1=Hh(),wV1=z0(),Vh=RK(),qh=cK(),RV1=import.meta.require("util"),Bw=o4(),Mw=KJ(),Lh=G1(),MV1=["Polygon","MultiPolygon"];wh.exports=function Z(Y,X,J,$){if(Array.isArray(X))throw new Error("Query filter must be an object, got an array ",RV1.inspect(X));if(X==null)return X;if(Y!=null&&Y.discriminators!=null&&X[Y.options.discriminatorKey]!=null)Y=Vh(Y,X[Y.options.discriminatorKey])||Y;const W=Object.keys(X);let G=W.length,K,Q,z,H,F,U,V;J=J||{};while(G--)if(F=W[G],V=X[F],F==="$or"||F==="$nor"||F==="$and"){if(!Array.isArray(V))throw new Uh("Array",V,F);for(let q=0;q<V.length;++q){if(V[q]==null||typeof V[q]!=="object")throw new Uh("Object",V[q],F+"."+q);const L=V[q][Y.options.discriminatorKey];if(L==null)V[q]=Z(Y,V[q],J,$);else{const R=Vh($.schema,L);V[q]=Z(R?R:Y,V[q],J,$)}}}else if(F==="$where"){if(U=typeof V,U!=="string"&&U!=="function")throw new Error("Must have a string or function for $where");if(U==="function")X[F]=V.toString();continue}else if(F==="$expr"){V=qV1(V,Y);continue}else if(F==="$elemMatch")V=Z(Y,V,J,$);else if(F==="$text")V=LV1(V,F);else{if(!Y)continue;if(z=Y.path(F),!z){const q=F.split(".");let L=q.length;while(L--){const R=q.slice(0,L).join("."),B=q.slice(L).join("."),N=Y.path(R),M=N&&N.schema&&N.schema.options&&N.schema.options.discriminatorKey;if(N!=null&&(N.schema&&N.schema.discriminators)!=null&&M!=null&&B!==M){const D=wV1(X,R+"."+M),m=N.schema.discriminators;if(typeof D==="string"&&m[D]!=null)z=m[D].path(B);else if(D!=null&&Object.keys(D).length===1&&Array.isArray(D.$in)&&D.$in.length===1&&typeof D.$in[0]==="string"&&m[D.$in[0]]!=null)z=m[D.$in[0]].path(B)}}}if(!z){const q=F.split(".");let L=q.length,R,B,N;while(L--)if(R=q.slice(0,L).join("."),z=Y.path(R),z)break;if(z){if(z.caster&&z.caster.schema){N={},B=q.slice(L).join("."),N[B]=V;const m=Z(z.caster.schema,N,J,$)[B];if(m===void 0)delete X[F];else X[F]=m}else X[F]=V;continue}if(Bw(V)){let m="";if(V.$near)m="$near";else if(V.$nearSphere)m="$nearSphere";else if(V.$within)m="$within";else if(V.$geoIntersects)m="$geoIntersects";else if(V.$geoWithin)m="$geoWithin";if(m){const O=new VV1.Number("__QueryCasting__");let E=V[m];if(V.$maxDistance!=null)V.$maxDistance=O.castForQuery(null,V.$maxDistance,$);if(V.$minDistance!=null)V.$minDistance=O.castForQuery(null,V.$minDistance,$);if(m==="$within"){const j=E.$center||E.$centerSphere||E.$box||E.$polygon;if(!j)throw new Error("Bad $within parameter: "+JSON.stringify(V));E=j}else if(m==="$near"&&typeof E.type==="string"&&Array.isArray(E.coordinates))E=E.coordinates;else if((m==="$near"||m==="$nearSphere"||m==="$geoIntersects")&&E.$geometry&&typeof E.$geometry.type==="string"&&Array.isArray(E.$geometry.coordinates)){if(E.$maxDistance!=null)E.$maxDistance=O.castForQuery(null,E.$maxDistance,$);if(E.$minDistance!=null)E.$minDistance=O.castForQuery(null,E.$minDistance,$);if(Mw(E.$geometry))E.$geometry=E.$geometry.toObject({transform:!1,virtuals:!1});E=E.$geometry.coordinates}else if(m==="$geoWithin"){if(E.$geometry){if(Mw(E.$geometry))E.$geometry=E.$geometry.toObject({virtuals:!1});const j=E.$geometry.type;if(MV1.indexOf(j)===-1)throw new Error('Invalid geoJSON type for $geoWithin "'+j+'", must be "Polygon" or "MultiPolygon"');E=E.$geometry.coordinates}else if(E=E.$box||E.$polygon||E.$center||E.$centerSphere,Mw(E))E=E.toObject({virtuals:!1})}Nw(E,O,$);continue}}if(Y.nested[F])continue;const M="strict"in J?J.strict:Y.options.strict,D=BV1(J,Y._userProvidedOptions,Y.options,$);if(J.upsert&&M){if(M==="throw")throw new Rw(F);throw new Rw(F,'Path "'+F+'" is not in schema, strict mode is `true`, and upsert is `true`.')}if(D==="throw")throw new Rw(F,'Path "'+F+'" is not in schema and strictQuery is \'throw\'.');else if(D)delete X[F]}else if(V==null)continue;else if(Lh.isPOJO(V))if(Q=Object.keys(V).some(qh),!Q)X[F]=z.castForQuery(null,V,$);else{const q=Object.keys(V);let L,R=q.length;while(R--)if(L=q[R],H=V[L],L==="$elemMatch"){if(H&&z!=null&&z.schema!=null)Z(z.schema,H,J,$);else if(H&&z!=null&&z.$isMongooseArray)if(Lh.isPOJO(H)&&H.$not!=null)Z(Y,H,J,$);else V[L]=z.castForQuery(L,H,$)}else if(L==="$not"){if(H&&z){if(K=Object.keys(H),K.length&&qh(K[0]))for(let B in H)H[B]=z.castForQuery(B,H[B],$);else V[L]=z.castForQuery(L,H,$);continue}}else V[L]=z.castForQuery(L,H,$)}else if(Array.isArray(V)&&["Buffer","Array"].indexOf(z.instance)===-1){const q=[],L=V;for(let R of L)q.push(z.castForQuery(null,R,$));X[F]={$in:q}}else X[F]=z.castForQuery(null,V,$)}return X}});var Mh=w((Q_1,Rh)=>{var NV1=N6();class eY extends NV1{}var lK=i6();Object.defineProperty(eY.prototype,"min",lK);Object.defineProperty(eY.prototype,"max",lK);Object.defineProperty(eY.prototype,"enum",lK);Object.defineProperty(eY.prototype,"populate",lK);/*!
 * ignore
 */Rh.exports=eY});var pK=w((z_1,Nh)=>{var DV1=function(Z){const Y=this;if(Array.isArray(Z))return Z.map(function(X){return Bh(Y.path,X)});else if(Buffer.isBuffer(Z))return Z;return Bh(Y.path,Z)},Bh=function(Z,Y){const X=Number(Y);if(isNaN(X))throw new AV1("number",Y,Z);return X};/*!
 * Module requirements.
 */var AV1=O8();/*!
 * ignore
 *//*!
 * ignore
 */Nh.exports=DV1});var Aw=w((H_1,Dh)=>{var H0=function(Z,Y){k4.call(this,Z,Y,"Number")},nK=function(Z){return this.cast(Z)},IV1=function(Z){const Y=this;if(!Array.isArray(Z))return[this.cast(Z)];return Z.map(function(X){return Y.cast(X)})};/*!
 * Module requirements.
 */var aK=n1(),PV1=Mh(),k4=i0(),TV1=x3(),iK=pK(),sK=G1(),Ah=k4.CastError;H0.get=k4.get;H0.set=k4.set;H0.setters=[];/*!
 * ignore
 */H0._cast=TV1;H0.cast=function Z(Y){if(arguments.length===0)return this._cast;if(Y===!1)Y=this._defaultCaster;return this._cast=Y,this._cast};/*!
 * ignore
 */H0._defaultCaster=(Z)=>{if(typeof Z!=="number")throw new Error;return Z};H0.schemaName="Number";H0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */H0.prototype=Object.create(k4.prototype);H0.prototype.constructor=H0;H0.prototype.OptionsConstructor=PV1;/*!
 * ignore
 */H0._checkRequired=(Z)=>typeof Z==="number"||Z instanceof Number;H0.checkRequired=k4.checkRequired;H0.prototype.checkRequired=function Z(Y,X){if(typeof Y==="object"&&k4._isRef(this,Y,X,!0))return Y!=null;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():H0.checkRequired())(Y)};H0.prototype.min=function(Z,Y){if(this.minValidator)this.validators=this.validators.filter(function(X){return X.validator!==this.minValidator},this);if(Z!==null&&Z!==void 0){let X=Y||aK.messages.Number.min;X=X.replace(/{MIN}/,Z),this.validators.push({validator:this.minValidator=function(J){return J==null||J>=Z},message:X,type:"min",min:Z})}return this};H0.prototype.max=function(Z,Y){if(this.maxValidator)this.validators=this.validators.filter(function(X){return X.validator!==this.maxValidator},this);if(Z!==null&&Z!==void 0){let X=Y||aK.messages.Number.max;X=X.replace(/{MAX}/,Z),this.validators.push({validator:this.maxValidator=function(J){return J==null||J<=Z},message:X,type:"max",max:Z})}return this};H0.prototype.enum=function(Z,Y){if(this.enumValidator)this.validators=this.validators.filter(function(X){return X.validator!==this.enumValidator},this);if(!Array.isArray(Z)){if(sK.isPOJO(Z)&&Z.values!=null)Y=Z.message,Z=Z.values;else if(typeof Z==="number")Z=Array.prototype.slice.call(arguments),Y=null;if(sK.isPOJO(Z))Z=Object.values(Z);Y=Y||aK.messages.Number.enum}return Y=Y==null?aK.messages.Number.enum:Y,this.enumValidator=(X)=>X==null||Z.indexOf(X)!==-1,this.validators.push({validator:this.enumValidator,message:Y,type:"enum",enumValues:Z}),this};H0.prototype.cast=function(Z,Y,X){if(typeof Z!=="number"&&k4._isRef(this,Z,Y,X)){if(Z==null||sK.isNonBuiltinObject(Z))return this._castRef(Z,Y,X)}const J=Z&&typeof Z._id!=="undefined"?Z._id:Z;let $;if(typeof this._castFunction==="function")$=this._castFunction;else if(typeof this.constructor.cast==="function")$=this.constructor.cast();else $=H0.cast();try{return $(J)}catch(W){throw new Ah("Number",J,this.path,W,this)}};/*!
 * ignore
 */H0.prototype.$conditionalHandlers=sK.options(k4.prototype.$conditionalHandlers,{$bitsAllClear:iK,$bitsAnyClear:iK,$bitsAllSet:iK,$bitsAnySet:iK,$gt:nK,$gte:nK,$lt:nK,$lte:nK,$mod:IV1});H0.prototype.castForQuery=function(Z,Y,X){let J;if(Z!=null){if(J=this.$conditionalHandlers[Z],!J)throw new Ah("number",Y,this.path,null,this);return J.call(this,Y,X)}return Y=this.applySetters(Y,X),Y};/*!
 * Module exports.
 */Dh.exports=H0});var g3=w((EV1)=>{var Ph=function(Z){return jV1.cast()(Z)},Th=function(Z,Y){Z.forEach(function(X,J){if(Array.isArray(X))Th(X,Y);else Z[J]=Ph.call(Y,X)})};/*!
 * Module requirements.
 */var jV1=Aw();/*!
 * ignore
 */EV1.castToNumber=Ph;EV1.castArraysOfNumbers=Th;/*!
 * ignore
 */});var Tw=w((xV1)=>{var SV1=function(Z){const Y=rK();if(Array.isArray(Z))return Ih(Z,this),Z;if(Pw(this,Z),Z&&Z.$geometry)return Dw(Z,this);if(!Array.isArray(Z))throw new TypeError("$near must be either an array or an object with a $geometry property");return Y.prototype.castForQuery.call(this,null,Z)},Dw=function(Z,Y){switch(Z.$geometry.type){case"Polygon":case"LineString":case"Point":Ih(Z.$geometry.coordinates,Y);break;default:break}return Pw(Y,Z),Z},kV1=function(Z){if(Pw(this,Z),Z.$box||Z.$polygon){const Y=Z.$box?"$box":"$polygon";Z[Y].forEach((X)=>{if(!Array.isArray(X)){const J="Invalid $within $box argument. Expected an array, received "+X;throw new TypeError(J)}X.forEach((J,$)=>{X[$]=b3.call(this,J)})})}else if(Z.$center||Z.$centerSphere){const Y=Z.$center?"$center":"$centerSphere";Z[Y].forEach((X,J)=>{if(Array.isArray(X))X.forEach(($,W)=>{X[W]=b3.call(this,$)});else Z[Y][J]=b3.call(this,X)})}else if(Z.$geometry)Dw(Z,this);return Z},_V1=function(Z){if(!Z.$geometry)return;return Dw(Z,this),Z},Pw=function(Z,Y){if(Y.$maxDistance)Y.$maxDistance=b3.call(Z,Y.$maxDistance);if(Y.$minDistance)Y.$minDistance=b3.call(Z,Y.$minDistance)};/*!
 * Module requirements.
 */var Ih=g3().castArraysOfNumbers,b3=g3().castToNumber;/*!
 * ignore
 */xV1.cast$geoIntersects=_V1;xV1.cast$near=SV1;xV1.cast$within=kV1});var rK=w((V_1,Eh)=>{var h1=function(Z,Y,X,J){tK||(tK=rY().Embedded);let $="type";if(J&&J.typeKey)$=J.typeKey;if(this.schemaOptions=J,Y){let K={};if(p9.isPOJO(Y))if(Y[$])K=dV1(Y),delete K[$],Y=Y[$];else Y=eK;if(X!=null&&X.ref!=null&&K.ref==null)K.ref=X.ref;if(Y===Object)Y=eK;const Q=typeof Y==="string"?Y:p9.getFunctionName(Y),z=y3(),H=z.hasOwnProperty(Q)?z[Q]:Y;if(this.casterConstructor=H,this.casterConstructor instanceof h1)this.casterConstructor[jh]=!0;if(typeof H==="function"&&!H.$isArraySubdocument&&!H.$isSchemaMap){const F=this.caster instanceof tK?null:Z;this.caster=new H(F,K)}else if(this.caster=H,!(this.caster instanceof tK))this.caster.path=Z;this.$embeddedSchemaType=this.caster}this.$isMongooseArray=!0,s6.call(this,Z,X,"Array");let W,G;if(this.defaultValue!=null)W=this.defaultValue,G=typeof W==="function";if(!("defaultValue"in this)||this.defaultValue!==void 0){const K=function(){return G?W.call(this):W!=null?[].concat(W):[]};K.$runBeforeSetters=!G,this.default(K)}},nV1=function(Z,Y){if(!Array.isArray(Z))Z=[Z];return Z=Z.map((X)=>{if(!p9.isObject(X))return X;if(X.$elemMatch!=null)return{$elemMatch:h3(this.casterConstructor.schema,X.$elemMatch,null,this&&this.$$context)};const J={};return J[this.path]=X,h3(this.casterConstructor.schema,J,null,this&&this.$$context)[this.path]},this),this.castForQuery(null,Z,Y)},aV1=function(Z,Y){const X=Object.keys(Z),J=X.length;for(let K=0;K<J;++K){const Q=X[K],z=Z[Q];if(cV1(Q)&&z!=null)Z[Q]=this.castForQuery(Q,z,Y)}const $=this&&this.casterConstructor&&this.casterConstructor.schema&&this.casterConstructor.schema.options&&this.casterConstructor.schema.options.discriminatorKey,W=this&&this.casterConstructor&&this.casterConstructor.schema&&this.casterConstructor.schema.discriminators||{};if($!=null&&Z[$]!=null&&W[Z[$]]!=null)return h3(W[Z[$]],Z,null,this&&this.$$context);const G=this.casterConstructor.schema??Y.schema;return h3(G,Z,null,this&&this.$$context)},jw=function(Z){return function Y(X){if(!Array.isArray(X))throw new TypeError("conditional "+Z+" requires an array");const J=[];for(let $ of X)J.push(h3(this.casterConstructor.schema,$,null,this&&this.$$context));return J}};/*!
 * Module dependencies.
 */var bV1=zK(),vV1=HL(),hV1=W0(),mV1=ov(),s6=i0(),oK=s6.CastError,eK=h9(),uV1=Zh(),h3=oY(),dV1=w0(),cV1=cK(),ZQ=import.meta.require("util"),p9=G1(),lV1=g3().castToNumber,Iw=Tw(),pV1=j7(),v3,tK,jh=Symbol("mongoose#isNestedArray"),iV1=Object.freeze({});h1.schemaName="Array";h1.options={castNonArrays:!0};/*!
 * ignore
 */h1.defaultOptions={};h1.set=s6.set;h1.setters=[];h1.get=s6.get;/*!
 * Inherits from SchemaType.
 */h1.prototype=Object.create(s6.prototype);h1.prototype.constructor=h1;h1.prototype.OptionsConstructor=mV1;/*!
 * ignore
 */h1._checkRequired=s6.prototype.checkRequired;h1.checkRequired=s6.checkRequired;h1.prototype.checkRequired=function Z(Y,X){if(typeof Y==="object"&&s6._isRef(this,Y,X,!0))return!!Y;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():h1.checkRequired())(Y)};h1.prototype.enum=function(){let Z=this;while(!0){const X=Z&&Z.caster&&Z.caster.instance;if(X==="Array"){Z=Z.caster;continue}if(X!=="String"&&X!=="Number")throw new Error("`enum` can only be set on an array of strings or numbers , not "+X);break}let Y=arguments;if(!Array.isArray(arguments)&&p9.isObject(arguments))Y=p9.object.vals(Y);return Z.caster.enum.apply(Z.caster,Y),this};h1.prototype.applyGetters=function(Z,Y){if(Y!=null&&Y.$__!=null&&Y.$populated(this.path))return Z;return s6.prototype.applyGetters.call(this,Z,Y)};h1.prototype._applySetters=function(Z,Y,X,J){if(this.casterConstructor.$isMongooseArray&&h1.options.castNonArrays&&!this[jh]){let $=0,W=this;while(W!=null&&W.$isMongooseArray&&!W.$isMongooseDocumentArray)++$,W=W.casterConstructor;if(Z!=null&&Z.length!==0){const G=uV1(Z);if(G.min===G.max&&G.max<$&&G.containsNonArrayItem)for(let K=G.max;K<$;++K)Z=[Z]}}return s6.prototype._applySetters.call(this,Z,Y,X,J)};h1.prototype.cast=function(Z,Y,X,J,$){v3||(v3=rY().Array);let W,G;if(Array.isArray(Z)){if(!Z.length&&Y){const V=Y.schema.indexedPaths(),q=this.path;for(W=0,G=V.length;W<G;++W){const R=V[W][0][q];if(R==="2dsphere"||R==="2d")return}const L=this.path.endsWith(".coordinates")?this.path.substring(0,this.path.lastIndexOf(".")):null;if(L!=null){for(W=0,G=V.length;W<G;++W)if(V[W][0][L]==="2dsphere")return}}$=$||iV1;let z=p9.isMongooseArray(Z)?Z.__array:Z,H=$.path||this.path;if($.arrayPathIndex!=null)H+="."+$.arrayPathIndex;if(Z=v3(z,H,Y,this),z=Z.__array,X&&Y!=null&&Y.$__!=null&&Y.$populated(this.path))return Z;const F=this.caster,U=F.$isMongooseArray;if(F&&this.casterConstructor!==eK)try{const V=z.length;for(W=0;W<V;W++){const q={};if(U){if($.arrayPath!=null)q.arrayPathIndex=W;else if(F._arrayParentPath!=null)q.arrayPathIndex=W}z[W]=F.applySetters(z[W],Y,X,void 0,q)}}catch(V){throw new oK("["+V.kind+"]",ZQ.inspect(Z),this.path+"."+W,V,this)}return Z}const K=this.options.castNonArrays!=null?this.options.castNonArrays:h1.options.castNonArrays;if(X||K){if(!!Y&&!!X)Y.markModified(this.path);return this.cast([Z],Y,X)}throw new oK("Array",ZQ.inspect(Z),this.path,null,this)};/*!
 * ignore
 */h1.prototype._castForPopulate=function Z(Y,X){if(v3||(v3=rY().Array),Array.isArray(Y)){let J;const $=Y.__array?Y.__array:Y,W=$.length,G=this.caster;if(G&&this.casterConstructor!==eK)try{for(J=0;J<W;J++){const K={};if(G.$isMongooseArray&&G._arrayParentPath!=null)K.arrayPathIndex=J;$[J]=G.cast($[J],X,!1,void 0,K)}}catch(K){throw new oK("["+K.kind+"]",ZQ.inspect(Y),this.path+"."+J,K,this)}return Y}throw new oK("Array",ZQ.inspect(Y),this.path,null,this)};h1.prototype.$toObject=h1.prototype.toObject;/*!
 * ignore
 */h1.prototype.discriminator=function(...Z){let Y=this;while(Y.$isMongooseArray&&!Y.$isMongooseDocumentArray)if(Y=Y.casterConstructor,Y==null||typeof Y==="function")throw new hV1("You can only add an embedded discriminator on a document array, "+this.path+" is a plain array");return Y.discriminator(...Z)};/*!
 * ignore
 */h1.prototype.clone=function(){const Z=Object.assign({},this.options),Y=new this.constructor(this.path,this.caster,Z,this.schemaOptions);if(Y.validators=this.validators.slice(),this.requiredValidator!==void 0)Y.requiredValidator=this.requiredValidator;return Y};h1.prototype._castForQuery=function(Z,Y){let X=this.casterConstructor;if(Z&&X.discriminators&&X.schema&&X.schema.options&&X.schema.options.discriminatorKey)if(typeof Z[X.schema.options.discriminatorKey]==="string"&&X.discriminators[Z[X.schema.options.discriminatorKey]])X=X.discriminators[Z[X.schema.options.discriminatorKey]];else{const Q=pV1(X.discriminators,Z[X.schema.options.discriminatorKey]);if(Q)X=Q}const J=this.casterConstructor.prototype,$=J&&J.castForQuery,W=J&&J.cast,G=X.castForQuery,K=this.caster;if(Array.isArray(Z))this.setters.reverse().forEach((Q)=>{Z=Q.call(this,Z,this)}),Z=Z.map(function(Q){if(p9.isObject(Q)&&Q.$elemMatch)return Q;if($)return Q=$.call(K,null,Q,Y),Q;else if(W)return Q=W.call(K,Q),Q;else if(G)return Q=G.call(K,null,Q,Y),Q;if(Q!=null)return Q=new X(Q),Q;return Q});else if($)Z=$.call(K,null,Z,Y);else if(W)Z=W.call(K,Z);else if(G)Z=G.call(K,null,Z,Y);else if(Z!=null)Z=new X(Z);return Z};h1.prototype.castForQuery=function(Z,Y,X){let J;if(Z!=null){if(J=this.$conditionalHandlers[Z],!J)throw new Error("Can\'t use "+Z+" with Array.");return J.call(this,Y,X)}else return this._castForQuery(Y,X)};var J0=h1.prototype.$conditionalHandlers={};J0.$all=nV1;J0.$options=String;J0.$elemMatch=aV1;J0.$geoIntersects=Iw.cast$geoIntersects;J0.$or=jw("$or");J0.$and=jw("$and");J0.$nor=jw("$nor");J0.$near=J0.$nearSphere=Iw.cast$near;J0.$within=J0.$geoWithin=Iw.cast$within;J0.$size=J0.$minDistance=J0.$maxDistance=lV1;J0.$exists=bV1;J0.$type=vV1;J0.$eq=J0.$gt=J0.$gte=J0.$lt=J0.$lte=J0.$not=J0.$regex=J0.$ne=h1.prototype._castForQuery;J0.$nin=s6.prototype.$conditionalHandlers.$nin;J0.$in=s6.prototype.$conditionalHandlers.$in;/*!
 * Module exports.
 */Eh.exports=h1});var Oh=w((q_1,Ch)=>{var sV1=import.meta.require("assert"),{Long:rV1}=S6();Ch.exports=function Z(Y){if(Y==null)return Y;if(Y==="")return null;if(typeof Y==="bigint")return Y;if(Y instanceof rV1)return Y.toBigInt();if(typeof Y==="string"||typeof Y==="number")return BigInt(Y);sV1.ok(!1)}});var kh=w((L_1,Sh)=>{var D0=function(Z,Y){ZX.call(this,Z,Y,"BigInt")},YQ=function(Z,Y){return this.castForQuery(null,Z,Y)};/*!
 * Module dependencies.
 */var tV1=O8(),ZX=i0(),oV1=Oh(),eV1=G1();D0.schemaName="BigInt";D0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */D0.prototype=Object.create(ZX.prototype);D0.prototype.constructor=D0;/*!
 * ignore
 */D0._cast=oV1;D0.set=ZX.set;D0.setters=[];D0.get=ZX.get;D0.cast=function Z(Y){if(arguments.length===0)return this._cast;if(Y===!1)Y=this._defaultCaster;return this._cast=Y,this._cast};/*!
 * ignore
 */D0._checkRequired=(Z)=>Z!=null;D0.checkRequired=ZX.checkRequired;D0.prototype.checkRequired=function(Z){return this.constructor._checkRequired(Z)};D0.prototype.cast=function(Z){let Y;if(typeof this._castFunction==="function")Y=this._castFunction;else if(typeof this.constructor.cast==="function")Y=this.constructor.cast();else Y=D0.cast();try{return Y(Z)}catch(X){throw new tV1("BigInt",Z,this.path,X,this)}};/*!
 * ignore
 */D0.$conditionalHandlers=eV1.options(ZX.prototype.$conditionalHandlers,{$gt:YQ,$gte:YQ,$lt:YQ,$lte:YQ});/*!
 * ignore
 */D0.prototype.castForQuery=function(Z,Y,X){let J;if(Z!=null){if(J=D0.$conditionalHandlers[Z],J)return J.call(this,Y);return this.applySetters(null,Y,X)}return this.applySetters(Y,X)};D0.prototype._castNullish=function Z(Y){if(typeof Y==="undefined")return Y;if((typeof this.constructor.cast==="function"?this.constructor.cast():D0.cast())==null)return Y;return Y};/*!
 * Module exports.
 */Sh.exports=D0});var xh=w((w_1,_h)=>{var F0=function(Z,Y){YX.call(this,Z,Y,"Boolean")};/*!
 * Module dependencies.
 */var Zq1=O8(),YX=i0(),m3=QK(),Yq1=G1();F0.schemaName="Boolean";F0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */F0.prototype=Object.create(YX.prototype);F0.prototype.constructor=F0;/*!
 * ignore
 */F0._cast=m3;F0.set=YX.set;F0.setters=[];F0.get=YX.get;F0.cast=function Z(Y){if(arguments.length===0)return this._cast;if(Y===!1)Y=this._defaultCaster;return this._cast=Y,this._cast};/*!
 * ignore
 */F0._defaultCaster=(Z)=>{if(Z!=null&&typeof Z!=="boolean")throw new Error;return Z};/*!
 * ignore
 */F0._checkRequired=(Z)=>Z===!0||Z===!1;F0.checkRequired=YX.checkRequired;F0.prototype.checkRequired=function(Z){return this.constructor._checkRequired(Z)};Object.defineProperty(F0,"convertToTrue",{get:()=>m3.convertToTrue,set:(Z)=>{m3.convertToTrue=Z}});Object.defineProperty(F0,"convertToFalse",{get:()=>m3.convertToFalse,set:(Z)=>{m3.convertToFalse=Z}});F0.prototype.cast=function(Z){let Y;if(typeof this._castFunction==="function")Y=this._castFunction;else if(typeof this.constructor.cast==="function")Y=this.constructor.cast();else Y=F0.cast();try{return Y(Z)}catch(X){throw new Zq1("Boolean",Z,this.path,X,this)}};F0.$conditionalHandlers=Yq1.options(YX.prototype.$conditionalHandlers,{});F0.prototype.castForQuery=function(Z,Y,X){let J;if(Z!=null){if(J=F0.$conditionalHandlers[Z],J)return J.call(this,Y);return this.applySetters(null,Y,X)}return this.applySetters(Y,X)};F0.prototype._castNullish=function Z(Y){if(typeof Y==="undefined")return Y;const X=typeof this.constructor.cast==="function"?this.constructor.cast():F0.cast();if(X==null)return Y;if(X.convertToFalse instanceof Set&&X.convertToFalse.has(Y))return!1;if(X.convertToTrue instanceof Set&&X.convertToTrue.has(Y))return!0;return Y};/*!
 * Module exports.
 */_h.exports=F0});var yh=w((R_1,fh)=>{var Xq1=N6();class Ew extends Xq1{}var Jq1=i6();Object.defineProperty(Ew.prototype,"subtype",Jq1);/*!
 * ignore
 */fh.exports=Ew});var hh=w((M_1,vh)=>{var K8=function(Z,Y){_4.call(this,Z,Y,"Buffer")},JQ=function(Z,Y){return this.castForQuery(null,Z,Y)};/*!
 * Module dependencies.
 */var XX=k3(),$q1=yh(),_4=i0(),XQ=pK(),bh=G1(),gh=XX.Binary,Cw=_4.CastError;K8.schemaName="Buffer";K8.defaultOptions={};/*!
 * Inherits from SchemaType.
 */K8.prototype=Object.create(_4.prototype);K8.prototype.constructor=K8;K8.prototype.OptionsConstructor=$q1;/*!
 * ignore
 */K8._checkRequired=(Z)=>!!(Z&&Z.length);K8.set=_4.set;K8.setters=[];K8.get=_4.get;K8.checkRequired=_4.checkRequired;K8.prototype.checkRequired=function(Z,Y){if(_4._isRef(this,Z,Y,!0))return!!Z;return this.constructor._checkRequired(Z)};K8.prototype.cast=function(Z,Y,X){let J;if(_4._isRef(this,Z,Y,X)){if(Z&&Z.isMongooseBuffer)return Z;if(Buffer.isBuffer(Z)){if(!Z||!Z.isMongooseBuffer){if(Z=new XX(Z,[this.path,Y]),this.options.subtype!=null)Z._subtype=this.options.subtype}return Z}if(Z instanceof gh){if(J=new XX(Z.value(!0),[this.path,Y]),typeof Z.sub_type!=="number")throw new Cw("Buffer",Z,this.path,null,this);return J._subtype=Z.sub_type,J}if(Z==null||bh.isNonBuiltinObject(Z))return this._castRef(Z,Y,X)}if(Z&&Z._id)Z=Z._id;if(Z&&Z.isMongooseBuffer)return Z;if(Buffer.isBuffer(Z)){if(!Z||!Z.isMongooseBuffer){if(Z=new XX(Z,[this.path,Y]),this.options.subtype!=null)Z._subtype=this.options.subtype}return Z}if(Z instanceof gh){if(J=new XX(Z.value(!0),[this.path,Y]),typeof Z.sub_type!=="number")throw new Cw("Buffer",Z,this.path,null,this);return J._subtype=Z.sub_type,J}if(Z===null)return Z;const $=typeof Z;if($==="string"||$==="number"||Array.isArray(Z)||$==="object"&&Z.type==="Buffer"&&Array.isArray(Z.data)){if($==="number")Z=[Z];if(J=new XX(Z,[this.path,Y]),this.options.subtype!=null)J._subtype=this.options.subtype;return J}throw new Cw("Buffer",Z,this.path,null,this)};K8.prototype.subtype=function(Z){return this.options.subtype=Z,this};/*!
 * ignore
 */K8.prototype.$conditionalHandlers=bh.options(_4.prototype.$conditionalHandlers,{$bitsAllClear:XQ,$bitsAnyClear:XQ,$bitsAllSet:XQ,$bitsAnySet:XQ,$gt:JQ,$gte:JQ,$lt:JQ,$lte:JQ});K8.prototype.castForQuery=function(Z,Y,X){let J;if(Z!=null){if(J=this.$conditionalHandlers[Z],!J)throw new Error("Can\'t use "+Z+" with Buffer.");return J.call(this,Y)}const $=this.applySetters(Y,X);return $?$.toObject({transform:!1,virtuals:!1}):$};/*!
 * Module exports.
 */vh.exports=K8});var uh=w((B_1,mh)=>{var Wq1=N6();class u3 extends Wq1{}var Ow=i6();Object.defineProperty(u3.prototype,"min",Ow);Object.defineProperty(u3.prototype,"max",Ow);Object.defineProperty(u3.prototype,"expires",Ow);/*!
 * ignore
 */mh.exports=u3});var ch=w((N_1,dh)=>{var Sw=import.meta.require("assert");dh.exports=function Z(Y){if(Y==null||Y==="")return null;if(Y instanceof Date)return Sw.ok(!isNaN(Y.valueOf())),Y;let X;if(Sw.ok(typeof Y!=="boolean"),Y instanceof Number||typeof Y==="number")X=new Date(Y);else if(typeof Y==="string"&&!isNaN(Number(Y))&&(Number(Y)>=275761||Number(Y)<-271820))X=new Date(Number(Y));else if(typeof Y.valueOf==="function")X=new Date(Y.valueOf());else X=new Date(Y);if(!isNaN(X.valueOf()))return X;Sw.ok(!1)}});var nh=w((A_1,ih)=>{var U0=function(Z,Y){k5.call(this,Z,Y,"Date")},$Q=function(Z){return this.cast(Z)};/*!
 * Module requirements.
 */var lh=n1(),Gq1=uh(),k5=i0(),Kq1=ch(),Qq1=r8(),ph=G1(),zq1=k5.CastError;U0.schemaName="Date";U0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */U0.prototype=Object.create(k5.prototype);U0.prototype.constructor=U0;U0.prototype.OptionsConstructor=Gq1;/*!
 * ignore
 */U0._cast=Kq1;U0.set=k5.set;U0.setters=[];U0.get=k5.get;U0.cast=function Z(Y){if(arguments.length===0)return this._cast;if(Y===!1)Y=this._defaultCaster;return this._cast=Y,this._cast};/*!
 * ignore
 */U0._defaultCaster=(Z)=>{if(Z!=null&&!(Z instanceof Date))throw new Error;return Z};U0.prototype.expires=function(Z){if(Qq1(this._index)!=="Object")this._index={};return this._index.expires=Z,ph.expires(this._index),this};/*!
 * ignore
 */U0._checkRequired=(Z)=>Z instanceof Date;U0.checkRequired=k5.checkRequired;U0.prototype.checkRequired=function(Z,Y){if(typeof Z==="object"&&k5._isRef(this,Z,Y,!0))return Z!=null;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():U0.checkRequired())(Z)};U0.prototype.min=function(Z,Y){if(this.minValidator)this.validators=this.validators.filter(function(X){return X.validator!==this.minValidator},this);if(Z){let X=Y||lh.messages.Date.min;if(typeof X==="string")X=X.replace(/{MIN}/,Z===Date.now?"Date.now()":Z.toString());const J=this;this.validators.push({validator:this.minValidator=function($){let W=Z;if(typeof Z==="function"&&Z!==Date.now)W=W.call(this);const G=W===Date.now?W():J.cast(W);return $===null||$.valueOf()>=G.valueOf()},message:X,type:"min",min:Z})}return this};U0.prototype.max=function(Z,Y){if(this.maxValidator)this.validators=this.validators.filter(function(X){return X.validator!==this.maxValidator},this);if(Z){let X=Y||lh.messages.Date.max;if(typeof X==="string")X=X.replace(/{MAX}/,Z===Date.now?"Date.now()":Z.toString());const J=this;this.validators.push({validator:this.maxValidator=function($){let W=Z;if(typeof W==="function"&&W!==Date.now)W=W.call(this);const G=W===Date.now?W():J.cast(W);return $===null||$.valueOf()<=G.valueOf()},message:X,type:"max",max:Z})}return this};U0.prototype.cast=function(Z){let Y;if(typeof this._castFunction==="function")Y=this._castFunction;else if(typeof this.constructor.cast==="function")Y=this.constructor.cast();else Y=U0.cast();try{return Y(Z)}catch(X){throw new zq1("date",Z,this.path,X,this)}};U0.prototype.$conditionalHandlers=ph.options(k5.prototype.$conditionalHandlers,{$gt:$Q,$gte:$Q,$lt:$Q,$lte:$Q});U0.prototype.castForQuery=function(Z,Y,X){if(Z==null)return this.applySetters(Y,X);const J=this.$conditionalHandlers[Z];if(!J)throw new Error("Can\'t use "+Z+" with Date.");return J.call(this,Y)};/*!
 * Module exports.
 */ih.exports=U0});var rh=w((D_1,ah)=>{var i9=KW(),Hq1=import.meta.require("assert");ah.exports=function Z(Y){if(Y==null)return Y;if(typeof Y==="object"&&typeof Y.$numberDecimal==="string")return i9.fromString(Y.$numberDecimal);if(Y instanceof i9)return Y;if(typeof Y==="string")return i9.fromString(Y);if(typeof Buffer==="function"&&Buffer.isBuffer(Y))return new i9(Y);if(typeof Uint8Array==="function"&&Y instanceof Uint8Array)return new i9(Y);if(typeof Y==="number")return i9.fromString(String(Y));if(typeof Y.valueOf==="function"&&typeof Y.valueOf()==="string")return i9.fromString(Y.valueOf());Hq1.ok(!1)}});var oh=w((P_1,th)=>{var g0=function(Z,Y){x4.call(this,Z,Y,"Decimal128")},WQ=function(Z){return this.cast(Z)};/*!
 * Module dependencies.
 */var x4=i0(),Fq1=x4.CastError,Uq1=rh(),Vq1=G1(),kw=u8();g0.schemaName="Decimal128";g0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */g0.prototype=Object.create(x4.prototype);g0.prototype.constructor=g0;/*!
 * ignore
 */g0._cast=Uq1;g0.set=x4.set;g0.setters=[];g0.get=x4.get;g0.cast=function Z(Y){if(arguments.length===0)return this._cast;if(Y===!1)Y=this._defaultCaster;return this._cast=Y,this._cast};/*!
 * ignore
 */g0._defaultCaster=(Z)=>{if(Z!=null&&!kw(Z,"Decimal128"))throw new Error;return Z};/*!
 * ignore
 */g0._checkRequired=(Z)=>kw(Z,"Decimal128");g0.checkRequired=x4.checkRequired;g0.prototype.checkRequired=function Z(Y,X){if(x4._isRef(this,Y,X,!0))return!!Y;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():g0.checkRequired())(Y)};g0.prototype.cast=function(Z,Y,X){if(x4._isRef(this,Z,Y,X)){if(kw(Z,"Decimal128"))return Z;return this._castRef(Z,Y,X)}let J;if(typeof this._castFunction==="function")J=this._castFunction;else if(typeof this.constructor.cast==="function")J=this.constructor.cast();else J=g0.cast();try{return J(Z)}catch($){throw new Fq1("Decimal128",Z,this.path,$,this)}};/*!
 * ignore
 */g0.prototype.$conditionalHandlers=Vq1.options(x4.prototype.$conditionalHandlers,{$gt:WQ,$gte:WQ,$lt:WQ,$lte:WQ});/*!
 * Module exports.
 */th.exports=g0});var Zm=w((T_1,eh)=>{var qq1=N6();class _w extends qq1{}var Lq1=i6();Object.defineProperty(_w.prototype,"_id",Lq1);eh.exports=_w});var xw=w((I_1,Ym)=>{Ym.exports=function Z(Y,X,J){if(Y.length===0)return J();let $=Y.length,W=null;for(let G of Y)X(G,function(K){if(W!=null)return;if(K!=null)return W=K,J(W);if(--$<=0)return J()})}});var $m=w((j_1,Jm)=>{var Xm=xw();/*!
 * ignore
 */Jm.exports=function Z(Y){Y.s.hooks.pre("save",!1,function J($){if(this.$isSubdocument){$();return}const W=this,G=this.$getAllSubdocs();if(!G.length){$();return}Xm(G,function(K,Q){K.$__schema.s.hooks.execPre("save",K,function(z){Q(z)})},function(K){if(K)return W.$__schema.s.hooks.execPost("save:error",W,[W],{error:K},function(Q){$(Q)});$()})},null,!0),Y.s.hooks.post("save",function J($,W){if(this.$isSubdocument){W();return}const G=this,K=this.$getAllSubdocs();if(!K.length){W();return}Xm(K,function(Q,z){Q.$__schema.s.hooks.execPost("save",Q,[Q],function(H){z(H)})},function(Q){if(Q)return G.$__schema.s.hooks.execPost("save:error",G,[G],{error:Q},function(z){W(z)});W()})},null,!0)}});var Km=w((E_1,yw)=>{var Gm=function(){let Z,Y;if(this.$__.shardval){Z=Object.keys(this.$__.shardval),Y=Z.length,this.$where=this.$where||{};for(let X=0;X<Y;++X)this.$where[Z[X]]=this.$__.shardval[Z[X]]}},fw=function(){const Z=this.$__schema.options.shardKey||this.$__schema.options.shardkey;if(!Wm.isPOJO(Z))return;const Y=this.$__.shardval={},X=Object.keys(Z),J=X.length;let $;for(let W=0;W<J;++W)if($=this.$__getValue(X[W]),$==null)Y[X[W]]=$;else if(Wm.isMongooseObject($))Y[X[W]]=$.toObject({depopulate:!0,_isNested:!0});else if($ instanceof Date||$[wq1])Y[X[W]]=$;else if(typeof $.valueOf==="function")Y[X[W]]=$.valueOf();else Y[X[W]]=$},wq1=Z1().objectIdSymbol,Wm=G1();/*!
 * ignore
 */yw.exports=function Z(Y){Y.post("init",function X(){return fw.call(this),this}),Y.pre("save",function X(J){Gm.call(this),J()}),Y.pre("remove",function X(J){Gm.call(this),J()}),Y.post("save",function X(){fw.call(this)})};/*!
 * ignore
 *//*!
 * ignore
 */yw.exports.storeShard=fw;/*!
 * ignore
 */});var Fm=w((C_1,Hm)=>{var Qm=function(Z,Y){const X=new Map;Y=Y||new Map;const J=Object.keys(Z.$__.activePaths.init).concat(Object.keys(Z.$__.activePaths.modify));for(let W of J){const G=Z.$__getValue(W);if(G!=null&&Array.isArray(G)&&Rq1.isMongooseDocumentArray(G)&&G.length&&G[JX]!=null&&Object.keys(G[JX]).length!==0){const K=Y.get(W)||{};X.set(W,zm(K,G[JX]))}}const $=Z.$__dirty();for(let W of $){const{path:G,value:K}=W;if(K!=null&&K[JX]!=null&&Object.keys(K[JX]).length!==0){const Q=Y.get(G)||{};X.set(G,zm(Q,K[JX]))}}return X},zm=function(Z,Y){if(Z=Z||{},Y.$pullAll!=null)Z.$pullAll=(Z.$pullAll||[]).concat(Y.$pullAll);if(Y.$push!=null)Z.$push=Z.$push||{},Z.$push.$each=(Z.$push.$each||[]).concat(Y.$push.$each);if(Y.$addToSet!=null)Z.$addToSet=(Z.$addToSet||[]).concat(Y.$addToSet);if(Y.$set!=null)Z.$set=Object.assign(Z.$set||{},Y.$set);return Z},JX=Z1().arrayAtomicsSymbol,GQ=Z1().sessionNewDocuments,Rq1=G1();Hm.exports=function Z(Y){Y.pre("save",function X(){const J=this.$session();if(J==null)return;if(J.transaction==null||J[GQ]==null)return;if(!J[GQ].has(this)){const $={};if(this.isNew)$.isNew=!0;if(this.$__schema.options.versionKey)$.versionKey=this.get(this.$__schema.options.versionKey);$.modifiedPaths=new Set(Object.keys(this.$__.activePaths.getStatePaths("modify"))),$.atomics=Qm(this),J[GQ].set(this,$)}else{const $=J[GQ].get(this);for(let W of Object.keys(this.$__.activePaths.getStatePaths("modify")))$.modifiedPaths.add(W);$.atomics=Qm(this,$.atomics)}})}});var Vm=w((O_1,Um)=>{/*!
 * ignore
 */Um.exports=function Z(Y){Y.pre("save",!1,function J($,W){const G=this;if(this.$isSubdocument)return $();const K=W&&typeof W==="object"&&("validateBeforeSave"in W);let Q;if(K)Q=!!W.validateBeforeSave;else Q=this.$__schema.options.validateBeforeSave;if(Q){const H=W&&typeof W==="object"&&("validateModifiedOnly"in W)?{validateModifiedOnly:W.validateModifiedOnly}:null;this.$validate(H).then(()=>{this.$op="save",$()},(F)=>{G.$__schema.s.hooks.execPost("save:error",G,[G],{error:F},function(U){G.$op="save",$(U)})})}else $()},null,!0)}});var gw=w((Mq1)=>{Mq1.saveSubdocs=$m();Mq1.sharding=Km();Mq1.trackTransaction=Fm();Mq1.validateBeforeSave=Vm()});var wm=w((k_1,Lm)=>{var qm=gw();Lm.exports=function Z(Y){for(let X of Object.values(qm))X(Y,{deduplicate:!0});Y.plugins=Object.values(qm).map((X)=>({fn:X,opts:{deduplicate:!0}})).concat(Y.plugins)}});var Bm=w((__1,Mm)=>{var Pq1=UK(),Tq1=G9(),Iq1=u8(),jq1=U4(),Rm=o4();Mm.exports=function Z(Y,X,J,$){const W=Object.keys(X);let G=0;const K=W.length;let Q;if(J=J||"",$=$||new WeakSet,$.has(X))return;$.add(X);while(G<K){if(Q=W[G++],!J){if(Q==="discriminators"||Q==="base"||Q==="_applyDiscriminators"||Q==="_userProvidedOptions"||Q==="options"||Q==="tree")continue}if(J==="tree"&&X!=null&&X.instanceOfSchema)continue;if(Tq1.has(Q))continue;if(Y[Q]==null)Y[Q]=X[Q];else if(Rm(X[Q])){if(!Rm(Y[Q]))Y[Q]={};if(X[Q]!=null){if(X[Q].$isSingleNested&&Y[Q].$isMongooseDocumentArray||X[Q].$isMongooseDocumentArray&&Y[Q].$isSingleNested||X[Q].$isMongooseDocumentArrayElement&&Y[Q].$isMongooseDocumentArrayElement)continue;else if(X[Q].instanceOfSchema){if(Y[Q].instanceOfSchema)Pq1(Y[Q],X[Q].clone(),!0);else Y[Q]=X[Q].clone();continue}else if(Iq1(X[Q],"ObjectId")){Y[Q]=new jq1(X[Q]);continue}}Z(Y[Q],X[Q],J?J+"."+Q:Q,$)}}if(X!=null&&X.instanceOfSchema)Y.tree=Object.assign({},X.tree,Y.tree)}});var KQ=w((x_1,Dm)=>{var Nm=h9(),Eq1=wm(),Cq1=w0(),Oq1=wK().defineKey,Sq1=z0(),bw=G1(),kq1=Bm(),Am={toJSON:!0,toObject:!0,_id:!0,id:!0,virtuals:!0,methods:!0};/*!
 * ignore
 */Dm.exports=function Z(Y,X,J,$,W,G){if(!(J&&J.instanceOfSchema))throw new Error("You must pass a valid discriminator Schema");if(G=G==null?!0:G,Y.schema.discriminatorMapping&&!Y.schema.discriminatorMapping.isRoot)throw new Error('Discriminator "'+X+'" can only be a discriminator of the root model');if(W){const F=Sq1(Y.base,"options.applyPluginsToDiscriminators",!1)||!G;Y.base._applyPlugins(J,{skipTopLevel:!F})}else if(!G)Eq1(J);const K=Y.schema.options.discriminatorKey,Q=Y.schema.path(K);if(Q!=null){if(!bw.hasUserDefinedProperty(Q.options,"select"))Q.options.select=!0;Q.options.$skipDiscriminatorCheck=!0}else{const F={};F[K]={default:void 0,select:!0,$skipDiscriminatorCheck:!0},F[K][Y.schema.options.typeKey]=String,Y.schema.add(F),Oq1({prop:K,prototype:Y.prototype,options:Y.schema.options})}if(J.path(K)&&J.path(K).options.$skipDiscriminatorCheck!==!0)throw new Error('Discriminator "'+X+'" cannot have field with name "'+K+'"');let z=X;if(typeof $==="string"&&$.length||$!=null)z=$;function H(F,U){if(F._baseSchema=U,U.paths._id&&U.paths._id.options&&!U.paths._id.options.auto)F.remove("_id");const V=Object.keys(U.paths),q=[];for(let O of V){if(F.nested[O]){q.push(O);continue}if(O.indexOf(".")===-1)continue;const E=O.split(".").slice(0,-1);let j="";for(let n of E)if(j+=(j.length?".":"")+n,F.paths[j]instanceof Nm||F.singleNestedPaths[j]instanceof Nm)q.push(O)}kq1(F,U);for(let O of q)delete F.paths[O];F.childSchemas.forEach((O)=>{O.model.prototype.$__setSchema(O.schema)});const L={};if(L[K]={default:z,select:!0,set:function(O){if(O===z||Array.isArray(z)&&bw.deepEqual(O,z))return z;throw new Error('Can\'t set discriminator key "'+K+'"')},$skipDiscriminatorCheck:!0},L[K][F.options.typeKey]=Q?Q.options[F.options.typeKey]:String,F.add(L),F.discriminatorMapping={key:K,value:z,isRoot:!1},U.options.collection)F.options.collection=U.options.collection;const R=F.options.toJSON,B=F.options.toObject,N=F.options._id,M=F.options.id,D=Object.keys(F.options);F.options.discriminatorKey=U.options.discriminatorKey;const m=F._userProvidedOptions;for(let O of D)if(!Am[O]){if((O in m)&&!bw.deepEqual(F.options[O],U.options[O]))throw new Error("Can\'t customize discriminator option "+O+" (can only modify "+Object.keys(Am).join(", ")+")")}F.options=Cq1(U.options);for(let O of Object.keys(m))F.options[O]=m[O];if(R)F.options.toJSON=R;if(B)F.options.toObject=B;if(typeof N!=="undefined")F.options._id=N;if(F.options.id=M,G)F.s.hooks=Y.schema.s.hooks.merge(F.s.hooks);if(W)F.plugins=Array.prototype.slice.call(U.plugins);F.callQueue=U.callQueue.concat(F.callQueue),delete F._requiredpaths}if(H(J,Y.schema),!Y.discriminators)Y.discriminators={};if(!Y.schema.discriminatorMapping)Y.schema.discriminatorMapping={key:K,value:null,isRoot:!0};if(!Y.schema.discriminators)Y.schema.discriminators={};if(Y.schema.discriminators[X]=J,Y.discriminators[X]&&!J.options.overwriteModels)throw new Error('Discriminator with name "'+X+'" already exists');return J}});var QQ=w((f_1,Pm)=>{var _q1=j7();Pm.exports=function Z(Y,X,J){const $=Y.schema.options.discriminatorKey;let W=X!=null&&X[$];if(W==null)W=J;if(Y.discriminators&&W!=null)if(Y.discriminators[W])Y=Y.discriminators[W];else{const G=_q1(Y.discriminators,W);if(G)Y=G}return Y}});var vw=w((y_1,Tm)=>{var xq1=Xw();Tm.exports=function Z(Y,X){if(X==null||X._id==null)return Y;if(Y=Y.clone(),!X._id)Y.remove("_id"),Y.options._id=!1;else if(!Y.paths._id)xq1(Y),Y.options._id=!0;return Y}});var mw=w((g_1,Im)=>{/*!
 * Module dependencies.
 */var fq1=n1();class hw extends fq1{constructor(Z,Y){const X=`Cannot create use schema for property "${Z}" because the schema has the ${Y} option enabled.`;super(X)}}Object.defineProperty(hw.prototype,"name",{value:"InvalidSchemaOptionError"});/*!
 * exports
 */Im.exports=hw});var lw=w((b_1,Om)=>{var t1=function(Z,Y,X){if(Z.options.timeseries)throw new lq1(Y,"timeseries");const J=t1.defaultOptions&&t1.defaultOptions._id;if(J!=null)X=X||{},X._id=J;if(Z=mq1(Z,X),this.caster=Cm(Z),this.caster.path=Y,this.caster.prototype.$basePath=Y,this.schema=Z,this.$isSingleNested=!0,this.base=Z.base,$X.call(this,Y,X,"Embedded"),Z._applyDiscriminators!=null&&!X?._skipApplyDiscriminators)for(let $ of Z._applyDiscriminators.keys())this.discriminator($,Z._applyDiscriminators.get($))},Cm=function(Z,Y){zQ||(zQ=AK());const X=function $(W,G,K){if(this.$__parent=K,zQ.apply(this,arguments),K==null)return;this.$session(K.$session())};Z._preCompile();const J=Y!=null?Y.prototype:zQ.prototype;X.prototype=Object.create(J),X.prototype.$__setSchema(Z),X.prototype.constructor=X,X.base=Z.base,X.schema=Z,X.$isSingleNested=!0,X.events=new uw,X.prototype.toBSON=function(){return this.toObject(uq1)};for(let $ in Z.methods)X.prototype[$]=Z.methods[$];for(let $ in Z.statics)X[$]=Z.statics[$];for(let $ in uw.prototype)X[$]=uw.prototype[$];return X};/*!
 * Module dependencies.
 */var jm=O8(),uw=import.meta.require("events").EventEmitter,yq1=VL(),gq1=Zm(),$X=i0(),bq1=qK(),vq1=zK(),Em=g3().castToNumber,hq1=KQ(),dw=Tw(),cw=QQ(),mq1=vw(),uq1=n7().internalToObjectOptions,dq1=cY(),cq1=G1(),lq1=mw(),zQ;Om.exports=t1;/*!
 * ignore
 */t1.prototype=Object.create($X.prototype);t1.prototype.constructor=t1;t1.prototype.OptionsConstructor=gq1;/*!
 * ignore
 */t1.prototype.$conditionalHandlers.$geoWithin=function Z(Y,X){return{$geometry:this.castForQuery(null,Y.$geometry,X)}};/*!
 * ignore
 */t1.prototype.$conditionalHandlers.$near=t1.prototype.$conditionalHandlers.$nearSphere=dw.cast$near;t1.prototype.$conditionalHandlers.$within=t1.prototype.$conditionalHandlers.$geoWithin=dw.cast$within;t1.prototype.$conditionalHandlers.$geoIntersects=dw.cast$geoIntersects;t1.prototype.$conditionalHandlers.$minDistance=Em;t1.prototype.$conditionalHandlers.$maxDistance=Em;t1.prototype.$conditionalHandlers.$exists=vq1;t1.prototype.cast=function(Z,Y,X,J,$){if(Z&&Z.$isSingleNested&&Z.parent===Y)return Z;if(Z!=null&&(typeof Z!=="object"||Array.isArray(Z)))throw new yq1(this.path,Z);const W=this.schema.path(this.schema.options.discriminatorKey),G=W==null?null:W.getDefault(Y),K=cw(this.caster,Z,G);let Q;const z=Y&&Y.$__&&Y.$__.selected,H=this.path,F=z==null?null:Object.keys(z).reduce((U,V)=>{if(V.startsWith(H+"."))U=U||{},U[V.substring(H.length+1)]=z[V];return U},null);if(X){Q=new K(void 0,F,Y,!1,{defaults:!1}),delete Q.$__.defaults,Q.$init(Z);const U=dq1(F);bq1(Q,F,U)}else{if($=Object.assign({},$,{priorDoc:J}),Object.keys(Z).length===0)return new K({},F,Y,void 0,$);return new K(Z,F,Y,void 0,$)}return Q};t1.prototype.castForQuery=function(Z,Y,X,J){let $;if(Z!=null){if($=this.$conditionalHandlers[Z],!$)throw new Error("Can\'t use "+Z);return $.call(this,Y)}if(Y==null)return Y;const W=cw(this.caster,Y);if(Y instanceof W)return Y;if(this.options.runSetters)Y=this._applySetters(Y,X);const G=J!=null&&J.strict!=null?J.strict:void 0;try{Y=new W(Y,G)}catch(K){if(!(K instanceof jm))throw new jm("Embedded",Y,this.path,K,this);throw K}return Y};t1.prototype.doValidate=function(Z,Y,X,J){const $=cw(this.caster,Z);if(Z&&!(Z instanceof $))Z=new $(Z,null,X!=null&&X.$__!=null?X:null);if(J&&J.skipSchemaValidators){if(!Z)return Y(null);return Z.validate().then(()=>Y(null),(W)=>Y(W))}$X.prototype.doValidate.call(this,Z,function(W){if(W)return Y(W);if(!Z)return Y(null);Z.validate().then(()=>Y(null),(G)=>Y(G))},X,J)};t1.prototype.doValidateSync=function(Z,Y,X){if(!X||!X.skipSchemaValidators){const J=$X.prototype.doValidateSync.call(this,Z,Y);if(J)return J}if(!Z)return;return Z.validateSync()};t1.prototype.discriminator=function(Z,Y,X){X=X||{};const J=cq1.isPOJO(X)?X.value:X,$=typeof X.clone==="boolean"?X.clone:!0;if(Y.instanceOfSchema&&$)Y=Y.clone();return Y=hq1(this.caster,Z,Y,J),this.caster.discriminators[Z]=Cm(Y,this.caster),this.caster.discriminators[Z]};/*!
 * ignore
 */t1.defaultOptions={};t1.set=$X.set;t1.setters=[];t1.get=$X.get;/*!
 * ignore
 */t1.prototype.toJSON=function Z(){return{path:this.path,options:this.options}};/*!
 * ignore
 */t1.prototype.clone=function(){const Z=new this.constructor(this.schema,this.path,{...this.options,_skipApplyDiscriminators:!0});if(Z.validators=this.validators.slice(),this.requiredValidator!==void 0)Z.requiredValidator=this.requiredValidator;return Z.caster.discriminators=Object.assign({},this.caster.discriminators),Z}});var km=w((v_1,Sm)=>{var f4=function(Z,Y){if(this.$parentSchemaType=Y&&Y.$parentSchemaType,!this.$parentSchemaType)throw new pq1("Cannot create DocumentArrayElement schematype without a parent");delete Y.$parentSchemaType,pw.call(this,Z,Y,"DocumentArrayElement"),this.$isMongooseDocumentArrayElement=!0};/*!
 * Module dependencies.
 */var pq1=W0(),pw=i0(),iq1=lw(),nq1=QQ();f4.schemaName="DocumentArrayElement";f4.defaultOptions={};/*!
 * Inherits from SchemaType.
 */f4.prototype=Object.create(pw.prototype);f4.prototype.constructor=f4;f4.prototype.cast=function(...Z){return this.$parentSchemaType.cast(...Z)[0]};f4.prototype.doValidate=function(Z,Y,X,J){const $=nq1(this.caster,Z);if(Z&&!(Z instanceof $))Z=new $(Z,X,null,null,J&&J.index!=null?J.index:null);return iq1.prototype.doValidate.call(this,Z,Y,X,J)};f4.prototype.clone=function(){this.options.$parentSchemaType=this.$parentSchemaType;const Z=pw.prototype.clone.apply(this,arguments);return delete this.options.$parentSchemaType,Z.caster=this.caster,Z.schema=this.schema,Z};/*!
 * Module exports.
 */Sm.exports=f4});var fm=w((h_1,xm)=>{var aq1=N6();class HQ extends aq1{}var _m=i6();Object.defineProperty(HQ.prototype,"excludeIndexes",_m);Object.defineProperty(HQ.prototype,"_id",_m);/*!
 * ignore
 */xm.exports=HQ});var dm=w((m_1,um)=>{var P0=function(Z,Y,X,J){if(Y.options&&Y.options.timeseries)throw new eq1(Z,"timeseries");const $=P0.defaultOptions&&P0.defaultOptions._id;if($!=null)J=J||{},J._id=$;if(J!=null&&J._id!=null)Y=gm(Y,J);else if(X!=null&&X._id!=null)Y=gm(Y,X);const W=mm(Y,X);W.prototype.$basePath=Z,hm.call(this,Z,W,X),this.schema=Y,this.schemaOptions=J||{},this.$isMongooseDocumentArray=!0,this.Constructor=W,W.base=Y.base;const G=this.defaultValue;if(!("defaultValue"in this)||G!==void 0)this.default(function(){let Q=G.call(this);if(Q!=null&&!Array.isArray(Q))Q=[Q];return Q});const K=this;if(this.$embeddedSchemaType=new sq1(Z+".$",{required:this&&this.schemaOptions&&this.schemaOptions.required||!1,$parentSchemaType:K}),this.$embeddedSchemaType.caster=this.Constructor,this.$embeddedSchemaType.schema=this.schema,Y._applyDiscriminators!=null&&!X?._skipApplyDiscriminators)for(let Q of Y._applyDiscriminators.keys())this.discriminator(Q,Y._applyDiscriminators.get(Q))},mm=function(Z,Y,X){n9||(n9=pY());function J(){if(n9.apply(this,arguments),this.__parentArray==null||this.__parentArray.getArrayParent()==null)return;this.$session(this.__parentArray.getArrayParent().$session())}Z._preCompile();const $=X!=null?X.prototype:n9.prototype;J.prototype=Object.create($),J.prototype.$__setSchema(Z),J.schema=Z,J.prototype.constructor=J,J.$isArraySubdocument=!0,J.events=new iw,J.base=Z.base;for(let W in Z.methods)J.prototype[W]=Z.methods[W];for(let W in Z.statics)J[W]=Z.statics[W];for(let W in iw.prototype)J[W]=iw.prototype[W];return J.options=Y,J},XL1=function(Z,Y,X){if(!(X&&Y))return;const J=Z.path+".",$=Object.keys(Y);let W=$.length;const G={};let K,Q,z;while(W--)if(Q=$[W],Q.startsWith(J)){if(z=Q.substring(J.length),z==="$")continue;if(z.startsWith("$."))z=z.substring(2);K||(K=!0),G[z]=Y[Q]}return K&&G||void 0};/*!
 * Module dependencies.
 */var ym=O8(),sq1=km(),iw=import.meta.require("events").EventEmitter,hm=rK(),rq1=fm(),d3=i0(),tq1=KQ(),gm=vw(),oq1=MK(),WX=G1(),FQ=QQ(),eq1=mw(),bm=Z1().arrayAtomicsSymbol,nw=Z1().arrayPathSymbol,ZL1=Z1().documentArrayParent,y4,n9;P0.schemaName="DocumentArray";P0.options={castNonArrays:!0};/*!
 * Inherits from SchemaArray.
 */P0.prototype=Object.create(hm.prototype);P0.prototype.constructor=P0;P0.prototype.OptionsConstructor=rq1;/*!
 * ignore
 */P0.prototype.discriminator=function(Z,Y,X){if(typeof Z==="function")Z=WX.getFunctionName(Z);X=X||{};const J=WX.isPOJO(X)?X.value:X,$=typeof X.clone==="boolean"?X.clone:!0;if(Y.instanceOfSchema&&$)Y=Y.clone();Y=tq1(this.casterConstructor,Z,Y,J);const W=mm(Y,null,this.casterConstructor);W.baseCasterConstructor=this.casterConstructor;try{Object.defineProperty(W,"name",{value:Z})}catch(G){}return this.casterConstructor.discriminators[Z]=W,this.casterConstructor.discriminators[Z]};P0.prototype.doValidate=function(Z,Y,X,J){y4||(y4=u9());const $=this;try{d3.prototype.doValidate.call(this,Z,W,X)}catch(G){return Y(G)}function W(G){if(G)return Y(G);let K=Z&&Z.length,Q;if(!K)return Y();if(J&&J.updateValidator)return Y();if(!WX.isMongooseDocumentArray(Z))Z=new y4(Z,$.path,X);function z(H){if(H!=null)Q=H;--K||Y(Q)}for(let H=0,F=K;H<F;++H){let U=Z[H];if(U==null){--K||Y(Q);continue}if(!(U instanceof n9)){const V=FQ($.casterConstructor,Z[H]);U=Z[H]=new V(U,Z,void 0,void 0,H)}if(J!=null&&J.validateModifiedOnly&&!U.$isModified()){--K||Y(Q);continue}U.$__validate(z)}}};P0.prototype.doValidateSync=function(Z,Y,X){const J=d3.prototype.doValidateSync.call(this,Z,Y);if(J!=null)return J;const $=Z&&Z.length;let W=null;if(!$)return;for(let G=0,K=$;G<K;++G){let Q=Z[G];if(!Q)continue;if(!(Q instanceof n9)){const H=FQ(this.casterConstructor,Z[G]);Q=Z[G]=new H(Q,Z,void 0,void 0,G)}if(X!=null&&X.validateModifiedOnly&&!Q.$isModified())continue;const z=Q.validateSync();if(z&&W==null)W=z}return W};/*!
 * ignore
 */P0.prototype.getDefault=function(Z,Y,X){let J=typeof this.defaultValue==="function"?this.defaultValue.call(Z):this.defaultValue;if(J==null)return J;if(X&&X.skipCast)return J;if(y4||(y4=u9()),!Array.isArray(J))J=[J];J=new y4(J,this.path,Z);for(let $=0;$<J.length;++$){const G=new(FQ(this.casterConstructor,J[$]))({},J,void 0,void 0,$);G.$init(J[$]),G.isNew=!0,Object.assign(G.$__.activePaths.default,G.$__.activePaths.init),G.$__.activePaths.init={},J[$]=G}return J};var YL1=Object.freeze({transform:!1,virtuals:!1}),vm=Object.freeze({skipId:!1,willInit:!0});P0.prototype.cast=function(Z,Y,X,J,$){if(y4||(y4=u9()),Z!=null&&Z[nw]!=null&&Z===J)return Z;let W,G;$=$||{};const K=$.path||this.path;if(!Array.isArray(Z)){if(!X&&!P0.options.castNonArrays)throw new ym("DocumentArray",Z,this.path,null,this);if(!!Y&&X)Y.markModified(K);return this.cast([Z],Y,X,J,$)}if(!$.skipDocumentArrayCast||WX.isMongooseDocumentArray(Z))Z=new y4(Z,K,Y);if(J!=null)Z[bm]=J[bm]||{};if($.arrayPathIndex!=null)Z[nw]=K+"."+$.arrayPathIndex;const Q=WX.isMongooseDocumentArray(Z)?Z.__array:Z,z=Q.length;for(let H=0;H<z;++H){if(!Q[H])continue;const F=FQ(this.casterConstructor,Q[H]);if(Q[H].$__!=null&&!(Q[H]instanceof F)){const U=oq1(Q[H],!0);if(Q[H]!==U)Q[H]=U;else Q[H]=Q[H].toObject({transform:!1,virtuals:Q[H].schema===F.schema})}if(Q[H]instanceof n9){if(Q[H][ZL1]!==Y)if(X){const U=new F(null,Z,vm,W,H);Q[H]=U.$init(Q[H])}else{const U=new F(Q[H],Z,void 0,void 0,H);Q[H]=U}if(Q[H].__index==null)Q[H].$setIndex(H)}else if(Q[H]!=null)if(X){if(Y)W||(W=XL1(this,Y.$__.selected,X));else W=!0;G=new F(null,Z,vm,W,H),Q[H]=G.$init(Q[H])}else{if(J&&typeof J.id==="function")G=J.id(Q[H]._id);if(J&&G&&WX.deepEqual(G.toObject(YL1),Q[H]))G.set(Q[H]),Q[H]=G;else try{G=new F(Q[H],Z,void 0,void 0,H),Q[H]=G}catch(U){throw new ym("embedded",Q[H],Z[nw],U,this)}}}return Z};/*!
 * ignore
 */P0.prototype.clone=function(){const Z=Object.assign({},this.options),Y=new this.constructor(this.path,this.schema,{...Z,_skipApplyDiscriminators:!0},this.schemaOptions);if(Y.validators=this.validators.slice(),this.requiredValidator!==void 0)Y.requiredValidator=this.requiredValidator;return Y.Constructor.discriminators=Object.assign({},this.Constructor.discriminators),Y};/*!
 * ignore
 */P0.prototype.applyGetters=function(Z,Y){return d3.prototype.applyGetters.call(this,Z,Y)};/*!
 * ignore
 */P0.defaultOptions={};P0.set=d3.set;P0.setters=[];P0.get=d3.get;/*!
 * Module exports.
 */um.exports=P0});var lm=w((u_1,cm)=>{var JL1=N6();class aw extends JL1{}var $L1=i6();Object.defineProperty(aw.prototype,"of",$L1);cm.exports=aw});var nm=w((d_1,im)=>{/*!
 * ignore
 */var sw=mK(),WL1=lm(),pm=i0();/*!
 * ignore
 */class c3 extends pm{constructor(Z,Y){super(Z,Y,"Map");this.$isSchemaMap=!0}set(Z,Y){return pm.set(Z,Y)}cast(Z,Y,X){if(Z instanceof sw)return Z;const J=this.path;if(X){const $=new sw({},J,Y,this.$__schemaType);if(Z instanceof global.Map)for(let W of Z.keys()){let G=Z.get(W);if(G==null)G=$.$__schemaType._castNullish(G);else G=$.$__schemaType.cast(G,Y,!0,null,{path:J+"."+W});$.$init(W,G)}else for(let W of Object.keys(Z)){let G=Z[W];if(G==null)G=$.$__schemaType._castNullish(G);else G=$.$__schemaType.cast(G,Y,!0,null,{path:J+"."+W});$.$init(W,G)}return $}return new sw(Z,J,Y,this.$__schemaType)}clone(){const Z=super.clone();if(this.$__schemaType!=null)Z.$__schemaType=this.$__schemaType.clone();return Z}}c3.schemaName="Map";c3.prototype.OptionsConstructor=WL1;c3.defaultOptions={};im.exports=c3});var rm=w((c_1,sm)=>{var GL1=N6();class UQ extends GL1{}var am=i6();Object.defineProperty(UQ.prototype,"auto",am);Object.defineProperty(UQ.prototype,"populate",am);/*!
 * ignore
 */sm.exports=UQ});var em=w((l_1,om)=>{var T0=function(Z,Y){const X=typeof Z==="string"&&Z.length===24&&/^[a-f0-9]+$/i.test(Z),J=Y&&Y.suppressWarning;if((X||typeof Z==="undefined")&&!J)ew.warn("mongoose: To create a new ObjectId please try `Mongoose.Types.ObjectId` instead of using `Mongoose.Schema.ObjectId`. Set the `suppressWarning` option if you\'re trying to create a hex char path in your schema.");g4.call(this,Z,Y,"ObjectId")},VQ=function(Z){return this.cast(Z)},tm=function(){return new tw},FL1=function(Z){if(rw||(rw=o8()),this instanceof rw){if(Z===void 0)return new tw}return Z};/*!
 * Module dependencies.
 */var KL1=rm(),g4=i0(),QL1=kL(),zL1=r8(),tw=U4(),ow=u8(),ew=G1(),HL1=g4.CastError,rw;T0.schemaName="ObjectId";T0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */T0.prototype=Object.create(g4.prototype);T0.prototype.constructor=T0;T0.prototype.OptionsConstructor=KL1;T0.get=g4.get;T0.set=g4.set;T0.setters=[];T0.prototype.auto=function(Z){if(Z)this.default(tm),this.set(FL1);return this};/*!
 * ignore
 */T0._checkRequired=(Z)=>ow(Z,"ObjectId");/*!
 * ignore
 */T0._cast=QL1;T0.cast=function Z(Y){if(arguments.length===0)return this._cast;if(Y===!1)Y=this._defaultCaster;return this._cast=Y,this._cast};/*!
 * ignore
 */T0._defaultCaster=(Z)=>{if(!ow(Z,"ObjectId"))throw new Error(Z+" is not an instance of ObjectId");return Z};T0.checkRequired=g4.checkRequired;T0.prototype.checkRequired=function Z(Y,X){if(g4._isRef(this,Y,X,!0))return!!Y;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():T0.checkRequired())(Y)};T0.prototype.cast=function(Z,Y,X){if(!ow(Z,"ObjectId")&&g4._isRef(this,Z,Y,X)){if((zL1(Z)||"").toLowerCase()==="objectid")return new tw(Z.toHexString());if(Z==null||ew.isNonBuiltinObject(Z))return this._castRef(Z,Y,X)}let J;if(typeof this._castFunction==="function")J=this._castFunction;else if(typeof this.constructor.cast==="function")J=this.constructor.cast();else J=T0.cast();try{return J(Z)}catch($){throw new HL1("ObjectId",Z,this.path,$,this)}};/*!
 * ignore
 */T0.prototype.$conditionalHandlers=ew.options(g4.prototype.$conditionalHandlers,{$gt:VQ,$gte:VQ,$lt:VQ,$lte:VQ});/*!
 * ignore
 */tm.$runBeforeSetters=!0;/*!
 * Module exports.
 */om.exports=T0});var Yu=w((p_1,Zu)=>{var UL1=N6();class r6 extends UL1{}var r7=i6();Object.defineProperty(r6.prototype,"enum",r7);Object.defineProperty(r6.prototype,"match",r7);Object.defineProperty(r6.prototype,"lowercase",r7);Object.defineProperty(r6.prototype,"trim",r7);Object.defineProperty(r6.prototype,"uppercase",r7);Object.defineProperty(r6.prototype,"minLength",r7);Object.defineProperty(r6.prototype,"minlength",r7);Object.defineProperty(r6.prototype,"maxLength",r7);Object.defineProperty(r6.prototype,"maxlength",r7);Object.defineProperty(r6.prototype,"populate",r7);/*!
 * ignore
 */Zu.exports=r6});var $u=w((i_1,Ju)=>{var b1=function(Z,Y){this.enumValues=[],this.regExp=null,b4.call(this,Z,Y,"String")},l3=function(Z,Y){return this.castForQuery(null,Z,Y)},RL1=function(Z,Y){const X=this;if(!Array.isArray(Z))return[this.castForQuery(null,Z,Y)];return Z.map(function(J){return X.castForQuery(null,J,Y)})},Xu=function(Z){if(Z==null)return this._castNullish(Z);return this.cast(Z,this)};/*!
 * Module dependencies.
 */var b4=i0(),p3=n1(),VL1=Yu(),qL1=ww(),ZR=G1(),LL1=u8(),wL1=b4.CastError;b1.schemaName="String";b1.defaultOptions={};/*!
 * Inherits from SchemaType.
 */b1.prototype=Object.create(b4.prototype);b1.prototype.constructor=b1;Object.defineProperty(b1.prototype,"OptionsConstructor",{configurable:!1,enumerable:!1,writable:!1,value:VL1});/*!
 * ignore
 */b1._cast=qL1;b1.cast=function Z(Y){if(arguments.length===0)return this._cast;if(Y===!1)Y=this._defaultCaster;return this._cast=Y,this._cast};/*!
 * ignore
 */b1._defaultCaster=(Z)=>{if(Z!=null&&typeof Z!=="string")throw new Error;return Z};b1.get=b4.get;b1.set=b4.set;b1.setters=[];/*!
 * ignore
 */b1._checkRequired=(Z)=>(Z instanceof String||typeof Z==="string")&&Z.length;b1.checkRequired=b4.checkRequired;b1.prototype.enum=function(){if(this.enumValidator)this.validators=this.validators.filter(function(J){return J.validator!==this.enumValidator},this),this.enumValidator=!1;if(arguments[0]===void 0||arguments[0]===!1)return this;let Z,Y;if(ZR.isObject(arguments[0]))if(Array.isArray(arguments[0].values))Z=arguments[0].values,Y=arguments[0].message;else Z=ZR.object.vals(arguments[0]),Y=p3.messages.String.enum;else Z=arguments,Y=p3.messages.String.enum;for(let J of Z)if(J!==void 0)this.enumValues.push(this.cast(J));const X=this.enumValues;return this.enumValidator=function(J){return J==null||~X.indexOf(J)},this.validators.push({validator:this.enumValidator,message:Y,type:"enum",enumValues:X}),this};b1.prototype.lowercase=function(Z){if(arguments.length>0&&!Z)return this;return this.set((Y)=>{if(typeof Y!=="string")Y=this.cast(Y);if(Y)return Y.toLowerCase();return Y})};b1.prototype.uppercase=function(Z){if(arguments.length>0&&!Z)return this;return this.set((Y)=>{if(typeof Y!=="string")Y=this.cast(Y);if(Y)return Y.toUpperCase();return Y})};b1.prototype.trim=function(Z){if(arguments.length>0&&!Z)return this;return this.set((Y)=>{if(typeof Y!=="string")Y=this.cast(Y);if(Y)return Y.trim();return Y})};b1.prototype.minlength=function(Z,Y){if(this.minlengthValidator)this.validators=this.validators.filter(function(X){return X.validator!==this.minlengthValidator},this);if(Z!==null&&Z!==void 0){let X=Y||p3.messages.String.minlength;X=X.replace(/{MINLENGTH}/,Z),this.validators.push({validator:this.minlengthValidator=function(J){return J===null||J.length>=Z},message:X,type:"minlength",minlength:Z})}return this};b1.prototype.minLength=b1.prototype.minlength;b1.prototype.maxlength=function(Z,Y){if(this.maxlengthValidator)this.validators=this.validators.filter(function(X){return X.validator!==this.maxlengthValidator},this);if(Z!==null&&Z!==void 0){let X=Y||p3.messages.String.maxlength;X=X.replace(/{MAXLENGTH}/,Z),this.validators.push({validator:this.maxlengthValidator=function(J){return J===null||J.length<=Z},message:X,type:"maxlength",maxlength:Z})}return this};b1.prototype.maxLength=b1.prototype.maxlength;b1.prototype.match=function Z(Y,X){const J=X||p3.messages.String.match,$=function(W){if(!Y)return!1;return Y.lastIndex=0,W!=null&&W!==""?Y.test(W):!0};return this.validators.push({validator:$,message:J,type:"regexp",regexp:Y}),this};b1.prototype.checkRequired=function Z(Y,X){if(typeof Y==="object"&&b4._isRef(this,Y,X,!0))return Y!=null;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():b1.checkRequired())(Y)};b1.prototype.cast=function(Z,Y,X){if(typeof Z!=="string"&&b4._isRef(this,Z,Y,X))return this._castRef(Z,Y,X);let J;if(typeof this._castFunction==="function")J=this._castFunction;else if(typeof this.constructor.cast==="function")J=this.constructor.cast();else J=b1.cast();try{return J(Z)}catch($){throw new wL1("string",Z,this.path,null,this)}};/*!
 * ignore
 *//*!
 * ignore
 *//*!
 * ignore
 */var ML1=ZR.options(b4.prototype.$conditionalHandlers,{$all:RL1,$gt:l3,$gte:l3,$lt:l3,$lte:l3,$options:Xu,$regex:function Z(Y){if(Object.prototype.toString.call(Y)==="[object RegExp]")return Y;return Xu.call(this,Y)},$not:l3});Object.defineProperty(b1.prototype,"$conditionalHandlers",{configurable:!1,enumerable:!1,writable:!1,value:Object.freeze(ML1)});b1.prototype.castForQuery=function(Z,Y,X){let J;if(Z!=null){if(J=this.$conditionalHandlers[Z],!J)throw new Error("Can\'t use "+Z+" with String.");return J.call(this,Y,X)}if(Object.prototype.toString.call(Y)==="[object RegExp]"||LL1(Y,"BSONRegExp"))return Y;return this.applySetters(Y,X)};/*!
 * Module exports.
 */Ju.exports=b1});var zu=w((n_1,Qu)=>{var NL1=function(Z){return Z!=null&&Buffer.from(Z,"hex")},AL1=function(Z){return Z!=null&&Z.toString("hex")},Wu=function(Z){if(typeof Z!=="string")Z="";const Y=Z.replace(/[{}-]/g,""),X=NL1(Y),J=new $R(X);return J._subtype=4,J},Ku=function(Z){let Y;if(typeof Z!=="string"&&Z!=null)return Y=AL1(Z),Y.substring(0,8)+"-"+Y.substring(8,12)+"-"+Y.substring(12,16)+"-"+Y.substring(16,20)+"-"+Y.substring(20,32);return Z},I0=function(Z,Y){_5.call(this,Z,Y,"UUID"),this.getters.push(function(X){if(X!=null&&X.$__!=null)return X;return Ku(X)})},i3=function(Z){return this.cast(Z)},YR=function(Z){return Z.map((Y)=>{return this.cast(Y)})};/*!
 * Module dependencies.
 */var $R=k3(),_5=i0(),XR=_5.CastError,Gu=G1(),qQ=pK(),JR=/[0-9a-f]{8}-[0-9a-f]{4}-[0-9][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}/i,BL1=$R.Binary;I0.schemaName="UUID";I0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */I0.prototype=Object.create(_5.prototype);I0.prototype.constructor=I0;/*!
 * ignore
 */I0._cast=function(Z){if(Z==null)return Z;function Y(X){const J=new $R(X);return J._subtype=4,J}if(typeof Z==="string")if(JR.test(Z))return Wu(Z);else throw new XR(I0.schemaName,Z,this.path);if(Buffer.isBuffer(Z))return Y(Z);if(Z instanceof BL1)return Y(Z.value(!0));if(Z.toString&&Z.toString!==Object.prototype.toString){if(JR.test(Z.toString()))return Wu(Z.toString())}throw new XR(I0.schemaName,Z,this.path)};I0.get=_5.get;I0.set=_5.set;I0.setters=[];I0.cast=function Z(Y){if(arguments.length===0)return this._cast;if(Y===!1)Y=this._defaultCaster;return this._cast=Y,this._cast};/*!
 * ignore
 */I0._checkRequired=(Z)=>Z!=null;I0.checkRequired=_5.checkRequired;I0.prototype.checkRequired=function Z(Y){if(Buffer.isBuffer(Y))Y=Ku(Y);return Y!=null&&JR.test(Y)};I0.prototype.cast=function(Z,Y,X){if(Gu.isNonBuiltinObject(Z)&&_5._isRef(this,Z,Y,X))return this._castRef(Z,Y,X);let J;if(typeof this._castFunction==="function")J=this._castFunction;else if(typeof this.constructor.cast==="function")J=this.constructor.cast();else J=I0.cast();try{return J(Z)}catch($){throw new XR(I0.schemaName,Z,this.path,$,this)}};/*!
 * ignore
 *//*!
 * ignore
 */I0.prototype.$conditionalHandlers=Gu.options(_5.prototype.$conditionalHandlers,{$bitsAllClear:qQ,$bitsAnyClear:qQ,$bitsAllSet:qQ,$bitsAnySet:qQ,$all:YR,$gt:i3,$gte:i3,$in:YR,$lt:i3,$lte:i3,$ne:i3,$nin:YR});I0.prototype.castForQuery=function(Z,Y,X){let J;if(Z!=null){if(J=this.$conditionalHandlers[Z],!J)throw new Error("Can\'t use "+Z+" with UUID.");return J.call(this,Y,X)}else return this.cast(Y)};/*!
 * Module exports.
 */Qu.exports=I0});var y3=w((DL1)=>{/*!
 * Module exports.
 */DL1.Array=rK();DL1.BigInt=kh();DL1.Boolean=xh();DL1.Buffer=hh();DL1.Date=nh();DL1.Decimal128=DL1.Decimal=oh();DL1.DocumentArray=dm();DL1.Map=nm();DL1.Mixed=h9();DL1.Number=Aw();DL1.ObjectId=em();DL1.String=$u();DL1.Subdocument=lw();DL1.UUID=zu();DL1.Oid=DL1.ObjectId;DL1.Object=DL1.Mixed;DL1.Bool=DL1.Boolean;DL1.ObjectID=DL1.ObjectId});var nY=w((FR,Du)=>{var o=function(Z,Y){if(!(this instanceof o))return new o(Z,Y);if(this.obj=Z,this.paths={},this.aliases={},this.subpaths={},this.virtuals={},this.singleNestedPaths={},this.nested={},this.inherits={},this.callQueue=[],this._indexes=[],this.methods=Y&&Y.methods||{},this.methodOptions={},this.statics=Y&&Y.statics||{},this.tree={},this.query=Y&&Y.query||{},this.childSchemas=[],this.plugins=[],this.$id=++Ru,this.mapPaths=[],this.s={hooks:new hL1},this.options=this.defaultOptions(Y),Array.isArray(Z))for(let $ of Z)this.add($);else if(Z)this.add(Z);if(Y&&Y.virtuals){const $=Y.virtuals,W=Object.keys($);for(let G of W){const K=$[G].options?$[G].options:void 0,Q=this.virtual(G,K);if($[G].get)Q.get($[G].get);if($[G].set)Q.set($[G].set)}}const X=Z&&Z._id&&o1.isObject(Z._id);if(!this.paths._id&&this.options._id&&!X)qu(this);this.setupTimestamp(this.options.timestamps)},Mu=function(Z,Y){for(let X of Object.keys(Y)){let J=null;if(Y[X]!=null)J=Y[X];else{const W=Lu(Z.paths[X],"options");if(W==null)continue;J=W.alias}if(!J)continue;const $=Z.paths[X].path;if(Array.isArray(J)){for(let W of J){if(typeof W!=="string")throw new Error("Invalid value for alias option on "+$+", got "+W);Z.aliases[W]=$,Z.virtual(W).get(function(G){return function(){if(typeof this.get==="function")return this.get(G);return this[G]}}($)).set(function(G){return function(K){return this.$set(G,K)}}($))}continue}if(typeof J!=="string")throw new Error("Invalid value for alias option on "+$+", got "+J);Z.aliases[J]=$,Z.virtual(J).get(function(W){return function(){if(typeof this.get==="function")return this.get(W);return this[W]}}($)).set(function(W){return function(G){return this.$set(W,G)}}($))}},tL1=function(Z){const Y=[];for(let X of Object.keys(Z.paths)){const J=Z.paths[X];if(J.$isMongooseDocumentArray||J.$isSingleNested)Y.push({schema:J.schema,model:J.caster})}return Y},oL1=function(Z,Y,X){if(Z.paths.hasOwnProperty(Y))return Z.paths[Y];if(Z.subpaths.hasOwnProperty(X))return Z.subpaths[X];if(Z.singleNestedPaths.hasOwnProperty(X)&&typeof Z.singleNestedPaths[X]==="object")return Z.singleNestedPaths[X];return null},Bu=function(Z){if(!/\.\d+/.test(Z))return Z;return Z.replace(/\.\d+\./g,".$.").replace(/\.\d+$/,".$")},Nu=function(Z,Y){if(Z.mapPaths.length===0)return null;for(let X of Z.mapPaths){const J=X.path;if(new RegExp("^"+J.replace(/\.\$\*/g,"\\.[^.]+")+"$").test(Y))return Z.paths[J]}return null},eL1=function(Z,Y,X,J,$){const W=X+".$*";let G={type:{}};if(o1.hasUserDefinedProperty(J,"of")){if(o1.isPOJO(J.of)&&Object.keys(J.of).length>0&&!o1.hasUserDefinedProperty(J.of,Z.options.typeKey))G={[Z.options.typeKey]:new o(J.of)};else if(o1.isPOJO(J.of))G=Object.assign({},J.of);else G={[Z.options.typeKey]:J.of};if(G[Z.options.typeKey]&&G[Z.options.typeKey].instanceOfSchema)G[Z.options.typeKey].eachPath((z,H)=>{if(H.options.select===!0||H.options.select===!1)throw new a9('Cannot use schema-level projections (`select: true` or `select: false`) within maps at path "'+X+"."+z+'"')});if(o1.hasUserDefinedProperty(J,"ref"))G.ref=J.ref}Y.$__schemaType=Z.interpretAsType(W,G,$)},Au=function(Z,Y,X){const J=Y.split(/\.(\d+)\.|\.(\d+)$/).filter(Boolean);if(J.length<2)return Z.paths.hasOwnProperty(J[0])?Z.paths[J[0]]:"adhocOrUndefined";let $=Z.path(J[0]),W=!1;if(!$)return"adhocOrUndefined";const G=J.length-1;for(let K=1;K<J.length;++K){W=!1;const Q=J[K];if(K===G&&$&&!/\D/.test(Q)){if($.$isMongooseDocumentArray)$=$.$embeddedSchemaType;else if($ instanceof x5.Array)$=$.caster;else $=void 0;break}if(!/\D/.test(Q)){if($ instanceof x5.Array&&K!==G)$=$.caster;continue}if(!($&&$.schema)){$=void 0;break}W=$.schema.pathType(Q)==="nested",$=$.schema.path(Q)}if(Z.subpaths[X]=$,$)return"real";if(W)return"nested";return"adhocOrUndefined"},Zw1=function(Z,Y,X){return Au(Z,Y,X),Z.subpaths[X]},zR=function(Z,Y){for(let{schema:X}of Z.childSchemas){if(!X.$implicitlyCreated)continue;Object.assign(X.options,Y),zR(X,Y)}},KR=function(Z,Y){const X=Y.split("."),J=X.pop();let $=Z.tree;for(let W of X)$=$[W];delete $[J]},HR=function(Z){return Z.startsWith("$[")&&Z.endsWith("]")};/*!
 * Module dependencies.
 */var vL1=import.meta.require("events").EventEmitter,hL1=fY(),a9=W0(),Uu=i0(),Vu=N6(),mL1=wv(),QR=Yw(),qu=Xw(),S8=w0(),Lu=z0(),uL1=r8(),dL1=Av(),wQ=Ww(),cL1=Tv(),lL1=UK(),LQ=P7(),pL1=fv(),o1=G1(),iL1=gv(),nL1=import.meta.require("util"),x5,aL1=vK().middlewareFunctions,sL1=hK().middlewareFunctions,wu=aL1.concat(sL1).reduce((Z,Y)=>Z.add(Y),new Set),GR=o1.isPOJO,Ru=0,rL1=/^\d+$/;/*!
 * Inherit from EventEmitter.
 */o.prototype=Object.create(vL1.prototype);o.prototype.constructor=o;o.prototype.instanceOfSchema=!0;/*!
 * ignore
 */Object.defineProperty(o.prototype,"$schemaType",{configurable:!1,enumerable:!1,writable:!0});Object.defineProperty(o.prototype,"childSchemas",{configurable:!1,enumerable:!0,writable:!0});Object.defineProperty(o.prototype,"virtuals",{configurable:!1,enumerable:!0,writable:!0});o.prototype.obj;o.prototype.paths;o.prototype.tree;o.prototype.clone=function(){const Z=this._clone();return Z.on("init",(Y)=>this.emit("init",Y)),Z};/*!
 * ignore
 */o.prototype._clone=function Z(Y){Y=Y||(this.base==null?o:this.base.Schema);const X=new Y({},this._userProvidedOptions);X.base=this.base,X.obj=this.obj,X.options=S8(this.options),X.callQueue=this.callQueue.map(function(J){return J}),X.methods=S8(this.methods),X.methodOptions=S8(this.methodOptions),X.statics=S8(this.statics),X.query=S8(this.query),X.plugins=Array.prototype.slice.call(this.plugins),X._indexes=S8(this._indexes),X.s.hooks=this.s.hooks.clone(),X.tree=S8(this.tree),X.paths=Object.fromEntries(Object.entries(this.paths).map(([J,$])=>[J,$.clone()])),X.nested=S8(this.nested),X.subpaths=S8(this.subpaths);for(let J of Object.values(X.paths))if(J.$isSingleNested){const $=J.path;for(let W of Object.keys(J.schema.paths))X.singleNestedPaths[$+"."+W]=J.schema.paths[W];for(let W of Object.keys(J.schema.singleNestedPaths))X.singleNestedPaths[$+"."+W]=J.schema.singleNestedPaths[W];for(let W of Object.keys(J.schema.subpaths))X.singleNestedPaths[$+"."+W]=J.schema.subpaths[W];for(let W of Object.keys(J.schema.nested))X.singleNestedPaths[$+"."+W]="nested"}if(X.childSchemas=tL1(X),X.virtuals=S8(this.virtuals),X.$globalPluginsApplied=this.$globalPluginsApplied,X.$isRootDiscriminator=this.$isRootDiscriminator,X.$implicitlyCreated=this.$implicitlyCreated,X.$id=++Ru,X.$originalSchemaId=this.$id,X.mapPaths=[].concat(this.mapPaths),this.discriminatorMapping!=null)X.discriminatorMapping=Object.assign({},this.discriminatorMapping);if(this.discriminators!=null)X.discriminators=Object.assign({},this.discriminators);if(this._applyDiscriminators!=null)X._applyDiscriminators=new Map(this._applyDiscriminators);return X.aliases=Object.assign({},this.aliases),X};o.prototype.pick=function(Z,Y){const X=new o({},Y||this.options);if(!Array.isArray(Z))throw new a9('Schema#pick() only accepts an array argument, got "'+typeof Z+'"');for(let J of Z)if(this.nested[J])X.add({[J]:Lu(this.tree,J)});else{const $=this.path(J);if($==null)throw new a9("Path `"+J+"` is not in the schema");X.add({[J]:$})}return X};o.prototype.omit=function(Z,Y){const X=new o(this,Y||this.options);if(!Array.isArray(Z))throw new a9('Schema#omit() only accepts an array argument, got "'+typeof Z+'"');X.remove(Z);for(let J in X.singleNestedPaths)if(Z.includes(J))delete X.singleNestedPaths[J];return X};o.prototype.defaultOptions=function(Z){this._userProvidedOptions=Z==null?{}:S8(Z);const Y=this.base&&this.base.options||{},X="strict"in Y?Y.strict:!0,J="strictQuery"in Y?Y.strictQuery:!1,$="id"in Y?Y.id:!0;if(Z=o1.options({strict:X,strictQuery:J,bufferCommands:!0,capped:!1,versionKey:"__v",optimisticConcurrency:!1,minimize:!0,autoIndex:null,discriminatorKey:"__t",shardKey:null,read:null,validateBeforeSave:!0,validateModifiedOnly:!1,_id:!0,id:$,typeKey:"type"},S8(Z)),Z.versionKey&&typeof Z.versionKey!=="string")throw new a9("`versionKey` must be falsy or string, got `"+typeof Z.versionKey+"`");if(typeof Z.read==="string")Z.read=wQ(Z.read);else if(Array.isArray(Z.read)&&typeof Z.read[0]==="string")Z.read={mode:wQ(Z.read[0]),tags:Z.read[1]};if(Z.optimisticConcurrency&&!Z.versionKey)throw new a9("Must set `versionKey` if using `optimisticConcurrency`");return Z};o.prototype.discriminator=function(Z,Y){return this._applyDiscriminators=this._applyDiscriminators||new Map,this._applyDiscriminators.set(Z,Y),this};o.prototype.add=function Z(Y,X){if(Y instanceof o||Y!=null&&Y.instanceOfSchema)return lL1(this,Y),this;if(Y._id===!1&&X==null)this.options._id=!1;if(X=X||"",X==="__proto__."||X==="constructor."||X==="prototype.")return this;const J=Object.keys(Y),$=this.options.typeKey;for(let G of J){if(o1.specialProperties.has(G))continue;const K=X+G,Q=Y[G];if(Q==null)throw new TypeError("Invalid value for schema path `"+K+'`, got value "'+Q+'"');if(G==="_id"&&Q===!1)continue;let z=!1;if(typeof Q==="string"){const H=this.base!=null?this.base.Schema.Types:o.Types,F=Q.charAt(0).toUpperCase()+Q.substring(1);z=H[F]!=null}if(G!=="_id"&&(typeof Q!=="object"&&typeof Q!=="function"&&!z||Q==null))throw new TypeError(`Invalid schema configuration: \`${Q}\` is not `+`a valid type at path \`${G}\`. See `+"https://bit.ly/mongoose-schematypes for a list of valid schema types.");if(Q instanceof QR||(Q.constructor&&Q.constructor.name||null)==="VirtualType"){this.virtual(Q);continue}if(Array.isArray(Q)&&Q.length===1&&Q[0]==null)throw new TypeError("Invalid value for schema Array path `"+K+'`, got value "'+Q[0]+'"');if(!(GR(Q)||Q instanceof Vu)){if(X)this.nested[X.substring(0,X.length-1)]=!0;if(this.path(X+G,Q),Q[0]!=null&&!Q[0].instanceOfSchema&&o1.isPOJO(Q[0].discriminators)){const H=this.path(X+G);for(let F in Q[0].discriminators)H.discriminator(F,Q[0].discriminators[F])}}else if(Object.keys(Q).length<1){if(X)this.nested[X.substring(0,X.length-1)]=!0;this.path(K,Q)}else if(!Q[$]||$==="type"&&GR(Q.type)&&Q.type.type)this.nested[K]=!0,this.add(Q,K+".");else{const H=Q[$];if(GR(H)&&Object.keys(H).length>0){if(X)this.nested[X.substring(0,X.length-1)]=!0;const F={};if(this._userProvidedOptions.typeKey)F.typeKey=this._userProvidedOptions.typeKey;if(this._userProvidedOptions.strict!=null)F.strict=this._userProvidedOptions.strict;if(this._userProvidedOptions.toObject!=null)F.toObject=o1.omit(this._userProvidedOptions.toObject,["transform"]);if(this._userProvidedOptions.toJSON!=null)F.toJSON=o1.omit(this._userProvidedOptions.toJSON,["transform"]);const U=new o(H,F);U.$implicitlyCreated=!0;const V=Object.assign({},Q,{[$]:U});this.path(X+G,V)}else{if(X)this.nested[X.substring(0,X.length-1)]=!0;if(this.path(X+G,Q),Q!=null&&!Q.instanceOfSchema&&o1.isPOJO(Q.discriminators)){const F=this.path(X+G);for(let U in Q.discriminators)F.discriminator(U,Q.discriminators[U])}}}}const W=Object.fromEntries(Object.entries(Y).map(([G])=>[X+G,null]));return Mu(this,W),this};o.prototype.alias=function Y(Z,Y){return Mu(this,{[Z]:Y}),this};o.prototype.removeIndex=function Z(Y){if(arguments.length>1)throw new Error("removeIndex() takes only 1 argument");if(typeof Y!=="object"&&typeof Y!=="string")throw new Error("removeIndex() may only take either an object or a string as an argument");if(typeof Y==="object"){for(let X=this._indexes.length-1;X>=0;--X)if(nL1.isDeepStrictEqual(this._indexes[X][0],Y))this._indexes.splice(X,1)}else for(let X=this._indexes.length-1;X>=0;--X)if(this._indexes[X][1]!=null&&this._indexes[X][1].name===Y)this._indexes.splice(X,1);return this};o.prototype.clearIndexes=function Z(){return this._indexes.length=0,this};o.reserved=Object.create(null);o.prototype.reserved=o.reserved;var Q8=o.reserved;Q8.prototype=Q8.emit=Q8.listeners=Q8.removeListener=Q8.collection=Q8.errors=Q8.get=Q8.init=Q8.isModified=Q8.isNew=Q8.populated=Q8.remove=Q8.save=Q8.toObject=Q8.validate=1;Q8.collection=1;o.prototype.path=function(Z,Y){if(Y===void 0){const Q=Bu(Z);let z=oL1(this,Z,Q);if(z!=null)return z;const H=Nu(this,Z);if(H!=null)return H;if(z=this.hasMixedParent(Q),z!=null)return z;return/\.\d+\.?.*$/.test(Z)?Zw1(this,Z,Q):void 0}const X=Z.split(".")[0];if(Q8[X]&&!this.options.suppressReservedKeysWarning){const Q=`\`${X}\` is a reserved schema pathname and may break some functionality. `+"You are allowed to use it, but use at your own risk. To disable this warning pass `suppressReservedKeysWarning` as a schema option.";o1.warn(Q)}if(typeof Y==="object"&&o1.hasUserDefinedProperty(Y,"ref"))iL1(Y.ref,Z);const J=Z.split(/\./),$=J.pop();let W=this.tree,G="";for(let Q of J){if(o1.specialProperties.has(Q))throw new Error("Cannot set special property `"+Q+"` on a schema");if(G=G+=(G.length>0?".":"")+Q,!W[Q])this.nested[G]=!0,W[Q]={};if(typeof W[Q]!=="object"){const z="Cannot set nested path `"+Z+"`. Parent path `"+G+"` already set to type "+W[Q].name+".";throw new Error(z)}W=W[Q]}W[$]=S8(Y),this.paths[Z]=this.interpretAsType(Z,Y,this.options);const K=this.paths[Z];if(K.$isSchemaMap){const Q=Z+".$*";this.paths[Q]=K.$__schemaType,this.mapPaths.push(this.paths[Q])}if(K.$isSingleNested){for(let Q of Object.keys(K.schema.paths))this.singleNestedPaths[Z+"."+Q]=K.schema.paths[Q];for(let Q of Object.keys(K.schema.singleNestedPaths))this.singleNestedPaths[Z+"."+Q]=K.schema.singleNestedPaths[Q];for(let Q of Object.keys(K.schema.subpaths))this.singleNestedPaths[Z+"."+Q]=K.schema.subpaths[Q];for(let Q of Object.keys(K.schema.nested))this.singleNestedPaths[Z+"."+Q]="nested";Object.defineProperty(K.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),K.caster.base=this.base,this.childSchemas.push({schema:K.schema,model:K.caster})}else if(K.$isMongooseDocumentArray)Object.defineProperty(K.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),K.casterConstructor.base=this.base,this.childSchemas.push({schema:K.schema,model:K.casterConstructor});if(K.$isMongooseArray&&K.caster instanceof Uu){let Q=Z,z=K;const H=[];while(z.$isMongooseArray){if(Q=Q+".$",z.$isMongooseDocumentArray)z.$embeddedSchemaType._arrayPath=Q,z.$embeddedSchemaType._arrayParentPath=Z,z=z.$embeddedSchemaType.clone();else z.caster._arrayPath=Q,z.caster._arrayParentPath=Z,z=z.caster.clone();z.path=Q,H.push(z)}for(let F of H)this.subpaths[F.path]=F}if(K.$isMongooseDocumentArray){for(let Q of Object.keys(K.schema.paths)){const z=K.schema.paths[Q];if(this.subpaths[Z+"."+Q]=z,typeof z==="object"&&z!=null&&z.$parentSchemaDocArray==null)z.$parentSchemaDocArray=K}for(let Q of Object.keys(K.schema.subpaths)){const z=K.schema.subpaths[Q];if(this.subpaths[Z+"."+Q]=z,typeof z==="object"&&z!=null&&z.$parentSchemaDocArray==null)z.$parentSchemaDocArray=K}for(let Q of Object.keys(K.schema.singleNestedPaths)){const z=K.schema.singleNestedPaths[Q];if(this.subpaths[Z+"."+Q]=z,typeof z==="object"&&z!=null&&z.$parentSchemaDocArray==null)z.$parentSchemaDocArray=K}}return this};/*!
 * ignore
 *//*!
 * ignore
 *//*!
 * ignore
 *//*!
 * ignore
 */Object.defineProperty(o.prototype,"base",{configurable:!0,enumerable:!1,writable:!0,value:null});o.prototype.interpretAsType=function(Z,Y,X){if(Y instanceof Uu){if(Y.path===Z)return Y;const Q=Y.clone();return Q.path=Z,Q}const J=this.base!=null?this.base.Schema.Types:o.Types,$=this.base!=null?this.base.Types:rY();if(!o1.isPOJO(Y)&&!(Y instanceof Vu)){if(o1.getFunctionName(Y.constructor)!=="Object"){const z=Y;Y={},Y[X.typeKey]=z}}let W=Y[X.typeKey]&&(Y[X.typeKey]instanceof Function||X.typeKey!=="type"||!Y.type.type)?Y[X.typeKey]:{},G;if(o1.isPOJO(W)||W==="mixed")return new J.Mixed(Z,Y);if(Array.isArray(W)||W===Array||W==="array"||W===J.Array){let Q=W===Array||W==="array"?Y.cast||Y.of:W[0];if(Q&&Q.instanceOfSchema){if(!(Q instanceof o))if(this.options._isMerging)Q=new o(Q);else throw new TypeError("Schema for array path `"+Z+"` is from a different copy of the Mongoose module. Please make sure you\'re using the same version of Mongoose everywhere with `npm list mongoose`. If you are still getting this error, please add `new Schema()` around the path: "+`${Z}: new Schema(...)`);return new J.DocumentArray(Z,Q,Y)}if(Q&&Q[X.typeKey]&&Q[X.typeKey].instanceOfSchema){if(!(Q[X.typeKey]instanceof o))if(this.options._isMerging)Q[X.typeKey]=new o(Q[X.typeKey]);else throw new TypeError("Schema for array path `"+Z+"` is from a different copy of the Mongoose module. Please make sure you\'re using the same version of Mongoose everywhere with `npm list mongoose`. If you are still getting this error, please add `new Schema()` around the path: "+`${Z}: new Schema(...)`);return new J.DocumentArray(Z,Q[X.typeKey],Y,Q)}if(Array.isArray(Q))return new J.Array(Z,this.interpretAsType(Z,Q,X),Y);const z=Q!=null&&Q[X.typeKey]&&(X.typeKey!=="type"||!Q.type.type)?Q[X.typeKey]:Q;if(typeof Q==="string")Q=J[Q.charAt(0).toUpperCase()+Q.substring(1)];else if(o1.isPOJO(z))if(Object.keys(z).length){const H={minimize:X.minimize};if(X.typeKey)H.typeKey=X.typeKey;if(X.hasOwnProperty("strict"))H.strict=X.strict;if(X.hasOwnProperty("strictQuery"))H.strictQuery=X.strictQuery;if(X.hasOwnProperty("toObject"))H.toObject=o1.omit(X.toObject,["transform"]);if(X.hasOwnProperty("toJSON"))H.toJSON=o1.omit(X.toJSON,["transform"]);if(this._userProvidedOptions.hasOwnProperty("_id"))H._id=this._userProvidedOptions._id;else if(o.Types.DocumentArray.defaultOptions._id!=null)H._id=o.Types.DocumentArray.defaultOptions._id;const F=new o(z,H);return F.$implicitlyCreated=!0,new J.DocumentArray(Z,F,Y)}else return new J.Array(Z,J.Mixed,Y);if(Q){if(W=Q[X.typeKey]&&(X.typeKey!=="type"||!Q.type.type)?Q[X.typeKey]:Q,Array.isArray(W))return new J.Array(Z,this.interpretAsType(Z,W,X),Y);if(G=typeof W==="string"?W:W.schemaName||o1.getFunctionName(W),G==="ClockDate")G="Date";if(G===void 0)throw new TypeError("Invalid schema configuration: "+`Could not determine the embedded type for array \`${Z}\`. `+"See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.");if(!J.hasOwnProperty(G))throw new TypeError("Invalid schema configuration: "+`\`${G}\` is not a valid type within the array \`${Z}\`.`+"See https://bit.ly/mongoose-schematypes for a list of valid schema types.")}return new J.Array(Z,Q||J.Mixed,Y,X)}if(W&&W.instanceOfSchema)return new J.Subdocument(W,Z,Y);if(Buffer.isBuffer(W))G="Buffer";else if(typeof W==="function"||typeof W==="object")G=W.schemaName||o1.getFunctionName(W);else if(W===$.ObjectId)G="ObjectId";else if(W===$.Decimal128)G="Decimal128";else G=W==null?""+W:W.toString();if(G)G=G.charAt(0).toUpperCase()+G.substring(1);if(G==="ObjectID")G="ObjectId";if(G==="ClockDate")G="Date";if(G===void 0)throw new TypeError(`Invalid schema configuration: \`${Z}\` schematype definition is `+"invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.");if(J[G]==null)throw new TypeError(`Invalid schema configuration: \`${G}\` is not `+`a valid type at path \`${Z}\`. See `+"https://bit.ly/mongoose-schematypes for a list of valid schema types.");const K=new J[G](Z,Y);if(K.$isSchemaMap)eL1(this,K,Z,Y,X);return K};/*!
 * ignore
 */o.prototype.eachPath=function(Z){const Y=Object.keys(this.paths),X=Y.length;for(let J=0;J<X;++J)Z(Y[J],this.paths[Y[J]]);return this};o.prototype.requiredPaths=function Z(Y){if(this._requiredpaths&&!Y)return this._requiredpaths;const X=Object.keys(this.paths);let J=X.length;const $=[];while(J--){const W=X[J];if(this.paths[W].isRequired)$.push(W)}return this._requiredpaths=$,this._requiredpaths};o.prototype.indexedPaths=function Z(){if(this._indexedpaths)return this._indexedpaths;return this._indexedpaths=this.indexes(),this._indexedpaths};o.prototype.pathType=function(Z){if(this.paths.hasOwnProperty(Z))return"real";if(this.virtuals.hasOwnProperty(Z))return"virtual";if(this.nested.hasOwnProperty(Z))return"nested";const Y=Bu(Z);if(this.subpaths.hasOwnProperty(Y)||this.subpaths.hasOwnProperty(Z))return"real";const X=this.singleNestedPaths.hasOwnProperty(Y)||this.singleNestedPaths.hasOwnProperty(Z);if(X)return X==="nested"?"nested":"real";if(Nu(this,Z)!=null)return"real";if(/\.\d+\.|\.\d+$/.test(Z))return Au(this,Z,Y);return"adhocOrUndefined"};o.prototype.hasMixedParent=function(Z){const Y=Z.split(/\./g);Z="";for(let X=0;X<Y.length;++X)if(Z=X>0?Z+"."+Y[X]:Y[X],this.paths.hasOwnProperty(Z)&&this.paths[Z]instanceof x5.Mixed)return this.paths[Z];return null};o.prototype.setupTimestamp=function(Z){return pL1(this,Z)};/*!
 * ignore
 */o.prototype.queue=function(Z,Y){return this.callQueue.push([Z,Y]),this};o.prototype.pre=function(Z){if(Z instanceof RegExp){const Y=Array.prototype.slice.call(arguments,1);for(let X of wu)if(Z.test(X))this.pre.apply(this,[X].concat(Y));return this}if(Array.isArray(Z)){const Y=Array.prototype.slice.call(arguments,1);for(let X of Z)this.pre.apply(this,[X].concat(Y));return this}return this.s.hooks.pre.apply(this.s.hooks,arguments),this};o.prototype.post=function(Z){if(Z instanceof RegExp){const Y=Array.prototype.slice.call(arguments,1);for(let X of wu)if(Z.test(X))this.post.apply(this,[X].concat(Y));return this}if(Array.isArray(Z)){const Y=Array.prototype.slice.call(arguments,1);for(let X of Z)this.post.apply(this,[X].concat(Y));return this}return this.s.hooks.post.apply(this.s.hooks,arguments),this};o.prototype.plugin=function(Z,Y){if(typeof Z!=="function")throw new Error('First param to `schema.plugin()` must be a function, got "'+typeof Z+'"');if(Y&&Y.deduplicate){for(let X of this.plugins)if(X.fn===Z)return this}return this.plugins.push({fn:Z,opts:Y}),Z(this,Y),this};o.prototype.method=function(Z,Y,X){if(typeof Z!=="string")for(let J in Z)this.methods[J]=Z[J],this.methodOptions[J]=S8(X);else this.methods[Z]=Y,this.methodOptions[Z]=S8(X);return this};o.prototype.static=function(Z,Y){if(typeof Z!=="string")for(let X in Z)this.statics[X]=Z[X];else this.statics[Z]=Y;return this};o.prototype.index=function(Z,Y){if(Z||(Z={}),Y||(Y={}),Y.expires)o1.expires(Y);for(let X in Z)if(this.aliases[X])Z=o1.renameObjKey(Z,X,this.aliases[X]);for(let X of Object.keys(Z))if(Z[X]==="ascending"||Z[X]==="asc")Z[X]=1;else if(Z[X]==="descending"||Z[X]==="desc")Z[X]=-1;return this._indexes.push([Z,Y]),this};o.prototype.set=function(Z,Y,X){if(arguments.length===1)return this.options[Z];switch(Z){case"read":if(typeof Y==="string")this.options[Z]={mode:wQ(Y),tags:X};else if(Array.isArray(Y)&&typeof Y[0]==="string")this.options[Z]={mode:wQ(Y[0]),tags:Y[1]};else this.options[Z]=Y;this._userProvidedOptions[Z]=this.options[Z];break;case"timestamps":this.setupTimestamp(Y),this.options[Z]=Y,this._userProvidedOptions[Z]=this.options[Z];break;case"_id":if(this.options[Z]=Y,this._userProvidedOptions[Z]=this.options[Z],Y&&!this.paths._id)qu(this);else if(!Y&&this.paths._id!=null&&this.paths._id.auto)this.remove("_id");break;default:this.options[Z]=Y,this._userProvidedOptions[Z]=this.options[Z];break}if(Z==="strict")zR(this,{strict:Y});if(Z==="strictQuery")zR(this,{strictQuery:Y});return this};/*!
 * Recursively set options on implicitly created schemas
 */o.prototype.get=function(Z){return this.options[Z]};var Yw1="2d 2dsphere hashed text".split(" ");Object.defineProperty(o,"indexTypes",{get:function(){return Yw1},set:function(){throw new Error("Cannot overwrite Schema.indexTypes")}});o.prototype.indexes=function(){return dL1(this)};o.prototype.virtual=function(Z,Y){if(Z instanceof QR||uL1(Z)==="VirtualType")return this.virtual(Z.path,Z.options);if(Y=new mL1(Y),o1.hasUserDefinedProperty(Y,["ref","refPath"])){if(Y.localField==null)throw new Error("Reference virtuals require `localField` option");if(Y.foreignField==null)throw new Error("Reference virtuals require `foreignField` option");this.pre("init",function K(Q){if(LQ.has(Z,Q)){const z=LQ.get(Z,Q);if(!this.$$populatedVirtuals)this.$$populatedVirtuals={};if(Y.justOne||Y.count)this.$$populatedVirtuals[Z]=Array.isArray(z)?z[0]:z;else this.$$populatedVirtuals[Z]=Array.isArray(z)?z:z==null?[]:[z];LQ.unset(Z,Q)}});const $=this.virtual(Z);if($.options=Y,$.set(function(K){if(!this.$$populatedVirtuals)this.$$populatedVirtuals={};if(Y.justOne||Y.count){if(this.$$populatedVirtuals[Z]=Array.isArray(K)?K[0]:K,typeof this.$$populatedVirtuals[Z]!=="object")this.$$populatedVirtuals[Z]=Y.count?K:null}else this.$$populatedVirtuals[Z]=Array.isArray(K)?K:K==null?[]:[K],this.$$populatedVirtuals[Z]=this.$$populatedVirtuals[Z].filter(function(Q){return Q&&typeof Q==="object"})}),typeof Y.get==="function")$.get(Y.get);const W=Z.split(".");let G=W[0];for(let K=0;K<W.length-1;++K){if(this.paths[G]==null)continue;if(this.paths[G].$isMongooseDocumentArray||this.paths[G].$isSingleNested){const Q=W.slice(K+1).join(".");this.paths[G].schema.virtual(Q,Y);break}G+="."+W[K+1]}return $}const X=this.virtuals,J=Z.split(".");if(this.pathType(Z)==="real")throw new Error('Virtual path "'+Z+'" conflicts with a real path in the schema');return X[Z]=J.reduce(function($,W,G){return $[W]||($[W]=G===J.length-1?new QR(Y,Z):{}),$[W]},this.tree),X[Z]};o.prototype.virtualpath=function(Z){return this.virtuals.hasOwnProperty(Z)?this.virtuals[Z]:null};o.prototype.remove=function(Z){if(typeof Z==="string")Z=[Z];if(Array.isArray(Z))Z.forEach(function(Y){if(this.path(Y)==null&&!this.nested[Y])return;if(this.nested[Y]){const X=Object.keys(this.paths).concat(Object.keys(this.nested));for(let J of X)if(J.startsWith(Y+"."))delete this.paths[J],delete this.nested[J],KR(this,J);delete this.nested[Y],KR(this,Y);return}delete this.paths[Y],KR(this,Y)},this);return this};/*!
 * ignore
 */o.prototype.removeVirtual=function(Z){if(typeof Z==="string")Z=[Z];if(Array.isArray(Z)){for(let Y of Z)if(this.virtuals[Y]==null)throw new a9(`Attempting to remove virtual "${Y}" that does not exist.`);for(let Y of Z)if(delete this.paths[Y],delete this.virtuals[Y],Y.indexOf(".")!==-1)LQ.unset(Y,this.tree);else delete this.tree[Y]}return this};o.prototype.loadClass=function(Z,Y){if(Z===Object.prototype||Z===Function.prototype||Z.prototype.hasOwnProperty("$isMongooseModelPrototype")||Z.prototype.hasOwnProperty("$isMongooseDocumentPrototype"))return this;if(this.loadClass(Object.getPrototypeOf(Z),Y),!Y)Object.getOwnPropertyNames(Z).forEach(function(X){if(X.match(/^(length|name|prototype|constructor|__proto__)$/))return;const J=Object.getOwnPropertyDescriptor(Z,X);if(J.hasOwnProperty("value"))this.static(X,J.value)},this);return Object.getOwnPropertyNames(Z.prototype).forEach(function(X){if(X.match(/^(constructor)$/))return;const J=Object.getOwnPropertyDescriptor(Z.prototype,X);if(!Y){if(typeof J.value==="function")this.method(X,J.value)}if(typeof J.get==="function"){if(this.virtuals[X])this.virtuals[X].getters=[];this.virtual(X).get(J.get)}if(typeof J.set==="function"){if(this.virtuals[X])this.virtuals[X].setters=[];this.virtual(X).set(J.set)}},this),this};/*!
 * ignore
 */o.prototype._getSchema=function(Z){const Y=this,X=Y.path(Z),J=[];if(X)return X.$fullPath=Z,X;function $(G,K){let Q=G.length+1,z,H;while(Q--)if(H=G.slice(0,Q).join("."),z=K.path(H),z){if(J.push(H),z.caster){if(z.caster instanceof x5.Mixed)return z.caster.$fullPath=J.join("."),z.caster;if(Q!==G.length){if(z.schema){let F;if(G[Q]==="$"||HR(G[Q])){if(Q+1===G.length)return z.$embeddedSchemaType;if(F=$(G.slice(Q+1),z.schema),F)F.$parentSchemaDocArray=F.$parentSchemaDocArray||(z.schema.$isSingleNested?null:z);return F}if(F=$(G.slice(Q),z.schema),F)F.$parentSchemaDocArray=F.$parentSchemaDocArray||(z.schema.$isSingleNested?null:z);return F}}}else if(z.$isSchemaMap){if(Q>=G.length)return z;if(Q+1>=G.length)return z.$__schemaType;if(z.$__schemaType instanceof x5.Mixed)return z.$__schemaType;if(z.$__schemaType.schema!=null)return $(G.slice(Q+1),z.$__schemaType.schema)}return z.$fullPath=J.join("."),z}}const W=Z.split(".");for(let G=0;G<W.length;++G){if(W[G]==="$"||HR(W[G]))W[G]="0";if(rL1.test(W[G]))W[G]="$"}return $(W,Y)};/*!
 * ignore
 */o.prototype._getPathType=function(Z){const Y=this;if(Y.path(Z))return"real";function J($,W){let G=$.length+1,K,Q;while(G--)if(Q=$.slice(0,G).join("."),K=W.path(Q),K){if(K.caster){if(K.caster instanceof x5.Mixed)return{schema:K,pathType:"mixed"};if(G!==$.length&&K.schema){if($[G]==="$"||HR($[G])){if(G===$.length-1)return{schema:K,pathType:"nested"};return J($.slice(G+1),K.schema)}return J($.slice(G),K.schema)}return{schema:K,pathType:K.$isSingleNested?"nested":"array"}}return{schema:K,pathType:"real"}}else if(G===$.length&&W.nested[Q])return{schema:W,pathType:"nested"};return{schema:K||W,pathType:"undefined"}}return J(Z.split("."),Y)};/*!
 * ignore
 */o.prototype._preCompile=function Z(){cL1(this)};/*!
 * Module exports.
 */Du.exports=FR=o;o.Types=x5=y3();/*!
 * ignore
 */FR.ObjectId=x5.ObjectId});var Tu=w((r_1,Pu)=>{/*!
 * Module dependencies.
 */var Xw1=W0();class UR extends Xw1{constructor(Z,Y){super(Z);this.errors=Y}}Object.defineProperty(UR.prototype,"name",{value:"SyncIndexesError"});Pu.exports=UR});var VR=w((t_1,Iu)=>{Iu.exports=function Z(Y,X,J,$){if(Y[$])return;if(Y[$]=!0,!J||!J.skipTopLevel){let Q=null;for(let z of X){const H=z[1]==null?null:z[1].tags;if(!Array.isArray(H)){Y.plugin(z[0],z[1]);continue}if(Q=Q||new Set(Y.options.pluginTags||[]),!H.find((F)=>Q.has(F)))continue;Y.plugin(z[0],z[1])}}if(J=Object.assign({},J),delete J.skipTopLevel,J.applyPluginsToChildSchemas!==!1)for(let Q of Object.keys(Y.paths)){const z=Y.paths[Q];if(z.schema!=null)Z(z.schema,X,J,$),z.caster.prototype.$__setSchema(z.schema)}const W=Y.discriminators;if(W==null)return;const G=J.applyPluginsToDiscriminators,K=Object.keys(W);for(let Q of K){const z=W[Q];Z(z,X,{skipTopLevel:!G},$)}}});var Eu=w((o_1,ju)=>{var Jw1=W0();class qR extends Jw1{constructor(Z,Y){super(Z);this.errors=Y}}Object.defineProperty(qR.prototype,"name",{value:"CreateCollectionsError"});ju.exports=qR});var ku=w((e_1,Su)=>{var K1=function(Z){if(this.base=Z,this.collections={},this.models={},this.config={},this.replica=!1,this.options=null,this.otherDbs=[],this.relatedDbs={},this.states=K0,this._readyState=K0.disconnected,this._closeCalled=!1,this._hasOpened=!1,this.plugins=[],typeof Z==="undefined"||!Z.connections.length)this.id=0;else this.id=Z.nextConnectionId;this._queue=[]};async function ww1(Z,Y){try{return await Z(Y)}catch(X){throw Rw1(Y),X}}var Rw1=function(Z){for(let Y of Z[n3].keys()){const X=Z[n3].get(Y);if(X.hasOwnProperty("isNew"))Y.$isNew=X.isNew;if(X.hasOwnProperty("versionKey"))Y.set(Y.schema.options.versionKey,X.versionKey);if(X.modifiedPaths.length>0&&Y.$__.activePaths.states.modify==null)Y.$__.activePaths.states.modify={};for(let J of X.modifiedPaths){const $=Y.$__.activePaths.paths[J];if($!=null)delete Y.$__.activePaths[$][J];Y.$__.activePaths.paths[J]="modify",Y.$__.activePaths.states.modify[J]=!0}for(let J of X.atomics.keys()){const $=Y.$__getValue(J);if($==null)continue;$[qw1]=X.atomics.get(J)}}},Mw1=function(Z,Y,X){if(typeof Y==="function"&&X==null)throw new J6("Connection.prototype.openUri() no longer accepts a callback");else if(typeof X==="function")throw new J6("Connection.prototype.openUri() no longer accepts a callback")},Ou=function(Z){if(Z?.name==="MongoServerSelectionError"){const Y=Z;Z=new Kw1,Z.assimilateError(Y)}return Z};/*!
 * Module dependencies.
 */var $w1=cq(),Ww1=import.meta.require("events").EventEmitter,Gw1=nY(),K0=cZ(),J6=n1(),Kw1=$L(),Qw1=Tu(),zw1=VR(),Hw1=w0(),Fw1=r$(),Uw1=z0(),Cu=H6(),LR=G1(),Vw1=Eu(),qw1=Z1().arrayAtomicsSymbol,n3=Z1().sessionNewDocuments,Lw1=["MONGODB-X509"];/*!
 * Inherit from EventEmitter
 */Object.setPrototypeOf(K1.prototype,Ww1.prototype);Object.defineProperty(K1.prototype,"readyState",{get:function(){return this._readyState},set:function(Z){if(!(Z in K0))throw new Error("Invalid connection state: "+Z);if(this._readyState!==Z){this._readyState=Z;for(let Y of this.otherDbs)Y.readyState=Z;if(K0.connected===Z)this._hasOpened=!0;this.emit(K0[Z])}}});K1.prototype.get=function(Z){if(this.config.hasOwnProperty(Z))return this.config[Z];return Uw1(this.options,Z)};K1.prototype.set=function(Z,Y){if(this.config.hasOwnProperty(Z))return this.config[Z]=Y,Y;return this.options=this.options||{},this.options[Z]=Y,Y};K1.prototype.collections;K1.prototype.name;K1.prototype.models;K1.prototype.id;Object.defineProperty(K1.prototype,"plugins",{configurable:!1,enumerable:!0,writable:!0});Object.defineProperty(K1.prototype,"host",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(K1.prototype,"port",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(K1.prototype,"user",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(K1.prototype,"pass",{configurable:!0,enumerable:!0,writable:!0});K1.prototype.db;K1.prototype.client;K1.prototype.config;K1.prototype.createCollection=async function Z(Y,X){if(typeof X==="function"||arguments.length>=3&&typeof arguments[2]==="function")throw new J6("Connection.prototype.createCollection() no longer accepts a callback");if((this.readyState===K0.connecting||this.readyState===K0.disconnected)&&this._shouldBufferCommands())await new Promise((J)=>{this._queue.push({fn:J})});return this.db.createCollection(Y,X)};K1.prototype.createCollections=async function Z(Y={}){const X={},J={},{continueOnError:$}=Y;delete Y.continueOnError;for(let W of Object.values(this.models))try{X[W.modelName]=await W.createCollection({})}catch(G){if(!$){J[W.modelName]=G;break}else X[W.modelName]=G}if(!$&&Object.keys(J).length){const W=Object.entries(J).map(([K,Q])=>`${K}: ${Q.message}`).join(", ");throw new Vw1(W,J)}return X};K1.prototype.startSession=async function Z(Y){if(arguments.length>=2&&typeof arguments[1]==="function")throw new J6("Connection.prototype.startSession() no longer accepts a callback");if((this.readyState===K0.connecting||this.readyState===K0.disconnected)&&this._shouldBufferCommands())await new Promise((J)=>{this._queue.push({fn:J})});return this.client.startSession(Y)};K1.prototype.transaction=function Z(Y,X){return this.startSession().then((J)=>{return J[n3]=new Map,J.withTransaction(()=>ww1(Y,J),X).then(($)=>{return delete J[n3],$}).catch(($)=>{throw delete J[n3],$}).finally(()=>{J.endSession().catch(()=>{})})})};/*!
 * Reset document state in between transaction retries re: gh-13698
 *//*!
 * If transaction was aborted, we need to reset newly inserted documents' `isNew`.
 */K1.prototype.dropCollection=async function Z(Y){if(arguments.length>=2&&typeof arguments[1]==="function")throw new J6("Connection.prototype.dropCollection() no longer accepts a callback");if((this.readyState===K0.connecting||this.readyState===K0.disconnected)&&this._shouldBufferCommands())await new Promise((X)=>{this._queue.push({fn:X})});return this.db.dropCollection(Y)};K1.prototype.dropDatabase=async function Z(){if(arguments.length>=1&&typeof arguments[0]==="function")throw new J6("Connection.prototype.dropDatabase() no longer accepts a callback");if((this.readyState===K0.connecting||this.readyState===K0.disconnected)&&this._shouldBufferCommands())await new Promise((Y)=>{this._queue.push({fn:Y})});for(let Y of Object.values(this.models))delete Y.$init;return this.db.dropDatabase()};/*!
 * ignore
 */K1.prototype._shouldBufferCommands=function Z(){if(this.config.bufferCommands!=null)return this.config.bufferCommands;if(this.base.get("bufferCommands")!=null)return this.base.get("bufferCommands");return!0};K1.prototype.error=function(Z,Y){if(Y)return Y(Z),null;if(this.listeners("error").length>0)this.emit("error",Z);return Promise.reject(Z)};K1.prototype.onOpen=function(){this.readyState=K0.connected;for(let Z of this._queue)Z.fn.apply(Z.ctx,Z.args);this._queue=[];for(let Z in this.collections)if(LR.object.hasOwnProperty(this.collections,Z))this.collections[Z].onOpen();this.emit("open")};K1.prototype.openUri=async function Z(Y,X){if(this.readyState===K0.connecting||this.readyState===K0.connected){if(this._connectionString===Y)return this}this._closeCalled=!1;let J=!1;if(X&&("_fireAndForget"in X))J=X._fireAndForget,delete X._fireAndForget;try{Mw1.apply(arguments)}catch($){if(J)throw $;throw this.$initialConnection=Promise.reject($),$}this.$initialConnection=this.createClient(Y,X).then(()=>this).catch(($)=>{if(this.readyState=K0.disconnected,this.listeners("error").length>0)Cu(()=>this.emit("error",$));throw $});for(let $ of Object.values(this.models))$.init().catch(function W(){});if(J)return this;try{await this.$initialConnection}catch($){throw Ou($)}return this};/*!
 * ignore
 *//*!
 * ignore
 */K1.prototype.destroy=async function Z(Y){if(typeof Y==="function"||arguments.length===2&&typeof arguments[1]==="function")throw new J6("Connection.prototype.destroy() no longer accepts a callback");if(Y!=null&&typeof Y==="object")this.$wasForceClosed=!!Y.force;else this.$wasForceClosed=!!Y;return this._close(Y,!0)};K1.prototype.close=async function Z(Y){if(typeof Y==="function"||arguments.length===2&&typeof arguments[1]==="function")throw new J6("Connection.prototype.close() no longer accepts a callback");if(Y!=null&&typeof Y==="object")this.$wasForceClosed=!!Y.force;else this.$wasForceClosed=!!Y;for(let X of Object.values(this.models))delete X.$init;return this._close(Y,!1)};K1.prototype._close=async function Z(Y,X){const J=this,$=this._closeCalled;if(this._closeCalled=!0,this._destroyCalled=X,this.client!=null)this.client._closeCalled=!0,this.client._destroyCalled=X;const W=this;switch(this.readyState){case K0.disconnected:if(X&&this.base.connections.indexOf(W)!==-1)this.base.connections.splice(this.base.connections.indexOf(W),1);if(!$)await this.doClose(Y),this.onClose(Y);break;case K0.connected:if(this.readyState=K0.disconnecting,await this.doClose(Y),X&&J.base.connections.indexOf(W)!==-1)this.base.connections.splice(this.base.connections.indexOf(W),1);this.onClose(Y);break;case K0.connecting:return new Promise((G,K)=>{const Q=()=>{if(this.removeListener("open",Q),this.removeListener("error",Q),X)this.destroy(Y).then(G,K);else this.close(Y).then(G,K)};this.once("open",Q),this.once("error",Q)});case K0.disconnecting:return new Promise((G)=>{this.once("close",()=>{if(X&&this.base.connections.indexOf(W)!==-1)this.base.connections.splice(this.base.connections.indexOf(W),1);G()})})}return this};K1.prototype.doClose=function(){throw new Error("Connection#doClose unimplemented by driver")};K1.prototype.onClose=function(Z){this.readyState=K0.disconnected;for(let Y in this.collections)if(LR.object.hasOwnProperty(this.collections,Y))this.collections[Y].onClose(Z);this.emit("close",Z);for(let Y of this.otherDbs)this._destroyCalled?Y.destroy({force:Z,skipCloseClient:!0}):Y.close({force:Z,skipCloseClient:!0})};K1.prototype.collection=function(Z,Y){const X={autoIndex:this.config.autoIndex!=null?this.config.autoIndex:this.base.options.autoIndex,autoCreate:this.config.autoCreate!=null?this.config.autoCreate:this.base.options.autoCreate};Y=Object.assign({},X,Y?Hw1(Y):{}),Y.$wasForceClosed=this.$wasForceClosed;const J=this.base&&this.base.__driver&&this.base.__driver.Collection||Fw1.get().Collection;if(!(Z in this.collections))this.collections[Z]=new J(Z,this,Y);return this.collections[Z]};K1.prototype.plugin=function(Z,Y){return this.plugins.push([Z,Y]),this};K1.prototype.model=function(Z,Y,X,J){if(!(this instanceof K1))throw new J6("`connection.model()` should not be run with `new`. If you are doing `new db.model(foo)(bar)`, use `db.model(foo)(bar)` instead");let $;if(typeof Z==="function")$=Z,Z=$.name;if(typeof Y==="string")X=Y,Y=!1;if(LR.isObject(Y)){if(!Y.instanceOfSchema)Y=new Gw1(Y);else if(!(Y instanceof this.base.Schema))Y=Y._clone(this.base.Schema)}if(Y&&!Y.instanceOfSchema)throw new Error("The 2nd parameter to `mongoose.model()` should be a schema or a POJO");const W={cache:!1,overwriteModels:this.base.options.overwriteModels},G=Object.assign(W,J,{connection:this});if(this.models[Z]&&!X&&G.overwriteModels!==!0){if(Y&&Y.instanceOfSchema&&Y!==this.models[Z].schema)throw new J6.OverwriteModelError(Z);return this.models[Z]}let K;if(Y&&Y.instanceOfSchema){if(zw1(Y,this.plugins,null,"$connectionPluginsApplied"),K=this.base._model($||Z,Y,X,G),!this.models[Z])this.models[Z]=K;return K.init().catch(function Q(){}),K}if(this.models[Z]&&X)return K=this.models[Z],Y=K.prototype.schema,K.__subclass(this,Y,X);if(arguments.length===1){if(K=this.models[Z],!K)throw new J6.MissingSchemaError(Z);return K}if(!K)throw new J6.MissingSchemaError(Z);if(this===K.prototype.db&&(!X||X===K.collection.name)){if(!this.models[Z])this.models[Z]=K;return K}return this.models[Z]=K.__subclass(this,Y,X),this.models[Z]};K1.prototype.deleteModel=function(Z){if(typeof Z==="string"){const Y=this.model(Z);if(Y==null)return this;const X=Y.collection.name;delete this.models[Z],delete this.collections[X],this.emit("deleteModel",Y)}else if(Z instanceof RegExp){const Y=Z,X=this.modelNames();for(let J of X)if(Y.test(J))this.deleteModel(J)}else throw new Error('First parameter to `deleteModel()` must be a string or regexp, got "'+Z+'"');return this};K1.prototype.watch=function(Z,Y){return new $w1(($)=>{Cu(()=>{if(this.readyState===K0.connecting)this.once("open",function(){const W=this.db.watch(Z,Y);$(null,W)});else{const W=this.db.watch(Z,Y);$(null,W)}})},Z,Y)};K1.prototype.asPromise=async function Z(){try{return await this.$initialConnection,this}catch(Y){throw Ou(Y)}};K1.prototype.modelNames=function(){return Object.keys(this.models)};K1.prototype.shouldAuthenticate=function(){return this.user!=null&&(this.pass!=null||this.authMechanismDoesNotRequirePassword())};K1.prototype.authMechanismDoesNotRequirePassword=function(){if(this.options&&this.options.auth)return Lw1.indexOf(this.options.auth.authMechanism)>=0;return!0};K1.prototype.optionsProvideAuthenticationData=function(Z){return Z&&Z.user&&(Z.pass||this.authMechanismDoesNotRequirePassword())};K1.prototype.getClient=function Z(){return this.client};K1.prototype.setClient=function Z(){throw new J6("Connection#setClient not implemented by driver")};/*!
 * Called internally by `openUri()` to create a MongoClient instance.
 */K1.prototype.createClient=function Z(){throw new J6("Connection#createClient not implemented by driver")};K1.prototype.syncIndexes=async function Z(Y={}){const X={},J={},{continueOnError:$}=Y;delete Y.continueOnError;for(let W of Object.values(this.models))try{X[W.modelName]=await W.syncIndexes(Y)}catch(G){if(!$){J[W.modelName]=G;break}else X[W.modelName]=G}if(!$&&Object.keys(J).length){const W=Object.entries(J).map(([K,Q])=>`${K}: ${Q.message}`).join(", ");throw new Qw1(W,J)}return X};/*!
 * Module exports.
 */K1.STATES=K0;Su.exports=K1});var wR=w((Zx1,Bw1)=>{Bw1.exports={name:"mongoose",description:"Mongoose MongoDB ODM",version:"8.0.2",author:"Guillermo Rauch <guillermo@learnboost.com>",keywords:["mongodb","document","model","schema","database","odm","data","datastore","query","nosql","orm","db"],license:"MIT",dependencies:{bson:"^6.2.0",kareem:"2.5.1",mongodb:"6.2.0",mpath:"0.9.0",mquery:"5.0.0",ms:"2.1.3",sift:"16.0.1"},devDependencies:{"@babel/core":"7.23.2","@babel/preset-env":"7.22.20","@typescript-eslint/eslint-plugin":"^6.2.1","@typescript-eslint/parser":"^6.2.1",acquit:"1.3.0","acquit-ignore":"0.2.1","acquit-require":"0.1.1","assert-browserify":"2.0.0",axios:"1.1.3","babel-loader":"8.2.5",benchmark:"2.1.4","broken-link-checker":"^0.7.8",buffer:"^5.6.0",cheerio:"1.0.0-rc.12","crypto-browserify":"3.12.0",dotenv:"16.3.1",dox:"1.0.0",eslint:"8.52.0","eslint-plugin-markdown":"^3.0.1","eslint-plugin-mocha-no-only":"1.1.1",express:"^4.18.1","fs-extra":"~11.1.1","highlight.js":"11.8.0","lodash.isequal":"4.5.0","lodash.isequalwith":"4.4.0","markdownlint-cli2":"^0.10.0",marked:"4.3.0",mkdirp:"^3.0.1",mocha:"10.2.0",moment:"2.x","mongodb-memory-server":"8.15.1",ncp:"^2.0.0",nyc:"15.1.0",pug:"3.0.2",q:"1.5.1",sinon:"17.0.1","stream-browserify":"3.0.0",tsd:"0.29.0",typescript:"5.2.2",uuid:"9.0.1",webpack:"5.89.0"},directories:{lib:"./lib/mongoose"},scripts:{"docs:clean":"npm run docs:clean:stable","docs:clean:stable":"rimraf index.html && rimraf -rf ./docs/*.html  && rimraf -rf ./docs/api && rimraf -rf ./docs/tutorials/*.html && rimraf -rf ./docs/typescript/*.html && rimraf -rf ./docs/*.html && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:clean:5x":"rimraf index.html && rimraf -rf ./docs/5.x && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:clean:6x":"rimraf index.html && rimraf -rf ./docs/6.x && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:copy:tmp":"mkdirp ./tmp/docs/css && mkdirp ./tmp/docs/js && mkdirp ./tmp/docs/images && mkdirp ./tmp/docs/tutorials && mkdirp ./tmp/docs/typescript && mkdirp ./tmp/docs/api && ncp ./docs/css ./tmp/docs/css --filter=.css$ && ncp ./docs/js ./tmp/docs/js --filter=.js$ && ncp ./docs/images ./tmp/docs/images && ncp ./docs/tutorials ./tmp/docs/tutorials && ncp ./docs/typescript ./tmp/docs/typescript && ncp ./docs/api ./tmp/docs/api && cp index.html ./tmp && cp docs/*.html ./tmp/docs/","docs:copy:tmp:5x":"rimraf ./docs/5.x && ncp ./tmp ./docs/5.x","docs:move:6x:tmp":"mv ./docs/6.x ./tmp","docs:copy:tmp:6x":"rimraf ./docs/6.x && ncp ./tmp ./docs/6.x","docs:checkout:gh-pages":"git checkout gh-pages","docs:checkout:5x":"git checkout 5.x","docs:checkout:6x":"git checkout 6.x","docs:generate":"node ./scripts/website.js","docs:generate:search":"node ./scripts/generateSearch.js","docs:generate:sponsorData":"node ./scripts/loadSponsorData.js","docs:merge:stable":"git merge master","docs:merge:5x":"git merge 5.x","docs:merge:6x":"git merge 6.x","docs:test":"npm run docs:generate && npm run docs:generate:search","docs:view":"node ./scripts/static.js","docs:prepare:publish:stable":"npm run docs:checkout:gh-pages && npm run docs:merge:stable && npm run docs:generate && npm run docs:generate:search","docs:prepare:publish:5x":"npm run docs:checkout:5x && npm run docs:merge:5x && npm run docs:clean:stable && npm run docs:generate && npm run docs:copy:tmp && npm run docs:checkout:gh-pages && npm run docs:copy:tmp:5x","docs:prepare:publish:6x":"npm run docs:checkout:6x && npm run docs:merge:6x && npm run docs:clean:stable && env DOCS_DEPLOY=true npm run docs:generate && npm run docs:move:6x:tmp && npm run docs:checkout:gh-pages && npm run docs:copy:tmp:6x","docs:prepare:publish:7x":"env DOCS_DEPLOY=true npm run docs:generate && npm run docs:checkout:gh-pages && rimraf ./docs/7.x && mv ./tmp ./docs/7.x","docs:check-links":"blc http://127.0.0.1:8089 -ro",lint:"eslint .","lint-js":"eslint . --ext .js --ext .cjs","lint-ts":"eslint . --ext .ts","lint-md":"markdownlint-cli2 \"**/*.md\"","build-browser":"(rm ./dist/* || true) && node ./scripts/build-browser.js",prepublishOnly:"npm run build-browser",release:"git pull && git push origin master --tags && npm publish","release-5x":"git pull origin 5.x && git push origin 5.x && git push origin 5.x --tags && npm publish --tag 5x","release-6x":"git pull origin 6.x && git push origin 6.x && git push origin 6.x --tags && npm publish --tag 6x",mongo:"node ./tools/repl.js","publish-7x":"npm publish --tag 7x",test:"mocha --exit ./test/*.test.js","test-deno":"deno run --allow-env --allow-read --allow-net --allow-run --allow-sys --allow-write ./test/deno.js","test-rs":"START_REPLICA_SET=1 mocha --timeout 30000 --exit ./test/*.test.js","test-tsd":"node ./test/types/check-types-filename && tsd",tdd:"mocha ./test/*.test.js --inspect --watch --recursive --watch-files ./**/*.{js,ts}","test-coverage":"nyc --reporter=html --reporter=text npm test","ts-benchmark":"cd ./benchmarks/typescript/simple && npm install && npm run benchmark | node ../../../scripts/tsc-diagnostics-check"},main:"./index.js",types:"./types/index.d.ts",engines:{node:">=16.20.1"},bugs:{url:"https://github.com/Automattic/mongoose/issues/new"},repository:{type:"git",url:"git://github.com/Automattic/mongoose.git"},homepage:"https://mongoosejs.com",browser:"./dist/browser.umd.js",config:{mongodbMemoryServer:{disablePostinstall:!0}},funding:{type:"opencollective",url:"https://opencollective.com/mongoose"},tsd:{directory:"test/types",compilerOptions:{esModuleInterop:!1,strict:!0,allowSyntheticDefaultImports:!0,strictPropertyInitialization:!1,noImplicitAny:!1,strictNullChecks:!0,module:"commonjs",target:"ES2017"}}}});var xu=w((Yx1,_u)=>{var Dw1=function(Z,Y){const X=Y?Y:{},J=X.readPreference?X.readPreference:jw1(Z),$=Nw1(X);return J&&J!=="primary"&&J!=="primaryPreferred"?Pw1(J,$):$},Pw1=function(Z,Y){if(Tw1(Y)&&Iw1(Z))Cw1();else return Ew1(Y)},Tw1=function(Z){const Y=Z.config&&Z.config.autoIndex,{autoCreate:X,autoIndex:J}=Z;return!!(Y||X||J)},Iw1=function(Z){return Z==="secondary"||Z==="secondaryPreferred"},jw1=function(Z){const X=/(?:&|\?)readPreference=(\w+)(?:&|$)/.exec(Z);return X?X[1]:null},Ew1=function(Z){return Z.config={autoIndex:!1},Z.autoCreate=!1,Z.autoIndex=!1,Z},Cw1=function(){throw new Aw1('MongoDB prohibits index creation on connections that read from non-primary replicas.  Connections that set "readPreference" to "secondary" or "secondaryPreferred" may not opt-in to the following connection options: autoCreate, autoIndex')},Nw1=w0(),Aw1=n1();_u.exports=Dw1});var fu=w((Ow1)=>{Ow1.setTimeout=setTimeout});var hu=w((Jx1,vu)=>{var f5=function(){yu.apply(this,arguments),this._listening=!1},RR=function(Z,Y,X,J){const $=J!=null?Y.db(J):Y.db();Z.db=$,Z.client=Y,Z.host=Y&&Y.s&&Y.s.options&&Y.s.options.hosts&&Y.s.options.hosts[0]&&Y.s.options.hosts[0].host||void 0,Z.port=Y&&Y.s&&Y.s.options&&Y.s.options.hosts&&Y.s.options.hosts[0]&&Y.s.options.hosts[0].port||void 0,Z.name=J!=null?J:$.databaseName,Z._closeCalled=Y._closeCalled;const W=()=>{if(Z.readyState!==$6.connected)Z.readyState=$6.connected,Z.emit("reconnect"),Z.emit("reconnected"),Z.onOpen()},G=Y&&Y.topology&&Y.topology.description&&Y.topology.description.type||"";if(G==="Single")Y.on("serverDescriptionChanged",(K)=>{if(K.newDescription.type==="Unknown")Z.readyState=$6.disconnected;else W()});else if(G.startsWith("ReplicaSet"))Y.on("topologyDescriptionChanged",(K)=>{const Q=K.newDescription;if(Z.readyState===$6.connected&&Q.type!=="ReplicaSetWithPrimary")Z.readyState=$6.disconnected;else if(Z.readyState===$6.disconnected&&Q.type==="ReplicaSetWithPrimary")W()});Z.onOpen();for(let K in Z.collections)if(bu.object.hasOwnProperty(Z.collections,K))Z.collections[K].onOpen()};/*!
 * Module dependencies.
 */var yu=ku(),s9=n1(),$6=cZ(),gu=JK(),kw1=wR(),_w1=xu(),xw1=fu().setTimeout,bu=G1();f5.STATES=$6;/*!
 * Inherits from Connection.
 */Object.setPrototypeOf(f5.prototype,yu.prototype);f5.prototype.useDb=function(Z,Y){if(Y=Y||{},Y.useCache&&this.relatedDbs[Z])return this.relatedDbs[Z];const X=new this.constructor;X.name=Z,X.base=this.base,X.collections={},X.models={},X.replica=this.replica,X.config=Object.assign({},this.config,X.config),X.name=this.name,X.options=this.options,X._readyState=this._readyState,X._closeCalled=this._closeCalled,X._hasOpened=this._hasOpened,X._listening=!1,X._parent=this,X.host=this.host,X.port=this.port,X.user=this.user,X.pass=this.pass;const J=this;if(X.client=J.client,this.db&&this._readyState===$6.connected)$();else this.once("connected",$);function $(){X.client=J.client;const W={};if(Y.hasOwnProperty("noListener"))W.noListener=Y.noListener;X.db=J.client.db(Z,W),X.onOpen()}if(X.name=Z,Y.noListener!==!0)this.otherDbs.push(X);if(X.otherDbs.push(this),Y&&Y.useCache)this.relatedDbs[X.name]=X,X.relatedDbs=this.relatedDbs;return X};f5.prototype.removeDb=function Z(Y){const X=this.otherDbs.filter((J)=>J.name===Y);if(!X.length)throw new s9(`No connections to database "${Y}" found`);for(let J of X)J._closeCalled=!0,J._destroyCalled=!0,J._readyState=$6.disconnected,J.$wasForceClosed=!0;delete this.relatedDbs[Y],this.otherDbs=this.otherDbs.filter((J)=>J.name!==Y)};f5.prototype.doClose=async function Z(Y){if(this.client==null)return this;let X=!1;if(Y!=null&&typeof Y==="object")X=Y.skipCloseClient,Y=Y.force;if(X)return this;return await this.client.close(Y),await new Promise((J)=>xw1(J,1)),this};/*!
 * ignore
 */f5.prototype.createClient=async function Z(Y,X){if(typeof Y!=="string")throw new s9("The `uri` parameter to `openUri()` must be a "+`string, got "${typeof Y}". Make sure the first parameter to `+"`mongoose.connect()` or `mongoose.createConnection()` is a string.");if(this._destroyCalled)throw new s9("Connection has been closed and destroyed, and cannot be used for re-opening the connection. Please create a new connection with `mongoose.createConnection()` or `mongoose.connect()`.");if(this.readyState===$6.connecting||this.readyState===$6.connected){if(this._connectionString!==Y)throw new s9("Can\'t call `openUri()` on an active connection with different connection strings. Make sure you aren\'t calling `mongoose.connect()` multiple times. See: https://mongoosejs.com/docs/connections.html#multiple_connections")}if(X=_w1(Y,X),X){const W=X.config&&X.config.autoIndex!=null?X.config.autoIndex:X.autoIndex;if(W!=null)this.config.autoIndex=W!==!1,delete X.config,delete X.autoIndex;if("autoCreate"in X)this.config.autoCreate=!!X.autoCreate,delete X.autoCreate;if("sanitizeFilter"in X)this.config.sanitizeFilter=X.sanitizeFilter,delete X.sanitizeFilter;if(X.user||X.pass)X.auth=X.auth||{},X.auth.username=X.user,X.auth.password=X.pass,this.user=X.user,this.pass=X.pass;if(delete X.user,delete X.pass,X.bufferCommands!=null)this.config.bufferCommands=X.bufferCommands,delete X.bufferCommands}else X={};this._connectionOptions=X;const J=X.dbName;if(J!=null)this.$dbName=J;if(delete X.dbName,!bu.hasUserDefinedProperty(X,"driverInfo"))X.driverInfo={name:"Mongoose",version:kw1.version};this.readyState=$6.connecting,this._connectionString=Y;let $;try{$=new gu.MongoClient(Y,X)}catch(W){throw this.readyState=$6.disconnected,W}this.client=$,$.setMaxListeners(0),await $.connect(),RR(this,$,X,J);for(let W of this.otherDbs)RR(W,$,{},W.name);return this};/*!
 * ignore
 */f5.prototype.setClient=function Z(Y){if(!(Y instanceof gu.MongoClient))throw new s9("Must call `setClient()` with an instance of MongoClient");if(this.readyState!==$6.disconnected)throw new s9("Cannot call `setClient()` on a connection that is already connected.");if(Y.topology==null)throw new s9("Cannot call `setClient()` with a MongoClient that you have not called `connect()` on yet.");this._connectionString=Y.s.url,RR(this,Y,{},Y.s.options.dbName);for(let X of Object.values(this.models))X.init().catch(function J(){});return this};/*!
 * ignore
 *//*!
 * Module exports.
 */vu.exports=f5});var mu=w((fw1)=>{/*!
 * Module exports.
 */fw1.Collection=rf();fw1.Connection=hu()});var du=w((Wx1,uu)=>{/*!
 * Valid mongoose options
 */var bw1=Object.freeze(["allowDiskUse","applyPluginsToChildSchemas","applyPluginsToDiscriminators","autoCreate","autoIndex","bufferCommands","bufferTimeoutMS","cloneSchemas","debug","id","timestamps.createdAt.immutable","maxTimeMS","objectIdGetter","overwriteModels","returnOriginal","runValidators","sanitizeFilter","sanitizeProjection","selectPopulatedPaths","setDefaultsOnInsert","strict","strictPopulate","strictQuery","toJSON","toObject","translateAliases"]);uu.exports=bw1});var lu=w((Gx1,cu)=>{/*!
 * Module dependencies.
 */var vw1=n1();class MR extends vw1{constructor(Z){let Y=Z.map((X)=>X.message).join(", ");if(Y.length>50)Y=Y.slice(0,50)+"...";super(`eachAsync() finished with ${Z.length} errors: ${Y}`);this.errors=Z}}Object.defineProperty(MR.prototype,"name",{value:"EachAsyncMultiError"});/*!
 * exports
 */cu.exports=MR});var NR=w((Kx1,iu)=>{var mw1=function(){const Z=[];let Y=null,X=0;return function $(W){if(Y===null&&Z.length===0)return Y=X++,W(J);Z.push(W)};function J(){if(Z.length!==0)Y=X++,Z.shift()(J);else Y=null}},pu=function(Z){if(Z.length===0)return null;return new hw1(Z)};/*!
 * Module dependencies.
 */var hw1=lu(),BR=H6();iu.exports=async function Z(Y,X,J){const $=J.parallel||1,W=J.batchSize,G=J.signal,K=J.continueOnError,Q=[],z=mw1();let H=!1;return new Promise((V,q)=>{if(G!=null){if(G.aborted)return V(null);G.addEventListener("abort",()=>{return H=!0,V(null)},{once:!0})}if(W!=null){if(typeof W!=="number")throw new TypeError("batchSize must be a number");else if(!Number.isInteger(W))throw new TypeError("batchSize must be an integer");else if(W<1)throw new TypeError("batchSize must be at least 1")}F((L,R)=>{if(L!=null)return q(L);V(R)})});function F(V){let q=0,L=0,R=null;for(let N=0;N<$;++N)z(B());function B(){let N=[],M=!1;return D;function D(m){if(M||H)return m();else if(R)return m();Y(function(O,E){if(R!=null)return m();if(O!=null)if(O.name==="MongoCursorExhaustedError")E=null;else if(K)Q.push(O);else return R=O,V(O),m();if(E==null){if(M=!0,q<=0){const c=K?pu(Q):R;V(c)}else if(W&&N.length)U(N,L++,n);return m()}if(++q,BR(()=>m()),W)N.push(E);if(W&&N.length!==W){BR(()=>z(D));return}const j=W?N:E;function n(c){if(W)q-=N.length,N=[];else--q;if(c!=null)if(K)Q.push(c);else return R=c,V(c);if((M||H)&&q<=0){const y=K?pu(Q):R;return V(y)}BR(()=>z(D))}U(j,L++,n)})}}}function U(V,q,L){let R;try{R=X(V,q)}catch(B){return L(B)}if(R&&typeof R.then==="function")R.then(function(){L(null)},function(B){L(B||new Error("`eachAsync()` promise rejected without error"))});else L(null)}}});var Yd=w((Qx1,Zd)=>{var W6=function(Z){ru.call(this,{autoDestroy:!0,objectMode:!0}),this.cursor=null,this.skipped=!1,this.query=Z;const Y=Z.model;this._mongooseOptions={},this._transforms=[],this.model=Y,this.options={},Y.hooks.execPre("find",Z,(X)=>{if(X!=null){if(X instanceof dw1.skipWrappedFunction){const J=X.args[0];if(J!=null&&(!Array.isArray(J)||J.length)){const $=new DR('Cannot `skipMiddlewareFunction()` with a value when using `.find().cursor()`, value must be nullish or empty array, got "'+ou.inspect(J)+'".');this._markError($),this.listeners("error").length>0&&this.emit("error",$);return}this.skipped=!0,this.emit("cursor",null);return}this._markError(X),this.listeners("error").length>0&&this.emit("error",X);return}if(Object.assign(this.options,Z._optionsForExec()),this._transforms=this._transforms.concat(Z._transforms.slice()),this.options.transform)this._transforms.push(this.options.transform);if(this.options.batchSize)this.options._populateBatchSize=Math.min(this.options.batchSize,5000);if(Y.collection._shouldBufferCommands()&&Y.collection.buffer)Y.collection.queue.push([()=>nu(Z,this)]);else nu(Z,this)})},nu=function(Z,Y){try{const X=Z.model.collection.find(Z._conditions,Y.options);Y.cursor=X,Y.emit("cursor",X)}catch(X){Y._markError(X),Y.listeners("error").length>0&&Y.emit("error",Y._error)}},au=function(Z){return Z==null?{done:!0}:{value:Z,done:!1}},MQ=function(Z,Y){let X=Y;if(Z._transforms.length)X=function(J,$){if(J||$===null&&!Z._mongooseOptions.transformNull)return Y(J,$);Y(J,Z._transforms.reduce(function(W,G){return G.call(Z,W)},$))};if(Z._error)return AR(function(){X(Z._error)});if(Z.skipped)return AR(()=>X(null,null));if(Z.cursor){if(Z.query._mongooseOptions.populate&&!Z._pop)Z._pop=tu.preparePopulationOptionsMQ(Z.query,Z.query._mongooseOptions),Z._pop.__noPromise=!0;if(Z.query._mongooseOptions.populate&&Z.options._populateBatchSize>1)if(Z._batchDocs&&Z._batchDocs.length)return RQ(Z,Z._batchDocs.shift(),Z._pop,X);else if(Z._batchExhausted)return X(null,null);else{Z._batchDocs=[],Z.cursor.next().then((J)=>{GX.call({ctx:Z,callback:X},null,J)},(J)=>{GX.call({ctx:Z,callback:X},J)});return}else return Z.cursor.next().then((J)=>{if(!J){X(null,null);return}if(!Z.query._mongooseOptions.populate)return RQ(Z,J,null,X);Z.query.model.populate(J,Z._pop).then(($)=>{RQ(Z,$,Z._pop,X)},($)=>{X($)})},(J)=>{X(J)})}else Z.once("error",Y),Z.once("cursor",function(J){if(Z.removeListener("error",Y),J==null){if(Z.skipped)return Y(null,null);return}MQ(Z,Y)})},GX=function(Z,Y){if(Z)return this.callback(Z);if(!Y)return this.ctx._batchExhausted=!0,su.call(this);if(this.ctx._batchDocs.push(Y),this.ctx._batchDocs.length<this.ctx.options._populateBatchSize){if(this.ctx._batchDocs.length>0&&this.ctx._batchDocs.length%1000===0)return AR(()=>this.ctx.cursor.next().then((X)=>{GX.call(this,null,X)},(X)=>{GX.call(this,X)}));this.ctx.cursor.next().then((X)=>{GX.call(this,null,X)},(X)=>{GX.call(this,X)})}else su.call(this)},su=function(){if(!this.ctx._batchDocs.length)return this.callback(null,null);this.ctx.query.model.populate(this.ctx._batchDocs,this.ctx._pop).then(()=>{RQ(this.ctx,this.ctx._batchDocs.shift(),this.ctx._pop,this.callback)},(Z)=>{this.callback(Z)})},RQ=function(Z,Y,X,J){if(Z.query._mongooseOptions.lean)return Z.model.hooks.execPost("find",Z.query,[[Y]],(Q)=>{if(Q!=null)return J(Q);J(null,Y)});const{model:$,_fields:W,_userProvidedFields:G,options:K}=Z.query;tu.createModelAndInit($,Y,W,G,K,X,(Q,z)=>{if(Q!=null)return J(Q);Z.model.hooks.execPost("find",Z.query,[[z]],(H)=>{if(H!=null)return J(H);J(null,z)})})},eu=function(Z,Y){if(Z.cursor)return Y();Z.once("cursor",function(X){if(X==null)return;Y()})};/*!
 * Module dependencies.
 */var DR=W0(),ru=import.meta.require("stream").Readable,uw1=NR(),tu=lY(),dw1=fY(),AR=H6(),ou=import.meta.require("util");ou.inherits(W6,ru);/*!
 * ignore
 */W6.prototype._read=function(){MQ(this,(Z,Y)=>{if(Z)return this.emit("error",Z);if(!Y){this.push(null),this.cursor.close(function(X){if(X)return this.emit("error",X)});return}this.push(Y)})};Object.defineProperty(W6.prototype,"map",{value:function(Z){return this._transforms.push(Z),this},enumerable:!0,configurable:!0,writable:!0});W6.prototype._markError=function(Z){return this._error=Z,this};W6.prototype.close=async function Z(){if(typeof arguments[0]==="function")throw new DR("QueryCursor.prototype.close() no longer accepts a callback");try{await this.cursor.close(),this.emit("close")}catch(Y){throw this.listeners("error").length>0&&this.emit("error",Y),Y}};W6.prototype.rewind=function(){return eu(this,()=>{this.cursor.rewind()}),this};W6.prototype.next=async function Z(){if(arguments[0]==="function")throw new DR("QueryCursor.prototype.next() no longer accepts a callback");return new Promise((Y,X)=>{MQ(this,function(J,$){if(J)return X(J);Y($)})})};W6.prototype.eachAsync=function(Z,Y,X){if(typeof Y==="function")X=Y,Y={};return Y=Y||{},uw1((J)=>MQ(this,J),Z,Y,X)};W6.prototype.options;W6.prototype.addCursorFlag=function(Z,Y){return eu(this,()=>{this.cursor.addCursorFlag(Z,Y)}),this};/*!
 * ignore
 */W6.prototype.transformNull=function(Z){if(arguments.length===0)Z=!0;return this._mongooseOptions.transformNull=Z,this};/*!
 * ignore
 */W6.prototype._transformForAsyncIterator=function(){if(this._transforms.indexOf(au)===-1)this.map(au);return this};if(Symbol.asyncIterator!=null)W6.prototype[Symbol.asyncIterator]=function(){return this.transformNull()._transformForAsyncIterator()};/*!
 * ignore
 *//*!
 * ignore
 *//*!
 * ignore
 *//*!
 * ignore
 *//*!
 * ignore
 */Zd.exports=W6});var TR=w((zx1,Jd)=>{var cw1=function(Z,Y){Xd(Z,Y,"maxTimeMS")},lw1=function(Z,Y){Xd(Z,Y,"allowDiskUse")},Xd=function(Z,Y,X){if(PR.hasUserDefinedProperty(Z,X))return;if(PR.hasUserDefinedProperty(Y.db.options,X))Z[X]=Y.db.options[X];else if(PR.hasUserDefinedProperty(Y.base.options,X))Z[X]=Y.base.options[X]},PR=G1();Jd.exports={applyGlobalMaxTimeMS:cw1,applyGlobalDiskUse:lw1}});var IR=w((Hx1,$d)=>{var pw1=z0();$d.exports=function Z(Y,X){if(X.writeConcern!=null)return;const J=pw1(Y,"options.writeConcern",{});if(Object.keys(J).length!=0){if(X.writeConcern={},!("w"in X)&&J.w!=null)X.writeConcern.w=J.w;if(!("j"in X)&&J.j!=null)X.writeConcern.j=J.j;if(!("wtimeout"in X)&&J.wtimeout!=null)X.writeConcern.wtimeout=J.wtimeout}else{if(!("w"in X)&&J.w!=null)X.w=J.w;if(!("j"in X)&&J.j!=null)X.j=J.j;if(!("wtimeout"in X)&&J.wtimeout!=null)X.wtimeout=J.wtimeout}}});var Kd=w((Fx1,Gd)=>{var Wd=cK();Gd.exports=function Z(Y,X,J){const $=Y;if(!Object.keys(J).some(Wd))return X.castForQuery(null,J,$);const G=Object.keys(J);let K=G.length;while(K--){const Q=G[K],z=J[Q];if(Q==="$not"){if(z&&X&&!X.caster){const H=Object.keys(z);if(H.length&&Wd(H[0]))for(let F of Object.keys(z))z[F]=X.castForQuery(F,z[F],$);else J[Q]=X.castForQuery(Q,z,$);continue}}else J[Q]=X.castForQuery(Q,z,$)}return J}});var zd=w((Ux1,Qd)=>{var iw1=/^\d+$/;Qd.exports=function Z(Y,X){let J=Y.path(X);if(J!=null)return J;const $=X.split(".");let W="",G=!1;for(let K of $){if(G&&iw1.test(K))continue;if(W=W.length===0?K:W+"."+K,J=Y.path(W),J!=null&&J.schema){if(Y=J.schema,W="",!G&&J.$isMongooseDocumentArray)G=!0}}return J}});var jR=w((Vx1,Fd)=>{var Hd=uY().modifiedPaths;Fd.exports=function Z(Y){const X=Object.keys(Y),J={},$={};for(let W of X){if(W.startsWith("$")){Hd(Y[W],"",J);continue}$[W]=Y[W]}return Hd($,"",J),J}});var ER=w((qx1,Ud)=>{var nw1=jR();Ud.exports=function Z(Y){if(Y==null)return{};const X=nw1(Y);return Object.keys(X).reduce((J,$)=>{const W=$.match(/\$\[[^\]]+\]/g);if(W==null)return J;for(let G of W){const K=$.indexOf(G);if(K!==$.lastIndexOf(G))throw new Error(`Path '${$}' contains the same array filter multiple times`);J[G.substring(2,G.length-1)]=$.substring(0,K-1).replace(/\$\[[^\]]+\]/g,"0")}return J},{})}});var Rd=w((Lx1,wd)=>{var Ld=function(Z,Y,X,J,$){if(!Array.isArray(Z))return;for(let W of Z){if(W==null)throw new Error(`Got null array filter in ${Z}`);const G=Object.keys(W).filter((V)=>W[V]!=null);if(G.length===0)continue;const K=G[0];if(K==="$and"||K==="$or"){for(let V of G)Ld(W[V],Y,X,J,$);continue}const Q=K.indexOf("."),z=Q===-1?K:K.substring(0,Q);if(J[z]==null)continue;const H=Vd(J[z]),F=qd(Y,H);let U=F!=null?F.schema:null;if(U!=null&&U.discriminators!=null&&W[z+"."+U.options.discriminatorKey])U=U.discriminators[W[z+"."+U.options.discriminatorKey]]||U;for(let V of G){if(J[V]===null)continue;if(Object.keys(J).length===0)continue;const q=V.indexOf(".");let L=q===-1?null:V.substring(q),R;if(L==null||U==null)R=F;else L=Vd(L),R=qd(U,L);if(R==null){if(!X)return;const B=L==null?H+".0":H+".0"+L;throw new Error(`Could not find path "${B}" in schema`)}if(typeof W[V]==="object")W[V]=aw1($,R,W[V]);else W[V]=R.castForQuery(null,W[V])}}},aw1=Kd(),Vd=O3(),qd=zd(),sw1=ER();wd.exports=function Z(Y){const X=Y.options.arrayFilters,J=Y.getUpdate(),$=Y.schema,W=sw1(J);let G=$.options.strict;if(Y._mongooseOptions.strict!=null)G=Y._mongooseOptions.strict;if(Y.model&&Y.model.base.options.strictQuery!=null)G=Y.model.base.options.strictQuery;if($._userProvidedOptions.strictQuery!=null)G=$._userProvidedOptions.strictQuery;if(Y._mongooseOptions.strictQuery!=null)G=Y._mongooseOptions.strictQuery;Ld(X,$,G,W,Y)}});var Nd=w((wx1,Bd)=>{var rw1=O3(),Md=z0(),tw1=j7(),ow1=ER();Bd.exports=function Z(Y,X,J,$,W){const G=$.split(".");let K=null,Q="adhocOrUndefined";J=J||{},X=X||{};const z=W!=null&&Array.isArray(W.arrayFilters)?W.arrayFilters:[],H=ow1(X);for(let F=0;F<G.length;++F){const U=rw1(G.slice(0,F+1).join("."));if(K=Y.path(U),K==null)continue;if(Q=Y.pathType(U),(K.$isSingleNested||K.$isMongooseDocumentArrayElement)&&K.schema.discriminators!=null){const V=Md(K,"schema.options.discriminatorKey"),q=U+"."+V,L=q.replace(/\.\d+\./,".");let R=null;if(q in J)R=J[q];if(L in J)R=J[L];const B=U.replace(/\.\d+$/,"");if(K.$isMongooseDocumentArrayElement&&Md(J[B],"$elemMatch."+V)!=null)R=J[B].$elemMatch[V];if(q in X)R=X[q];for(let m of Object.keys(H)){const O=H[m]+"."+V,E=m+"."+V;if(O===L){const j=z.find((n)=>n.hasOwnProperty(E));if(j!=null)R=j[E]}}if(R==null)continue;const N=tw1(K.caster.discriminators,R),M=N&&N.schema;if(M==null)continue;const D=G.slice(F+1).join(".");if(K=M.path(D),K!=null){Q=M._getPathType(D);break}}}return{type:Q,schematype:K}}});var Dd=w((Rx1,Ad)=>{var ew1=I5();Ad.exports=function Z(Y,X,J,$,W,G){if(Y==null||!Y.options||!Y.options.immutable)return!1;let K=Y.options.immutable;if(typeof K==="function")K=K.call(G,G);if(!K)return!1;if(X===!1)return!1;if(X==="throw")throw new ew1(null,`Field ${W} is immutable and strict = 'throw'`);return delete J[$],!0}});var Id=w((Mx1,Td)=>{var Pd=function(Z,Y,X,J,$){const W=Z.path(X);if(W==null)return;let G=ZR1(W,"options.immutable",null);if(G==null)return;if(typeof G==="function")G=G.call($,$);if(!G)return;J.$setOnInsert=J.$setOnInsert||{},J.$setOnInsert[X]=Y[X],delete Y[X]},ZR1=z0();Td.exports=function Z(Y,X,J){if(X==null)return;const $=Object.keys(X);for(let W of $){const G=W.startsWith("$");if(W==="$set"){const K=Object.keys(X[W]);for(let Q of K)Pd(Y,X[W],Q,X,J)}else if(!G)Pd(Y,X,W,X,J)}}});var OR=w((Bx1,jd)=>{var CR=G9();jd.exports=function Z(Y,X,J){if(X.indexOf(".")===-1){if(CR.has(X))return;Y[X]=J;return}const $=X.split("."),W=$.pop();let G=Y;for(let K of $){if(CR.has(K))continue;if(G[K]==null)G[K]={};G=G[K]}if(!CR.has(W))G[W]=J}});var yR=w((Nx1,fd)=>{var GR1=function(Z,Y){if(Z==="$unset"){if(typeof Y!=="string"&&(!Array.isArray(Y)||Y.find((X)=>typeof X!=="string")))throw new a3("Invalid $unset in pipeline, must be  a string or an array of strings");return Y}if(Z==="$project"){if(Y==null||typeof Y!=="object")throw new a3("Invalid $project in pipeline, must be an object");return Y}if(Z==="$addFields"||Z==="$set"){if(Y==null||typeof Y!=="object")throw new a3("Invalid "+Z+" in pipeline, must be an object");return Y}else if(Z==="$replaceRoot"||Z==="$replaceWith"){if(Y==null||typeof Y!=="object")throw new a3("Invalid "+Z+" in pipeline, must be an object");return Y}throw new a3('Invalid update pipeline operator: "'+Z+'"')},xd=function(Z,Y,X,J,$,W,G){const K=J.strict,Q=G?G+".":"",z=Object.keys(Y);let H=z.length,F=!1,U,V,q,L=null;const R=K!=null?K:Z.options.strict;while(H--){if(V=z[H],q=Y[V],X==="$pull"){if(U=Z._getSchema(Q+V),U!=null&&U.schema!=null){Y[V]=XR1(U.schema,Y[V],J,$),F=!0;continue}}const B=Q?Q+V:V;if(Z.discriminatorMapping!=null&&B===Z.options.discriminatorKey&&Z.discriminatorMapping.value!==Y[V]&&!J.overwriteDiscriminatorKey){if(R==="throw"){const N=new Error('Can\'t modify discriminator key "'+B+'" on discriminator model');L=KX(N,$,B,L);continue}else if(R){delete Y[V];continue}}if(JR1(q)==="Object"){if(U=Z._getSchema(Q+V),U==null){const N=Cd(Z,Y,W,Q+V,J);if(N.schematype!=null)U=N.schematype}if(X!=="$setOnInsert"&&Od(U,K,Y,V,Q+V,$))continue;if(U&&U.caster&&(X in xR))if("$each"in q){F=!0;try{Y[V]={$each:s3(U,q.$each,X,V,$,Q+V)}}catch(N){L=KX(N,$,V,L)}if(q.$slice!=null)Y[V].$slice=q.$slice|0;if(q.$sort)Y[V].$sort=q.$sort;if(q.$position!=null)Y[V].$position=kR(q.$position)}else{if(U!=null&&U.$isSingleNested){const N=K==null?U.schema.options.strict:K;try{Y[V]=U.castForQuery(null,q,$,{strict:N})}catch(M){L=KX(M,$,V,L)}}else try{Y[V]=s3(U,q,X,V,$,Q+V)}catch(N){L=KX(N,$,V,L)}if(Y[V]===void 0){delete Y[V];continue}F=!0}else if(X==="$currentDate"||(X in xR)&&U){try{Y[V]=s3(U,q,X,V,$,Q+V)}catch(N){L=KX(N,$,V,L)}if(Y[V]===void 0){delete Y[V];continue}F=!0}else{const N=Q+V,M=Z._getPathType(N);let D=K;if(M&&M.schema&&D==null)D=M.schema.options.strict;if(M.pathType==="undefined"){if(D==="throw")throw new Ed(N);else if(D){delete Y[V];continue}}F|=xd(Z,q,X,J,$,W,Q+V)||fR.isObject(q)&&Object.keys(q).length===0}}else{const N=V==="$each"||V==="$or"||V==="$and"||V==="$in"?G:Q+V;if(U=Z._getSchema(N),X!=="$setOnInsert"&&Od(U,K,Y,V,Q+V,$))continue;let M=Z._getPathType(N);if(U==null){const O=Cd(Z,Y,W,N,J);if(O.schematype!=null)U=O.schematype,M=O.type}let D=K;if(M&&M.schema&&K==null)D=M.schema.options.strict;if(D&&!U&&!/real|nested/.test(M.pathType))if(D==="throw"&&Z.virtuals[N]==null)throw new Ed(Q+V);else delete Y[V];else{if(X==="$rename"){F=!0;continue}try{if(Q.length===0||V.indexOf(".")===-1)Y[V]=s3(U,q,X,V,$,Q+V);else if(D!==!1||U!=null)WR1(Y,V,s3(U,q,X,V,$,Q+V)),delete Y[V]}catch(O){L=KX(O,$,V,L)}if(Array.isArray(Y[V])&&(X==="$addToSet"||X==="$push")&&V!=="$each"){if(U&&U.caster&&!U.caster.$isMongooseArray&&!U.caster[_d])Y[V]={$each:Y[V]}}if(Y[V]===void 0){delete Y[V];continue}F=!0}}}if(L!=null)throw L;return F},KX=function(Z,Y,X,J){if(typeof Y!=="object"||!Y.options.multipleCastError)throw Z;return J=J||new YR1,J.addError(X,Z),J},s3=function(Z,Y,X,J,$,W){if(!Z){if(X in Sd)try{return kR(Y)}catch(K){throw new SR("number",Y,W)}return Y}if(Z.caster&&(X in xR)&&(fR.isObject(Y)||Array.isArray(Y))&&!kd[X]){let K=0,Q=Z;while(Q.$isMongooseArray)++K,Q=Q.caster;let z=0,H=Y;while(Array.isArray(H))++z,H=H[0];const F=K-z;while(z<K)Y=[Y],++z;let U=Z.applySetters(Array.isArray(Y)?Y:[Y],$);for(let V=0;V<F;++V)U=U[0];return U}if(X in KR1)return Y;if(X in Sd){if(Y==null)throw new SR("number",Y,Z.path);if(X==="$inc")return Z.castForQuery(null,Y,$);try{return kR(Y)}catch(K){throw new SR("number",Y,Z.path)}}if(X==="$currentDate"){if(typeof Y==="object")return{$type:Y.$type};return Boolean(Y)}if(_R.has(J))return Z.castForQuery(J,Y,$);if(kd[X]){const K=Y!=null&&Z.$isMongooseArray&&Z.$fullPath!=null&&!Z.$fullPath.match(/\d+$/),Q=Z[_d]!=null;if(K||Q)return Z.applySetters(Y,$);return Z.castForQuery(null,Y,$)}return Z.castForQuery(null,Y,$)},SR=O8(),a3=W0(),Ed=I5(),YR1=g9(),kR=x3(),XR1=oY(),JR1=r8(),Cd=Nd(),Od=Dd(),$R1=Id(),_d=v9().schemaMixedSymbol,WR1=OR(),fR=G1(),_R=new Set(["$currentDate","$inc","$min","$max","$mul","$rename","$set","$setOnInsert","$unset","$addToSet","$pop","$pull","$push","$pullAll","$bit"]);fd.exports=function Z(Y,X,J,$,W){if(X==null)return;if(J=J||{},Array.isArray(X)){const F=X.length;for(let U=0;U<F;++U){const V=Object.keys(X[U]);for(let q of V)X[U][q]=GR1(q,X[U][q])}return X}if(J.upsert)$R1(Y,X,$);const G=Object.keys(X);let K=G.length;const Q={};let z,H=!1;W=W||{};while(K--){const F=G[K];if(!_R.has(F)){if(!Q.$set)if(X.$set)Q.$set=X.$set;else Q.$set={};if(Q.$set[F]=X[F],G.splice(K,1),!~G.indexOf("$set"))G.push("$set")}else if(F==="$set"){if(!Q.$set)Q[F]=X[F]}else Q[F]=X[F]}K=G.length;while(K--){const F=G[K];if(z=Q[F],H=H||F.startsWith("$"),z&&typeof z==="object"&&!Buffer.isBuffer(z)&&_R.has(F))xd(Y,z,F,J,$,W);else{const U="Invalid atomic update value for "+F+". Expected an object, received "+typeof z;throw new Error(U)}if(F.startsWith("$")&&fR.isEmptyObject(z))delete Q[F]}if(Object.keys(Q).length===0&&J.upsert&&Object.keys(W).length>0)return{$setOnInsert:{...W}};return Q};/*!
 * ignore
 *//*!
 * ignore
 */var Sd={$pop:1,$inc:1},KR1={$unset:1},xR={$push:1,$addToSet:1,$set:1,$setOnInsert:1};/*!
 * ignore
 */var kd={$set:1,$setOnInsert:1}});var gd=w((Ax1,yd)=>{async function zR1(Z,Y,X,J,$){return Promise.all(Y.map((W)=>new Promise((G,K)=>{const Q=W;if(W=QR1.createModel(Z,W,X,J),$.session!=null)W.$session($.session);W.$init(Q,$,(z)=>{if(z!=null)return K(z);G(W)})})))}var QR1=lY();yd.exports=zR1});var BQ=w((Dx1,bd)=>{var HR1=dY();/*!
 * ignore
 */bd.exports=function Z(Y){if(Y==null)return!1;const X=Object.keys(Y),J=X.length;if(J===0)return!1;for(let $=0;$<J;++$){const W=X[$];if(W.startsWith("+"))continue;if(HR1(Y[W])&&!!Y[W])if(Y[W]!=null&&typeof Y[W]==="object")return Z(Y[W]);else return!!Y[W]}return!1}});var hd=w((Px1,vd)=>{vd.exports=function Z(Y,X){return Y===X||X.startsWith(Y+".")}});var cd=w((qR1)=>{var VR1=function(Z){if(arguments.length>1)throw new Error("Adding properties is not supported");function Y(){}return Y.prototype=Z,new Y};/*!
 * Module dependencies.
 */var gR=["__proto__","constructor","prototype"],NQ=qR1.clone=function Z(Y,X){if(Y===void 0||Y===null)return Y;if(Array.isArray(Y))return qR1.cloneArray(Y,X);if(Y.constructor){if(/ObjectI[dD]$/.test(Y.constructor.name))return typeof Y.clone=="function"?Y.clone():new Y.constructor(Y.id);if(Y.constructor.name==="ReadPreference")return new Y.constructor(Y.mode,Z(Y.tags,X));if(Y._bsontype=="Binary"&&Y.buffer&&Y.value)return typeof Y.clone=="function"?Y.clone():new Y.constructor(Y.value(!0),Y.sub_type);if(Y.constructor.name==="Date"||Y.constructor.name==="Function")return new Y.constructor(+Y);if(Y.constructor.name==="RegExp")return new RegExp(Y);if(Y.constructor.name==="Buffer")return Buffer.from(Y)}if(UR1(Y))return qR1.cloneObject(Y,X);if(Y.valueOf)return Y.valueOf()};/*!
 * ignore
 */qR1.cloneObject=function Z(Y,X){const J=X&&X.minimize,$={},W=Object.keys(Y),G=W.length;let K=!1,Q,z="",H=0;for(H=0;H<G;++H){if(z=W[H],gR.indexOf(z)!==-1)continue;if(Q=NQ(Y[z],X),!J||typeof Q!=="undefined")K||(K=!0),$[z]=Q}return J?K&&$:$};qR1.cloneArray=function Z(Y,X){const J=[],$=Y.length;let W=0;for(;W<$;W++)J.push(NQ(Y[W],X));return J};qR1.merge=function Z(Y,X){const J=Object.keys(X);for(let $ of J){if(gR.indexOf($)!==-1)continue;if(typeof Y[$]==="undefined")Y[$]=X[$];else if(qR1.isObject(X[$]))Z(Y[$],X[$]);else Y[$]=X[$]}};qR1.mergeClone=function Z(Y,X){const J=Object.keys(X);for(let $ of J){if(gR.indexOf($)!==-1)continue;if(typeof Y[$]==="undefined")Y[$]=NQ(X[$]);else if(qR1.isObject(X[$]))Z(Y[$],X[$]);else Y[$]=NQ(X[$])}};qR1.readPref=function Z(Y){switch(Y){case"p":Y="primary";break;case"pp":Y="primaryPreferred";break;case"s":Y="secondary";break;case"sp":Y="secondaryPreferred";break;case"n":Y="nearest";break}return Y};qR1.readConcern=function Z(Y){if(typeof Y==="string"){switch(Y){case"l":Y="local";break;case"a":Y="available";break;case"m":Y="majority";break;case"lz":Y="linearizable";break;case"s":Y="snapshot";break}Y={level:Y}}return Y};var FR1=Object.prototype.toString;qR1.toString=function(Z){return FR1.call(Z)};var UR1=qR1.isObject=function(Z){return qR1.toString(Z)=="[object Object]"};qR1.keys=Object.keys;qR1.create=typeof Object.create=="function"?Object.create:VR1;qR1.inherits=function(Z,Y){Z.prototype=qR1.create(Y.prototype),Z.prototype.constructor=Z};qR1.isArgumentsObject=function(Z){return Object.prototype.toString.call(Z)==="[object Arguments]"}});var pd=w((jx1,ld)=>{var jR1=function(Z){if(Z=String(Z),Z.length>100)return;var Y=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(Z);if(!Y)return;var X=parseFloat(Y[1]),J=(Y[2]||"ms").toLowerCase();switch(J){case"years":case"year":case"yrs":case"yr":case"y":return X*IR1;case"weeks":case"week":case"w":return X*TR1;case"days":case"day":case"d":return X*r9;case"hours":case"hour":case"hrs":case"hr":case"h":return X*HX;case"minutes":case"minute":case"mins":case"min":case"m":return X*zX;case"seconds":case"second":case"secs":case"sec":case"s":return X*QX;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return X;default:return}},ER1=function(Z){var Y=Math.abs(Z);if(Y>=r9)return Math.round(Z/r9)+"d";if(Y>=HX)return Math.round(Z/HX)+"h";if(Y>=zX)return Math.round(Z/zX)+"m";if(Y>=QX)return Math.round(Z/QX)+"s";return Z+"ms"},CR1=function(Z){var Y=Math.abs(Z);if(Y>=r9)return AQ(Z,Y,r9,"day");if(Y>=HX)return AQ(Z,Y,HX,"hour");if(Y>=zX)return AQ(Z,Y,zX,"minute");if(Y>=QX)return AQ(Z,Y,QX,"second");return Z+" ms"},AQ=function(Z,Y,X,J){var $=Y>=X*1.5;return Math.round(Z/X)+" "+J+($?"s":"")},QX=1000,zX=QX*60,HX=zX*60,r9=HX*24,TR1=r9*7,IR1=r9*365.25;ld.exports=function(Z,Y){Y=Y||{};var X=typeof Z;if(X==="string"&&Z.length>0)return jR1(Z);else if(X==="number"&&isFinite(Z))return Y.long?CR1(Z):ER1(Z);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(Z))}});var bR=w((Ex1,id)=>{var OR1=function(Z){X.debug=X,X.default=X,X.coerce=Q,X.disable=W,X.enable=$,X.enabled=G,X.humanize=pd(),X.destroy=z,Object.keys(Z).forEach((H)=>{X[H]=Z[H]}),X.names=[],X.skips=[],X.formatters={};function Y(H){let F=0;for(let U=0;U<H.length;U++)F=(F<<5)-F+H.charCodeAt(U),F|=0;return X.colors[Math.abs(F)%X.colors.length]}X.selectColor=Y;function X(H){let F,U=null,V,q;function L(...R){if(!L.enabled)return;const B=L,N=Number(new Date),M=N-(F||N);if(B.diff=M,B.prev=F,B.curr=N,F=N,R[0]=X.coerce(R[0]),typeof R[0]!=="string")R.unshift("%O");let D=0;R[0]=R[0].replace(/%([a-zA-Z%])/g,(O,E)=>{if(O==="%%")return"%";D++;const j=X.formatters[E];if(typeof j==="function"){const n=R[D];O=j.call(B,n),R.splice(D,1),D--}return O}),X.formatArgs.call(B,R),(B.log||X.log).apply(B,R)}if(L.namespace=H,L.useColors=X.useColors(),L.color=X.selectColor(H),L.extend=J,L.destroy=X.destroy,Object.defineProperty(L,"enabled",{enumerable:!0,configurable:!1,get:()=>{if(U!==null)return U;if(V!==X.namespaces)V=X.namespaces,q=X.enabled(H);return q},set:(R)=>{U=R}}),typeof X.init==="function")X.init(L);return L}function J(H,F){const U=X(this.namespace+(typeof F==="undefined"?":":F)+H);return U.log=this.log,U}function $(H){X.save(H),X.namespaces=H,X.names=[],X.skips=[];let F;const U=(typeof H==="string"?H:"").split(/[\s,]+/),V=U.length;for(F=0;F<V;F++){if(!U[F])continue;if(H=U[F].replace(/\*/g,".*?"),H[0]==="-")X.skips.push(new RegExp("^"+H.slice(1)+"$"));else X.names.push(new RegExp("^"+H+"$"))}}function W(){const H=[...X.names.map(K),...X.skips.map(K).map((F)=>"-"+F)].join(",");return X.enable(""),H}function G(H){if(H[H.length-1]==="*")return!0;let F,U;for(F=0,U=X.skips.length;F<U;F++)if(X.skips[F].test(H))return!1;for(F=0,U=X.names.length;F<U;F++)if(X.names[F].test(H))return!0;return!1}function K(H){return H.toString().substring(2,H.toString().length-2).replace(/\.\*\?$/,"*")}function Q(H){if(H instanceof Error)return H.stack||H.message;return H}function z(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return X.enable(X.load()),X};id.exports=OR1});var ad=w((nd,PQ)=>{var SR1=function(){if(typeof window!=="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},kR1=function(Z){if(Z[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+Z[0]+(this.useColors?"%c ":" ")+"+"+nd.humanize(this.diff),!this.useColors)return;const Y="color: "+this.color;Z.splice(1,0,Y,"color: inherit");let X=0,J=0;Z[0].replace(/%[a-zA-Z%]/g,($)=>{if($==="%%")return;if(X++,$==="%c")J=X}),Z.splice(J,0,Y)},_R1=function(Z){try{if(Z)nd.storage.setItem("debug",Z);else nd.storage.removeItem("debug")}catch(Y){}},xR1=function(){let Z;try{Z=nd.storage.getItem("debug")}catch(Y){}if(!Z&&typeof process!=="undefined"&&("env"in process))Z=process.env.DEBUG;return Z},fR1=function(){try{return localStorage}catch(Z){}};nd.formatArgs=kR1;nd.save=_R1;nd.load=xR1;nd.useColors=SR1;nd.storage=fR1();nd.destroy=(()=>{let Z=!1;return()=>{if(!Z)Z=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}})();nd.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];nd.log=console.debug||console.log||(()=>{});PQ.exports=bR()(nd);var{formatters:yR1}=PQ.exports;yR1.j=function(Z){try{return JSON.stringify(Z)}catch(Y){return"[UnexpectedJSONParseError]: "+Y.message}}});var od=w((rd,IQ)=>{var lR1=function(){return"colors"in rd.inspectOpts?Boolean(rd.inspectOpts.colors):cR1.isatty(process.stderr.fd)},pR1=function(Z){const{namespace:Y,useColors:X}=this;if(X){const J=this.color,$="\x1B[3"+(J<8?J:"8;5;"+J),W=`  ${$};1m${Y} \x1B[0m`;Z[0]=W+Z[0].split("\n").join("\n"+W),Z.push($+"m+"+rd.humanize(this.diff)+"\x1B[0m")}else Z[0]=iR1()+Y+" "+Z[0]},iR1=function(){if(rd.inspectOpts.hideDate)return"";return(new Date()).toISOString()+" "},nR1=function(...Z){return process.stderr.write(TQ.format(...Z)+"\n")},aR1=function(Z){if(Z)process.env.DEBUG=Z;else delete process.env.DEBUG},sR1=function(){return process.env.DEBUG},rR1=function(Z){Z.inspectOpts={};const Y=Object.keys(rd.inspectOpts);for(let X=0;X<Y.length;X++)Z.inspectOpts[Y[X]]=rd.inspectOpts[Y[X]]},cR1=import.meta.require("tty"),TQ=import.meta.require("util");rd.init=rR1;rd.log=nR1;rd.formatArgs=pR1;rd.save=aR1;rd.load=sR1;rd.useColors=lR1;rd.destroy=TQ.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");rd.colors=[6,2,3,4,5,1];try{const Z=(()=>{ throw new Error(`Cannot require module "supports-color"`);})();if(Z&&(Z.stderr||Z).level>=2)rd.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}catch(Z){}rd.inspectOpts=Object.keys(process.env).filter((Z)=>{return/^debug_/i.test(Z)}).reduce((Z,Y)=>{const X=Y.substring(6).toLowerCase().replace(/_([a-z])/g,($,W)=>{return W.toUpperCase()});let J=process.env[Y];if(/^(yes|on|true|enabled)$/i.test(J))J=!0;else if(/^(no|off|false|disabled)$/i.test(J))J=!1;else if(J==="null")J=null;else J=Number(J);return Z[X]=J,Z},{});IQ.exports=bR()(rd);var{formatters:sd}=IQ.exports;sd.o=function(Z){return this.inspectOpts.colors=this.useColors,TQ.inspect(Z,this.inspectOpts).split("\n").map((Y)=>Y.trim()).join(" ")};sd.O=function(Z){return this.inspectOpts.colors=this.useColors,TQ.inspect(Z,this.inspectOpts)}});var r3=w((Sx1,vR)=>{if(typeof process==="undefined"||process.type==="renderer"||!1||process.__nwjs)vR.exports=ad();else vR.exports=od()});var Zc=w((ed)=>{var B0=ed;B0.distinct=function(Z){if(Z._fields&&Object.keys(Z._fields).length>0)return"field selection and slice";const Y=Object.keys(B0.distinct);let X;return Y.every(function(J){if(Z.options[J])return X=J,!1;return!0}),X};B0.distinct.select=B0.distinct.slice=B0.distinct.sort=B0.distinct.limit=B0.distinct.skip=B0.distinct.batchSize=B0.distinct.hint=B0.distinct.tailable=!0;B0.findOneAndUpdate=B0.findOneAndRemove=function(Z){const Y=Object.keys(B0.findOneAndUpdate);let X;return Y.every(function(J){if(Z.options[J])return X=J,!1;return!0}),X};B0.findOneAndUpdate.limit=B0.findOneAndUpdate.skip=B0.findOneAndUpdate.batchSize=B0.findOneAndUpdate.tailable=!0;B0.count=function(Z){if(Z._fields&&Object.keys(Z._fields).length>0)return"field selection and slice";const Y=Object.keys(B0.count);let X;return Y.every(function(J){if(Z.options[J])return X=J,!1;return!0}),X};B0.count.slice=B0.count.batchSize=B0.count.tailable=!0});var mR=w(($M1,Yc)=>{$M1.isNode=typeof process!="undefined"&&typeof Yc=="object"&&typeof global=="object"&&typeof Buffer=="function"&&process.argv;$M1.isMongo=!$M1.isNode&&typeof printjson=="function"&&typeof ObjectId=="function"&&typeof rs=="function"&&typeof sh=="function";$M1.isBrowser=!$M1.isNode&&!$M1.isMongo&&typeof window!="undefined";$M1.type=$M1.isNode?"node":$M1.isMongo?"mongo":$M1.isBrowser?"browser":"unknown"});var t3=w((Jc,$c)=>{var dR=function(){},GM1=function(Z){return function(){throw new Error("collection."+Z+" not implemented")}},uR=["find","findOne","updateMany","updateOne","replaceOne","count","distinct","findOneAndDelete","findOneAndUpdate","aggregate","findCursor","deleteOne","deleteMany"];for(let Z=0,Y=uR.length;Z<Y;++Z){const X=uR[Z];dR.prototype[X]=GM1(X)}$c.exports=Jc=dR;dR.methods=uR});var Qc=w((Gc,Kc)=>{var KM1=t3();class Wc extends KM1{constructor(Z){super();this.collection=Z,this.collectionName=Z.collectionName}async find(Z,Y){return this.collection.find(Z,Y).toArray()}async findOne(Z,Y){return this.collection.findOne(Z,Y)}async count(Z,Y){return this.collection.count(Z,Y)}async distinct(Z,Y,X){return this.collection.distinct(Z,Y,X)}async updateMany(Z,Y,X){return this.collection.updateMany(Z,Y,X)}async updateOne(Z,Y,X){return this.collection.updateOne(Z,Y,X)}async replaceOne(Z,Y,X){return this.collection.replaceOne(Z,Y,X)}async deleteOne(Z,Y){return this.collection.deleteOne(Z,Y)}async deleteMany(Z,Y){return this.collection.deleteMany(Z,Y)}async findOneAndDelete(Z,Y){return this.collection.findOneAndDelete(Z,Y)}async findOneAndUpdate(Z,Y,X){return this.collection.findOneAndUpdate(Z,Y,X)}findCursor(Z,Y){return this.collection.find(Z,Y)}}Kc.exports=Gc=Wc});var Hc=w((_x1,zc)=>{var cR=mR();if(cR.type=="unknown")throw new Error("Unknown environment");zc.exports=cR.isNode?Qc():cR.isMongo?t3():t3()});var nR=w((Uc,Vc)=>{var v=function(Z,Y){if(!(this instanceof v))return new v(Z,Y);const X=this.constructor.prototype;if(this.op=X.op||void 0,this.options=Object.assign({},X.options),this._conditions=X._conditions?y1.clone(X._conditions):{},this._fields=X._fields?y1.clone(X._fields):void 0,this._updateDoc=X._updateDoc?y1.clone(X._updateDoc):void 0,this._path=X._path||void 0,this._distinctDoc=X._distinctDoc||void 0,this._collection=X._collection||void 0,this._traceFunction=X._traceFunction||void 0,Y)this.setOptions(Y);if(Z)this.find(Z)},Fc=function(Z,Y,X){if(Array.isArray(Z.sort))throw new TypeError("Can\'t mix sort syntaxes. Use either array or object:\n- `.sort([[\'field\', 1], [\'test\', -1]])`\n- `.sort({ field: 1, test: -1 })`");let J;if(X&&X.$meta){J=Z.sort||(Z.sort={}),J[Y]={$meta:X.$meta};return}J=Z.sort||(Z.sort={});let $=String(X||1).toLowerCase();if($=lR[$],!$)throw new TypeError("Invalid sort value: { "+Y+": "+X+" }");J[Y]=$},HM1=function(Z,Y,X){if(Z.sort=Z.sort||[],!Array.isArray(Z.sort))throw new TypeError("Can\'t mix sort syntaxes. Use either array or object:\n- `.sort([[\'field\', 1], [\'test\', -1]])`\n- `.sort({ field: 1, test: -1 })`");let J=String(X||1).toLowerCase();if(J=lR[J],!J)throw new TypeError("Invalid sort value: [ "+Y+", "+X+" ]");Z.sort.push([Y,J])},FM1=function(Z,Y){if(Z.sort=Z.sort||new Map,!(Z.sort instanceof Map))throw new TypeError("Can\'t mix sort syntaxes. Use either array or object or map consistently");Y.forEach(function(X,J){let $=String(X||1).toLowerCase();if($=lR[$],!$)throw new TypeError("Invalid sort value: < "+J+": "+X+" >");Z.sort.set(J,$)})},pR=function(Z,Y,X,J,$){if(Z.op=Y,v.canMerge(X))Z.merge(X);if(J)Z._mergeUpdate(J);if(y1.isObject($))Z.setOptions($);return Z};async function iR(Z,Y){const X=Z._optionsForExec(),J=Z._conditions,$=Z._updateForExec();return v4("update",Z._collection.collectionName,J,$,X),Z._collection[Y](J,$,X)}var QM1=import.meta.require("assert"),zM1=import.meta.require("util"),y1=cd(),v4=r3()("mquery"),t9="$geoWithin";Object.defineProperty(v,"use$geoWithin",{get:function(){return t9=="$geoWithin"},set:function(Z){if(Z===!0)t9="$geoWithin";else t9="$within"}});v.prototype.toConstructor=function Z(){function Y(J,$){if(!(this instanceof Y))return new Y(J,$);v.call(this,J,$)}y1.inherits(Y,v);const X=Y.prototype;return X.options={},X.setOptions(this.options),X.op=this.op,X._conditions=y1.clone(this._conditions),X._fields=y1.clone(this._fields),X._updateDoc=y1.clone(this._updateDoc),X._path=this._path,X._distinctDoc=this._distinctDoc,X._collection=this._collection,X._traceFunction=this._traceFunction,Y};v.prototype.setOptions=function(Z){if(!(Z&&y1.isObject(Z)))return this;const Y=y1.keys(Z);let X;for(let J=0;J<Y.length;++J)if(X=Y[J],typeof this[X]=="function"){const $=Array.isArray(Z[X])?Z[X]:[Z[X]];this[X].apply(this,$)}else this.options[X]=Z[X];return this};v.prototype.collection=function Z(Y){return this._collection=new v.Collection(Y),this};v.prototype.collation=function(Z){return this.options.collation=Z,this};v.prototype.$where=function(Z){return this._conditions.$where=Z,this};v.prototype.where=function(){if(!arguments.length)return this;if(!this.op)this.op="find";const Z=typeof arguments[0];if(Z=="string"){if(this._path=arguments[0],arguments.length===2)this._conditions[this._path]=arguments[1];return this}if(Z=="object"&&!Array.isArray(arguments[0]))return this.merge(arguments[0]);throw new TypeError("path must be a string or object")};v.prototype.equals=function Z(Y){this._ensurePath("equals");const X=this._path;return this._conditions[X]=Y,this};v.prototype.eq=function Z(Y){this._ensurePath("eq");const X=this._path;return this._conditions[X]=Y,this};v.prototype.or=function Z(Y){const X=this._conditions.$or||(this._conditions.$or=[]);if(!Array.isArray(Y))Y=[Y];return X.push.apply(X,Y),this};v.prototype.nor=function Z(Y){const X=this._conditions.$nor||(this._conditions.$nor=[]);if(!Array.isArray(Y))Y=[Y];return X.push.apply(X,Y),this};v.prototype.and=function Z(Y){const X=this._conditions.$and||(this._conditions.$and=[]);if(!Array.isArray(Y))Y=[Y];return X.push.apply(X,Y),this};/*!
 * gt, gte, lt, lte, ne, in, nin, all, regex, size, maxDistance
 *
 *     Thing.where('type').nin(array)
 */"gt gte lt lte ne in nin all regex size maxDistance minDistance".split(" ").forEach(function(Z){v.prototype[Z]=function(){let Y,X;if(arguments.length===1)this._ensurePath(Z),X=arguments[0],Y=this._path;else X=arguments[1],Y=arguments[0];const J=this._conditions[Y]===null||typeof this._conditions[Y]==="object"?this._conditions[Y]:this._conditions[Y]={};return J["$"+Z]=X,this}});v.prototype.mod=function(){let Z,Y;if(arguments.length===1)this._ensurePath("mod"),Z=arguments[0],Y=this._path;else if(arguments.length===2&&!Array.isArray(arguments[1]))this._ensurePath("mod"),Z=[arguments[0],arguments[1]],Y=this._path;else if(arguments.length===3)Z=[arguments[1],arguments[2]],Y=arguments[0];else Z=arguments[1],Y=arguments[0];const X=this._conditions[Y]||(this._conditions[Y]={});return X.$mod=Z,this};v.prototype.exists=function(){let Z,Y;if(arguments.length===0)this._ensurePath("exists"),Z=this._path,Y=!0;else if(arguments.length===1)if(typeof arguments[0]==="boolean")this._ensurePath("exists"),Z=this._path,Y=arguments[0];else Z=arguments[0],Y=!0;else if(arguments.length===2)Z=arguments[0],Y=arguments[1];const X=this._conditions[Z]||(this._conditions[Z]={});return X.$exists=Y,this};v.prototype.elemMatch=function(){if(arguments[0]==null)throw new TypeError("Invalid argument");let Z,Y,X;if(typeof arguments[0]==="function")this._ensurePath("elemMatch"),Y=this._path,Z=arguments[0];else if(y1.isObject(arguments[0]))this._ensurePath("elemMatch"),Y=this._path,X=arguments[0];else if(typeof arguments[1]==="function")Y=arguments[0],Z=arguments[1];else if(arguments[1]&&y1.isObject(arguments[1]))Y=arguments[0],X=arguments[1];else throw new TypeError("Invalid argument");if(Z)X=new v,Z(X),X=X._conditions;const J=this._conditions[Y]||(this._conditions[Y]={});return J.$elemMatch=X,this};v.prototype.within=function Z(){if(this._ensurePath("within"),this._geoComparison=t9,arguments.length===0)return this;if(arguments.length===2)return this.box.apply(this,arguments);else if(2<arguments.length)return this.polygon.apply(this,arguments);const Y=arguments[0];if(!Y)throw new TypeError("Invalid argument");if(Y.center)return this.circle(Y);if(Y.box)return this.box.apply(this,Y.box);if(Y.polygon)return this.polygon.apply(this,Y.polygon);if(Y.type&&Y.coordinates)return this.geometry(Y);throw new TypeError("Invalid argument")};v.prototype.box=function(){let Z,Y;if(arguments.length===3)Z=arguments[0],Y=[arguments[1],arguments[2]];else if(arguments.length===2)this._ensurePath("box"),Z=this._path,Y=[arguments[0],arguments[1]];else throw new TypeError("Invalid argument");const X=this._conditions[Z]||(this._conditions[Z]={});return X[this._geoComparison||t9]={$box:Y},this};v.prototype.polygon=function(){let Z,Y;if(typeof arguments[0]=="string")Z=Array.from(arguments),Y=Z.shift();else this._ensurePath("polygon"),Y=this._path,Z=Array.from(arguments);const X=this._conditions[Y]||(this._conditions[Y]={});return X[this._geoComparison||t9]={$polygon:Z},this};v.prototype.circle=function(){let Z,Y;if(arguments.length===1)this._ensurePath("circle"),Z=this._path,Y=arguments[0];else if(arguments.length===2)Z=arguments[0],Y=arguments[1];else throw new TypeError("Invalid argument");if(!(("radius"in Y)&&Y.center))throw new Error("center and radius are required");const X=this._conditions[Z]||(this._conditions[Z]={}),J=Y.spherical?"$centerSphere":"$center",$=this._geoComparison||t9;if(X[$]={},X[$][J]=[Y.center,Y.radius],("unique"in Y))X[$].$uniqueDocs=!!Y.unique;return this};v.prototype.near=function Z(){let Y,X;if(this._geoComparison="$near",arguments.length===0)return this;else if(arguments.length===1)this._ensurePath("near"),Y=this._path,X=arguments[0];else if(arguments.length===2)Y=arguments[0],X=arguments[1];else throw new TypeError("Invalid argument");if(!X.center)throw new Error("center is required");const J=this._conditions[Y]||(this._conditions[Y]={}),$=X.spherical?"$nearSphere":"$near";if(Array.isArray(X.center)){J[$]=X.center;const W="maxDistance"in X?X.maxDistance:null;if(W!=null)J.$maxDistance=W;if(X.minDistance!=null)J.$minDistance=X.minDistance}else{if(X.center.type!="Point"||!Array.isArray(X.center.coordinates))throw new Error(zM1.format("Invalid GeoJSON specified for %s",$));if(J[$]={$geometry:X.center},("maxDistance"in X))J[$].$maxDistance=X.maxDistance;if("minDistance"in X)J[$].$minDistance=X.minDistance}return this};v.prototype.intersects=function Z(){if(this._ensurePath("intersects"),this._geoComparison="$geoIntersects",arguments.length===0)return this;const Y=arguments[0];if(Y!=null&&Y.type&&Y.coordinates)return this.geometry(Y);throw new TypeError("Invalid argument")};v.prototype.geometry=function Z(){if(!(this._geoComparison=="$within"||this._geoComparison=="$geoWithin"||this._geoComparison=="$near"||this._geoComparison=="$geoIntersects"))throw new Error("geometry() must come after `within()`, `intersects()`, or `near()");let Y,X;if(arguments.length===1)this._ensurePath("geometry"),X=this._path,Y=arguments[0];else throw new TypeError("Invalid argument");if(!(Y.type&&Array.isArray(Y.coordinates)))throw new TypeError("Invalid argument");const J=this._conditions[X]||(this._conditions[X]={});return J[this._geoComparison]={$geometry:Y},this};v.prototype.select=function Z(){let Y=arguments[0];if(!Y)return this;if(arguments.length!==1)throw new Error("Invalid select: select only takes 1 argument");this._validate("select");const X=this._fields||(this._fields={}),J=typeof Y;let $,W;if((J=="string"||y1.isArgumentsObject(Y))&&typeof Y.length=="number"||Array.isArray(Y)){if(J=="string")Y=Y.split(/\s+/);for($=0,W=Y.length;$<W;++$){let G=Y[$];if(!G)continue;const K=G[0]=="-"?0:1;if(K===0)G=G.substring(1);X[G]=K}return this}if(y1.isObject(Y)){const G=y1.keys(Y);for($=0;$<G.length;++$)X[G[$]]=Y[G[$]];return this}throw new TypeError("Invalid select() argument. Must be string or object.")};v.prototype.slice=function(){if(arguments.length===0)return this;this._validate("slice");let Z,Y;if(arguments.length===1){const J=arguments[0];if(typeof J==="object"&&!Array.isArray(J)){const $=Object.keys(J),W=$.length;for(let G=0;G<W;++G)this.slice($[G],J[$[G]]);return this}this._ensurePath("slice"),Z=this._path,Y=arguments[0]}else if(arguments.length===2)if(typeof arguments[0]==="number")this._ensurePath("slice"),Z=this._path,Y=[arguments[0],arguments[1]];else Z=arguments[0],Y=arguments[1];else if(arguments.length===3)Z=arguments[0],Y=[arguments[1],arguments[2]];const X=this._fields||(this._fields={});return X[Z]={$slice:Y},this};v.prototype.sort=function(Z){if(!Z)return this;let Y,X,J;this._validate("sort");const $=typeof Z;if(Array.isArray(Z)){X=Z.length;for(Y=0;Y<Z.length;++Y){if(!Array.isArray(Z[Y]))throw new Error("Invalid sort() argument, must be array of arrays");HM1(this.options,Z[Y][0],Z[Y][1])}return this}if(arguments.length===1&&$=="string"){Z=Z.split(/\s+/),X=Z.length;for(Y=0;Y<X;++Y){if(J=Z[Y],!J)continue;const W=J[0]=="-"?-1:1;if(W===-1)J=J.substring(1);Fc(this.options,J,W)}return this}if(y1.isObject(Z)){const W=y1.keys(Z);for(Y=0;Y<W.length;++Y)J=W[Y],Fc(this.options,J,Z[J]);return this}if(typeof Map!=="undefined"&&Z instanceof Map)return FM1(this.options,Z),this;throw new TypeError("Invalid sort() argument. Must be a string, object, or array.")};/*!
 * @ignore
 */var lR={1:1,"-1":-1,asc:1,ascending:1,desc:-1,descending:-1};/*!
 * limit, skip, batchSize, comment
 *
 * Sets these associated options.
 *
 *     query.comment('feed query');
 */["limit","skip","batchSize","comment"].forEach(function(Z){v.prototype[Z]=function(Y){return this._validate(Z),this.options[Z]=Y,this}});v.prototype.maxTime=v.prototype.maxTimeMS=function(Z){return this._validate("maxTime"),this.options.maxTimeMS=Z,this};v.prototype.hint=function(){if(arguments.length===0)return this;this._validate("hint");const Z=arguments[0];if(y1.isObject(Z)){const Y=this.options.hint||(this.options.hint={});for(let X in Z)Y[X]=Z[X];return this}if(typeof Z==="string")return this.options.hint=Z,this;throw new TypeError("Invalid hint. "+Z)};v.prototype.j=function Z(Y){return this.options.j=Y,this};v.prototype.slaveOk=function(Z){return this.options.slaveOk=arguments.length?!!Z:!0,this};v.prototype.read=v.prototype.setReadPreference=function(Z){if(arguments.length>1&&!v.prototype.read.deprecationWarningIssued)console.error("Deprecation warning: \'tags\' argument is not supported anymore in Query.read() method. Please use mongodb.ReadPreference object instead."),v.prototype.read.deprecationWarningIssued=!0;return this.options.readPreference=y1.readPref(Z),this};v.prototype.readConcern=v.prototype.r=function(Z){return this.options.readConcern=y1.readConcern(Z),this};v.prototype.tailable=function(){return this._validate("tailable"),this.options.tailable=arguments.length?!!arguments[0]:!0,this};v.prototype.writeConcern=v.prototype.w=function Z(Y){if(typeof Y==="object"){if(typeof Y.j!=="undefined")this.options.j=Y.j;if(typeof Y.w!=="undefined")this.options.w=Y.w;if(typeof Y.wtimeout!=="undefined")this.options.wtimeout=Y.wtimeout}else this.options.w=Y==="m"?"majority":Y;return this};v.prototype.wtimeout=v.prototype.wTimeout=function Z(Y){return this.options.wtimeout=Y,this};v.prototype.merge=function(Z){if(!Z)return this;if(!v.canMerge(Z))throw new TypeError("Invalid argument. Expected instanceof mquery or plain object");if(Z instanceof v){if(Z._conditions)y1.merge(this._conditions,Z._conditions);if(Z._fields)this._fields||(this._fields={}),y1.merge(this._fields,Z._fields);if(Z.options)this.options||(this.options={}),y1.merge(this.options,Z.options);if(Z._updateDoc)this._updateDoc||(this._updateDoc={}),y1.mergeClone(this._updateDoc,Z._updateDoc);if(Z._distinctDoc)this._distinctDoc=Z._distinctDoc;return this}return y1.merge(this._conditions,Z),this};v.prototype.find=function(Z){if(this.op="find",v.canMerge(Z))this.merge(Z);return this};v.prototype._find=async function Z(){const Y=this._conditions,X=this._optionsForExec();if(this.$useProjection)X.projection=this._fieldsForExec();else X.fields=this._fieldsForExec();return v4("_find",this._collection.collectionName,Y,X),this._collection.find(Y,X)};v.prototype.cursor=function Z(Y){if(this.op){if(this.op!=="find")throw new TypeError(".cursor only support .find method")}else this.find(Y);const X=this._conditions,J=this._optionsForExec();if(this.$useProjection)J.projection=this._fieldsForExec();else J.fields=this._fieldsForExec();return v4("findCursor",this._collection.collectionName,X,J),this._collection.findCursor(X,J)};v.prototype.findOne=function(Z){if(this.op="findOne",v.canMerge(Z))this.merge(Z);return this};v.prototype._findOne=async function Z(){const Y=this._conditions,X=this._optionsForExec();if(this.$useProjection)X.projection=this._fieldsForExec();else X.fields=this._fieldsForExec();return v4("findOne",this._collection.collectionName,Y,X),this._collection.findOne(Y,X)};v.prototype.count=function(Z){if(this.op="count",this._validate(),v.canMerge(Z))this.merge(Z);return this};v.prototype._count=async function Z(){const Y=this._conditions,X=this._optionsForExec();return v4("count",this._collection.collectionName,Y,X),this._collection.count(Y,X)};v.prototype.distinct=function(Z,Y){if(this.op="distinct",this._validate(),!Y&&typeof Z==="string")Y=Z,Z=void 0;if(typeof Y=="string")this._distinctDoc=Y;if(v.canMerge(Z))this.merge(Z);return this};v.prototype._distinct=async function Z(){if(!this._distinctDoc)throw new Error("No value for `distinct` has been declared");const Y=this._conditions,X=this._optionsForExec();return v4("distinct",this._collection.collectionName,Y,X),this._collection.distinct(this._distinctDoc,Y,X)};v.prototype.updateMany=function Z(Y,X,J){if(arguments.length===1)X=Y,Y=J=void 0;return pR(this,"updateMany",Y,X,J)};v.prototype._updateMany=async function(){return iR(this,"updateMany")};v.prototype.updateOne=function Z(Y,X,J){if(arguments.length===1)X=Y,Y=J=void 0;return pR(this,"updateOne",Y,X,J)};v.prototype._updateOne=async function(){return iR(this,"updateOne")};v.prototype.replaceOne=function Z(Y,X,J){if(arguments.length===1)X=Y,Y=J=void 0;return this.setOptions({overwrite:!0}),pR(this,"replaceOne",Y,X,J)};v.prototype._replaceOne=async function(){return iR(this,"replaceOne")};/*!
 * Internal helper for updateMany, updateOne
 */v.prototype.deleteOne=function(Z){if(this.op="deleteOne",v.canMerge(Z))this.merge(Z);return this};v.prototype._deleteOne=async function(){const Z=this._optionsForExec();delete Z.justOne;const Y=this._conditions;return v4("deleteOne",this._collection.collectionName,Y,Z),this._collection.deleteOne(Y,Z)};v.prototype.deleteMany=function(Z){if(this.op="deleteMany",v.canMerge(Z))this.merge(Z);return this};v.prototype._deleteMany=async function(){const Z=this._optionsForExec();delete Z.justOne;const Y=this._conditions;return v4("deleteOne",this._collection.collectionName,Y,Z),this._collection.deleteMany(Y,Z)};v.prototype.findOneAndUpdate=function(Z,Y,X){if(this.op="findOneAndUpdate",this._validate(),arguments.length===1)Y=Z,Z=X=void 0;if(v.canMerge(Z))this.merge(Z);if(Y)this._mergeUpdate(Y);return X&&this.setOptions(X),this};v.prototype._findOneAndUpdate=async function(){const Z=this._conditions,Y=this._updateForExec(),X=this._optionsForExec();return this._collection.findOneAndUpdate(Z,Y,X)};v.prototype.findOneAndRemove=v.prototype.findOneAndDelete=function(Z,Y){if(this.op="findOneAndRemove",this._validate(),v.canMerge(Z))this.merge(Z);return Y&&this.setOptions(Y),this};v.prototype._findOneAndRemove=async function(){const Z=this._optionsForExec(),Y=this._conditions;return this._collection.findOneAndDelete(Y,Z)};v.prototype.setTraceFunction=function(Z){return this._traceFunction=Z,this};v.prototype.exec=async function Z(Y){if(typeof Y==="string")this.op=Y;QM1.ok(this.op,"Missing query type: (find, etc)");const X="_"+this.op;if(typeof this[X]!=="function")throw new TypeError(`this[${X}] is not a function`);return this[X]()};v.prototype.then=async function(Z,Y){return this.exec().then(Z,Y)};v.prototype.cursor=function(){if(this.op!="find")throw new Error("cursor() is only available for find");const Z=this._conditions,Y=this._optionsForExec();if(this.$useProjection)Y.projection=this._fieldsForExec();else Y.fields=this._fieldsForExec();return v4("cursor",this._collection.collectionName,Z,Y),this._collection.findCursor(Z,Y)};v.prototype.selected=function Z(){return!!(this._fields&&Object.keys(this._fields).length>0)};v.prototype.selectedInclusively=function Z(){if(!this._fields)return!1;const Y=Object.keys(this._fields);if(Y.length===0)return!1;for(let X=0;X<Y.length;++X){const J=Y[X];if(this._fields[J]===0)return!1;if(this._fields[J]&&typeof this._fields[J]==="object"&&this._fields[J].$meta)return!1}return!0};v.prototype.selectedExclusively=function Z(){if(!this._fields)return!1;const Y=Object.keys(this._fields);if(Y.length===0)return!1;for(let X=0;X<Y.length;++X){const J=Y[X];if(this._fields[J]===0)return!0}return!1};v.prototype._mergeUpdate=function(Z){if(!this._updateDoc)this._updateDoc={};if(Z instanceof v){if(Z._updateDoc)y1.mergeClone(this._updateDoc,Z._updateDoc)}else y1.mergeClone(this._updateDoc,Z)};v.prototype._optionsForExec=function(){return y1.clone(this.options)};v.prototype._fieldsForExec=function(){return y1.clone(this._fields)};v.prototype._updateForExec=function(){const Z=y1.clone(this._updateDoc),Y=y1.keys(Z),X={};for(let J of Y){if(this.options.overwrite){X[J]=Z[J];continue}if(J[0]!=="$"){if(!X.$set)if(Z.$set)X.$set=Z.$set;else X.$set={};if(X.$set[J]=Z[J],!~Y.indexOf("$set"))Y.push("$set")}else if(J==="$set"){if(!X.$set)X[J]=Z[J]}else X[J]=Z[J]}return this._compiledUpdate=X,X};v.prototype._ensurePath=function(Z){if(!this._path){const Y=Z+"() must be used after where() when called with these arguments";throw new Error(Y)}};/*!
 * Permissions
 */v.permissions=Zc();v._isPermitted=function(Z,Y){const X=v.permissions[Y];if(!X)return!0;return X[Z]!==!0};v.prototype._validate=function(Z){let Y,X;if(Z===void 0){if(X=v.permissions[this.op],typeof X!="function")return!0;Y=X(this)}else if(!v._isPermitted(Z,this.op))Y=Z;if(Y)throw new Error(Y+" cannot be used with "+this.op)};v.canMerge=function(Z){return Z instanceof v||y1.isObject(Z)};v.setGlobalTraceFunction=function(Z){v.traceFunction=Z};/*!
 * Exports.
 */v.utils=y1;v.env=mR();v.Collection=Hc();v.BaseCollection=t3();Vc.exports=Uc=v});var aR=w((xx1,qc)=>{qc.exports=function Z(Y,X){if(typeof Y==="string")Y=Y.split(/\s+/);if(!Array.isArray(Y)&&Object.prototype.toString.call(Y)!=="[object Arguments]")return Y;const $=Y.length,W={};for(let G=0;G<$;++G){let K=Y[G];if(!K)continue;const Q=K[0]=="-"?0:1;if(!X&&Q===0)K=K.substring(1);W[K]=Q}return W}});var Rc=w((fx1,wc)=>{var Lc=function(Z,Y){const X=Object.keys(Z)[0];if(X==="$and"||X==="$or"){if(!Array.isArray(Z[X]))return!1;return Z[X].find((W)=>Lc(W,Y))!=null}const J=X.indexOf("."),$=J===-1?X:X.slice(0,J);return Y.find((W)=>W.includes("$["+$+"]"))!=null};wc.exports=function Z(Y,X){const J=Object.keys(Y).map(($)=>Object.keys(Y[$])).reduce(($,W)=>$.concat(W),[]);return X.filter(($)=>{return Lc($,J)})}});var sR=w((yx1,Mc)=>{/*!
 * ignore
 */Mc.exports=function Z(Y){if(typeof Y!=="object"||Y===null)return!1;const X=Object.keys(Y),J=X.length;for(let $=0;$<J;++$)if(X[$][0]==="$")return!0;return!1}});var rR=w((gx1,Bc)=>{var UM1=sR(),{trustedSymbol:VM1}=dZ();Bc.exports=function Z(Y){if(Y==null||typeof Y!=="object")return Y;if(Array.isArray(Y)){for(let J of Y)Z(J);return Y}const X=Object.keys(Y);for(let J of X){const $=Y[J];if($!=null&&$[VM1])continue;if(J==="$and"||J==="$or"){Z($);continue}if(UM1($)){const W=Object.keys($);if(W.length===1&&W[0]==="$eq")continue;Y[J]={$eq:Y[J]}}}return Y}});var Ac=w((bx1,Nc)=>{Nc.exports=function Z(Y){if(Y==null)return;const X=Object.keys(Y);for(let J=0;J<X.length;++J)if(typeof Y[X[J]]==="string")Y[X[J]]=1}});var Tc=w((vx1,Pc)=>{var Dc=function(Z,Y){const X=Y.split("."),J=X.length;let $=X[0];for(let W=1;W<J;++W){if(Z[$]!=null||Z[$+".$"]!=null)return!0;$+="."+X[W]}return Z[$]!=null||Z[$+".$"]!=null},qM1=cY(),LM1=BQ();/*!
 * ignore
 */Pc.exports=function Z(Y,X,J){if(J==null)return;const $=Object.keys(J);if(X=X||{},LM1(Y))for(let W of $){if(!Dc(X,W))Y[W]=1;else if(X[W]===0)delete Y[W];const G=J[W]?.refPath;if(typeof G==="string"){if(!Dc(X,G))Y[G]=1;else if(X[G]===0)delete Y[G]}}else if(qM1(Y))for(let W of $){if(X[W]==null)delete Y[W];const G=J[W]?.refPath;if(typeof G==="string"&&X[G]==null)delete Y[G]}};/*!
 * ignore
 */});var tR=w((hx1,jc)=>{var RM1=function(Z,Y){if(Z[Y])return!0;const X=Y.split(".");let J=X[0];for(let W=1;W<X.length;++W){if(Z[J])return!0;J+="."+X[W]}const $=Object.keys(Z);if($.length){const W=Y+".";for(let G of $)if(G.slice(0,Y.length+1)===W)return!0}return!1},Ic=uY().modifiedPaths,wM1=z0();jc.exports=function(Z,Y,X,J){J=J||{};const $=J.setDefaultsOnInsert!=null?J.setDefaultsOnInsert:Y.base.options.setDefaultsOnInsert;if(!J.upsert||$===!1)return X;const W=Object.keys(X||{}),G={},K={},Q=W.length,z={};let H=!1;for(let V=0;V<Q;++V)if(W[V].startsWith("$"))Ic(X[W[V]],"",z),H=!0;if(!H)Ic(X,"",z);const F=Object.keys(Z),U=F.length;for(let V=0;V<U;++V){const q=F[V],L=Z[q];if(L&&typeof L==="object"){const R=Object.keys(L),B=R.length;let N=!1;for(let M=0;M<B;++M)if(R[M].startsWith("$")){N=!0;break}if(N)continue}G[q]=!0,z[q]=!0}if(J&&J.overwrite&&!H)return X;return Y.eachPath(function(V,q){if(q.path==="_id"&&q.options.auto)return;const L=q.getDefault(null,!0);if(RM1(z,V))return;if(typeof L==="undefined")return;if(q.splitPath().includes("$*"))return;if(X=X||{},X.$setOnInsert=X.$setOnInsert||{},wM1(X,V)==null)X.$setOnInsert[V]=L;K[V]=L}),X}});var kc=w((mx1,Sc)=>{/*!
 * Module dependencies.
 */var Ec=g9(),MM1=O3(),Cc=uY().flatten,Oc=uY().modifiedPaths;Sc.exports=function(Z,Y,X,J,$){const W=Object.keys(X||{});let G={},K={};const Q={},z={},H=W.length;let F=!1;const U={};let V,q,L;for(L=0;L<H;++L)if(W[L].startsWith("$")){if(F=!0,W[L]==="$push"||W[L]==="$addToSet"){const S=Object.keys(X[W[L]]);for(let a=0;a<S.length;++a)if(V=X[W[L]][S[a]],V&&V.$each)z[S[a]]=(z[S[a]]||[]).concat(V.$each);else z[S[a]]=(z[S[a]]||[]).concat([V]);continue}Oc(X[W[L]],"",U);const c=Cc(X[W[L]],null,null,Y),y=Object.keys(c),C=y.length;for(let S=0;S<C;++S){const a=MM1(y[S]);if(q=W[L],a.includes("$"))continue;if(q==="$set"||q==="$setOnInsert"||q==="$pull"||q==="$pullAll")K[a]=c[y[S]],Q[a]=q==="$pull"||q==="$pullAll";else if(q==="$unset")K[a]=void 0;G[a]=!0}}if(!F)Oc(X,"",U),K=Cc(X,null,null,Y),G=Object.keys(K);const R=Object.keys(K),B=R.length,N=[],M=[],D=[],m=Z;function O(c,y){const C=Y._getSchema(R[c]);if(C==null)return;if(C.instance==="Mixed"&&C.path!==R[c])return;if(y&&Array.isArray(y.$in))y.$in.forEach((S,a)=>{N.push(function(E1){C.doValidate(S,function(u0){if(u0)u0.path=R[a]+".$in."+a,M.push(u0);E1(null)},m,{updateValidator:!0})})});else{if(Q[R[c]]&&C.$isMongooseArray)return;if(C.$isMongooseDocumentArrayElement&&y!=null&&y.$__!=null)D.push(R[c]),N.push(function(S){C.doValidate(y,function(a){if(a)if(a.errors)for(let E1 of Object.keys(a.errors)){const u0=a.errors[E1];u0.path=R[c]+"."+E1,M.push(u0)}else a.path=R[c],M.push(a);return S(null)},m,{updateValidator:!0})});else N.push(function(S){for(let a of D)if(R[c].startsWith(a+"."))return S(null);C.doValidate(y,function(a){if(C.schema!=null&&C.schema.options.storeSubdocValidationError===!1&&a instanceof Ec)return S(null);if(a)a.path=R[c],M.push(a);S(null)},m,{updateValidator:!0})})}}for(L=0;L<B;++L)O(L,K[R[L]]);const E=Object.keys(z);for(let c of E){let y=Y._getSchema(c);if(y&&y.$isMongooseDocumentArray)N.push(function(C){y.doValidate(z[c],n(c,M,C),J&&J.context==="query"?Z:null)});else{y=Y._getSchema(c+".0");for(let C of z[c])N.push(function(S){y.doValidate(C,n(c,M,S),J&&J.context==="query"?Z:null,{updateValidator:!0})})}}if($!=null){let c=N.length;if(c===0)return j($);for(let y of N)y(function(){if(--c<=0)j($)});return}return function(c){let y=N.length;if(y===0)return j(c);for(let C of N)C(function(){if(--y<=0)j(c)})};function j(c){if(M.length){const y=new Ec(null);for(let C of M)y.addError(C.path,C);return c(y)}c(null)}function n(c,y,C){return function(S){if(S)S.path=c,y.push(S);C(null)}}}});var kQ=w((ux1,ic)=>{var d=function(Z,Y,X,J){if(!this._mongooseOptions)this._mongooseOptions={};Y=Y||{},this._transforms=[],this._hooks=new ZM,this._executionStack=null;const $=Object.keys(Y);for(let G of $)this._mongooseOptions[G]=Y[G];if(J)this.mongooseCollection=J;if(X)this.model=X,this.schema=X.schema;if(this.model&&this.model._mapreduce)this.lean();if(D6.call(this,null,Y),J)this.collection(J);if(Z)this.find(Z);this.options=this.options||{},this.$useProjection=!0;const W=this&&this.schema&&this.schema.options&&this.schema.options.collation||null;if(W!=null)this.options.collation=W},mc=function(Z){try{PM1(Z)}catch(Y){Z.error(Y)}},eR=function(Z,Y){if(Z===1||Z==="asc"||Z==="ascending")return 1;if(Z===-1||Z==="desc"||Z==="descending")return-1;if(Z?.$meta!=null)return{$meta:Z.$meta};throw new TypeError("Invalid sort value: { "+Y+": "+Z+" }")},gc=function(Z,Y,X,J,$,W,G,K){if(J.includeResultMetadata&&Y==null)return Q(null),null;OQ.createModelAndInit(Z,Y,$,W,J,G,Q);function Q(z,H){if(z)return oR(()=>K(z));if(J.includeResultMetadata){if(Y&&H){if(J.session!=null)H.$session(J.session);X.value=H}else X.value=null;return oR(()=>K(null,X))}if(J.session!=null)H.$session(J.session);oR(()=>K(null,H))}},X$=function(Z){if(!Z||!Z.model||!Z.model.schema)return;const Y=Z.model.schema;if(Y&&Y.discriminatorMapping&&!Y.discriminatorMapping.isRoot)Z._conditions[Y.discriminatorMapping.key]=Y.discriminatorMapping.value},uc=function(Z){if("new"in Z)Z.returnDocument=Z.new?"after":"before",delete Z.new;if("returnOriginal"in Z)Z.returnDocument=Z.returnOriginal?"before":"after",delete Z.returnOriginal;if(typeof Z.returnDocument==="string")Z.returnOriginal=Z.returnDocument==="before"},XM=function(Z,Y,X){const J=Z._optionsForExec(Z.model);if(Y in J)return J[Y];if(Y in Z.model.base.options)return Z.model.base.options[Y];return X},YM=function(Z,Y,X,J,$,W){if($.lean&&typeof $.lean.transform==="function"){$.lean.transform(Y);for(let G=0;G<Z.childSchemas.length;G++){const K=X?X+"."+Z.childSchemas[G].model.path:Z.childSchemas[G].model.path,Q=Z.childSchemas[G].schema,z=vc.get(K,Y);if(z==null)continue;if(Array.isArray(z))for(let H=0;H<z.length;H++)$.lean.transform(z[H]);else $.lean.transform(z);YM(Q,z,K,J,$)}if(W)return W(null,Y);else return}if($.includeResultMetadata)return W(null,J);return W(null,Y)},dc=function(Z,Y,X,J){if(J.lean&&typeof J.lean.transform==="function"){for(let $ of Y)J.lean.transform($);for(let $=0;$<Z.childSchemas.length;$++){const W=X?X+"."+Z.childSchemas[$].model.path:Z.childSchemas[$].model.path,G=Z.childSchemas[$].schema;let K=vc.get(W,Y);if(K==null)continue;K=K.flat();for(let Q=0;Q<K.length;Q++)J.lean.transform(K[Q]);dc(G,K,W,J)}}return Y};async function JM(Z){if(this._castConditions(),mc(this),this.error()!=null)throw this.error();const Y=this._conditions,X=this._optionsForExec(this.model);this._applyTranslateAliases(X),this._update=_8(this._update,X);const J=Z==="replaceOne";if(J)this._update=new this.model(this._update,null,!0);else{if(this._update=this._castUpdate(this._update),this._update==null||Object.keys(this._update).length===0)return{acknowledged:!1};const W=Object.assign({},X,{setDefaultsOnInsert:this._mongooseOptions.setDefaultsOnInsert});this._update=hc(this._conditions,this.model.schema,this._update,W)}if(Array.isArray(X.arrayFilters))X.arrayFilters=SM1(this._update,X.arrayFilters);if(XM(this,"runValidators",!1))await this.validate(this._update,X,J);if(this._update.toBSON)this._update=this._update.toBSON();return this.mongooseCollection[Z](Y,this._update,X)}var $M=function(Z,Y,X,J,$,W){if(Z.op=Y,Z._validateOp(),J=J||{},$!=null){if("strict"in $)Z._mongooseOptions.strict=$.strict}if(!(X instanceof d)&&X!=null&&X.toString()!=="[object Object]")Z.error(new y5(X,"filter",Y));else Z.merge(X);if(q0.isObject($))Z.setOptions($);if(Z._mergeUpdate(J),W)return Z.exec(W),Z;return Z},UX=function(Z,Y){if(typeof Z==="function")Z=Z.call(Y);if(Z==null)Z=new BM1(Y.getQuery(),Y.model.modelName);return Z},vM1=function(Z){return new Promise((Y,X)=>{Z._hooks.execPost("exec",Z,[],{},(J)=>{if(J)return X(J);Y()})})},cc=function(Z,Y,X,J){if(Z._queryMiddleware==null){if(X!=null)throw X;return Y}return new Promise(($,W)=>{const G=X?{error:X}:{};Z._queryMiddleware.execPost(J||Z.op,Z,[Y],G,(K,Q)=>{if(K)return W(K);$(Q)})})},hM1=function(Z){return new Promise((Y,X)=>{Z._hooks.execPre("exec",Z,[],(J)=>{if(J!=null)return X(J);Y()})})},lc=function(Z,Y){if(Z._queryMiddleware==null)return;return new Promise((X,J)=>{Z._queryMiddleware.execPre(Y||Z.op,Z,[],($)=>{if($!=null)return J($);X()})})},SQ=function(Z,Y){return function(X,J){if(X!=null)return Y(X);for(let $ of Z._transforms)try{J=$(J)}catch(W){return Y(W)}return Y(null,J)}},pc=function(Z,Y,X){for(let J of Y){if(Z.push(X+J.path),!Array.isArray(J.populate))continue;pc(Z,J.populate,X+J.path+".")}};/*!
 * Module dependencies.
 */var e3=O8(),BM1=KK(),ZM=fY(),k8=W0(),y5=LL(),_c=Yd(),xc=g9(),{applyGlobalMaxTimeMS:Z$,applyGlobalDiskUse:Y$}=TR(),NM1=Ww(),AM1=IR(),DM1=oY(),PM1=Rd(),CQ=x3(),TM1=yR(),_8=w0(),fc=gd(),bc=j7(),OQ=lY(),oR=H6(),IM1=n7().internalToObjectOptions,jM1=cY(),EM1=BQ(),CM1=BK(),yc=hd(),vc=P7(),D6=nR(),OM1=aR(),SM1=Rc(),kM1=rR(),_M1=Ac(),xM1=Tc(),hc=tR(),EQ=G9(),fM1=kc(),o3=import.meta.require("util"),q0=G1(),yM1=Hw(),gM1=new Set(["allowDiskUse","batchSize","collation","comment","explain","hint","j","lean","limit","maxTimeMS","populate","projection","read","select","skip","slice","sort","tailable","w","writeConcern","wtimeout"]);/*!
 * inherit mquery
 */d.prototype=new D6;d.prototype.constructor=d;d.base=D6.prototype;/*!
 * Overwrite mquery's `_distinct`, because Mongoose uses that name
 * to store the field to apply distinct on.
 */Object.defineProperty(d.prototype,"_distinct",{configurable:!0,writable:!0,enumerable:!0,value:void 0});d.use$geoWithin=D6.use$geoWithin;d.prototype.toConstructor=function Z(){const Y=this.model,X=this.mongooseCollection,J=function(G,K){if(!(this instanceof J))return new J(G,K);this._mongooseOptions=_8($._mongooseOptions),d.call(this,G,K||null,Y,X)};o3.inherits(J,Y.Query);const $=J.prototype;$.options={};const W=Object.assign({},this.options);if(W.sort!=null)$.sort(W.sort),delete W.sort;return $.setOptions(W),$.op=this.op,$._validateOp(),$._conditions=_8(this._conditions),$._fields=_8(this._fields),$._update=_8(this._update,{flattenDecimals:!1}),$._path=this._path,$._distinct=this._distinct,$._collection=this._collection,$._mongooseOptions=this._mongooseOptions,J};d.prototype.clone=function(){const Z=this.model,Y=this.mongooseCollection,X=new this.model.Query({},{},Z,Y),J=Object.assign({},this.options);if(J.sort!=null)X.sort(J.sort),delete J.sort;return X.setOptions(J),X.op=this.op,X._validateOp(),X._conditions=_8(this._conditions),X._fields=_8(this._fields),X._update=_8(this._update,{flattenDecimals:!1}),X._path=this._path,X._distinct=this._distinct,X._collection=this._collection,X._mongooseOptions=this._mongooseOptions,X};d.prototype.slice=function(){if(arguments.length===0)return this;this._validate("slice");let Z,Y;if(arguments.length===1){const J=arguments[0];if(typeof J==="object"&&!Array.isArray(J)){const $=Object.keys(J),W=$.length;for(let G=0;G<W;++G)this.slice($[G],J[$[G]]);return this}this._ensurePath("slice"),Z=this._path,Y=arguments[0]}else if(arguments.length===2)if(typeof arguments[0]==="number")this._ensurePath("slice"),Z=this._path,Y=[arguments[0],arguments[1]];else Z=arguments[0],Y=arguments[1];else if(arguments.length===3)Z=arguments[0],Y=[arguments[1],arguments[2]];const X={};return X[Z]={$slice:Y},this.select(X),this};/*!
 * ignore
 */var bM1=new Set(yM1);d.prototype._validateOp=function(){if(this.op!=null&&!bM1.has(this.op))this.error(new Error('Query has invalid `op`: "'+this.op+'"'))};d.prototype.mod=function(){let Z,Y;if(arguments.length===1)this._ensurePath("mod"),Z=arguments[0],Y=this._path;else if(arguments.length===2&&!Array.isArray(arguments[1]))this._ensurePath("mod"),Z=[arguments[0],arguments[1]],Y=this._path;else if(arguments.length===3)Z=[arguments[1],arguments[2]],Y=arguments[0];else Z=arguments[1],Y=arguments[0];const X=this._conditions[Y]||(this._conditions[Y]={});return X.$mod=Z,this};d.prototype.limit=function Z(Y){if(this._validate("limit"),typeof Y==="string")try{Y=CQ(Y)}catch(X){throw new e3("Number",Y,"limit")}return this.options.limit=Y,this};d.prototype.skip=function Z(Y){if(this._validate("skip"),typeof Y==="string")try{Y=CQ(Y)}catch(X){throw new e3("Number",Y,"skip")}return this.options.skip=Y,this};d.prototype.projection=function(Z){if(arguments.length===0)return this._fields;return this._fields={},this._userProvidedFields={},this.select(Z),this._fields};d.prototype.select=function Z(){let Y=arguments[0];if(!Y)return this;if(arguments.length!==1)throw new Error("Invalid select: select only takes 1 argument");this._validate("select");const X=this._fields||(this._fields={}),J=this._userProvidedFields||(this._userProvidedFields={});let $=void 0;if(this.model!=null&&q0.hasUserDefinedProperty(this.model.db.options,"sanitizeProjection"))$=this.model.db.options.sanitizeProjection;else if(this.model!=null&&q0.hasUserDefinedProperty(this.model.base.options,"sanitizeProjection"))$=this.model.base.options.sanitizeProjection;else $=this._mongooseOptions.sanitizeProjection;function W(G){return typeof G==="string"&&$?G=1:G}if(Y=OM1(Y,!0),q0.isObject(Y)){if(this.selectedInclusively())Object.entries(Y).forEach(([G,K])=>{if(K){if(X["-"+G]!=null)delete X["-"+G];X[G]=J[G]=W(K)}else Object.keys(J).forEach((Q)=>{if(yc(G,Q))delete X[Q],delete J[Q]})});else if(this.selectedExclusively())Object.entries(Y).forEach(([G,K])=>{if(!K){if(X["+"+G]!=null)delete X["+"+G];X[G]=J[G]=W(K)}else Object.keys(J).forEach((Q)=>{if(yc(G,Q))delete X[Q],delete J[Q]})});else{const G=Object.keys(Y);for(let K=0;K<G.length;++K){const Q=Y[G[K]],z=G[K];X[z]=W(Q),J[z]=W(Q)}}return this}throw new TypeError("Invalid select() argument. Must be string or object.")};d.prototype.read=function Z(Y,X){if(typeof Y==="string")Y=NM1(Y),this.options.readPreference={mode:Y,tags:X};else this.options.readPreference=Y;return this};d.prototype.toString=function Z(){if(this.op==="count"||this.op==="countDocuments"||this.op==="find"||this.op==="findOne"||this.op==="deleteMany"||this.op==="deleteOne"||this.op==="findOneAndDelete"||this.op==="remove")return`${this.model.modelName}.${this.op}(${o3.inspect(this._conditions)})`;if(this.op==="distinct")return`${this.model.modelName}.distinct('${this._distinct}', ${o3.inspect(this._conditions)})`;if(this.op==="findOneAndReplace"||this.op==="findOneAndUpdate"||this.op==="replaceOne"||this.op==="update"||this.op==="updateMany"||this.op==="updateOne")return`${this.model.modelName}.${this.op}(${o3.inspect(this._conditions)}, ${o3.inspect(this._update)})`;return`${this.model.modelName}.${this.op}()`};d.prototype.session=function Z(Y){if(Y==null)delete this.options.session;return this.options.session=Y,this};d.prototype.writeConcern=function Z(Y){if(Y==null)return delete this.options.writeConcern,this;return this.options.writeConcern=Y,this};d.prototype.w=function Z(Y){if(Y==null)delete this.options.w;if(this.options.writeConcern!=null)this.options.writeConcern.w=Y;else this.options.w=Y;return this};d.prototype.j=function Z(Y){if(Y==null)delete this.options.j;if(this.options.writeConcern!=null)this.options.writeConcern.j=Y;else this.options.j=Y;return this};d.prototype.wtimeout=function Z(Y){if(Y==null)delete this.options.wtimeout;if(this.options.writeConcern!=null)this.options.writeConcern.wtimeout=Y;else this.options.wtimeout=Y;return this};d.prototype.getOptions=function(){return this.options};d.prototype.setOptions=function(Z,Y){if(Y){if(this._mongooseOptions=Z&&_8(Z)||{},this.options=Z||{},("populate"in Z))this.populate(this._mongooseOptions);return this}if(Z==null)return this;if(typeof Z!=="object")throw new Error('Options must be an object, got "'+Z+'"');if(Z=Object.assign({},Z),Array.isArray(Z.populate)){const X=Z.populate;delete Z.populate;const J=X.length;for(let $=0;$<J;++$)this.populate(X[$])}if("setDefaultsOnInsert"in Z)this._mongooseOptions.setDefaultsOnInsert=Z.setDefaultsOnInsert,delete Z.setDefaultsOnInsert;if("overwriteDiscriminatorKey"in Z)this._mongooseOptions.overwriteDiscriminatorKey=Z.overwriteDiscriminatorKey,delete Z.overwriteDiscriminatorKey;if("sanitizeProjection"in Z){if(Z.sanitizeProjection&&!this._mongooseOptions.sanitizeProjection)_M1(this._fields);this._mongooseOptions.sanitizeProjection=Z.sanitizeProjection,delete Z.sanitizeProjection}if("sanitizeFilter"in Z)this._mongooseOptions.sanitizeFilter=Z.sanitizeFilter,delete Z.sanitizeFilter;if("timestamps"in Z)this._mongooseOptions.timestamps=Z.timestamps,delete Z.timestamps;if("defaults"in Z)this._mongooseOptions.defaults=Z.defaults;if("translateAliases"in Z)this._mongooseOptions.translateAliases=Z.translateAliases,delete Z.translateAliases;if(Z.lean==null&&this.schema&&("lean"in this.schema.options))this._mongooseOptions.lean=this.schema.options.lean;if(typeof Z.limit==="string")try{Z.limit=CQ(Z.limit)}catch(X){throw new e3("Number",Z.limit,"limit")}if(typeof Z.skip==="string")try{Z.skip=CQ(Z.skip)}catch(X){throw new e3("Number",Z.skip,"skip")}for(let X of Object.keys(Z))if(gM1.has(X)){const J=Array.isArray(Z[X])?Z[X]:[Z[X]];this[X].apply(this,J)}else this.options[X]=Z[X];return this};d.prototype.explain=function Z(Y){if(arguments.length===0)this.options.explain=!0;else if(Y===!1)delete this.options.explain;else this.options.explain=Y;return this};d.prototype.allowDiskUse=function(Z){if(arguments.length===0)this.options.allowDiskUse=!0;else if(Z===!1)delete this.options.allowDiskUse;else this.options.allowDiskUse=Z;return this};d.prototype.maxTimeMS=function(Z){return this.options.maxTimeMS=Z,this};d.prototype.getFilter=function(){return this._conditions};d.prototype.getQuery=function(){return this._conditions};d.prototype.setQuery=function(Z){this._conditions=Z};d.prototype.getUpdate=function(){return this._update};d.prototype.setUpdate=function(Z){this._update=Z};d.prototype._fieldsForExec=function(){if(this._fields==null)return null;if(Object.keys(this._fields).length===0)return null;return _8(this._fields)};d.prototype._updateForExec=function(){const Z=_8(this._update,{transform:!1,depopulate:!0}),Y=Object.keys(Z);let X=Y.length;const J={};while(X--){const $=Y[X];if($[0]!=="$"){if(!J.$set)if(Z.$set)J.$set=Z.$set;else J.$set={};if(J.$set[$]=Z[$],Y.splice(X,1),!~Y.indexOf("$set"))Y.push("$set")}else if($==="$set"){if(!J.$set)J[$]=Z[$]}else J[$]=Z[$]}return J};d.prototype._optionsForExec=function(Z){const Y=_8(this.options);if(delete Y.populate,Z=Z||this.model,!Z)return Y;AM1(Z.schema,Y);const X=Z&&Z.schema&&Z.schema.options&&Z.schema.options.read;if(!("readPreference"in Y)&&X)Y.readPreference=X;if(Y.upsert!==void 0)Y.upsert=!!Y.upsert;if(Y.writeConcern){if(Y.j)Y.writeConcern.j=Y.j,delete Y.j;if(Y.w)Y.writeConcern.w=Y.w,delete Y.w;if(Y.wtimeout)Y.writeConcern.wtimeout=Y.wtimeout,delete Y.wtimeout}if(this._applyPaths(),this._fields!=null){this._fields=this._castFields(this._fields);const J=this._fieldsForExec();if(J!=null)Y.projection=J}return Y};d.prototype.lean=function(Z){return this._mongooseOptions.lean=arguments.length?Z:!0,this};d.prototype.set=function(Z,Y){if(typeof Z==="object"){const X=Object.keys(Z);for(let J of X)this.set(J,Z[J]);return this}if(this._update=this._update||{},(Z in this._update))delete this._update[Z];return this._update.$set=this._update.$set||{},this._update.$set[Z]=Y,this};d.prototype.get=function Z(Y){const X=this._update;if(X==null)return;const J=X.$set;if(J==null)return X[Y];if(q0.hasUserDefinedProperty(X,Y))return X[Y];if(q0.hasUserDefinedProperty(J,Y))return J[Y];return};d.prototype.error=function Z(Y){if(arguments.length===0)return this._error;return this._error=Y,this};d.prototype._unsetCastError=function Z(){if(this._error!=null&&!(this._error instanceof e3))return;return this.error(null)};d.prototype.mongooseOptions=function(Z){if(arguments.length>0)this._mongooseOptions=Z;return this._mongooseOptions};d.prototype._castConditions=function(){let Z=void 0;if(this.model!=null&&q0.hasUserDefinedProperty(this.model.db.options,"sanitizeFilter"))Z=this.model.db.options.sanitizeFilter;else if(this.model!=null&&q0.hasUserDefinedProperty(this.model.base.options,"sanitizeFilter"))Z=this.model.base.options.sanitizeFilter;else Z=this._mongooseOptions.sanitizeFilter;if(Z)kM1(this._conditions);try{this.cast(this.model),this._unsetCastError()}catch(Y){this.error(Y)}};/*!
 * ignore
 */d.prototype._find=async function Z(){if(this._castConditions(),this.error()!=null)throw this.error();const Y=this._mongooseOptions,X=this,J=X._userProvidedFields||{};Z$(this.options,this.model),Y$(this.options,this.model);const $=Object.assign({},{session:this&&this.options&&this.options.session||null,lean:Y.lean||null}),W=this._optionsForExec();this._applyTranslateAliases(W);const G=this._conditions,K=W.projection,Q=await this.mongooseCollection.find(G,W);if(W.explain)return Q.explain();let z=await Q.toArray();if(z.length===0)return z;if(!Y.populate){const F=X.schema.options.versionKey;if(Y.lean&&Y.lean.versionKey===!1&&F)z.forEach((U)=>{if(F in U)delete U[F]});return Y.lean?dc(X.model.schema,z,null,$):fc(X.model,z,K,J,$)}const H=OQ.preparePopulationOptionsMQ(X,Y);if(Y.lean)return X.model.populate(z,H);return z=await fc(X.model,z,K,J,$),await this.model.populate(z,H),z};d.prototype.find=function(Z){if(typeof Z==="function"||typeof arguments[1]==="function")throw new k8("Query.prototype.find() no longer accepts a callback");if(this.op="find",D6.canMerge(Z))this.merge(Z),X$(this);else if(Z!=null)this.error(new y5(Z,"filter","find"));return this};d.prototype.merge=function(Z){if(!Z)return this;const Y={overwrite:!0};if(Z instanceof d){if(Z._conditions){if(Y.omit={},this._conditions&&this._conditions.$and&&Z._conditions.$and)Y.omit.$and=!0,this._conditions.$and=this._conditions.$and.concat(Z._conditions.$and);if(this._conditions&&this._conditions.$or&&Z._conditions.$or)Y.omit.$or=!0,this._conditions.$or=this._conditions.$or.concat(Z._conditions.$or);q0.merge(this._conditions,Z._conditions,Y)}if(Z._fields)this._fields||(this._fields={}),q0.merge(this._fields,Z._fields,Y);if(Z.options)this.options||(this.options={}),q0.merge(this.options,Z.options,Y);if(Z._update)this._update||(this._update={}),q0.mergeClone(this._update,Z._update);if(Z._distinct)this._distinct=Z._distinct;return q0.merge(this._mongooseOptions,Z._mongooseOptions),this}else if(this.model!=null&&Z instanceof this.model.base.Types.ObjectId)return q0.merge(this._conditions,{_id:Z},Y),this;else if(Z&&Z.$__)Z=Z.toObject(IM1);if(Y.omit={},this._conditions&&this._conditions.$and&&Z.$and)Y.omit.$and=!0,this._conditions.$and=this._conditions.$and.concat(Z.$and);if(this._conditions&&this._conditions.$or&&Z.$or)Y.omit.$or=!0,this._conditions.$or=this._conditions.$or.concat(Z.$or);return q0.merge(this._conditions,Z,Y),this};d.prototype.collation=function(Z){if(this.options==null)this.options={};return this.options.collation=Z,this};d.prototype._completeOne=function(Z,Y,X){if(!Z&&!this.options.includeResultMetadata)return X(null,null);const J=this.model,$=_8(this._fields),W=this._userProvidedFields||{},G=this._mongooseOptions,K=this.options;if(!K.lean&&G.lean)K.lean=G.lean;if(K.explain)return X(null,Z);if(!G.populate){const z=this.schema.options.versionKey;if(G.lean&&G.lean.versionKey===!1&&z){if(z in Z)delete Z[z]}return G.lean?YM(J.schema,Z,null,Y,K,X):gc(J,Z,Y,K,$,W,null,X)}const Q=OQ.preparePopulationOptionsMQ(this,this._mongooseOptions);if(G.lean)return J.populate(Z,Q).then((z)=>{YM(J.schema,z,null,Y,K,X)},(z)=>{X(z)});gc(J,Z,Y,K,$,W,[],(z,H)=>{if(z!=null)return X(z);J.populate(H,Q).then((F)=>{X(null,F)},(F)=>{X(F)})})};d.prototype._findOne=async function Z(){if(this._castConditions(),this.error())throw this.error();Z$(this.options,this.model),Y$(this.options,this.model);const Y=this._optionsForExec();this._applyTranslateAliases(Y);const X=await this.mongooseCollection.findOne(this._conditions,Y);return new Promise((J,$)=>{this._completeOne(X,null,SQ(this,(W,G)=>{if(W)return $(W);J(G)}))})};d.prototype.findOne=function(Z,Y,X){if(typeof Z==="function"||typeof Y==="function"||typeof X==="function"||typeof arguments[3]==="function")throw new k8("Query.prototype.findOne() no longer accepts a callback");if(this.op="findOne",this._validateOp(),X)this.setOptions(X);if(Y)this.select(Y);if(D6.canMerge(Z))this.merge(Z),X$(this);else if(Z!=null)this.error(new y5(Z,"filter","findOne"));return this};d.prototype._countDocuments=async function Z(){try{this.cast(this.model)}catch(J){this.error(J)}if(this.error())throw this.error();Z$(this.options,this.model),Y$(this.options,this.model);const Y=this._optionsForExec();this._applyTranslateAliases(Y);const X=this._conditions;return this.mongooseCollection.countDocuments(X,Y)};/*!
 * If `translateAliases` option is set, call `Model.translateAliases()`
 * on the following query properties: filter, projection, update, distinct.
 */d.prototype._applyTranslateAliases=function Z(Y){let X=!1;if("translateAliases"in this._mongooseOptions)X=this._mongooseOptions.translateAliases;else if(this.model?.schema?._userProvidedOptions?.translateAliases!=null)X=this.model.schema._userProvidedOptions.translateAliases;else if(this.model?.base?.options?.translateAliases!=null)X=this.model.base.options.translateAliases;if(!X)return;if(this.model?.schema?.aliases&&Object.keys(this.model.schema.aliases).length>0){if(this.model.translateAliases(this._conditions,!0),this.model.translateAliases(Y.projection,!0),this.model.translateAliases(this._update,!0),this._distinct!=null&&this.model.schema.aliases[this._distinct]!=null)this._distinct=this.model.schema.aliases[this._distinct]}};d.prototype._estimatedDocumentCount=async function Z(){if(this.error())throw this.error();const Y=this._optionsForExec();return this.mongooseCollection.estimatedDocumentCount(Y)};d.prototype.estimatedDocumentCount=function(Z){if(typeof Z==="function"||typeof arguments[1]==="function")throw new k8("Query.prototype.estimatedDocumentCount() no longer accepts a callback");if(this.op="estimatedDocumentCount",this._validateOp(),typeof Z==="object"&&Z!=null)this.setOptions(Z);return this};d.prototype.countDocuments=function(Z,Y){if(typeof Z==="function"||typeof Y==="function"||typeof arguments[2]==="function")throw new k8("Query.prototype.countDocuments() no longer accepts a callback");if(this.op="countDocuments",this._validateOp(),D6.canMerge(Z))this.merge(Z);if(typeof Y==="object"&&Y!=null)this.setOptions(Y);return this};d.prototype.__distinct=async function Z(){if(this._castConditions(),this.error())throw this.error();Z$(this.options,this.model),Y$(this.options,this.model);const Y=this._optionsForExec();return this._applyTranslateAliases(Y),this.mongooseCollection.distinct(this._distinct,this._conditions,Y)};d.prototype.distinct=function(Z,Y){if(typeof Z==="function"||typeof Y==="function"||typeof arguments[2]==="function")throw new k8("Query.prototype.distinct() no longer accepts a callback");if(this.op="distinct",this._validateOp(),D6.canMerge(Y))this.merge(Y),X$(this);else if(Y!=null)this.error(new y5(Y,"filter","distinct"));if(Z!=null)this._distinct=Z;return this};d.prototype.sort=function(Z){if(arguments.length>1)throw new Error("sort() only takes 1 Argument");if(this.options.sort==null)this.options.sort={};const Y=this.options.sort;if(typeof Z==="string"){const X=Z.indexOf(" ")===-1?[Z]:Z.split(" ");for(let J of X){const $=J[0]=="-"?-1:1;if($===-1)J=J.slice(1);if(EQ.has(J))continue;Y[J]=$}}else if(Array.isArray(Z))for(let X of Z){if(!Array.isArray(X))throw new TypeError("Invalid sort() argument, must be array of arrays");const J=""+X[0];if(EQ.has(J))continue;Y[J]=eR(X[1],J)}else if(typeof Z==="object"&&Z!=null&&!(Z instanceof Map))for(let X of Object.keys(Z)){if(EQ.has(X))continue;Y[X]=eR(Z[X],X)}else if(Z instanceof Map)for(let X of Z.keys()){if(X=""+X,EQ.has(X))continue;Y[X]=eR(Z.get(X),X)}else if(Z!=null)throw new TypeError("Invalid sort() argument. Must be a string, object, array, or map.");return this};/*!
 * Convert sort values
 */d.prototype.deleteOne=function Z(Y,X){if(typeof Y==="function"||typeof X==="function"||typeof arguments[2]==="function")throw new k8("Query.prototype.deleteOne() no longer accepts a callback");if(this.op="deleteOne",this.setOptions(X),D6.canMerge(Y))this.merge(Y),X$(this);else if(Y!=null)this.error(new y5(Y,"filter","deleteOne"));return this};d.prototype._deleteOne=async function Z(){if(this._castConditions(),this.error()!=null)throw this.error();const Y=this._optionsForExec();return this._applyTranslateAliases(Y),this.mongooseCollection.deleteOne(this._conditions,Y)};d.prototype.deleteMany=function(Z,Y){if(typeof Z==="function"||typeof Y==="function"||typeof arguments[2]==="function")throw new k8("Query.prototype.deleteMany() no longer accepts a callback");if(this.setOptions(Y),this.op="deleteMany",D6.canMerge(Z))this.merge(Z),X$(this);else if(Z!=null)this.error(new y5(Z,"filter","deleteMany"));return this};d.prototype._deleteMany=async function Z(){if(this._castConditions(),this.error()!=null)throw this.error();const Y=this._optionsForExec();return this._applyTranslateAliases(Y),this.mongooseCollection.deleteMany(this._conditions,Y)};d.prototype.findOneAndUpdate=function(Z,Y,X){if(typeof Z==="function"||typeof Y==="function"||typeof X==="function"||typeof arguments[3]==="function")throw new k8("Query.prototype.findOneAndUpdate() no longer accepts a callback");switch(this.op="findOneAndUpdate",this._validateOp(),this._validate(),arguments.length){case 2:X=void 0;break;case 1:Y=Z,Z=X=void 0;break}if(D6.canMerge(Z))this.merge(Z);else if(Z!=null)this.error(new y5(Z,"filter","findOneAndUpdate"));if(Y)this._mergeUpdate(Y);if(X=X?_8(X):{},X.projection)this.select(X.projection),delete X.projection;if(X.fields)this.select(X.fields),delete X.fields;const J=this&&this.model&&this.model.base&&this.model.base.options&&this.model.base.options.returnOriginal;if(X.new==null&&X.returnDocument==null&&X.returnOriginal==null&&J!=null)X.returnOriginal=J;return this.setOptions(X),this};d.prototype._findOneAndUpdate=async function Z(){if(this._castConditions(),mc(this),this.error())throw this.error();if(Z$(this.options,this.model),Y$(this.options,this.model),("strict"in this.options))this._mongooseOptions.strict=this.options.strict;const Y=this._optionsForExec(this.model);uc(Y),this._applyTranslateAliases(Y),this._update=this._castUpdate(this._update);const X=Object.assign({},Y,{setDefaultsOnInsert:this._mongooseOptions.setDefaultsOnInsert});if(this._update=hc(this._conditions,this.model.schema,this._update,X),!this._update||Object.keys(this._update).length===0)if(Y.upsert){const G=_8(this._update);delete G._id,this._update={$set:G}}else return this._executionStack=null,await this._findOne();else if(this._update instanceof Error)throw this._update;else if(this._update.$set&&Object.keys(this._update.$set).length===0)delete this._update.$set;if(XM(this,"runValidators",!1))await this.validate(this._update,Y,!1);if(this._update.toBSON)this._update=this._update.toBSON();let $=await this.mongooseCollection.findOneAndUpdate(this._conditions,this._update,Y);for(let G of this._transforms)$=G($);const W=!Y.includeResultMetadata?$:$.value;return new Promise((G,K)=>{this._completeOne(W,$,SQ(this,(Q,z)=>{if(Q)return K(Q);G(z)}))})};d.prototype.findOneAndDelete=function(Z,Y){if(typeof Z==="function"||typeof Y==="function"||typeof arguments[2]==="function")throw new k8("Query.prototype.findOneAndDelete() no longer accepts a callback");if(this.op="findOneAndDelete",this._validateOp(),this._validate(),D6.canMerge(Z))this.merge(Z);return Y&&this.setOptions(Y),this};d.prototype._findOneAndDelete=async function Z(){if(this._castConditions(),this.error()!=null)throw this.error();const Y=this.options.includeResultMetadata,X=this._conditions,J=this._optionsForExec(this.model);this._applyTranslateAliases(J);let $=await this.mongooseCollection.findOneAndDelete(X,J);for(let G of this._transforms)$=G($);const W=!Y?$:$.value;return new Promise((G,K)=>{this._completeOne(W,$,SQ(this,(Q,z)=>{if(Q)return K(Q);G(z)}))})};d.prototype.findOneAndReplace=function(Z,Y,X){if(typeof Z==="function"||typeof Y==="function"||typeof X==="function"||typeof arguments[4]==="function")throw new k8("Query.prototype.findOneAndReplace() no longer accepts a callback");if(this.op="findOneAndReplace",this._validateOp(),this._validate(),D6.canMerge(Z))this.merge(Z);else if(Z!=null)this.error(new y5(Z,"filter","findOneAndReplace"));if(Y!=null)this._mergeUpdate(Y);X=X||{};const J=this&&this.model&&this.model.base&&this.model.base.options&&this.model.base.options.returnOriginal;if(X.new==null&&X.returnDocument==null&&X.returnOriginal==null&&J!=null)X.returnOriginal=J;return this.setOptions(X),this};d.prototype._findOneAndReplace=async function Z(){if(this._castConditions(),this.error()!=null)throw this.error();if("strict"in this.options)this._mongooseOptions.strict=this.options.strict,delete this.options.strict;const Y=this._conditions,X=this._optionsForExec();this._applyTranslateAliases(X),uc(X);const J=this.options.includeResultMetadata,$={skipId:!0};if("strict"in this._mongooseOptions)$.strict=this._mongooseOptions.strict;const W=XM(this,"runValidators",!1);try{const Q=new this.model(this._update,null,$);if(W)await Q.validate();else if(Q.$__.validationError)throw Q.$__.validationError;this._update=Q.toBSON()}catch(Q){if(Q instanceof xc)throw Q;const z=new xc;throw z.errors[Q.path]=Q,z}let G=await this.mongooseCollection.findOneAndReplace(Y,this._update,X);for(let Q of this._transforms)G=Q(G);const K=!J?G:G.value;return new Promise((Q,z)=>{this._completeOne(K,G,SQ(this,(H,F)=>{if(H)return z(H);Q(F)}))})};/*!
 * ignore
 *//*!
 * ignore
 */d.prototype._mergeUpdate=function(Z){if(!this._update)this._update=Array.isArray(Z)?[]:{};if(Z==null||typeof Z==="object"&&Object.keys(Z).length===0)return;if(Z instanceof d){if(Array.isArray(this._update))throw new Error("Cannot mix array and object updates");if(Z._update)q0.mergeClone(this._update,Z._update)}else if(Array.isArray(Z)){if(!Array.isArray(this._update))throw new Error("Cannot mix array and object updates");this._update=this._update.concat(Z)}else{if(Array.isArray(this._update))throw new Error("Cannot mix array and object updates");q0.mergeClone(this._update,Z)}};/*!
 * ignore
 */d.prototype.validate=async function Z(Y,X,J){if(typeof arguments[3]==="function")throw new k8("Query.prototype.validate() no longer accepts a callback");if(await lc(this,"validate"),J)await Y.$validate();else await new Promise(($,W)=>{fM1(this,this.model.schema,Y,X,(G)=>{if(G!=null)return W(G);$()})});await cc(this,null,null,"validate")};d.prototype._updateMany=async function Z(){return JM.call(this,"updateMany")};d.prototype._updateOne=async function Z(){return JM.call(this,"updateOne")};d.prototype._replaceOne=async function Z(){return JM.call(this,"replaceOne")};d.prototype.updateMany=function(Z,Y,X,J){if(typeof X==="function")J=X,X=null;else if(typeof Y==="function")J=Y,Y=Z,Z={},X=null;else if(typeof Z==="function")J=Z,Z=void 0,Y=void 0,X=void 0;else if(typeof Z==="object"&&!Y&&!X&&!J)Y=Z,Z=void 0,X=void 0,J=void 0;return $M(this,"updateMany",Z,Y,X,J)};d.prototype.updateOne=function(Z,Y,X,J){if(typeof X==="function")J=X,X=null;else if(typeof Y==="function")J=Y,Y=Z,Z={},X=null;else if(typeof Z==="function")J=Z,Z=void 0,Y=void 0,X=void 0;else if(typeof Z==="object"&&!Y&&!X&&!J)Y=Z,Z=void 0,X=void 0,J=void 0;return $M(this,"updateOne",Z,Y,X,J)};d.prototype.replaceOne=function(Z,Y,X,J){if(typeof X==="function")J=X,X=null;else if(typeof Y==="function")J=Y,Y=Z,Z={},X=null;else if(typeof Z==="function")J=Z,Z=void 0,Y=void 0,X=void 0;else if(typeof Z==="object"&&!Y&&!X&&!J)Y=Z,Z=void 0,X=void 0,J=void 0;return $M(this,"replaceOne",Z,Y,X,J)};d.prototype.transform=function(Z){return this._transforms.push(Z),this};d.prototype.orFail=function(Z){return this.transform((Y)=>{switch(this.op){case"find":if(Y.length===0)throw UX(Z,this);break;case"findOne":if(Y==null)throw UX(Z,this);break;case"replaceOne":case"updateMany":case"updateOne":if(Y&&Y.matchedCount===0)throw UX(Z,this);break;case"findOneAndDelete":case"findOneAndUpdate":case"findOneAndReplace":if(this.options.includeResultMetadata&&Y!=null&&Y.value==null)throw UX(Z,this);if(!this.options.includeResultMetadata&&Y==null)throw UX(Z,this);break;case"deleteMany":case"deleteOne":if(Y.deletedCount===0)throw UX(Z,this);break;default:break}return Y}),this};d.prototype.isPathSelectedInclusive=function(Z){return CM1(this._fields,Z)};d.prototype.exec=async function Z(Y){if(typeof Y==="function"||arguments.length>=2&&typeof arguments[1]==="function")throw new k8("Query.prototype.exec() no longer accepts a callback");if(typeof Y==="string")this.op=Y;if(this.op==null)throw new k8("Query must have `op` before executing");if(this.model==null)throw new k8("Query must have an associated model before executing");if(this._validateOp(),!this.op)return;if(this.options&&this.options.sort){if(Object.keys(this.options.sort).includes(""))throw new Error('Invalid field "" passed to sort()')}let X="_"+this.op;if(this.op==="distinct")X="__distinct";if(this._executionStack!=null){let G=this.toString();if(G.length>60)G=G.slice(0,60)+"...";const K=new k8("Query was already executed: "+G);throw K.originalStack=this._executionStack.stack,K}else this._executionStack=new Error;let J=null;try{await hM1(this)}catch(G){if(G instanceof ZM.skipWrappedFunction)J=G;else throw G}let $,W=null;try{await lc(this),$=J?J.args[0]:await this[X]();for(let G of this._transforms)$=G($)}catch(G){if(G instanceof ZM.skipWrappedFunction)$=G.args[0];else W=G}return $=await cc(this,$,W),await vM1(this),$};/*!
 * ignore
 *//*!
 * ignore
 *//*!
 * ignore
 *//*!
 * ignore
 *//*!
 * ignore
 */d.prototype.then=function(Z,Y){return this.exec().then(Z,Y)};d.prototype.catch=function(Z){return this.exec().then(null,Z)};d.prototype.finally=function(Z){return this.exec().finally(Z)};d.prototype[Symbol.toStringTag]=function Z(){return`Query { ${this.op} }`};d.prototype.pre=function(Z){return this._hooks.pre("exec",Z),this};d.prototype.post=function(Z){return this._hooks.post("exec",Z),this};d.prototype._castUpdate=function Z(Y){let X=this.schema;const J=X.options.discriminatorKey,$=X._baseSchema?X._baseSchema:X;if(this._mongooseOptions.overwriteDiscriminatorKey&&Y[J]!=null&&$.discriminators){const K=Object.values($.discriminators).find((Q)=>Q.discriminatorMapping.value===Y[J]);if(K!=null)X=K}let W;if("upsert"in this.options)W=this.options.upsert;const G=this._conditions;if(X!=null&&q0.hasUserDefinedProperty(G,X.options.discriminatorKey)&&typeof G[X.options.discriminatorKey]!=="object"&&X.discriminators!=null){const K=G[X.options.discriminatorKey],Q=bc(this.model.discriminators,K);X=X.discriminators[K]||Q&&Q.schema||X}return TM1(X,Y,{strict:this._mongooseOptions.strict,upsert:W,arrayFilters:this.options.arrayFilters,overwriteDiscriminatorKey:this._mongooseOptions.overwriteDiscriminatorKey},this,this._conditions)};d.prototype.populate=function(){if(!Array.from(arguments).some(Boolean))return this;const Z=q0.populate.apply(null,arguments);if(this.options!=null){const J=this.options.readConcern,$=this.options.readPreference;for(let W of Z){if(J!=null&&(W&&W.options&&W.options.readConcern)==null)W.options=W.options||{},W.options.readConcern=J;if($!=null&&(W&&W.options&&W.options.readPreference)==null)W.options=W.options||{},W.options.readPreference=$}}const Y=this._mongooseOptions;if(Y.lean!=null){const J=Y.lean;for(let $ of Z)if(($&&$.options&&$.options.lean)==null)$.options=$.options||{},$.options.lean=J}if(!q0.isObject(Y.populate))Y.populate={};const X=Y.populate;for(let J of Z){const $=J.path;if(X[$]&&X[$].populate&&J.populate)J.populate=X[$].populate.concat(J.populate);X[J.path]=J}return this};d.prototype.getPopulatedPaths=function Z(){const Y=this._mongooseOptions.populate||{},X=Object.keys(Y);for(let J of Object.keys(Y)){const $=Y[J];if(!Array.isArray($.populate))continue;pc(X,$.populate,J+".")}return X};/*!
 * ignore
 */d.prototype.cast=function(Z,Y){Y||(Y=this._conditions),Z=Z||this.model;const X=Z.schema.options.discriminatorKey;if(Y!=null&&Y.hasOwnProperty(X))Z=bc(Z.discriminators,Y[X])||Z;const J={upsert:this.options&&this.options.upsert};if(this.options){if("strict"in this.options)J.strict=this.options.strict;if("strictQuery"in this.options)J.strictQuery=this.options.strictQuery}try{return DM1(Z.schema,Y,J,this)}catch($){if(typeof $.setModel==="function")$.setModel(Z);throw $}};d.prototype._castFields=function Z(Y){let X,J,$,W,G,K;if(Y){$=Object.keys(Y),J=[],K=$.length;while(K--)if(W=$[K],Y[W].$elemMatch)X||(X={}),X[W]=Y[W],J.push(W)}if(X){try{G=this.cast(this.model,X)}catch(Q){return Q}K=J.length;while(K--)W=J[K],Y[W]=G[W]}return Y};d.prototype._applyPaths=function Z(){if(!this.model)return;this._fields=this._fields||{},OQ.applyPaths(this._fields,this.model.schema);let Y=!0;if("selectPopulatedPaths"in this.model.base.options)Y=this.model.base.options.selectPopulatedPaths;if("selectPopulatedPaths"in this.model.schema.options)Y=this.model.schema.options.selectPopulatedPaths;if(Y)xM1(this._fields,this._userProvidedFields,this._mongooseOptions.populate)};d.prototype.cursor=function Z(Y){if(Y)this.setOptions(Y);try{this.cast(this.model)}catch(X){return new _c(this)._markError(X)}return new _c(this)};d.prototype.tailable=function(Z,Y){if(Z!=null&&typeof Z.constructor==="function"&&Z.constructor.name==="Object")Y=Z,Z=!0;if(Z===void 0)Z=!0;if(Y&&typeof Y==="object")for(let X of Object.keys(Y))if(X==="awaitData"||X==="awaitdata")this.options.awaitData=!!Y[X];else this.options[X]=Y[X];return this.options.tailable=arguments.length?!!Z:!0,this};d.prototype.near=function(){const Z=[],Y=this._mongooseOptions.nearSphere;if(arguments.length===1)if(Array.isArray(arguments[0]))Z.push({center:arguments[0],spherical:Y});else if(typeof arguments[0]==="string")Z.push(arguments[0]);else if(q0.isObject(arguments[0])){if(typeof arguments[0].spherical!=="boolean")arguments[0].spherical=Y;Z.push(arguments[0])}else throw new TypeError("invalid argument");else if(arguments.length===2)if(typeof arguments[0]==="number"&&typeof arguments[1]==="number")Z.push({center:[arguments[0],arguments[1]],spherical:Y});else if(typeof arguments[0]==="string"&&Array.isArray(arguments[1]))Z.push(arguments[0]),Z.push({center:arguments[1],spherical:Y});else if(typeof arguments[0]==="string"&&q0.isObject(arguments[1])){if(Z.push(arguments[0]),typeof arguments[1].spherical!=="boolean")arguments[1].spherical=Y;Z.push(arguments[1])}else throw new TypeError("invalid argument");else if(arguments.length===3)if(typeof arguments[0]==="string"&&typeof arguments[1]==="number"&&typeof arguments[2]==="number")Z.push(arguments[0]),Z.push({center:[arguments[1],arguments[2]],spherical:Y});else throw new TypeError("invalid argument");else throw new TypeError("invalid argument");return d.base.near.apply(this,Z)};d.prototype.nearSphere=function(){return this._mongooseOptions.nearSphere=!0,this.near.apply(this,arguments),this};if(Symbol.asyncIterator!=null)d.prototype[Symbol.asyncIterator]=function(){return this.cursor().transformNull()._transformForAsyncIterator()};d.prototype.box=function(Z,Y){if(!Array.isArray(Z)&&q0.isObject(Z))Y=Z.ur,Z=Z.ll;return d.base.box.call(this,Z,Y)};d.prototype.center=d.base.circle;d.prototype.centerSphere=function(){if(arguments[0]!=null&&typeof arguments[0].constructor==="function"&&arguments[0].constructor.name==="Object")arguments[0].spherical=!0;if(arguments[1]!=null&&typeof arguments[1].constructor==="function"&&arguments[1].constructor.name==="Object")arguments[1].spherical=!0;d.base.circle.apply(this,arguments)};d.prototype.selectedInclusively=function Z(){return EM1(this._fields)};d.prototype.selectedExclusively=function Z(){return jM1(this._fields)};d.prototype.model;/*!
 * Export
 */ic.exports=d});var rc=w((dx1,sc)=>{var P6=function(Z){ac.call(this,{autoDestroy:!0,objectMode:!0}),this.cursor=null,this.agg=Z,this._transforms=[];const Y=Z._model;delete Z.options.cursor.useMongooseAggCursor,this._mongooseOptions={},cM1(Y,this,Z)},cM1=function(Z,Y,X){if(!Z.collection.buffer)Z.hooks.execPre("aggregate",X,function(){Y.cursor=Z.collection.aggregate(X._pipeline,X.options||{}),Y.emit("cursor",Y.cursor)});else Z.collection.emitter.once("queue",function(){Z.hooks.execPre("aggregate",X,function(){Y.cursor=Z.collection.aggregate(X._pipeline,X.options||{}),Y.emit("cursor",Y.cursor)})})},nc=function(Z){return Z==null?{done:!0}:{value:Z,done:!1}},lM1=function(Z,Y){if(Z.cursor)return Y();Z.once("cursor",function(){Y()})},_Q=function(Z,Y){let X=Y;if(Z._transforms.length)X=function(J,$){if(J||$===null&&!Z._mongooseOptions.transformNull)return Y(J,$);Y(J,Z._transforms.reduce(function(W,G){return G(W)},$))};if(Z._error)return uM1(function(){X(Z._error)});if(Z.cursor)return Z.cursor.next().then((J)=>{if(!J)return X(null,null);X(null,J)},(J)=>X(J));else Z.once("cursor",function(){_Q(Z,Y)})};/*!
 * Module dependencies.
 */var WM=W0(),ac=import.meta.require("stream").Readable,mM1=NR(),uM1=H6(),dM1=import.meta.require("util");dM1.inherits(P6,ac);/*!
 * ignore
 */P6.prototype._read=function(){const Z=this;_Q(this,function(Y,X){if(Y)return Z.emit("error",Y);if(!X){Z.push(null),Z.cursor.close(function(J){if(J)return Z.emit("error",J)});return}Z.push(X)})};if(Symbol.asyncIterator!=null){const Z="Mongoose does not support using async iterators with an existing aggregation cursor. See https://bit.ly/mongoose-async-iterate-aggregation";P6.prototype[Symbol.asyncIterator]=function(){throw new WM(Z)}}Object.defineProperty(P6.prototype,"map",{value:function(Z){return this._transforms.push(Z),this},enumerable:!0,configurable:!0,writable:!0});P6.prototype._markError=function(Z){return this._error=Z,this};P6.prototype.close=async function Z(){if(typeof arguments[0]==="function")throw new WM("AggregationCursor.prototype.close() no longer accepts a callback");try{await this.cursor.close()}catch(Y){throw this.listeners("error").length>0&&this.emit("error",Y),Y}this.emit("close")};P6.prototype.next=async function Z(){if(typeof arguments[0]==="function")throw new WM("AggregationCursor.prototype.next() no longer accepts a callback");return new Promise((Y,X)=>{_Q(this,(J,$)=>{if(J!=null)return X(J);Y($)})})};P6.prototype.eachAsync=function(Z,Y,X){const J=this;if(typeof Y==="function")X=Y,Y={};return Y=Y||{},mM1(function($){return _Q(J,$)},Z,Y,X)};if(Symbol.asyncIterator!=null)P6.prototype[Symbol.asyncIterator]=function(){return this.transformNull()._transformForAsyncIterator()};/*!
 * ignore
 */P6.prototype._transformForAsyncIterator=function(){if(this._transforms.indexOf(nc)===-1)this.map(nc);return this};/*!
 * ignore
 */P6.prototype.transformNull=function(Z){if(arguments.length===0)Z=!0;return this._mongooseOptions.transformNull=Z,this};/*!
 * ignore
 */P6.prototype.addCursorFlag=function(Z,Y){const X=this;return lM1(this,function(){X.cursor.addCursorFlag(Z,Y)}),this};/*!
 * ignore
 */sc.exports=P6});var GM=w((cx1,tc)=>{tc.exports=function Z(Y,X,J){const $=X&&X.discriminatorMapping;if(J=J||"",$&&!$.isRoot){const W=Y,G=(J.length>0?J+".":J)+$.key,K=$.value;if(W[0]!=null&&W[0].$match&&(W[0].$match[G]===void 0||W[0].$match[G]===K))W[0].$match[G]=K;else if(W[0]!=null&&W[0].$geoNear)W[0].$geoNear.query=W[0].$geoNear.query||{},W[0].$geoNear.query[G]=K;else if(W[0]!=null&&W[0].$search)if(W[1]&&W[1].$match!=null)W[1].$match[G]=W[1].$match[G]||K;else{const Q={};Q[G]=K,W.splice(1,0,{$match:Q})}else{const Q={};Q[G]=K,W.unshift({$match:Q})}}}});var ec=w((lx1,oc)=>{var pM1=function(Z){if(Z==null||Z.$accumulator==null)return;for(let Y of["init","accumulate","merge","finalize"])if(typeof Z.$accumulator[Y]==="function")Z.$accumulator[Y]=String(Z.$accumulator[Y])};oc.exports=function Z(Y){if(!Array.isArray(Y))return;for(let X of Y){if(X==null)continue;const J=X.$group||X.$bucket||X.$bucketAuto;if(J!=null)for(let W of Object.keys(J))pM1(J[W]);const $=Object.keys(X)[0];if($&&typeof X[$]==="object"){const W=X[$];for(let G of Object.keys(W))if(W[G]!=null&&W[G].$function!=null&&typeof W[G].$function.body==="function")W[G].$function.body=W[G].$function.body.toString()}if(X.$facet!=null)for(let W of Object.keys(X.$facet))Z(X.$facet[W])}}});var zM=w((px1,$l)=>{var P1=function(Z,Y){if(this._pipeline=[],this._model=Y,this.options={},arguments.length===1&&Array.isArray(Z))this.append.apply(this,Z)},eM1=function(Z){if(typeof Z!=="object"||Z===null)return!1;const Y=Object.keys(Z);return Y.length===1&&Y[0][0]==="$"};/*!
 * Module dependencies
 */var Xl=rc(),KM=W0(),Jl=kQ(),{applyGlobalMaxTimeMS:iM1,applyGlobalDiskUse:nM1}=TR(),aM1=w0(),sM1=r8(),QM=GM(),rM1=ec(),Zl=G1(),tM1=Jl.prototype.read,oM1=Jl.prototype.readConcern,Yl=new Set(["$$DESCEND","$$PRUNE","$$KEEP"]);P1.prototype.options;P1.prototype.model=function(Z){if(arguments.length===0)return this._model;if(this._model=Z,Z.schema!=null){if(this.options.readPreference==null&&Z.schema.options.read!=null)this.options.readPreference=Z.schema.options.read;if(this.options.collation==null&&Z.schema.options.collation!=null)this.options.collation=Z.schema.options.collation}return Z};P1.prototype.append=function(){const Z=arguments.length===1&&Array.isArray(arguments[0])?arguments[0]:[...arguments];if(!Z.every(eM1))throw new Error("Arguments must be aggregate pipeline operators");return this._pipeline=this._pipeline.concat(Z),this};P1.prototype.addFields=function(Z){if(typeof Z!=="object"||Z===null||Array.isArray(Z))throw new Error("Invalid addFields() argument. Must be an object");return this.append({$addFields:Object.assign({},Z)})};P1.prototype.project=function(Z){const Y={};if(typeof Z==="object"&&!Array.isArray(Z))Object.keys(Z).forEach(function(X){Y[X]=Z[X]});else if(arguments.length===1&&typeof Z==="string")Z.split(/\s+/).forEach(function(X){if(!X)return;const J=X[0]==="-"?0:1;if(J===0)X=X.substring(1);Y[X]=J});else throw new Error("Invalid project() argument. Must be string or object");return this.append({$project:Y})};P1.prototype.near=function(Z){const Y={};return Y.$geoNear=Z,this.append(Y)};/*!
 * define methods
 */"group match skip limit out densify fill".split(" ").forEach(function(Z){P1.prototype[Z]=function(Y){const X={};return X["$"+Z]=Y,this.append(X)}});P1.prototype.unwind=function(){const Z=[...arguments],Y=[];for(let X of Z)if(X&&typeof X==="object")Y.push({$unwind:X});else if(typeof X==="string")Y.push({$unwind:X[0]==="$"?X:"$"+X});else throw new Error('Invalid arg "'+X+'" to unwind(), must be string or object');return this.append.apply(this,Y)};P1.prototype.replaceRoot=function(Z){let Y;if(typeof Z==="string")Y=Z.startsWith("$")?Z:"$"+Z;else Y=Z;return this.append({$replaceRoot:{newRoot:Y}})};P1.prototype.count=function(Z){return this.append({$count:Z})};P1.prototype.sortByCount=function(Z){if(Z&&typeof Z==="object")return this.append({$sortByCount:Z});else if(typeof Z==="string")return this.append({$sortByCount:Z[0]==="$"?Z:"$"+Z});else throw new TypeError('Invalid arg "'+Z+'" to sortByCount(), must be string or object')};P1.prototype.lookup=function(Z){return this.append({$lookup:Z})};P1.prototype.graphLookup=function(Z){const Y={};if(Z){if(!Zl.isObject(Z))throw new TypeError("Invalid graphLookup() argument. Must be an object.");Zl.mergeClone(Y,Z);const X=Y.startWith;if(X&&typeof X==="string")Y.startWith=Y.startWith.startsWith("$")?Y.startWith:"$"+Y.startWith}return this.append({$graphLookup:Y})};P1.prototype.sample=function(Z){return this.append({$sample:{size:Z}})};P1.prototype.sort=function(Z){const Y={};if(sM1(Z)==="Object"){const X=["desc","descending",-1];Object.keys(Z).forEach(function(J){if(Z[J]instanceof Object&&Z[J].$meta){Y[J]=Z[J];return}Y[J]=X.indexOf(Z[J])===-1?1:-1})}else if(arguments.length===1&&typeof Z==="string")Z.split(/\s+/).forEach(function(X){if(!X)return;const J=X[0]==="-"?-1:1;if(J===-1)X=X.substring(1);Y[X]=J});else throw new TypeError("Invalid sort() argument. Must be a string or object.");return this.append({$sort:Y})};P1.prototype.unionWith=function(Z){return this.append({$unionWith:Z})};P1.prototype.read=function(Z,Y){return tM1.call(this,Z,Y),this};P1.prototype.readConcern=function(Z){return oM1.call(this,Z),this};P1.prototype.redact=function(Z,Y,X){if(arguments.length===3){if(typeof Y==="string"&&!Yl.has(Y)||typeof X==="string"&&!Yl.has(X))throw new Error("If thenExpr or elseExpr is string, it must be either $$DESCEND, $$PRUNE or $$KEEP");Z={$cond:{if:Z,then:Y,else:X}}}else if(arguments.length!==1)throw new TypeError("Invalid arguments");return this.append({$redact:Z})};P1.prototype.explain=async function Z(Y){if(typeof Y==="function"||typeof arguments[1]==="function")throw new KM("Aggregate.prototype.explain() no longer accepts a callback");const X=this._model;if(!this._pipeline.length)throw new Error("Aggregate has empty pipeline");QM(this._pipeline,this._model.schema),await new Promise((G,K)=>{X.hooks.execPre("aggregate",this,(Q)=>{if(Q){const z={error:Q};return X.hooks.execPost("aggregate",this,[null],z,(H)=>{K(H)})}else G()})});const J=X.collection.aggregate(this._pipeline,this.options);if(Y==null)Y=!0;let $=null;try{$=await J.explain(Y)}catch(G){await new Promise((K,Q)=>{const z={error:G};X.hooks.execPost("aggregate",this,[null],z,(H)=>{if(H)return Q(H);return K()})})}const W={error:null};return await new Promise((G,K)=>{X.hooks.execPost("aggregate",this,[$],W,(Q)=>{if(Q)return K(Q);return G()})}),$};P1.prototype.allowDiskUse=function(Z){return this.options.allowDiskUse=Z,this};P1.prototype.hint=function(Z){return this.options.hint=Z,this};P1.prototype.session=function(Z){if(Z==null)delete this.options.session;else this.options.session=Z;return this};P1.prototype.option=function(Z){for(let Y in Z)this.options[Y]=Z[Y];return this};P1.prototype.cursor=function(Z){return this.options.cursor=Z||{},new Xl(this)};P1.prototype.collation=function(Z){return this.options.collation=Z,this};P1.prototype.facet=function(Z){return this.append({$facet:Z})};P1.prototype.search=function(Z){return this.append({$search:Z})};P1.prototype.pipeline=function(){return this._pipeline};P1.prototype.exec=async function Z(){if(!this._model)throw new Error("Aggregate not bound to any Model");if(typeof arguments[0]==="function")throw new KM("Aggregate.prototype.exec() no longer accepts a callback");const Y=this._model,X=this._model.collection;if(iM1(this.options,Y),nM1(this.options,Y),this.options&&this.options.cursor)return new Xl(this);if(QM(this._pipeline,this._model.schema),rM1(this._pipeline),await new Promise((G,K)=>{Y.hooks.execPre("aggregate",this,(Q)=>{if(Q){const z={error:Q};return Y.hooks.execPost("aggregate",this,[null],z,(H)=>{K(H)})}else G()})}),!this._pipeline.length)throw new KM("Aggregate has empty pipeline");const J=aM1(this.options||{});let $;try{$=await(await X.aggregate(this._pipeline,J)).toArray()}catch(G){await new Promise((K,Q)=>{const z={error:G};Y.hooks.execPost("aggregate",this,[null],z,(H)=>{if(H)return Q(H);K()})})}const W={error:null};return await new Promise((G,K)=>{Y.hooks.execPost("aggregate",this,[$],W,(Q)=>{if(Q)return K(Q);return G()})}),$};P1.prototype.then=function(Z,Y){return this.exec().then(Z,Y)};P1.prototype.catch=function(Z){return this.exec().then(null,Z)};P1.prototype.finally=function(Z){return this.exec().finally(Z)};if(Symbol.asyncIterator!=null)P1.prototype[Symbol.asyncIterator]=function(){return this.cursor({useMongooseAggCursor:!0}).transformNull()._transformForAsyncIterator()};/*!
 * Helpers
 */P1._prepareDiscriminatorPipeline=QM;/*!
 * Exports
 */$l.exports=P1});var Kl=w((ix1,Gl)=>{var ZB1=w0();class Wl{constructor(Z){if(Z==null)return;Object.assign(this,ZB1(Z))}}Gl.exports=Wl});var zl=w((nx1,Ql)=>{Ql.exports=function Z(Y,X){const J=Object.keys(X.paths),$=J.length;for(let W=0;W<$;++W){let G="";const K=J[W],Q=X.paths[K],z=Q.splitPath(),H=z.length;let F=Y;for(let U=0;U<H;++U){if(F==null)break;const V=z[U];if(G+=(!G.length?"":".")+V,U===H-1){if(typeof F[V]!=="undefined"){if(Q.$isSingleNested)Z(F[V],Q.caster.schema);else if(Q.$isMongooseDocumentArray&&Array.isArray(F[V]))F[V].forEach((L)=>Z(L,Q.schema));break}const q=Q.getDefault(Y,!1,{skipCast:!0});if(typeof q!=="undefined"){if(F[V]=q,Q.$isSingleNested)Z(q,Q.caster.schema);else if(Q.$isMongooseDocumentArray&&Array.isArray(q))q.forEach((L)=>Z(L,Q.schema))}}else{if(F[V]==null)F[V]={};F=F[V]}}}}});var Fl=w((ax1,Hl)=>{var YB1=z0(),XB1=G1();Hl.exports=function Z(Y,X){const J=HM();function $(W,G){Object.defineProperty(Y.prototype,W,{get:function(){const K={};for(let Q in G.methods[W])K[Q]=G.methods[W][Q].bind(this);return K},configurable:!0})}for(let W of Object.keys(X.methods)){const G=X.methods[W];if(X.tree.hasOwnProperty(W))throw new Error('You have a method and a property in your schema both named "'+W+'"');if(typeof G==="function"&&J.prototype[W]===G){delete X.methods[W];continue}if(X.reserved[W]&&!YB1(X,`methodOptions.${W}.suppressWarning`,!1))XB1.warn(`mongoose: the method name "${W}" is used by mongoose `+"internally, overwriting it may cause bugs. If you\'re sure you know what you\'re doing, you can suppress this error by using "+`\`schema.method('${W}', fn, { suppressWarning: true })\`.`);if(typeof G==="function")Y.prototype[W]=G;else $(W,X)}Y.$appliedMethods=!0;for(let W of Object.keys(X.paths)){const G=X.paths[W];if(G.$isSingleNested&&!G.caster.$appliedMethods)Z(G.caster,G.schema);if(G.$isMongooseDocumentArray&&!G.Constructor.$appliedMethods)Z(G.Constructor,G.schema)}}});var ql=w((sx1,Vl)=>{var FM=function(Z,Y,X,J,$){if(Z==null||typeof Z!=="object")return Z;const W={...Z};J=$?J||{}:Y;for(let G of Object.keys(W)){const K=$?$+"."+G:G;if(Y.hasOwnProperty(K)||J.hasOwnProperty(G))if(xQ(Y[K])||xQ(J[G]))W[G]=FM(W[G],Y,X,J[G],K);else delete W[G];else if(X[K])W[G]=FM(W[G],Y,X,J[G],K)}return W},UM=function(Z,Y,X,J,$){if(Z==null||typeof Z!=="object")return Z;const W={...Z};J=$?J||{}:Y;for(let G of Object.keys(W)){const K=$?$+"."+G:G;if(Y.hasOwnProperty(K)||J.hasOwnProperty(G)){if(xQ(Y[K])||xQ(J[G]))W[G]=UM(W[G],Y,X,J[G],K);continue}else if(X[K])W[G]=UM(W[G],Y,X,J[G],K);else delete W[G]}return W},Ul=RL(),JB1=cY(),$B1=BQ(),xQ=G1().isPOJO;Vl.exports=function Z(Y,X,J){if(X==null)return Y;if(Y==null)return Y;let $=null;if($B1(X))$=!1;else if(JB1(X))$=!0;if($==null)return Y;else if($)return J=J||Ul(X),FM(Y,X,J);else return J=J||Ul(X),UM(Y,X,J)}});var wl=w((rx1,Ll)=>{Ll.exports=function Z(Y){let X=!1;for(let J of Object.keys(Y))if(Y[J]==="text")X=!0;return X}});var Ml=w((tx1,Rl)=>{var WB1=wl();Rl.exports=function Z(Y,X,J){if(WB1(Y))return;if(J.hasOwnProperty("collation")&&!X.hasOwnProperty("collation"))X.collation=J.collation}});var Nl=w((ox1,Bl)=>{var GB1=vK().middlewareFunctions,KB1=FK();Bl.exports=function Z(Y,X,J){const $={useErrorHandlers:!0,numCallbackParams:1};X=X.filter((W)=>{if(GB1.indexOf(W.name)!==-1)return!!W.model;return W.model!==!1}),Y.$__insertMany=X.createWrapper("insertMany",Y.$__insertMany,Y,$);for(let W of Object.keys(J))if(X.hasHooks(W)){const G=Y[W];Y[W]=function(){const K=arguments.length,Q=K>0?arguments[K-1]:null,z=typeof Q==="function"?Q:null,H=Array.prototype.slice.call(arguments,0,z==null?K:K-1);return KB1(z,(F)=>{X.execPre(W,Y,H,function(U){if(U!=null)return F(U);let V=0;const q=G.apply(Y,H.concat(L));if(q!=null&&typeof q.then==="function")q.then((R)=>L(null,R),(R)=>L(R));function L(R,B){if(V++>0)return;if(R!=null)return F(R);X.execPost(W,Y,[B],function(N){if(N!=null)return F(N);F(null,B)})}})},Y.events)}}}});var Dl=w((ex1,Al)=>{Al.exports=function Z(Y,X){for(let J in X.statics)Y[J]=X.statics[J]}});var fQ=w((Zf1,Pl)=>{Pl.exports=function Z(Y){if(!(this instanceof Z))return new Z(Y);return this.val=Y,this}});var J$=w((Yf1,Tl)=>{/*!
 * ignore
 */Tl.exports=new WeakMap});var Cl=w((Xf1,El)=>{var jl=function(Z,Y,X,J,$){const W=[],G=J.isVirtual&&J.justOne&&Z.length>1?!1:J.sort&&Z.length>1,K=J.$nullIfNotFound;let Q,z,H;if(HB1.isMongooseArray(Z))Z=Z.__array;let F=0;const U=Z.length;if(G&&$&&J[yQ]===void 0){J[yQ]=!1;for(let V in X)if(Array.isArray(X[V])){J[yQ]=!0;break}}for(F=0;F<U;++F){if(H=Z[F],Array.isArray(H)){jl(H,Y,X,J,!0),W.push(H);continue}if(H===null&&G===!1){W.push(H);continue}if(z=String(H),Q=Y[z],J.clone&&Q!=null)if(J.lean){const V=Il.get(Q);Q=QB1(Q),Il.set(Q,V)}else Q=Q.constructor.hydrate(Q._doc);if($)if(Q)if(G){const V=X[z];if(J[yQ])W.push(Q);else W[V]=Q}else W.push(Q);else if(H!=null&&H[zB1]!=null)W.push(H);else W.push(J.retainNullValues||K?null:H);else W[F]=Q||null}if(Z.length=0,W.length)W.forEach(function(V,q){Z[q]=V})},QB1=w0(),Il=J$(),zB1=Z1().modelSymbol,HB1=G1();El.exports=jl;var yQ=Symbol("mongoose#assignRawDocsToIdStructure#hasArray")});var qM=w((Jf1,Ol)=>{var VM=function(Z,Y){if(Z.virtuals[Y])return{virtual:Z.virtuals[Y],path:void 0};const X=Y.split(".");let J="",$="";for(let W=0;W<X.length;++W){if(J+=(J.length>0?".":"")+X[W],Z.virtuals[J]){if(W===X.length-1)return{virtual:Z.virtuals[J],path:$};continue}if(Z.nested[J])continue;if(Z.paths[J]&&Z.paths[J].schema){Z=Z.paths[J].schema;const G=X.slice(W+1).join(".");if(Z.virtuals[G]){if(W===X.length-2)return{virtual:Z.virtuals[G],nestedSchemaPath:[$,J].filter((K)=>!!K).join(".")};continue}if(W+1<X.length&&Z.discriminators)for(let K of Object.keys(Z.discriminators)){const Q=VM(Z.discriminators[K],G);if(Q!=null){const z=[$,J,Q.nestedSchemaPath].filter((H)=>!!H).join(".");return{virtual:Q.virtual,nestedSchemaPath:z}}}$+=($.length>0?".":"")+J,J="";continue}if(Z.discriminators)for(let G of Object.keys(Z.discriminators)){const K=VM(Z.discriminators[G],Y);if(K)return K}return null}};Ol.exports=VM;/*!
 * ignore
 */});var gQ=w(($f1,Sl)=>{Sl.exports=function Z(Y,X,J){if(Y==null)return Y;if(Y._doc!=null)Y=Y._doc;if(arguments.length>=3){if(typeof Y!=="object")return;if(J===void 0)return;if(Y instanceof Map)Y.set(X,J);else Y[X]=J;return J}if(X==="$*")return Y instanceof Map?Array.from(Y.values()):Object.keys(Y).map(($)=>Y[$]);if(Y instanceof Map)return Y.get(X);return Y[X]}});var _l=w((bQ,kl)=>{(function(Z,Y){typeof bQ==="object"&&typeof kl!=="undefined"?Y(bQ):typeof define==="function"&&define.amd?define(["exports"],Y):(Z=Z||self,Y(Z.sift={}))})(bQ,function(Z){/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var Y=function(A,P){return Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,k){I.__proto__=k}||function(I,k){for(var s in k)if(Object.prototype.hasOwnProperty.call(k,s))I[s]=k[s]},Y(A,P)};function X(A,P){if(typeof P!=="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");Y(A,P);function I(){this.constructor=A}A.prototype=P===null?Object.create(P):(I.prototype=P.prototype,new I)}var J=function(A){var P="[object "+A+"]";return function(I){return $(I)===P}},$=function(A){return Object.prototype.toString.call(A)},W=function(A){if(A instanceof Date)return A.getTime();else if(G(A))return A.map(W);else if(A&&typeof A.toJSON==="function")return A.toJSON();return A},G=J("Array"),K=J("Object"),Q=J("Function"),z=function(A){return A&&(A.constructor===Object||A.constructor===Array||A.constructor.toString()==="function Object() { [native code] }"||A.constructor.toString()==="function Array() { [native code] }")&&!A.toJSON},H=function(A,P){if(A==null&&A==P)return!0;if(A===P)return!0;if(Object.prototype.toString.call(A)!==Object.prototype.toString.call(P))return!1;if(G(A)){if(A.length!==P.length)return!1;for(var I=0,k=A.length;I<k;I++)if(!H(A[I],P[I]))return!1;return!0}else if(K(A)){if(Object.keys(A).length!==Object.keys(P).length)return!1;for(var s in A)if(!H(A[s],P[s]))return!1;return!0}return!1},F=function(A,P,I,k,s,X1){var F1=P[k];if(G(A)&&isNaN(Number(F1))){for(var N1=0,h8=A.length;N1<h8;N1++)if(!F(A[N1],P,I,k,N1,A))return!1}if(k===P.length||A==null)return I(A,s,X1,k===0);return F(A[F1],P,I,k+1,F1,A)},U=function(){function A(P,I,k,s){this.params=P,this.owneryQuery=I,this.options=k,this.name=s,this.init()}return A.prototype.init=function(){},A.prototype.reset=function(){this.done=!1,this.keep=!1},A}(),V=function(A){X(P,A);function P(I,k,s,X1){var F1=A.call(this,I,k,s)||this;return F1.children=X1,F1}return P.prototype.reset=function(){this.keep=!1,this.done=!1;for(var I=0,k=this.children.length;I<k;I++)this.children[I].reset()},P.prototype.childrenNext=function(I,k,s,X1){var F1=!0,N1=!0;for(var h8=0,$7=this.children.length;h8<$7;h8++){var m8=this.children[h8];if(!m8.done)m8.next(I,k,s,X1);if(!m8.keep)N1=!1;if(m8.done){if(!m8.keep)break}else F1=!1}this.done=F1,this.keep=N1},P}(U),q=function(A){X(P,A);function P(I,k,s,X1,F1){var N1=A.call(this,I,k,s,X1)||this;return N1.name=F1,N1}return P}(V),L=function(A){X(P,A);function P(){var I=A!==null&&A.apply(this,arguments)||this;return I.propop=!0,I}return P.prototype.next=function(I,k,s,X1){this.childrenNext(I,k,s,X1)},P}(V),R=function(A){X(P,A);function P(I,k,s,X1,F1){var N1=A.call(this,k,s,X1,F1)||this;return N1.keyPath=I,N1.propop=!0,N1._nextNestedValue=function(h8,$7,m8,Ls){return N1.childrenNext(h8,$7,m8,Ls),!N1.done},N1}return P.prototype.next=function(I,k,s){F(I,this.keyPath,this._nextNestedValue,0,k,s)},P}(V),B=function(A,P){if(A instanceof Function)return A;if(A instanceof RegExp)return function(k){var s=typeof k==="string"&&A.test(k);return A.lastIndex=0,s};var I=W(A);return function(k){return P(I,W(k))}},N=function(A){X(P,A);function P(){var I=A!==null&&A.apply(this,arguments)||this;return I.propop=!0,I}return P.prototype.init=function(){this._test=B(this.params,this.options.compare)},P.prototype.next=function(I,k,s){if(!Array.isArray(s)||s.hasOwnProperty(k)){if(this._test(I,k,s))this.done=!0,this.keep=!0}},P}(U),M=function(A,P,I){return new N(A,P,I)},D=function(A){X(P,A);function P(){var I=A!==null&&A.apply(this,arguments)||this;return I.propop=!0,I}return P.prototype.next=function(){this.done=!0,this.keep=!1},P}(U),m=function(A){return function(P,I,k,s){if(P==null)return new D(P,I,k,s);return A(P,I,k,s)}},O=function(A){return m(function(P,I,k,s){var X1=typeof W(P),F1=A(P);return new N(function(N1){return typeof W(N1)===X1&&F1(N1)},I,k,s)})},E=function(A,P,I,k){var s=k.operations[A];if(!s)j(A);return s(P,I,k,A)},j=function(A){throw new Error("Unsupported operation: "+A)},n=function(A,P){for(var I in A)if(P.operations.hasOwnProperty(I)||I.charAt(0)==="$")return!0;return!1},c=function(A,P,I,k,s){if(n(P,s)){var X1=C(P,I,s),F1=X1[0],N1=X1[1];if(N1.length)throw new Error("Property queries must contain only operations, or exact objects.");return new R(A,P,k,s,F1)}return new R(A,P,k,s,[new N(P,k,s)])},y=function(A,P,I){if(P===void 0)P=null;var k=I===void 0?{}:I,s=k.compare,X1=k.operations,F1={compare:s||H,operations:Object.assign({},X1||{})},N1=C(A,null,F1),h8=N1[0],$7=N1[1],m8=[];if(h8.length)m8.push(new R([],A,P,F1,h8));if(m8.push.apply(m8,$7),m8.length===1)return m8[0];return new L(A,P,F1,m8)},C=function(A,P,I){var k=[],s=[];if(!z(A))return k.push(new N(A,A,I)),[k,s];for(var X1 in A)if(I.operations.hasOwnProperty(X1)){var F1=E(X1,A[X1],A,I);if(F1){if(!F1.propop&&P&&!I.operations[P])throw new Error("Malformed query. "+X1+" cannot be matched against property.")}if(F1!=null)k.push(F1)}else if(X1.charAt(0)==="$")j(X1);else s.push(c(X1.split("."),A[X1],X1,A,I));return[k,s]},S=function(A){return function(P,I,k){return A.reset(),A.next(P,I,k),A.keep}},a=function(A,P){if(P===void 0)P={};return S(y(A,null,P))},E1=function(A){X(P,A);function P(){var I=A!==null&&A.apply(this,arguments)||this;return I.propop=!0,I}return P.prototype.init=function(){this._test=B(this.params,this.options.compare)},P.prototype.reset=function(){A.prototype.reset.call(this),this.keep=!0},P.prototype.next=function(I){if(this._test(I))this.done=!0,this.keep=!1},P}(U),u0=function(A){X(P,A);function P(){var I=A!==null&&A.apply(this,arguments)||this;return I.propop=!0,I}return P.prototype.init=function(){if(!this.params||typeof this.params!=="object")throw new Error("Malformed query. $elemMatch must by an object.");this._queryOperation=y(this.params,this.owneryQuery,this.options)},P.prototype.reset=function(){A.prototype.reset.call(this),this._queryOperation.reset()},P.prototype.next=function(I){if(G(I)){for(var k=0,s=I.length;k<s;k++){this._queryOperation.reset();var X1=I[k];this._queryOperation.next(X1,k,I,!1),this.keep=this.keep||this._queryOperation.keep}this.done=!0}else this.done=!1,this.keep=!1},P}(U),e1=function(A){X(P,A);function P(){var I=A!==null&&A.apply(this,arguments)||this;return I.propop=!0,I}return P.prototype.init=function(){this._queryOperation=y(this.params,this.owneryQuery,this.options)},P.prototype.reset=function(){A.prototype.reset.call(this),this._queryOperation.reset()},P.prototype.next=function(I,k,s,X1){this._queryOperation.next(I,k,s,X1),this.done=this._queryOperation.done,this.keep=!this._queryOperation.keep},P}(U),k0=function(A){X(P,A);function P(){var I=A!==null&&A.apply(this,arguments)||this;return I.propop=!0,I}return P.prototype.init=function(){},P.prototype.next=function(I){if(G(I)&&I.length===this.params)this.done=!0,this.keep=!0},P}(U),v8=function(A){if(A.length===0)throw new Error("$and/$or/$nor must be a nonempty array")},H8=function(A){X(P,A);function P(){var I=A!==null&&A.apply(this,arguments)||this;return I.propop=!1,I}return P.prototype.init=function(){var I=this;v8(this.params),this._ops=this.params.map(function(k){return y(k,null,I.options)})},P.prototype.reset=function(){this.done=!1,this.keep=!1;for(var I=0,k=this._ops.length;I<k;I++)this._ops[I].reset()},P.prototype.next=function(I,k,s){var X1=!1,F1=!1;for(var N1=0,h8=this._ops.length;N1<h8;N1++){var $7=this._ops[N1];if($7.next(I,k,s),$7.keep){X1=!0,F1=$7.keep;break}}this.keep=F1,this.done=X1},P}(U),i4=function(A){X(P,A);function P(){var I=A!==null&&A.apply(this,arguments)||this;return I.propop=!1,I}return P.prototype.next=function(I,k,s){A.prototype.next.call(this,I,k,s),this.keep=!this.keep},P}(H8),AN=function(A){X(P,A);function P(){var I=A!==null&&A.apply(this,arguments)||this;return I.propop=!0,I}return P.prototype.init=function(){var I=this;this._testers=this.params.map(function(k){if(n(k,I.options))throw new Error("cannot nest $ under "+I.name.toLowerCase());return B(k,I.options.compare)})},P.prototype.next=function(I,k,s){var X1=!1,F1=!1;for(var N1=0,h8=this._testers.length;N1<h8;N1++){var $7=this._testers[N1];if($7(I)){X1=!0,F1=!0;break}}this.keep=F1,this.done=X1},P}(U),zs=function(A){X(P,A);function P(I,k,s,X1){var F1=A.call(this,I,k,s,X1)||this;return F1.propop=!0,F1._in=new AN(I,k,s,X1),F1}return P.prototype.next=function(I,k,s,X1){if(this._in.next(I,k,s),G(s)&&!X1){if(this._in.keep)this.keep=!1,this.done=!0;else if(k==s.length-1)this.keep=!0,this.done=!0}else this.keep=!this._in.keep,this.done=!0},P.prototype.reset=function(){A.prototype.reset.call(this),this._in.reset()},P}(U),Hs=function(A){X(P,A);function P(){var I=A!==null&&A.apply(this,arguments)||this;return I.propop=!0,I}return P.prototype.next=function(I,k,s){if(s.hasOwnProperty(k)===this.params)this.done=!0,this.keep=!0},P}(U),Fs=function(A){X(P,A);function P(I,k,s,X1){var F1=A.call(this,I,k,s,I.map(function(N1){return y(N1,k,s)}),X1)||this;return F1.propop=!1,v8(I),F1}return P.prototype.next=function(I,k,s,X1){this.childrenNext(I,k,s,X1)},P}(q),Us=function(A){X(P,A);function P(I,k,s,X1){var F1=A.call(this,I,k,s,I.map(function(N1){return y(N1,k,s)}),X1)||this;return F1.propop=!0,F1}return P.prototype.next=function(I,k,s,X1){this.childrenNext(I,k,s,X1)},P}(q),DN=function(A,P,I){return new N(A,P,I)},PN=function(A,P,I,k){return new E1(A,P,I,k)},TN=function(A,P,I,k){return new H8(A,P,I,k)},IN=function(A,P,I,k){return new i4(A,P,I,k)},jN=function(A,P,I,k){return new u0(A,P,I,k)},EN=function(A,P,I,k){return new zs(A,P,I,k)},CN=function(A,P,I,k){return new AN(A,P,I,k)},ON=O(function(A){return function(P){return P<A}}),SN=O(function(A){return function(P){return P<=A}}),kN=O(function(A){return function(P){return P>A}}),_N=O(function(A){return function(P){return P>=A}}),xN=function(A,P,I){var k=A[0],s=A[1];return new N(function(X1){return W(X1)%k===s},P,I)},fN=function(A,P,I,k){return new Hs(A,P,I,k)},yN=function(A,P,I){return new N(new RegExp(A,P.$options),P,I)},gN=function(A,P,I,k){return new e1(A,P,I,k)},bN={number:function(A){return typeof A==="number"},string:function(A){return typeof A==="string"},bool:function(A){return typeof A==="boolean"},array:function(A){return Array.isArray(A)},null:function(A){return A===null},timestamp:function(A){return A instanceof Date}},vN=function(A,P,I){return new N(function(k){if(typeof A==="string"){if(!bN[A])throw new Error("Type alias does not exist");return bN[A](k)}return k!=null?k instanceof A||k.constructor===A:!1},P,I)},hN=function(A,P,I,k){return new Fs(A,P,I,k)},mN=function(A,P,I,k){return new Us(A,P,I,k)},uN=function(A,P,I){return new k0(A,P,I,"$size")},dN=function(){return null},cN=function(A,P,I){var k;if(Q(A))k=A;else if(!process.env.CSP_ENABLED)k=new Function("obj","return "+A);else throw new Error("In CSP mode, sift does not support strings in \"$where\" condition");return new N(function(s){return k.bind(s)(s)},P,I)},Vs=Object.freeze({__proto__:null,$Size:k0,$eq:DN,$ne:PN,$or:TN,$nor:IN,$elemMatch:jN,$nin:EN,$in:CN,$lt:ON,$lte:SN,$gt:kN,$gte:_N,$mod:xN,$exists:fN,$regex:yN,$not:gN,$type:vN,$and:hN,$all:mN,$size:uN,$options:dN,$where:cN}),lN=function(A,P,I){var k=I===void 0?{}:I,s=k.compare,X1=k.operations;return y(A,P,{compare:s,operations:Object.assign({},Vs,X1||{})})},qs=function(A,P){if(P===void 0)P={};var I=lN(A,null,P);return S(I)};Z.$Size=k0,Z.$all=mN,Z.$and=hN,Z.$elemMatch=jN,Z.$eq=DN,Z.$exists=fN,Z.$gt=kN,Z.$gte=_N,Z.$in=CN,Z.$lt=ON,Z.$lte=SN,Z.$mod=xN,Z.$ne=PN,Z.$nin=EN,Z.$nor=IN,Z.$not=gN,Z.$options=dN,Z.$or=TN,Z.$regex=yN,Z.$size=uN,Z.$type=vN,Z.$where=cN,Z.EqualsOperation=N,Z.createDefaultQueryOperation=lN,Z.createEqualsOperation=M,Z.createOperationTester=S,Z.createQueryOperation=y,Z.createQueryTester=a,Z.default=qs,Object.defineProperty(Z,"__esModule",{value:!0})})});var fl=w((Wf1,LM)=>{var xl=_l();LM.exports=xl.default;Object.assign(LM.exports,xl)});var ml=w((Gf1,hl)=>{var RB1=function(Z){if(Array.isArray(Z)){if(Z.some((Y)=>Array.isArray(Y)||Y===null))return Z.map((Y)=>{if(Y==null)return 0;if(Array.isArray(Y))return Y.filter((X)=>X!=null).length;return 1});return Z.filter((Y)=>Y!=null).length}return Z==null?0:1},hQ=function(Z,Y,X,J){const $=typeof X.transform==="function",W=$?X.transform:MB1;if(Array.isArray(Z)){const G=[],K=Z.length;for(let H=0;H<K;++H){let F=Z[H];const U=Array.isArray(J)?J[H]:J;if(!RM(F)&&(!X.retainNullValues||F!=null)&&!$)continue;else if(!X.retainNullValues&&F==null)continue;else if($)F=W(RM(F)?F:null,U);if(bl(F,Y),G.push(F),Y.originalLimit&&G.length>=Y.originalLimit)break}const Q=G.length;while(Z.length>Q)Array.prototype.pop.apply(Z,[]);let z=0;if(mQ.isMongooseArray(Z))for(z=0;z<Q;++z)Z.set(z,G[z],!0);else for(z=0;z<Q;++z)Z[z]=G[z];return Z}if(RM(Z)||mQ.isPOJO(Z))return bl(Z,Y),W(Z,J);if(Z instanceof Map)return Z;if(X.justOne===!1)return[];return Z==null?W(Z,J):W(null,J)},bl=function(Z,Y){if(Z!=null&&Y.excludeId)if(typeof Z.$__setValue==="function")delete Z._doc._id;else delete Z._id},RM=function(Z){if(Z==null)return!1;return Array.isArray(Z)||Z.$isMongooseMap||Z.$__!=null||vl.has(Z)},MB1=function(Z){return Z},FB1=mK(),UB1=fQ(),VB1=Cl(),vQ=z0(),qB1=qM(),vl=J$(),yl=gQ(),LB1=DL(),wM=P7(),gl=fl().default,mQ=G1(),{populateModelSymbol:wB1}=Z1();hl.exports=function Z(Y){const X=Object.assign({},vQ(Y,"allOptions.options.options"),vQ(Y,"allOptions.options")),J=Object.assign({},Y.options,X,{justOne:Y.justOne,isVirtual:Y.isVirtual});J.$nullIfNotFound=Y.isVirtual;const $=Y.populatedModel,W=[].concat(Y.rawIds);Y.allIds=[].concat(Y.allIds),VB1(Y.rawIds,Y.rawDocs,Y.rawOrder,J);const{docs:G,rawIds:K,options:Q}=Y,z=Y.count&&Y.isVirtual;let H;function F(U){if(z)return U;if(U instanceof UB1)return U.val;if(U===void 0)return U;const V=Y.allIds[H];if(Y.path.endsWith(".$*"))return hQ(U,Q,J,V);if(Y.justOne===!0&&Array.isArray(U)){const q=[];for(let L of U){const R=vl.get(L);if(R==null||R===$)q.push(L)}while(U.length>q.length)Array.prototype.pop.apply(U,[]);for(let L=0;L<q.length;++L)U[L]=q[L];return hQ(U[0],Q,J,V)}else if(Y.justOne===!1&&!Array.isArray(U))return hQ([U],Q,J,V);return hQ(U,Q,J,V)}for(H=0;H<G.length;++H){const U=Y.path.endsWith(".$*")?Y.path.slice(0,-3):Y.path,V=wM.get(U,G[H],yl);if(V==null&&!qB1(Y.originalModel.schema,U))continue;let q;if(z)q=RB1(K[H]);else if(Array.isArray(Y.match))q=Array.isArray(K[H])?K[H].filter(gl(Y.match[H])):[K[H]].filter(gl(Y.match[H]))[0];else q=K[H];const L=Y.originalModel.schema,R=vQ(G[H],"$__",null)!=null;let B=R?V instanceof Map:mQ.isPOJO(V);if(B=B&&vQ(L._getSchema(U),"$isSchemaMap"),!Y.isVirtual&&B){const D=V instanceof Map?Array.from(V.keys()):Object.keys(V);q=q.reduce((m,O,E)=>{return m.set(D[E],O),m},new Map)}if(R&&Array.isArray(q)){for(let D of q)if(D!=null&&D.$__!=null)D.$__.parent=G[H]}else if(R&&q!=null&&q.$__!=null)q.$__.parent=G[H];if(Y.isVirtual&&R){if(G[H].$populated(U,Y.justOne?W[0]:W,Y.allOptions),Array.isArray(q))q=q.map((D)=>D==null?void 0:D);wM.set(U,q,G[H],void 0,F,!1);continue}const N=U.split(".");let M=G[H];for(let D=0;D<N.length-1;++D){if(Array.isArray(M)&&!mQ.isArrayIndex(N[D]))break;if(N[D]==="$*")break;if(M[N[D]]==null){const m=N.slice(0,D+1).join("."),O=L._getSchema(m);if(q==null&&O!=null&&O.$isMongooseArray)break;M[N[D]]={}}if(M=M[N[D]],typeof M!=="object")break}if(G[H].$__){if(Y.allOptions.options[wB1]=Y.allOptions.model,G[H].$populated(U,Y.unpopulatedValues[H],Y.allOptions.options),q!=null&&q.$__!=null)q.$__.wasPopulated={value:Y.unpopulatedValues[H]};if(q instanceof Map&&!q.$isMongooseMap)q=new FB1(q,U,G[H],G[H].schema.path(U).$__schemaType)}if(wM.set(U,q,G[H],yl,F,!1),G[H].$__)LB1(G[H],[Y.allOptions.options])}}});var MM=w((Kf1,ul)=>{var BB1=jR();ul.exports=function Z(Y,X,J){if(!J||!(X&&X.upsert))return;if(!BB1(Y)[J])if(X.overwrite)Y[J]=0;else{if(!Y.$setOnInsert)Y.$setOnInsert={};Y.$setOnInsert[J]=0}}});var al=w((Qf1,nl)=>{var W$=function(Z,Y){if(Z==null)return;if(Z.discriminatorMapping&&!Z.discriminatorMapping.isRoot)Y[Z.discriminatorMapping.key]=Z.discriminatorMapping.value},VX=function(Z,Y){const X=Z.schema.options.discriminatorKey;if(Y!=null&&Y.hasOwnProperty(X))Z=AB1(Z.discriminators,Y[X])||Z;return Z},NB1=W0(),AB1=j7(),dl=Qw(),cl=zw(),$$=oY(),ll=yR(),pl=MM(),{inspect:DB1}=import.meta.require("util"),il=tR();nl.exports=function Z(Y,X,J){const $=Y.base.now(),W=Y.base.options.setDefaultsOnInsert;if(X.insertOne)return(G)=>{const K=VX(Y,X.insertOne.document),Q=new K(X.insertOne.document);if(K.schema.options.timestamps&&J.timestamps!==!1)Q.initializeTimestamps();if(J.session!=null)Q.$session(J.session);const z=K?.schema?.options?.versionKey;if(z&&Q[z]==null)Q[z]=0;if(X.insertOne.document=Q,J.skipValidation||X.insertOne.skipValidation){G(null);return}X.insertOne.document.$validate().then(()=>{G(null)},(H)=>{G(H,null)})};else if(X.updateOne)return(G)=>{try{if(!X.updateOne.filter)throw new Error("Must provide a filter object.");if(!X.updateOne.update)throw new Error("Must provide an update object.");const K=VX(Y,X.updateOne.filter),Q=K.schema,z=J.strict!=null?J.strict:K.schema.options.strict;if(W$(Q,X.updateOne.filter),K.schema.$timestamps!=null&&X.updateOne.timestamps!==!1){const F=K.schema.$timestamps.createdAt,U=K.schema.$timestamps.updatedAt;cl($,F,U,X.updateOne.update,{})}if(X.updateOne.timestamps!==!1)dl($,X.updateOne.update,K.schema);if((X.updateOne.setDefaultsOnInsert==null?W:X.updateOne.setDefaultsOnInsert)!==!1)il(X.updateOne.filter,K.schema,X.updateOne.update,{setDefaultsOnInsert:!0,upsert:X.updateOne.upsert});pl(X.updateOne.update,X.updateOne,K.schema.options.versionKey),X.updateOne.filter=$$(K.schema,X.updateOne.filter,{strict:z,upsert:X.updateOne.upsert}),X.updateOne.update=ll(K.schema,X.updateOne.update,{strict:z,upsert:X.updateOne.upsert},K,X.updateOne.filter)}catch(K){return G(K,null)}G(null)};else if(X.updateMany)return(G)=>{try{if(!X.updateMany.filter)throw new Error("Must provide a filter object.");if(!X.updateMany.update)throw new Error("Must provide an update object.");const K=VX(Y,X.updateMany.filter),Q=K.schema,z=J.strict!=null?J.strict:K.schema.options.strict;if((X.updateMany.setDefaultsOnInsert==null?W:X.updateMany.setDefaultsOnInsert)!==!1)il(X.updateMany.filter,K.schema,X.updateMany.update,{setDefaultsOnInsert:!0,upsert:X.updateMany.upsert});if(K.schema.$timestamps!=null&&X.updateMany.timestamps!==!1){const F=K.schema.$timestamps.createdAt,U=K.schema.$timestamps.updatedAt;cl($,F,U,X.updateMany.update,{})}if(X.updateMany.timestamps!==!1)dl($,X.updateMany.update,K.schema);W$(Q,X.updateMany.filter),pl(X.updateMany.update,X.updateMany,K.schema.options.versionKey),X.updateMany.filter=$$(K.schema,X.updateMany.filter,{strict:z,upsert:X.updateMany.upsert}),X.updateMany.update=ll(K.schema,X.updateMany.update,{strict:z,upsert:X.updateMany.upsert},K,X.updateMany.filter)}catch(K){return G(K,null)}G(null)};else if(X.replaceOne)return(G)=>{const K=VX(Y,X.replaceOne.filter),Q=K.schema,z=J.strict!=null?J.strict:K.schema.options.strict;W$(Q,X.replaceOne.filter);try{X.replaceOne.filter=$$(K.schema,X.replaceOne.filter,{strict:z,upsert:X.replaceOne.upsert})}catch(U){return G(U,null)}const H=new K(X.replaceOne.replacement,z,!0);if(K.schema.options.timestamps)H.initializeTimestamps();if(J.session!=null)H.$session(J.session);const F=K?.schema?.options?.versionKey;if(F&&H[F]==null)H[F]=0;if(X.replaceOne.replacement=H,J.skipValidation||X.replaceOne.skipValidation){X.replaceOne.replacement=X.replaceOne.replacement.toBSON(),G(null);return}X.replaceOne.replacement.$validate().then(()=>{X.replaceOne.replacement=X.replaceOne.replacement.toBSON(),G(null)},(U)=>{G(U,null)})};else if(X.deleteOne)return(G)=>{const K=VX(Y,X.deleteOne.filter),Q=K.schema;W$(Q,X.deleteOne.filter);try{X.deleteOne.filter=$$(K.schema,X.deleteOne.filter)}catch(z){return G(z,null)}G(null)};else if(X.deleteMany)return(G)=>{const K=VX(Y,X.deleteMany.filter),Q=K.schema;W$(Q,X.deleteMany.filter);try{X.deleteMany.filter=$$(K.schema,X.deleteMany.filter)}catch(z){return G(z,null)}G(null)};else return(G)=>{const K=new NB1(`Invalid op passed to \`bulkWrite()\`: ${DB1(X)}`);G(K,null)}}});var ol=w((zf1,tl)=>{var rl=function(Z,Y,X){if(Z=Z.filter((J)=>!(J instanceof PB1)),!X)return Z;return Z.filter((J)=>{try{return Y.cast(J),!0}catch($){return!1}})},IB1=function(Z){if(Array.isArray(Z)){if(Z.length>1)return{$or:[].concat(Z.map((Y)=>Object.assign({},Y)))};return Object.assign({},Z[0])}return Object.assign({},Z)},PB1=fQ(),TB1=NK(),{trusted:uQ}=dZ(),sl=sR();tl.exports=function Z(Y,X,J,$,W){const G=IB1(X);if(J.size===1){const K=Array.from(J)[0],Q=$.schema.path(K);if(K!=="_id"||!G._id)Y=rl(Y,Q,W),G[K]=uQ({$in:Y});else if(K==="_id"&&G._id){const H=sl(G[K])?G[K]:{$eq:G[K]};G[K]={...uQ({$in:Y}),...H}}const z=TB1(K);for(let H=0;H<z.length-1;++H){const F=z[H];if(G[F]!=null&&G[F].$elemMatch!=null){G[F].$elemMatch[K.slice(F.length+1)]=uQ({$in:Y}),delete G[K];break}}}else{const K=[];if(Array.isArray(G.$or))G.$and=[{$or:G.$or},{$or:K}],delete G.$or;else G.$or=K;for(let Q of J)if(Q!=="_id"||!G._id){const z=$.schema.path(Q);Y=rl(Y,z,W),K.push({[Q]:{$in:Y}})}else if(Q==="_id"&&G._id){const z=sl(G[Q])?G[Q]:{$eq:G[Q]};G[Q]={...uQ({$in:Y}),...z}}}return G}});var Zp=w((Hf1,el)=>{var jB1=function(){return{result:{ok:1,writeErrors:[],writeConcernErrors:[],insertedIds:[],nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[]},insertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,upsertedCount:0,upsertedIds:{},insertedIds:{},n:0}};el.exports=jB1});var Xp=w((Ff1,Yp)=>{Yp.exports=function Z(Y){if(Y==null)return null;return Object.keys(Y)[0]}});var Gp=w((Uf1,Wp)=>{/*!
 * ignore
 */var Jp=h9(),EB1=z0(),CB1=j7(),$p=J$(),qX=P7(),OB1=Z1().populateModelSymbol;Wp.exports=function Z(Y,X,J,$){const W=X.path($),G=J;if(W)return W;const K=X.discriminatorMapping&&X.discriminatorMapping.key;if(K&&Y!=null){if(J!=null&&J[K]!=null){const H=CB1(Y.discriminators,J[K]);X=H?H.schema:X}else if(Y.discriminators!=null)return Object.keys(Y.discriminators).reduce((H,F)=>{const U=Y.discriminators[F];return H.concat(Z(U,U.schema,null,$))},[])}function Q(H,F,U,V){let q=H.length+1,L,R;while(q--){if(R=H.slice(0,q).join("."),L=F.path(R),L==null)continue;if(L.caster){if(L.caster instanceof Jp)return L.caster;let M=null;if(L.schema!=null&&L.schema.discriminators!=null){const D=L.schema.discriminators,m=R+"."+L.schema.options.discriminatorKey,O=U?qX.get(m,U)||[]:[];M=Object.keys(D).reduce(function(E,j){const n=D[j].discriminatorMapping.value;if(J==null||O.indexOf(j)!==-1||O.indexOf(n)!==-1)E.push(D[j]);return E},[])}if(q!==H.length&&L.schema){let D;if(H[q]==="$"){if(q+1===H.length)return L;if(D=Q(H.slice(q+1),F,U?qX.get(R,U):null,V.concat(H.slice(0,q))),D)D.$parentSchemaDocArray=D.$parentSchemaDocArray||(L.schema.$isSingleNested?null:L);return D}if(M!=null&&M.length>0){D=[];for(let m of M){const O=Q(H.slice(q),m,U?qX.get(R,U):null,V.concat(H.slice(0,q)));if(O!=null){if(O.$parentSchemaDocArray=O.$parentSchemaDocArray||(L.schema.$isSingleNested?null:L),O.$parentSchemaDocArray)D.$parentSchemaDocArray=O.$parentSchemaDocArray;D.push(O)}}return D}else{if(D=Q(H.slice(q),L.schema,U?qX.get(R,U):null,V.concat(H.slice(0,q))),D)D.$parentSchemaDocArray=D.$parentSchemaDocArray||(L.schema.$isSingleNested?null:L);return D}}else if(q!==H.length&&L.$isMongooseArray&&L.casterConstructor.$isMongooseArray){let D=L;while(D.$isMongooseArray&&!D.$isMongooseDocumentArray)D=D.casterConstructor;const m=Q(H.slice(q),D.schema,null,V.concat(H.slice(0,q)));if(m!=null)return m;if(D.schema.discriminators){const O=[];for(let E of Object.keys(D.schema.discriminators)){const j=D.schema.discriminators[E]||D.schema,n=Q(H.slice(q),j,null,V.concat(H.slice(0,q)));if(n!=null)O.push(n)}if(O.length>0)return O}}}else if(L.$isSchemaMap&&L.$__schemaType instanceof Jp)return L.$__schemaType;const B=V.concat([R]).join(".");if(G!=null&&G.$__&&G.$populated(B)&&q<H.length){const M=J.$__.populated[B].options[OB1];if(M!=null)return Q(H.slice(q),M.schema,U?qX.get(R,U):null,V.concat(H.slice(0,q)))}const N=EB1(G,R);if(N!=null){const M=Array.isArray(N)&&N.length>0?$p.get(N[0]):$p.get(N),D=M!=null?M.schema:null;if(D!=null){const m=Q(H.slice(q),D,U?qX.get(R,U):null,V.concat(H.slice(0,q)));if(m!=null)return m.$parentSchemaDocArray=m.$parentSchemaDocArray||(D.$isSingleNested?null:D),m}}return L}}const z=$.split(".");for(let H=0;H<z.length;++H)if(z[H]==="$")z[H]="0";return Q(z,X,J,[])}});var BM=w((Vf1,Kp)=>{var SB1=dY();Kp.exports=function Z(Y,X){if(Y==null)return!1;if(X==="_id")return Y._id===0;const J=Object.keys(Y);let $=null;for(let W of J)if(SB1(Y[W])){$=Y[X]===1?"inclusive":"exclusive";break}if($==="inclusive")return Y[X]!==1;if($==="exclusive")return Y[X]===0;return!1}});var Vp=w((qf1,Up)=>{var kB1=W0(),_B1=BM(),Qp=gQ(),zp=P7(),xB1=import.meta.require("util"),Hp=G1(),Fp=/(\.\d+$|\.\d+\.)/g;Up.exports=function Z(Y,X,J,$,W){if(Y==null)return[];if(typeof Y==="string"&&W!=null&&_B1(W,Y))throw new kB1("refPath `"+Y+"` must not be excluded in projection, got "+xB1.inspect(W));if(Fp.test(J)){const Q=J.split(Fp);if(Q[Q.length-1]==="")throw new Error("Can\'t populate individual element in an array");let z="",H=Y;for(let V=0;V<Q.length;V+=2){const q=Q[V];if(H.startsWith(q+"."))z+=H.substring(0,q.length)+Q[V+1],H=H.substring(q.length+1);else if(V===Q.length-1){z+=H,H="";break}else throw new Error("Could not normalize ref path, chunk "+q+" not in populated path")}const F=zp.get(z,X,Qp);let U=Array.isArray(F)?F:[F];return U=Hp.array.flatten(U),U}const G=zp.get(Y,X,Qp);let K;if($!=null&&$.virtuals.hasOwnProperty(Y))K=[$.virtuals[Y].applyGetters(void 0,X)];else K=Array.isArray(G)?G:[G];return K=Hp.array.flatten(K),K}});var Bp=w((Lf1,Mp)=>{var mB1=function(Z,Y,X,J){const $=[],W={},G=J.virtual;for(let K of Y){let Q=null;const z={};let H;const F=J.nestedSchemaPath?J.nestedSchemaPath+".":"";if(typeof X.localField==="string")H=X.localField;else if(typeof G.options.localField==="function")H=F+G.options.localField.call(K,K);else if(Array.isArray(G.options.localField))H=G.options.localField.map((N)=>F+N);else H=F+G.options.localField;if(z.count=G.options.count,G.options.skip!=null&&!X.hasOwnProperty("skip"))X.skip=G.options.skip;if(G.options.limit!=null&&!X.hasOwnProperty("limit"))X.limit=G.options.limit;if(G.options.perDocumentLimit!=null&&!X.hasOwnProperty("perDocumentLimit"))X.perDocumentLimit=G.options.perDocumentLimit;let U=G.options.foreignField;if(!H||!U)return new Lp(`Cannot populate virtual \`${X.path}\` on model \`${Z.modelName}\`, because options \`localField\` and / or \`foreignField\` are missing`);if(typeof H==="function")H=H.call(K,K);if(typeof U==="function")U=U.call(K,K);z.isRefPath=!1;let V=null;if(("justOne"in X)&&X.justOne!==void 0)V=X.justOne;if(G.options.refPath)Q=G$(G.options.refPath,K,X.path),V=!!G.options.justOne,z.isRefPath=!0;else if(G.options.ref){let N;if(typeof G.options.ref==="function"&&!G.options.ref[dQ])N=G.options.ref.call(K,K);else N=G.options.ref;if(V=!!G.options.justOne,Array.isArray(N))Q=N;else Q=[N]}z.isVirtual=!0,z.virtual=G,z.justOne=V;const q=t6(z,"virtual.options.match",null)||t6(z,"virtual.options.options.match",null);let L=t6(X,"match",null)||q,R=typeof L==="function";if(R)L=L.call(K,K,z.virtual);if(Array.isArray(H)&&Array.isArray(U)&&H.length===U.length){L=Object.assign({},L);for(let N=1;N<H.length;++N)L[U[N]]=Rp(o9.get(H[N],K,K$),Z.schema),R=!0;H=H[0],U=U[0]}z.localField=H,z.foreignField=U,z.match=L,z.hasMatchFunction=R;const B=wp(K,H,Z,X,G);try{PM(Z,$,W,Q,X,z,B,K)}catch(N){return N}}return $},PM=function(Z,Y,X,J,$,W,G,K,Q,z){const H=$.connection!=null?$.connection:Z.db;if(z=z===void 0?G:z,Array.isArray(z))z=x8.cloneArrays(z);if(J==null)return;let F=J.length;while(F--){const U=J[F];if(U==null)continue;let V;if($.model&&$.model[dQ])V=$.model;else if(U[dQ])V=U;else try{V=TM(H,U)}catch(N){if(G!==void 0)throw N;V=null}let q=G;const L=Array.isArray(G)?x8.array.flatten(G):[],R=W.modelNamesInOrder?W.modelNamesInOrder:J;if(W.isRefPath&&Array.isArray(G)&&L.length===R.length)q=L.filter((N,M)=>R[M]===U);const B=$.perDocumentLimit==null?t6($,"options.perDocumentLimit",null):$.perDocumentLimit;if(!X[U]||B!=null){const N={model:V};if(W.isVirtual&&t6(W.virtual,"options.options"))N.options=yB1(W.virtual.options.options);else if(Q!=null)N.options=Object.assign({},Q);x8.merge(N,$),$[NM]=V,N[NM]=V,X[U]={model:V,options:N,match:W.hasMatchFunction?[W.match]:W.match,docs:[K],ids:[q],allIds:[G],unpopulatedValues:[z],localField:new Set([W.localField]),foreignField:new Set([W.foreignField]),justOne:W.justOne,isVirtual:W.isVirtual,virtual:W.virtual,count:W.count,[NM]:V},Y.push(X[U])}else if(X[U].localField.add(W.localField),X[U].foreignField.add(W.foreignField),X[U].docs.push(K),X[U].ids.push(q),X[U].allIds.push(G),X[U].unpopulatedValues.push(z),W.hasMatchFunction)X[U].match.push(W.match)}},TM=function(Z,Y){if(Z.models[Y]==null&&Z._parent!=null)return TM(Z._parent,Y);return Z.model(Y)},AM=function(Z,Y){if(typeof Z==="function"&&!Z[dQ])return Z.call(Y,Y);return Z},wp=function(Z,Y,X,J,$,W){const G=X.schema._getPathType(Y),K=G==="real"?X.schema.path(Y):G.schema,Q=K&&K.getters?K.getters:[];Y=K!=null&&K.instance==="Embedded"?Y+"._id":Y;const z=t6(J,"options",{}),H="getters"in z?z.getters:t6($,"options.getters",!1);if(Q.length!==0&&H){const F=Z.$__!=null?Z:X.hydrate(Z),U=x8.getValue(Y,Z);if(Array.isArray(U)){const V=x8.getValue(Y.split(".").slice(0,-1),F);return U.map((q,L)=>K.applyGetters(q,V[L]))}else return K.applyGetters(U,F)}else return Rp(o9.get(Y,Z,K$),W)},Rp=function(Z,Y){if(Z!=null&&Z.$__!=null)return Z._id;if(Z!=null&&Z._id!=null&&(Y==null||!Y.$isSchemaMap))return Z._id;if(Array.isArray(Z)){const X=Z.__array!=null?Z.__array:Z;for(let J=0;J<X.length;++J)if(X[J]!=null&&X[J].$__!=null)X[J]=X[J]._id;if(x8.isMongooseArray(Z)&&Z.$schema())return Z.$schema()._castForPopulate(Z,Z.$parent());return[].concat(Z)}if(bB1(Z)==="Object"&&(Y==null||Y[DM]==null)){const X=[];for(let J of Object.keys(Z))X.push(Z[J]);return X}if(Z instanceof Map)return Array.from(Z.values());return Z},uB1=function(Z,Y,X,J,$,W){if(!X.isRefPath||$==null)return;const G=$.split(".");let K="",Q=void 0;for(let z=0;z<G.length;++z){const H=G[z];K=K+(K.length===0?"":".")+H;const F=Y.path(K);if(F!=null&&F.$isMongooseArray&&F.caster.discriminators!=null&&Object.keys(F.caster.discriminators).length!==0){const U=x8.getValue(K,Z),V=J.path.substring(K.length+1),q=F.caster.schema.options.discriminatorKey;Q=[];for(let L of U){const R=x8.getValue(q,L),B=F.caster.discriminators[R],N=B&&B.schema;if(N==null)continue;const M=N.path(V);if(M==null||M.options.refPath==null){const m=x8.getValue(X.localField.substring(K.length+1),L);W.forEach((O,E)=>{if(O===m)W[E]=fB1(O)});continue}const D=x8.getValue(G.slice(z+1).join("."),L);Q.push(D)}}}return Q},Lp=n1(),fB1=fQ(),yB1=w0(),t6=z0(),gB1=j7(),bB1=r8(),qp=Gp(),vB1=qM(),K$=gQ(),o9=P7(),G$=Vp(),x8=G1(),dQ=Z1().modelSymbol,NM=Z1().populateModelSymbol,DM=v9().schemaMixedSymbol,hB1=zL();Mp.exports=function Z(Y,X,J){let $;const W=X.length,G=[],K=J.model&&J.model.modelName||J.model;let Q,z,H;const F={},U=Y.schema;if(J._localModel!=null&&J._localModel.schema.nested[J.path])return[];const V=vB1(Y.schema,J.path);if((V==null?null:V.virtual)!=null)return mB1(Y,X,J,V);let L=qp(Y,U,null,J.path);if(L=Array.isArray(L)?L:[L].filter((N)=>N!=null),!(J.strictPopulate===!1||J.options?.strictPopulate===!1)&&L.length===0&&J._localModel!=null)return new hB1(J._fullPath||J.path);for(let N=0;N<W;N++){$=X[N];let M=null;const D=$!=null&&$.$__!=null?$.$__schema:U;if(Q=qp(Y,D,$,J.path),Q!=null&&Q.$isMongooseDocumentArray&&Q.options.ref==null&&Q.options.refPath==null)continue;if(Q&&Q.$parentSchemaDocArray&&t6(J,"options.sort")!=null)return new Lp("Cannot populate with `sort` on path "+J.path+" because it is a subproperty of a document array");H=null;let O=!1,E=null,j=null,n=null;if(Q!=null&&Q.instance==="Embedded"){if(Q.options.ref){const e1={localField:J.path+"._id",foreignField:"_id",justOne:!0},k0=B($,Q,K,Y),v8=o9.get(J.path,$),H8=o9.get("_id",v8);PM(Y,G,F,k0.modelNames,J,e1,H8,$,j,v8)}continue}if(Array.isArray(Q)){const e1=Q;for(let k0 of e1){let v8,H8;try{H8=B($,k0,K,Y),v8=H8.modelNames,O=O||H8.isRefPath,E=E||H8.refPath,M=H8.justOne}catch(i4){return i4}if(O&&!H8.isRefPath)continue;if(!v8)continue;H=H||[];for(let i4 of v8)if(H.indexOf(i4)===-1)H.push(i4)}}else{try{const e1=B($,Q,K,Y);if(H=e1.modelNames,O=e1.isRefPath,E=E||e1.refPath,M=e1.justOne,j=t6(Q,"options.populate",null),O)n=H,H=Array.from(new Set(H))}catch(e1){return e1}if(!H)continue}const c={},y=J.path,C="_id";if(("justOne"in J)&&J.justOne!==void 0)M=J.justOne;else if(Q&&!Q[DM]){if(J.path.endsWith("."+Q.path)||J.path===Q.path)M=Array.isArray(Q)?Q.every((e1)=>!e1.$isMongooseArray):!Q.$isMongooseArray}if(!H)continue;c.isVirtual=!1,c.justOne=M,c.localField=y,c.foreignField=C;const S=wp($,y,Y,J,null,Q),a=String(x8.getValue(C,$));J._docs[a]=Array.isArray(S)?S.slice():S;let E1=t6(J,"match",null);const u0=typeof E1==="function";if(u0)E1=E1.call($,$);if(c.match=E1,c.hasMatchFunction=u0,c.isRefPath=O,c.modelNamesInOrder=n,O)H=uB1($,U,c,J,E,S)||H;try{PM(Y,G,F,H,J,c,S,$,j)}catch(e1){return e1}}return G;function B(N,M,D,m){let O,E=!1,j=null;const n=M;if(M&&M.instance==="Array")M=M.caster;if(M&&M.$isSchemaMap)M=M.$__schemaType;const c=M&&M.options&&M.options.ref;if(z=M&&M.options&&M.options.refPath,M!=null&&M[DM]&&!c&&!z&&!D)return{modelNames:null};if(D)O=[D];else if(z!=null){if(typeof z==="function"){const y=J.path.slice(0,J.path.length-M.path.length-1),C=o9.get(y,N,K$),S=Array.isArray(C)?x8.array.flatten(C):C?[C]:[];O=new Set;for(let a of S)z=z.call(a,a,J.path),G$(z,N,J.path,U,J._queryProjection).forEach((E1)=>O.add(E1));O=Array.from(O)}else O=G$(z,N,J.path,U,J._queryProjection);E=!0}else{let y,C,S,a,E1=m;const u0=m.schema.options.discriminatorKey;if(!M&&u0&&(a=x8.getValue(u0,N))){const e1=gB1(m.discriminators,a)||m;if(e1!=null)E1=e1;else try{E1=TM(m.db,a)}catch(k0){return k0}if(S=E1.schema._getSchema(J.path),S&&S.caster)S=S.caster}else S=M;if(n&&n.path.endsWith(".$*"))j=!n.$isMongooseArray&&!n._arrayPath;else if(S!=null)j=!S.$isMongooseArray&&!S._arrayPath;if((y=t6(S,"options.ref"))!=null)if(S!=null&&typeof y==="function"&&J.path.endsWith("."+S.path)){O=new Set;const e1=J.path.slice(0,J.path.length-S.path.length-1),k0=o9.get(e1,N,K$),v8=Array.isArray(k0)?x8.array.flatten(k0):k0?[k0]:[];for(let H8 of v8)O.add(AM(y,H8));if(v8.length===0)O=[AM(y,N)];else O=Array.from(O)}else y=AM(y,N),O=[y];else if((S=t6(M,"options.refPath"))!=null)if(E=!0,typeof C==="function"){const e1=J.path.slice(0,J.path.length-S.path.length-1),k0=o9.get(e1,N,K$),v8=Array.isArray(k0)?x8.array.flatten(k0):k0?[k0]:[];O=new Set;for(let H8 of v8)C=C.call(H8,H8,J.path),G$(C,N,J.path,U,J._queryProjection).forEach((i4)=>O.add(i4));O=Array.from(O)}else O=G$(C,N,J.path,U,J._queryProjection)}if(!O)if(J._localModel==null)O=[m.modelName];else return{modelNames:O,justOne:j,isRefPath:E,refPath:z};if(!Array.isArray(O))O=[O];return{modelNames:O,justOne:j,isRefPath:E,refPath:z}}};/*!
 * ignore
 *//*!
 * ignore
 *//*!
 * ignore
 *//*!
 * ignore
 *//*!
 * ignore
 */});var Ap=w((wf1,Np)=>{var dB1=z0();Np.exports=function Z(Y){if(Array.isArray(Y)){const J=Object.keys(Y[0]);return J.length===1&&J[0]==="_id"&&Y[0]._id!=="hashed"}if(typeof Y!=="object")return!1;const X=dB1(Y,"key",{});return Object.keys(X).length===1&&X.hasOwnProperty("_id")}});var Tp=w((Rf1,Pp)=>{var cQ=z0(),Dp=G1();Pp.exports=function Z(Y,X,J){if(J.textIndexVersion!=null){delete J.key._fts,delete J.key._ftsx;const K={...J.weights,...J.key};if(Object.keys(K).length!==Object.keys(Y).length)return!1;for(let Q of Object.keys(K)){if(!(Q in Y))return!1;const z=K[Q];if(z!==cQ(X,"weights."+Q)&&!(z===1&&cQ(X,"weights."+Q)==null))return!1}if(X.default_language!==J.default_language)return J.default_language==="english"&&X.default_language==null;return!0}const $=["unique","partialFilterExpression","sparse","expireAfterSeconds","collation"];for(let K of $){if(!(K in X)&&!(K in J))continue;if(K==="collation"){if(X[K]==null||J[K]==null)return X[K]==null&&J[K]==null;const Q=Object.keys(X.collation),z=X.collation,H=J.collation;for(let F of Q)if(cQ(z,F)!==cQ(H,F))return!1}else if(!Dp.deepEqual(X[K],J[K]))return!1}const W=Object.keys(Y),G=Object.keys(J.key);if(W.length!==G.length)return!1;for(let K=0;K<W.length;++K){if(W[K]!==G[K])return!1;if(!Dp.deepEqual(Y[W[K]],J.key[G[K]]))return!1}return!0}});var Cp=w((Mf1,Ep)=>{var cB1=function(Z,Y){return jp({baseModelName:Z.baseModelName,discriminatorMapping:Z.schema.discriminatorMapping,indexes:Y,indexesType:"schema"})},lB1=function(Z,Y){return jp({baseModelName:Z.baseModelName,discriminatorMapping:Z.schema.discriminatorMapping,indexes:Y,indexesType:"db"})},jp=function({baseModelName:Z,discriminatorMapping:Y,indexes:X,indexesType:J}){const $=Y&&Y.key,W=Y&&Y.value;if(!$)return X;if(Boolean(Z))return X.filter((K)=>{const Q=Ip(K,J);return Q&&Q[$]===W});return X.filter((K)=>{const Q=Ip(K,J);return!Q||!Q[$]})},Ip=function(Z,Y){if(Y==="schema"){const X=Z[1];return X&&X.partialFilterExpression}return Z.partialFilterExpression};Ep.exports={getRelatedSchemaIndexes:cB1,getRelatedDBIndexes:lB1}});var Sp=w((Bf1,Op)=>{var pB1=function(Z,Y,X){let J=0,$=0,W=null;if(Y<=0)throw new Error("Limit must be positive");if(Z.length===0)return X(null,[]);for(let z=0;z<Z.length&&z<Y;++z)G();function G(){Z[$+J](Q($+J)),++J}const K=[];function Q(z){return(H,F)=>{if(--J,++$,W!=null)return;if(H!=null)return W=H,X(W);if(K[z]=F,$===Z.length)return X(null,K);else if($+J<Z.length)G()}}};Op.exports=pB1;/*!
 * ignore
 */});var _p=w((Nf1,kp)=>{kp.exports=function Z(Y,X,J){if(X==null)return;for(let $=0;$<X.length;++$)if(Array.isArray(X[$]))Z(Y,X[$],J+"."+$);else Y.push(J+"."+$)}});var bp=w((Af1,gp)=>{var xp=z0(),fp=P7(),yp=aR();/*!
 * ignore
 */gp.exports=function Z(Y,X,J){const $=yp(xp(X,"select",null),!0)||yp(xp(X,"options.select",null),!0);if($==null)return;for(let W of Y){if(!$.hasOwnProperty("-"+W))continue;for(let G of J)if(G.$__!=null)fp.unset(W,G._doc);else fp.unset(W,G)}}});var hp=w((Df1,vp)=>{/*!
 * Module dependencies.
 */var iB1=n1();class IM extends iB1{constructor(Z,Y,X,J){let $=Z.map((W)=>W.message).join(", ");if($.length>200)$=$.slice(0,200)+"...";super(`${J} failed with ${Z.length} Mongoose validation errors: ${$}`);this.validationErrors=Z,this.results=Y,this.rawResult=X,this.operation=J}}Object.defineProperty(IM.prototype,"name",{value:"MongooseBulkWriteError"});/*!
 * exports
 */vp.exports=IM});var HM=w(($i,Wi)=>{var i=function(Z,Y,X){if(Y instanceof EM)throw new TypeError("2nd argument to `Model` must be a POJO or string, **not** a schema. Make sure you\'re calling `mongoose.model()`, not `mongoose.Model()`.");e9.call(this,Z,Y,X)},Ji=function(Z,Y){if(Z.$where==null)return;for(let X of Object.keys(Z.$where))Y[X]=Z.$where[X]},jN1=function(Z,Y){const X=Z.$__schema.options.versionKey;if(!X)return null;const J=Z.$__getValue(X)||0;return new np(Z,J,Y)},EN1=function(Z,Y){const X=Z.$__schema.options.skipVersioning;if(!X)return!1;return Y=Y.replace(/\.\d+\./,"."),X[Y]},g5=function(Z,Y,X,J,$,W){if(W||(W="$set"),!X[W])X[W]={};if(X[W][J.path]=$,Z.$__schema.options.versionKey===!1)return;if(EN1(Z,J.path))return;if(LX===(LX&Z.$__.version))return;if(Z.$__schema.options.optimisticConcurrency)return;switch(W){case"$set":case"$unset":case"$pop":case"$pull":case"$pullAll":case"$push":case"$addToSet":case"$inc":break;default:return}if(W==="$push"||W==="$addToSet"||W==="$pullAll"||W==="$pull")if(/\.\d+\.|\.\d+$/.test(J.path))iQ.call(Z);else Z.$__.version=2;else if(/^\$p/.test(W))iQ.call(Z);else if(Array.isArray($))iQ.call(Z);else if(/\.\d+\.|\.\d+$/.test(J.path))Z.$__.version=1},CN1=function(Z,Y,X,J,$){if(X.$set&&X.$set[J.path])return;if(typeof $.$__getAtomics==="function"){$.$__getAtomics().forEach(function(F){const U=F[0],V=F[1];g5(Z,Y,X,J,V,U)});return}const W=$[_M],G=Object.keys(W);let K=G.length,Q,z;if(K===0){if(m1.isMongooseObject($))$=$.toObject({depopulate:1,_isNested:!0});else if($.valueOf)$=$.valueOf();return g5(Z,Y,X,J,$)}function H(F){return m1.isMongooseObject(F)?F.toObject({depopulate:1,_isNested:!0}):F}while(K--){if(z=G[K],Q=W[z],m1.isMongooseObject(Q))Q=Q.toObject({depopulate:!0,transform:!1,_isNested:!0});else if(Array.isArray(Q))Q=Q.map(H);else if(Q.valueOf)Q=Q.valueOf();if(z==="$addToSet")Q={$each:Q};g5(Z,Y,X,J,Q,z)}},ON1=function(Z,Y,X){const J=Z.$populated(Y,!0);if(!J&&Z.$__.selected){const W=Y.split(".")[0];if(Z.$__.selected[W+".$"])return W}if(!(J&&m1.isMongooseArray(X)))return;if(J.options.match||J.options.options&&m1.object.hasOwnProperty(J.options.options,"limit")||J.options.options&&J.options.options.skip||J.options.select&&(J.options.select._id===0||/\s?-_id\s?/.test(J.options.select))){const W=X[_M];if(Object.keys(W).length===0||W.$set||W.$pop)return Y}},iQ=function(){return this.$__.version=LX,this},T1=function(Z,Y){if(Z==null||Z===global)throw new L1("`Model."+Y+"()` cannot run without a model as `this`. Make sure you are calling `MyModel."+Y+"()` where `MyModel` is a Mongoose model.");else if(Z[Xi]==null)throw new L1("`Model."+Y+"()` cannot run without a model as `this`. Make sure you are not calling `new Model."+Y+"()`")},SN1=function(Z,Y,X,J){const $=[];for(let[W,G]of Y){let K=!1;const Q=kM(Z,t7(G));for(let z of X){if(SM(z))continue;if(ep(W,Q,z)&&!J.includes(z.name)){K=!0;break}}if(!K)$.push(W)}return $},kN1=function(Z,Y,X){const J=[];for(let $ of X){let W=!1;if(SM($))continue;for(let[G,K]of Y){const Q=kM(Z,t7(K));if(sp(G,Q,Z.options),ep(G,Q,$)){W=!0;break}}if(!W)J.push($.name)}return J};async function pp(Z,Y){if(Z.length===0)return[];return await Promise.all(Z.map((X)=>Y.dropIndex(X))),Z}var _N1=function(Z,Y,X){const J=Z.schema.indexes();let $;Y=Y||{};const W=function(F){if(F&&!Z.$caught)Z.emit("error",F);Z.emit("index",F||$),X&&X(F||$)};for(let F of J)if(SM(F))m1.warn('mongoose: Cannot specify a custom index on `_id` for model name "'+Z.modelName+'", MongoDB does not allow overwriting the default `_id` index. See https://bit.ly/mongodb-id-index');if(!J.length){H$(function(){W()});return}const G=function(F,U,V,q){Z.emit("index-single-done",F,U,V,q)},K=function(F,U){Z.emit("index-single-start",F,U)},Q=Z.schema._baseSchema,z=Q?Q.indexes():[];H$(function(){if(Y._automatic&&!Z.collection.collection)Z.collection.addQueue(H,[]);else H()});function H(){if(Y._automatic){if(Z.schema.options.autoIndex===!1||Z.schema.options.autoIndex==null&&Z.db.config.autoIndex===!1)return W()}const F=J.shift();if(!F)return W();if(Y._automatic&&F[1]._autoIndex===!1)return H();if(z.find((q)=>m1.deepEqual(q,F)))return H();const U=t7(F[0]),V=t7(F[1]);if(delete V._autoIndex,kM(Z.schema,V),tp(Z.schema,V),sp(U,V,Z.schema.options),K(U,Y),("background"in Y))V.background=Y.background;if("toCreate"in Y){if(Y.toCreate.length===0)return W()}Z.collection.createIndex(U,V).then((q)=>{G(null,U,V,q),H()},(q)=>{if(!$)$=q;if(!Z.$caught)Z.emit("error",q);G(q,U,V),H()})}},wX=function(Z,Y){Z.$isNew=Y,Z.$emit("isNew",Y),Z.constructor.emit("isNew",Y);const X=Z.$getAllSubdocs();for(let J of X)J.$isNew=Y,J.$emit("isNew",Y)},xN1=function(Z){return new Promise((Y,X)=>{Z.schema.s.hooks.execPre("save",Z,(J)=>{if(J){X(J);return}Y()})})},fN1=function(Z){return new Promise((Y,X)=>{if(Z.$isNew)wX(Z,!1);Z.$__reset(),Z.schema.s.hooks.execPost("save",Z,[Z],{},(J)=>{if(J){X(J);return}Y()})})},fM=function(Z,Y,X,J,$){const W=new Z.Query({},{},Z,Z.collection);if(X instanceof e9)X=X.toObject();else X=t7(X);$=typeof $==="function"?$:t7($);const G=Z&&Z.schema&&Z.schema.options&&Z.schema.options.versionKey||null;return op(J,$,G),W[Y](X,J,$)},yN1=function(Z,Y,X,J,$){let W=X.length;if(X.length===0)return $(null,Y);for(let K of X)vN1(Z,Y,K,G);function G(K){if(K)return $(K,null);if(--W)return;$(null,Y)}},vN1=function(Z,Y,X,J){const $=X;if(X.strictPopulate==null){if(X._localModel!=null&&X._localModel.schema._userProvidedOptions.strictPopulate!=null)$.strictPopulate=X._localModel.schema._userProvidedOptions.strictPopulate;else if(X._localModel!=null&&Z.base.options.strictPopulate!=null)$.strictPopulate=Z.base.options.strictPopulate;else if(Z.base.options.strictPopulate!=null)$.strictPopulate=Z.base.options.strictPopulate}if(!Array.isArray(Y))Y=[Y];if(Y.length===0||Y.every(m1.isNullOrUndefined))return J();const W=qN1(Z,Y,$);if(W instanceof L1)return H$(function(){J(W)});const G=W.length;let K=[];function Q(q){return q!==void 0}let z=G,H=!1;const F=[];for(let q=0;q<G;++q){const L=W[q];let R=L.options.select,B=m1.array.flatten(L.ids,Q);B=m1.array.unique(B);const N={};if(N.sort=L&&L.options&&L.options.options&&L.options.options.sort||void 0,N.excludeId=gN1.test(R)||R&&R._id===0,L.options&&L.options.options&&L.options.options.lean&&L.options.options.lean.transform)L.options.options._leanTransform=L.options.options.lean.transform,L.options.options.lean=!0;if(B.length===0||B.every(m1.isNullOrUndefined)){--z,ip(Z,[],L,N);continue}if(H=!0,typeof $.foreignField==="string")L.foreignField.clear(),L.foreignField.add($.foreignField);const M=zN1(B,L.match,L.foreignField,L.model,L.options.skipInvalidIds);if(N.excludeId)if(typeof R==="string")R=R.replace(bN1," ");else R=m1.object.shallowCopy(R),delete R._id;if(L.options.options&&L.options.options.limit!=null)N.originalLimit=L.options.options.limit;else if(L.options.limit!=null)N.originalLimit=L.options.limit;F.push([L,M,R,N,U])}if(!H){if(W.length!==0)return J();if($.populate!=null){const q=m1.populate($.populate).map((L)=>Object.assign({},L,{path:$.path+"."+L.path}));Z.populate(Y,q).then((L)=>{J(null,L)},(L)=>{J(L)});return}return J()}for(let q of F)hN1.apply(null,q);function U(q,L){if(q!=null)return J(q,null);if(K=K.concat(L),--z===0)V()}function V(){for(let q of F){const L=q[0],R=q[3];for(let B of K)L.options._childDocs.push(B);try{ip(Z,K,L,R)}catch(B){return J(B)}}for(let q of F)DN1(q[0].foreignField,q[0].options,K);for(let q of F){const L=q[0];if(L.options&&L.options.options&&L.options.options._leanTransform)for(let R of K)L.options.options._leanTransform(R)}J()}},hN1=function(Z,Y,X,J,$){let W=t7(Z.options.populate);const G=Object.assign({skip:Z.options.skip,limit:Z.options.limit,perDocumentLimit:Z.options.perDocumentLimit},Z.options.options);if(Z.count)delete G.skip;if(G.perDocumentLimit!=null)G.limit=G.perDocumentLimit,delete G.perDocumentLimit;else if(G.limit!=null)G.limit=G.limit*Z.ids.length;const K=Z.model.find(Y,X,G);for(let Q of Z.foreignField)if(Q!=="_id"&&K.selectedInclusively()&&!RN1(K._fields,Q))K.select(Q);if(Z.count)for(let Q of Z.foreignField)K.select(Q);if(W){if(Z.model.baseModelName!=null)if(Array.isArray(W))W.forEach((z)=>{z.strictPopulate=!1});else if(typeof W==="string")W={path:W,strictPopulate:!1};else W.strictPopulate=!1;const Q=Z.options._fullPath||Z.options.path;if(Array.isArray(W))for(let z of W)z._fullPath=Q+"."+z.path;else if(typeof W==="object")W._fullPath=Q+"."+W.path;K.populate(W)}K.exec().then((Q)=>{for(let z of Q)MN1.set(z,Z.model);$(null,Q)},(Q)=>{$(Q)})},ip=function(Z,Y,X,J){const{options:$,isVirtual:W,justOne:G}=X;let K;const Q=$&&$.options&&$.options.lean||!1,z=Y.length,H={},F={};let U,V;const q=t7(X.allIds);for(let L=0;L<z;L++){if(V=Y[L],V==null)continue;for(let R of X.foreignField){if(K=m1.getValue(R,V),Array.isArray(K)){K=m1.array.unique(m1.array.flatten(K));for(let B of K){if(B instanceof e9)B=B._id;if(U=String(B),F[U])if(Array.isArray(F[U]))F[U].push(V),H[U].push(L);else F[U]=[F[U],V],H[U]=[H[U],L];else if(W&&!G)F[U]=[V],H[U]=[L];else F[U]=V,H[U]=L}}else{if(K instanceof e9)K=K._id;if(U=String(K),F[U]){if(Array.isArray(F[U]))F[U].push(V),H[U].push(L);else if(W||F[U].constructor!==V.constructor||String(F[U]._id)!==String(V._id))F[U]=[F[U],V],H[U]=[H[U],L]}else F[U]=V,H[U]=L}if(!Q)V.$__.wasPopulated=V.$__.wasPopulated||!0}}KN1({originalModel:Z,rawIds:X.isVirtual?q:X.allIds,allIds:q,unpopulatedValues:X.unpopulatedValues,foreignField:X.foreignField,rawDocs:F,rawOrder:H,docs:X.docs,path:$.path,options:J,justOne:X.justOne,isVirtual:X.isVirtual,allOptions:X,populatedModel:X.model,lean:Q,virtual:X.virtual,count:X.count,match:X.match})},mN1=function(Z,Y){for(let X in Y)Z.Query.prototype[X]=Y[X]};/*!
 * Module dependencies.
 */var nB1=zM(),aB1=cq(),e9=o8(),sB1=KK(),rB1=GL(),jM=import.meta.require("events").EventEmitter,tB1=fY(),oB1=k3(),L1=n1(),eB1=YL(),lQ=kQ(),ZN1=Kl(),EM=nY(),CM=g9(),np=tq(),mp=eq(),YN1=qK(),XN1=zl(),JN1=vK(),$N1=hK(),ap=Fl(),WN1=ql(),sp=Ml(),GN1=Nl(),rp=Dl(),tp=IR(),KN1=ml(),QN1=al(),t7=w0(),zN1=ol(),op=MM(),up=Zp(),HN1=RK(),FN1=KQ(),UN1=Xp(),OM=xw(),z$=z0(),VN1=r8(),pQ=j7(),qN1=Bp(),H$=H6(),nQ=n7().internalToObjectOptions,SM=Ap(),ep=Tp(),{getRelatedDBIndexes:LN1,getRelatedSchemaIndexes:wN1}=Cp(),dp=BM(),kM=Jw(),RN1=BK(),MN1=J$(),BN1=Sp(),NN1=NK(),AN1=GM(),Zi=_p(),DN1=bp(),PN1=OR(),cp=cZ(),lp=import.meta.require("util"),m1=G1(),Yi=hp(),TN1=PL(),LX=1|2,_M=Z1().arrayAtomicsSymbol,aQ=Symbol("mongoose#Model#collection"),xM=Symbol("mongoose#Model#db"),Xi=Z1().modelSymbol,Q$=Symbol("mongoose#Model#subclassed"),IN1=Object.assign({},nQ,{bson:!0,flattenObjectIds:!1});Object.setPrototypeOf(i.prototype,e9.prototype);i.prototype.$isMongooseModelPrototype=!0;i.prototype.db;i.prototype.collection;i.prototype.$__collection;i.prototype.modelName;i.prototype.$where;i.prototype.baseModelName;i.events;i._middleware;/*!
 * ignore
 *//*!
 * ignore
 */i.prototype.$__handleSave=function(Z,Y){const X={};if(tp(this.$__schema,Z),typeof Z.writeConcern!=="undefined"){if(X.writeConcern={},("w"in Z.writeConcern))X.writeConcern.w=Z.writeConcern.w;if("j"in Z.writeConcern)X.writeConcern.j=Z.writeConcern.j;if("wtimeout"in Z.writeConcern)X.writeConcern.wtimeout=Z.writeConcern.wtimeout}else{if("w"in Z)X.w=Z.w;if("j"in Z)X.j=Z.j;if("wtimeout"in Z)X.wtimeout=Z.wtimeout}if("checkKeys"in Z)X.checkKeys=Z.checkKeys;const J=this.$session();if(!X.hasOwnProperty("session")&&J!=null)X.session=J;if(this.$isNew){const G=this.toObject(IN1);if((G||{})._id===void 0){H$(function(){Y(new L1("document must have an _id before saving"))});return}this.$__version(!0,G),this[aQ].insertOne(G,X).then((K)=>Y(null,K),(K)=>{wX(this,!0),Y(K,null)}),this.$__reset(),wX(this,!1),this.$__.inserting=!0;return}this.$__.inserting=!1;const $=this.$__delta();if($){if($ instanceof L1){Y($);return}const G=this.$__where($[0]);if(G instanceof L1){Y(G);return}Ji(this,G);const K=$[1];if(this.$__schema.options.minimize){if(TN1(K),Object.keys(K).length===0){W.call(this);return}}this[aQ].updateOne(G,K,X).then((Q)=>{Q.$where=G,Y(null,Q)},(Q)=>{this.$__undoReset(),Y(Q)})}else{W.call(this);return}this.$__.modifiedPaths=this.modifiedPaths(),this.$__reset(),wX(this,!1);function W(){const G=Object.assign({},Z,X),K=this.$__where(),Q=this.$__schema.options.optimisticConcurrency;if(Q&&!Array.isArray(Q)){const z=this.$__schema.options.versionKey,H=this.$__getValue(z);if(H!=null)K[z]=H}this.constructor.collection.findOne(K,G).then((z)=>{Y(null,{$where:K,matchedCount:!z?0:1})}).catch(Y)}};/*!
 * ignore
 */i.prototype.$__save=function(Z,Y){this.$__handleSave(Z,(X,J)=>{if(X)return this.$__schema.s.hooks.execPost("save:error",this,[this],{error:X},(K)=>{Y(K,this)});let $=0;if((Z!=null?Z.writeConcern!=null?Z.writeConcern.w:Z.w:0)!==0){if(J!=null)if(Array.isArray(J))$=J.length;else if(J.matchedCount!=null)$=J.matchedCount;else $=J;if(this.$__.version&&!this.$__.inserting){const K=(2&this.$__.version)===2;this.$__.version=void 0;const Q=this.$__schema.options.versionKey,z=this.$__getValue(Q)||0;if($<=0){this.$__undoReset();const H=this.$__.$versionError||new np(this,z,this.$__.modifiedPaths);return Y(H)}if(K)this.$__setValue(Q,z+1)}if(J!=null&&$<=0)return this.$__undoReset(),X=new sB1(J.$where,this.constructor.modelName,$,J),this.$__schema.s.hooks.execPost("save:error",this,[this],{error:X},(Q)=>{Y(Q,this)})}this.$__.saving=void 0,this.$__.savedState={},this.$emit("save",this,$),this.constructor.emit("save",this,$),Y(null,this)})};/*!
 * ignore
 */i.prototype.save=async function Z(Y){if(typeof Y==="function"||typeof arguments[1]==="function")throw new L1("Model.prototype.save() no longer accepts a callback");let X;if(this.$op="save",this.$__.saving)X=new mp(this);else this.$__.saving=new mp(this);if(Y=new ZN1(Y),Y.hasOwnProperty("session"))this.$session(Y.session);if(this.$__.timestamps!=null)Y.timestamps=this.$__.timestamps;if(this.$__.$versionError=jN1(this,this.modifiedPaths()),X)throw this.$__handleReject(X),X;return this.$__.saveOptions=Y,await new Promise((J,$)=>{this.$__save(Y,(W)=>{if(this.$__.saving=null,this.$__.saveOptions=null,this.$__.$versionError=null,this.$op=null,W!=null)return this.$__handleReject(W),$(W);J()})}),this};i.prototype.$save=i.prototype.save;i.prototype.$__delta=function(){const Z=this.$__dirty(),Y=this.$__schema.options.optimisticConcurrency;if(Y)if(Array.isArray(Y)){const K=new Set(Y);if(this.modifiedPaths().find((z)=>K.has(z)))this.$__.version=Z.length?LX:1}else this.$__.version=Z.length?LX:1;if(!Z.length&&LX!==this.$__.version)return;const X={},J={},$=Z.length,W=[];let G=0;if(X._id=this._doc._id,(X&&X._id&&X._id.$__||null)!=null)X._id=X._id.toObject({transform:!1,depopulate:!0});for(;G<$;++G){const K=Z[G];let Q=K.value;const z=ON1(this,K.path,Q);if(z){W.push(z);continue}if(!this.$populated(K.path,!0)&&this.$__.selected){const F=K.path.split("."),U=F[0];if(this.$__.selected[U]&&this.$__.selected[U].$elemMatch)if(F.length>1&&F[1]==0&&typeof X[U]==="undefined")X[U]=this.$__.selected[U],F[1]="$",K.path=F.join(".");else{W.push(K.path);continue}}if(this.$isDefault(K.path)&&this.$__.selected){if(K.path.indexOf(".")===-1&&dp(this.$__.selected,K.path))continue;if(NN1(K.path).find((U)=>dp(this.$__.isSelected,U)))continue}if(W.length)continue;if(Q===void 0)g5(this,X,J,K,1,"$unset");else if(Q===null)g5(this,X,J,K,null);else if(m1.isMongooseArray(Q)&&Q.$path()&&Q[_M])CN1(this,X,J,K,Q);else if(Q[oB1.pathSymbol]&&Buffer.isBuffer(Q))Q=Q.toObject(),g5(this,X,J,K,Q);else if(this.$__.primitiveAtomics&&this.$__.primitiveAtomics[K.path]!=null){const F=this.$__.primitiveAtomics[K.path],U=UN1(F);g5(this,X,J,K,F[U],U)}else Q=t7(Q,{depopulate:!0,transform:!1,virtuals:!1,getters:!1,omitUndefined:!0,_isNested:!0}),g5(this,X,J,K,Q)}if(W.length)return new rB1(W);if(this.$__.version)this.$__version(X,J);if(Object.keys(J).length===0)return[X,null];return[X,J]};i.prototype.$__version=function(Z,Y){const X=this.$__schema.options.versionKey;if(Z===!0){if(X)PN1(Y,X,0),this.$__setValue(X,0);return}if(X===!1)return;if(!this.$__isSelected(X))return;if((1&this.$__.version)===1){const J=this.$__getValue(X);if(J!=null)Z[X]=J}if((2&this.$__.version)===2)if(z$(Y.$set,X,null)!=null)++Y.$set[X];else Y.$inc=Y.$inc||{},Y.$inc[X]=1};/*!
 * ignore
 */i.prototype.increment=iQ;i.prototype.$__where=function Z(Y){if(Y||(Y={}),!Y._id)Y._id=this._doc._id;if(this._doc._id===void 0)return new L1("No _id found on document!");return Y};i.prototype.deleteOne=function Z(Y){if(typeof Y==="function"||typeof arguments[1]==="function")throw new L1("Model.prototype.deleteOne() no longer accepts a callback");if(!Y)Y={};if(Y.hasOwnProperty("session"))this.$session(Y.session);const X=this,J=this.$__where();if(J instanceof Error)throw J;const $=X.constructor.deleteOne(J,Y);if(this.$session()!=null){if(!("session"in $.options))$.options.session=this.$session()}return $.pre(function W(G){X.constructor._middleware.execPre("deleteOne",X,[X],G)}),$.pre(function W(G){OM(X.$getAllSubdocs(),(K,Q)=>{K.constructor._middleware.execPre("deleteOne",K,[K],Q)},G)}),$.pre(function W(G){if(X.$__.isDeleted)return G(tB1.skipWrappedFunction());return G()}),$.post(function W(G){OM(X.$getAllSubdocs(),(K,Q)=>{K.constructor._middleware.execPost("deleteOne",K,[K],{},Q)},G)}),$.post(function W(G){X.constructor._middleware.execPost("deleteOne",X,[X],{},G)}),$};i.prototype.$model=function Z(Y){if(arguments.length===0)return this.constructor;return this[xM].model(Y)};i.prototype.model=i.prototype.$model;i.exists=function Z(Y,X){if(T1(this,"exists"),typeof arguments[2]==="function")throw new L1("Model.exists() no longer accepts a callback");return this.findOne(Y).select({_id:1}).lean().setOptions(X)};i.discriminator=function(Z,Y,X){let J;if(typeof Z==="function"){if(J=Z,Z=m1.getFunctionName(J),!(J.prototype instanceof i))throw new L1("The provided class "+Z+" must extend Model")}X=X||{};const $=m1.isPOJO(X)?X.value:X,W=typeof X.clone==="boolean"?X.clone:!0,G=typeof X.mergePlugins==="boolean"?X.mergePlugins:!0;if(T1(this,"discriminator"),m1.isObject(Y)&&!Y.instanceOfSchema)Y=new EM(Y);if(Y instanceof EM&&W)Y=Y.clone();if(Y=FN1(this,Z,Y,$,G,X.mergeHooks),this.db.models[Z]&&!Y.options.overwriteModels)throw new eB1(Z);Y.$isRootDiscriminator=!0,Y.$globalPluginsApplied=!0,J=this.db.model(J||Z,Y,this.$__collection.name),this.discriminators[Z]=J;const K=this.discriminators[Z];if(Object.setPrototypeOf(K.prototype,this.prototype),Object.defineProperty(K,"baseModelName",{value:this.modelName,configurable:!0,writable:!1}),ap(K,Y),rp(K,Y),this[Q$]!=null)for(let Q of this[Q$])Q.discriminators=Q.discriminators||{},Q.discriminators[Z]=J.__subclass(J.db,Y,Q.collection.name);return K};/*!
 * Give the constructor the ability to emit events.
 */for(let Z in jM.prototype)i[Z]=jM.prototype[Z];i.init=function Z(){if(T1(this,"init"),typeof arguments[0]==="function")throw new L1("Model.init() no longer accepts a callback");if(this.schema.emit("init",this),this.$init!=null)return this.$init;const Y=this.db,X=async()=>{if(!m1.getOption("autoIndex",this.schema.options,Y.config,Y.base.options))return;return await this.ensureIndexes({_automatic:!0})},J=async()=>{if((Y.readyState===cp.connecting||Y.readyState===cp.disconnected)&&Y._shouldBufferCommands())await new Promise((K)=>{Y._queue.push({fn:K})});if(!m1.getOption("autoCreate",this.schema.options,Y.config,Y.base.options))return;return await this.createCollection()};this.$init=J().then(()=>X());const $=this.$init.catch,W=this;return this.$init.catch=function(){return W.$caught=!0,$.apply(W.$init,arguments)},this.$init};i.createCollection=async function Z(Y){if(T1(this,"createCollection"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new L1("Model.createCollection() no longer accepts a callback");const X=this&&this.schema&&this.schema.options&&this.schema.options.collectionOptions;if(X!=null)Y=Object.assign({},X,Y);const J=this&&this.schema&&this.schema.options&&this.schema.options.collation;if(J!=null)Y=Object.assign({collation:J},Y);const $=this&&this.schema&&this.schema.options&&this.schema.options.capped;if($!=null){if(typeof $==="number")Y=Object.assign({capped:!0,size:$},Y);else if(typeof $==="object")Y=Object.assign({capped:!0},$,Y)}const W=this&&this.schema&&this.schema.options&&this.schema.options.timeseries;if(W!=null){if(Y=Object.assign({timeseries:W},Y),Y.expireAfterSeconds!=null);else if(Y.expires!=null)m1.expires(Y);else if(this.schema.options.expireAfterSeconds!=null)Y.expireAfterSeconds=this.schema.options.expireAfterSeconds;else if(this.schema.options.expires!=null)Y.expires=this.schema.options.expires,m1.expires(Y)}const G=this&&this.schema&&this.schema.options&&this.schema.options.clusteredIndex;if(G!=null)Y=Object.assign({clusteredIndex:{...G,unique:!0}},Y);try{await this.db.createCollection(this.$__collection.collectionName,Y)}catch(K){if(K!=null&&(K.name!=="MongoServerError"||K.code!==48))throw K}return this.$__collection};i.syncIndexes=async function Z(Y){if(T1(this,"syncIndexes"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new L1("Model.syncIndexes() no longer accepts a callback");const X=this;try{await X.createCollection()}catch(W){if(W!=null&&(W.name!=="MongoServerError"||W.code!==48))throw W}const J=await X.diffIndexes(),$=await X.cleanIndexes({...Y,toDrop:J.toDrop});return await X.createIndexes({...Y,toCreate:J.toCreate}),$};i.diffIndexes=async function Z(){if(typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new L1("Model.syncIndexes() no longer accepts a callback");const Y=this;let X=await Y.listIndexes().catch((K)=>{if(K.codeName=="NamespaceNotFound")return;throw K});if(X===void 0)X=[];X=LN1(Y,X);const J=Y.schema,$=wN1(Y,J.indexes()),W=kN1(J,$,X),G=SN1(J,$,X,W);return{toDrop:W,toCreate:G}};i.cleanIndexes=async function Z(Y){if(T1(this,"cleanIndexes"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new L1("Model.cleanIndexes() no longer accepts a callback");const X=this,J=X.$__collection;if(Array.isArray(Y&&Y.toDrop))return await pp(Y.toDrop,J);const $=await X.diffIndexes();return await pp($.toDrop,J)};i.listIndexes=async function Z(){if(T1(this,"listIndexes"),typeof arguments[0]==="function")throw new L1("Model.listIndexes() no longer accepts a callback");if(this.$__collection.buffer)await new Promise((Y)=>{this.$__collection.addQueue(Y)});return this.$__collection.listIndexes().toArray()};i.ensureIndexes=async function Z(Y){if(T1(this,"ensureIndexes"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new L1("Model.ensureIndexes() no longer accepts a callback");await new Promise((X,J)=>{_N1(this,Y,($)=>{if($!=null)return J($);X()})})};i.createIndexes=async function Z(Y){if(T1(this,"createIndexes"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new L1("Model.createIndexes() no longer accepts a callback");return this.ensureIndexes(Y)};/*!
 * ignore
 */i.schema;i.db;i.collection;i.$__collection;i.base;i.discriminators;i.translateAliases=function Z(Y,X){T1(this,"translateAliases");const J=($,W)=>{let G;const K=[],Q=$.split(".");let z=this.schema;for(let F in Q){const U=Q[F];if(z&&z.aliases[U]){if(G=z.aliases[U],X&&(G in Y))throw new L1(`Provided object has both field "${U}" and its alias "${G}"`);K.push(G)}else G=U,K.push(U);if(z&&z.paths[G])z=z.paths[G].schema;else z=null}const H=K.join(".");if(Y instanceof Map)Y.set(H,W);else Y[H]=W;if(H!==$)if(Y instanceof Map)Y.delete($);else delete Y[$];return Y};if(typeof Y==="object"){if(Y instanceof Map)for(let $ of new Map(Y))Y=J($[0],$[1]);else for(let $ of Object.keys(Y))if(Y=J($,Y[$]),$[0]==="$")if(Array.isArray(Y[$]))for(let W in Y[$])Y[$][W]=this.translateAliases(Y[$][W]);else this.translateAliases(Y[$]);return Y}else return Y};i.deleteOne=function Z(Y,X){if(T1(this,"deleteOne"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new L1("Model.prototype.deleteOne() no longer accepts a callback");const J=new this.Query({},{},this,this.$__collection);return J.setOptions(X),J.deleteOne(Y)};i.deleteMany=function Z(Y,X){if(T1(this,"deleteMany"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new L1("Model.deleteMany() no longer accepts a callback");const J=new this.Query({},{},this,this.$__collection);return J.setOptions(X),J.deleteMany(Y)};i.find=function Z(Y,X,J){if(T1(this,"find"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function"||typeof arguments[3]==="function")throw new L1("Model.find() no longer accepts a callback");const $=new this.Query({},{},this,this.$__collection);return $.select(X),$.setOptions(J),$.find(Y)};i.findById=function Z(Y,X,J){if(T1(this,"findById"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new L1("Model.findById() no longer accepts a callback");if(typeof Y==="undefined")Y=null;return this.findOne({_id:Y},X,J)};i.findOne=function Z(Y,X,J){if(T1(this,"findOne"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new L1("Model.findOne() no longer accepts a callback");const $=new this.Query({},{},this,this.$__collection);return $.select(X),$.setOptions(J),$.findOne(Y)};i.estimatedDocumentCount=function Z(Y){return T1(this,"estimatedDocumentCount"),new this.Query({},{},this,this.$__collection).estimatedDocumentCount(Y)};i.countDocuments=function Z(Y,X){if(T1(this,"countDocuments"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new L1("Model.countDocuments() no longer accepts a callback");const J=new this.Query({},{},this,this.$__collection);if(X!=null)J.setOptions(X);return J.countDocuments(Y)};i.distinct=function Z(Y,X){if(T1(this,"distinct"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new L1("Model.distinct() no longer accepts a callback");return new this.Query({},{},this,this.$__collection).distinct(Y,X)};i.where=function Z(Y,X){T1(this,"where");const J=new this.Query({},{},this,this.$__collection).find({});return J.where.apply(J,arguments)};i.$where=function Z(){T1(this,"$where");const Y=new this.Query({},{},this,this.$__collection).find({});return Y.$where.apply(Y,arguments)};i.findOneAndUpdate=function(Z,Y,X){if(T1(this,"findOneAndUpdate"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function"||typeof arguments[3]==="function")throw new L1("Model.findOneAndUpdate() no longer accepts a callback");if(arguments.length===1)Y=Z,Z=null,X=null;let J;if(X)J=X.fields||X.projection;Y=t7(Y,{depopulate:!0,_isNested:!0}),op(Y,X,this.schema.options.versionKey);const $=new this.Query({},{},this,this.$__collection);return $.select(J),$.findOneAndUpdate(Z,Y,X)};i.findByIdAndUpdate=function(Z,Y,X){if(T1(this,"findByIdAndUpdate"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function"||typeof arguments[3]==="function")throw new L1("Model.findByIdAndUpdate() no longer accepts a callback");if(Z instanceof e9)Z=Z._id;return this.findOneAndUpdate.call(this,{_id:Z},Y,X)};i.findOneAndDelete=function(Z,Y){if(T1(this,"findOneAndDelete"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new L1("Model.findOneAndDelete() no longer accepts a callback");let X;if(Y)X=Y.select,Y.select=void 0;const J=new this.Query({},{},this,this.$__collection);return J.select(X),J.findOneAndDelete(Z,Y)};i.findByIdAndDelete=function(Z,Y){if(T1(this,"findByIdAndDelete"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new L1("Model.findByIdAndDelete() no longer accepts a callback");return this.findOneAndDelete({_id:Z},Y)};i.findOneAndReplace=function(Z,Y,X){if(T1(this,"findOneAndReplace"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function"||typeof arguments[3]==="function")throw new L1("Model.findOneAndReplace() no longer accepts a callback");let J;if(X)J=X.select,X.select=void 0;const $=new this.Query({},{},this,this.$__collection);return $.select(J),$.findOneAndReplace(Z,Y,X)};i.create=async function Z(Y,X){if(typeof X==="function"||typeof arguments[2]==="function")throw new L1("Model.create() no longer accepts a callback");T1(this,"create");let J;const $=this.schema.options.discriminatorKey;if(Array.isArray(Y))J=Y,X=X!=null&&typeof X==="object"?X:{};else{const K=arguments[arguments.length-1];if(X={},typeof K==="function"||typeof X==="function"||typeof arguments[2]==="function")throw new L1("Model.create() no longer accepts a callback");else if(J=[...arguments],J.length>1&&!K)J.pop();if(J.length===2&&J[0]!=null&&J[1]!=null&&J[0].session==null&&K&&VN1(K.session)==="ClientSession"&&!this.schema.path("session"))m1.warn("WARNING: to pass a `session` to `Model.create()` in Mongoose, you **must** pass an array as the first argument. See: https://mongoosejs.com/docs/api/model.html#Model.create()")}if(J.length===0)return Array.isArray(Y)?[]:null;let W=[];const G=typeof X.aggregateErrors==="boolean"?!X.aggregateErrors:!0;if(delete X.aggregateErrors,X.ordered){for(let K=0;K<J.length;K++)try{const Q=J[K],z=this.discriminators&&Q[$]!=null?this.discriminators[Q[$]]||pQ(this.discriminators,Q[$]):this;if(z==null)throw new L1(`Discriminator "${Q[$]}" not `+`found for model "${this.modelName}"`);let H=Q;if(!(H instanceof z))H=new z(H);await H.$save(X),W.push(H)}catch(Q){if(!G)W.push(Q);else throw Q}return W}else if(!G)W=await Promise.allSettled(J.map(async(K)=>{const Q=this.discriminators&&K[$]!=null?this.discriminators[K[$]]||pQ(this.discriminators,K[$]):this;if(Q==null)throw new L1(`Discriminator "${K[$]}" not `+`found for model "${this.modelName}"`);let z=K;if(!(z instanceof Q))z=new Q(z);return await z.$save(X),z})),W=W.map((K)=>K.status==="fulfilled"?K.value:K.reason);else{let K=null;if(W=await Promise.all(J.map(async(Q)=>{const z=this.discriminators&&Q[$]!=null?this.discriminators[Q[$]]||pQ(this.discriminators,Q[$]):this;if(z==null)throw new L1(`Discriminator "${Q[$]}" not `+`found for model "${this.modelName}"`);try{let H=Q;if(!(H instanceof z))H=new z(H);return await H.$save(X),H}catch(H){if(!K)K=H}})),K)throw K}if(!Array.isArray(Y)&&J.length===1)return W[0];return W};i.watch=function(Z,Y){T1(this,"watch");const X=(J)=>{if(Z=Z||[],AN1(Z,this.schema,"fullDocument"),this.$__collection.buffer)this.$__collection.addQueue(()=>{if(this.closed)return;const $=this.$__collection.watch(Z,Y);J(null,$)});else{const $=this.$__collection.watch(Z,Y);J(null,$)}};return Y=Y||{},Y.model=this,new aB1(X,Z,Y)};i.startSession=function(){return T1(this,"startSession"),this.db.startSession.apply(this.db,arguments)};i.insertMany=async function Z(Y,X){if(T1(this,"insertMany"),typeof X==="function"||typeof arguments[2]==="function")throw new L1("Model.insertMany() no longer accepts a callback");return new Promise((J,$)=>{this.$__insertMany(Y,X,(W,G)=>{if(W!=null)return $(W);J(G)})})};i.$__insertMany=function(Z,Y,X){const J=this;if(typeof Y==="function")X=Y,Y=null;X=X||m1.noop,Y=Y||{};const $=Y.limit||1000,W=!!Y.rawResult,G=typeof Y.ordered==="boolean"?Y.ordered:!0,K=typeof Y.throwOnValidationError==="boolean"?Y.throwOnValidationError:!1,Q=!!Y.lean;if(!Array.isArray(Z))Z=[Z];const z=[],H=new Map,F=G?null:new Array(Z.length),U=Z.map((V,q)=>(L)=>{if(!(V instanceof J))try{V=new J(V)}catch(R){return L(R)}if(Y.session!=null)V.$session(Y.session);if(Q)return H$(()=>L(null,V));V.$validate().then(()=>{L(null,V)},(R)=>{if(G===!1)return z.push(R),H.set(R,q),F[q]=R,L(null,null);L(R)})});BN1(U,$,function(V,q){if(V){X(V,null);return}const L=new Map,R=new Map;for(let M=0;M<q.length;++M)L.set(q[M],M);const B=q.filter(function(M){return M!=null});for(let M=0;M<B.length;++M)R.set(M,L.get(B[M]));if(z.length>0)z.sort((M,D)=>{return H.get(M)-H.get(D)});if(B.length===0){if(W)return X(null,{acknowledged:!0,insertedCount:0,insertedIds:{},mongoose:{validationErrors:z}});X(null,[]);return}const N=B.map(function(M){if(M.$__schema.options.versionKey)M[M.$__schema.options.versionKey]=0;if((!Y||Y.timestamps!==!1)&&M.initializeTimestamps&&(!M.$__||M.$__.timestamps!==!1))return M.initializeTimestamps().toObject(nQ);return M.toObject(nQ)});J.$__collection.insertMany(N,Y).then((M)=>{for(let D of B)D.$__reset(),wX(D,!1);if(G===!1&&K&&z.length>0){for(let D=0;D<F.length;++D)if(F[D]===void 0)F[D]=q[D];return X(new Yi(z,F,M,"insertMany"))}if(W){if(G===!1){for(let D=0;D<F.length;++D)if(F[D]===void 0)F[D]=q[D];M.mongoose={validationErrors:z,results:F}}return X(null,M)}if(Y.populate!=null)return J.populate(B,Y.populate).then((D)=>{X(null,D)},(D)=>{if(D!=null)D.insertedDocs=B;throw D});X(null,B)},(M)=>{if(M.writeErrors==null&&(M.result&&M.result.result&&M.result.result.writeErrors)!=null)M.writeErrors=M.result.result.writeErrors;const D=M&&M.writeErrors,m=new Set((M&&M.writeErrors||[]).map((E)=>E.index));if(M.writeErrors!=null)for(let E=0;E<M.writeErrors.length;++E){const j=R.get(M.writeErrors[E].index);if(M.writeErrors[E]={...M.writeErrors[E],index:j},!G)F[j]=M.writeErrors[E]}if(!G){for(let E=0;E<F.length;++E)if(F[E]===void 0)F[E]=q[E];M.results=F}let O=-1;if(M.insertedDocs=B.filter((E,j)=>{const n=!D||m.has(j);if(G){if(O>-1)return j<O;if(n)O=j}return!n}).map(function E(j){return j.$__reset(),wX(j,!1),j}),W&&G===!1)M.mongoose={validationErrors:z,results:F};X(M,null)})})};/*!
 * ignore
 */i.bulkWrite=async function Z(Y,X){if(T1(this,"bulkWrite"),typeof X==="function"||typeof arguments[2]==="function")throw new L1("Model.bulkWrite() no longer accepts a callback");X=X||{};const J=X.ordered==null?!0:X.ordered,$=Y.map((W)=>QN1(this,W,X));return new Promise((W,G)=>{if(J){OM($,(U,V)=>U(V),(U)=>{if(U)return G(U);if(Y.length===0)return W(up());try{this.$__collection.bulkWrite(Y,X,(V,q)=>{if(V)return G(V);W(q)})}catch(V){return G(V)}});return}let K=$.length,Q=[],z=[];const H=[];if(K===0)F.call(this);else for(let U=0;U<$.length;++U)$[U]((V)=>{if(V==null)Q.push(U);else z.push({index:U,error:V}),H[U]=V;if(--K<=0)F.call(this)});z=z.sort((U,V)=>U.index-V.index).map((U)=>U.error);function F(){const U=Q;if(Q=Q.sort().map((V)=>Y[V]),Q.length===0)return W(up());this.$__collection.bulkWrite(Q,X,(V,q)=>{if(V){if(z.length>0)V.mongoose=V.mongoose||{},V.mongoose.validationErrors=z;return G(V)}for(let L=0;L<U.length;++L)H[U[L]]=null;if(z.length>0)if(X.throwOnValidationError)return G(new Yi(z,H,q,"bulkWrite"));else q.mongoose=q.mongoose||{},q.mongoose.validationErrors=z,q.mongoose.results=H;W(q)})}})};i.bulkSave=async function Z(Y,X){if(X=X||{},X.timestamps!=null)for(let G of Y)G.$__.saveOptions=G.$__.saveOptions||{},G.$__.saveOptions.timestamps=X.timestamps;else for(let G of Y)if(G.$__.timestamps!=null)G.$__.saveOptions=G.$__.saveOptions||{},G.$__.saveOptions.timestamps=G.$__.timestamps;await Promise.all(Y.map(xN1));const J=this.buildBulkWriteOperations(Y,{skipValidation:!0,timestamps:X.timestamps}),{bulkWriteResult:$,bulkWriteError:W}=await this.bulkWrite(J,X).then((G)=>({bulkWriteResult:G,bulkWriteError:null}),(G)=>({bulkWriteResult:null,bulkWriteError:G}));if(await Promise.all(Y.map(async(G)=>{if((W&&W.writeErrors.find((Q)=>{return(Q.err.op._id||Q.err.op.q._id).toString()===G._id.toString()}))==null)await fN1(G)})),W&&W.writeErrors&&W.writeErrors.length)throw W;return $};i.applyDefaults=function Z(Y){if(Y.$__!=null){YN1(Y,Y.$__.fields,Y.$__.exclude);for(let X of Y.$getAllSubdocs())Z(X,X.$__.fields,X.$__.exclude);return Y}return XN1(Y,this.schema),Y};i.castObject=function Z(Y,X){X=X||{};const J={},$=this.schema,W=Object.keys($.paths);for(let K of W){const Q=$.path(K);if(!Q||!Q.$isMongooseArray)continue;const z=z$(Y,K);Zi(W,z,K)}let G=null;for(let K of W){const Q=$.path(K);if(Q==null)continue;let z=z$(Y,K,void 0);if(z==null)continue;const H=K.indexOf(".")===-1?[K]:K.split(".");let F=J;for(let U=0;U<H.length-1;++U){if(F[H[U]]==null)F[H[U]]=isNaN(H[U+1])?{}:[];F=F[H[U]]}if(Q.$isMongooseDocumentArray)continue;if(Q.$isSingleNested||Q.$isMongooseDocumentArrayElement){try{z=i.castObject.call(Q.caster,z)}catch(U){if(!X.ignoreCastErrors)G=G||new CM,G.addError(K,U);continue}F[H[H.length-1]]=z;continue}try{z=Q.cast(z),F[H[H.length-1]]=z}catch(U){if(!X.ignoreCastErrors)G=G||new CM,G.addError(K,U);continue}}if(G!=null)throw G;return J};i.buildBulkWriteOperations=function Z(Y,X){if(!Array.isArray(Y))throw new Error(`bulkSave expects an array of documents to be passed, received \`${Y}\` instead`);W();const J=this.schema.options.discriminatorKey;return Y.reduce((G,K,Q)=>{if(!X.skipValidation){if(!(K instanceof e9))throw new Error(`documents.${Q} was not a mongoose document, documents must be an array of mongoose documents (instanceof mongoose.Document).`);const U=K.validateSync();if(U)throw U}if(K.isNew){const U={insertOne:{document:K}};return m1.injectTimestampsOption(U.insertOne,X.timestamps),G.push(U),G}const H=K.$__delta();if(H!=null&&!m1.isEmptyObject(H[0])){const U=K.$__where(H[0]),V=H[1];if(Ji(K,U),K[J]!=null&&!(J in U))U[J]=K[J];K.$__version(U,H);const q={updateOne:{filter:U,update:V}};return m1.injectTimestampsOption(q.updateOne,X.timestamps),G.push(q),G}return G},[]);function W(){if(X=X||{},X.skipValidation==null)X.skipValidation=!1}};i.hydrate=function(Z,Y,X){if(T1(this,"hydrate"),Y!=null){if(Z!=null&&Z.$__!=null)Z=Z.toObject(nQ);Z=WN1(Z,Y)}const J=lY().createModel(this,Z,Y);return J.$init(Z,X),J};i.updateMany=function Z(Y,X,J){return T1(this,"updateMany"),fM(this,"updateMany",Y,X,J)};i.updateOne=function Z(Y,X,J){return T1(this,"updateOne"),fM(this,"updateOne",Y,X,J)};i.replaceOne=function Z(Y,X,J){T1(this,"replaceOne");const $=this&&this.schema&&this.schema.options&&this.schema.options.versionKey||null;if($&&!X[$])X[$]=0;return fM(this,"replaceOne",Y,X,J)};i.aggregate=function Z(Y,X){if(T1(this,"aggregate"),typeof X==="function"||typeof arguments[2]==="function")throw new L1("Model.aggregate() no longer accepts a callback");const J=new nB1(Y||[]);if(J.model(this),X!=null)J.option(X);if(typeof callback==="undefined")return J;return J};i.validate=async function Z(Y,X,J){if(arguments.length<3||arguments.length===3&&typeof arguments[2]==="function")J=Y;if(typeof J==="function"||typeof arguments[3]==="function")throw new L1("Model.validate() no longer accepts a callback");let $=this.schema;const W=$.options.discriminatorKey;if($.discriminators!=null&&Y!=null&&Y[W]!=null)$=HN1($,Y[W])||$;let G=Object.keys($.paths);if(X!=null){const z=typeof X==="string"?new Set(X.split(" ")):Array.isArray(X)?new Set(X):new Set(G);G=G.filter((H)=>{if(X.pathsToSkip){if(Array.isArray(X.pathsToSkip)){if(X.pathsToSkip.find((V)=>V==H))return!1}else if(typeof X.pathsToSkip=="string"){if(X.pathsToSkip.includes(H))return!1}}const F=H.split(".");let U=F[0];for(let V of F){if(z.has(U))return!0;U+="."+V}return z.has(H)})}for(let z of G){const H=$.path(z);if(!H||!H.$isMongooseArray||H.$isMongooseDocumentArray)continue;const F=z$(Y,z);Zi(G,F,z)}let K=null;G=new Set(G);try{Y=this.castObject(Y)}catch(z){K=z;for(let H of Object.keys(K.errors||{}))G.delete(H)}let Q=G.size;return new Promise((z,H)=>{for(let U of G){const V=$.path(U);if(V==null){F();continue}const q=U.indexOf(".")===-1?[U]:U.split(".");let L=Y;for(let B=0;B<q.length-1;++B)L=L[q[B]];const R=z$(Y,U,void 0);V.doValidate(R,(B)=>{if(B)K=K||new CM,K.addError(U,B);F()},J,{path:U})}function F(){if(--Q<=0)if(K)H(K);else z(Y)}})};i.populate=async function Z(Y,X){if(T1(this,"populate"),typeof X==="function"||typeof arguments[2]==="function")throw new L1("Model.populate() no longer accepts a callback");const J=this;X=m1.populate(X);const $={};return new Promise((W,G)=>{yN1(J,Y,X,$,(K,Q)=>{if(K)return G(K);W(Q)})})};/*!
 * Populates `docs`
 */var gN1=/\s?-_id\s?/,bN1=/\s?-_id\s?/g;/*!
 * ignore
 *//*!
 * ignore
 */i.compile=function Z(Y,X,J,$,W){if(X.options.versionKey!==!1&&!X.paths[X.options.versionKey]){const F={};F[X.options.versionKey]=Number,X.add(F)}let K;if(typeof Y==="function"&&Y.prototype instanceof i)K=Y,Y=K.name,X.loadClass(K,!1),K.prototype.$isMongooseModelPrototype=!0;else K=function F(U,V,q){if(F.hooks.execPreSync("createModel",U),!(this instanceof F))return new F(U,V,q);const L=F.schema.options.discriminatorKey;if(F.discriminators==null||U==null||U[L]==null){i.call(this,U,V,q);return}const R=F.discriminators[U[L]]||pQ(F.discriminators,U[L]);if(R!=null)return new R(U,V,q);i.call(this,U,V,q)};if(K.hooks=X.s.hooks.clone(),K.base=W,K.modelName=Y,!(K.prototype instanceof i))Object.setPrototypeOf(K,i),Object.setPrototypeOf(K.prototype,i.prototype);K.model=function F(U){return this.db.model(U)},K.db=$,K.prototype.db=$,K.prototype[xM]=$,K.discriminators=K.prototype.discriminators=void 0,K[Xi]=!0,K.events=new jM,X._preCompile();const z={schemaUserProvidedOptions:X._userProvidedOptions||{},capped:X.options.capped,Promise:K.base.Promise,modelName:Y};if(X.options.autoCreate!==void 0)z.autoCreate=X.options.autoCreate;const H=$.collection(J,z);return K.prototype.collection=H,K.prototype.$collection=H,K.prototype[aQ]=H,K.prototype.$__setSchema(X),ap(K,X),rp(K,X),$N1(K,X),GN1(K,X.s.hooks,X.statics),K.schema=K.prototype.$__schema,K.collection=H,K.$__collection=H,K.Query=function(){lQ.apply(this,arguments)},Object.setPrototypeOf(K.Query.prototype,lQ.prototype),K.Query.base=lQ.base,K.Query.prototype.constructor=lQ,JN1(K.Query,K),mN1(K,X.query),K};i.__subclass=function Z(Y,X,J){const $=this,W=function H(F,U,V){if(!(this instanceof H))return new H(F,U,V);$.call(this,F,U,V)};if(Object.setPrototypeOf(W,$),Object.setPrototypeOf(W.prototype,$.prototype),W.db=Y,W.prototype.db=Y,W.prototype[xM]=Y,$[Q$]=$[Q$]||[],$[Q$].push(W),$.discriminators!=null){W.discriminators={};for(let H of Object.keys($.discriminators))W.discriminators[H]=$.discriminators[H].__subclass($.db,$.discriminators[H].schema,J)}const G=X&&typeof X!=="string"?X:$.prototype.$__schema,K=G.options||{},Q=G._userProvidedOptions||{};if(!J)J=$.prototype.$__schema.get("collection")||m1.toCollectionName($.modelName,this.base.pluralize());const z={schemaUserProvidedOptions:Q,capped:G&&K.capped};return W.prototype.collection=Y.collection(J,z),W.prototype.$collection=W.prototype.collection,W.prototype[aQ]=W.prototype.collection,W.collection=W.prototype.collection,W.$__collection=W.collection,W.init().catch(()=>{}),W};i.inspect=function(){return`Model { ${this.modelName} }`};if(lp.inspect.custom)i[lp.inspect.custom]=i.inspect;/*!
 * Module exports.
 */Wi.exports=$i=i});var Ki=w((F$,Gi)=>{var cN1=function(Z){let Y;if(Z=Z.toLowerCase(),!~dN1.indexOf(Z)){if(Y=uN1.filter(function(X){return Z.match(X[0])}),Y[0])return Z.replace(Y[0][0],Y[0][1])}return Z};Gi.exports=cN1;F$.pluralization=[[/human$/gi,"humans"],[/(m)an$/gi,"$1en"],[/(pe)rson$/gi,"$1ople"],[/(child)$/gi,"$1ren"],[/^(ox)$/gi,"$1en"],[/(ax|test)is$/gi,"$1es"],[/(octop|vir)us$/gi,"$1i"],[/(alias|status)$/gi,"$1es"],[/(bu)s$/gi,"$1ses"],[/(buffal|tomat|potat)o$/gi,"$1oes"],[/([ti])um$/gi,"$1a"],[/sis$/gi,"ses"],[/(?:([^f])fe|([lr])f)$/gi,"$1$2ves"],[/(hive)$/gi,"$1s"],[/([^aeiouy]|qu)y$/gi,"$1ies"],[/(x|ch|ss|sh)$/gi,"$1es"],[/(matr|vert|ind)ix|ex$/gi,"$1ices"],[/([m|l])ouse$/gi,"$1ice"],[/(kn|w|l)ife$/gi,"$1ives"],[/(quiz)$/gi,"$1zes"],[/^goose$/i,"geese"],[/s$/gi,"s"],[/([^a-z])$/,"$1"],[/$/gi,"s"]];var uN1=F$.pluralization;F$.uncountables=["advice","energy","excretion","digestion","cooperation","health","justice","labour","machinery","equipment","information","pollution","sewage","paper","money","species","series","rain","rice","fish","sheep","moose","deer","news","expertise","status","media"];var dN1=F$.uncountables});var Vi=w((Pf1,Ui)=>{/*!
 * Module requirements
 */var Hi=W0(),Qi=import.meta.require("util"),zi=aq();class b5 extends Hi{constructor(){super("");this.errors={}}toString(){return zi(this)}inspect(){return Object.assign(new Error(this.message),this)}addError(Z,Y){if(Y instanceof b5){const{errors:X}=Y;for(let J of Object.keys(X))this.addError(J,X[J]);return}this.errors[Z]=Y,this.message=zi(this)}}if(Qi.inspect.custom)b5.prototype[Qi.inspect.custom]=b5.prototype.inspect;Object.defineProperty(b5.prototype,"toJSON",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}});Object.defineProperty(b5.prototype,"name",{value:"SetOptionError"});class Fi extends Hi{constructor(Z){super(`"${Z}" is not a valid option to set`)}}b5.SetOptionInnerError=Fi;/*!
 * Module exports
 */Ui.exports=b5});var Li=w(()=>{var qi=G1();if(typeof jest!=="undefined"&&!process.env.SUPPRESS_JEST_WARNINGS){if(typeof window!=="undefined")qi.warn("Mongoose: looks like you\'re trying to test a Mongoose app with Jest\'s default jsdom test environment. Please make sure you read Mongoose\'s docs on configuring Jest to test Node.js apps: https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true to hide this warning.");if(setTimeout.clock!=null&&typeof setTimeout.clock.Date==="function")qi.warn("Mongoose: looks like you\'re trying to test a Mongoose app with Jest\'s mock timers enabled. Please make sure you read Mongoose\'s docs on configuring Jest to test Node.js apps: https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true to hide this warning.")}});var Ai=w((Bi,Ni)=>{var o6=function(Z,Y,X,J,$){if(!(this instanceof o6))return new o6(Z,Y,X,J,$);if(aN1(Y)&&!Y.instanceOfSchema)Y=new lN1(Y);if(Y=this.schema||Y,!this.schema&&Y.options._id){if(Z=Z||{},Z._id===void 0)Z._id=new pN1}if(!Y)throw new Mi.MissingSchemaError;this.$__setSchema(Y),wi.call(this,Z,X,J,$),nN1(this,Y,{decorateDoc:!0});for(let W in Y.methods)this[W]=Y.methods[W];for(let W in Y.statics)this[W]=Y.statics[W]};/*!
 * Module dependencies.
 */var wi=o8(),Ri=import.meta.require("events").EventEmitter,Mi=n1(),lN1=nY(),pN1=U4(),iN1=Mi.ValidationError,nN1=hK(),aN1=o4();/*!
 * Inherit from the NodeJS document
 */o6.prototype=Object.create(wi.prototype);o6.prototype.constructor=o6;/*!
 * ignore
 */o6.events=new Ri;/*!
 * Browser doc exposes the event emitter API
 */o6.$emitter=new Ri;["on","once","emit","listeners","removeListener","setMaxListeners","removeAllListeners","addListener"].forEach(function(Z){o6[Z]=function(){return o6.$emitter[Z].apply(o6.$emitter,arguments)}});/*!
 * Module exports.
 */o6.ValidationError=iN1;Ni.exports=Bi=o6});var Pi=w((jf1,yM)=>{/*!
 * Module dependencies.
 */var sN1=o8(),rN1=Ai(),Di=!1;yM.exports=function Z(){if(Di)return rN1;return sN1};/*!
 * ignore
 */yM.exports.setBrowser=function(Z){Di=Z}});var ki=w((Oi,Si)=>{var t=function(Z){this.connections=[],this.nextConnectionId=0,this.models={},this.events=new oN1,this.__driver=Ei.get(),this.options=Object.assign({pluralization:!0,autoIndex:!0,autoCreate:!0},Z);const Y=bM.getOption("createInitialConnection",this.options);if(Y==null||Y){const X=this.createConnection();X.models=this.models}if(this.options.pluralization)this._pluralize=WA1;if(!Z||!Z[Ci]){const X=this;this.Schema=function(){return this.base=X,h4.apply(this,arguments)},this.Schema.prototype=Object.create(h4.prototype),Object.assign(this.Schema,h4),this.Schema.base=this,this.Schema.Types=Object.assign({},h4.Types)}else for(let X of["Schema","model"])this[X]=t.prototype[X];this.Schema.prototype.base=this,Object.defineProperty(this,"plugins",{configurable:!1,enumerable:!0,writable:!1,value:Object.values($A1).map((X)=>[X,{deduplicate:!0}])})};/*!
 * Module dependencies.
 */var tN1=o8(),oN1=import.meta.require("events").EventEmitter,Ii=fY(),h4=nY(),eN1=i0(),U$=y3(),ZA1=Yw(),gM=cZ(),Ti=du(),YA1=rY(),XA1=kQ(),ji=HM(),JA1=VR(),$A1=gw(),Ei=r$(),WA1=Ki(),bM=G1(),GA1=wR(),KA1=oY(),QA1=zM(),zA1=dZ().trusted,HA1=rR(),FA1=u8(),rQ=W0(),sQ=Vi(),Ci=Symbol.for("mongoose:default");Li();var UA1=/^[0-9A-Fa-f]{24}$/;t.prototype.cast=KA1;t.prototype.STATES=gM;t.prototype.ConnectionStates=gM;t.prototype.driver=Ei;t.prototype.setDriver=function Z(Y){const X=this instanceof t?this:z8;if(X.__driver===Y)return X;if(X.connections&&X.connections.find((W)=>W.readyState!==gM.disconnected))throw new rQ("Cannot modify Mongoose driver if a connection is already open. Call `mongoose.disconnect()` before modifying the driver");X.__driver=Y;const $=Y.Connection;return X.connections=[new $(X)],X.connections[0].models=X.models,X};t.prototype.set=function(Z,Y){const X=this instanceof t?this:z8;if(arguments.length===1&&typeof Z!=="object"){if(Ti.indexOf(Z)===-1){const W=new sQ;throw W.addError(Z,new sQ.SetOptionInnerError(Z)),W}return X.options[Z]}let J={};if(arguments.length===2)J={[Z]:Y};if(arguments.length===1&&typeof Z==="object")J=Z;let $=void 0;for(let[W,G]of Object.entries(J)){if(Ti.indexOf(W)===-1){if(!$)$=new sQ;$.addError(W,new sQ.SetOptionInnerError(W));continue}if(X.options[W]=G,W==="objectIdGetter")if(G)Object.defineProperty(z8.Types.ObjectId.prototype,"_id",{enumerable:!1,configurable:!0,get:function(){return this}});else delete z8.Types.ObjectId.prototype._id}if($)throw $;return X};t.prototype.get=t.prototype.set;t.prototype.createConnection=function(Z,Y){const X=this instanceof t?this:z8,$=new X.__driver.Connection(X);if(X.connections.push($),X.nextConnectionId++,X.events.emit("createConnection",$),arguments.length>0)$.openUri(Z,{...Y,_fireAndForget:!0});return $};t.prototype.connect=async function Z(Y,X){if(typeof X==="function"||arguments.length>=3&&typeof arguments[2]==="function")throw new rQ("Mongoose.prototype.connect() no longer accepts a callback");const J=this instanceof t?this:z8;return J.connection.openUri(Y,X).then(()=>J)};t.prototype.disconnect=async function Z(){if(arguments.length>=1&&typeof arguments[0]==="function")throw new rQ("Mongoose.prototype.disconnect() no longer accepts a callback");const Y=this instanceof t?this:z8;if(Y.connections.length<=0)return;await Promise.all(Y.connections.map((J)=>J.close()))};t.prototype.startSession=function(){const Z=this instanceof t?this:z8;return Z.connection.startSession.apply(Z.connection,arguments)};t.prototype.pluralize=function(Z){const Y=this instanceof t?this:z8;if(arguments.length>0)Y._pluralize=Z;return Y._pluralize};t.prototype.model=function(Z,Y,X,J){const $=this instanceof t?this:z8;if(typeof Y==="string")X=Y,Y=!1;if(arguments.length===1){const Q=$.models[Z];if(!Q)throw new rQ.MissingSchemaError(Z);return Q}if(bM.isObject(Y)&&!(Y instanceof h4))Y=new h4(Y);if(Y&&!(Y instanceof h4))throw new Error("The 2nd parameter to `mongoose.model()` should be a schema or a POJO");J=J||{};const W=Y;if(Y){if($.get("cloneSchemas"))Y=Y.clone();$._applyPlugins(Y)}const G=$.options.hasOwnProperty("overwriteModels")?$.options.overwriteModels:J.overwriteModels;if($.models.hasOwnProperty(Z)&&J.cache!==!1&&G!==!0){if(W&&W.instanceOfSchema&&W!==$.models[Z].schema)throw new $.Error.OverwriteModelError(Z);if(X&&X!==$.models[Z].collection.name){const Q=$.models[Z];return Y=Q.prototype.schema,Q.__subclass($.connection,Y,X)}return $.models[Z]}if(Y==null)throw new $.Error.MissingSchemaError(Z);const K=$._model(Z,Y,X,J);return $.connection.models[Z]=K,$.models[Z]=K,K};/*!
 * ignore
 */t.prototype._model=function(Z,Y,X,J){const $=this instanceof t?this:z8;let W;if(typeof Z==="function"){if(W=Z,Z=W.name,!(W.prototype instanceof ji))throw new $.Error("The provided class "+Z+" must extend Model")}if(Y){if($.get("cloneSchemas"))Y=Y.clone();$._applyPlugins(Y)}if(Y==null||!("pluralization"in Y.options))Y.options.pluralization=$.options.pluralization;if(!X)X=Y.get("collection")||bM.toCollectionName(Z,$.pluralize());const G=J.connection||$.connection;if(W=$.Model.compile(W||Z,Y,X,G,$),W.init().catch(function K(){}),G.emit("model",W),Y._applyDiscriminators!=null)for(let K of Y._applyDiscriminators.keys())W.discriminator(K,Y._applyDiscriminators.get(K));return W};t.prototype.deleteModel=function(Z){const Y=this instanceof t?this:z8;return Y.connection.deleteModel(Z),delete Y.models[Z],Y};t.prototype.modelNames=function(){const Z=this instanceof t?this:z8;return Object.keys(Z.models)};t.prototype._applyPlugins=function(Z,Y){const X=this instanceof t?this:z8;Y=Y||{},Y.applyPluginsToDiscriminators=X.options&&X.options.applyPluginsToDiscriminators||!1,Y.applyPluginsToChildSchemas=typeof(X.options&&X.options.applyPluginsToChildSchemas)==="boolean"?X.options.applyPluginsToChildSchemas:!0,JA1(Z,X.plugins,Y,"$globalPluginsApplied")};t.prototype.plugin=function(Z,Y){const X=this instanceof t?this:z8;return X.plugins.push([Z,Y]),X};t.prototype.__defineGetter__("connection",function(){return this.connections[0]});t.prototype.__defineSetter__("connection",function(Z){if(Z instanceof this.__driver.Connection)this.connections[0]=Z,this.models=Z.models});t.prototype.connections;t.prototype.nextConnectionId;t.prototype.Aggregate=QA1;Object.defineProperty(t.prototype,"Collection",{get:function(){return this.__driver.Collection},set:function(Z){this.__driver.Collection=Z}});Object.defineProperty(t.prototype,"Connection",{get:function(){return this.__driver.Connection},set:function(Z){if(Z===this.__driver.Connection)return;this.__driver.Connection=Z}});t.prototype.version=GA1.version;t.prototype.Mongoose=t;t.prototype.Schema=h4;t.prototype.SchemaType=eN1;t.prototype.SchemaTypes=h4.Types;t.prototype.VirtualType=ZA1;t.prototype.Types=YA1;t.prototype.Query=XA1;t.prototype.Model=ji;t.prototype.Document=tN1;t.prototype.DocumentProvider=Pi();t.prototype.ObjectId=U$.ObjectId;t.prototype.isValidObjectId=function(Z){return(this instanceof t?this:z8).Types.ObjectId.isValid(Z)};t.prototype.isObjectIdOrHexString=function(Z){return FA1(Z,"ObjectId")||typeof Z==="string"&&UA1.test(Z)};t.prototype.syncIndexes=function(Z){return(this instanceof t?this:z8).connection.syncIndexes(Z)};t.prototype.Decimal128=U$.Decimal128;t.prototype.Mixed=U$.Mixed;t.prototype.Date=U$.Date;t.prototype.Number=U$.Number;t.prototype.Error=n1();t.prototype.MongooseError=W0();t.prototype.now=function Z(){return new Date};t.prototype.CastError=O8();t.prototype.SchemaTypeOptions=N6();t.prototype.mquery=nR();t.prototype.sanitizeFilter=HA1;t.prototype.trusted=zA1;t.prototype.skipMiddlewareFunction=Ii.skipWrappedFunction;t.prototype.overwriteMiddlewareResult=Ii.overwriteResult;var z8=Si.exports=Oi=new t({[Ci]:!0})});var fi=w((Ef1,xi)=>{/*!
 * Module dependencies.
 */r$().set(mu());var _i=ki();_i.Mongoose.prototype.mongo=JK();xi.exports=_i});var yi=w((Cf1,Q1)=>{var z1=fi();Q1.exports=z1;Q1.exports.default=z1;Q1.exports.mongoose=z1;Q1.exports.cast=z1.cast;Q1.exports.STATES=z1.STATES;Q1.exports.setDriver=z1.setDriver;Q1.exports.set=z1.set;Q1.exports.get=z1.get;Q1.exports.createConnection=z1.createConnection;Q1.exports.connect=z1.connect;Q1.exports.disconnect=z1.disconnect;Q1.exports.startSession=z1.startSession;Q1.exports.pluralize=z1.pluralize;Q1.exports.model=z1.model;Q1.exports.deleteModel=z1.deleteModel;Q1.exports.modelNames=z1.modelNames;Q1.exports.plugin=z1.plugin;Q1.exports.connections=z1.connections;Q1.exports.version=z1.version;Q1.exports.Mongoose=z1.Mongoose;Q1.exports.Schema=z1.Schema;Q1.exports.SchemaType=z1.SchemaType;Q1.exports.SchemaTypes=z1.SchemaTypes;Q1.exports.VirtualType=z1.VirtualType;Q1.exports.Types=z1.Types;Q1.exports.Query=z1.Query;Q1.exports.Model=z1.Model;Q1.exports.Document=z1.Document;Q1.exports.ObjectId=z1.ObjectId;Q1.exports.isValidObjectId=z1.isValidObjectId;Q1.exports.isObjectIdOrHexString=z1.isObjectIdOrHexString;Q1.exports.syncIndexes=z1.syncIndexes;Q1.exports.Decimal128=z1.Decimal128;Q1.exports.Mixed=z1.Mixed;Q1.exports.Date=z1.Date;Q1.exports.Number=z1.Number;Q1.exports.Error=z1.Error;Q1.exports.MongooseError=z1.MongooseError;Q1.exports.now=z1.now;Q1.exports.CastError=z1.CastError;Q1.exports.SchemaTypeOptions=z1.SchemaTypeOptions;Q1.exports.mongo=z1.mongo;Q1.exports.mquery=z1.mquery;Q1.exports.sanitizeFilter=z1.sanitizeFilter;Q1.exports.trusted=z1.trusted;Q1.exports.skipMiddlewareFunction=z1.skipMiddlewareFunction;Q1.exports.overwriteMiddlewareResult=z1.overwriteMiddlewareResult});var Aa=w((Na)=>{var YP1=function(Z){return function(Y,X){return new Promise((J,$)=>{Z.call(this,Y,X,(W,G)=>{if(W)$(W);else J(G)})})}};Object.defineProperty(Na,"__esModule",{value:!0});Na.default=YP1});var Ta=w((QN,Pa)=>{var GP1=function(Z){return Boolean(Z)&&typeof Z.addRequest==="function"},KN=function(){const{stack:Z}=new Error;if(typeof Z!=="string")return!1;return Z.split("\n").some((Y)=>Y.indexOf("(https.js:")!==-1||Y.indexOf("node:https:")!==-1)},nz=function(Z,Y){return new nz.Agent(Z,Y)},Da=QN&&QN.__importDefault||function(Z){return Z&&Z.__esModule?Z:{default:Z}},JP1=import.meta.require("events"),$P1=Da(r3()),WP1=Da(Aa()),c$=$P1.default("agent-base");(function(Z){class Y extends JP1.EventEmitter{constructor(X,J){super();let $=J;if(typeof X==="function")this.callback=X;else if(X)$=X;if(this.timeout=null,$&&typeof $.timeout==="number")this.timeout=$.timeout;this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=Infinity,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){if(typeof this.explicitDefaultPort==="number")return this.explicitDefaultPort;return KN()?443:80}set defaultPort(X){this.explicitDefaultPort=X}get protocol(){if(typeof this.explicitProtocol==="string")return this.explicitProtocol;return KN()?"https:":"http:"}set protocol(X){this.explicitProtocol=X}callback(X,J,$){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(X,J){const $=Object.assign({},J);if(typeof $.secureEndpoint!=="boolean")$.secureEndpoint=KN();if($.host==null)$.host="localhost";if($.port==null)$.port=$.secureEndpoint?443:80;if($.protocol==null)$.protocol=$.secureEndpoint?"https:":"http:";if($.host&&$.path)delete $.path;delete $.agent,delete $.hostname,delete $._defaultAgent,delete $.defaultPort,delete $.createConnection,X._last=!0,X.shouldKeepAlive=!1;let W=!1,G=null;const K=$.timeout||this.timeout,Q=(U)=>{if(X._hadError)return;X.emit("error",U),X._hadError=!0},z=()=>{G=null,W=!0;const U=new Error(`A "socket" was not created for HTTP request before ${K}ms`);U.code="ETIMEOUT",Q(U)},H=(U)=>{if(W)return;if(G!==null)clearTimeout(G),G=null;Q(U)},F=(U)=>{if(W)return;if(G!=null)clearTimeout(G),G=null;if(GP1(U)){c$("Callback returned another Agent instance %o",U.constructor.name),U.addRequest(X,$);return}if(U){U.once("free",()=>{this.freeSocket(U,$)}),X.onSocket(U);return}const V=new Error(`no Duplex stream was returned to agent-base for \`${X.method} ${X.path}\``);Q(V)};if(typeof this.callback!=="function"){Q(new Error("`callback` is not defined"));return}if(!this.promisifiedCallback)if(this.callback.length>=3)c$("Converting legacy callback function to promise"),this.promisifiedCallback=WP1.default(this.callback);else this.promisifiedCallback=this.callback;if(typeof K==="number"&&K>0)G=setTimeout(z,K);if(("port"in $)&&typeof $.port!=="number")$.port=Number($.port);try{c$("Resolving socket for %o request: %o",$.protocol,`${X.method} ${X.path}`),Promise.resolve(this.promisifiedCallback(X,$)).then(F,H)}catch(U){Promise.reject(U).catch(H)}}freeSocket(X,J){c$("Freeing socket %o %o",X.constructor.name,J),X.destroy()}destroy(){c$("Destroying agent %o",this.constructor.name)}}Z.Agent=Y,Z.prototype=Z.Agent.prototype})(nz||(nz={}));Pa.exports=nz});var Ia=w((p$)=>{var zP1=function(Z){return new Promise((Y,X)=>{let J=0;const $=[];function W(){const F=Z.read();if(F)H(F);else Z.once("readable",W)}function G(){Z.removeListener("end",Q),Z.removeListener("error",z),Z.removeListener("close",K),Z.removeListener("readable",W)}function K(F){l$("onclose had error %o",F)}function Q(){l$("onend")}function z(F){G(),l$("onerror %o",F),X(F)}function H(F){$.push(F),J+=F.length;const U=Buffer.concat($,J);if(U.indexOf("\r\n\r\n")===-1){l$("have not received end of HTTP headers yet..."),W();return}const q=U.toString("ascii",0,U.indexOf("\r\n")),L=+q.split(" ")[1];l$("got proxy server response: %o",q),Y({statusCode:L,buffered:U})}Z.on("error",z),Z.on("close",K),Z.on("end",Q),W()})},KP1=p$&&p$.__importDefault||function(Z){return Z&&Z.__esModule?Z:{default:Z}};Object.defineProperty(p$,"__esModule",{value:!0});var QP1=KP1(r3()),l$=QP1.default("https-proxy-agent:parse-proxy-response");p$.default=zP1});var Oa=w((kZ)=>{var wP1=function(Z){Z.resume()},RP1=function(Z,Y){return Boolean(!Y&&Z===80||Y&&Z===443)},MP1=function(Z){return typeof Z==="string"?/^https:?$/i.test(Z):!1},BP1=function(Z,...Y){const X={};let J;for(J in Z)if(!Y.includes(J))X[J]=Z[J];return X},HP1=kZ&&kZ.__awaiter||function(Z,Y,X,J){function $(W){return W instanceof X?W:new X(function(G){G(W)})}return new(X||(X=Promise))(function(W,G){function K(H){try{z(J.next(H))}catch(F){G(F)}}function Q(H){try{z(J.throw(H))}catch(F){G(F)}}function z(H){H.done?W(H.value):$(H.value).then(K,Q)}z((J=J.apply(Z,Y||[])).next())})},ZJ=kZ&&kZ.__importDefault||function(Z){return Z&&Z.__esModule?Z:{default:Z}};Object.defineProperty(kZ,"__esModule",{value:!0});var ja=ZJ(import.meta.require("net")),Ea=ZJ(import.meta.require("tls")),FP1=ZJ(import.meta.require("url")),UP1=ZJ(import.meta.require("assert")),VP1=ZJ(r3()),qP1=Ta(),LP1=ZJ(Ia()),i$=VP1.default("https-proxy-agent:agent");class Ca extends qP1.Agent{constructor(Z){let Y;if(typeof Z==="string")Y=FP1.default.parse(Z);else Y=Z;if(!Y)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");i$("creating new HttpsProxyAgent instance: %o",Y);super(Y);const X=Object.assign({},Y);if(this.secureProxy=Y.secureProxy||MP1(X.protocol),X.host=X.hostname||X.host,typeof X.port==="string")X.port=parseInt(X.port,10);if(!X.port&&X.host)X.port=this.secureProxy?443:80;if(this.secureProxy&&!("ALPNProtocols"in X))X.ALPNProtocols=["http 1.1"];if(X.host&&X.path)delete X.path,delete X.pathname;this.proxy=X}callback(Z,Y){return HP1(this,void 0,void 0,function*(){const{proxy:X,secureProxy:J}=this;let $;if(J)i$("Creating `tls.Socket`: %o",X),$=Ea.default.connect(X);else i$("Creating `net.Socket`: %o",X),$=ja.default.connect(X);const W=Object.assign({},X.headers);let K=`CONNECT ${`${Y.host}:${Y.port}`} HTTP/1.1\r\n`;if(X.auth)W["Proxy-Authorization"]=`Basic ${Buffer.from(X.auth).toString("base64")}`;let{host:Q,port:z,secureEndpoint:H}=Y;if(!RP1(z,H))Q+=`:${z}`;W.Host=Q,W.Connection="close";for(let L of Object.keys(W))K+=`${L}: ${W[L]}\r\n`;const F=LP1.default($);$.write(`${K}\r\n`);const{statusCode:U,buffered:V}=yield F;if(U===200){if(Z.once("socket",wP1),Y.secureEndpoint){i$("Upgrading socket connection to TLS");const L=Y.servername||Y.host;return Ea.default.connect(Object.assign(Object.assign({},BP1(Y,"host","hostname","path","port")),{socket:$,servername:L}))}return $}$.destroy();const q=new ja.default.Socket({writable:!1});return q.readable=!0,Z.once("socket",(L)=>{i$("replaying proxy buffer for failed request"),UP1.default(L.listenerCount("data")>0),L.push(V),L.push(null)}),q})}}kZ.default=Ca});var ka=w((FN,Sa)=>{var HN=function(Z){return new zN.default(Z)},NP1=FN&&FN.__importDefault||function(Z){return Z&&Z.__esModule?Z:{default:Z}},zN=NP1(Oa());(function(Z){Z.HttpsProxyAgent=zN.default,Z.prototype=zN.default.prototype})(HN||(HN={}));Sa.exports=HN});var tQ=pN(yi(),1),VA1=new tQ.Schema({threadId:{type:String,required:!0},userId:{type:String,required:!0},createdAt:{type:Date,default:Date.now,required:!0},updatedAt:{type:Date,default:Date.now,required:!0}}),gi=tQ.default.model("Thread",VA1);var ZZ="4.20.0";function vi(Z,Y={auto:!1}){if(bi)throw new Error(`you must \`import 'openai/shims/${Z.kind}'\` before importing anything else from openai`);if(YZ)throw new Error(`can't \`import 'openai/shims/${Z.kind}'\` after \`import 'openai/shims/${YZ}'\``);bi=Y.auto,YZ=Z.kind,vM=Z.fetch,qA1=Z.Request,LA1=Z.Response,wA1=Z.Headers,hM=Z.FormData,RA1=Z.Blob,oQ=Z.File,mM=Z.ReadableStream,uM=Z.getMultipartRequestOptions,dM=Z.getDefaultAgent,eQ=Z.fileFromPath,cM=Z.isFsReadStream}var bi=!1,YZ=void 0,vM=void 0,qA1=void 0,LA1=void 0,wA1=void 0,hM=void 0,RA1=void 0,oQ=void 0,mM=void 0,uM=void 0,dM=void 0,eQ=void 0,cM=void 0;class lM{constructor(Z){this.body=Z}get[Symbol.toStringTag](){return"MultipartBody"}}function hi({manuallyImported:Z}={}){const Y=Z?"You may need to use polyfills":`Add one of these imports before your first \`import \u2026 from 'openai'\`:
- \`import 'openai/shims/node'\` (if you're running on Node)
- \`import 'openai/shims/web'\` (otherwise)
`;let X,J,$,W;try{X=fetch,J=Request,$=Response,W=Headers}catch(G){throw new Error(`this environment is missing the following Web Fetch API type: ${G.message}. ${Y}`)}return{kind:"web",fetch:X,Request:J,Response:$,Headers:W,FormData:typeof FormData!=="undefined"?FormData:class G{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${Y}`)}},Blob:typeof Blob!=="undefined"?Blob:class G{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${Y}`)}},File:typeof File!=="undefined"?File:class G{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${Y}`)}},ReadableStream:typeof ReadableStream!=="undefined"?ReadableStream:class G{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${Y}`)}},getMultipartRequestOptions:async(G,K)=>({...K,body:new lM(G)}),getDefaultAgent:(G)=>{return},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:(G)=>!1}}import{ReadStream as BA1} from"fs";function mi(){const Z=hi();function Y(X){return X instanceof BA1}return{...Z,isFsReadStream:Y}}if(!YZ)vi(mi(),{auto:!0});class I1 extends Error{}class b0 extends I1{constructor(Z,Y,X,J){super(`${b0.makeMessage(Z,Y,X)}`);this.status=Z,this.headers=J;const $=Y;this.error=$,this.code=$?.code,this.param=$?.param,this.type=$?.type}static makeMessage(Z,Y,X){const J=Y?.message?typeof Y.message==="string"?Y.message:JSON.stringify(Y.message):Y?JSON.stringify(Y):X;if(Z&&J)return`${Z} ${J}`;if(Z)return`${Z} status code (no body)`;if(J)return J;return"(no status code or body)"}static generate(Z,Y,X,J){if(!Z)return new XZ({cause:Qz(Y)});const $=Y?.error;if(Z===400)return new Zz(Z,$,X,J);if(Z===401)return new Yz(Z,$,X,J);if(Z===403)return new Xz(Z,$,X,J);if(Z===404)return new Jz(Z,$,X,J);if(Z===409)return new $z(Z,$,X,J);if(Z===422)return new Wz(Z,$,X,J);if(Z===429)return new Gz(Z,$,X,J);if(Z>=500)return new Kz(Z,$,X,J);return new b0(Z,$,X,J)}}class e6 extends b0{constructor({message:Z}={}){super(void 0,void 0,Z||"Request was aborted.",void 0);this.status=void 0}}class XZ extends b0{constructor({message:Z,cause:Y}){super(void 0,void 0,Z||"Connection error.",void 0);if(this.status=void 0,Y)this.cause=Y}}class JZ extends XZ{constructor({message:Z}={}){super({message:Z??"Request timed out."})}}class Zz extends b0{constructor(){super(...arguments);this.status=400}}class Yz extends b0{constructor(){super(...arguments);this.status=401}}class Xz extends b0{constructor(){super(...arguments);this.status=403}}class Jz extends b0{constructor(){super(...arguments);this.status=404}}class $z extends b0{constructor(){super(...arguments);this.status=409}}class Wz extends b0{constructor(){super(...arguments);this.status=422}}class Gz extends b0{constructor(){super(...arguments);this.status=429}}class Kz extends b0{}var AA1=function(Z,Y){const X=Z.indexOf(Y);if(X!==-1)return[Z.substring(0,X),Y,Z.substring(X+Y.length)];return[Z,"",""]},ui=function(Z){if(Z[Symbol.asyncIterator])return Z;const Y=Z.getReader();return{async next(){try{const X=await Y.read();if(X?.done)Y.releaseLock();return X}catch(X){throw Y.releaseLock(),X}},async return(){const X=Y.cancel();return Y.releaseLock(),await X,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}};class o7{constructor(Z,Y){this.iterator=Z,this.controller=Y}static fromSSEResponse(Z,Y){let X=!1;const J=new di;async function*$(){if(!Z.body)throw Y.abort(),new I1("Attempted to iterate over a response with no body");const G=new $Z,K=ui(Z.body);for await(let Q of K)for(let z of G.decode(Q)){const H=J.decode(z);if(H)yield H}for(let Q of G.flush()){const z=J.decode(Q);if(z)yield z}}async function*W(){if(X)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");X=!0;let G=!1;try{for await(let K of $()){if(G)continue;if(K.data.startsWith("[DONE]")){G=!0;continue}if(K.event===null){let Q;try{Q=JSON.parse(K.data)}catch(z){throw console.error("Could not parse message into JSON:",K.data),console.error("From chunk:",K.raw),z}if(Q&&Q.error)throw new b0(void 0,Q.error,void 0,void 0);yield Q}}G=!0}catch(K){if(K instanceof Error&&K.name==="AbortError")return;throw K}finally{if(!G)Y.abort()}}return new o7(W,Y)}static fromReadableStream(Z,Y){let X=!1;async function*J(){const W=new $Z,G=ui(Z);for await(let K of G)for(let Q of W.decode(K))yield Q;for(let K of W.flush())yield K}async function*$(){if(X)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");X=!0;let W=!1;try{for await(let G of J()){if(W)continue;if(G)yield JSON.parse(G)}W=!0}catch(G){if(G instanceof Error&&G.name==="AbortError")return;throw G}finally{if(!W)Y.abort()}}return new o7($,Y)}[Symbol.asyncIterator](){return this.iterator()}tee(){const Z=[],Y=[],X=this.iterator(),J=($)=>{return{next:()=>{if($.length===0){const W=X.next();Z.push(W),Y.push(W)}return $.shift()}}};return[new o7(()=>J(Z),this.controller),new o7(()=>J(Y),this.controller)]}toReadableStream(){const Z=this;let Y;const X=new TextEncoder;return new mM({async start(){Y=Z[Symbol.asyncIterator]()},async pull(J){try{const{value:$,done:W}=await Y.next();if(W)return J.close();const G=X.encode(JSON.stringify($)+"\n");J.enqueue(G)}catch($){J.error($)}},async cancel(){await Y.return?.()}})}}class di{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(Z){if(Z.endsWith("\r"))Z=Z.substring(0,Z.length-1);if(!Z){if(!this.event&&!this.data.length)return null;const $={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],$}if(this.chunks.push(Z),Z.startsWith(":"))return null;let[Y,X,J]=AA1(Z,":");if(J.startsWith(" "))J=J.substring(1);if(Y==="event")this.event=J;else if(Y==="data")this.data.push(J);return null}}class $Z{constructor(){this.buffer=[],this.trailingCR=!1}decode(Z){let Y=this.decodeText(Z);if(this.trailingCR)Y="\r"+Y,this.trailingCR=!1;if(Y.endsWith("\r"))this.trailingCR=!0,Y=Y.slice(0,-1);if(!Y)return[];const X=$Z.NEWLINE_CHARS.has(Y[Y.length-1]||"");let J=Y.split($Z.NEWLINE_REGEXP);if(J.length===1&&!X)return this.buffer.push(J[0]),[];if(this.buffer.length>0)J=[this.buffer.join("")+J[0],...J.slice(1)],this.buffer=[];if(!X)this.buffer=[J.pop()||""];return J}decodeText(Z){if(Z==null)return"";if(typeof Z==="string")return Z;if(typeof Buffer!=="undefined"){if(Z instanceof Buffer)return Z.toString();if(Z instanceof Uint8Array)return Buffer.from(Z).toString();throw new I1(`Unexpected: received non-Uint8Array (${Z.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder!=="undefined"){if(Z instanceof Uint8Array||Z instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(Z);throw new I1(`Unexpected: received non-Uint8Array/ArrayBuffer (${Z.constructor.name}) in a web platform. Please report this error.`)}throw new I1("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const Z=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,Z}}$Z.NEWLINE_CHARS=new Set(["\n","\r","\v","\f","\x1C","\x1D","\x1E","\x85","\u2028","\u2029"]);$Z.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;async function nM(Z,Y,X={}){if(Z=await Z,ci(Z)){const $=await Z.blob();return Y||(Y=new URL(Z.url).pathname.split(/[\\/]/).pop()??"unknown_file"),new oQ([$],Y,X)}const J=await TA1(Z);if(Y||(Y=jA1(Z)??"unknown_file"),!X.type){const $=J[0]?.type;if(typeof $==="string")X={...X,type:$}}return new oQ(J,Y,X)}async function TA1(Z){let Y=[];if(typeof Z==="string"||ArrayBuffer.isView(Z)||Z instanceof ArrayBuffer)Y.push(Z);else if(li(Z))Y.push(await Z.arrayBuffer());else if(EA1(Z))for await(let X of Z)Y.push(X);else throw new Error(`Unexpected data type: ${typeof Z}; constructor: ${Z?.constructor?.name}; props: ${IA1(Z)}`);return Y}var IA1=function(Z){return`[${Object.getOwnPropertyNames(Z).map((X)=>`"${X}"`).join(", ")}]`},jA1=function(Z){return pM(Z.name)||pM(Z.filename)||pM(Z.path)?.split(/[\\/]/).pop()},ci=(Z)=>Z!=null&&typeof Z==="object"&&typeof Z.url==="string"&&typeof Z.blob==="function",DA1=(Z)=>Z!=null&&typeof Z==="object"&&typeof Z.name==="string"&&typeof Z.lastModified==="number"&&li(Z),li=(Z)=>Z!=null&&typeof Z==="object"&&typeof Z.size==="number"&&typeof Z.type==="string"&&typeof Z.text==="function"&&typeof Z.slice==="function"&&typeof Z.arrayBuffer==="function",PA1=(Z)=>{return DA1(Z)||ci(Z)||cM(Z)},pM=(Z)=>{if(typeof Z==="string")return Z;if(typeof Buffer!=="undefined"&&Z instanceof Buffer)return String(Z);return},EA1=(Z)=>Z!=null&&typeof Z==="object"&&typeof Z[Symbol.asyncIterator]==="function",aM=(Z)=>Z&&typeof Z==="object"&&Z.body&&Z[Symbol.toStringTag]==="MultipartBody";var e7=async(Z)=>{const Y=await pi(Z.body);return uM(Y,Z)},pi=async(Z)=>{const Y=new hM;return await Promise.all(Object.entries(Z||{}).map(([X,J])=>iM(Y,X,J))),Y};var iM=async(Z,Y,X)=>{if(X===void 0)return;if(X==null)throw new TypeError(`Received null for "${Y}"; to pass null in FormData, you must use the string 'null'`);if(typeof X==="string"||typeof X==="number"||typeof X==="boolean")Z.append(Y,String(X));else if(PA1(X)){const J=await nM(X);Z.append(Y,J)}else if(Array.isArray(X))await Promise.all(X.map((J)=>iM(Z,Y+"[]",J)));else if(typeof X==="object")await Promise.all(Object.entries(X).map(([J,$])=>iM(Z,`${Y}[${J}]`,$)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${X} instead`)};async function si(Z){const{response:Y}=Z;if(Z.options.stream)return V$("response",Y.status,Y.url,Y.headers,Y.body),o7.fromSSEResponse(Y,Z.controller);if(Y.status===204)return null;if(Z.options.__binaryResponse)return Y;if(Y.headers.get("content-type")?.includes("application/json")){const $=await Y.json();return V$("response",Y.status,Y.url,Y.headers,$),$}const J=await Y.text();return V$("response",Y.status,Y.url,Y.headers,J),J}var fA1=function(){if(typeof navigator==="undefined"||!navigator)return null;const Z=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:Y,pattern:X}of Z){const J=X.exec(navigator.userAgent);if(J){const $=J[1]||0,W=J[2]||0,G=J[3]||0;return{browser:Y,version:`${$}.${W}.${G}`}}}return null};function ti(Z){if(!Z)return!0;for(let Y in Z)return!1;return!0}function hA1(Z,Y){return Object.prototype.hasOwnProperty.call(Z,Y)}function V$(Z,...Y){if(typeof process!=="undefined"&&process.env.DEBUG==="true")console.log(`OpenAI:DEBUG:${Z}`,...Y)}var OA1=function(Z,Y,X,J,$){if(J==="m")throw new TypeError("Private method is not writable");if(J==="a"&&!$)throw new TypeError("Private accessor was defined without a setter");if(typeof Y==="function"?Z!==Y||!$:!Y.has(Z))throw new TypeError("Cannot write private member to an object whose class did not declare it");return J==="a"?$.call(Z,X):$?$.value=X:Y.set(Z,X),X},SA1=function(Z,Y,X,J){if(X==="a"&&!J)throw new TypeError("Private accessor was defined without a getter");if(typeof Y==="function"?Z!==Y||!J:!Y.has(Z))throw new TypeError("Cannot read private member from an object whose class did not declare it");return X==="m"?J:X==="a"?J.call(Z):J?J.value:Y.get(Z)},zz;class Hz extends Promise{constructor(Z,Y=si){super((X)=>{X(null)});this.responsePromise=Z,this.parseResponse=Y}_thenUnwrap(Z){return new Hz(this.responsePromise,async(Y)=>Z(await this.parseResponse(Y)))}asResponse(){return this.responsePromise.then((Z)=>Z.response)}async withResponse(){const[Z,Y]=await Promise.all([this.parse(),this.asResponse()]);return{data:Z,response:Y}}parse(){if(!this.parsedPromise)this.parsedPromise=this.responsePromise.then(this.parseResponse);return this.parsedPromise}then(Z,Y){return this.parse().then(Z,Y)}catch(Z){return this.parse().catch(Z)}finally(Z){return this.parse().finally(Z)}}class rM{constructor({baseURL:Z,maxRetries:Y=2,timeout:X=600000,httpAgent:J,fetch:$}){this.baseURL=Z,this.maxRetries=sM("maxRetries",Y),this.timeout=sM("timeout",X),this.httpAgent=J,this.fetch=$??vM}authHeaders(Z){return{}}defaultHeaders(Z){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...yA1(),...this.authHeaders(Z)}}validateHeaders(Z,Y){}defaultIdempotencyKey(){return`stainless-node-retry-${mA1()}`}get(Z,Y){return this.methodRequest("get",Z,Y)}post(Z,Y){return this.methodRequest("post",Z,Y)}patch(Z,Y){return this.methodRequest("patch",Z,Y)}put(Z,Y){return this.methodRequest("put",Z,Y)}delete(Z,Y){return this.methodRequest("delete",Z,Y)}methodRequest(Z,Y,X){return this.request(Promise.resolve(X).then((J)=>({method:Z,path:Y,...J})))}getAPIList(Z,Y,X){return this.requestAPIList(Y,{method:"get",path:Z,...X})}calculateContentLength(Z){if(typeof Z==="string"){if(typeof Buffer!=="undefined")return Buffer.byteLength(Z,"utf8").toString();if(typeof TextEncoder!=="undefined")return(new TextEncoder()).encode(Z).length.toString()}return null}buildRequest(Z){const{method:Y,path:X,query:J,headers:$={}}=Z,W=aM(Z.body)?Z.body.body:Z.body?JSON.stringify(Z.body,null,2):null,G=this.calculateContentLength(W),K=this.buildURL(X,J);if("timeout"in Z)sM("timeout",Z.timeout);const Q=Z.timeout??this.timeout,z=Z.httpAgent??this.httpAgent??dM(K),H=Q+1000;if(typeof z?.options?.timeout==="number"&&H>(z.options.timeout??0))z.options.timeout=H;if(this.idempotencyHeader&&Y!=="get"){if(!Z.idempotencyKey)Z.idempotencyKey=this.defaultIdempotencyKey();$[this.idempotencyHeader]=Z.idempotencyKey}const F={...G&&{"Content-Length":G},...this.defaultHeaders(Z),...$};if(aM(Z.body)&&YZ!=="node")delete F["Content-Type"];Object.keys(F).forEach((V)=>F[V]===null&&delete F[V]);const U={method:Y,...W&&{body:W},headers:F,...z&&{agent:z},signal:Z.signal??null};return this.validateHeaders(F,$),{req:U,url:K,timeout:Q}}async prepareRequest(Z,{url:Y,options:X}){}parseHeaders(Z){return!Z?{}:(Symbol.iterator in Z)?Object.fromEntries(Array.from(Z).map((Y)=>[...Y])):{...Z}}makeStatusError(Z,Y,X,J){return b0.generate(Z,Y,X,J)}request(Z,Y=null){return new Hz(this.makeRequest(Z,Y))}async makeRequest(Z,Y){const X=await Z;if(Y==null)Y=X.maxRetries??this.maxRetries;const{req:J,url:$,timeout:W}=this.buildRequest(X);if(await this.prepareRequest(J,{url:$,options:X}),V$("request",$,X,J.headers),X.signal?.aborted)throw new e6;const G=new AbortController,K=await this.fetchWithTimeout($,J,W,G).catch(Qz);if(K instanceof Error){if(X.signal?.aborted)throw new e6;if(Y)return this.retryRequest(X,Y);if(K.name==="AbortError")throw new JZ;throw new XZ({cause:K})}const Q=kA1(K.headers);if(!K.ok){if(Y&&this.shouldRetry(K))return this.retryRequest(X,Y,Q);const z=await K.text().catch((V)=>Qz(V).message),H=gA1(z),F=H?void 0:z;throw V$("response",K.status,$,Q,F),this.makeStatusError(K.status,H,F,Q)}return{response:K,options:X,controller:G}}requestAPIList(Z,Y){const X=this.makeRequest(Y,null);return new ri(this,X,Z)}buildURL(Z,Y){const X=vA1(Z)?new URL(Z):new URL(this.baseURL+(this.baseURL.endsWith("/")&&Z.startsWith("/")?Z.slice(1):Z)),J=this.defaultQuery();if(!ti(J))Y={...J,...Y};if(Y)X.search=this.stringifyQuery(Y);return X.toString()}stringifyQuery(Z){return Object.entries(Z).filter(([Y,X])=>typeof X!=="undefined").map(([Y,X])=>{if(typeof X==="string"||typeof X==="number"||typeof X==="boolean")return`${encodeURIComponent(Y)}=${encodeURIComponent(X)}`;if(X===null)return`${encodeURIComponent(Y)}=`;throw new I1(`Cannot stringify type ${typeof X}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(Z,Y,X,J){const{signal:$,...W}=Y||{};if($)$.addEventListener("abort",()=>J.abort());const G=setTimeout(()=>J.abort(),X);return this.getRequestClient().fetch.call(void 0,Z,{signal:J.signal,...W}).finally(()=>{clearTimeout(G)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(Z){const Y=Z.headers.get("x-should-retry");if(Y==="true")return!0;if(Y==="false")return!1;if(Z.status===408)return!0;if(Z.status===409)return!0;if(Z.status===429)return!0;if(Z.status>=500)return!0;return!1}async retryRequest(Z,Y,X){let J;const $=X?.["retry-after"];if($){const W=parseInt($);if(!Number.isNaN(W))J=W*1000;else J=Date.parse($)-Date.now()}if(!J||!Number.isInteger(J)||J<=0||J>60000){const W=Z.maxRetries??this.maxRetries;J=this.calculateDefaultRetryTimeoutMillis(Y,W)}return await tM(J),this.makeRequest(Z,Y-1)}calculateDefaultRetryTimeoutMillis(Z,Y){const $=Y-Z,W=Math.min(0.5*Math.pow(2,$),8),G=1-Math.random()*0.25;return W*G*1000}getUserAgent(){return`${this.constructor.name}/JS ${ZZ}`}}class Fz{constructor(Z,Y,X,J){zz.set(this,void 0),OA1(this,zz,Z,"f"),this.options=J,this.response=Y,this.body=X}hasNextPage(){if(!this.getPaginatedItems().length)return!1;return this.nextPageInfo()!=null}async getNextPage(){const Z=this.nextPageInfo();if(!Z)throw new I1("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const Y={...this.options};if("params"in Z)Y.query={...Y.query,...Z.params};else if("url"in Z){const X=[...Object.entries(Y.query||{}),...Z.url.searchParams.entries()];for(let[J,$]of X)Z.url.searchParams.set(J,$);Y.query=void 0,Y.path=Z.url.toString()}return await SA1(this,zz,"f").requestAPIList(this.constructor,Y)}async*iterPages(){let Z=this;yield Z;while(Z.hasNextPage())Z=await Z.getNextPage(),yield Z}async*[(zz=new WeakMap,Symbol.asyncIterator)](){for await(let Z of this.iterPages())for(let Y of Z.getPaginatedItems())yield Y}}class ri extends Hz{constructor(Z,Y,X){super(Y,async(J)=>new X(Z,J.response,await si(J),J.options))}async*[Symbol.asyncIterator](){const Z=await this;for await(let Y of Z)yield Y}}var kA1=(Z)=>{return new Proxy(Object.fromEntries(Z.entries()),{get(Y,X){const J=X.toString();return Y[J.toLowerCase()]||Y[J]}})},_A1={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryResponse:!0},v0=(Z)=>{return typeof Z==="object"&&Z!==null&&!ti(Z)&&Object.keys(Z).every((Y)=>hA1(_A1,Y))},xA1=()=>{if(typeof Deno!=="undefined"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ZZ,"X-Stainless-OS":ni(Deno.build.os),"X-Stainless-Arch":ii(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":Deno.version};if(typeof EdgeRuntime!=="undefined")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ZZ,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process!=="undefined"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ZZ,"X-Stainless-OS":ni(process.platform),"X-Stainless-Arch":ii(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const Z=fA1();if(Z)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ZZ,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${Z.browser}`,"X-Stainless-Runtime-Version":Z.version};return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ZZ,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}},ii=(Z)=>{if(Z==="x32")return"x32";if(Z==="x86_64"||Z==="x64")return"x64";if(Z==="arm")return"arm";if(Z==="aarch64"||Z==="arm64")return"arm64";if(Z)return`other:${Z}`;return"unknown"},ni=(Z)=>{if(Z=Z.toLowerCase(),Z.includes("ios"))return"iOS";if(Z==="android")return"Android";if(Z==="darwin")return"MacOS";if(Z==="win32")return"Windows";if(Z==="freebsd")return"FreeBSD";if(Z==="openbsd")return"OpenBSD";if(Z==="linux")return"Linux";if(Z)return`Other:${Z}`;return"Unknown"},ai,yA1=()=>{return ai??(ai=xA1())},gA1=(Z)=>{try{return JSON.parse(Z)}catch(Y){return}},bA1=new RegExp("^(?:[a-z]+:)?//","i"),vA1=(Z)=>{return bA1.test(Z)},tM=(Z)=>new Promise((Y)=>setTimeout(Y,Z)),sM=(Z,Y)=>{if(typeof Y!=="number"||!Number.isInteger(Y))throw new I1(`${Z} must be an integer`);if(Y<0)throw new I1(`${Z} must be a positive integer`);return Y},Qz=(Z)=>{if(Z instanceof Error)return Z;return new Error(Z)};var oM=(Z)=>{if(typeof process!=="undefined")return process.env?.[Z]??void 0;if(typeof Deno!=="undefined")return Deno.env?.get?.(Z);return};var mA1=()=>{return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(Z)=>{const Y=Math.random()*16|0;return(Z==="x"?Y:Y&3|8).toString(16)})},oi=()=>{return typeof window!=="undefined"&&typeof window.document!=="undefined"&&typeof navigator!=="undefined"};class m4 extends Fz{constructor(Z,Y,X,J){super(Z,Y,X,J);this.data=X.data,this.object=X.object}getPaginatedItems(){return this.data}nextPageParams(){return null}nextPageInfo(){return null}}class n0 extends Fz{constructor(Z,Y,X,J){super(Z,Y,X,J);this.data=X.data}getPaginatedItems(){return this.data}nextPageParams(){const Z=this.nextPageInfo();if(!Z)return null;if("params"in Z)return Z.params;const Y=Object.fromEntries(Z.url.searchParams);if(!Object.keys(Y).length)return null;return Y}nextPageInfo(){if(!this.data?.length)return null;const Z=this.data[this.data.length-1]?.id;if(!Z)return null;return{params:{after:Z}}}}class J1{constructor(Z){this._client=Z}}class RX extends J1{create(Z,Y){return this._client.post("/chat/completions",{body:Z,...Y,stream:Z.stream??!1})}}(function(Z){})(RX||(RX={}));class WZ extends J1{constructor(){super(...arguments);this.completions=new RX(this._client)}}(function(Z){Z.Completions=RX})(WZ||(WZ={}));class MX extends J1{create(Z,Y){return this._client.post("/audio/speech",{body:Z,...Y,__binaryResponse:!0})}}(function(Z){})(MX||(MX={}));class BX extends J1{create(Z,Y){return this._client.post("/audio/transcriptions",e7({body:Z,...Y}))}}(function(Z){})(BX||(BX={}));class NX extends J1{create(Z,Y){return this._client.post("/audio/translations",e7({body:Z,...Y}))}}(function(Z){})(NX||(NX={}));class GZ extends J1{constructor(){super(...arguments);this.transcriptions=new BX(this._client),this.translations=new NX(this._client),this.speech=new MX(this._client)}}(function(Z){Z.Transcriptions=BX,Z.Translations=NX,Z.Speech=MX})(GZ||(GZ={}));class AX extends J1{create(Z,Y,X){return this._client.post(`/assistants/${Z}/files`,{body:Y,...X,headers:{"OpenAI-Beta":"assistants=v1",...X?.headers}})}retrieve(Z,Y,X){return this._client.get(`/assistants/${Z}/files/${Y}`,{...X,headers:{"OpenAI-Beta":"assistants=v1",...X?.headers}})}list(Z,Y={},X){if(v0(Y))return this.list(Z,{},Y);return this._client.getAPIList(`/assistants/${Z}/files`,DX,{query:Y,...X,headers:{"OpenAI-Beta":"assistants=v1",...X?.headers}})}del(Z,Y,X){return this._client.delete(`/assistants/${Z}/files/${Y}`,{...X,headers:{"OpenAI-Beta":"assistants=v1",...X?.headers}})}}class DX extends n0{}(function(Z){Z.AssistantFilesPage=DX})(AX||(AX={}));class PX extends J1{constructor(){super(...arguments);this.files=new AX(this._client)}create(Z,Y){return this._client.post("/assistants",{body:Z,...Y,headers:{"OpenAI-Beta":"assistants=v1",...Y?.headers}})}retrieve(Z,Y){return this._client.get(`/assistants/${Z}`,{...Y,headers:{"OpenAI-Beta":"assistants=v1",...Y?.headers}})}update(Z,Y,X){return this._client.post(`/assistants/${Z}`,{body:Y,...X,headers:{"OpenAI-Beta":"assistants=v1",...X?.headers}})}list(Z={},Y){if(v0(Z))return this.list({},Z);return this._client.getAPIList("/assistants",TX,{query:Z,...Y,headers:{"OpenAI-Beta":"assistants=v1",...Y?.headers}})}del(Z,Y){return this._client.delete(`/assistants/${Z}`,{...Y,headers:{"OpenAI-Beta":"assistants=v1",...Y?.headers}})}}class TX extends n0{}(function(Z){Z.AssistantsPage=TX,Z.Files=AX,Z.AssistantFilesPage=DX})(PX||(PX={}));function eM(Z){return typeof Z.parse==="function"}var KZ=(Z)=>{return Z?.role==="assistant"},ZB=(Z)=>{return Z?.role==="function"},Yn=(Z)=>{return Z?.role==="tool"};var O7=function(Z,Y,X,J,$){if(J==="m")throw new TypeError("Private method is not writable");if(J==="a"&&!$)throw new TypeError("Private accessor was defined without a setter");if(typeof Y==="function"?Z!==Y||!$:!Y.has(Z))throw new TypeError("Cannot write private member to an object whose class did not declare it");return J==="a"?$.call(Z,X):$?$.value=X:Y.set(Z,X),X},j1=function(Z,Y,X,J){if(X==="a"&&!J)throw new TypeError("Private accessor was defined without a getter");if(typeof Y==="function"?Z!==Y||!J:!Y.has(Z))throw new TypeError("Cannot read private member from an object whose class did not declare it");return X==="m"?J:X==="a"?J.call(Z):J?J.value:Y.get(Z)},f8,Uz,Vz,q$,L$,qz,w$,u4,R$,Lz,wz,IX,YB,XB,JB,$B,WB,GB,Jn,KB,Xn=10;class M${constructor(){f8.add(this),this.controller=new AbortController,Uz.set(this,void 0),Vz.set(this,()=>{}),q$.set(this,()=>{}),L$.set(this,void 0),qz.set(this,()=>{}),w$.set(this,()=>{}),u4.set(this,{}),this._chatCompletions=[],this.messages=[],R$.set(this,!1),Lz.set(this,!1),wz.set(this,!1),IX.set(this,!1),GB.set(this,(Z)=>{if(O7(this,Lz,!0,"f"),Z instanceof Error&&Z.name==="AbortError")Z=new e6;if(Z instanceof e6)return O7(this,wz,!0,"f"),this._emit("abort",Z);if(Z instanceof I1)return this._emit("error",Z);if(Z instanceof Error){const Y=new I1(Z.message);return Y.cause=Z,this._emit("error",Y)}return this._emit("error",new I1(String(Z)))}),O7(this,Uz,new Promise((Z,Y)=>{O7(this,Vz,Z,"f"),O7(this,q$,Y,"f")}),"f"),O7(this,L$,new Promise((Z,Y)=>{O7(this,qz,Z,"f"),O7(this,w$,Y,"f")}),"f"),j1(this,Uz,"f").catch(()=>{}),j1(this,L$,"f").catch(()=>{})}_run(Z){setTimeout(()=>{Z().then(()=>{this._emitFinal(),this._emit("end")},j1(this,GB,"f"))},0)}_addChatCompletion(Z){this._chatCompletions.push(Z),this._emit("chatCompletion",Z);const Y=Z.choices[0]?.message;if(Y)this._addMessage(Y);return Z}_addMessage(Z,Y=!0){if(this.messages.push(Z),Y){if(this._emit("message",Z),(ZB(Z)||Yn(Z))&&Z.content)this._emit("functionCallResult",Z.content);else if(KZ(Z)&&Z.function_call)this._emit("functionCall",Z.function_call);else if(KZ(Z)&&Z.tool_calls){for(let X of Z.tool_calls)if(X.type==="function")this._emit("functionCall",X.function)}}}_connected(){if(this.ended)return;j1(this,Vz,"f").call(this),this._emit("connect")}get ended(){return j1(this,R$,"f")}get errored(){return j1(this,Lz,"f")}get aborted(){return j1(this,wz,"f")}abort(){this.controller.abort()}on(Z,Y){return(j1(this,u4,"f")[Z]||(j1(this,u4,"f")[Z]=[])).push({listener:Y}),this}off(Z,Y){const X=j1(this,u4,"f")[Z];if(!X)return this;const J=X.findIndex(($)=>$.listener===Y);if(J>=0)X.splice(J,1);return this}once(Z,Y){return(j1(this,u4,"f")[Z]||(j1(this,u4,"f")[Z]=[])).push({listener:Y,once:!0}),this}emitted(Z){return new Promise((Y,X)=>{if(O7(this,IX,!0,"f"),Z!=="error")this.once("error",X);this.once(Z,Y)})}async done(){O7(this,IX,!0,"f"),await j1(this,L$,"f")}async finalChatCompletion(){await this.done();const Z=this._chatCompletions[this._chatCompletions.length-1];if(!Z)throw new I1("stream ended without producing a ChatCompletion");return Z}async finalContent(){return await this.done(),j1(this,f8,"m",YB).call(this)}async finalMessage(){return await this.done(),j1(this,f8,"m",XB).call(this)}async finalFunctionCall(){return await this.done(),j1(this,f8,"m",JB).call(this)}async finalFunctionCallResult(){return await this.done(),j1(this,f8,"m",$B).call(this)}async totalUsage(){return await this.done(),j1(this,f8,"m",WB).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emit(Z,...Y){if(j1(this,R$,"f"))return;if(Z==="end")O7(this,R$,!0,"f"),j1(this,qz,"f").call(this);const X=j1(this,u4,"f")[Z];if(X)j1(this,u4,"f")[Z]=X.filter((J)=>!J.once),X.forEach(({listener:J})=>J(...Y));if(Z==="abort"){const J=Y[0];if(!j1(this,IX,"f")&&!X?.length)Promise.reject(J);j1(this,q$,"f").call(this,J),j1(this,w$,"f").call(this,J),this._emit("end");return}if(Z==="error"){const J=Y[0];if(!j1(this,IX,"f")&&!X?.length)Promise.reject(J);j1(this,q$,"f").call(this,J),j1(this,w$,"f").call(this,J),this._emit("end")}}_emitFinal(){const Z=this._chatCompletions[this._chatCompletions.length-1];if(Z)this._emit("finalChatCompletion",Z);const Y=this.messages[this.messages.length-1];if(Y)this._emit("finalMessage",Y);const X=j1(this,f8,"m",YB).call(this);if(X)this._emit("finalContent",X);const J=j1(this,f8,"m",JB).call(this);if(J)this._emit("finalFunctionCall",J);const $=j1(this,f8,"m",$B).call(this);if($!=null)this._emit("finalFunctionCallResult",$);if(this._chatCompletions.some((W)=>W.usage))this._emit("totalUsage",j1(this,f8,"m",WB).call(this))}async _createChatCompletion(Z,Y,X){const J=X?.signal;if(J){if(J.aborted)this.controller.abort();J.addEventListener("abort",()=>this.controller.abort())}j1(this,f8,"m",Jn).call(this,Y);const $=await Z.create({...Y,stream:!1},{...X,signal:this.controller.signal});return this._connected(),this._addChatCompletion($)}async _runChatCompletion(Z,Y,X){for(let J of Y.messages)this._addMessage(J,!1);return await this._createChatCompletion(Z,Y,X)}async _runFunctions(Z,Y,X){const{function_call:$="auto",stream:W,...G}=Y,K=typeof $!=="string"&&$?.name,{maxChatCompletions:Q=Xn}=X||{},z={};for(let F of Y.functions)z[F.name||F.function.name]=F;const H=Y.functions.map((F)=>({name:F.name||F.function.name,parameters:F.parameters,description:F.description}));for(let F of Y.messages)this._addMessage(F,!1);for(let F=0;F<Q;++F){const V=(await this._createChatCompletion(Z,{...G,function_call:$,functions:H,messages:[...this.messages]},X)).choices[0]?.message;if(!V)throw new I1("missing message in ChatCompletion response");if(!V.function_call)return;const{name:q,arguments:L}=V.function_call,R=z[q];if(!R){const D=`Invalid function_call: ${JSON.stringify(q)}. Available options are: ${H.map((m)=>JSON.stringify(m.name)).join(", ")}. Please try again`;this._addMessage({role:"function",name:q,content:D});continue}else if(K&&K!==q){const D=`Invalid function_call: ${JSON.stringify(q)}. ${JSON.stringify(K)} requested. Please try again`;this._addMessage({role:"function",name:q,content:D});continue}let B;try{B=eM(R)?await R.parse(L):L}catch(D){this._addMessage({role:"function",name:q,content:D instanceof Error?D.message:String(D)});continue}const N=await R.function(B,this),M=j1(this,f8,"m",KB).call(this,N);if(this._addMessage({role:"function",name:q,content:M}),K)return}}async _runTools(Z,Y,X){const{tool_choice:$="auto",stream:W,...G}=Y,K=typeof $!=="string"&&$?.function?.name,{maxChatCompletions:Q=Xn}=X||{},z={};for(let F of Y.tools)if(F.type==="function")z[F.function.name||F.function.function.name]=F.function;const H="tools"in Y?Y.tools.map((F)=>F.type==="function"?{type:"function",function:{name:F.function.name||F.function.function.name,parameters:F.function.parameters,description:F.function.description}}:F):void 0;for(let F of Y.messages)this._addMessage(F,!1);for(let F=0;F<Q;++F){const V=(await this._createChatCompletion(Z,{...G,tool_choice:$,tools:H,messages:[...this.messages]},X)).choices[0]?.message;if(!V)throw new I1("missing message in ChatCompletion response");if(!V.tool_calls)return;for(let q of V.tool_calls){if(q.type!=="function")continue;const L=q.id,{name:R,arguments:B}=q.function,N=z[R];if(!N){const O=`Invalid tool_call: ${JSON.stringify(R)}. Available options are: ${H.map((E)=>JSON.stringify(E.function.name)).join(", ")}. Please try again`;this._addMessage({role:"tool",tool_call_id:L,content:O});continue}else if(K&&K!==R){const O=`Invalid tool_call: ${JSON.stringify(R)}. ${JSON.stringify(K)} requested. Please try again`;this._addMessage({role:"tool",tool_call_id:L,content:O});continue}let M;try{M=eM(N)?await N.parse(B):B}catch(O){const E=O instanceof Error?O.message:String(O);this._addMessage({role:"tool",tool_call_id:L,content:E});continue}const D=await N.function(M,this),m=j1(this,f8,"m",KB).call(this,D);if(this._addMessage({role:"tool",tool_call_id:L,content:m}),K)return}}}}Uz=new WeakMap,Vz=new WeakMap,q$=new WeakMap,L$=new WeakMap,qz=new WeakMap,w$=new WeakMap,u4=new WeakMap,R$=new WeakMap,Lz=new WeakMap,wz=new WeakMap,IX=new WeakMap,GB=new WeakMap,f8=new WeakSet,YB=function Z(){return j1(this,f8,"m",XB).call(this).content},XB=function Z(){let Y=this.messages.length;while(Y-- >0){const X=this.messages[Y];if(KZ(X))return X}throw new I1("stream ended without producing a ChatCompletionMessage with role=assistant")},JB=function Z(){for(let Y=this.messages.length-1;Y>=0;Y--){const X=this.messages[Y];if(KZ(X)&&X?.function_call)return X.function_call}return},$B=function Z(){for(let Y=this.messages.length-1;Y>=0;Y--){const X=this.messages[Y];if(ZB(X)&&X.content!=null)return X.content}return},WB=function Z(){const Y={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(let{usage:X}of this._chatCompletions)if(X)Y.completion_tokens+=X.completion_tokens,Y.prompt_tokens+=X.prompt_tokens,Y.total_tokens+=X.total_tokens;return Y},Jn=function Z(Y){if(Y.n!=null&&Y.n>1)throw new I1("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},KB=function Z(Y){return typeof Y==="string"?Y:Y===void 0?"undefined":JSON.stringify(Y)};class jX extends M${static runFunctions(Z,Y,X){const J=new jX;return J._run(()=>J._runFunctions(Z,Y,X)),J}static runTools(Z,Y,X){const J=new jX;return J._run(()=>J._runTools(Z,Y,X)),J}_addMessage(Z){if(super._addMessage(Z),KZ(Z)&&Z.content)this._emit("content",Z.content)}}var nA1=function(Z){const{id:Y,choices:X,created:J,model:$}=Z;return{id:Y,choices:X.map(({message:W,finish_reason:G,index:K})=>{if(!G)throw new I1(`missing finish_reason for choice ${K}`);const{content:Q=null,function_call:z,tool_calls:H}=W,F=W.role;if(!F)throw new I1(`missing role for choice ${K}`);if(z){const{arguments:U,name:V}=z;if(U==null)throw new I1(`missing function_call.arguments for choice ${K}`);if(!V)throw new I1(`missing function_call.name for choice ${K}`);return{message:{content:Q,function_call:{arguments:U,name:V},role:F},finish_reason:G,index:K}}if(H)return{index:K,finish_reason:G,message:{role:F,content:Q,tool_calls:H.map((U,V)=>{const{function:q,type:L,id:R}=U,{arguments:B,name:N}=q||{};if(R==null)throw new I1(`missing choices[${K}].tool_calls[${V}].id\n${Mz(Z)}`);if(L==null)throw new I1(`missing choices[${K}].tool_calls[${V}].type\n${Mz(Z)}`);if(N==null)throw new I1(`missing choices[${K}].tool_calls[${V}].function.name\n${Mz(Z)}`);if(B==null)throw new I1(`missing choices[${K}].tool_calls[${V}].function.arguments\n${Mz(Z)}`);return{id:R,type:L,function:{name:N,arguments:B}}})}};return{message:{content:Q,role:F},finish_reason:G,index:K}}),created:J,model:$,object:"chat.completion"}},Mz=function(Z){return JSON.stringify(Z)},S7=function(Z,Y,X,J){if(X==="a"&&!J)throw new TypeError("Private accessor was defined without a getter");if(typeof Y==="function"?Z!==Y||!J:!Y.has(Z))throw new TypeError("Cannot read private member from an object whose class did not declare it");return X==="m"?J:X==="a"?J.call(Z):J?J.value:Y.get(Z)},QB=function(Z,Y,X,J,$){if(J==="m")throw new TypeError("Private method is not writable");if(J==="a"&&!$)throw new TypeError("Private accessor was defined without a setter");if(typeof Y==="function"?Z!==Y||!$:!Y.has(Z))throw new TypeError("Cannot write private member to an object whose class did not declare it");return J==="a"?$.call(Z,X):$?$.value=X:Y.set(Z,X),X},Z4,v5,zB,HB,Rz,$n;class QZ extends M${constructor(){super(...arguments);Z4.add(this),v5.set(this,void 0)}get currentChatCompletionSnapshot(){return S7(this,v5,"f")}static fromReadableStream(Z){const Y=new QZ;return Y._run(()=>Y._fromReadableStream(Z)),Y}static createChatCompletion(Z,Y,X){const J=new QZ;return J._run(()=>J._runChatCompletion(Z,{...Y,stream:!0},{...X,headers:{...X?.headers,"X-Stainless-Helper-Method":"stream"}})),J}async _createChatCompletion(Z,Y,X){const J=X?.signal;if(J){if(J.aborted)this.controller.abort();J.addEventListener("abort",()=>this.controller.abort())}S7(this,Z4,"m",zB).call(this);const $=await Z.create({...Y,stream:!0},{...X,signal:this.controller.signal});this._connected();for await(let W of $)S7(this,Z4,"m",HB).call(this,W);if($.controller.signal?.aborted)throw new e6;return this._addChatCompletion(S7(this,Z4,"m",Rz).call(this))}async _fromReadableStream(Z,Y){const X=Y?.signal;if(X){if(X.aborted)this.controller.abort();X.addEventListener("abort",()=>this.controller.abort())}S7(this,Z4,"m",zB).call(this),this._connected();const J=o7.fromReadableStream(Z,this.controller);let $;for await(let W of J){if($&&$!==W.id)this._addChatCompletion(S7(this,Z4,"m",Rz).call(this));S7(this,Z4,"m",HB).call(this,W),$=W.id}if(J.controller.signal?.aborted)throw new e6;return this._addChatCompletion(S7(this,Z4,"m",Rz).call(this))}[(v5=new WeakMap,Z4=new WeakSet,zB=function Z(){if(this.ended)return;QB(this,v5,void 0,"f")},HB=function Z(Y){if(this.ended)return;const X=S7(this,Z4,"m",$n).call(this,Y);this._emit("chunk",Y,X);const J=Y.choices[0]?.delta?.content,$=X.choices[0]?.message;if(J!=null&&$?.role==="assistant"&&$?.content)this._emit("content",J,$.content)},Rz=function Z(){if(this.ended)throw new I1("stream has ended, this shouldn't happen");const Y=S7(this,v5,"f");if(!Y)throw new I1("request ended without sending any chunks");return QB(this,v5,void 0,"f"),nA1(Y)},$n=function Z(Y){var X,J;let $=S7(this,v5,"f");const{choices:W,...G}=Y;if(!$)$=QB(this,v5,{...G,choices:[]},"f");else Object.assign($,G);for(let{delta:K,finish_reason:Q,index:z,...H}of Y.choices){let F=$.choices[z];if(!F){$.choices[z]={finish_reason:Q,index:z,message:K,...H};continue}if(Q)F.finish_reason=Q;if(Object.assign(F,H),!K)continue;const{content:U,function_call:V,role:q,tool_calls:L}=K;if(U)F.message.content=(F.message.content||"")+U;if(q)F.message.role=q;if(V)if(!F.message.function_call)F.message.function_call=V;else{if(V.name)F.message.function_call.name=V.name;if(V.arguments)(X=F.message.function_call).arguments??(X.arguments=""),F.message.function_call.arguments+=V.arguments}if(L){if(!F.message.tool_calls)F.message.tool_calls=[];for(let{index:R,id:B,type:N,function:M}of L){const D=(J=F.message.tool_calls)[R]??(J[R]={});if(B)D.id=B;if(N)D.type=N;if(M)D.function??(D.function={arguments:""});if(M?.name)D.function.name=M.name;if(M?.arguments)D.function.arguments+=M.arguments}}}return $},Symbol.asyncIterator)](){const Z=[],Y=[];let X=!1;return this.on("chunk",(J)=>{const $=Y.shift();if($)$(J);else Z.push(J)}),this.on("end",()=>{X=!0;for(let J of Y)J(void 0);Y.length=0}),{next:async()=>{if(!Z.length){if(X)return{value:void 0,done:!0};return new Promise(($)=>Y.push($)).then(($)=>$?{value:$,done:!1}:{value:void 0,done:!0})}return{value:Z.shift(),done:!1}}}}toReadableStream(){return new o7(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}class zZ extends QZ{static fromReadableStream(Z){const Y=new zZ;return Y._run(()=>Y._fromReadableStream(Z)),Y}static runFunctions(Z,Y,X){const J=new zZ;return J._run(()=>J._runFunctions(Z,Y,{...X,headers:{...X?.headers,"X-Stainless-Helper-Method":"runFunctions"}})),J}static runTools(Z,Y,X){const J=new zZ;return J._run(()=>J._runTools(Z,Y,{...X,headers:{...X?.headers,"X-Stainless-Helper-Method":"runTools"}})),J}}class Bz extends J1{runFunctions(Z,Y){if(Z.stream)return zZ.runFunctions(this._client.chat.completions,Z,Y);return jX.runFunctions(this._client.chat.completions,Z,Y)}runTools(Z,Y){if(Z.stream)return zZ.runTools(this._client.chat.completions,Z,Y);return jX.runTools(this._client.chat.completions,Z,Y)}stream(Z,Y){return QZ.createChatCompletion(this._client.chat.completions,Z,Y)}}class EX extends J1{constructor(){super(...arguments);this.completions=new Bz(this._client)}}(function(Z){Z.Completions=Bz})(EX||(EX={}));class CX extends J1{retrieve(Z,Y,X,J){return this._client.get(`/threads/${Z}/messages/${Y}/files/${X}`,{...J,headers:{"OpenAI-Beta":"assistants=v1",...J?.headers}})}list(Z,Y,X={},J){if(v0(X))return this.list(Z,Y,{},X);return this._client.getAPIList(`/threads/${Z}/messages/${Y}/files`,OX,{query:X,...J,headers:{"OpenAI-Beta":"assistants=v1",...J?.headers}})}}class OX extends n0{}(function(Z){Z.MessageFilesPage=OX})(CX||(CX={}));class SX extends J1{constructor(){super(...arguments);this.files=new CX(this._client)}create(Z,Y,X){return this._client.post(`/threads/${Z}/messages`,{body:Y,...X,headers:{"OpenAI-Beta":"assistants=v1",...X?.headers}})}retrieve(Z,Y,X){return this._client.get(`/threads/${Z}/messages/${Y}`,{...X,headers:{"OpenAI-Beta":"assistants=v1",...X?.headers}})}update(Z,Y,X,J){return this._client.post(`/threads/${Z}/messages/${Y}`,{body:X,...J,headers:{"OpenAI-Beta":"assistants=v1",...J?.headers}})}list(Z,Y={},X){if(v0(Y))return this.list(Z,{},Y);return this._client.getAPIList(`/threads/${Z}/messages`,kX,{query:Y,...X,headers:{"OpenAI-Beta":"assistants=v1",...X?.headers}})}}class kX extends n0{}(function(Z){Z.ThreadMessagesPage=kX,Z.Files=CX,Z.MessageFilesPage=OX})(SX||(SX={}));class _X extends J1{retrieve(Z,Y,X,J){return this._client.get(`/threads/${Z}/runs/${Y}/steps/${X}`,{...J,headers:{"OpenAI-Beta":"assistants=v1",...J?.headers}})}list(Z,Y,X={},J){if(v0(X))return this.list(Z,Y,{},X);return this._client.getAPIList(`/threads/${Z}/runs/${Y}/steps`,xX,{query:X,...J,headers:{"OpenAI-Beta":"assistants=v1",...J?.headers}})}}class xX extends n0{}(function(Z){Z.RunStepsPage=xX})(_X||(_X={}));class fX extends J1{constructor(){super(...arguments);this.steps=new _X(this._client)}create(Z,Y,X){return this._client.post(`/threads/${Z}/runs`,{body:Y,...X,headers:{"OpenAI-Beta":"assistants=v1",...X?.headers}})}retrieve(Z,Y,X){return this._client.get(`/threads/${Z}/runs/${Y}`,{...X,headers:{"OpenAI-Beta":"assistants=v1",...X?.headers}})}update(Z,Y,X,J){return this._client.post(`/threads/${Z}/runs/${Y}`,{body:X,...J,headers:{"OpenAI-Beta":"assistants=v1",...J?.headers}})}list(Z,Y={},X){if(v0(Y))return this.list(Z,{},Y);return this._client.getAPIList(`/threads/${Z}/runs`,yX,{query:Y,...X,headers:{"OpenAI-Beta":"assistants=v1",...X?.headers}})}cancel(Z,Y,X){return this._client.post(`/threads/${Z}/runs/${Y}/cancel`,{...X,headers:{"OpenAI-Beta":"assistants=v1",...X?.headers}})}submitToolOutputs(Z,Y,X,J){return this._client.post(`/threads/${Z}/runs/${Y}/submit_tool_outputs`,{body:X,...J,headers:{"OpenAI-Beta":"assistants=v1",...J?.headers}})}}class yX extends n0{}(function(Z){Z.RunsPage=yX,Z.Steps=_X,Z.RunStepsPage=xX})(fX||(fX={}));class gX extends J1{constructor(){super(...arguments);this.runs=new fX(this._client),this.messages=new SX(this._client)}create(Z={},Y){if(v0(Z))return this.create({},Z);return this._client.post("/threads",{body:Z,...Y,headers:{"OpenAI-Beta":"assistants=v1",...Y?.headers}})}retrieve(Z,Y){return this._client.get(`/threads/${Z}`,{...Y,headers:{"OpenAI-Beta":"assistants=v1",...Y?.headers}})}update(Z,Y,X){return this._client.post(`/threads/${Z}`,{body:Y,...X,headers:{"OpenAI-Beta":"assistants=v1",...X?.headers}})}del(Z,Y){return this._client.delete(`/threads/${Z}`,{...Y,headers:{"OpenAI-Beta":"assistants=v1",...Y?.headers}})}createAndRun(Z,Y){return this._client.post("/threads/runs",{body:Z,...Y,headers:{"OpenAI-Beta":"assistants=v1",...Y?.headers}})}}(function(Z){Z.Runs=fX,Z.RunsPage=yX,Z.Messages=SX,Z.ThreadMessagesPage=kX})(gX||(gX={}));class HZ extends J1{constructor(){super(...arguments);this.chat=new EX(this._client),this.assistants=new PX(this._client),this.threads=new gX(this._client)}}(function(Z){Z.Chat=EX,Z.Assistants=PX,Z.AssistantsPage=TX,Z.Threads=gX})(HZ||(HZ={}));class FZ extends J1{create(Z,Y){return this._client.post("/completions",{body:Z,...Y,stream:Z.stream??!1})}}(function(Z){})(FZ||(FZ={}));class UZ extends J1{create(Z,Y){return this._client.post("/embeddings",{body:Z,...Y})}}(function(Z){})(UZ||(UZ={}));class VZ extends J1{create(Z,Y){return this._client.post("/edits",{body:Z,...Y})}}(function(Z){})(VZ||(VZ={}));class qZ extends J1{create(Z,Y){return this._client.post("/files",e7({body:Z,...Y}))}retrieve(Z,Y){return this._client.get(`/files/${Z}`,Y)}list(Z={},Y){if(v0(Z))return this.list({},Z);return this._client.getAPIList("/files",LZ,{query:Z,...Y})}del(Z,Y){return this._client.delete(`/files/${Z}`,Y)}content(Z,Y){return this._client.get(`/files/${Z}/content`,{...Y,__binaryResponse:!0})}retrieveContent(Z,Y){return this._client.get(`/files/${Z}/content`,{...Y,headers:{Accept:"application/json",...Y?.headers}})}async waitForProcessing(Z,{pollInterval:Y=5000,maxWait:X=1800000}={}){const J=new Set(["processed","error","deleted"]),$=Date.now();let W=await this.retrieve(Z);while(!W.status||!J.has(W.status))if(await tM(Y),W=await this.retrieve(Z),Date.now()-$>X)throw new JZ({message:`Giving up on waiting for file ${Z} to finish processing after ${X} milliseconds.`});return W}}class LZ extends m4{}(function(Z){Z.FileObjectsPage=LZ})(qZ||(qZ={}));class wZ extends J1{create(Z,Y){return this._client.post("/fine-tunes",{body:Z,...Y})}retrieve(Z,Y){return this._client.get(`/fine-tunes/${Z}`,Y)}list(Z){return this._client.getAPIList("/fine-tunes",RZ,Z)}cancel(Z,Y){return this._client.post(`/fine-tunes/${Z}/cancel`,Y)}listEvents(Z,Y,X){return this._client.get(`/fine-tunes/${Z}/events`,{query:Y,timeout:86400000,...X,stream:Y?.stream??!1})}}class RZ extends m4{}(function(Z){Z.FineTunesPage=RZ})(wZ||(wZ={}));class bX extends J1{create(Z,Y){return this._client.post("/fine_tuning/jobs",{body:Z,...Y})}retrieve(Z,Y){return this._client.get(`/fine_tuning/jobs/${Z}`,Y)}list(Z={},Y){if(v0(Z))return this.list({},Z);return this._client.getAPIList("/fine_tuning/jobs",vX,{query:Z,...Y})}cancel(Z,Y){return this._client.post(`/fine_tuning/jobs/${Z}/cancel`,Y)}listEvents(Z,Y={},X){if(v0(Y))return this.listEvents(Z,{},Y);return this._client.getAPIList(`/fine_tuning/jobs/${Z}/events`,hX,{query:Y,...X})}}class vX extends n0{}class hX extends n0{}(function(Z){Z.FineTuningJobsPage=vX,Z.FineTuningJobEventsPage=hX})(bX||(bX={}));class MZ extends J1{constructor(){super(...arguments);this.jobs=new bX(this._client)}}(function(Z){Z.Jobs=bX,Z.FineTuningJobsPage=vX,Z.FineTuningJobEventsPage=hX})(MZ||(MZ={}));class BZ extends J1{createVariation(Z,Y){return this._client.post("/images/variations",e7({body:Z,...Y}))}edit(Z,Y){return this._client.post("/images/edits",e7({body:Z,...Y}))}generate(Z,Y){return this._client.post("/images/generations",{body:Z,...Y})}}(function(Z){})(BZ||(BZ={}));class NZ extends J1{retrieve(Z,Y){return this._client.get(`/models/${Z}`,Y)}list(Z){return this._client.getAPIList("/models",AZ,Z)}del(Z,Y){return this._client.delete(`/models/${Z}`,Y)}}class AZ extends m4{}(function(Z){Z.ModelsPage=AZ})(NZ||(NZ={}));class DZ extends J1{create(Z,Y){return this._client.post("/moderations",{body:Z,...Y})}}(function(Z){})(DZ||(DZ={}));var Hn;class h0 extends rM{constructor({apiKey:Z=oM("OPENAI_API_KEY"),organization:Y=oM("OPENAI_ORG_ID")??null,...X}={}){if(Z===void 0)throw new I1("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const J={apiKey:Z,organization:Y,...X,baseURL:X.baseURL??"https://api.openai.com/v1"};if(!J.dangerouslyAllowBrowser&&oi())throw new I1("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n");super({baseURL:J.baseURL,timeout:J.timeout??600000,httpAgent:J.httpAgent,maxRetries:J.maxRetries,fetch:J.fetch});this.completions=new FZ(this),this.chat=new WZ(this),this.edits=new VZ(this),this.embeddings=new UZ(this),this.files=new qZ(this),this.images=new BZ(this),this.audio=new GZ(this),this.moderations=new DZ(this),this.models=new NZ(this),this.fineTuning=new MZ(this),this.fineTunes=new wZ(this),this.beta=new HZ(this),this._options=J,this.apiKey=Z,this.organization=Y}defaultQuery(){return this._options.defaultQuery}defaultHeaders(Z){return{...super.defaultHeaders(Z),"OpenAI-Organization":this.organization,...this._options.defaultHeaders}}authHeaders(Z){return{Authorization:`Bearer ${this.apiKey}`}}}Hn=h0;h0.OpenAI=Hn;h0.OpenAIError=I1;h0.APIError=b0;h0.APIConnectionError=XZ;h0.APIConnectionTimeoutError=JZ;h0.APIUserAbortError=e6;h0.NotFoundError=Jz;h0.ConflictError=$z;h0.RateLimitError=Gz;h0.BadRequestError=Zz;h0.AuthenticationError=Yz;h0.InternalServerError=Kz;h0.PermissionDeniedError=Xz;h0.UnprocessableEntityError=Wz;(function(Z){Z.toFile=nM,Z.fileFromPath=eQ,Z.Page=m4,Z.CursorPage=n0,Z.Completions=FZ,Z.Chat=WZ,Z.Edits=VZ,Z.Embeddings=UZ,Z.Files=qZ,Z.FileObjectsPage=LZ,Z.Images=BZ,Z.Audio=GZ,Z.Moderations=DZ,Z.Models=NZ,Z.ModelsPage=AZ,Z.FineTuning=MZ,Z.FineTunes=wZ,Z.FineTunesPage=RZ,Z.Beta=HZ})(h0||(h0={}));var Fn=h0;var B$=function(Z){switch(Un.call(Z)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return X4(Z,Error)}},FB=function(Z,Y){return Un.call(Z)===`[object ${Y}]`};var Y4=function(Z){return FB(Z,"String")},Nz=function(Z){return Z===null||typeof Z!=="object"&&typeof Z!=="function"},T6=function(Z){return FB(Z,"Object")},UB=function(Z){return typeof Event!=="undefined"&&X4(Z,Event)},VB=function(Z){return typeof Element!=="undefined"&&X4(Z,Element)},N$=function(Z){return FB(Z,"RegExp")},a0=function(Z){return Boolean(Z&&Z.then&&typeof Z.then==="function")},qB=function(Z){return T6(Z)&&("nativeEvent"in Z)&&("preventDefault"in Z)&&("stopPropagation"in Z)},A$=function(Z){return typeof Z==="number"&&Z!==Z},X4=function(Z,Y){try{return Z instanceof Y}catch(X){return!1}},Az=function(Z){return!!(typeof Z==="object"&&Z!==null&&(Z.__isVue||Z._isVue))},Un=Object.prototype.toString;var J4=function(Z,Y=0){if(typeof Z!=="string"||Y===0)return Z;return Z.length<=Y?Z:`${Z.slice(0,Y)}...`},D$=function(Z,Y){let X=Z;const J=X.length;if(J<=150)return X;if(Y>J)Y=J;let $=Math.max(Y-60,0);if($<5)$=0;let W=Math.min($+140,J);if(W>J-5)W=J;if(W===J)$=Math.max(W-140,0);if(X=X.slice($,W),$>0)X=`'{snip} ${X}`;if(W<J)X+=" {snip}";return X};var Vn=function(Z,Y,X=!1){if(!Y4(Z))return!1;if(N$(Y))return Y.test(Z);if(Y4(Y))return X?Z===Y:Z.includes(Y);return!1},$4=function(Z,Y=[],X=!1){return Y.some((J)=>Vn(Z,J,X))};var wB=function(Z,Y,X=250,J,$,W,G){if(!W.exception||!W.exception.values||!G||!X4(G.originalException,Error))return;const K=W.exception.values.length>0?W.exception.values[W.exception.values.length-1]:void 0;if(K)W.exception.values=Y21(LB(Z,Y,$,G.originalException,J,W.exception.values,K,0),X)},LB=function(Z,Y,X,J,$,W,G,K){if(W.length>=X+1)return W;let Q=[...W];if(X4(J[$],Error)){qn(G,K);const z=Z(Y,J[$]),H=Q.length;Ln(z,$,H,K),Q=LB(Z,Y,X,J[$],$,[z,...Q],z,H)}if(Array.isArray(J.errors))J.errors.forEach((z,H)=>{if(X4(z,Error)){qn(G,K);const F=Z(Y,z),U=Q.length;Ln(F,`errors[${H}]`,U,K),Q=LB(Z,Y,X,z,$,[F,...Q],F,U)}});return Q},qn=function(Z,Y){Z.mechanism=Z.mechanism||{type:"generic",handled:!0},Z.mechanism={...Z.mechanism,is_exception_group:!0,exception_id:Y}},Ln=function(Z,Y,X,J){Z.mechanism=Z.mechanism||{type:"generic",handled:!0},Z.mechanism={...Z.mechanism,type:"chained",source:Y,exception_id:X,parent_id:J}},Y21=function(Z,Y){return Z.map((X)=>{if(X.value)X.value=J4(X.value,Y);return X})};var Dz=function(Z){return Z&&Z.Math==Math?Z:void 0},P$=function(){return k1},T$=function(Z,Y,X){const J=X||k1,$=J.__SENTRY__=J.__SENTRY__||{};return $[Z]||($[Z]=Y())},k1=typeof globalThis=="object"&&Dz(globalThis)||typeof window=="object"&&Dz(window)||typeof self=="object"&&Dz(self)||typeof global=="object"&&Dz(global)||function(){return this}()||{};var wn=function(Z,Y={}){if(!Z)return"<unknown>";try{let X=Z;const J=5,$=[];let W=0,G=0;const K=" > ",Q=K.length;let z;const H=Array.isArray(Y)?Y:Y.keyAttrs,F=!Array.isArray(Y)&&Y.maxStringLength||X21;while(X&&W++<J){if(z=J21(X,H),z==="html"||W>1&&G+$.length*Q+z.length>=F)break;$.push(z),G+=z.length,X=X.parentNode}return $.reverse().join(K)}catch(X){return"<unknown>"}},J21=function(Z,Y){const X=Z,J=[];let $,W,G,K,Q;if(!X||!X.tagName)return"";J.push(X.tagName.toLowerCase());const z=Y&&Y.length?Y.filter((F)=>X.getAttribute(F)).map((F)=>[F,X.getAttribute(F)]):null;if(z&&z.length)z.forEach((F)=>{J.push(`[${F[0]}="${F[1]}"]`)});else{if(X.id)J.push(`#${X.id}`);if($=X.className,$&&Y4($)){W=$.split(/\s+/);for(Q=0;Q<W.length;Q++)J.push(`.${W[Q]}`)}}const H=["aria-label","type","name","title","alt"];for(Q=0;Q<H.length;Q++)if(G=H[Q],K=X.getAttribute(G),K)J.push(`[${G}="${K}"]`);return J.join("")};var og1=P$(),X21=80;var W4=typeof __SENTRY_DEBUG__==="undefined"||__SENTRY_DEBUG__;var y8=function(Z){if(!("console"in k1))return Z();const Y=k1.console,X={},J=Object.keys(mX);J.forEach(($)=>{const W=mX[$];X[$]=Y[$],Y[$]=W});try{return Z()}finally{J.forEach(($)=>{Y[$]=X[$]})}},W21=function(){let Z=!1;const Y={enable:()=>{Z=!0},disable:()=>{Z=!1},isEnabled:()=>Z};if(W4)I$.forEach((X)=>{Y[X]=(...J)=>{if(Z)y8(()=>{k1.console[X](`${$21}[${X}]:`,...J)})}});else I$.forEach((X)=>{Y[X]=()=>{return}});return Y},$21="Sentry Logger ",I$=["debug","info","warn","error","log","assert","trace"],mX={},f=W21();var K21=function(Z){return Z==="http"||Z==="https"},h5=function(Z,Y=!1){const{host:X,path:J,pass:$,port:W,projectId:G,protocol:K,publicKey:Q}=Z;return`${K}://${Q}${Y&&$?`:${$}`:""}`+`@${X}${W?`:${W}`:""}/${J?`${J}/`:J}${G}`},Rn=function(Z){const Y=G21.exec(Z);if(!Y){y8(()=>{console.error(`Invalid Sentry Dsn: ${Z}`)});return}const[X,J,$="",W,G="",K]=Y.slice(1);let Q="",z=K;const H=z.split("/");if(H.length>1)Q=H.slice(0,-1).join("/"),z=H.pop();if(z){const F=z.match(/^\d+/);if(F)z=F[0]}return Mn({host:W,pass:$,path:Q,projectId:z,port:G,protocol:X,publicKey:J})},Mn=function(Z){return{protocol:Z.protocol,publicKey:Z.publicKey||"",pass:Z.pass||"",host:Z.host,port:Z.port||"",path:Z.path||"",projectId:Z.projectId}},Q21=function(Z){if(!W4)return!0;const{port:Y,projectId:X,protocol:J}=Z;if(["protocol","publicKey","host","projectId"].find((G)=>{if(!Z[G])return f.error(`Invalid Sentry Dsn: ${G} missing`),!0;return!1}))return!1;if(!X.match(/^\d+$/))return f.error(`Invalid Sentry Dsn: Invalid projectId ${X}`),!1;if(!K21(J))return f.error(`Invalid Sentry Dsn: Invalid protocol ${J}`),!1;if(Y&&isNaN(parseInt(Y,10)))return f.error(`Invalid Sentry Dsn: Invalid port ${Y}`),!1;return!0},Pz=function(Z){const Y=typeof Z==="string"?Rn(Z):Mn(Z);if(!Y||!Q21(Y))return;return Y},G21=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;class g8 extends Error{constructor(Z,Y="warn"){super(Z);this.message=Z,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=Y}}var j0=function(Z,Y,X){if(!(Y in Z))return;const J=Z[Y],$=X(J);if(typeof $==="function")An($,J);Z[Y]=$},uX=function(Z,Y,X){try{Object.defineProperty(Z,Y,{value:X,writable:!0,configurable:!0})}catch(J){W4&&f.log(`Failed to add non-enumerable property "${Y}" to object`,Z)}},An=function(Z,Y){try{const X=Y.prototype||{};Z.prototype=Y.prototype=X,uX(Z,"__sentry_original__",Y)}catch(X){}},MB=function(Z){return Z.__sentry_original__},BB=function(Z){return Object.keys(Z).map((Y)=>`${encodeURIComponent(Y)}=${encodeURIComponent(Z[Y])}`).join("&")},Tz=function(Z){if(B$(Z))return{message:Z.message,name:Z.name,stack:Z.stack,...Nn(Z)};else if(UB(Z)){const Y={type:Z.type,target:Bn(Z.target),currentTarget:Bn(Z.currentTarget),...Nn(Z)};if(typeof CustomEvent!=="undefined"&&X4(Z,CustomEvent))Y.detail=Z.detail;return Y}else return Z},Bn=function(Z){try{return VB(Z)?wn(Z):Object.prototype.toString.call(Z)}catch(Y){return"<unknown>"}},Nn=function(Z){if(typeof Z==="object"&&Z!==null){const Y={};for(let X in Z)if(Object.prototype.hasOwnProperty.call(Z,X))Y[X]=Z[X];return Y}else return{}},NB=function(Z,Y=40){const X=Object.keys(Tz(Z));if(X.sort(),!X.length)return"[object has no keys]";if(X[0].length>=Y)return J4(X[0],Y);for(let J=X.length;J>0;J--){const $=X.slice(0,J).join(", ");if($.length>Y)continue;if(J===X.length)return $;return J4($,Y)}return""},S0=function(Z){return RB(Z,new Map)},RB=function(Z,Y){if(T6(Z)){const X=Y.get(Z);if(X!==void 0)return X;const J={};Y.set(Z,J);for(let $ of Object.keys(Z))if(typeof Z[$]!=="undefined")J[$]=RB(Z[$],Y);return J}if(Array.isArray(Z)){const X=Y.get(Z);if(X!==void 0)return X;const J=[];return Y.set(Z,J),Z.forEach(($)=>{J.push(RB($,Y))}),J}return Z};var z21=function(Z,Y=!1){return!(Y||Z&&!Z.startsWith("/")&&!Z.includes(":\\")&&!Z.startsWith(".")&&!Z.match(/^[a-zA-Z]([a-zA-Z0-9.\-+])*:\/\//))&&Z!==void 0&&!Z.includes("node_modules/")},Dn=function(Z){const Y=/^\s*[-]{4,}$/,X=/at (?:async )?(?:(.+?)\s+\()?(?:(.+):(\d+):(\d+)?|([^)]+))\)?/;return(J)=>{const $=J.match(X);if($){let W,G,K,Q,z;if($[1]){K=$[1];let U=K.lastIndexOf(".");if(K[U-1]===".")U--;if(U>0){W=K.slice(0,U),G=K.slice(U+1);const V=W.indexOf(".Module");if(V>0)K=K.slice(V+1),W=W.slice(0,V)}Q=void 0}if(G)Q=W,z=G;if(G==="<anonymous>")z=void 0,K=void 0;if(K===void 0)z=z||"<anonymous>",K=Q?`${Q}.${z}`:z;let H=$[2]&&$[2].startsWith("file://")?$[2].slice(7):$[2];const F=$[5]==="native";if(!H&&$[5]&&!F)H=$[5];return{filename:H,module:Z?Z(H):void 0,function:K,lineno:parseInt($[3],10)||void 0,colno:parseInt($[4],10)||void 0,in_app:z21(H,F)}}if(J.match(Y))return{filename:J};return}};var Iz=function(...Z){const Y=Z.sort((X,J)=>X[0]-J[0]).map((X)=>X[1]);return(X,J=0)=>{const $=[],W=X.split("\n");for(let G=J;G<W.length;G++){const K=W[G];if(K.length>1024)continue;const Q=Pn.test(K)?K.replace(Pn,"$1"):K;if(Q.match(/\S*Error: /))continue;for(let z of Y){const H=z(Q);if(H){$.push(H);break}}if($.length>=In)break}return jn($)}},DB=function(Z){if(Array.isArray(Z))return Iz(...Z);return Z},jn=function(Z){if(!Z.length)return[];const Y=Array.from(Z);if(/sentryWrapped/.test(Y[Y.length-1].function||""))Y.pop();if(Y.reverse(),Tn.test(Y[Y.length-1].function||"")){if(Y.pop(),Tn.test(Y[Y.length-1].function||""))Y.pop()}return Y.slice(0,In).map((X)=>({...X,filename:X.filename||Y[Y.length-1].filename,function:X.function||"?"}))},j$=function(Z){try{if(!Z||typeof Z!=="function")return AB;return Z.name||AB}catch(Y){return AB}},PB=function(Z){return[90,Dn(Z)]},In=50,Pn=/\(error: (.*)\)/,Tn=/captureMessage|captureException/,AB="<anonymous>";var dX=function(Z,Y){jz[Z]=jz[Z]||[],jz[Z].push(Y)};var cX=function(Z,Y){if(!En[Z])Y(),En[Z]=!0},lX=function(Z,Y){const X=Z&&jz[Z];if(!X)return;for(let J of X)try{J(Y)}catch($){W4&&f.error(`Error while triggering instrumentation handler.\nType: ${Z}\nName: ${j$(J)}\nError:`,$)}},jz={},En={};var TB=function(Z){dX("console",Z),cX("console",H21)},H21=function(){if(!("console"in k1))return;I$.forEach(function(Z){if(!(Z in k1.console))return;j0(k1.console,Z,function(Y){return mX[Z]=Y,function(...X){lX("console",{args:X,level:Z});const $=mX[Z];$&&$.apply(k1.console,X)}})})};var L0=function(){const Z=k1,Y=Z.crypto||Z.msCrypto;let X=()=>Math.random()*16;try{if(Y&&Y.randomUUID)return Y.randomUUID().replace(/-/g,"");if(Y&&Y.getRandomValues)X=()=>Y.getRandomValues(new Uint8Array(1))[0]}catch(J){}return([1e7]+1000+4000+8000+100000000000).replace(/[018]/g,(J)=>(J^(X()&15)>>J/4).toString(16))},Cn=function(Z){return Z.exception&&Z.exception.values?Z.exception.values[0]:void 0},d4=function(Z){const{message:Y,event_id:X}=Z;if(Y)return Y;const J=Cn(Z);if(J){if(J.type&&J.value)return`${J.type}: ${J.value}`;return J.type||J.value||X||"<unknown>"}return X||"<unknown>"},IB=function(Z,Y,X){const J=Z.exception=Z.exception||{},$=J.values=J.values||[],W=$[0]=$[0]||{};if(!W.value)W.value=Y||"";if(!W.type)W.type=X||"Error"},E$=function(Z,Y){const X=Cn(Z);if(!X)return;const J={type:"generic",handled:!0},$=X.mechanism;if(X.mechanism={...J,...$,...Y},Y&&("data"in Y)){const W={...$&&$.data,...Y.data};X.mechanism.data=W}},jB=function(Z){const Y=Z.match(F21)||[],X=parseInt(Y[1],10),J=parseInt(Y[2],10),$=parseInt(Y[3],10);return{buildmetadata:Y[5],major:isNaN(X)?void 0:X,minor:isNaN(J)?void 0:J,patch:isNaN($)?void 0:$,prerelease:Y[4]}},EB=function(Z,Y,X=5){if(Y.lineno===void 0)return;const J=Z.length,$=Math.max(Math.min(J-1,Y.lineno-1),0);Y.pre_context=Z.slice(Math.max(0,$-X),$).map((W)=>D$(W,0)),Y.context_line=D$(Z[Math.min(J-1,$)],Y.colno||0),Y.post_context=Z.slice(Math.min($+1,J),$+1+X).map((W)=>D$(W,0))},Ez=function(Z){if(Z&&Z.__sentry_captured__)return!0;try{uX(Z,"__sentry_captured__",!0)}catch(Y){}return!1},m5=function(Z){return Array.isArray(Z)?Z:[Z]},F21=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;var CB=function(Z){dX("error",Z),cX("error",U21)},U21=function(){Cz=k1.onerror,k1.onerror=function(Z,Y,X,J,$){if(lX("error",{column:J,error:$,line:X,msg:Z,url:Y}),Cz&&!Cz.__SENTRY_LOADER__)return Cz.apply(this,arguments);return!1},k1.onerror.__SENTRY_INSTRUMENTED__=!0},Cz=null;var OB=function(Z){dX("unhandledrejection",Z),cX("unhandledrejection",V21)},V21=function(){Oz=k1.onunhandledrejection,k1.onunhandledrejection=function(Z){if(lX("unhandledrejection",Z),Oz&&!Oz.__SENTRY_LOADER__)return Oz.apply(this,arguments);return!0},k1.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0},Oz=null;var On=function(){return typeof __SENTRY_BROWSER_BUNDLE__!=="undefined"&&!!__SENTRY_BROWSER_BUNDLE__};var kB=function(){return!On()&&Object.prototype.toString.call(typeof process!=="undefined"?process:0)==="[object process]"},u5=function(Z,Y){return Z.require(Y)},Z7=function(Z){let Y;try{Y=u5(SB,Z)}catch(X){}try{const{cwd:X}=u5(SB,"process");Y=u5(SB,`${X()}/node_modules/${Z}`)}catch(X){}return Y};var Sn=function(){const Z=typeof WeakSet==="function",Y=Z?new WeakSet:[];function X($){if(Z){if(Y.has($))return!0;return Y.add($),!1}for(let W=0;W<Y.length;W++)if(Y[W]===$)return!0;return Y.push($),!1}function J($){if(Z)Y.delete($);else for(let W=0;W<Y.length;W++)if(Y[W]===$){Y.splice(W,1);break}}return[X,J]};var I6=function(Z,Y=100,X=Infinity){try{return Sz("",Z,Y,X)}catch(J){return{ERROR:`**non-serializable** (${J})`}}},kz=function(Z,Y=3,X=102400){const J=I6(Z,Y);if(R21(J)>X)return kz(Z,Y-1,X);return J},Sz=function(Z,Y,X=Infinity,J=Infinity,$=Sn()){const[W,G]=$;if(Y==null||["number","boolean","string"].includes(typeof Y)&&!A$(Y))return Y;const K=q21(Z,Y);if(!K.startsWith("[object "))return K;if(Y.__sentry_skip_normalization__)return Y;const Q=typeof Y.__sentry_override_normalization_depth__==="number"?Y.__sentry_override_normalization_depth__:X;if(Q===0)return K.replace("object ","");if(W(Y))return"[Circular ~]";const z=Y;if(z&&typeof z.toJSON==="function")try{const V=z.toJSON();return Sz("",V,Q-1,J,$)}catch(V){}const H=Array.isArray(Y)?[]:{};let F=0;const U=Tz(Y);for(let V in U){if(!Object.prototype.hasOwnProperty.call(U,V))continue;if(F>=J){H[V]="[MaxProperties ~]";break}const q=U[V];H[V]=Sz(V,q,Q-1,J,$),F++}return G(Y),H},q21=function(Z,Y){try{if(Z==="domain"&&Y&&typeof Y==="object"&&Y._events)return"[Domain]";if(Z==="domainEmitter")return"[DomainEmitter]";if(typeof global!=="undefined"&&Y===global)return"[Global]";if(typeof window!=="undefined"&&Y===window)return"[Window]";if(typeof document!=="undefined"&&Y===document)return"[Document]";if(Az(Y))return"[VueViewModel]";if(qB(Y))return"[SyntheticEvent]";if(typeof Y==="number"&&Y!==Y)return"[NaN]";if(typeof Y==="function")return`[Function: ${j$(Y)}]`;if(typeof Y==="symbol")return`[${String(Y)}]`;if(typeof Y==="bigint")return`[BigInt: ${String(Y)}]`;const X=L21(Y);if(/^HTML(\w*)Element$/.test(X))return`[HTMLElement: ${X}]`;return`[object ${X}]`}catch(X){return`**non-serializable** (${X})`}},L21=function(Z){const Y=Object.getPrototypeOf(Z);return Y?Y.constructor.name:"null prototype"},w21=function(Z){return~-encodeURI(Z).split(/%..|./).length},R21=function(Z){return w21(JSON.stringify(Z))};var j6=function(Z){return new N8((Y)=>{Y(Z)})},PZ=function(Z){return new N8((Y,X)=>{X(Z)})},c4;(function(Z){Z[Z.PENDING=0]="PENDING";const X=1;Z[Z.RESOLVED=X]="RESOLVED";const J=2;Z[Z.REJECTED=J]="REJECTED"})(c4||(c4={}));class N8{constructor(Z){N8.prototype.__init.call(this),N8.prototype.__init2.call(this),N8.prototype.__init3.call(this),N8.prototype.__init4.call(this),this._state=c4.PENDING,this._handlers=[];try{Z(this._resolve,this._reject)}catch(Y){this._reject(Y)}}then(Z,Y){return new N8((X,J)=>{this._handlers.push([!1,($)=>{if(!Z)X($);else try{X(Z($))}catch(W){J(W)}},($)=>{if(!Y)J($);else try{X(Y($))}catch(W){J(W)}}]),this._executeHandlers()})}catch(Z){return this.then((Y)=>Y,Z)}finally(Z){return new N8((Y,X)=>{let J,$;return this.then((W)=>{if($=!1,J=W,Z)Z()},(W)=>{if($=!0,J=W,Z)Z()}).then(()=>{if($){X(J);return}Y(J)})})}__init(){this._resolve=(Z)=>{this._setResult(c4.RESOLVED,Z)}}__init2(){this._reject=(Z)=>{this._setResult(c4.REJECTED,Z)}}__init3(){this._setResult=(Z,Y)=>{if(this._state!==c4.PENDING)return;if(a0(Y)){Y.then(this._resolve,this._reject);return}this._state=Z,this._value=Y,this._executeHandlers()}}__init4(){this._executeHandlers=()=>{if(this._state===c4.PENDING)return;const Z=this._handlers.slice();this._handlers=[],Z.forEach((Y)=>{if(Y[0])return;if(this._state===c4.RESOLVED)Y[1](this._value);if(this._state===c4.REJECTED)Y[2](this._value);Y[0]=!0})}}}var _B=function(Z){const Y=[];function X(){return Z===void 0||Y.length<Z}function J(G){return Y.splice(Y.indexOf(G),1)[0]}function $(G){if(!X())return PZ(new g8("Not adding Promise because buffer limit was reached."));const K=G();if(Y.indexOf(K)===-1)Y.push(K);return K.then(()=>J(K)).then(null,()=>J(K).then(null,()=>{})),K}function W(G){return new N8((K,Q)=>{let z=Y.length;if(!z)return K(!0);const H=setTimeout(()=>{if(G&&G>0)K(!1)},G);Y.forEach((F)=>{j6(F).then(()=>{if(!--z)clearTimeout(H),K(!0)},Q)})})}return{$:Y,add:$,drain:W}};var kn=function(Z){const Y={};let X=0;while(X<Z.length){const J=Z.indexOf("=",X);if(J===-1)break;let $=Z.indexOf(";",X);if($===-1)$=Z.length;else if($<J){X=Z.lastIndexOf(";",J-1)+1;continue}const W=Z.slice(X,J).trim();if(Y[W]===void 0){let G=Z.slice(J+1,$).trim();if(G.charCodeAt(0)===34)G=G.slice(1,-1);try{Y[W]=G.indexOf("%")!==-1?decodeURIComponent(G):G}catch(K){Y[W]=G}}X=$+1}return Y};var C$=function(Z){if(!Z)return{};const Y=Z.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!Y)return{};const X=Y[6]||"",J=Y[8]||"";return{host:Y[4],path:Y[5],protocol:Y[2],search:X,hash:J,relative:Y[5]+X+J}},TZ=function(Z){return Z.split(/[\?#]/,1)[0]},pX=function(Z){return Z.split(/\\?\//).filter((Y)=>Y.length>0&&Y!==",").length},O$=function(Z){const{protocol:Y,host:X,path:J}=Z,$=X&&X.replace(/^.*@/,"[filtered]:[filtered]@").replace(/(:80)$/,"").replace(/(:443)$/,"")||"";return`${Y?`${Y}://`:""}${$}${J}`};var IZ=function(Z,Y={}){const X=Z.method&&Z.method.toUpperCase();let J="",$="url";if(Y.customRoute||Z.route)J=Y.customRoute||`${Z.baseUrl||""}${Z.route&&Z.route.path}`,$="route";else if(Z.originalUrl||Z.url)J=TZ(Z.originalUrl||Z.url||"");let W="";if(Y.method&&X)W+=X;if(Y.method&&Y.path)W+=" ";if(Y.path&&J)W+=J;return[W,$]},N21=function(Z,Y){switch(Y){case"path":return IZ(Z,{path:!0})[0];case"handler":return Z.route&&Z.route.stack&&Z.route.stack[0]&&Z.route.stack[0].name||"<anonymous>";case"methodPath":default:{const X=Z._reconstructedRoute?Z._reconstructedRoute:void 0;return IZ(Z,{path:!0,method:!0,customRoute:X})[0]}}},A21=function(Z,Y){const X={};return(Array.isArray(Y)?Y:_n).forEach(($)=>{if(Z&&($ in Z))X[$]=Z[$]}),X},xB=function(Z,Y){const{include:X=B21,deps:J}=Y||{},$={},W=Z.headers||{},G=Z.method,K=Z.hostname||Z.host||W.host||"<no host>",Q=Z.protocol==="https"||Z.socket&&Z.socket.encrypted?"https":"http",z=Z.originalUrl||Z.url||"",H=z.startsWith(Q)?z:`${Q}://${K}${z}`;return X.forEach((F)=>{switch(F){case"headers":{if($.headers=W,!X.includes("cookies"))delete $.headers.cookie;break}case"method":{$.method=G;break}case"url":{$.url=H;break}case"cookies":{$.cookies=Z.cookies||W.cookie&&kn(W.cookie)||{};break}case"query_string":{$.query_string=D21(Z,J);break}case"data":{if(G==="GET"||G==="HEAD")break;if(Z.body!==void 0)$.data=Y4(Z.body)?Z.body:JSON.stringify(I6(Z.body));break}default:if({}.hasOwnProperty.call(Z,F))$[F]=Z[F]}}),$},fB=function(Z,Y,X){const J={...M21,...X&&X.include};if(J.request){const $=Array.isArray(J.request)?xB(Y,{include:J.request,deps:X&&X.deps}):xB(Y,{deps:X&&X.deps});Z.request={...Z.request,...$}}if(J.user){const $=Y.user&&T6(Y.user)?A21(Y.user,J.user):{};if(Object.keys($).length)Z.user={...Z.user,...$}}if(J.ip){const $=Y.ip||Y.socket&&Y.socket.remoteAddress;if($)Z.user={...Z.user,ip_address:$}}if(J.transaction&&!Z.transaction)Z.transaction=N21(Y,J.transaction);return Z},D21=function(Z,Y){let X=Z.originalUrl||Z.url||"";if(!X)return;if(X.startsWith("/"))X=`http://dogs.are.great${X}`;try{return Z.query||typeof URL!==void 0&&new URL(X).search.slice(1)||Y&&Y.url&&Y.url.parse(X).query||void 0}catch(J){return}};var M21={ip:!1,request:!0,transaction:!0,user:!0},B21=["cookies","data","headers","method","query_string","url"],_n=["id","username","email"];var yB=function(Z){return Z==="warn"?"warning":xn.includes(Z)?Z:"log"},xn=["fatal","error","warning","log","info","debug"];var P21=function(){const{performance:Z}=yn;if(!Z||!Z.now)return;const Y=Date.now()-Z.now();return{now:()=>Z.now(),timeOrigin:Y}},T21=function(){try{return u5(j21,"perf_hooks").performance}catch(Z){return}},yn=P$(),bB={nowSeconds:()=>Date.now()/1000},gB=kB()?T21():P21(),fn=gB===void 0?bB:{nowSeconds:()=>(gB.timeOrigin+gB.now())/1000},jZ=bB.nowSeconds.bind(bB),EZ=fn.nowSeconds.bind(fn);var S$,I21=(()=>{const{performance:Z}=yn;if(!Z||!Z.now){S$="none";return}const Y=3600000,X=Z.now(),J=Date.now(),$=Z.timeOrigin?Math.abs(Z.timeOrigin+X-J):Y,W=$<Y,G=Z.timing&&Z.timing.navigationStart,Q=typeof G==="number"?Math.abs(G+X-J):Y,z=Q<Y;if(W||z)if($<=Q)return S$="timeOrigin",Z.timeOrigin;else return S$="navigationStart",G;return S$="dateNow",J})();var hB=function(Z){if(!Y4(Z)&&!Array.isArray(Z))return;let Y={};if(Array.isArray(Z))Y=Z.reduce((J,$)=>{const W=gn($);return{...J,...W}},{});else{if(!Z)return;Y=gn(Z)}const X=Object.entries(Y).reduce((J,[$,W])=>{if($.match(bn)){const G=$.slice(vB.length);J[G]=W}return J},{});if(Object.keys(X).length>0)return X;else return},iX=function(Z){if(!Z)return;const Y=Object.entries(Z).reduce((X,[J,$])=>{if($)X[`${vB}${J}`]=$;return X},{});return E21(Y)},gn=function(Z){return Z.split(",").map((Y)=>Y.split("=").map((X)=>decodeURIComponent(X.trim()))).reduce((Y,[X,J])=>{return Y[X]=J,Y},{})},E21=function(Z){if(Object.keys(Z).length===0)return;return Object.entries(Z).reduce((Y,[X,J],$)=>{const W=`${encodeURIComponent(X)}=${encodeURIComponent(J)}`,G=$===0?W:`${Y},${W}`;if(G.length>vn)return W4&&f.warn(`Not adding key: ${X} with val: ${J} to baggage header due to exceeding baggage size limits.`),Y;else return G},"")};var vB="sentry-",bn=/^sentry-/,vn=8192;var mn=function(Z){if(!Z)return;const Y=Z.match(hn);if(!Y)return;let X;if(Y[3]==="1")X=!0;else if(Y[3]==="0")X=!1;return{traceId:Y[1],parentSampled:X,parentSpanId:Y[2]}},k$=function(Z,Y){const X=mn(Z),J=hB(Y),{traceId:$,parentSpanId:W,parentSampled:G}=X||{},K={traceId:$||L0(),spanId:L0().substring(16),sampled:G};if(W)K.parentSpanId=W;if(J)K.dsc=J;return{traceparentData:X,dynamicSamplingContext:J,propagationContext:K}},CZ=function(Z=L0(),Y=L0().substring(16),X){let J="";if(X!==void 0)J=X?"-1":"-0";return`${Z}-${Y}${J}`},hn=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");var d5=function(Z,Y=[]){return[Z,Y]},uB=function(Z,Y){const[X,J]=Z;return[X,[...J,Y]]},_z=function(Z,Y){const X=Z[1];for(let J of X){const $=J[0].type;if(Y(J,$))return!0}return!1};var mB=function(Z,Y){return(Y||new TextEncoder).encode(Z)},_$=function(Z,Y){const[X,J]=Z;let $=JSON.stringify(X);function W(G){if(typeof $==="string")$=typeof G==="string"?$+G:[mB($,Y),G];else $.push(typeof G==="string"?mB(G,Y):G)}for(let G of J){const[K,Q]=G;if(W(`\n${JSON.stringify(K)}\n`),typeof Q==="string"||Q instanceof Uint8Array)W(Q);else{let z;try{z=JSON.stringify(Q)}catch(H){z=JSON.stringify(I6(Q))}W(z)}}return typeof $==="string"?$:C21($)},C21=function(Z){const Y=Z.reduce(($,W)=>$+W.length,0),X=new Uint8Array(Y);let J=0;for(let $ of Z)X.set($,J),J+=$.length;return X};var dB=function(Z,Y){const X=typeof Z.data==="string"?mB(Z.data,Y):Z.data;return[S0({type:"attachment",length:X.length,filename:Z.filename,content_type:Z.contentType,attachment_type:Z.attachmentType}),X]},xz=function(Z){return O21[Z]},fz=function(Z){if(!Z||!Z.sdk)return;const{name:Y,version:X}=Z.sdk;return{name:Y,version:X}},cB=function(Z,Y,X,J){const $=Z.sdkProcessingMetadata&&Z.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:Z.event_id,sent_at:(new Date()).toISOString(),...Y&&{sdk:Y},...!!X&&J&&{dsn:h5(J)},...$&&{trace:S0({...$})}}},O21={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",statsd:"unknown"};var un=function(Z,Y=Date.now()){const X=parseInt(`${Z}`,10);if(!isNaN(X))return X*1000;const J=Date.parse(`${Z}`);if(!isNaN(J))return J-Y;return 60000},dn=function(Z,Y){return Z[Y]||Z.all||0},lB=function(Z,Y,X=Date.now()){return dn(Z,Y)>X},pB=function(Z,{statusCode:Y,headers:X},J=Date.now()){const $={...Z},W=X&&X["x-sentry-rate-limits"],G=X&&X["retry-after"];if(W)for(let K of W.trim().split(",")){const[Q,z]=K.split(":",2),H=parseInt(Q,10),F=(!isNaN(H)?H:60)*1000;if(!z)$.all=J+F;else for(let U of z.split(";"))$[U]=J+F}else if(G)$.all=J+un(G,J);else if(Y===429)$.all=J+60000;return $};var iB=function(Z,Y){return Z(Y.stack||"",1)},yz=function(Z,Y){const X={type:Y.name||Y.constructor.name,value:Y.message},J=iB(Z,Y);if(J.length)X.stacktrace={frames:J};return X},S21=function(Z){if(("name"in Z)&&typeof Z.name==="string"){let Y=`'${Z.name}' captured as exception`;if(("message"in Z)&&typeof Z.message==="string")Y+=` with message '${Z.message}'`;return Y}else if(("message"in Z)&&typeof Z.message==="string")return Z.message;else return`Object captured as exception with keys: ${NB(Z)}`},nB=function(Z,Y,X,J){let $=X;const G=J&&J.data&&J.data.mechanism||{handled:!0,type:"generic"};if(!B$(X)){if(T6(X)){const Q=Z(),z=Q.getClient(),H=z&&z.getOptions().normalizeDepth;Q.configureScope((U)=>{U.setExtra("__serialized__",kz(X,H))});const F=S21(X);$=J&&J.syntheticException||new Error(F),$.message=F}else $=J&&J.syntheticException||new Error(X),$.message=X;G.synthetic=!0}const K={exception:{values:[yz(Y,$)]}};return IB(K,void 0,void 0),E$(K,G),{...K,event_id:J&&J.event_id}},aB=function(Z,Y,X="info",J,$){const W={event_id:J&&J.event_id,level:X,message:Y};if($&&J&&J.syntheticException){const G=iB(Z,J.syntheticException);if(G.length)W.exception={values:[{value:Y,stacktrace:{frames:G}}]}}return W};class Y7{constructor(Z){this._maxSize=Z,this._cache=new Map}get size(){return this._cache.size}get(Z){const Y=this._cache.get(Z);if(Y===void 0)return;return this._cache.delete(Z),this._cache.set(Z,Y),Y}set(Z,Y){if(this._cache.size>=this._maxSize)this._cache.delete(this._cache.keys().next().value);this._cache.set(Z,Y)}remove(Z){const Y=this._cache.get(Z);if(Y)this._cache.delete(Z);return Y}clear(){this._cache.clear()}keys(){return Array.from(this._cache.keys())}values(){const Z=[];return this._cache.forEach((Y)=>Z.push(Y)),Z}}var x$=function(Z,Y){return Z!=null?Z:Y()};var h=function(Z){let Y=void 0,X=Z[0],J=1;while(J<Z.length){const $=Z[J],W=Z[J+1];if(J+=2,($==="optionalAccess"||$==="optionalCall")&&X==null)return;if($==="access"||$==="optionalAccess")Y=X,X=W(X);else if($==="call"||$==="optionalCall")X=W((...G)=>X.call(Y,...G)),Y=void 0}return X};var e=typeof __SENTRY_DEBUG__==="undefined"||__SENTRY_DEBUG__;var nX="production";var f$=function(){return T$("globalEventProcessors",()=>[])},sB=function(Z){f$().push(Z)},aX=function(Z,Y,X,J=0){return new N8(($,W)=>{const G=Z[J];if(Y===null||typeof G!=="function")$(Y);else{const K=G({...Y},X);if(e&&G.id&&K===null&&f.log(`Event processor "${G.id}" dropped event`),a0(K))K.then((Q)=>aX(Z,Q,X,J+1).then($)).then(null,W);else aX(Z,K,X,J+1).then($).then(null,W)}})};var cn=function(Z){const Y=EZ(),X={sid:L0(),init:!0,timestamp:Y,started:Y,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>k21(X)};if(Z)l4(X,Z);return X},l4=function(Z,Y={}){if(Y.user){if(!Z.ipAddress&&Y.user.ip_address)Z.ipAddress=Y.user.ip_address;if(!Z.did&&!Y.did)Z.did=Y.user.id||Y.user.email||Y.user.username}if(Z.timestamp=Y.timestamp||EZ(),Y.abnormal_mechanism)Z.abnormal_mechanism=Y.abnormal_mechanism;if(Y.ignoreDuration)Z.ignoreDuration=Y.ignoreDuration;if(Y.sid)Z.sid=Y.sid.length===32?Y.sid:L0();if(Y.init!==void 0)Z.init=Y.init;if(!Z.did&&Y.did)Z.did=`${Y.did}`;if(typeof Y.started==="number")Z.started=Y.started;if(Z.ignoreDuration)Z.duration=void 0;else if(typeof Y.duration==="number")Z.duration=Y.duration;else{const X=Z.timestamp-Z.started;Z.duration=X>=0?X:0}if(Y.release)Z.release=Y.release;if(Y.environment)Z.environment=Y.environment;if(!Z.ipAddress&&Y.ipAddress)Z.ipAddress=Y.ipAddress;if(!Z.userAgent&&Y.userAgent)Z.userAgent=Y.userAgent;if(typeof Y.errors==="number")Z.errors=Y.errors;if(Y.status)Z.status=Y.status},ln=function(Z,Y){let X={};if(Y)X={status:Y};else if(Z.status==="ok")X={status:"exited"};l4(Z,X)},k21=function(Z){return S0({sid:`${Z.sid}`,init:Z.init,started:new Date(Z.started*1000).toISOString(),timestamp:new Date(Z.timestamp*1000).toISOString(),status:Z.status,errors:Z.errors,did:typeof Z.did==="number"||typeof Z.did==="string"?`${Z.did}`:void 0,duration:Z.duration,abnormal_mechanism:Z.abnormal_mechanism,attrs:{release:Z.release,environment:Z.environment,ip_address:Z.ipAddress,user_agent:Z.userAgent}})};var pn=function(){return{traceId:L0(),spanId:L0().substring(16)}},_21=100;class X7{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=pn()}static clone(Z){const Y=new X7;if(Z)Y._breadcrumbs=[...Z._breadcrumbs],Y._tags={...Z._tags},Y._extra={...Z._extra},Y._contexts={...Z._contexts},Y._user=Z._user,Y._level=Z._level,Y._span=Z._span,Y._session=Z._session,Y._transactionName=Z._transactionName,Y._fingerprint=Z._fingerprint,Y._eventProcessors=[...Z._eventProcessors],Y._requestSession=Z._requestSession,Y._attachments=[...Z._attachments],Y._sdkProcessingMetadata={...Z._sdkProcessingMetadata},Y._propagationContext={...Z._propagationContext};return Y}addScopeListener(Z){this._scopeListeners.push(Z)}addEventProcessor(Z){return this._eventProcessors.push(Z),this}setUser(Z){if(this._user=Z||{},this._session)l4(this._session,{user:Z});return this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(Z){return this._requestSession=Z,this}setTags(Z){return this._tags={...this._tags,...Z},this._notifyScopeListeners(),this}setTag(Z,Y){return this._tags={...this._tags,[Z]:Y},this._notifyScopeListeners(),this}setExtras(Z){return this._extra={...this._extra,...Z},this._notifyScopeListeners(),this}setExtra(Z,Y){return this._extra={...this._extra,[Z]:Y},this._notifyScopeListeners(),this}setFingerprint(Z){return this._fingerprint=Z,this._notifyScopeListeners(),this}setLevel(Z){return this._level=Z,this._notifyScopeListeners(),this}setTransactionName(Z){return this._transactionName=Z,this._notifyScopeListeners(),this}setContext(Z,Y){if(Y===null)delete this._contexts[Z];else this._contexts[Z]=Y;return this._notifyScopeListeners(),this}setSpan(Z){return this._span=Z,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const Z=this.getSpan();return Z&&Z.transaction}setSession(Z){if(!Z)delete this._session;else this._session=Z;return this._notifyScopeListeners(),this}getSession(){return this._session}update(Z){if(!Z)return this;if(typeof Z==="function"){const Y=Z(this);return Y instanceof X7?Y:this}if(Z instanceof X7){if(this._tags={...this._tags,...Z._tags},this._extra={...this._extra,...Z._extra},this._contexts={...this._contexts,...Z._contexts},Z._user&&Object.keys(Z._user).length)this._user=Z._user;if(Z._level)this._level=Z._level;if(Z._fingerprint)this._fingerprint=Z._fingerprint;if(Z._requestSession)this._requestSession=Z._requestSession;if(Z._propagationContext)this._propagationContext=Z._propagationContext}else if(T6(Z)){if(Z=Z,this._tags={...this._tags,...Z.tags},this._extra={...this._extra,...Z.extra},this._contexts={...this._contexts,...Z.contexts},Z.user)this._user=Z.user;if(Z.level)this._level=Z.level;if(Z.fingerprint)this._fingerprint=Z.fingerprint;if(Z.requestSession)this._requestSession=Z.requestSession;if(Z.propagationContext)this._propagationContext=Z.propagationContext}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=pn(),this}addBreadcrumb(Z,Y){const X=typeof Y==="number"?Y:_21;if(X<=0)return this;const J={timestamp:jZ(),...Z},$=this._breadcrumbs;return $.push(J),this._breadcrumbs=$.length>X?$.slice(-X):$,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(Z){return this._attachments.push(Z),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(Z,Y={},X){if(this._extra&&Object.keys(this._extra).length)Z.extra={...this._extra,...Z.extra};if(this._tags&&Object.keys(this._tags).length)Z.tags={...this._tags,...Z.tags};if(this._user&&Object.keys(this._user).length)Z.user={...this._user,...Z.user};if(this._contexts&&Object.keys(this._contexts).length)Z.contexts={...this._contexts,...Z.contexts};if(this._level)Z.level=this._level;if(this._transactionName)Z.transaction=this._transactionName;if(this._span){Z.contexts={trace:this._span.getTraceContext(),...Z.contexts};const W=this._span.transaction;if(W){Z.sdkProcessingMetadata={dynamicSamplingContext:W.getDynamicSamplingContext(),...Z.sdkProcessingMetadata};const G=W.name;if(G)Z.tags={transaction:G,...Z.tags}}}this._applyFingerprint(Z);const J=this._getBreadcrumbs(),$=[...Z.breadcrumbs||[],...J];return Z.breadcrumbs=$.length>0?$:void 0,Z.sdkProcessingMetadata={...Z.sdkProcessingMetadata,...this._sdkProcessingMetadata,propagationContext:this._propagationContext},aX([...X||[],...f$(),...this._eventProcessors],Z,Y)}setSDKProcessingMetadata(Z){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...Z},this}setPropagationContext(Z){return this._propagationContext=Z,this}getPropagationContext(){return this._propagationContext}_getBreadcrumbs(){return this._breadcrumbs}_notifyScopeListeners(){if(!this._notifyingListeners)this._notifyingListeners=!0,this._scopeListeners.forEach((Z)=>{Z(this)}),this._notifyingListeners=!1}_applyFingerprint(Z){if(Z.fingerprint=Z.fingerprint?m5(Z.fingerprint):[],this._fingerprint)Z.fingerprint=Z.fingerprint.concat(this._fingerprint);if(Z.fingerprint&&!Z.fingerprint.length)delete Z.fingerprint}}var k7=function(){return k1.__SENTRY__=k1.__SENTRY__||{extensions:{},hub:void 0},k1},gz=function(Z){const Y=k7(),X=J7(Y);return tX(Y,Z),X},H1=function(){const Z=k7();if(Z.__SENTRY__&&Z.__SENTRY__.acs){const Y=Z.__SENTRY__.acs.getCurrentHub();if(Y)return Y}return nn(Z)},nn=function(Z=k7()){if(!an(Z)||J7(Z).isOlderThan(rB))tX(Z,new sX);return J7(Z)},rX=function(Z,Y=nn()){if(!an(Z)||J7(Z).isOlderThan(rB)){const X=Y.getStackTop();tX(Z,new sX(X.client,X7.clone(X.scope)))}},y$=function(Z){const Y=k7();Y.__SENTRY__=Y.__SENTRY__||{},Y.__SENTRY__.acs=Z},bz=function(Z,Y={}){const X=k7();if(X.__SENTRY__&&X.__SENTRY__.acs)return X.__SENTRY__.acs.runWithAsyncContext(Z,Y);return Z()},an=function(Z){return!!(Z&&Z.__SENTRY__&&Z.__SENTRY__.hub)},J7=function(Z){return T$("hub",()=>new sX,Z)},tX=function(Z,Y){if(!Z)return!1;const X=Z.__SENTRY__=Z.__SENTRY__||{};return X.hub=Y,!0},rB=4,x21=100;class sX{constructor(Z,Y=new X7,X=rB){if(this._version=X,this._stack=[{scope:Y}],Z)this.bindClient(Z)}isOlderThan(Z){return this._version<Z}bindClient(Z){const Y=this.getStackTop();if(Y.client=Z,Z&&Z.setupIntegrations)Z.setupIntegrations()}pushScope(){const Z=X7.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:Z}),Z}popScope(){if(this.getStack().length<=1)return!1;return!!this.getStack().pop()}withScope(Z){const Y=this.pushScope();try{Z(Y)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(Z,Y){const X=this._lastEventId=Y&&Y.event_id?Y.event_id:L0(),J=new Error("Sentry syntheticException");return this._withClient(($,W)=>{$.captureException(Z,{originalException:Z,syntheticException:J,...Y,event_id:X},W)}),X}captureMessage(Z,Y,X){const J=this._lastEventId=X&&X.event_id?X.event_id:L0(),$=new Error(Z);return this._withClient((W,G)=>{W.captureMessage(Z,Y,{originalException:Z,syntheticException:$,...X,event_id:J},G)}),J}captureEvent(Z,Y){const X=Y&&Y.event_id?Y.event_id:L0();if(!Z.type)this._lastEventId=X;return this._withClient((J,$)=>{J.captureEvent(Z,{...Y,event_id:X},$)}),X}lastEventId(){return this._lastEventId}addBreadcrumb(Z,Y){const{scope:X,client:J}=this.getStackTop();if(!J)return;const{beforeBreadcrumb:$=null,maxBreadcrumbs:W=x21}=J.getOptions&&J.getOptions()||{};if(W<=0)return;const K={timestamp:jZ(),...Z},Q=$?y8(()=>$(K,Y)):K;if(Q===null)return;if(J.emit)J.emit("beforeAddBreadcrumb",Q,Y);X.addBreadcrumb(Q,W)}setUser(Z){this.getScope().setUser(Z)}setTags(Z){this.getScope().setTags(Z)}setExtras(Z){this.getScope().setExtras(Z)}setTag(Z,Y){this.getScope().setTag(Z,Y)}setExtra(Z,Y){this.getScope().setExtra(Z,Y)}setContext(Z,Y){this.getScope().setContext(Z,Y)}configureScope(Z){const{scope:Y,client:X}=this.getStackTop();if(X)Z(Y)}run(Z){const Y=gz(this);try{Z(this)}finally{gz(Y)}}getIntegration(Z){const Y=this.getClient();if(!Y)return null;try{return Y.getIntegration(Z)}catch(X){return e&&f.warn(`Cannot retrieve integration ${Z.id} from the current Hub`),null}}startTransaction(Z,Y){const X=this._callExtensionMethod("startTransaction",Z,Y);if(e&&!X)if(!this.getClient())f.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'");else f.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`);return X}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(Z=!1){if(Z)return this.endSession();this._sendSessionUpdate()}endSession(){const Y=this.getStackTop().scope,X=Y.getSession();if(X)ln(X);this._sendSessionUpdate(),Y.setSession()}startSession(Z){const{scope:Y,client:X}=this.getStackTop(),{release:J,environment:$=nX}=X&&X.getOptions()||{},{userAgent:W}=k1.navigator||{},G=cn({release:J,environment:$,user:Y.getUser(),...W&&{userAgent:W},...Z}),K=Y.getSession&&Y.getSession();if(K&&K.status==="ok")l4(K,{status:"exited"});return this.endSession(),Y.setSession(G),G}shouldSendDefaultPii(){const Z=this.getClient(),Y=Z&&Z.getOptions();return Boolean(Y&&Y.sendDefaultPii)}_sendSessionUpdate(){const{scope:Z,client:Y}=this.getStackTop(),X=Z.getSession();if(X&&Y&&Y.captureSession)Y.captureSession(X)}_withClient(Z){const{scope:Y,client:X}=this.getStackTop();if(X)Z(X,Y)}_callExtensionMethod(Z,...Y){const J=k7().__SENTRY__;if(J&&J.extensions&&typeof J.extensions[Z]==="function")return J.extensions[Z].apply(this,Y);e&&f.warn(`Extension method ${Z} couldn't be found, doing nothing.`)}}var tB=function(Z){return(Z||H1()).getScope().getTransaction()};var rn=function(){if(sn)return;sn=!0,CB(oB),OB(oB)},oB=function(){const Z=tB();if(Z)e&&f.log("[Tracing] Transaction: internal_error -> Global error occured"),Z.setStatus("internal_error")},sn=!1;oB.tag="sentry_tracingErrorCallback";var tn=function(Z){if(Z<400&&Z>=100)return"ok";if(Z>=400&&Z<500)switch(Z){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(Z>=500&&Z<600)switch(Z){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"};class eB{constructor(Z=1000){this._maxlen=Z,this.spans=[]}add(Z){if(this.spans.length>this._maxlen)Z.spanRecorder=void 0;else this.spans.push(Z)}}class vz{constructor(Z={}){if(this.traceId=Z.traceId||L0(),this.spanId=Z.spanId||L0().substring(16),this.startTimestamp=Z.startTimestamp||EZ(),this.tags=Z.tags||{},this.data=Z.data||{},this.instrumenter=Z.instrumenter||"sentry",this.origin=Z.origin||"manual",Z.parentSpanId)this.parentSpanId=Z.parentSpanId;if("sampled"in Z)this.sampled=Z.sampled;if(Z.op)this.op=Z.op;if(Z.description)this.description=Z.description;if(Z.name)this.description=Z.name;if(Z.status)this.status=Z.status;if(Z.endTimestamp)this.endTimestamp=Z.endTimestamp}get name(){return this.description||""}set name(Z){this.setName(Z)}startChild(Z){const Y=new vz({...Z,parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId});if(Y.spanRecorder=this.spanRecorder,Y.spanRecorder)Y.spanRecorder.add(Y);if(Y.transaction=this.transaction,e&&Y.transaction){const X=Z&&Z.op||"< unknown op >",J=Y.transaction.name||"< unknown name >",$=Y.transaction.spanId,W=`[Tracing] Starting '${X}' span on transaction '${J}' (${$}).`;Y.transaction.metadata.spanMetadata[Y.spanId]={logMessage:W},f.log(W)}return Y}setTag(Z,Y){return this.tags={...this.tags,[Z]:Y},this}setData(Z,Y){return this.data={...this.data,[Z]:Y},this}setStatus(Z){return this.status=Z,this}setHttpStatus(Z){this.setTag("http.status_code",String(Z)),this.setData("http.response.status_code",Z);const Y=tn(Z);if(Y!=="unknown_error")this.setStatus(Y);return this}setName(Z){this.description=Z}isSuccess(){return this.status==="ok"}finish(Z){if(e&&this.transaction&&this.transaction.spanId!==this.spanId){const{logMessage:Y}=this.transaction.metadata.spanMetadata[this.spanId];if(Y)f.log(Y.replace("Starting","Finishing"))}this.endTimestamp=typeof Z==="number"?Z:EZ()}toTraceparent(){return CZ(this.traceId,this.spanId,this.sampled)}toContext(){return S0({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})}updateWithContext(Z){return this.data=Z.data||{},this.description=Z.description,this.endTimestamp=Z.endTimestamp,this.op=Z.op,this.parentSpanId=Z.parentSpanId,this.sampled=Z.sampled,this.spanId=Z.spanId||this.spanId,this.startTimestamp=Z.startTimestamp||this.startTimestamp,this.status=Z.status,this.tags=Z.tags||{},this.traceId=Z.traceId||this.traceId,this}getTraceContext(){return S0({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId,origin:this.origin})}toJSON(){return S0({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId,origin:this.origin})}}var _7=function(Z,Y,X){const J=Y.getOptions(),{publicKey:$}=Y.getDsn()||{},{segment:W}=X&&X.getUser()||{},G=S0({environment:J.environment||nX,release:J.release,user_segment:W,public_key:$,trace_id:Z});return Y.emit&&Y.emit("createDsc",G),G};class oX extends vz{constructor(Z,Y){super(Z);delete this.description,this._measurements={},this._contexts={},this._hub=Y||H1(),this._name=Z.name||"",this.metadata={source:"custom",...Z.metadata,spanMetadata:{}},this._trimEnd=Z.trimEnd,this.transaction=this;const X=this.metadata.dynamicSamplingContext;if(X)this._frozenDynamicSamplingContext={...X}}get name(){return this._name}set name(Z){this.setName(Z)}setName(Z,Y="custom"){this._name=Z,this.metadata.source=Y}initSpanRecorder(Z=1000){if(!this.spanRecorder)this.spanRecorder=new eB(Z);this.spanRecorder.add(this)}setContext(Z,Y){if(Y===null)delete this._contexts[Z];else this._contexts[Z]=Y}setMeasurement(Z,Y,X=""){this._measurements[Z]={value:Y,unit:X}}setMetadata(Z){this.metadata={...this.metadata,...Z}}finish(Z){const Y=this._finishTransaction(Z);if(!Y)return;return this._hub.captureEvent(Y)}toContext(){const Z=super.toContext();return S0({...Z,name:this.name,trimEnd:this._trimEnd})}updateWithContext(Z){return super.updateWithContext(Z),this.name=Z.name||"",this._trimEnd=Z.trimEnd,this}getDynamicSamplingContext(){if(this._frozenDynamicSamplingContext)return this._frozenDynamicSamplingContext;const Z=this._hub||H1(),Y=Z.getClient();if(!Y)return{};const X=Z.getScope(),J=_7(this.traceId,Y,X),$=this.metadata.sampleRate;if($!==void 0)J.sample_rate=`${$}`;const W=this.metadata.source;if(W&&W!=="url")J.transaction=this.name;if(this.sampled!==void 0)J.sampled=String(this.sampled);return J}setHub(Z){this._hub=Z}_finishTransaction(Z){if(this.endTimestamp!==void 0)return;if(!this.name)e&&f.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>";super.finish(Z);const Y=this._hub.getClient();if(Y&&Y.emit)Y.emit("finishTransaction",this);if(this.sampled!==!0){if(e&&f.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),Y)Y.recordDroppedEvent("sample_rate","transaction");return}const X=this.spanRecorder?this.spanRecorder.spans.filter((G)=>G!==this&&G.endTimestamp):[];if(this._trimEnd&&X.length>0)this.endTimestamp=X.reduce((G,K)=>{if(G.endTimestamp&&K.endTimestamp)return G.endTimestamp>K.endTimestamp?G:K;return G}).endTimestamp;const J=this.metadata,$={contexts:{...this._contexts,trace:this.getTraceContext()},spans:X,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",sdkProcessingMetadata:{...J,dynamicSamplingContext:this.getDynamicSamplingContext()},...J.source&&{transaction_info:{source:J.source}}};if(Object.keys(this._measurements).length>0)e&&f.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),$.measurements=this._measurements;return e&&f.log(`[Tracing] Finishing ${this.op} transaction: ${this.name}.`),$}}var en=function(Z,Y,X,J,$){const{normalizeDepth:W=3,normalizeMaxBreadth:G=1000}=Z,K={...Y,event_id:Y.event_id||X.event_id||L0(),timestamp:Y.timestamp||jZ()},Q=X.integrations||Z.integrations.map((U)=>U.name);if(f21(K,Z),b21(K,Q),Y.type===void 0)y21(K,Z.stackParser);let z=J;if(X.captureContext)z=X7.clone(z).update(X.captureContext);if(X.mechanism)E$(K,X.mechanism);let H=j6(K);const F=$&&$.getEventProcessors?$.getEventProcessors():[];if(z){if(z.getAttachments){const U=[...X.attachments||[],...z.getAttachments()];if(U.length)X.attachments=U}H=z.applyToEvent(K,X,F)}else H=aX([...F,...f$()],K,X);return H.then((U)=>{if(U)g21(U);if(typeof W==="number"&&W>0)return v21(U,W,G);return U})},f21=function(Z,Y){const{environment:X,release:J,dist:$,maxValueLength:W=250}=Y;if(!("environment"in Z))Z.environment=("environment"in Y)?X:nX;if(Z.release===void 0&&J!==void 0)Z.release=J;if(Z.dist===void 0&&$!==void 0)Z.dist=$;if(Z.message)Z.message=J4(Z.message,W);const G=Z.exception&&Z.exception.values&&Z.exception.values[0];if(G&&G.value)G.value=J4(G.value,W);const K=Z.request;if(K&&K.url)K.url=J4(K.url,W)},y21=function(Z,Y){const X=k1._sentryDebugIds;if(!X)return;let J;const $=on.get(Y);if($)J=$;else J=new Map,on.set(Y,J);const W=Object.keys(X).reduce((G,K)=>{let Q;const z=J.get(K);if(z)Q=z;else Q=Y(K),J.set(K,Q);for(let H=Q.length-1;H>=0;H--){const F=Q[H];if(F.filename){G[F.filename]=X[K];break}}return G},{});try{Z.exception.values.forEach((G)=>{G.stacktrace.frames.forEach((K)=>{if(K.filename)K.debug_id=W[K.filename]})})}catch(G){}},g21=function(Z){const Y={};try{Z.exception.values.forEach((J)=>{J.stacktrace.frames.forEach(($)=>{if($.debug_id){if($.abs_path)Y[$.abs_path]=$.debug_id;else if($.filename)Y[$.filename]=$.debug_id;delete $.debug_id}})})}catch(J){}if(Object.keys(Y).length===0)return;Z.debug_meta=Z.debug_meta||{},Z.debug_meta.images=Z.debug_meta.images||[];const X=Z.debug_meta.images;Object.keys(Y).forEach((J)=>{X.push({type:"sourcemap",code_file:J,debug_id:Y[J]})})},b21=function(Z,Y){if(Y.length>0)Z.sdk=Z.sdk||{},Z.sdk.integrations=[...Z.sdk.integrations||[],...Y]},v21=function(Z,Y,X){if(!Z)return null;const J={...Z,...Z.breadcrumbs&&{breadcrumbs:Z.breadcrumbs.map(($)=>({...$,...$.data&&{data:I6($.data,Y,X)}}))},...Z.user&&{user:I6(Z.user,Y,X)},...Z.contexts&&{contexts:I6(Z.contexts,Y,X)},...Z.extra&&{extra:I6(Z.extra,Y,X)}};if(Z.contexts&&Z.contexts.trace&&J.contexts){if(J.contexts.trace=Z.contexts.trace,Z.contexts.trace.data)J.contexts.trace.data=I6(Z.contexts.trace.data,Y,X)}if(Z.spans)J.spans=Z.spans.map(($)=>{if($.data)$.data=I6($.data,Y,X);return $});return J},Za=function(Z){if(!Z)return;if(h21(Z))return{captureContext:Z};if(u21(Z))return{captureContext:Z};return Z},h21=function(Z){return Z instanceof X7||typeof Z==="function"},u21=function(Z){return Object.keys(Z).some((Y)=>m21.includes(Y))},on=new WeakMap,m21=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];var c5=function(Z,Y){return H1().captureException(Z,Za(Y))};var l5=function(){return H1().getClient()};var hz=function(Z){if(typeof __SENTRY_TRACING__==="boolean"&&!__SENTRY_TRACING__)return!1;const Y=l5(),X=Z||Y&&Y.getOptions();return!!X&&(X.enableTracing||("tracesSampleRate"in X)||("tracesSampler"in X))};var Ya=function(Z,Y,X){if(!hz(Y))return Z.sampled=!1,Z;if(Z.sampled!==void 0)return Z.setMetadata({sampleRate:Number(Z.sampled)}),Z;let J;if(typeof Y.tracesSampler==="function")J=Y.tracesSampler(X),Z.setMetadata({sampleRate:Number(J)});else if(X.parentSampled!==void 0)J=X.parentSampled;else if(typeof Y.tracesSampleRate!=="undefined")J=Y.tracesSampleRate,Z.setMetadata({sampleRate:Number(J)});else J=1,Z.setMetadata({sampleRate:J});if(!d21(J))return e&&f.warn("[Tracing] Discarding transaction because of invalid sample rate."),Z.sampled=!1,Z;if(!J)return e&&f.log(`[Tracing] Discarding transaction because ${typeof Y.tracesSampler==="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),Z.sampled=!1,Z;if(Z.sampled=Math.random()<J,!Z.sampled)return e&&f.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(J)})`),Z;return e&&f.log(`[Tracing] starting ${Z.op} transaction - ${Z.name}`),Z},d21=function(Z){if(A$(Z)||!(typeof Z==="number"||typeof Z==="boolean"))return e&&f.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(Z)} of type ${JSON.stringify(typeof Z)}.`),!1;if(Z<0||Z>1)return e&&f.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${Z}.`),!1;return!0};var c21=function(){const Y=this.getScope().getSpan();return Y?{"sentry-trace":Y.toTraceparent()}:{}},l21=function(Z,Y){const X=this.getClient(),J=X&&X.getOptions()||{},$=J.instrumenter||"sentry",W=Z.instrumenter||"sentry";if($!==W)e&&f.error(`A transaction was started with instrumenter=\`${W}\`, but the SDK is configured with the \`${$}\` instrumenter.
The transaction will not be sampled. Please use the ${$} instrumentation to start transactions.`),Z.sampled=!1;let G=new oX(Z,this);if(G=Ya(G,J,{parentSampled:Z.parentSampled,transactionContext:Z,...Y}),G.sampled)G.initSpanRecorder(J._experiments&&J._experiments.maxSpans);if(X&&X.emit)X.emit("startTransaction",G);return G};var Xa=function(){const Z=k7();if(!Z.__SENTRY__)return;if(Z.__SENTRY__.extensions=Z.__SENTRY__.extensions||{},!Z.__SENTRY__.extensions.startTransaction)Z.__SENTRY__.extensions.startTransaction=l21;if(!Z.__SENTRY__.extensions.traceHeaders)Z.__SENTRY__.extensions.traceHeaders=c21;rn()};var mz=function(Z,Y,X=()=>{}){const J=$a(Z),$=H1(),W=$.getScope(),G=W.getSpan(),K=Ja($,G,J);W.setSpan(K);function Q(){K&&K.finish(),$.getScope().setSpan(G)}let z;try{z=Y(K)}catch(H){throw K&&K.setStatus("internal_error"),X(H),Q(),H}if(a0(z))Promise.resolve(z).then(()=>{Q()},(H)=>{K&&K.setStatus("internal_error"),X(H),Q()});else Q();return z},uz=function(Z,Y){const X=$a(Z),J=H1(),$=J.getScope(),W=$.getSpan(),G=Ja(J,W,X);$.setSpan(G);function K(){G&&G.finish(),J.getScope().setSpan(W)}let Q;try{Q=Y(G)}catch(z){throw G&&G.setStatus("internal_error"),K(),z}if(a0(Q))Promise.resolve(Q).then(()=>{K()},()=>{G&&G.setStatus("internal_error"),K()});else K();return Q};var dz=function({sentryTrace:Z,baggage:Y},X){const $=H1().getScope(),{traceparentData:W,dynamicSamplingContext:G,propagationContext:K}=k$(Z,Y);if($.setPropagationContext(K),e&&W)f.log(`[Tracing] Continuing trace ${W.traceId}.`);const Q={...W,metadata:S0({dynamicSamplingContext:W&&!G?{}:G})};if(!X)return Q;return X(Q)},Ja=function(Z,Y,X){if(!hz())return;return Y?Y.startChild(X):Z.startTransaction(X)},$a=function(Z){const Y={...Z};if(Y.name!==void 0&&Y.description===void 0)Y.description=Y.name;return Y};var p21=function(Z,Y){if(!Y)return Z;return Z.sdk=Z.sdk||{},Z.sdk.name=Z.sdk.name||Y.name,Z.sdk.version=Z.sdk.version||Y.version,Z.sdk.integrations=[...Z.sdk.integrations||[],...Y.integrations||[]],Z.sdk.packages=[...Z.sdk.packages||[],...Y.packages||[]],Z},Wa=function(Z,Y,X,J){const $=fz(X),W={sent_at:(new Date()).toISOString(),...$&&{sdk:$},...!!J&&Y&&{dsn:h5(Y)}},G="aggregates"in Z?[{type:"sessions"},Z]:[{type:"session"},Z.toJSON()];return d5(W,[G])},Ga=function(Z,Y,X,J){const $=fz(X),W=Z.type&&Z.type!=="replay_event"?Z.type:"event";p21(Z,X&&X.sdk);const G=cB(Z,$,J,Y);return delete Z.sdkProcessingMetadata,d5(G,[[{type:W},Z]])};class ZN{constructor(Z,Y){this._client=Z,this.flushTimeout=60,this._pendingAggregates={},this._isEnabled=!0,this._intervalId=setInterval(()=>this.flush(),this.flushTimeout*1000),this._sessionAttrs=Y}flush(){const Z=this.getSessionAggregates();if(Z.aggregates.length===0)return;this._pendingAggregates={},this._client.sendSession(Z)}getSessionAggregates(){const Z=Object.keys(this._pendingAggregates).map((X)=>{return this._pendingAggregates[parseInt(X)]}),Y={attrs:this._sessionAttrs,aggregates:Z};return S0(Y)}close(){clearInterval(this._intervalId),this._isEnabled=!1,this.flush()}incrementSessionStatusCount(){if(!this._isEnabled)return;const Z=H1().getScope(),Y=Z.getRequestSession();if(Y&&Y.status)this._incrementSessionStatusCount(Y.status,new Date),Z.setRequestSession(void 0)}_incrementSessionStatusCount(Z,Y){const X=new Date(Y).setSeconds(0,0);this._pendingAggregates[X]=this._pendingAggregates[X]||{};const J=this._pendingAggregates[X];if(!J.started)J.started=new Date(X).toISOString();switch(Z){case"errored":return J.errored=(J.errored||0)+1,J.errored;case"ok":return J.exited=(J.exited||0)+1,J.exited;default:return J.crashed=(J.crashed||0)+1,J.crashed}}}var n21=function(Z){const Y=Z.protocol?`${Z.protocol}:`:"",X=Z.port?`:${Z.port}`:"";return`${Y}//${Z.host}${X}${Z.path?`/${Z.path}`:""}/api/`},a21=function(Z){return`${n21(Z)}${Z.projectId}/envelope/`},s21=function(Z,Y){return BB({sentry_key:Z.publicKey,sentry_version:i21,...Y&&{sentry_client:`${Y.name}/${Y.version}`}})},Ka=function(Z,Y={}){const X=typeof Y==="string"?Y:Y.tunnel,J=typeof Y==="string"||!Y._metadata?void 0:Y._metadata.sdk;return X?X:`${a21(Z)}?${s21(Z,J)}`};var i21="7";var r21=function(Z){const Y={};return Z.forEach((X)=>{const{name:J}=X,$=Y[J];if($&&!$.isDefaultInstance&&X.isDefaultInstance)return;Y[J]=X}),Object.keys(Y).map((X)=>Y[X])},YN=function(Z){const Y=Z.defaultIntegrations||[],X=Z.integrations;Y.forEach((G)=>{G.isDefaultInstance=!0});let J;if(Array.isArray(X))J=[...Y,...X];else if(typeof X==="function")J=m5(X(Y));else J=Y;const $=r21(J),W=t21($,(G)=>G.name==="Debug");if(W!==-1){const[G]=$.splice(W,1);$.push(G)}return $},za=function(Z,Y){const X={};return Y.forEach((J)=>{if(J)XN(Z,J,X)}),X},XN=function(Z,Y,X){if(X[Y.name]=Y,Qa.indexOf(Y.name)===-1)Y.setupOnce(sB,H1),Qa.push(Y.name);if(Y.setup&&typeof Y.setup==="function")Y.setup(Z);if(Z.on&&typeof Y.preprocessEvent==="function"){const J=Y.preprocessEvent.bind(Y);Z.on("preprocessEvent",($,W)=>J($,W,Z))}if(Z.addEventProcessor&&typeof Y.processEvent==="function"){const J=Y.processEvent.bind(Y),$=Object.assign((W,G)=>J(W,G,Z),{id:Y.name});Z.addEventProcessor($)}e&&f.log(`Integration installed: ${Y.name}`)};var t21=function(Z,Y){for(let X=0;X<Z.length;X++)if(Y(Z[X])===!0)return X;return-1},Qa=[];var o21=function(Z,Y){const X=`${Y} must return \`null\` or a valid event.`;if(a0(Z))return Z.then((J)=>{if(!T6(J)&&J!==null)throw new g8(X);return J},(J)=>{throw new g8(`${Y} rejected with ${J}`)});else if(!T6(Z)&&Z!==null)throw new g8(X);return Z},e21=function(Z,Y,X){const{beforeSend:J,beforeSendTransaction:$}=Z;if(Fa(Y)&&J)return J(Y,X);if(Ua(Y)&&$)return $(Y,X);return Y},Fa=function(Z){return Z.type===void 0},Ua=function(Z){return Z.type==="transaction"},Ha="Not capturing exception because it's already been captured.";class JN{constructor(Z){if(this._options=Z,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],Z.dsn)this._dsn=Pz(Z.dsn);else e&&f.warn("No DSN provided, client will not send events.");if(this._dsn){const Y=Ka(this._dsn,Z);this._transport=Z.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...Z.transportOptions,url:Y})}}captureException(Z,Y,X){if(Ez(Z)){e&&f.log(Ha);return}let J=Y&&Y.event_id;return this._process(this.eventFromException(Z,Y).then(($)=>this._captureEvent($,Y,X)).then(($)=>{J=$})),J}captureMessage(Z,Y,X,J){let $=X&&X.event_id;const W=Nz(Z)?this.eventFromMessage(String(Z),Y,X):this.eventFromException(Z,X);return this._process(W.then((G)=>this._captureEvent(G,X,J)).then((G)=>{$=G})),$}captureEvent(Z,Y,X){if(Y&&Y.originalException&&Ez(Y.originalException)){e&&f.log(Ha);return}let J=Y&&Y.event_id;return this._process(this._captureEvent(Z,Y,X).then(($)=>{J=$})),J}captureSession(Z){if(typeof Z.release!=="string")e&&f.warn("Discarded session because of missing or non-string release");else this.sendSession(Z),l4(Z,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(Z){const Y=this._transport;if(Y)return this._isClientDoneProcessing(Z).then((X)=>{return Y.flush(Z).then((J)=>X&&J)});else return j6(!0)}close(Z){return this.flush(Z).then((Y)=>{return this.getOptions().enabled=!1,Y})}getEventProcessors(){return this._eventProcessors}addEventProcessor(Z){this._eventProcessors.push(Z)}setupIntegrations(Z){if(Z&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)this._integrations=za(this,this._options.integrations),this._integrationsInitialized=!0}getIntegrationById(Z){return this._integrations[Z]}getIntegration(Z){try{return this._integrations[Z.id]||null}catch(Y){return e&&f.warn(`Cannot retrieve integration ${Z.id} from the current Client`),null}}addIntegration(Z){XN(this,Z,this._integrations)}sendEvent(Z,Y={}){this.emit("beforeSendEvent",Z,Y);let X=Ga(Z,this._dsn,this._options._metadata,this._options.tunnel);for(let $ of Y.attachments||[])X=uB(X,dB($,this._options.transportOptions&&this._options.transportOptions.textEncoder));const J=this._sendEnvelope(X);if(J)J.then(($)=>this.emit("afterSendEvent",Z,$),null)}sendSession(Z){const Y=Wa(Z,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(Y)}recordDroppedEvent(Z,Y,X){if(this._options.sendClientReports){const J=`${Z}:${Y}`;e&&f.log(`Adding outcome: "${J}"`),this._outcomes[J]=this._outcomes[J]+1||1}}on(Z,Y){if(!this._hooks[Z])this._hooks[Z]=[];this._hooks[Z].push(Y)}emit(Z,...Y){if(this._hooks[Z])this._hooks[Z].forEach((X)=>X(...Y))}_updateSessionFromEvent(Z,Y){let X=!1,J=!1;const $=Y.exception&&Y.exception.values;if($){J=!0;for(let K of $){const Q=K.mechanism;if(Q&&Q.handled===!1){X=!0;break}}}const W=Z.status==="ok";if(W&&Z.errors===0||W&&X)l4(Z,{...X&&{status:"crashed"},errors:Z.errors||Number(J||X)}),this.captureSession(Z)}_isClientDoneProcessing(Z){return new N8((Y)=>{let X=0;const J=1,$=setInterval(()=>{if(this._numProcessing==0)clearInterval($),Y(!0);else if(X+=J,Z&&X>=Z)clearInterval($),Y(!1)},J)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(Z,Y,X){const J=this.getOptions(),$=Object.keys(this._integrations);if(!Y.integrations&&$.length>0)Y.integrations=$;return this.emit("preprocessEvent",Z,Y),en(J,Z,Y,X,this).then((W)=>{if(W===null)return W;const{propagationContext:G}=W.sdkProcessingMetadata||{};if(!(W.contexts&&W.contexts.trace)&&G){const{traceId:Q,spanId:z,parentSpanId:H,dsc:F}=G;W.contexts={trace:{trace_id:Q,span_id:z,parent_span_id:H},...W.contexts};const U=F?F:_7(Q,this,X);W.sdkProcessingMetadata={dynamicSamplingContext:U,...W.sdkProcessingMetadata}}return W})}_captureEvent(Z,Y={},X){return this._processEvent(Z,Y,X).then((J)=>{return J.event_id},(J)=>{if(e){const $=J;if($.logLevel==="log")f.log($.message);else f.warn($)}return})}_processEvent(Z,Y,X){const J=this.getOptions(),{sampleRate:$}=J,W=Ua(Z),G=Fa(Z),K=Z.type||"error",Q=`before send for type \`${K}\``;if(G&&typeof $==="number"&&Math.random()>$)return this.recordDroppedEvent("sample_rate","error",Z),PZ(new g8(`Discarding event because it's not included in the random sample (sampling rate = ${$})`,"log"));const z=K==="replay_event"?"replay":K;return this._prepareEvent(Z,Y,X).then((H)=>{if(H===null)throw this.recordDroppedEvent("event_processor",z,Z),new g8("An event processor returned `null`, will not send event.","log");if(Y.data&&Y.data.__sentry__===!0)return H;const U=e21(J,H,Y);return o21(U,Q)}).then((H)=>{if(H===null)throw this.recordDroppedEvent("before_send",z,Z),new g8(`${Q} returned \`null\`, will not send event.`,"log");const F=X&&X.getSession();if(!W&&F)this._updateSessionFromEvent(F,H);const U=H.transaction_info;if(W&&U&&H.transaction!==Z.transaction)H.transaction_info={...U,source:"custom"};return this.sendEvent(H,Y),H}).then(null,(H)=>{if(H instanceof g8)throw H;throw this.captureException(H,{data:{__sentry__:!0},originalException:H}),new g8(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${H}`)})}_process(Z){this._numProcessing++,Z.then((Y)=>{return this._numProcessing--,Y},(Y)=>{return this._numProcessing--,Y})}_sendEnvelope(Z){if(this.emit("beforeEnvelope",Z),this._isEnabled()&&this._transport)return this._transport.send(Z).then(null,(Y)=>{e&&f.error("Error while sending event:",Y)});else e&&f.error("Transport disabled")}_clearOutcomes(){const Z=this._outcomes;return this._outcomes={},Object.keys(Z).map((Y)=>{const[X,J]=Y.split(":");return{reason:X,category:J,quantity:Z[Y]}})}}var Va=function(Z,Y,X,J,$){const W={sent_at:(new Date()).toISOString()};if(X&&X.sdk)W.sdk={name:X.sdk.name,version:X.sdk.version};if(!!J&&!!$)W.dsn=h5($);if(Y)W.trace=S0(Y);const G=ZD1(Z);return d5(W,[G])},ZD1=function(Z){return[{type:"check_in"},Z]};class eX extends JN{constructor(Z){Xa();super(Z)}eventFromException(Z,Y){return j6(nB(H1,this._options.stackParser,Z,Y))}eventFromMessage(Z,Y="info",X){return j6(aB(this._options.stackParser,Z,Y,X,this._options.attachStacktrace))}captureException(Z,Y,X){if(this._options.autoSessionTracking&&this._sessionFlusher&&X){const J=X.getRequestSession();if(J&&J.status==="ok")J.status="errored"}return super.captureException(Z,Y,X)}captureEvent(Z,Y,X){if(this._options.autoSessionTracking&&this._sessionFlusher&&X){if((Z.type||"exception")==="exception"&&Z.exception&&Z.exception.values&&Z.exception.values.length>0){const W=X.getRequestSession();if(W&&W.status==="ok")W.status="errored"}}return super.captureEvent(Z,Y,X)}close(Z){if(this._sessionFlusher)this._sessionFlusher.close();return super.close(Z)}initSessionFlusher(){const{release:Z,environment:Y}=this._options;if(!Z)e&&f.warn("Cannot initialise an instance of SessionFlusher if no release is provided!");else this._sessionFlusher=new ZN(this,{release:Z,environment:Y})}captureCheckIn(Z,Y,X){const J=Z.status!=="in_progress"&&Z.checkInId?Z.checkInId:L0();if(!this._isEnabled())return e&&f.warn("SDK not enabled, will not capture checkin."),J;const $=this.getOptions(),{release:W,environment:G,tunnel:K}=$,Q={check_in_id:J,monitor_slug:Z.monitorSlug,status:Z.status,release:W,environment:G};if(Z.status!=="in_progress")Q.duration=Z.duration;if(Y)Q.monitor_config={schedule:Y.schedule,checkin_margin:Y.checkinMargin,max_runtime:Y.maxRuntime,timezone:Y.timezone};const[z,H]=this._getTraceInfoFromScope(X);if(H)Q.contexts={trace:H};const F=Va(Q,z,this.getSdkMetadata(),K,this.getDsn());return e&&f.info("Sending checkin:",Z.monitorSlug,Z.status),this._sendEnvelope(F),J}_captureRequestSession(){if(!this._sessionFlusher)e&&f.warn("Discarded request mode session because autoSessionTracking option was disabled");else this._sessionFlusher.incrementSessionStatusCount()}_prepareEvent(Z,Y,X){if(this._options.platform)Z.platform=Z.platform||this._options.platform;if(this._options.runtime)Z.contexts={...Z.contexts,runtime:(Z.contexts||{}).runtime||this._options.runtime};if(this._options.serverName)Z.server_name=Z.server_name||this._options.serverName;return super._prepareEvent(Z,Y,X)}_getTraceInfoFromScope(Z){if(!Z)return[void 0,void 0];const Y=Z.getSpan();if(Y)return[Y.transaction?Y.transaction.getDynamicSamplingContext():void 0,Y.getTraceContext()];const{traceId:X,spanId:J,parentSpanId:$,dsc:W}=Z.getPropagationContext(),G={trace_id:X,span_id:J,parent_span_id:$};if(W)return[W,G];return[_7(X,this,Z),G]}}var $N=function(Z,Y){if(Y.debug===!0)if(e)f.enable();else y8(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")});const X=H1();X.getScope().update(Y.initialScope);const $=new Z(Y);X.bindClient($)};var OZ=function(Z,Y,X=_B(Z.bufferSize||YD1)){let J={};const $=(G)=>X.drain(G);function W(G){const K=[];if(_z(G,(F,U)=>{const V=xz(U);if(lB(J,V)){const q=qa(F,U);Z.recordDroppedEvent("ratelimit_backoff",V,q)}else K.push(F)}),K.length===0)return j6();const Q=d5(G[0],K),z=(F)=>{_z(Q,(U,V)=>{const q=qa(U,V);Z.recordDroppedEvent(F,xz(V),q)})},H=()=>Y({body:_$(Q,Z.textEncoder)}).then((F)=>{if(F.statusCode!==void 0&&(F.statusCode<200||F.statusCode>=300))e&&f.warn(`Sentry responded with status code ${F.statusCode} to sent event.`);return J=pB(J,F),F},(F)=>{throw z("network_error"),F});return X.add(H).then((F)=>F,(F)=>{if(F instanceof g8)return e&&f.error("Skipped sending event because buffer is full."),z("queue_overflow"),j6();else throw F})}return W.__sentry__baseTransport__=!0,{send:W,flush:$}},qa=function(Z,Y){if(Y!=="event"&&Y!=="transaction")return;return Array.isArray(Z)?Z[1]:void 0},YD1=30;var p5="7.84.0";var G6={};s$(G6,{LinkedErrors:()=>{{return iz}},InboundFilters:()=>{{return pz}},FunctionToString:()=>{{return cz}}});var La;class cz{static __initStatic(){this.id="FunctionToString"}constructor(){this.name=cz.id}setupOnce(){La=Function.prototype.toString;try{Function.prototype.toString=function(...Z){const Y=MB(this)||this;return La.apply(Y,Z)}}catch(Z){}}}cz.__initStatic();var $D1=function(Z={},Y={}){return{allowUrls:[...Z.allowUrls||[],...Y.allowUrls||[]],denyUrls:[...Z.denyUrls||[],...Y.denyUrls||[]],ignoreErrors:[...Z.ignoreErrors||[],...Y.ignoreErrors||[],...Z.disableErrorDefaults?[]:XD1],ignoreTransactions:[...Z.ignoreTransactions||[],...Y.ignoreTransactions||[],...Z.disableTransactionDefaults?[]:JD1],ignoreInternal:Z.ignoreInternal!==void 0?Z.ignoreInternal:!0}},WD1=function(Z,Y){if(Y.ignoreInternal&&FD1(Z))return e&&f.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${d4(Z)}`),!0;if(GD1(Z,Y.ignoreErrors))return e&&f.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${d4(Z)}`),!0;if(KD1(Z,Y.ignoreTransactions))return e&&f.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${d4(Z)}`),!0;if(QD1(Z,Y.denyUrls))return e&&f.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${d4(Z)}.\nUrl: ${lz(Z)}`),!0;if(!zD1(Z,Y.allowUrls))return e&&f.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${d4(Z)}.\nUrl: ${lz(Z)}`),!0;return!1},GD1=function(Z,Y){if(Z.type||!Y||!Y.length)return!1;return HD1(Z).some((X)=>$4(X,Y))},KD1=function(Z,Y){if(Z.type!=="transaction"||!Y||!Y.length)return!1;const X=Z.transaction;return X?$4(X,Y):!1},QD1=function(Z,Y){if(!Y||!Y.length)return!1;const X=lz(Z);return!X?!1:$4(X,Y)},zD1=function(Z,Y){if(!Y||!Y.length)return!0;const X=lz(Z);return!X?!0:$4(X,Y)},HD1=function(Z){const Y=[];if(Z.message)Y.push(Z.message);let X;try{X=Z.exception.values[Z.exception.values.length-1]}catch(J){}if(X){if(X.value){if(Y.push(X.value),X.type)Y.push(`${X.type}: ${X.value}`)}}if(e&&Y.length===0)f.error(`Could not extract message for event ${d4(Z)}`);return Y},FD1=function(Z){try{return Z.exception.values[0].type==="SentryError"}catch(Y){}return!1},UD1=function(Z=[]){for(let Y=Z.length-1;Y>=0;Y--){const X=Z[Y];if(X&&X.filename!=="<anonymous>"&&X.filename!=="[native code]")return X.filename||null}return null},lz=function(Z){try{let Y;try{Y=Z.exception.values[0].stacktrace.frames}catch(X){}return Y?UD1(Y):null}catch(Y){return e&&f.error(`Cannot extract url for event ${d4(Z)}`),null}},XD1=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],JD1=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/];class pz{static __initStatic(){this.id="InboundFilters"}constructor(Z={}){this.name=pz.id,this._options=Z}setupOnce(Z,Y){}processEvent(Z,Y,X){const J=X.getOptions(),$=$D1(this._options,J);return WD1(Z,$)?null:Z}}pz.__initStatic();var VD1="cause",qD1=5;class iz{static __initStatic(){this.id="LinkedErrors"}constructor(Z={}){this._key=Z.key||VD1,this._limit=Z.limit||qD1,this.name=iz.id}setupOnce(){}preprocessEvent(Z,Y,X){const J=X.getOptions();wB(yz,J.stackParser,J.maxValueLength,this._key,this._limit,Z,Y)}}iz.__initStatic();var SZ=function(Z,Y){const X=Y.getClient(),J=X&&X.getDsn(),$=X&&X.getOptions().tunnel;return wD1(Z,J)||LD1(Z,$)},LD1=function(Z,Y){if(!Y)return!1;return wa(Z)===wa(Y)},wD1=function(Z,Y){return Y?Z.includes(Y.host):!1},wa=function(Z){return Z[Z.length-1]==="/"?Z.slice(0,-1):Z};var RD1=function(Z){const{transactionNamingScheme:Y,include:{ip:X,user:J,...$}}=Z,W=[];for(let[K,Q]of Object.entries($))if(Q)W.push(K);let G;if(J===void 0)G=!0;else if(typeof J==="boolean")G=J;else{const K=[];for(let[Q,z]of Object.entries(J))if(z)K.push(Q);G=K}return{include:{ip:X,user:G,request:W.length!==0?W:void 0,transaction:Y}}},MD1=function(Z){try{return Z.getClient().getOptions()._metadata.sdk.name}catch(Y){return}},WN={include:{cookies:!0,data:!0,headers:!0,ip:!1,query_string:!0,url:!0,user:{id:!0,username:!0,email:!0}},transactionNamingScheme:"methodPath"};class i5{static __initStatic(){this.id="RequestData"}constructor(Z={}){this.name=i5.id,this._addRequestData=fB,this._options={...WN,...Z,include:{method:!0,...WN.include,...Z.include,user:Z.include&&typeof Z.include.user==="boolean"?Z.include.user:{...WN.include.user,...(Z.include||{}).user}}}}setupOnce(Z,Y){const{transactionNamingScheme:X}=this._options;Z((J)=>{const $=Y(),W=$.getIntegration(i5),{sdkProcessingMetadata:G={}}=J,K=G.request;if(!W||!K)return J;const Q=G.requestDataOptionsFromExpressHandler||G.requestDataOptionsFromGCPWrapper||RD1(this._options),z=this._addRequestData(J,K,Q);if(J.type==="transaction"||X==="handler")return z;const F=K._sentryTransaction;if(F){const U=MD1($)==="sentry.javascript.nextjs"?F.name.startsWith("/api"):X!=="path",[V]=IZ(K,{path:!0,method:U,customRoute:F.name});z.transaction=V}return z})}}i5.__initStatic();var $0=typeof __SENTRY_DEBUG__==="undefined"||__SENTRY_DEBUG__;var K6=function(Z){const Y=h([Z,"call",(J)=>J(),"access",(J)=>J.getClient,"call",(J)=>J(),"optionalAccess",(J)=>J.getOptions,"call",(J)=>J()]);return(h([Y,"optionalAccess",(J)=>J.instrumenter])||"sentry")!=="sentry"};var Ra=function(Z,Y){const X=Z.length;switch(X){case 2:return function(J,$){const W=$.__sentry_transaction;if(W){const G=W.startChild({description:Z.name,op:`middleware.express.${Y}`,origin:"auto.middleware.express"});$.once("finish",()=>{G.finish()})}return Z.call(this,J,$)};case 3:return function(J,$,W){const G=$.__sentry_transaction,K=h([G,"optionalAccess",(Q)=>Q.startChild,"call",(Q)=>Q({description:Z.name,op:`middleware.express.${Y}`,origin:"auto.middleware.express"})]);Z.call(this,J,$,function(...Q){h([K,"optionalAccess",(z)=>z.finish,"call",(z)=>z()]),W.call(this,...Q)})};case 4:return function(J,$,W,G){const K=W.__sentry_transaction,Q=h([K,"optionalAccess",(z)=>z.startChild,"call",(z)=>z({description:Z.name,op:`middleware.express.${Y}`,origin:"auto.middleware.express"})]);Z.call(this,J,$,W,function(...z){h([Q,"optionalAccess",(H)=>H.finish,"call",(H)=>H()]),G.call(this,...z)})};default:throw new Error(`Express middleware takes 2-4 arguments. Got: ${X}`)}},mD1=function(Z,Y){return Z.map((X)=>{if(typeof X==="function")return Ra(X,Y);if(Array.isArray(X))return X.map((J)=>{if(typeof J==="function")return Ra(J,Y);return J});return X})},uD1=function(Z,Y){const X=Z[Y];return Z[Y]=function(...J){return X.call(this,...mD1(J,Y))},Z},dD1=function(Z,Y=[]){Y.forEach((X)=>uD1(Z,X))},cD1=function(Z){const Y="settings"in Z;if(Y&&Z._router===void 0&&Z.lazyrouter)Z.lazyrouter();const X=Y?Z._router:Z;if(!X){$0&&f.debug("Cannot instrument router for URL Parameterization (did not find a valid router)."),$0&&f.debug("Routing instrumentation is currently only supported in Express 4.");return}const J=Object.getPrototypeOf(X),$=J.process_params;J.process_params=function W(G,K,Q,z,H){if(!Q._reconstructedRoute)Q._reconstructedRoute="";const{layerRoutePath:F,isRegex:U,isArray:V,numExtraSegments:q}=pD1(G);if(F||U||V)Q._hasParameters=!0;let L;if(F)L=F;else L=aD1(Q.originalUrl,Q._reconstructedRoute,G.path)||"";const R=L.split("/").filter((M)=>M.length>0&&(U||V||!M.includes("*"))).join("/");if(R&&R.length>0)Q._reconstructedRoute+=`/${R}${U?"/":""}`;const B=pX(TZ(Q.originalUrl||""))+q,N=pX(Q._reconstructedRoute);if(B===N){if(!Q._hasParameters){if(Q._reconstructedRoute!==Q.originalUrl)Q._reconstructedRoute=Q.originalUrl?TZ(Q.originalUrl):Q.originalUrl}const M=z.__sentry_transaction;if(M&&M.metadata.source!=="custom"){const D=Q._reconstructedRoute||"/";M.setName(...IZ(Q,{path:!0,method:!0,customRoute:D}))}}return $.call(this,G,K,Q,z,H)}},pD1=function(Z){let Y=h([Z,"access",(G)=>G.route,"optionalAccess",(G)=>G.path]);const X=N$(Y),J=Array.isArray(Y);if(!Y){const[G]=k1.process.versions.node.split(".").map(Number);if(G>=16)Y=lD1(Z.path,Z.regexp,Z.keys)}if(!Y)return{isRegex:X,isArray:J,numExtraSegments:0};const $=J?Math.max(iD1(Y)-pX(Z.path||""),0):0;return{layerRoutePath:nD1(J,Y),isRegex:X,isArray:J,numExtraSegments:$}},iD1=function(Z){return Z.reduce((Y,X)=>{return Y+pX(X.toString())},0)},nD1=function(Z,Y){if(Z)return Y.map((X)=>X.toString()).join(",");return Y&&Y.toString()},aD1=function(Z,Y,X){const J=TZ(Z||""),$=h([J,"optionalAccess",(Q)=>Q.split,"call",(Q)=>Q("/"),"access",(Q)=>Q.filter,"call",(Q)=>Q((z)=>!!z)]);let W=0;const G=h([Y,"optionalAccess",(Q)=>Q.split,"call",(Q)=>Q("/"),"access",(Q)=>Q.filter,"call",(Q)=>Q((z)=>!!z),"access",(Q)=>Q.length])||0;return h([X,"optionalAccess",(Q)=>Q.split,"call",(Q)=>Q("/"),"access",(Q)=>Q.filter,"call",(Q)=>Q((z)=>{if(h([$,"optionalAccess",(H)=>H[G+W]])===z)return W+=1,!0;return!1}),"access",(Q)=>Q.join,"call",(Q)=>Q("/")])};class g${static __initStatic(){this.id="Express"}constructor(Z={}){this.name=g$.id,this._router=Z.router||Z.app,this._methods=(Array.isArray(Z.methods)?Z.methods:[]).concat("use")}setupOnce(Z,Y){if(!this._router){$0&&f.error("ExpressIntegration is missing an Express instance");return}if(K6(Y)){$0&&f.log("Express Integration is skipped because of instrumenter configuration.");return}dD1(this._router,this._methods),cD1(this._router)}}g$.__initStatic();var lD1=(Z,Y,X)=>{if(!Z||!Y||!X||Object.keys(X).length===0||!h([X,"access",(z)=>z[0],"optionalAccess",(z)=>z.offset]))return;const J=X.sort((z,H)=>z.offset-H.offset),W=new RegExp(Y,`${Y.flags}d`).exec(Z);if(!W||!W.indices)return;const[,...G]=W.indices;if(G.length!==J.length)return;let K=Z,Q=0;return G.forEach((z,H)=>{if(z){const[F,U]=z,V=K.substring(0,F-Q),q=`:${J[H].name}`,L=K.substring(U-Q);K=V+q+L,Q=Q+(U-F-q.length)}}),K};class b${static __initStatic(){this.id="Postgres"}constructor(Z={}){this.name=b$.id,this._usePgNative=!!Z.usePgNative,this._module=Z.module}loadDependency(){return this._module=this._module||Z7("pg")}setupOnce(Z,Y){if(K6(Y)){$0&&f.log("Postgres Integration is skipped because of instrumenter configuration.");return}const X=this.loadDependency();if(!X){$0&&f.error("Postgres Integration was unable to require `pg` package.");return}const J=this._usePgNative?h([X,"access",($)=>$.native,"optionalAccess",($)=>$.Client]):X.Client;if(!J){$0&&f.error("Postgres Integration was unable to access 'pg-native' bindings.");return}j0(J.prototype,"query",function($){return function(W,G,K){const z=Y().getScope().getSpan(),H={"db.system":"postgresql"};try{if(this.database)H["db.name"]=this.database;if(this.host)H["server.address"]=this.host;if(this.port)H["server.port"]=this.port;if(this.user)H["db.user"]=this.user}catch(V){}const F=h([z,"optionalAccess",(V)=>V.startChild,"call",(V)=>V({description:typeof W==="string"?W:W.text,op:"db",origin:"auto.db.postgres",data:H})]);if(typeof K==="function")return $.call(this,W,G,function(V,q){h([F,"optionalAccess",(L)=>L.finish,"call",(L)=>L()]),K(V,q)});if(typeof G==="function")return $.call(this,W,function(V,q){h([F,"optionalAccess",(L)=>L.finish,"call",(L)=>L()]),G(V,q)});const U=typeof G!=="undefined"?$.call(this,W,G):$.call(this,W);if(a0(U))return U.then((V)=>{return h([F,"optionalAccess",(q)=>q.finish,"call",(q)=>q()]),V});return h([F,"optionalAccess",(V)=>V.finish,"call",(V)=>V()]),U}})}}b$.__initStatic();class v${static __initStatic(){this.id="Mysql"}constructor(){this.name=v$.id}loadDependency(){return this._module=this._module||Z7("mysql/lib/Connection.js")}setupOnce(Z,Y){if(K6(Y)){$0&&f.log("Mysql Integration is skipped because of instrumenter configuration.");return}const X=this.loadDependency();if(!X){$0&&f.error("Mysql Integration was unable to require `mysql` package.");return}let J=void 0;try{X.prototype.connect=new Proxy(X.prototype.connect,{apply(G,K,Q){if(!J)J=K.config;return G.apply(K,Q)}})}catch(G){$0&&f.error("Mysql Integration was unable to instrument `mysql` config.")}function $(){if(!J)return{};return{"server.address":J.host,"server.port":J.port,"db.user":J.user}}function W(G){if(!G||G.endTimestamp)return;const K=$();Object.keys(K).forEach((Q)=>{G.setData(Q,K[Q])}),G.finish()}j0(X,"createQuery",function(G){return function(K,Q,z){const F=Y().getScope().getSpan(),U=h([F,"optionalAccess",(q)=>q.startChild,"call",(q)=>q({description:typeof K==="string"?K:K.sql,op:"db",origin:"auto.db.mysql",data:{"db.system":"mysql"}})]);if(typeof z==="function")return G.call(this,K,Q,function(q,L,R){W(U),z(q,L,R)});if(typeof Q==="function")return G.call(this,K,function(q,L,R){W(U),Q(q,L,R)});const V=G.call(this,K,Q);return V.on("end",()=>{W(U)}),V}})}}v$.__initStatic();var tD1=function(Z){return Z&&typeof Z==="object"&&Z.once&&typeof Z.once==="function"},sD1=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],rD1={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]};class h${static __initStatic(){this.id="Mongo"}constructor(Z={}){this.name=h$.id,this._operations=Array.isArray(Z.operations)?Z.operations:sD1,this._describeOperations=("describeOperations"in Z)?Z.describeOperations:!0,this._useMongoose=!!Z.useMongoose}loadDependency(){const Z=this._useMongoose?"mongoose":"mongodb";return this._module=this._module||Z7(Z)}setupOnce(Z,Y){if(K6(Y)){$0&&f.log("Mongo Integration is skipped because of instrumenter configuration.");return}const X=this.loadDependency();if(!X){const J=this._useMongoose?"mongoose":"mongodb";$0&&f.error(`Mongo Integration was unable to require \`${J}\` package.`);return}this._instrumentOperations(X.Collection,this._operations,Y)}_instrumentOperations(Z,Y,X){Y.forEach((J)=>this._patchOperation(Z,J,X))}_patchOperation(Z,Y,X){if(!(Y in Z.prototype))return;const J=this._getSpanContextFromOperationArguments.bind(this);j0(Z.prototype,Y,function($){return function(...W){const G=W[W.length-1],Q=X().getScope().getSpan();if(typeof G!=="function"||Y==="mapReduce"&&W.length===2){const H=h([Q,"optionalAccess",(U)=>U.startChild,"call",(U)=>U(J(this,Y,W))]),F=$.call(this,...W);if(a0(F))return F.then((U)=>{return h([H,"optionalAccess",(V)=>V.finish,"call",(V)=>V()]),U});else if(tD1(F)){const U=F;try{U.once("close",()=>{h([H,"optionalAccess",(V)=>V.finish,"call",(V)=>V()])})}catch(V){h([H,"optionalAccess",(q)=>q.finish,"call",(q)=>q()])}return U}else return h([H,"optionalAccess",(U)=>U.finish,"call",(U)=>U()]),F}const z=h([Q,"optionalAccess",(H)=>H.startChild,"call",(H)=>H(J(this,Y,W.slice(0,-1)))]);return $.call(this,...W.slice(0,-1),function(H,F){h([z,"optionalAccess",(U)=>U.finish,"call",(U)=>U()]),G(H,F)})}})}_getSpanContextFromOperationArguments(Z,Y,X){const J={"db.system":"mongodb","db.name":Z.dbName,"db.operation":Y,"db.mongodb.collection":Z.collectionName},$={op:"db",origin:"auto.db.mongo",description:Y,data:J},W=rD1[Y],G=Array.isArray(this._describeOperations)?this._describeOperations.includes(Y):this._describeOperations;if(!W||!G)return $;try{if(Y==="mapReduce"){const[K,Q]=X;J[W[0]]=typeof K==="string"?K:K.name||"<anonymous>",J[W[1]]=typeof Q==="string"?Q:Q.name||"<anonymous>"}else for(let K=0;K<W.length;K++)J[`db.mongodb.${W[K]}`]=JSON.stringify(X[K])}catch(K){}return $}}h$.__initStatic();var oD1=function(Z){return!!Z&&!!Z.$use};class m${static __initStatic(){this.id="Prisma"}constructor(Z={}){if(this.name=m$.id,oD1(Z.client)&&!Z.client._sentryInstrumented){uX(Z.client,"_sentryInstrumented",!0);const Y={};try{const X=Z.client._engineConfig;if(X){const{activeProvider:J,clientVersion:$}=X;if(J)Y["db.system"]=J;if($)Y["db.prisma.version"]=$}}catch(X){}Z.client.$use((X,J)=>{if(K6(H1))return J(X);const{action:$,model:W}=X;return mz({name:W?`${W} ${$}`:$,op:"db.prisma",origin:"auto.db.prisma",data:{...Y,"db.operation":$}},()=>J(X))})}else $0&&f.warn("Unsupported Prisma client provided to PrismaIntegration. Provided client:",Z.client)}setupOnce(){}}m$.__initStatic();class u${static __initStatic(){this.id="GraphQL"}constructor(){this.name=u$.id}loadDependency(){return this._module=this._module||Z7("graphql/execution/execute.js")}setupOnce(Z,Y){if(K6(Y)){$0&&f.log("GraphQL Integration is skipped because of instrumenter configuration.");return}const X=this.loadDependency();if(!X){$0&&f.error("GraphQL Integration was unable to require graphql/execution package.");return}j0(X,"execute",function(J){return function(...$){const W=Y().getScope(),G=W.getSpan(),K=h([G,"optionalAccess",(z)=>z.startChild,"call",(z)=>z({description:"execute",op:"graphql.execute",origin:"auto.graphql.graphql"})]);h([W,"optionalAccess",(z)=>z.setSpan,"call",(z)=>z(K)]);const Q=J.call(this,...$);if(a0(Q))return Q.then((z)=>{return h([K,"optionalAccess",(H)=>H.finish,"call",(H)=>H()]),h([W,"optionalAccess",(H)=>H.setSpan,"call",(H)=>H(G)]),z});return h([K,"optionalAccess",(z)=>z.finish,"call",(z)=>z()]),h([W,"optionalAccess",(z)=>z.setSpan,"call",(z)=>z(G)]),Q}})}}u$.__initStatic();var Ma=function(Z,Y){return Z.map((X)=>{return Object.keys(X).forEach((J)=>{Object.keys(X[J]).forEach(($)=>{if(typeof X[J][$]!=="function")return;eD1(X,J,$,Y)})}),X})},eD1=function(Z,Y,X,J){j0(Z[Y],X,function($){return function(...W){const K=J().getScope().getSpan(),Q=h([K,"optionalAccess",(H)=>H.startChild,"call",(H)=>H({description:`${Y}.${X}`,op:"graphql.resolve",origin:"auto.graphql.apollo"})]),z=$.call(this,...W);if(a0(z))return z.then((H)=>{return h([Q,"optionalAccess",(F)=>F.finish,"call",(F)=>F()]),H});return h([Q,"optionalAccess",(H)=>H.finish,"call",(H)=>H()]),z}})};class d${static __initStatic(){this.id="Apollo"}constructor(Z={useNestjs:!1}){this.name=d$.id,this._useNest=!!Z.useNestjs}loadDependency(){if(this._useNest)this._module=this._module||Z7("@nestjs/graphql");else this._module=this._module||Z7("apollo-server-core");return this._module}setupOnce(Z,Y){if(K6(Y)){$0&&f.log("Apollo Integration is skipped because of instrumenter configuration.");return}if(this._useNest){const X=this.loadDependency();if(!X){$0&&f.error("Apollo-NestJS Integration was unable to require @nestjs/graphql package.");return}j0(X.GraphQLFactory.prototype,"mergeWithSchema",function(J){return function(...$){return j0(this.resolversExplorerService,"explore",function(W){return function(){const G=m5(W.call(this));return Ma(G,Y)}}),J.call(this,...$)}})}else{const X=this.loadDependency();if(!X){$0&&f.error("Apollo Integration was unable to require apollo-server-core package.");return}j0(X.ApolloServerBase.prototype,"constructSchema",function(J){return function(){if(!this.config.resolvers){if($0){if(this.config.schema)f.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `schema` property.If you are using NestJS with Apollo, please use `Sentry.Integrations.Apollo({ useNestjs: true })` instead."),f.warn();else if(this.config.modules)f.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `modules` property.");f.error("Skipping tracing as no resolvers found on the `ApolloServer` instance.")}return J.call(this)}const $=m5(this.config.resolvers);return this.config.resolvers=Ma($,Y),J.call(this)}})}}}d$.__initStatic();import*as Ba from"os";import{TextEncoder as ZP1} from"util";class GN extends eX{constructor(Z){Z._metadata=Z._metadata||{},Z._metadata.sdk=Z._metadata.sdk||{name:"sentry.javascript.node",packages:[{name:"npm:@sentry/node",version:p5}],version:p5},Z.transportOptions={textEncoder:new ZP1,...Z.transportOptions};const Y={...Z,platform:"node",runtime:{name:"node",version:global.process.version},serverName:Z.serverName||global.process.env.SENTRY_NAME||Ba.hostname()};super(Y)}}import*as AP1 from"http";import*as DP1 from"https";import{Readable as PP1} from"stream";import{URL as _a} from"url";import{createGzip as TP1} from"zlib";var xa=pN(ka(),1),jP1=function(Z){return new PP1({read(){this.push(Z),this.push(null)}})},fa=function(Z){let Y;try{Y=new _a(Z.url)}catch(Q){return y8(()=>{console.warn("[@sentry/node]: Invalid dsn or tunnel option, will not send any events. The tunnel option must be a full URL when used.")}),OZ(Z,()=>Promise.resolve({}))}const X=Y.protocol==="https:",J=EP1(Y,Z.proxy||(X?process.env.https_proxy:void 0)||process.env.http_proxy),$=X?DP1:AP1,W=Z.keepAlive===void 0?!1:Z.keepAlive,G=J?new xa.HttpsProxyAgent(J):new $.Agent({keepAlive:W,maxSockets:30,timeout:2000}),K=CP1(Z,x$(Z.httpModule,()=>$),G);return OZ(Z,K)},EP1=function(Z,Y){const{no_proxy:X}=process.env;if(X&&X.split(",").some(($)=>Z.host.endsWith($)||Z.hostname.endsWith($)))return;else return Y},CP1=function(Z,Y,X){const{hostname:J,pathname:$,port:W,protocol:G,search:K}=new _a(Z.url);return function Q(z){return new Promise((H,F)=>{let U=jP1(z.body);const V={...Z.headers};if(z.body.length>IP1)V["content-encoding"]="gzip",U=U.pipe(TP1());const q=Y.request({method:"POST",agent:X,headers:V,hostname:J,path:`${$}${K}`,port:W,protocol:G,ca:Z.caCerts},(L)=>{L.on("data",()=>{}),L.on("end",()=>{}),L.setEncoding("utf8");const R=x$(L.headers["retry-after"],()=>null),B=x$(L.headers["x-sentry-rate-limits"],()=>null);H({statusCode:L.statusCode,headers:{"retry-after":R,"x-sentry-rate-limits":Array.isArray(B)?B[0]:B}})});q.on("error",F),U.pipe(q)})}},IP1=32768;import{spawn as cd1} from"child_process";import{posix as OP1,sep as SP1} from"path";var _P1=function(Z){return Z.replace(/^[A-Z]:/,"").replace(/\\/g,"/")},ya=function(Z,Y=kP1){if(!Z)return;const X=Y?_P1(Z):Z;let{root:J,dir:$,base:W,ext:G}=OP1.parse(X);const Q=`${require&&require.main&&require.main.filename&&$||global.process.cwd()}/`;let z=W;if(G===".js"||G===".mjs"||G===".cjs")z=z.slice(0,G.length*-1);if(!J&&!$)$=".";let H=$.lastIndexOf("/node_modules/");if(H>-1)return`${$.slice(H+14).replace(/\//g,".")}:${z}`;if(H=`${$}/`.lastIndexOf(Q,0),H===0){let F=$.slice(Q.length).replace(/\//g,".");if(F)F+=":";return F+=z,F}return z},kP1=SP1==="\\";var ga=function(){return!!process.send&&!!process.env.SENTRY_ANR_CHILD_PROCESS};var Q6=jB(process.versions.node);import*as az from"domain";var ba=function(){return az.active},xP1=function(){const Z=ba();if(!Z)return;return rX(Z),J7(Z)},fP1=function(Z){const Y={};return rX(Y,Z),J7(Y)},yP1=function(Z,Y){const X=ba();if(X&&h([Y,"optionalAccess",(G)=>G.reuseExisting]))return Z();const J=az.create(),$=X?J7(X):void 0,W=fP1($);return tX(J,W),J.bind(()=>{return Z()})()},va=function(){y$({getCurrentHub:xP1,runWithAsyncContext:yP1})};import*as ha from"async_hooks";var ma=function(){if(!sz)sz=new ha.AsyncLocalStorage;function Z(){return sz.getStore()}function Y(J){const $={};return rX($,J),J7($)}function X(J,$){const W=Z();if(W&&h([$,"optionalAccess",(K)=>K.reuseExisting]))return J();const G=Y(W);return sz.run(G,()=>{return J()})}y$({getCurrentHub:Z,runWithAsyncContext:X})},sz;var ua=function(){if(Q6.major&&Q6.major>=14)ma();else va()};import*as da from"util";class n5{constructor(){n5.prototype.__init.call(this)}static __initStatic(){this.id="Console"}__init(){this.name=n5.id}setupOnce(){TB(({args:Z,level:Y})=>{const X=H1();if(!X.getIntegration(n5))return;X.addBreadcrumb({category:"console",level:yB(Y),message:da.format.apply(void 0,Z)},{input:[...Z],level:Y})})}}n5.__initStatic();var G4=typeof __SENTRY_DEBUG__==="undefined"||__SENTRY_DEBUG__;import{URL as UN} from"url";var la=function(Z){const{protocol:Y,hostname:X,port:J}=ia(Z),$=Z.path?Z.path:"/";return`${Y}//${X}${J}${$}`},VN=function(Z){const{protocol:Y,hostname:X,port:J}=ia(Z),$=Z.pathname||"/",W=Z.auth?gP1(Z.auth):"";return`${Y}//${W}${X}${J}${$}`},gP1=function(Z){const[Y,X]=Z.split(":");return`${Y?"[Filtered]":""}:${X?"[Filtered]":""}@`},qN=function(Z,Y,X){if(!Z)return Z;let[J,$]=Z.split(" ");if(Y.host&&!Y.protocol)Y.protocol=h([X,"optionalAccess",(W)=>W.agent,"optionalAccess",(W)=>W.protocol]),$=VN(Y);if(h([$,"optionalAccess",(W)=>W.startsWith,"call",(W)=>W("///")]))$=$.slice(2);return`${J} ${$}`},ca=function(Z){const Y={protocol:Z.protocol,hostname:typeof Z.hostname==="string"&&Z.hostname.startsWith("[")?Z.hostname.slice(1,-1):Z.hostname,hash:Z.hash,search:Z.search,pathname:Z.pathname,path:`${Z.pathname||""}${Z.search||""}`,href:Z.href};if(Z.port!=="")Y.port=Number(Z.port);if(Z.username||Z.password)Y.auth=`${Z.username}:${Z.password}`;return Y},pa=function(Z,Y){let X,J;if(typeof Y[Y.length-1]==="function")X=Y.pop();if(typeof Y[0]==="string")J=ca(new UN(Y[0]));else if(Y[0]instanceof UN)J=ca(Y[0]);else{J=Y[0];try{const $=new UN(J.path||"",`${J.protocol||"http:"}//${J.hostname}`);J={pathname:$.pathname,search:$.search,hash:$.hash,...J}}catch($){}}if(Y.length===2)J={...J,...Y[1]};if(J.protocol===void 0)if(Q6.major&&Q6.major>8)J.protocol=h([h([Z,"optionalAccess",($)=>$.globalAgent]),"optionalAccess",($)=>$.protocol])||h([J.agent,"optionalAccess",($)=>$.protocol])||h([J._defaultAgent,"optionalAccess",($)=>$.protocol]);else J.protocol=h([J.agent,"optionalAccess",($)=>$.protocol])||h([J._defaultAgent,"optionalAccess",($)=>$.protocol])||h([h([Z,"optionalAccess",($)=>$.globalAgent]),"optionalAccess",($)=>$.protocol]);if(X)return[J,X];else return[J]},ia=function(Z){const Y=Z.protocol||"",X=Z.hostname||Z.host||"",J=!Z.port||Z.port===80||Z.port===443||/^(.*):(\d+)$/.test(X)?"":`:${Z.port}`;return{protocol:Y,hostname:X,port:J}};var na=function(Z,Y,X,J){const $=new Y7(100),W=new Y7(100),G=(z)=>{if(X===void 0)return!0;const H=$.get(z);if(H!==void 0)return H;const F=X(z);return $.set(z,F),F},K=(z)=>{if(J===void 0)return!0;const H=W.get(z);if(H!==void 0)return H;const F=$4(z,J);return W.set(z,F),F};function Q(z,H,F,U){if(!H1().getIntegration(a5))return;H1().addBreadcrumb({category:"http",data:{status_code:U&&U.statusCode,...H},type:"http"},{event:z,request:F,response:U})}return function z(H){return function F(...U){const V=pa(Z,U),q=V[0],L=la(q),R=VN(q);if(SZ(R,H1()))return H.apply(Z,V);const B=H1(),N=B.getScope(),M=N.getSpan(),D=bP1(R,q),m=G(L)?h([M,"optionalAccess",(O)=>O.startChild,"call",(O)=>O({op:"http.client",origin:"auto.http.node.http",description:`${D["http.method"]} ${D.url}`,data:D})]):void 0;if(K(L))if(m){const O=m.toTraceparent(),E=h([m,"optionalAccess",(j)=>j.transaction,"optionalAccess",(j)=>j.getDynamicSamplingContext,"call",(j)=>j()]);aa(q,R,O,E)}else{const O=B.getClient(),{traceId:E,sampled:j,dsc:n}=N.getPropagationContext(),c=CZ(E,void 0,j),y=n||(O?_7(E,O,N):void 0);aa(q,R,c,y)}else G4&&f.log(`[Tracing] Not adding sentry-trace header to outgoing request (${R}) due to mismatching tracePropagationTargets option.`);return H.apply(Z,V).once("response",function(O){const E=this;if(Y)Q("response",D,E,O);if(m){if(O.statusCode)m.setHttpStatus(O.statusCode);m.description=qN(m.description,q,E),m.finish()}}).once("error",function(){const O=this;if(Y)Q("error",D,O);if(m)m.setHttpStatus(500),m.description=qN(m.description,q,O),m.finish()})}}},aa=function(Z,Y,X,J){if((Z.headers||{})["sentry-trace"])return;G4&&f.log(`[Tracing] Adding sentry-trace header ${X} to outgoing request to "${Y}": `);const W=iX(J),G=W&&W.length>0?vP1(Z,W):void 0;Z.headers={...Z.headers,"sentry-trace":X,...G&&{baggage:G}}},bP1=function(Z,Y){const X=Y.method||"GET",J={url:Z,"http.method":X};if(Y.hash)J["http.fragment"]=Y.hash.substring(1);if(Y.search)J["http.query"]=Y.search.substring(1);return J},vP1=function(Z,Y){if(!Z.headers||!Z.headers.baggage)return Y;else if(!Y)return Z.headers.baggage;else if(Array.isArray(Z.headers.baggage))return[...Z.headers.baggage,Y];return[Z.headers.baggage,Y]};class a5{static __initStatic(){this.id="Http"}__init(){this.name=a5.id}constructor(Z={}){a5.prototype.__init.call(this),this._breadcrumbs=typeof Z.breadcrumbs==="undefined"?!0:Z.breadcrumbs,this._tracing=!Z.tracing?void 0:Z.tracing===!0?{}:Z.tracing}setupOnce(Z,Y){if(!this._breadcrumbs&&!this._tracing)return;const X=h([Y,"call",(K)=>K(),"access",(K)=>K.getClient,"call",(K)=>K(),"optionalAccess",(K)=>K.getOptions,"call",(K)=>K()]);if(X&&X.instrumenter!=="sentry"){G4&&f.log("HTTP Integration is skipped because of instrumenter configuration.");return}const J=h([this,"access",(K)=>K._tracing,"optionalAccess",(K)=>K.shouldCreateSpanForRequest])||h([X,"optionalAccess",(K)=>K.shouldCreateSpanForRequest]),$=h([X,"optionalAccess",(K)=>K.tracePropagationTargets])||h([this,"access",(K)=>K._tracing,"optionalAccess",(K)=>K.tracePropagationTargets]),W=import.meta.require("http"),G=na(W,this._breadcrumbs,J,$);if(j0(W,"get",G),j0(W,"request",G),Q6.major&&Q6.major>8){const K=import.meta.require("https"),Q=na(K,this._breadcrumbs,J,$);j0(K,"get",Q),j0(K,"request",Q)}}}a5.__initStatic();var n$=function(Z){y8(()=>{console.error(Z)});const Y=l5();if(Y===void 0)G4&&f.warn("No NodeClient was defined, we are exiting the process now."),global.process.exit(1);const X=Y.getOptions(),J=X&&X.shutdownTimeout&&X.shutdownTimeout>0&&X.shutdownTimeout||hP1;Y.close(J).then(($)=>{if(!$)G4&&f.warn("We reached the timeout for emptying the request buffer, still exiting now!");global.process.exit(1)},($)=>{G4&&f.error($)})},hP1=2000;class p4{static __initStatic(){this.id="OnUncaughtException"}__init(){this.name=p4.id}__init2(){this.handler=this._makeErrorHandler()}constructor(Z={}){p4.prototype.__init.call(this),p4.prototype.__init2.call(this),this._options={exitEvenIfOtherHandlersAreRegistered:!0,...Z}}setupOnce(){global.process.on("uncaughtException",this.handler)}_makeErrorHandler(){let Y=!1,X=!1,J=!1,$;return(W)=>{let G=n$;const K=l5();if(this._options.onFatalError)G=this._options.onFatalError;else if(K&&K.getOptions().onFatalError)G=K.getOptions().onFatalError;const z=global.process.listeners("uncaughtException").reduce((F,U)=>{if(U.name==="domainUncaughtExceptionClear"||U.tag&&U.tag==="sentry_tracingErrorCallback"||U===this.handler)return F;else return F+1},0)===0,H=this._options.exitEvenIfOtherHandlersAreRegistered||z;if(!Y){const F=H1();if($=W,Y=!0,F.getIntegration(p4))F.withScope((U)=>{if(U.setLevel("fatal"),F.captureException(W,{originalException:W,data:{mechanism:{handled:!1,type:"onuncaughtexception"}}}),!J&&H)J=!0,G(W)});else if(!J&&H)J=!0,G(W)}else if(H){if(J)G4&&f.warn("uncaught exception after calling fatal error shutdown callback - this is bad! forcing shutdown"),n$(W);else if(!X)X=!0,setTimeout(()=>{if(!J)J=!0,G($,W)},2000)}}}}p4.__initStatic();class s5{static __initStatic(){this.id="OnUnhandledRejection"}__init(){this.name=s5.id}constructor(Z={mode:"warn"}){this._options=Z,s5.prototype.__init.call(this)}setupOnce(){global.process.on("unhandledRejection",this.sendUnhandledPromise.bind(this))}sendUnhandledPromise(Z,Y){const X=H1();if(X.getIntegration(s5))X.withScope((J)=>{J.setExtra("unhandledPromiseRejection",!0),X.captureException(Z,{originalException:Y,data:{mechanism:{handled:!1,type:"onunhandledrejection"}}})});this._handleRejection(Z)}_handleRejection(Z){const Y="This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). The promise rejected with the reason:";if(this._options.mode==="warn")y8(()=>{console.warn(Y),console.error(Z&&Z.stack?Z.stack:Z)});else if(this._options.mode==="strict")y8(()=>{console.warn(Y)}),n$(Z)}}s5.__initStatic();import{existsSync as mP1,readFileSync as uP1} from"fs";import{dirname as dP1,join as cP1} from"path";var lP1=function(){try{return require.cache?Object.keys(require.cache):[]}catch(Z){return[]}},pP1=function(){const Z=require.main&&require.main.paths||[],Y=lP1(),X={},J={};return Y.forEach(($)=>{let W=$;const G=()=>{const K=W;if(W=dP1(K),!W||K===W||J[K])return;if(Z.indexOf(W)<0)return G();const Q=cP1(K,"package.json");if(J[K]=!0,!mP1(Q))return G();try{const z=JSON.parse(uP1(Q,"utf8"));X[z.name]=z.version}catch(z){}};G()}),X},LN;class r5{constructor(){r5.prototype.__init.call(this)}static __initStatic(){this.id="Modules"}__init(){this.name=r5.id}setupOnce(Z,Y){Z((X)=>{if(!Y().getIntegration(r5))return X;return{...X,modules:{...X.modules,...this._getModules()}}})}_getModules(){if(!LN)LN=pP1();return LN}}r5.__initStatic();import{readFile as iP1} from"fs";var aP1=function(Z){return new Promise((Y,X)=>{iP1(Z,"utf8",(J,$)=>{if(J)X(J);else Y($)})})};async function sP1(Z){const Y=rz.get(Z);if(Y===null)return null;if(Y!==void 0)return Y;let X=null;try{X=(await aP1(Z)).split("\n")}catch(J){}return rz.set(Z,X),X}var rz=new Y7(100),nP1=7;class t5{static __initStatic(){this.id="ContextLines"}__init(){this.name=t5.id}constructor(Z={}){this._options=Z,t5.prototype.__init.call(this)}get _contextLines(){return this._options.frameContextLines!==void 0?this._options.frameContextLines:nP1}setupOnce(Z,Y){Z((X)=>{if(!Y().getIntegration(t5))return X;return this.addSourceContext(X)})}async addSourceContext(Z){const Y={},X=[];if(this._contextLines>0&&h([Z,"access",(J)=>J.exception,"optionalAccess",(J)=>J.values]))for(let J of Z.exception.values){if(!h([J,"access",($)=>$.stacktrace,"optionalAccess",($)=>$.frames]))continue;for(let $=J.stacktrace.frames.length-1;$>=0;$--){const W=J.stacktrace.frames[$];if(W.filename&&!Y[W.filename]&&!rz.get(W.filename))X.push(sP1(W.filename)),Y[W.filename]=1}}if(X.length>0)await Promise.all(X);if(this._contextLines>0&&h([Z,"access",(J)=>J.exception,"optionalAccess",(J)=>J.values])){for(let J of Z.exception.values)if(J.stacktrace&&J.stacktrace.frames)await this.addSourceContextToFrames(J.stacktrace.frames)}return Z}addSourceContextToFrames(Z){for(let Y of Z)if(Y.filename&&Y.context_line===void 0){const X=rz.get(Y.filename);if(X)try{EB(X,Y,this._contextLines)}catch(J){}}}}t5.__initStatic();import{execFile as rP1} from"child_process";import{readFile as tP1,readdir as oP1} from"fs";import*as m0 from"os";import{join as eP1} from"path";import{promisify as ra} from"util";async function XT1(){const Z=m0.platform();switch(Z){case"darwin":return zT1();case"linux":return HT1();default:return{name:GT1[Z]||Z,version:m0.release()}}}var JT1=function(){try{if(typeof process.versions.icu!=="string")return;const Z=new Date(900000000);if(new Intl.DateTimeFormat("es",{month:"long"}).format(Z)==="enero"){const X=Intl.DateTimeFormat().resolvedOptions();return{locale:X.locale,timezone:X.timeZone}}}catch(Z){}return},$T1=function(){const Z=process.memoryUsage().rss;return{app_start_time:new Date(Date.now()-process.uptime()*1000).toISOString(),app_memory:Z}},WT1=function(Z){const Y={};let X;try{X=m0.uptime&&m0.uptime()}catch(J){}if(typeof X==="number")Y.boot_time=new Date(Date.now()-X*1000).toISOString();if(Y.arch=m0.arch(),Z===!0||Z.memory)Y.memory_size=m0.totalmem(),Y.free_memory=m0.freemem();if(Z===!0||Z.cpu){const J=m0.cpus();if(J&&J.length){const $=J[0];Y.processor_count=J.length,Y.cpu_description=$.model,Y.processor_frequency=$.speed}}return Y},K4=function(Z,Y){const X=Z.exec(Y);return X?X[1]:void 0};async function zT1(){const Z={kernel_version:m0.release(),name:"Mac OS X",version:`10.${Number(m0.release().split(".")[0])-4}`};try{const Y=await new Promise((X,J)=>{rP1("/usr/bin/sw_vers",($,W)=>{if($){J($);return}X(W)})});Z.name=K4(/^ProductName:\s+(.*)$/m,Y),Z.version=K4(/^ProductVersion:\s+(.*)$/m,Y),Z.build=K4(/^BuildVersion:\s+(.*)$/m,Y)}catch(Y){}return Z}var sa=function(Z){return Z.split(" ")[0].toLowerCase()};async function HT1(){const Z={kernel_version:m0.release(),name:"Linux"};try{const Y=await YT1("/etc"),X=KT1.find((K)=>Y.includes(K.name));if(!X)return Z;const J=eP1("/etc",X.name),$=(await ZT1(J,{encoding:"utf-8"})).toLowerCase(),{distros:W}=X;Z.name=W.find((K)=>$.indexOf(sa(K))>=0)||W[0];const G=sa(Z.name);Z.version=QT1[G]($)}catch(Y){}return Z}var FT1=function(){if(process.env.VERCEL)return{"cloud.provider":"vercel","cloud.region":process.env.VERCEL_REGION};else if(process.env.AWS_REGION)return{"cloud.provider":"aws","cloud.region":process.env.AWS_REGION,"cloud.platform":process.env.AWS_EXECUTION_ENV};else if(process.env.GCP_PROJECT)return{"cloud.provider":"gcp"};else if(process.env.ALIYUN_REGION_ID)return{"cloud.provider":"alibaba_cloud","cloud.region":process.env.ALIYUN_REGION_ID};else if(process.env.WEBSITE_SITE_NAME&&process.env.REGION_NAME)return{"cloud.provider":"azure","cloud.region":process.env.REGION_NAME};else if(process.env.IBM_CLOUD_REGION)return{"cloud.provider":"ibm_cloud","cloud.region":process.env.IBM_CLOUD_REGION};else if(process.env.TENCENTCLOUD_REGION)return{"cloud.provider":"tencent_cloud","cloud.region":process.env.TENCENTCLOUD_REGION,"cloud.account.id":process.env.TENCENTCLOUD_APPID,"cloud.availability_zone":process.env.TENCENTCLOUD_ZONE};else if(process.env.NETLIFY)return{"cloud.provider":"netlify"};else if(process.env.FLY_REGION)return{"cloud.provider":"fly.io","cloud.region":process.env.FLY_REGION};else if(process.env.DYNO)return{"cloud.provider":"heroku"};else return},ZT1=ra(tP1),YT1=ra(oP1);class _Z{static __initStatic(){this.id="Context"}__init(){this.name=_Z.id}constructor(Z={app:!0,os:!0,device:!0,culture:!0,cloudResource:!0}){this._options=Z,_Z.prototype.__init.call(this)}setupOnce(Z){Z((Y)=>this.addContext(Y))}async addContext(Z){if(this._cachedContext===void 0)this._cachedContext=this._getContexts();const Y=this._updateContext(await this._cachedContext);return Z.contexts={...Z.contexts,app:{...Y.app,...h([Z,"access",(X)=>X.contexts,"optionalAccess",(X)=>X.app])},os:{...Y.os,...h([Z,"access",(X)=>X.contexts,"optionalAccess",(X)=>X.os])},device:{...Y.device,...h([Z,"access",(X)=>X.contexts,"optionalAccess",(X)=>X.device])},culture:{...Y.culture,...h([Z,"access",(X)=>X.contexts,"optionalAccess",(X)=>X.culture])},cloud_resource:{...Y.cloud_resource,...h([Z,"access",(X)=>X.contexts,"optionalAccess",(X)=>X.cloud_resource])}},Z}_updateContext(Z){if(h([Z,"optionalAccess",(Y)=>Y.app,"optionalAccess",(Y)=>Y.app_memory]))Z.app.app_memory=process.memoryUsage().rss;if(h([Z,"optionalAccess",(Y)=>Y.device,"optionalAccess",(Y)=>Y.free_memory]))Z.device.free_memory=m0.freemem();return Z}async _getContexts(){const Z={};if(this._options.os)Z.os=await XT1();if(this._options.app)Z.app=$T1();if(this._options.device)Z.device=WT1(this._options.device);if(this._options.culture){const Y=JT1();if(Y)Z.culture=Y}if(this._options.cloudResource)Z.cloud_resource=FT1();return Z}}_Z.__initStatic();var GT1={aix:"IBM AIX",freebsd:"FreeBSD",openbsd:"OpenBSD",sunos:"SunOS",win32:"Windows"},KT1=[{name:"fedora-release",distros:["Fedora"]},{name:"redhat-release",distros:["Red Hat Linux","Centos"]},{name:"redhat_version",distros:["Red Hat Linux"]},{name:"SuSE-release",distros:["SUSE Linux"]},{name:"lsb-release",distros:["Ubuntu Linux","Arch Linux"]},{name:"debian_version",distros:["Debian"]},{name:"debian_release",distros:["Debian"]},{name:"arch-release",distros:["Arch Linux"]},{name:"gentoo-release",distros:["Gentoo Linux"]},{name:"novell-release",distros:["SUSE Linux"]},{name:"alpine-release",distros:["Alpine Linux"]}],QT1={alpine:(Z)=>Z,arch:(Z)=>K4(/distrib_release=(.*)/,Z),centos:(Z)=>K4(/release ([^ ]+)/,Z),debian:(Z)=>Z,fedora:(Z)=>K4(/release (..)/,Z),mint:(Z)=>K4(/distrib_release=(.*)/,Z),red:(Z)=>K4(/release ([^ ]+)/,Z),suse:(Z)=>K4(/VERSION = (.*)\n/,Z),ubuntu:(Z)=>K4(/distrib_release=(.*)/,Z)};var UT1=function(Z,Y,X){let J=0,$=5,W=0;return setInterval(()=>{if(W===0){if(J>Z){if($*=2,X($),$>86400)$=86400;W=$}}else if(W-=1,W===0)Y();J=0},1000).unref(),()=>{J+=1}},oa=function(Z){let Y=[],X=!1;function J(G){if(Y=[],X)return;X=!0,Z(G)}Y.push(J);function $(G){Y.push(G)}function W(G){const K=Y.pop()||J;try{K(G)}catch(Q){J(G)}}return{add:$,next:W}},VT1=function(){try{return new ea}catch(Z){return}},ta=function(Z){return Z!==void 0&&["","?","<anonymous>"].includes(Z)},qT1=function(Z,Y){return Z===Y||ta(Z)&&ta(Y)},Zs=function(Z){if(Z===void 0)return;return Z.slice(-10).reduce((Y,X)=>`${Y},${X.function},${X.lineno},${X.colno}`,"")},LT1=function(Z,Y){if(Y===void 0)return;return Zs(Z(Y,1))};class ea{constructor(){const{Session:Z}=import.meta.require("inspector");this._session=new Z}configureAndConnect(Z,Y){this._session.connect(),this._session.on("Debugger.paused",(X)=>{Z(X,()=>{this._session.post("Debugger.resume")})}),this._session.post("Debugger.enable"),this._session.post("Debugger.setPauseOnExceptions",{state:Y?"all":"uncaught"})}setPauseOnExceptions(Z){this._session.post("Debugger.setPauseOnExceptions",{state:Z?"all":"uncaught"})}getLocalVariables(Z,Y){this._getProperties(Z,(X)=>{const{add:J,next:$}=oa(Y);for(let W of X)if(h([W,"optionalAccess",(G)=>G.value,"optionalAccess",(G)=>G.objectId])&&h([W,"optionalAccess",(G)=>G.value,"access",(G)=>G.className])==="Array"){const G=W.value.objectId;J((K)=>this._unrollArray(G,W.name,K,$))}else if(h([W,"optionalAccess",(G)=>G.value,"optionalAccess",(G)=>G.objectId])&&h([W,"optionalAccess",(G)=>G.value,"optionalAccess",(G)=>G.className])==="Object"){const G=W.value.objectId;J((K)=>this._unrollObject(G,W.name,K,$))}else if(h([W,"optionalAccess",(G)=>G.value,"optionalAccess",(G)=>G.value])||h([W,"optionalAccess",(G)=>G.value,"optionalAccess",(G)=>G.description]))J((G)=>this._unrollOther(W,G,$));$({})})}_getProperties(Z,Y){this._session.post("Runtime.getProperties",{objectId:Z,ownProperties:!0},(X,J)=>{if(X)Y([]);else Y(J.result)})}_unrollArray(Z,Y,X,J){this._getProperties(Z,($)=>{X[Y]=$.filter((W)=>W.name!=="length"&&!isNaN(parseInt(W.name,10))).sort((W,G)=>parseInt(W.name,10)-parseInt(G.name,10)).map((W)=>h([W,"optionalAccess",(G)=>G.value,"optionalAccess",(G)=>G.value])),J(X)})}_unrollObject(Z,Y,X,J){this._getProperties(Z,($)=>{X[Y]=$.map((W)=>[W.name,h([W,"optionalAccess",(G)=>G.value,"optionalAccess",(G)=>G.value])]).reduce((W,[G,K])=>{return W[G]=K,W},{}),J(X)})}_unrollOther(Z,Y,X){if(h([Z,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.value]))Y[Z.name]=Z.value.value;else if(h([Z,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.description])&&h([Z,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.type])!=="function")Y[Z.name]=`<${Z.value.description}>`;X(Y)}}class o5{static __initStatic(){this.id="LocalVariables"}__init(){this.name=o5.id}__init2(){this._cachedFrames=new Y7(20)}constructor(Z={},Y=VT1()){this._options=Z,this._session=Y,o5.prototype.__init.call(this),o5.prototype.__init2.call(this)}setupOnce(Z,Y){this._setup(Z,h([Y,"call",(X)=>X(),"access",(X)=>X.getClient,"call",(X)=>X(),"optionalAccess",(X)=>X.getOptions,"call",(X)=>X()]))}_setup(Z,Y){if(this._session&&h([Y,"optionalAccess",(X)=>X.includeLocalVariables])){if((Q6.major||0)<18){f.log("The `LocalVariables` integration is only supported on Node >= v18.");return}const J=this._options.captureAllExceptions!==!1;if(this._session.configureAndConnect(($,W)=>this._handlePaused(Y.stackParser,$,W),J),J){const $=this._options.maxExceptionsPerSecond||50;this._rateLimiter=UT1($,()=>{f.log("Local variables rate-limit lifted."),h([this,"access",(W)=>W._session,"optionalAccess",(W)=>W.setPauseOnExceptions,"call",(W)=>W(!0)])},(W)=>{f.log(`Local variables rate-limit exceeded. Disabling capturing of caught exceptions for ${W} seconds.`),h([this,"access",(G)=>G._session,"optionalAccess",(G)=>G.setPauseOnExceptions,"call",(G)=>G(!1)])})}Z(async($)=>this._addLocalVariables($))}}_handlePaused(Z,{params:{reason:Y,data:X,callFrames:J}},$){if(Y!=="exception"&&Y!=="promiseRejection"){$();return}h([this,"access",(Q)=>Q._rateLimiter,"optionalCall",(Q)=>Q()]);const W=LT1(Z,h([X,"optionalAccess",(Q)=>Q.description]));if(W==void 0){$();return}const{add:G,next:K}=oa((Q)=>{this._cachedFrames.set(W,Q),$()});for(let Q=0;Q<Math.min(J.length,5);Q++){const{scopeChain:z,functionName:H,this:F}=J[Q],U=z.find((q)=>q.type==="local"),V=F.className==="global"||!F.className?H:`${F.className}.${H}`;if(h([U,"optionalAccess",(q)=>q.object,"access",(q)=>q.objectId])===void 0)G((q)=>{q[Q]={function:V},K(q)});else{const q=U.object.objectId;G((L)=>h([this,"access",(R)=>R._session,"optionalAccess",(R)=>R.getLocalVariables,"call",(R)=>R(q,(B)=>{L[Q]={function:V,vars:B},K(L)})]))}}K([])}_addLocalVariables(Z){for(let Y of h([Z,"optionalAccess",(X)=>X.exception,"optionalAccess",(X)=>X.values])||[])this._addLocalVariablesToException(Y);return Z}_addLocalVariablesToException(Z){const Y=Zs(h([Z,"optionalAccess",($)=>$.stacktrace,"optionalAccess",($)=>$.frames]));if(Y===void 0)return;const X=this._cachedFrames.remove(Y);if(X===void 0)return;const J=h([Z,"access",($)=>$.stacktrace,"optionalAccess",($)=>$.frames,"optionalAccess",($)=>$.length])||0;for(let $=0;$<J;$++){const W=J-$-1;if(!h([Z,"optionalAccess",(G)=>G.stacktrace,"optionalAccess",(G)=>G.frames,"optionalAccess",(G)=>G[W]])||!X[$])break;if(X[$].vars===void 0||Z.stacktrace.frames[W].in_app===!1||!qT1(Z.stacktrace.frames[W].function,X[$].function))continue;Z.stacktrace.frames[W].vars=X[$].vars}}}o5.__initStatic();var Ys=function(Z,Y,X){if(Z.headers.split("\r\n").some((W)=>W.startsWith("sentry-trace:")))return;if(Z.addHeader("sentry-trace",Y),X)Z.addHeader("baggage",X)},wT1=function(Z,Y,X){const J=C$(X),$=Y.method||"GET",W={"http.method":$};if(J.search)W["http.query"]=J.search;if(J.hash)W["http.fragment"]=J.hash;return h([Z,"optionalAccess",(G)=>G.startChild,"call",(G)=>G({op:"http.client",origin:"auto.http.node.undici",description:`${$} ${O$(J)}`,data:W})])},a$;(function(Z){Z.RequestCreate="undici:request:create";const X="undici:request:headers";Z.RequestEnd=X;const J="undici:request:error";Z.RequestError=J})(a$||(a$={}));class b8{static __initStatic(){this.id="Undici"}__init(){this.name=b8.id}__init2(){this._createSpanUrlMap=new Y7(100)}__init3(){this._headersUrlMap=new Y7(100)}constructor(Z={}){b8.prototype.__init.call(this),b8.prototype.__init2.call(this),b8.prototype.__init3.call(this),b8.prototype.__init4.call(this),b8.prototype.__init5.call(this),b8.prototype.__init6.call(this),this._options={breadcrumbs:Z.breadcrumbs===void 0?!0:Z.breadcrumbs,shouldCreateSpanForRequest:Z.shouldCreateSpanForRequest}}setupOnce(Z){if(Q6.major&&Q6.major<16)return;let Y;try{Y=u5(RT1,"diagnostics_channel")}catch(X){}if(!Y||!Y.subscribe)return;Y.subscribe(a$.RequestCreate,this._onRequestCreate),Y.subscribe(a$.RequestEnd,this._onRequestEnd),Y.subscribe(a$.RequestError,this._onRequestError)}_shouldCreateSpan(Z){if(this._options.shouldCreateSpanForRequest===void 0)return!0;const Y=this._createSpanUrlMap.get(Z);if(Y!==void 0)return Y;const X=this._options.shouldCreateSpanForRequest(Z);return this._createSpanUrlMap.set(Z,X),X}__init4(){this._onRequestCreate=(Z)=>{const Y=H1();if(!Y.getIntegration(b8))return;const{request:X}=Z,J=X.origin?X.origin.toString()+X.path:X.path;if(SZ(J,Y)||X.__sentry_span__!==void 0)return;const $=Y.getClient();if(!$)return;const W=$.getOptions(),G=Y.getScope(),K=G.getSpan(),Q=this._shouldCreateSpan(J)?wT1(K,X,J):void 0;if(Q)X.__sentry_span__=Q;if(((H)=>{if(W.tracePropagationTargets===void 0)return!0;const F=this._headersUrlMap.get(H);if(F!==void 0)return F;const U=$4(H,W.tracePropagationTargets);return this._headersUrlMap.set(H,U),U})(J))if(Q){const H=h([Q,"optionalAccess",(U)=>U.transaction,"optionalAccess",(U)=>U.getDynamicSamplingContext,"call",(U)=>U()]),F=iX(H);Ys(X,Q.toTraceparent(),F)}else{const{traceId:H,sampled:F,dsc:U}=G.getPropagationContext(),V=CZ(H,void 0,F),q=U||_7(H,$,G),L=iX(q);Ys(X,V,L)}}}__init5(){this._onRequestEnd=(Z)=>{const Y=H1();if(!Y.getIntegration(b8))return;const{request:X,response:J}=Z,$=X.origin?X.origin.toString()+X.path:X.path;if(SZ($,Y))return;const W=X.__sentry_span__;if(W)W.setHttpStatus(J.statusCode),W.finish();if(this._options.breadcrumbs)Y.addBreadcrumb({category:"http",data:{method:X.method,status_code:J.statusCode,url:$},type:"http"},{event:"response",request:X,response:J})}}__init6(){this._onRequestError=(Z)=>{const Y=H1();if(!Y.getIntegration(b8))return;const{request:X}=Z,J=X.origin?X.origin.toString()+X.path:X.path;if(SZ(J,Y))return;const $=X.__sentry_span__;if($)$.setStatus("internal_error"),$.finish();if(this._options.breadcrumbs)Y.addBreadcrumb({category:"http",data:{method:X.method,url:J},level:"error",type:"http"},{event:"error",request:X})}}}b8.__initStatic();import*as Xs from"http";import{URL as MT1} from"url";var BT1=function(Z,Y){const X=NT1(Y.sidecarUrl);if(!X)return;let J=0;if(typeof Z.on!=="function"){f.warn("[Spotlight] Cannot connect to spotlight due to missing method on SDK client (`client.on`)");return}Z.on("beforeEnvelope",($)=>{if(J>3){f.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests");return}const W=_$($),G=Xs.request({method:"POST",path:X.pathname,hostname:X.hostname,port:X.port,headers:{"Content-Type":"application/x-sentry-envelope"}},(K)=>{K.on("data",()=>{}),K.on("end",()=>{}),K.setEncoding("utf8")});G.on("error",()=>{J++,f.warn("[Spotlight] Failed to send envelope to Spotlight Sidecar")}),G.write(W),G.end()})},NT1=function(Z){try{return new MT1(`${Z}`)}catch(Y){f.warn(`[Spotlight] Invalid sidecar URL: ${Z}`);return}};class xZ{static __initStatic(){this.id="Spotlight"}__init(){this.name=xZ.id}constructor(Z){xZ.prototype.__init.call(this),this._options={sidecarUrl:h([Z,"optionalAccess",(Y)=>Y.sidecarUrl])||"http://localhost:8969/stream"}}setupOnce(){}setup(Z){BT1(Z,this._options)}}xZ.__initStatic();var wN=function(Z={}){if(ga())Z.autoSessionTracking=!1,Z.tracesSampleRate=0;const Y=k7();ua();const X=h([Y,"access",(W)=>W.__SENTRY__,"optionalAccess",(W)=>W.integrations])||[];if(Z.defaultIntegrations=Z.defaultIntegrations===!1?[]:[...Array.isArray(Z.defaultIntegrations)?Z.defaultIntegrations:Js,...X],Z.dsn===void 0&&process.env.SENTRY_DSN)Z.dsn=process.env.SENTRY_DSN;const J=process.env.SENTRY_TRACES_SAMPLE_RATE;if(Z.tracesSampleRate===void 0&&J){const W=parseFloat(J);if(isFinite(W))Z.tracesSampleRate=W}if(Z.release===void 0){const W=$s();if(W!==void 0)Z.release=W;else Z.autoSessionTracking=!1}if(Z.environment===void 0&&process.env.SENTRY_ENVIRONMENT)Z.environment=process.env.SENTRY_ENVIRONMENT;if(Z.autoSessionTracking===void 0&&Z.dsn!==void 0)Z.autoSessionTracking=!0;if(Z.instrumenter===void 0)Z.instrumenter="sentry";const $={...Z,stackParser:DB(Z.stackParser||Ws),integrations:YN(Z),transport:Z.transport||fa};if($N(Z.clientClass||GN,$),Z.autoSessionTracking)AT1();if(DT1(),Z.spotlight){const W=H1().getClient();if(W&&W.addIntegration)W.setupIntegrations(!0),W.addIntegration(new xZ({sidecarUrl:typeof Z.spotlight==="string"?Z.spotlight:void 0}))}};var $s=function(Z){if(process.env.SENTRY_RELEASE)return process.env.SENTRY_RELEASE;if(k1.SENTRY_RELEASE&&k1.SENTRY_RELEASE.id)return k1.SENTRY_RELEASE.id;return process.env.GITHUB_SHA||process.env.COMMIT_REF||process.env.VERCEL_GIT_COMMIT_SHA||process.env.VERCEL_GITHUB_COMMIT_SHA||process.env.VERCEL_GITLAB_COMMIT_SHA||process.env.VERCEL_BITBUCKET_COMMIT_SHA||process.env.ZEIT_GITHUB_COMMIT_SHA||process.env.ZEIT_GITLAB_COMMIT_SHA||process.env.ZEIT_BITBUCKET_COMMIT_SHA||Z},AT1=function(){const Z=H1();Z.startSession(),process.on("beforeExit",()=>{const Y=Z.getScope().getSession();if(Y&&!["exited","crashed"].includes(Y.status))Z.endSession()})},DT1=function(){const Z=(process.env.SENTRY_USE_ENVIRONMENT||"").toLowerCase();if(!["false","n","no","off","0"].includes(Z)){const Y=process.env.SENTRY_TRACE,X=process.env.SENTRY_BAGGAGE,{propagationContext:J}=k$(Y,X);H1().getScope().setPropagationContext(J)}},Js=[new G6.InboundFilters,new G6.FunctionToString,new G6.LinkedErrors,new n5,new a5,new b8,new p4,new s5,new t5,new o5,new _Z,new r5,new i5],Ws=Iz(PB(ya));var RN={};s$(RN,{Undici:()=>{{return b8}},Spotlight:()=>{{return xZ}},RequestData:()=>{{return i5}},OnUnhandledRejection:()=>{{return s5}},OnUncaughtException:()=>{{return p4}},Modules:()=>{{return r5}},LocalVariables:()=>{{return o5}},Http:()=>{{return a5}},ContextLines:()=>{{return t5}},Context:()=>{{return _Z}},Console:()=>{{return n5}}});var MN={};s$(MN,{Prisma:()=>{{return m$}},Postgres:()=>{{return b$}},Mysql:()=>{{return v$}},Mongo:()=>{{return h$}},GraphQL:()=>{{return u$}},Express:()=>{{return g$}},Apollo:()=>{{return d$}}});var Q4={...G6,...RN,...MN};import*as Gs from"os";class BN extends eX{constructor(Z){Z._metadata=Z._metadata||{},Z._metadata.sdk=Z._metadata.sdk||{name:"sentry.javascript.bun",packages:[{name:"npm:@sentry/bun",version:p5}],version:p5};const Y={...Z,platform:"javascript",runtime:{name:"bun",version:Bun.version},serverName:Z.serverName||global.process.env.SENTRY_NAME||Gs.hostname()};super(Y)}}var PT1=function(){Bun.serve=new Proxy(Bun.serve,{apply(Z,Y,X){return TT1(X[0]),Z.apply(Y,X)}})},TT1=function(Z){Z.fetch=new Proxy(Z.fetch,{apply(Y,X,J){return bz(()=>{const $=J[0],W=$.method.toUpperCase();if(W==="OPTIONS"||W==="HEAD")return Y.apply(X,J);const G=C$($.url),K={"http.request.method":$.method||"GET"};if(G.search)K["http.query"]=G.search;const Q=O$(G);return dz({sentryTrace:$.headers.get("sentry-trace")||"",baggage:$.headers.get("baggage")},(z)=>{return uz({op:"http.server",name:`${$.method} ${G.path||"/"}`,origin:"auto.http.bun.serve",...z,data:K,metadata:{...z.metadata,source:"url",request:{url:Q,method:$.method,headers:$.headers.toJSON()}}},async(H)=>{try{const F=await Y.apply(X,J);if(F&&F.status){if(h([H,"optionalAccess",(U)=>U.setHttpStatus,"call",(U)=>U(F.status)]),h([H,"optionalAccess",(U)=>U.setData,"call",(U)=>U("http.response.status_code",F.status)]),H instanceof oX)H.setContext("response",{headers:F.headers.toJSON(),status_code:F.status})}return F}catch(F){throw c5(F,{mechanism:{type:"bun",handled:!1,data:{function:"serve"}}}),F}})})})}})};class fZ{constructor(){fZ.prototype.__init.call(this)}static __initStatic(){this.id="BunServer"}__init(){this.name=fZ.id}setupOnce(){PT1()}}fZ.__initStatic();var Ks=function(Z){function Y(X){const J={body:X.body,method:"POST",headers:Z.headers};try{return fetch(Z.url,J).then(($)=>{return{statusCode:$.status,headers:{"x-sentry-rate-limits":$.headers.get("X-Sentry-Rate-Limits"),"retry-after":$.headers.get("Retry-After")}}})}catch($){return PZ($)}}return OZ(Z,Y)};var IT1=function(Z={}){Z.clientClass=BN,Z.transport=Z.transport||Ks,Z.defaultIntegrations=Z.defaultIntegrations===!1?[]:[...Array.isArray(Z.defaultIntegrations)?Z.defaultIntegrations:Qs],wN(Z)},Qs=[new G6.InboundFilters,new G6.FunctionToString,new G6.LinkedErrors,new Q4.Console,new Q4.Http,new Q4.Undici,new Q4.ContextLines,new Q4.Context,new Q4.Modules,new Q4.RequestData,new fZ];var NN={};s$(NN,{BunServer:()=>{{return fZ}}});var ll1={...G6,...Q4,...NN};var ET1=function(Z){return"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"};async function OT1(Z){try{const Y=await CT1.beta.threads.create();return console.log(Y),Y}catch(Y){throw c5(Y),new Error(`Error creating thread: ${Y}`)}}var CT1=new Fn({apiKey:"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"}),ST1=async(Z)=>{try{const Y={threadId:Z.id,userId:"1"};return console.log("Saving thread to MongoDB:",Y),await gi.create(Y)}catch(Y){throw c5(Y),new Error(`Error saving thread to MongoDB: ${Y}`)}};async function kT1(Z){try{const Y=ET1(Z),X=await OT1(Y);console.log(X);const J=await ST1(X);return console.log(J),J}catch(Y){throw c5(Y),console.error("Unexpected error:",Y),new Error("Internal Server Error")}}export{ST1 as saveThreadToMongoDB,kT1 as default};

//# debugId=5913FE7636C5738664756e2164756e21
