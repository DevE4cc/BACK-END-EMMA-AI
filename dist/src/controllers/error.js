// @bun
var o1=Object.create;var{defineProperty:AY,getPrototypeOf:r1,getOwnPropertyNames:n1}=Object;var t1=Object.prototype.hasOwnProperty;var e1=(Z,Y,$)=>{$=Z!=null?o1(r1(Z)):{};const Q=Y||!Z||!Z.__esModule?AY($,"default",{value:Z,enumerable:!0}):$;for(let X of n1(Z))if(!t1.call(Q,X))AY(Q,X,{get:()=>Z[X],enumerable:!0});return Q};var p=(Z,Y)=>()=>(Y||Z((Y={exports:{}}).exports,Y),Y.exports);var c=(Z)=>{return import.meta.require(Z)};var hZ=(Z,Y)=>{for(var $ in Y)AY(Z,$,{get:Y[$],enumerable:!0,configurable:!0,set:(Q)=>Y[$]=()=>Q})};var lQ=p((n5,cQ)=>{var $J=function(Z){if(Z=String(Z),Z.length>100)return;var Y=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(Z);if(!Y)return;var $=parseFloat(Y[1]),Q=(Y[2]||"ms").toLowerCase();switch(Q){case"years":case"year":case"yrs":case"yr":case"y":return $*YJ;case"weeks":case"week":case"w":return $*ZJ;case"days":case"day":case"d":return $*x0;case"hours":case"hour":case"hrs":case"hr":case"h":return $*XZ;case"minutes":case"minute":case"mins":case"min":case"m":return $*QZ;case"seconds":case"second":case"secs":case"sec":case"s":return $*$Z;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return $;default:return}},QJ=function(Z){var Y=Math.abs(Z);if(Y>=x0)return Math.round(Z/x0)+"d";if(Y>=XZ)return Math.round(Z/XZ)+"h";if(Y>=QZ)return Math.round(Z/QZ)+"m";if(Y>=$Z)return Math.round(Z/$Z)+"s";return Z+"ms"},XJ=function(Z){var Y=Math.abs(Z);if(Y>=x0)return NY(Z,Y,x0,"day");if(Y>=XZ)return NY(Z,Y,XZ,"hour");if(Y>=QZ)return NY(Z,Y,QZ,"minute");if(Y>=$Z)return NY(Z,Y,$Z,"second");return Z+" ms"},NY=function(Z,Y,$,Q){var X=Y>=$*1.5;return Math.round(Z/$)+" "+Q+(X?"s":"")},$Z=1000,QZ=$Z*60,XZ=QZ*60,x0=XZ*24,ZJ=x0*7,YJ=x0*365.25;cQ.exports=function(Z,Y){Y=Y||{};var $=typeof Z;if($==="string"&&Z.length>0)return $J(Z);else if($==="number"&&isFinite(Z))return Y.long?XJ(Z):QJ(Z);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(Z))}});var B$=p((t5,iQ)=>{var WJ=function(Z){$.debug=$,$.default=$,$.coerce=z,$.disable=W,$.enable=X,$.enabled=J,$.humanize=lQ(),$.destroy=N,Object.keys(Z).forEach((V)=>{$[V]=Z[V]}),$.names=[],$.skips=[],$.formatters={};function Y(V){let G=0;for(let M=0;M<V.length;M++)G=(G<<5)-G+V.charCodeAt(M),G|=0;return $.colors[Math.abs(G)%$.colors.length]}$.selectColor=Y;function $(V){let G,M=null,R,j;function P(...T){if(!P.enabled)return;const E=P,t=Number(new Date),e=t-(G||t);if(E.diff=e,E.prev=G,E.curr=t,G=t,T[0]=$.coerce(T[0]),typeof T[0]!=="string")T.unshift("%O");let u=0;T[0]=T[0].replace(/%([a-zA-Z%])/g,(I,V0)=>{if(I==="%%")return"%";u++;const Z0=$.formatters[V0];if(typeof Z0==="function"){const TY=T[u];I=Z0.call(E,TY),T.splice(u,1),u--}return I}),$.formatArgs.call(E,T),(E.log||$.log).apply(E,T)}if(P.namespace=V,P.useColors=$.useColors(),P.color=$.selectColor(V),P.extend=Q,P.destroy=$.destroy,Object.defineProperty(P,"enabled",{enumerable:!0,configurable:!1,get:()=>{if(M!==null)return M;if(R!==$.namespaces)R=$.namespaces,j=$.enabled(V);return j},set:(T)=>{M=T}}),typeof $.init==="function")$.init(P);return P}function Q(V,G){const M=$(this.namespace+(typeof G==="undefined"?":":G)+V);return M.log=this.log,M}function X(V){$.save(V),$.namespaces=V,$.names=[],$.skips=[];let G;const M=(typeof V==="string"?V:"").split(/[\s,]+/),R=M.length;for(G=0;G<R;G++){if(!M[G])continue;if(V=M[G].replace(/\*/g,".*?"),V[0]==="-")$.skips.push(new RegExp("^"+V.slice(1)+"$"));else $.names.push(new RegExp("^"+V+"$"))}}function W(){const V=[...$.names.map(K),...$.skips.map(K).map((G)=>"-"+G)].join(",");return $.enable(""),V}function J(V){if(V[V.length-1]==="*")return!0;let G,M;for(G=0,M=$.skips.length;G<M;G++)if($.skips[G].test(V))return!1;for(G=0,M=$.names.length;G<M;G++)if($.names[G].test(V))return!0;return!1}function K(V){return V.toString().substring(2,V.toString().length-2).replace(/\.\*\?$/,"*")}function z(V){if(V instanceof Error)return V.stack||V.message;return V}function N(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return $.enable($.load()),$};iQ.exports=WJ});var aQ=p((sQ,wY)=>{var JJ=function(){if(typeof window!=="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},KJ=function(Z){if(Z[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+Z[0]+(this.useColors?"%c ":" ")+"+"+sQ.humanize(this.diff),!this.useColors)return;const Y="color: "+this.color;Z.splice(1,0,Y,"color: inherit");let $=0,Q=0;Z[0].replace(/%[a-zA-Z%]/g,(X)=>{if(X==="%%")return;if($++,X==="%c")Q=$}),Z.splice(Q,0,Y)},zJ=function(Z){try{if(Z)sQ.storage.setItem("debug",Z);else sQ.storage.removeItem("debug")}catch(Y){}},VJ=function(){let Z;try{Z=sQ.storage.getItem("debug")}catch(Y){}if(!Z&&typeof process!=="undefined"&&"env"in process)Z=process.env.DEBUG;return Z},GJ=function(){try{return localStorage}catch(Z){}};sQ.formatArgs=KJ;sQ.save=zJ;sQ.load=VJ;sQ.useColors=JJ;sQ.storage=GJ();sQ.destroy=(()=>{let Z=!1;return()=>{if(!Z)Z=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}})();sQ.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];sQ.log=console.debug||console.log||(()=>{});wY.exports=B$()(sQ);var{formatters:NJ}=wY.exports;NJ.j=function(Z){try{return JSON.stringify(Z)}catch(Y){return"[UnexpectedJSONParseError]: "+Y.message}}});var rQ=p((Zz,oQ)=>{oQ.exports=(Z,Y=process.argv)=>{const $=Z.startsWith("-")?"":Z.length===1?"-":"--",Q=Y.indexOf($+Z),X=Y.indexOf("--");return Q!==-1&&(X===-1||Q<X)}});var eQ=p((Yz,tQ)=>{var L$=function(Z){if(Z===0)return!1;return{level:Z,hasBasic:!0,has256:Z>=2,has16m:Z>=3}},T$=function(Z,Y){if(T0===0)return 0;if(o("color=16m")||o("color=full")||o("color=truecolor"))return 3;if(o("color=256"))return 2;if(Z&&!Y&&T0===void 0)return 0;const $=T0||0;if(f.TERM==="dumb")return $;if(process.platform==="win32"){const Q=BJ.release().split(".");if(Number(Q[0])>=10&&Number(Q[2])>=10586)return Number(Q[2])>=14931?3:2;return 1}if("CI"in f){if(["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some((Q)=>(Q in f))||f.CI_NAME==="codeship")return 1;return $}if("TEAMCITY_VERSION"in f)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(f.TEAMCITY_VERSION)?1:0;if(f.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in f){const Q=parseInt((f.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(f.TERM_PROGRAM){case"iTerm.app":return Q>=3?3:2;case"Apple_Terminal":return 2}}if(/-256(color)?$/i.test(f.TERM))return 2;if(/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(f.TERM))return 1;if("COLORTERM"in f)return 1;return $},LJ=function(Z){const Y=T$(Z,Z&&Z.isTTY);return L$(Y)},BJ=import.meta.require("os"),nQ=import.meta.require("tty"),o=rQ(),{env:f}=process,T0;if(o("no-color")||o("no-colors")||o("color=false")||o("color=never"))T0=0;else if(o("color")||o("colors")||o("color=true")||o("color=always"))T0=1;if("FORCE_COLOR"in f)if(f.FORCE_COLOR==="true")T0=1;else if(f.FORCE_COLOR==="false")T0=0;else T0=f.FORCE_COLOR.length===0?1:Math.min(parseInt(f.FORCE_COLOR,10),3);tQ.exports={supportsColor:LJ,stdout:L$(T$(!0,nQ.isatty(1))),stderr:L$(T$(!0,nQ.isatty(2)))}});var Q1=p((Y1,RY)=>{var AJ=function(){return"colors"in Y1.inspectOpts?Boolean(Y1.inspectOpts.colors):TJ.isatty(process.stderr.fd)},UJ=function(Z){const{namespace:Y,useColors:$}=this;if($){const Q=this.color,X="\x1B[3"+(Q<8?Q:"8;5;"+Q),W=`  ${X};1m${Y} \x1B[0m`;Z[0]=W+Z[0].split("\n").join("\n"+W),Z.push(X+"m+"+Y1.humanize(this.diff)+"\x1B[0m")}else Z[0]=DJ()+Y+" "+Z[0]},DJ=function(){if(Y1.inspectOpts.hideDate)return"";return(new Date()).toISOString()+" "},OJ=function(...Z){return process.stderr.write(FY.format(...Z)+"\n")},IJ=function(Z){if(Z)process.env.DEBUG=Z;else delete process.env.DEBUG},qJ=function(){return process.env.DEBUG},EJ=function(Z){Z.inspectOpts={};const Y=Object.keys(Y1.inspectOpts);for(let $=0;$<Y.length;$++)Z.inspectOpts[Y[$]]=Y1.inspectOpts[Y[$]]},TJ=import.meta.require("tty"),FY=import.meta.require("util");Y1.init=EJ;Y1.log=OJ;Y1.formatArgs=UJ;Y1.save=IJ;Y1.load=qJ;Y1.useColors=AJ;Y1.destroy=FY.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Y1.colors=[6,2,3,4,5,1];try{const Z=eQ();if(Z&&(Z.stderr||Z).level>=2)Y1.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}catch(Z){}Y1.inspectOpts=Object.keys(process.env).filter((Z)=>{return/^debug_/i.test(Z)}).reduce((Z,Y)=>{const $=Y.substring(6).toLowerCase().replace(/_([a-z])/g,(X,W)=>{return W.toUpperCase()});let Q=process.env[Y];if(/^(yes|on|true|enabled)$/i.test(Q))Q=!0;else if(/^(no|off|false|disabled)$/i.test(Q))Q=!1;else if(Q==="null")Q=null;else Q=Number(Q);return Z[$]=Q,Z},{});RY.exports=B$()(Y1);var{formatters:Z1}=RY.exports;Z1.o=function(Z){return this.inspectOpts.colors=this.useColors,FY.inspect(Z,this.inspectOpts).split("\n").map((Y)=>Y.trim()).join(" ")};Z1.O=function(Z){return this.inspectOpts.colors=this.useColors,FY.inspect(Z,this.inspectOpts)}});var jY=p((Qz,A$)=>{if(typeof process==="undefined"||process.type==="renderer"||!1||process.__nwjs)A$.exports=aQ();else A$.exports=Q1()});var W1=p((X1)=>{var xJ=function(Z){return function(Y,$){return new Promise((Q,X)=>{Z.call(this,Y,$,(W,J)=>{if(W)X(W);else Q(J)})})}};Object.defineProperty(X1,"__esModule",{value:!0});X1.default=xJ});var z1=p((D$,K1)=>{var dJ=function(Z){return Boolean(Z)&&typeof Z.addRequest==="function"},U$=function(){const{stack:Z}=new Error;if(typeof Z!=="string")return!1;return Z.split("\n").some((Y)=>Y.indexOf("(https.js:")!==-1||Y.indexOf("node:https:")!==-1)},HY=function(Z,Y){return new HY.Agent(Z,Y)},J1=D$&&D$.__importDefault||function(Z){return Z&&Z.__esModule?Z:{default:Z}},vJ=import.meta.require("events"),mJ=J1(jY()),gJ=J1(W1()),SZ=mJ.default("agent-base");(function(Z){class Y extends vJ.EventEmitter{constructor($,Q){super();let X=Q;if(typeof $==="function")this.callback=$;else if($)X=$;if(this.timeout=null,X&&typeof X.timeout==="number")this.timeout=X.timeout;this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=Infinity,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){if(typeof this.explicitDefaultPort==="number")return this.explicitDefaultPort;return U$()?443:80}set defaultPort($){this.explicitDefaultPort=$}get protocol(){if(typeof this.explicitProtocol==="string")return this.explicitProtocol;return U$()?"https:":"http:"}set protocol($){this.explicitProtocol=$}callback($,Q,X){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest($,Q){const X=Object.assign({},Q);if(typeof X.secureEndpoint!=="boolean")X.secureEndpoint=U$();if(X.host==null)X.host="localhost";if(X.port==null)X.port=X.secureEndpoint?443:80;if(X.protocol==null)X.protocol=X.secureEndpoint?"https:":"http:";if(X.host&&X.path)delete X.path;delete X.agent,delete X.hostname,delete X._defaultAgent,delete X.defaultPort,delete X.createConnection,$._last=!0,$.shouldKeepAlive=!1;let W=!1,J=null;const K=X.timeout||this.timeout,z=(M)=>{if($._hadError)return;$.emit("error",M),$._hadError=!0},N=()=>{J=null,W=!0;const M=new Error(`A "socket" was not created for HTTP request before ${K}ms`);M.code="ETIMEOUT",z(M)},V=(M)=>{if(W)return;if(J!==null)clearTimeout(J),J=null;z(M)},G=(M)=>{if(W)return;if(J!=null)clearTimeout(J),J=null;if(dJ(M)){SZ("Callback returned another Agent instance %o",M.constructor.name),M.addRequest($,X);return}if(M){M.once("free",()=>{this.freeSocket(M,X)}),$.onSocket(M);return}const R=new Error(`no Duplex stream was returned to agent-base for \`${$.method} ${$.path}\``);z(R)};if(typeof this.callback!=="function"){z(new Error("`callback` is not defined"));return}if(!this.promisifiedCallback)if(this.callback.length>=3)SZ("Converting legacy callback function to promise"),this.promisifiedCallback=gJ.default(this.callback);else this.promisifiedCallback=this.callback;if(typeof K==="number"&&K>0)J=setTimeout(N,K);if("port"in X&&typeof X.port!=="number")X.port=Number(X.port);try{SZ("Resolving socket for %o request: %o",X.protocol,`${$.method} ${$.path}`),Promise.resolve(this.promisifiedCallback($,X)).then(G,V)}catch(M){Promise.reject(M).catch(V)}}freeSocket($,Q){SZ("Freeing socket %o %o",$.constructor.name,Q),$.destroy()}destroy(){SZ("Destroying agent %o",this.constructor.name)}}Z.Agent=Y,Z.prototype=Z.Agent.prototype})(HY||(HY={}));K1.exports=HY});var V1=p((yZ)=>{var cJ=function(Z){return new Promise((Y,$)=>{let Q=0;const X=[];function W(){const G=Z.read();if(G)V(G);else Z.once("readable",W)}function J(){Z.removeListener("end",z),Z.removeListener("error",N),Z.removeListener("close",K),Z.removeListener("readable",W)}function K(G){CZ("onclose had error %o",G)}function z(){CZ("onend")}function N(G){J(),CZ("onerror %o",G),$(G)}function V(G){X.push(G),Q+=G.length;const M=Buffer.concat(X,Q);if(M.indexOf("\r\n\r\n")===-1){CZ("have not received end of HTTP headers yet..."),W();return}const j=M.toString("ascii",0,M.indexOf("\r\n")),P=+j.split(" ")[1];CZ("got proxy server response: %o",j),Y({statusCode:P,buffered:M})}Z.on("error",N),Z.on("close",K),Z.on("end",z),W()})},uJ=yZ&&yZ.__importDefault||function(Z){return Z&&Z.__esModule?Z:{default:Z}};Object.defineProperty(yZ,"__esModule",{value:!0});var pJ=uJ(jY()),CZ=pJ.default("https-proxy-agent:parse-proxy-response");yZ.default=cJ});var w1=p((h0)=>{var nJ=function(Z){Z.resume()},tJ=function(Z,Y){return Boolean(!Y&&Z===80||Y&&Z===443)},eJ=function(Z){return typeof Z==="string"?/^https:?$/i.test(Z):!1},Z8=function(Z,...Y){const $={};let Q;for(Q in Z)if(!Y.includes(Q))$[Q]=Z[Q];return $},lJ=h0&&h0.__awaiter||function(Z,Y,$,Q){function X(W){return W instanceof $?W:new $(function(J){J(W)})}return new($||($=Promise))(function(W,J){function K(V){try{N(Q.next(V))}catch(G){J(G)}}function z(V){try{N(Q.throw(V))}catch(G){J(G)}}function N(V){V.done?W(V.value):X(V.value).then(K,z)}N((Q=Q.apply(Z,Y||[])).next())})},JZ=h0&&h0.__importDefault||function(Z){return Z&&Z.__esModule?Z:{default:Z}};Object.defineProperty(h0,"__esModule",{value:!0});var G1=JZ(import.meta.require("net")),N1=JZ(import.meta.require("tls")),iJ=JZ(import.meta.require("url")),sJ=JZ(import.meta.require("assert")),aJ=JZ(jY()),oJ=z1(),rJ=JZ(V1()),_Z=aJ.default("https-proxy-agent:agent");class M1 extends oJ.Agent{constructor(Z){let Y;if(typeof Z==="string")Y=iJ.default.parse(Z);else Y=Z;if(!Y)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");_Z("creating new HttpsProxyAgent instance: %o",Y);super(Y);const $=Object.assign({},Y);if(this.secureProxy=Y.secureProxy||eJ($.protocol),$.host=$.hostname||$.host,typeof $.port==="string")$.port=parseInt($.port,10);if(!$.port&&$.host)$.port=this.secureProxy?443:80;if(this.secureProxy&&!("ALPNProtocols"in $))$.ALPNProtocols=["http 1.1"];if($.host&&$.path)delete $.path,delete $.pathname;this.proxy=$}callback(Z,Y){return lJ(this,void 0,void 0,function*(){const{proxy:$,secureProxy:Q}=this;let X;if(Q)_Z("Creating `tls.Socket`: %o",$),X=N1.default.connect($);else _Z("Creating `net.Socket`: %o",$),X=G1.default.connect($);const W=Object.assign({},$.headers);let K=`CONNECT ${`${Y.host}:${Y.port}`} HTTP/1.1\r\n`;if($.auth)W["Proxy-Authorization"]=`Basic ${Buffer.from($.auth).toString("base64")}`;let{host:z,port:N,secureEndpoint:V}=Y;if(!tJ(N,V))z+=`:${N}`;W.Host=z,W.Connection="close";for(let P of Object.keys(W))K+=`${P}: ${W[P]}\r\n`;const G=rJ.default(X);X.write(`${K}\r\n`);const{statusCode:M,buffered:R}=yield G;if(M===200){if(Z.once("socket",nJ),Y.secureEndpoint){_Z("Upgrading socket connection to TLS");const P=Y.servername||Y.host;return N1.default.connect(Object.assign(Object.assign({},Z8(Y,"host","hostname","path","port")),{socket:X,servername:P}))}return X}X.destroy();const j=new G1.default.Socket({writable:!1});return j.readable=!0,Z.once("socket",(P)=>{_Z("replaying proxy buffer for failed request"),sJ.default(P.listenerCount("data")>0),P.push(R),P.push(null)}),j})}}h0.default=M1});var R1=p((q$,F1)=>{var I$=function(Z){return new O$.default(Z)},Y8=q$&&q$.__importDefault||function(Z){return Z&&Z.__esModule?Z:{default:Z}},O$=Y8(w1());(function(Z){Z.HttpsProxyAgent=O$.default,Z.prototype=O$.default.prototype})(I$||(I$={}));F1.exports=I$});var KZ=function(Z){switch(h$.call(Z)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return $0(Z,Error)}},UY=function(Z,Y){return h$.call(Z)===`[object ${Y}]`};var Y0=function(Z){return UY(Z,"String")},vZ=function(Z){return Z===null||typeof Z!=="object"&&typeof Z!=="function"},m=function(Z){return UY(Z,"Object")},DY=function(Z){return typeof Event!=="undefined"&&$0(Z,Event)},OY=function(Z){return typeof Element!=="undefined"&&$0(Z,Element)},zZ=function(Z){return UY(Z,"RegExp")},k=function(Z){return Boolean(Z&&Z.then&&typeof Z.then==="function")},IY=function(Z){return m(Z)&&"nativeEvent"in Z&&"preventDefault"in Z&&"stopPropagation"in Z},VZ=function(Z){return typeof Z==="number"&&Z!==Z},$0=function(Z,Y){try{return Z instanceof Y}catch($){return!1}},mZ=function(Z){return!!(typeof Z==="object"&&Z!==null&&(Z.__isVue||Z._isVue))},h$=Object.prototype.toString;var Q0=function(Z,Y=0){if(typeof Z!=="string"||Y===0)return Z;return Z.length<=Y?Z:`${Z.slice(0,Y)}...`},GZ=function(Z,Y){let $=Z;const Q=$.length;if(Q<=150)return $;if(Y>Q)Y=Q;let X=Math.max(Y-60,0);if(X<5)X=0;let W=Math.min(X+140,Q);if(W>Q-5)W=Q;if(W===Q)X=Math.max(W-140,0);if($=$.slice(X,W),X>0)$=`'{snip} ${$}`;if(W<Q)$+=" {snip}";return $};var v$=function(Z,Y,$=!1){if(!Y0(Z))return!1;if(zZ(Y))return Y.test(Z);if(Y0(Y))return $?Z===Y:Z.includes(Y);return!1},X0=function(Z,Y=[],$=!1){return Y.some((Q)=>v$(Z,Q,$))};var EY=function(Z,Y,$=250,Q,X,W,J){if(!W.exception||!W.exception.values||!J||!$0(J.originalException,Error))return;const K=W.exception.values.length>0?W.exception.values[W.exception.values.length-1]:void 0;if(K)W.exception.values=ZX(qY(Z,Y,X,J.originalException,Q,W.exception.values,K,0),$)},qY=function(Z,Y,$,Q,X,W,J,K){if(W.length>=$+1)return W;let z=[...W];if($0(Q[X],Error)){m$(J,K);const N=Z(Y,Q[X]),V=z.length;g$(N,X,V,K),z=qY(Z,Y,$,Q[X],X,[N,...z],N,V)}if(Array.isArray(Q.errors))Q.errors.forEach((N,V)=>{if($0(N,Error)){m$(J,K);const G=Z(Y,N),M=z.length;g$(G,`errors[${V}]`,M,K),z=qY(Z,Y,$,N,X,[G,...z],G,M)}});return z},m$=function(Z,Y){Z.mechanism=Z.mechanism||{type:"generic",handled:!0},Z.mechanism={...Z.mechanism,is_exception_group:!0,exception_id:Y}},g$=function(Z,Y,$,Q){Z.mechanism=Z.mechanism||{type:"generic",handled:!0},Z.mechanism={...Z.mechanism,type:"chained",source:Y,exception_id:$,parent_id:Q}},ZX=function(Z,Y){return Z.map(($)=>{if($.value)$.value=Q0($.value,Y);return $})};var gZ=function(Z){return Z&&Z.Math==Math?Z:void 0},NZ=function(){return L},MZ=function(Z,Y,$){const Q=$||L,X=Q.__SENTRY__=Q.__SENTRY__||{};return X[Z]||(X[Z]=Y())},L=typeof globalThis=="object"&&gZ(globalThis)||typeof window=="object"&&gZ(window)||typeof self=="object"&&gZ(self)||typeof global=="object"&&gZ(global)||function(){return this}()||{};var d$=function(Z,Y={}){if(!Z)return"<unknown>";try{let $=Z;const Q=5,X=[];let W=0,J=0;const K=" > ",z=K.length;let N;const V=Array.isArray(Y)?Y:Y.keyAttrs,G=!Array.isArray(Y)&&Y.maxStringLength||YX;while($&&W++<Q){if(N=$X($,V),N==="html"||W>1&&J+X.length*z+N.length>=G)break;X.push(N),J+=N.length,$=$.parentNode}return X.reverse().join(K)}catch($){return"<unknown>"}},$X=function(Z,Y){const $=Z,Q=[];let X,W,J,K,z;if(!$||!$.tagName)return"";Q.push($.tagName.toLowerCase());const N=Y&&Y.length?Y.filter((G)=>$.getAttribute(G)).map((G)=>[G,$.getAttribute(G)]):null;if(N&&N.length)N.forEach((G)=>{Q.push(`[${G[0]}="${G[1]}"]`)});else{if($.id)Q.push(`#${$.id}`);if(X=$.className,X&&Y0(X)){W=X.split(/\s+/);for(z=0;z<W.length;z++)Q.push(`.${W[z]}`)}}const V=["aria-label","type","name","title","alt"];for(z=0;z<V.length;z++)if(J=V[z],K=$.getAttribute(J),K)Q.push(`[${J}="${K}"]`);return Q.join("")};var B9=NZ(),YX=80;var W0=typeof __SENTRY_DEBUG__==="undefined"||__SENTRY_DEBUG__;var C=function(Z){if(!("console"in L))return Z();const Y=L.console,$={},Q=Object.keys(d0);Q.forEach((X)=>{const W=d0[X];$[X]=Y[X],Y[X]=W});try{return Z()}finally{Q.forEach((X)=>{Y[X]=$[X]})}},XX=function(){let Z=!1;const Y={enable:()=>{Z=!0},disable:()=>{Z=!1},isEnabled:()=>Z};if(W0)wZ.forEach(($)=>{Y[$]=(...Q)=>{if(Z)C(()=>{L.console[$](`${QX}[${$}]:`,...Q)})}});else wZ.forEach(($)=>{Y[$]=()=>{return}});return Y},QX="Sentry Logger ",wZ=["debug","info","warn","error","log","assert","trace"],d0={},w=XX();var JX=function(Z){return Z==="http"||Z==="https"},F0=function(Z,Y=!1){const{host:$,path:Q,pass:X,port:W,projectId:J,protocol:K,publicKey:z}=Z;return`${K}://${z}${Y&&X?`:${X}`:""}`+`@${$}${W?`:${W}`:""}/${Q?`${Q}/`:Q}${J}`},u$=function(Z){const Y=WX.exec(Z);if(!Y){C(()=>{console.error(`Invalid Sentry Dsn: ${Z}`)});return}const[$,Q,X="",W,J="",K]=Y.slice(1);let z="",N=K;const V=N.split("/");if(V.length>1)z=V.slice(0,-1).join("/"),N=V.pop();if(N){const G=N.match(/^\d+/);if(G)N=G[0]}return p$({host:W,pass:X,path:z,projectId:N,port:J,protocol:$,publicKey:Q})},p$=function(Z){return{protocol:Z.protocol,publicKey:Z.publicKey||"",pass:Z.pass||"",host:Z.host,port:Z.port||"",path:Z.path||"",projectId:Z.projectId}},KX=function(Z){if(!W0)return!0;const{port:Y,projectId:$,protocol:Q}=Z;if(["protocol","publicKey","host","projectId"].find((J)=>{if(!Z[J])return w.error(`Invalid Sentry Dsn: ${J} missing`),!0;return!1}))return!1;if(!$.match(/^\d+$/))return w.error(`Invalid Sentry Dsn: Invalid projectId ${$}`),!1;if(!JX(Q))return w.error(`Invalid Sentry Dsn: Invalid protocol ${Q}`),!1;if(Y&&isNaN(parseInt(Y,10)))return w.error(`Invalid Sentry Dsn: Invalid port ${Y}`),!1;return!0},dZ=function(Z){const Y=typeof Z==="string"?u$(Z):p$(Z);if(!Y||!KX(Y))return;return Y},WX=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;class y extends Error{constructor(Z,Y="warn"){super(Z);this.message=Z,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=Y}}var D=function(Z,Y,$){if(!(Y in Z))return;const Q=Z[Y],X=$(Q);if(typeof X==="function")i$(X,Q);Z[Y]=X},u0=function(Z,Y,$){try{Object.defineProperty(Z,Y,{value:$,writable:!0,configurable:!0})}catch(Q){W0&&w.log(`Failed to add non-enumerable property "${Y}" to object`,Z)}},i$=function(Z,Y){try{const $=Y.prototype||{};Z.prototype=Y.prototype=$,u0(Z,"__sentry_original__",Y)}catch($){}},fY=function(Z){return Z.__sentry_original__},SY=function(Z){return Object.keys(Z).map((Y)=>`${encodeURIComponent(Y)}=${encodeURIComponent(Z[Y])}`).join("&")},uZ=function(Z){if(KZ(Z))return{message:Z.message,name:Z.name,stack:Z.stack,...l$(Z)};else if(DY(Z)){const Y={type:Z.type,target:c$(Z.target),currentTarget:c$(Z.currentTarget),...l$(Z)};if(typeof CustomEvent!=="undefined"&&$0(Z,CustomEvent))Y.detail=Z.detail;return Y}else return Z},c$=function(Z){try{return OY(Z)?d$(Z):Object.prototype.toString.call(Z)}catch(Y){return"<unknown>"}},l$=function(Z){if(typeof Z==="object"&&Z!==null){const Y={};for(let $ in Z)if(Object.prototype.hasOwnProperty.call(Z,$))Y[$]=Z[$];return Y}else return{}},CY=function(Z,Y=40){const $=Object.keys(uZ(Z));if($.sort(),!$.length)return"[object has no keys]";if($[0].length>=Y)return Q0($[0],Y);for(let Q=$.length;Q>0;Q--){const X=$.slice(0,Q).join(", ");if(X.length>Y)continue;if(Q===$.length)return X;return Q0(X,Y)}return""},O=function(Z){return kY(Z,new Map)},kY=function(Z,Y){if(m(Z)){const $=Y.get(Z);if($!==void 0)return $;const Q={};Y.set(Z,Q);for(let X of Object.keys(Z))if(typeof Z[X]!=="undefined")Q[X]=kY(Z[X],Y);return Q}if(Array.isArray(Z)){const $=Y.get(Z);if($!==void 0)return $;const Q=[];return Y.set(Z,Q),Z.forEach((X)=>{Q.push(kY(X,Y))}),Q}return Z};var zX=function(Z,Y=!1){return!(Y||Z&&!Z.startsWith("/")&&!Z.includes(":\\")&&!Z.startsWith(".")&&!Z.match(/^[a-zA-Z]([a-zA-Z0-9.\-+])*:\/\//))&&Z!==void 0&&!Z.includes("node_modules/")},s$=function(Z){const Y=/^\s*[-]{4,}$/,$=/at (?:async )?(?:(.+?)\s+\()?(?:(.+):(\d+):(\d+)?|([^)]+))\)?/;return(Q)=>{const X=Q.match($);if(X){let W,J,K,z,N;if(X[1]){K=X[1];let M=K.lastIndexOf(".");if(K[M-1]===".")M--;if(M>0){W=K.slice(0,M),J=K.slice(M+1);const R=W.indexOf(".Module");if(R>0)K=K.slice(R+1),W=W.slice(0,R)}z=void 0}if(J)z=W,N=J;if(J==="<anonymous>")N=void 0,K=void 0;if(K===void 0)N=N||"<anonymous>",K=z?`${z}.${N}`:N;let V=X[2]&&X[2].startsWith("file://")?X[2].slice(7):X[2];const G=X[5]==="native";if(!V&&X[5]&&!G)V=X[5];return{filename:V,module:Z?Z(V):void 0,function:K,lineno:parseInt(X[3],10)||void 0,colno:parseInt(X[4],10)||void 0,in_app:zX(V,G)}}if(Q.match(Y))return{filename:Q};return}};var pZ=function(...Z){const Y=Z.sort(($,Q)=>$[0]-Q[0]).map(($)=>$[1]);return($,Q=0)=>{const X=[],W=$.split("\n");for(let J=Q;J<W.length;J++){const K=W[J];if(K.length>1024)continue;const z=a$.test(K)?K.replace(a$,"$1"):K;if(z.match(/\S*Error: /))continue;for(let N of Y){const V=N(z);if(V){X.push(V);break}}if(X.length>=r$)break}return n$(X)}},_Y=function(Z){if(Array.isArray(Z))return pZ(...Z);return Z},n$=function(Z){if(!Z.length)return[];const Y=Array.from(Z);if(/sentryWrapped/.test(Y[Y.length-1].function||""))Y.pop();if(Y.reverse(),o$.test(Y[Y.length-1].function||"")){if(Y.pop(),o$.test(Y[Y.length-1].function||""))Y.pop()}return Y.slice(0,r$).map(($)=>({...$,filename:$.filename||Y[Y.length-1].filename,function:$.function||"?"}))},FZ=function(Z){try{if(!Z||typeof Z!=="function")return yY;return Z.name||yY}catch(Y){return yY}},bY=function(Z){return[90,s$(Z)]},r$=50,a$=/\(error: (.*)\)/,o$=/captureMessage|captureException/,yY="<anonymous>";var p0=function(Z,Y){cZ[Z]=cZ[Z]||[],cZ[Z].push(Y)};var c0=function(Z,Y){if(!t$[Z])Y(),t$[Z]=!0},l0=function(Z,Y){const $=Z&&cZ[Z];if(!$)return;for(let Q of $)try{Q(Y)}catch(X){W0&&w.error(`Error while triggering instrumentation handler.\nType: ${Z}\nName: ${FZ(Q)}\nError:`,X)}},cZ={},t$={};var xY=function(Z){p0("console",Z),c0("console",VX)},VX=function(){if(!("console"in L))return;wZ.forEach(function(Z){if(!(Z in L.console))return;D(L.console,Z,function(Y){return d0[Z]=Y,function(...$){l0("console",{args:$,level:Z});const X=d0[Z];X&&X.apply(L.console,$)}})})};var U=function(){const Z=L,Y=Z.crypto||Z.msCrypto;let $=()=>Math.random()*16;try{if(Y&&Y.randomUUID)return Y.randomUUID().replace(/-/g,"");if(Y&&Y.getRandomValues)$=()=>Y.getRandomValues(new Uint8Array(1))[0]}catch(Q){}return([1e7]+1000+4000+8000+100000000000).replace(/[018]/g,(Q)=>(Q^($()&15)>>Q/4).toString(16))},e$=function(Z){return Z.exception&&Z.exception.values?Z.exception.values[0]:void 0},G0=function(Z){const{message:Y,event_id:$}=Z;if(Y)return Y;const Q=e$(Z);if(Q){if(Q.type&&Q.value)return`${Q.type}: ${Q.value}`;return Q.type||Q.value||$||"<unknown>"}return $||"<unknown>"},hY=function(Z,Y,$){const Q=Z.exception=Z.exception||{},X=Q.values=Q.values||[],W=X[0]=X[0]||{};if(!W.value)W.value=Y||"";if(!W.type)W.type=$||"Error"},RZ=function(Z,Y){const $=e$(Z);if(!$)return;const Q={type:"generic",handled:!0},X=$.mechanism;if($.mechanism={...Q,...X,...Y},Y&&"data"in Y){const W={...X&&X.data,...Y.data};$.mechanism.data=W}},vY=function(Z){const Y=Z.match(GX)||[],$=parseInt(Y[1],10),Q=parseInt(Y[2],10),X=parseInt(Y[3],10);return{buildmetadata:Y[5],major:isNaN($)?void 0:$,minor:isNaN(Q)?void 0:Q,patch:isNaN(X)?void 0:X,prerelease:Y[4]}},mY=function(Z,Y,$=5){if(Y.lineno===void 0)return;const Q=Z.length,X=Math.max(Math.min(Q-1,Y.lineno-1),0);Y.pre_context=Z.slice(Math.max(0,X-$),X).map((W)=>GZ(W,0)),Y.context_line=GZ(Z[Math.min(Q-1,X)],Y.colno||0),Y.post_context=Z.slice(Math.min(X+1,Q),X+1+$).map((W)=>GZ(W,0))},lZ=function(Z){if(Z&&Z.__sentry_captured__)return!0;try{u0(Z,"__sentry_captured__",!0)}catch(Y){}return!1},R0=function(Z){return Array.isArray(Z)?Z:[Z]},GX=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;var gY=function(Z){p0("error",Z),c0("error",NX)},NX=function(){iZ=L.onerror,L.onerror=function(Z,Y,$,Q,X){if(l0("error",{column:Q,error:X,line:$,msg:Z,url:Y}),iZ&&!iZ.__SENTRY_LOADER__)return iZ.apply(this,arguments);return!1},L.onerror.__SENTRY_INSTRUMENTED__=!0},iZ=null;var dY=function(Z){p0("unhandledrejection",Z),c0("unhandledrejection",MX)},MX=function(){sZ=L.onunhandledrejection,L.onunhandledrejection=function(Z){if(l0("unhandledrejection",Z),sZ&&!sZ.__SENTRY_LOADER__)return sZ.apply(this,arguments);return!0},L.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0},sZ=null;var ZQ=function(){return typeof __SENTRY_BROWSER_BUNDLE__!=="undefined"&&!!__SENTRY_BROWSER_BUNDLE__};var pY=function(){return!ZQ()&&Object.prototype.toString.call(typeof process!=="undefined"?process:0)==="[object process]"},j0=function(Z,Y){return Z.require(Y)},l=function(Z){let Y;try{Y=j0(uY,Z)}catch($){}try{const{cwd:$}=j0(uY,"process");Y=j0(uY,`${$()}/node_modules/${Z}`)}catch($){}return Y};var YQ=function(){const Z=typeof WeakSet==="function",Y=Z?new WeakSet:[];function $(X){if(Z){if(Y.has(X))return!0;return Y.add(X),!1}for(let W=0;W<Y.length;W++)if(Y[W]===X)return!0;return Y.push(X),!1}function Q(X){if(Z)Y.delete(X);else for(let W=0;W<Y.length;W++)if(Y[W]===X){Y.splice(W,1);break}}return[$,Q]};var g=function(Z,Y=100,$=Infinity){try{return aZ("",Z,Y,$)}catch(Q){return{ERROR:`**non-serializable** (${Q})`}}},oZ=function(Z,Y=3,$=102400){const Q=g(Z,Y);if(jX(Q)>$)return oZ(Z,Y-1,$);return Q},aZ=function(Z,Y,$=Infinity,Q=Infinity,X=YQ()){const[W,J]=X;if(Y==null||["number","boolean","string"].includes(typeof Y)&&!VZ(Y))return Y;const K=wX(Z,Y);if(!K.startsWith("[object "))return K;if(Y.__sentry_skip_normalization__)return Y;const z=typeof Y.__sentry_override_normalization_depth__==="number"?Y.__sentry_override_normalization_depth__:$;if(z===0)return K.replace("object ","");if(W(Y))return"[Circular ~]";const N=Y;if(N&&typeof N.toJSON==="function")try{const R=N.toJSON();return aZ("",R,z-1,Q,X)}catch(R){}const V=Array.isArray(Y)?[]:{};let G=0;const M=uZ(Y);for(let R in M){if(!Object.prototype.hasOwnProperty.call(M,R))continue;if(G>=Q){V[R]="[MaxProperties ~]";break}const j=M[R];V[R]=aZ(R,j,z-1,Q,X),G++}return J(Y),V},wX=function(Z,Y){try{if(Z==="domain"&&Y&&typeof Y==="object"&&Y._events)return"[Domain]";if(Z==="domainEmitter")return"[DomainEmitter]";if(typeof global!=="undefined"&&Y===global)return"[Global]";if(typeof window!=="undefined"&&Y===window)return"[Window]";if(typeof document!=="undefined"&&Y===document)return"[Document]";if(mZ(Y))return"[VueViewModel]";if(IY(Y))return"[SyntheticEvent]";if(typeof Y==="number"&&Y!==Y)return"[NaN]";if(typeof Y==="function")return`[Function: ${FZ(Y)}]`;if(typeof Y==="symbol")return`[${String(Y)}]`;if(typeof Y==="bigint")return`[BigInt: ${String(Y)}]`;const $=FX(Y);if(/^HTML(\w*)Element$/.test($))return`[HTMLElement: ${$}]`;return`[object ${$}]`}catch($){return`**non-serializable** (${$})`}},FX=function(Z){const Y=Object.getPrototypeOf(Z);return Y?Y.constructor.name:"null prototype"},RX=function(Z){return~-encodeURI(Z).split(/%..|./).length},jX=function(Z){return RX(JSON.stringify(Z))};var d=function(Z){return new S((Y)=>{Y(Z)})},E0=function(Z){return new S((Y,$)=>{$(Z)})},N0;(function(Z){Z[Z.PENDING=0]="PENDING";const $=1;Z[Z.RESOLVED=$]="RESOLVED";const Q=2;Z[Z.REJECTED=Q]="REJECTED"})(N0||(N0={}));class S{constructor(Z){S.prototype.__init.call(this),S.prototype.__init2.call(this),S.prototype.__init3.call(this),S.prototype.__init4.call(this),this._state=N0.PENDING,this._handlers=[];try{Z(this._resolve,this._reject)}catch(Y){this._reject(Y)}}then(Z,Y){return new S(($,Q)=>{this._handlers.push([!1,(X)=>{if(!Z)$(X);else try{$(Z(X))}catch(W){Q(W)}},(X)=>{if(!Y)Q(X);else try{$(Y(X))}catch(W){Q(W)}}]),this._executeHandlers()})}catch(Z){return this.then((Y)=>Y,Z)}finally(Z){return new S((Y,$)=>{let Q,X;return this.then((W)=>{if(X=!1,Q=W,Z)Z()},(W)=>{if(X=!0,Q=W,Z)Z()}).then(()=>{if(X){$(Q);return}Y(Q)})})}__init(){this._resolve=(Z)=>{this._setResult(N0.RESOLVED,Z)}}__init2(){this._reject=(Z)=>{this._setResult(N0.REJECTED,Z)}}__init3(){this._setResult=(Z,Y)=>{if(this._state!==N0.PENDING)return;if(k(Y)){Y.then(this._resolve,this._reject);return}this._state=Z,this._value=Y,this._executeHandlers()}}__init4(){this._executeHandlers=()=>{if(this._state===N0.PENDING)return;const Z=this._handlers.slice();this._handlers=[],Z.forEach((Y)=>{if(Y[0])return;if(this._state===N0.RESOLVED)Y[1](this._value);if(this._state===N0.REJECTED)Y[2](this._value);Y[0]=!0})}}}var cY=function(Z){const Y=[];function $(){return Z===void 0||Y.length<Z}function Q(J){return Y.splice(Y.indexOf(J),1)[0]}function X(J){if(!$())return E0(new y("Not adding Promise because buffer limit was reached."));const K=J();if(Y.indexOf(K)===-1)Y.push(K);return K.then(()=>Q(K)).then(null,()=>Q(K).then(null,()=>{})),K}function W(J){return new S((K,z)=>{let N=Y.length;if(!N)return K(!0);const V=setTimeout(()=>{if(J&&J>0)K(!1)},J);Y.forEach((G)=>{d(G).then(()=>{if(!--N)clearTimeout(V),K(!0)},z)})})}return{$:Y,add:X,drain:W}};var $Q=function(Z){const Y={};let $=0;while($<Z.length){const Q=Z.indexOf("=",$);if(Q===-1)break;let X=Z.indexOf(";",$);if(X===-1)X=Z.length;else if(X<Q){$=Z.lastIndexOf(";",Q-1)+1;continue}const W=Z.slice($,Q).trim();if(Y[W]===void 0){let J=Z.slice(Q+1,X).trim();if(J.charCodeAt(0)===34)J=J.slice(1,-1);try{Y[W]=J.indexOf("%")!==-1?decodeURIComponent(J):J}catch(K){Y[W]=J}}$=X+1}return Y};var jZ=function(Z){if(!Z)return{};const Y=Z.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!Y)return{};const $=Y[6]||"",Q=Y[8]||"";return{host:Y[4],path:Y[5],protocol:Y[2],search:$,hash:Q,relative:Y[5]+$+Q}},k0=function(Z){return Z.split(/[\?#]/,1)[0]},i0=function(Z){return Z.split(/\\?\//).filter((Y)=>Y.length>0&&Y!==",").length},HZ=function(Z){const{protocol:Y,host:$,path:Q}=Z,X=$&&$.replace(/^.*@/,"[filtered]:[filtered]@").replace(/(:80)$/,"").replace(/(:443)$/,"")||"";return`${Y?`${Y}://`:""}${X}${Q}`};var f0=function(Z,Y={}){const $=Z.method&&Z.method.toUpperCase();let Q="",X="url";if(Y.customRoute||Z.route)Q=Y.customRoute||`${Z.baseUrl||""}${Z.route&&Z.route.path}`,X="route";else if(Z.originalUrl||Z.url)Q=k0(Z.originalUrl||Z.url||"");let W="";if(Y.method&&$)W+=$;if(Y.method&&Y.path)W+=" ";if(Y.path&&Q)W+=Q;return[W,X]},BX=function(Z,Y){switch(Y){case"path":return f0(Z,{path:!0})[0];case"handler":return Z.route&&Z.route.stack&&Z.route.stack[0]&&Z.route.stack[0].name||"<anonymous>";case"methodPath":default:{const $=Z._reconstructedRoute?Z._reconstructedRoute:void 0;return f0(Z,{path:!0,method:!0,customRoute:$})[0]}}},LX=function(Z,Y){const $={};return(Array.isArray(Y)?Y:QQ).forEach((X)=>{if(Z&&X in Z)$[X]=Z[X]}),$},lY=function(Z,Y){const{include:$=PX,deps:Q}=Y||{},X={},W=Z.headers||{},J=Z.method,K=Z.hostname||Z.host||W.host||"<no host>",z=Z.protocol==="https"||Z.socket&&Z.socket.encrypted?"https":"http",N=Z.originalUrl||Z.url||"",V=N.startsWith(z)?N:`${z}://${K}${N}`;return $.forEach((G)=>{switch(G){case"headers":{if(X.headers=W,!$.includes("cookies"))delete X.headers.cookie;break}case"method":{X.method=J;break}case"url":{X.url=V;break}case"cookies":{X.cookies=Z.cookies||W.cookie&&$Q(W.cookie)||{};break}case"query_string":{X.query_string=TX(Z,Q);break}case"data":{if(J==="GET"||J==="HEAD")break;if(Z.body!==void 0)X.data=Y0(Z.body)?Z.body:JSON.stringify(g(Z.body));break}default:if({}.hasOwnProperty.call(Z,G))X[G]=Z[G]}}),X},iY=function(Z,Y,$){const Q={...HX,...$&&$.include};if(Q.request){const X=Array.isArray(Q.request)?lY(Y,{include:Q.request,deps:$&&$.deps}):lY(Y,{deps:$&&$.deps});Z.request={...Z.request,...X}}if(Q.user){const X=Y.user&&m(Y.user)?LX(Y.user,Q.user):{};if(Object.keys(X).length)Z.user={...Z.user,...X}}if(Q.ip){const X=Y.ip||Y.socket&&Y.socket.remoteAddress;if(X)Z.user={...Z.user,ip_address:X}}if(Q.transaction&&!Z.transaction)Z.transaction=BX(Y,Q.transaction);return Z},TX=function(Z,Y){let $=Z.originalUrl||Z.url||"";if(!$)return;if($.startsWith("/"))$=`http://dogs.are.great${$}`;try{return Z.query||typeof URL!==void 0&&new URL($).search.slice(1)||Y&&Y.url&&Y.url.parse($).query||void 0}catch(Q){return}};var HX={ip:!1,request:!0,transaction:!0,user:!0},PX=["cookies","data","headers","method","query_string","url"],QQ=["id","username","email"];var sY=function(Z){return Z==="warn"?"warning":XQ.includes(Z)?Z:"log"},XQ=["fatal","error","warning","log","info","debug"];var AX=function(){const{performance:Z}=JQ;if(!Z||!Z.now)return;const Y=Date.now()-Z.now();return{now:()=>Z.now(),timeOrigin:Y}},UX=function(){try{return j0(OX,"perf_hooks").performance}catch(Z){return}},JQ=NZ(),oY={nowSeconds:()=>Date.now()/1000},aY=pY()?UX():AX(),WQ=aY===void 0?oY:{nowSeconds:()=>(aY.timeOrigin+aY.now())/1000},S0=oY.nowSeconds.bind(oY),C0=WQ.nowSeconds.bind(WQ);var PZ,DX=(()=>{const{performance:Z}=JQ;if(!Z||!Z.now){PZ="none";return}const Y=3600000,$=Z.now(),Q=Date.now(),X=Z.timeOrigin?Math.abs(Z.timeOrigin+$-Q):Y,W=X<Y,J=Z.timing&&Z.timing.navigationStart,z=typeof J==="number"?Math.abs(J+$-Q):Y,N=z<Y;if(W||N)if(X<=z)return PZ="timeOrigin",Z.timeOrigin;else return PZ="navigationStart",J;return PZ="dateNow",Q})();var nY=function(Z){if(!Y0(Z)&&!Array.isArray(Z))return;let Y={};if(Array.isArray(Z))Y=Z.reduce((Q,X)=>{const W=KQ(X);return{...Q,...W}},{});else{if(!Z)return;Y=KQ(Z)}const $=Object.entries(Y).reduce((Q,[X,W])=>{if(X.match(zQ)){const J=X.slice(rY.length);Q[J]=W}return Q},{});if(Object.keys($).length>0)return $;else return},s0=function(Z){if(!Z)return;const Y=Object.entries(Z).reduce(($,[Q,X])=>{if(X)$[`${rY}${Q}`]=X;return $},{});return IX(Y)},KQ=function(Z){return Z.split(",").map((Y)=>Y.split("=").map(($)=>decodeURIComponent($.trim()))).reduce((Y,[$,Q])=>{return Y[$]=Q,Y},{})},IX=function(Z){if(Object.keys(Z).length===0)return;return Object.entries(Z).reduce((Y,[$,Q],X)=>{const W=`${encodeURIComponent($)}=${encodeURIComponent(Q)}`,J=X===0?W:`${Y},${W}`;if(J.length>VQ)return W0&&w.warn(`Not adding key: ${$} with val: ${Q} to baggage header due to exceeding baggage size limits.`),Y;else return J},"")};var rY="sentry-",zQ=/^sentry-/,VQ=8192;var NQ=function(Z){if(!Z)return;const Y=Z.match(GQ);if(!Y)return;let $;if(Y[3]==="1")$=!0;else if(Y[3]==="0")$=!1;return{traceId:Y[1],parentSampled:$,parentSpanId:Y[2]}},BZ=function(Z,Y){const $=NQ(Z),Q=nY(Y),{traceId:X,parentSpanId:W,parentSampled:J}=$||{},K={traceId:X||U(),spanId:U().substring(16),sampled:J};if(W)K.parentSpanId=W;if(Q)K.dsc=Q;return{traceparentData:$,dynamicSamplingContext:Q,propagationContext:K}},y0=function(Z=U(),Y=U().substring(16),$){let Q="";if($!==void 0)Q=$?"-1":"-0";return`${Z}-${Y}${Q}`},GQ=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");var H0=function(Z,Y=[]){return[Z,Y]},eY=function(Z,Y){const[$,Q]=Z;return[$,[...Q,Y]]},rZ=function(Z,Y){const $=Z[1];for(let Q of $){const X=Q[0].type;if(Y(Q,X))return!0}return!1};var tY=function(Z,Y){return(Y||new TextEncoder).encode(Z)},LZ=function(Z,Y){const[$,Q]=Z;let X=JSON.stringify($);function W(J){if(typeof X==="string")X=typeof J==="string"?X+J:[tY(X,Y),J];else X.push(typeof J==="string"?tY(J,Y):J)}for(let J of Q){const[K,z]=J;if(W(`\n${JSON.stringify(K)}\n`),typeof z==="string"||z instanceof Uint8Array)W(z);else{let N;try{N=JSON.stringify(z)}catch(V){N=JSON.stringify(g(z))}W(N)}}return typeof X==="string"?X:qX(X)},qX=function(Z){const Y=Z.reduce((X,W)=>X+W.length,0),$=new Uint8Array(Y);let Q=0;for(let X of Z)$.set(X,Q),Q+=X.length;return $};var Z$=function(Z,Y){const $=typeof Z.data==="string"?tY(Z.data,Y):Z.data;return[O({type:"attachment",length:$.length,filename:Z.filename,content_type:Z.contentType,attachment_type:Z.attachmentType}),$]},nZ=function(Z){return EX[Z]},tZ=function(Z){if(!Z||!Z.sdk)return;const{name:Y,version:$}=Z.sdk;return{name:Y,version:$}},Y$=function(Z,Y,$,Q){const X=Z.sdkProcessingMetadata&&Z.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:Z.event_id,sent_at:(new Date()).toISOString(),...Y&&{sdk:Y},...!!$&&Q&&{dsn:F0(Q)},...X&&{trace:O({...X})}}},EX={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",statsd:"unknown"};var MQ=function(Z,Y=Date.now()){const $=parseInt(`${Z}`,10);if(!isNaN($))return $*1000;const Q=Date.parse(`${Z}`);if(!isNaN(Q))return Q-Y;return 60000},wQ=function(Z,Y){return Z[Y]||Z.all||0},$$=function(Z,Y,$=Date.now()){return wQ(Z,Y)>$},Q$=function(Z,{statusCode:Y,headers:$},Q=Date.now()){const X={...Z},W=$&&$["x-sentry-rate-limits"],J=$&&$["retry-after"];if(W)for(let K of W.trim().split(",")){const[z,N]=K.split(":",2),V=parseInt(z,10),G=(!isNaN(V)?V:60)*1000;if(!N)X.all=Q+G;else for(let M of N.split(";"))X[M]=Q+G}else if(J)X.all=Q+MQ(J,Q);else if(Y===429)X.all=Q+60000;return X};var X$=function(Z,Y){return Z(Y.stack||"",1)},eZ=function(Z,Y){const $={type:Y.name||Y.constructor.name,value:Y.message},Q=X$(Z,Y);if(Q.length)$.stacktrace={frames:Q};return $},kX=function(Z){if("name"in Z&&typeof Z.name==="string"){let Y=`'${Z.name}' captured as exception`;if("message"in Z&&typeof Z.message==="string")Y+=` with message '${Z.message}'`;return Y}else if("message"in Z&&typeof Z.message==="string")return Z.message;else return`Object captured as exception with keys: ${CY(Z)}`},W$=function(Z,Y,$,Q){let X=$;const J=Q&&Q.data&&Q.data.mechanism||{handled:!0,type:"generic"};if(!KZ($)){if(m($)){const z=Z(),N=z.getClient(),V=N&&N.getOptions().normalizeDepth;z.configureScope((M)=>{M.setExtra("__serialized__",oZ($,V))});const G=kX($);X=Q&&Q.syntheticException||new Error(G),X.message=G}else X=Q&&Q.syntheticException||new Error($),X.message=$;J.synthetic=!0}const K={exception:{values:[eZ(Y,X)]}};return hY(K,void 0,void 0),RZ(K,J),{...K,event_id:Q&&Q.event_id}},J$=function(Z,Y,$="info",Q,X){const W={event_id:Q&&Q.event_id,level:$,message:Y};if(X&&Q&&Q.syntheticException){const J=X$(Z,Q.syntheticException);if(J.length)W.exception={values:[{value:Y,stacktrace:{frames:J}}]}}return W};class i{constructor(Z){this._maxSize=Z,this._cache=new Map}get size(){return this._cache.size}get(Z){const Y=this._cache.get(Z);if(Y===void 0)return;return this._cache.delete(Z),this._cache.set(Z,Y),Y}set(Z,Y){if(this._cache.size>=this._maxSize)this._cache.delete(this._cache.keys().next().value);this._cache.set(Z,Y)}remove(Z){const Y=this._cache.get(Z);if(Y)this._cache.delete(Z);return Y}clear(){this._cache.clear()}keys(){return Array.from(this._cache.keys())}values(){const Z=[];return this._cache.forEach((Y)=>Z.push(Y)),Z}}var TZ=function(Z,Y){return Z!=null?Z:Y()};var F=function(Z){let Y=void 0,$=Z[0],Q=1;while(Q<Z.length){const X=Z[Q],W=Z[Q+1];if(Q+=2,(X==="optionalAccess"||X==="optionalCall")&&$==null)return;if(X==="access"||X==="optionalAccess")Y=$,$=W($);else if(X==="call"||X==="optionalCall")$=W((...J)=>$.call(Y,...J)),Y=void 0}return $};var H=typeof __SENTRY_DEBUG__==="undefined"||__SENTRY_DEBUG__;var a0="production";var AZ=function(){return MZ("globalEventProcessors",()=>[])},K$=function(Z){AZ().push(Z)},o0=function(Z,Y,$,Q=0){return new S((X,W)=>{const J=Z[Q];if(Y===null||typeof J!=="function")X(Y);else{const K=J({...Y},$);if(H&&J.id&&K===null&&w.log(`Event processor "${J.id}" dropped event`),k(K))K.then((z)=>o0(Z,z,$,Q+1).then(X)).then(null,W);else o0(Z,K,$,Q+1).then(X).then(null,W)}})};var FQ=function(Z){const Y=C0(),$={sid:U(),init:!0,timestamp:Y,started:Y,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>fX($)};if(Z)M0($,Z);return $},M0=function(Z,Y={}){if(Y.user){if(!Z.ipAddress&&Y.user.ip_address)Z.ipAddress=Y.user.ip_address;if(!Z.did&&!Y.did)Z.did=Y.user.id||Y.user.email||Y.user.username}if(Z.timestamp=Y.timestamp||C0(),Y.abnormal_mechanism)Z.abnormal_mechanism=Y.abnormal_mechanism;if(Y.ignoreDuration)Z.ignoreDuration=Y.ignoreDuration;if(Y.sid)Z.sid=Y.sid.length===32?Y.sid:U();if(Y.init!==void 0)Z.init=Y.init;if(!Z.did&&Y.did)Z.did=`${Y.did}`;if(typeof Y.started==="number")Z.started=Y.started;if(Z.ignoreDuration)Z.duration=void 0;else if(typeof Y.duration==="number")Z.duration=Y.duration;else{const $=Z.timestamp-Z.started;Z.duration=$>=0?$:0}if(Y.release)Z.release=Y.release;if(Y.environment)Z.environment=Y.environment;if(!Z.ipAddress&&Y.ipAddress)Z.ipAddress=Y.ipAddress;if(!Z.userAgent&&Y.userAgent)Z.userAgent=Y.userAgent;if(typeof Y.errors==="number")Z.errors=Y.errors;if(Y.status)Z.status=Y.status},RQ=function(Z,Y){let $={};if(Y)$={status:Y};else if(Z.status==="ok")$={status:"exited"};M0(Z,$)},fX=function(Z){return O({sid:`${Z.sid}`,init:Z.init,started:new Date(Z.started*1000).toISOString(),timestamp:new Date(Z.timestamp*1000).toISOString(),status:Z.status,errors:Z.errors,did:typeof Z.did==="number"||typeof Z.did==="string"?`${Z.did}`:void 0,duration:Z.duration,abnormal_mechanism:Z.abnormal_mechanism,attrs:{release:Z.release,environment:Z.environment,ip_address:Z.ipAddress,user_agent:Z.userAgent}})};var jQ=function(){return{traceId:U(),spanId:U().substring(16)}},SX=100;class s{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=jQ()}static clone(Z){const Y=new s;if(Z)Y._breadcrumbs=[...Z._breadcrumbs],Y._tags={...Z._tags},Y._extra={...Z._extra},Y._contexts={...Z._contexts},Y._user=Z._user,Y._level=Z._level,Y._span=Z._span,Y._session=Z._session,Y._transactionName=Z._transactionName,Y._fingerprint=Z._fingerprint,Y._eventProcessors=[...Z._eventProcessors],Y._requestSession=Z._requestSession,Y._attachments=[...Z._attachments],Y._sdkProcessingMetadata={...Z._sdkProcessingMetadata},Y._propagationContext={...Z._propagationContext};return Y}addScopeListener(Z){this._scopeListeners.push(Z)}addEventProcessor(Z){return this._eventProcessors.push(Z),this}setUser(Z){if(this._user=Z||{},this._session)M0(this._session,{user:Z});return this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(Z){return this._requestSession=Z,this}setTags(Z){return this._tags={...this._tags,...Z},this._notifyScopeListeners(),this}setTag(Z,Y){return this._tags={...this._tags,[Z]:Y},this._notifyScopeListeners(),this}setExtras(Z){return this._extra={...this._extra,...Z},this._notifyScopeListeners(),this}setExtra(Z,Y){return this._extra={...this._extra,[Z]:Y},this._notifyScopeListeners(),this}setFingerprint(Z){return this._fingerprint=Z,this._notifyScopeListeners(),this}setLevel(Z){return this._level=Z,this._notifyScopeListeners(),this}setTransactionName(Z){return this._transactionName=Z,this._notifyScopeListeners(),this}setContext(Z,Y){if(Y===null)delete this._contexts[Z];else this._contexts[Z]=Y;return this._notifyScopeListeners(),this}setSpan(Z){return this._span=Z,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const Z=this.getSpan();return Z&&Z.transaction}setSession(Z){if(!Z)delete this._session;else this._session=Z;return this._notifyScopeListeners(),this}getSession(){return this._session}update(Z){if(!Z)return this;if(typeof Z==="function"){const Y=Z(this);return Y instanceof s?Y:this}if(Z instanceof s){if(this._tags={...this._tags,...Z._tags},this._extra={...this._extra,...Z._extra},this._contexts={...this._contexts,...Z._contexts},Z._user&&Object.keys(Z._user).length)this._user=Z._user;if(Z._level)this._level=Z._level;if(Z._fingerprint)this._fingerprint=Z._fingerprint;if(Z._requestSession)this._requestSession=Z._requestSession;if(Z._propagationContext)this._propagationContext=Z._propagationContext}else if(m(Z)){if(Z=Z,this._tags={...this._tags,...Z.tags},this._extra={...this._extra,...Z.extra},this._contexts={...this._contexts,...Z.contexts},Z.user)this._user=Z.user;if(Z.level)this._level=Z.level;if(Z.fingerprint)this._fingerprint=Z.fingerprint;if(Z.requestSession)this._requestSession=Z.requestSession;if(Z.propagationContext)this._propagationContext=Z.propagationContext}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=jQ(),this}addBreadcrumb(Z,Y){const $=typeof Y==="number"?Y:SX;if($<=0)return this;const Q={timestamp:S0(),...Z},X=this._breadcrumbs;return X.push(Q),this._breadcrumbs=X.length>$?X.slice(-$):X,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(Z){return this._attachments.push(Z),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(Z,Y={},$){if(this._extra&&Object.keys(this._extra).length)Z.extra={...this._extra,...Z.extra};if(this._tags&&Object.keys(this._tags).length)Z.tags={...this._tags,...Z.tags};if(this._user&&Object.keys(this._user).length)Z.user={...this._user,...Z.user};if(this._contexts&&Object.keys(this._contexts).length)Z.contexts={...this._contexts,...Z.contexts};if(this._level)Z.level=this._level;if(this._transactionName)Z.transaction=this._transactionName;if(this._span){Z.contexts={trace:this._span.getTraceContext(),...Z.contexts};const W=this._span.transaction;if(W){Z.sdkProcessingMetadata={dynamicSamplingContext:W.getDynamicSamplingContext(),...Z.sdkProcessingMetadata};const J=W.name;if(J)Z.tags={transaction:J,...Z.tags}}}this._applyFingerprint(Z);const Q=this._getBreadcrumbs(),X=[...Z.breadcrumbs||[],...Q];return Z.breadcrumbs=X.length>0?X:void 0,Z.sdkProcessingMetadata={...Z.sdkProcessingMetadata,...this._sdkProcessingMetadata,propagationContext:this._propagationContext},o0([...$||[],...AZ(),...this._eventProcessors],Z,Y)}setSDKProcessingMetadata(Z){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...Z},this}setPropagationContext(Z){return this._propagationContext=Z,this}getPropagationContext(){return this._propagationContext}_getBreadcrumbs(){return this._breadcrumbs}_notifyScopeListeners(){if(!this._notifyingListeners)this._notifyingListeners=!0,this._scopeListeners.forEach((Z)=>{Z(this)}),this._notifyingListeners=!1}_applyFingerprint(Z){if(Z.fingerprint=Z.fingerprint?R0(Z.fingerprint):[],this._fingerprint)Z.fingerprint=Z.fingerprint.concat(this._fingerprint);if(Z.fingerprint&&!Z.fingerprint.length)delete Z.fingerprint}}var r=function(){return L.__SENTRY__=L.__SENTRY__||{extensions:{},hub:void 0},L},ZY=function(Z){const Y=r(),$=a(Y);return t0(Y,Z),$},B=function(){const Z=r();if(Z.__SENTRY__&&Z.__SENTRY__.acs){const Y=Z.__SENTRY__.acs.getCurrentHub();if(Y)return Y}return HQ(Z)},HQ=function(Z=r()){if(!PQ(Z)||a(Z).isOlderThan(z$))t0(Z,new r0);return a(Z)},n0=function(Z,Y=HQ()){if(!PQ(Z)||a(Z).isOlderThan(z$)){const $=Y.getStackTop();t0(Z,new r0($.client,s.clone($.scope)))}},UZ=function(Z){const Y=r();Y.__SENTRY__=Y.__SENTRY__||{},Y.__SENTRY__.acs=Z},YY=function(Z,Y={}){const $=r();if($.__SENTRY__&&$.__SENTRY__.acs)return $.__SENTRY__.acs.runWithAsyncContext(Z,Y);return Z()},PQ=function(Z){return!!(Z&&Z.__SENTRY__&&Z.__SENTRY__.hub)},a=function(Z){return MZ("hub",()=>new r0,Z)},t0=function(Z,Y){if(!Z)return!1;const $=Z.__SENTRY__=Z.__SENTRY__||{};return $.hub=Y,!0},z$=4,CX=100;class r0{constructor(Z,Y=new s,$=z$){if(this._version=$,this._stack=[{scope:Y}],Z)this.bindClient(Z)}isOlderThan(Z){return this._version<Z}bindClient(Z){const Y=this.getStackTop();if(Y.client=Z,Z&&Z.setupIntegrations)Z.setupIntegrations()}pushScope(){const Z=s.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:Z}),Z}popScope(){if(this.getStack().length<=1)return!1;return!!this.getStack().pop()}withScope(Z){const Y=this.pushScope();try{Z(Y)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(Z,Y){const $=this._lastEventId=Y&&Y.event_id?Y.event_id:U(),Q=new Error("Sentry syntheticException");return this._withClient((X,W)=>{X.captureException(Z,{originalException:Z,syntheticException:Q,...Y,event_id:$},W)}),$}captureMessage(Z,Y,$){const Q=this._lastEventId=$&&$.event_id?$.event_id:U(),X=new Error(Z);return this._withClient((W,J)=>{W.captureMessage(Z,Y,{originalException:Z,syntheticException:X,...$,event_id:Q},J)}),Q}captureEvent(Z,Y){const $=Y&&Y.event_id?Y.event_id:U();if(!Z.type)this._lastEventId=$;return this._withClient((Q,X)=>{Q.captureEvent(Z,{...Y,event_id:$},X)}),$}lastEventId(){return this._lastEventId}addBreadcrumb(Z,Y){const{scope:$,client:Q}=this.getStackTop();if(!Q)return;const{beforeBreadcrumb:X=null,maxBreadcrumbs:W=CX}=Q.getOptions&&Q.getOptions()||{};if(W<=0)return;const K={timestamp:S0(),...Z},z=X?C(()=>X(K,Y)):K;if(z===null)return;if(Q.emit)Q.emit("beforeAddBreadcrumb",z,Y);$.addBreadcrumb(z,W)}setUser(Z){this.getScope().setUser(Z)}setTags(Z){this.getScope().setTags(Z)}setExtras(Z){this.getScope().setExtras(Z)}setTag(Z,Y){this.getScope().setTag(Z,Y)}setExtra(Z,Y){this.getScope().setExtra(Z,Y)}setContext(Z,Y){this.getScope().setContext(Z,Y)}configureScope(Z){const{scope:Y,client:$}=this.getStackTop();if($)Z(Y)}run(Z){const Y=ZY(this);try{Z(this)}finally{ZY(Y)}}getIntegration(Z){const Y=this.getClient();if(!Y)return null;try{return Y.getIntegration(Z)}catch($){return H&&w.warn(`Cannot retrieve integration ${Z.id} from the current Hub`),null}}startTransaction(Z,Y){const $=this._callExtensionMethod("startTransaction",Z,Y);if(H&&!$)if(!this.getClient())w.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'");else w.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`);return $}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(Z=!1){if(Z)return this.endSession();this._sendSessionUpdate()}endSession(){const Y=this.getStackTop().scope,$=Y.getSession();if($)RQ($);this._sendSessionUpdate(),Y.setSession()}startSession(Z){const{scope:Y,client:$}=this.getStackTop(),{release:Q,environment:X=a0}=$&&$.getOptions()||{},{userAgent:W}=L.navigator||{},J=FQ({release:Q,environment:X,user:Y.getUser(),...W&&{userAgent:W},...Z}),K=Y.getSession&&Y.getSession();if(K&&K.status==="ok")M0(K,{status:"exited"});return this.endSession(),Y.setSession(J),J}shouldSendDefaultPii(){const Z=this.getClient(),Y=Z&&Z.getOptions();return Boolean(Y&&Y.sendDefaultPii)}_sendSessionUpdate(){const{scope:Z,client:Y}=this.getStackTop(),$=Z.getSession();if($&&Y&&Y.captureSession)Y.captureSession($)}_withClient(Z){const{scope:Y,client:$}=this.getStackTop();if($)Z($,Y)}_callExtensionMethod(Z,...Y){const Q=r().__SENTRY__;if(Q&&Q.extensions&&typeof Q.extensions[Z]==="function")return Q.extensions[Z].apply(this,Y);H&&w.warn(`Extension method ${Z} couldn't be found, doing nothing.`)}}var V$=function(Z){return(Z||B()).getScope().getTransaction()};var LQ=function(){if(BQ)return;BQ=!0,gY(G$),dY(G$)},G$=function(){const Z=V$();if(Z)H&&w.log("[Tracing] Transaction: internal_error -> Global error occured"),Z.setStatus("internal_error")},BQ=!1;G$.tag="sentry_tracingErrorCallback";var TQ=function(Z){if(Z<400&&Z>=100)return"ok";if(Z>=400&&Z<500)switch(Z){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(Z>=500&&Z<600)switch(Z){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"};class N${constructor(Z=1000){this._maxlen=Z,this.spans=[]}add(Z){if(this.spans.length>this._maxlen)Z.spanRecorder=void 0;else this.spans.push(Z)}}class $Y{constructor(Z={}){if(this.traceId=Z.traceId||U(),this.spanId=Z.spanId||U().substring(16),this.startTimestamp=Z.startTimestamp||C0(),this.tags=Z.tags||{},this.data=Z.data||{},this.instrumenter=Z.instrumenter||"sentry",this.origin=Z.origin||"manual",Z.parentSpanId)this.parentSpanId=Z.parentSpanId;if("sampled"in Z)this.sampled=Z.sampled;if(Z.op)this.op=Z.op;if(Z.description)this.description=Z.description;if(Z.name)this.description=Z.name;if(Z.status)this.status=Z.status;if(Z.endTimestamp)this.endTimestamp=Z.endTimestamp}get name(){return this.description||""}set name(Z){this.setName(Z)}startChild(Z){const Y=new $Y({...Z,parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId});if(Y.spanRecorder=this.spanRecorder,Y.spanRecorder)Y.spanRecorder.add(Y);if(Y.transaction=this.transaction,H&&Y.transaction){const $=Z&&Z.op||"< unknown op >",Q=Y.transaction.name||"< unknown name >",X=Y.transaction.spanId,W=`[Tracing] Starting '${$}' span on transaction '${Q}' (${X}).`;Y.transaction.metadata.spanMetadata[Y.spanId]={logMessage:W},w.log(W)}return Y}setTag(Z,Y){return this.tags={...this.tags,[Z]:Y},this}setData(Z,Y){return this.data={...this.data,[Z]:Y},this}setStatus(Z){return this.status=Z,this}setHttpStatus(Z){this.setTag("http.status_code",String(Z)),this.setData("http.response.status_code",Z);const Y=TQ(Z);if(Y!=="unknown_error")this.setStatus(Y);return this}setName(Z){this.description=Z}isSuccess(){return this.status==="ok"}finish(Z){if(H&&this.transaction&&this.transaction.spanId!==this.spanId){const{logMessage:Y}=this.transaction.metadata.spanMetadata[this.spanId];if(Y)w.log(Y.replace("Starting","Finishing"))}this.endTimestamp=typeof Z==="number"?Z:C0()}toTraceparent(){return y0(this.traceId,this.spanId,this.sampled)}toContext(){return O({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})}updateWithContext(Z){return this.data=Z.data||{},this.description=Z.description,this.endTimestamp=Z.endTimestamp,this.op=Z.op,this.parentSpanId=Z.parentSpanId,this.sampled=Z.sampled,this.spanId=Z.spanId||this.spanId,this.startTimestamp=Z.startTimestamp||this.startTimestamp,this.status=Z.status,this.tags=Z.tags||{},this.traceId=Z.traceId||this.traceId,this}getTraceContext(){return O({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId,origin:this.origin})}toJSON(){return O({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId,origin:this.origin})}}var n=function(Z,Y,$){const Q=Y.getOptions(),{publicKey:X}=Y.getDsn()||{},{segment:W}=$&&$.getUser()||{},J=O({environment:Q.environment||a0,release:Q.release,user_segment:W,public_key:X,trace_id:Z});return Y.emit&&Y.emit("createDsc",J),J};class e0 extends $Y{constructor(Z,Y){super(Z);delete this.description,this._measurements={},this._contexts={},this._hub=Y||B(),this._name=Z.name||"",this.metadata={source:"custom",...Z.metadata,spanMetadata:{}},this._trimEnd=Z.trimEnd,this.transaction=this;const $=this.metadata.dynamicSamplingContext;if($)this._frozenDynamicSamplingContext={...$}}get name(){return this._name}set name(Z){this.setName(Z)}setName(Z,Y="custom"){this._name=Z,this.metadata.source=Y}initSpanRecorder(Z=1000){if(!this.spanRecorder)this.spanRecorder=new N$(Z);this.spanRecorder.add(this)}setContext(Z,Y){if(Y===null)delete this._contexts[Z];else this._contexts[Z]=Y}setMeasurement(Z,Y,$=""){this._measurements[Z]={value:Y,unit:$}}setMetadata(Z){this.metadata={...this.metadata,...Z}}finish(Z){const Y=this._finishTransaction(Z);if(!Y)return;return this._hub.captureEvent(Y)}toContext(){const Z=super.toContext();return O({...Z,name:this.name,trimEnd:this._trimEnd})}updateWithContext(Z){return super.updateWithContext(Z),this.name=Z.name||"",this._trimEnd=Z.trimEnd,this}getDynamicSamplingContext(){if(this._frozenDynamicSamplingContext)return this._frozenDynamicSamplingContext;const Z=this._hub||B(),Y=Z.getClient();if(!Y)return{};const $=Z.getScope(),Q=n(this.traceId,Y,$),X=this.metadata.sampleRate;if(X!==void 0)Q.sample_rate=`${X}`;const W=this.metadata.source;if(W&&W!=="url")Q.transaction=this.name;if(this.sampled!==void 0)Q.sampled=String(this.sampled);return Q}setHub(Z){this._hub=Z}_finishTransaction(Z){if(this.endTimestamp!==void 0)return;if(!this.name)H&&w.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>";super.finish(Z);const Y=this._hub.getClient();if(Y&&Y.emit)Y.emit("finishTransaction",this);if(this.sampled!==!0){if(H&&w.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),Y)Y.recordDroppedEvent("sample_rate","transaction");return}const $=this.spanRecorder?this.spanRecorder.spans.filter((J)=>J!==this&&J.endTimestamp):[];if(this._trimEnd&&$.length>0)this.endTimestamp=$.reduce((J,K)=>{if(J.endTimestamp&&K.endTimestamp)return J.endTimestamp>K.endTimestamp?J:K;return J}).endTimestamp;const Q=this.metadata,X={contexts:{...this._contexts,trace:this.getTraceContext()},spans:$,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",sdkProcessingMetadata:{...Q,dynamicSamplingContext:this.getDynamicSamplingContext()},...Q.source&&{transaction_info:{source:Q.source}}};if(Object.keys(this._measurements).length>0)H&&w.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),X.measurements=this._measurements;return H&&w.log(`[Tracing] Finishing ${this.op} transaction: ${this.name}.`),X}}var UQ=function(Z,Y,$,Q,X){const{normalizeDepth:W=3,normalizeMaxBreadth:J=1000}=Z,K={...Y,event_id:Y.event_id||$.event_id||U(),timestamp:Y.timestamp||S0()},z=$.integrations||Z.integrations.map((M)=>M.name);if(yX(K,Z),xX(K,z),Y.type===void 0)_X(K,Z.stackParser);let N=Q;if($.captureContext)N=s.clone(N).update($.captureContext);if($.mechanism)RZ(K,$.mechanism);let V=d(K);const G=X&&X.getEventProcessors?X.getEventProcessors():[];if(N){if(N.getAttachments){const M=[...$.attachments||[],...N.getAttachments()];if(M.length)$.attachments=M}V=N.applyToEvent(K,$,G)}else V=o0([...G,...AZ()],K,$);return V.then((M)=>{if(M)bX(M);if(typeof W==="number"&&W>0)return hX(M,W,J);return M})},yX=function(Z,Y){const{environment:$,release:Q,dist:X,maxValueLength:W=250}=Y;if(!("environment"in Z))Z.environment="environment"in Y?$:a0;if(Z.release===void 0&&Q!==void 0)Z.release=Q;if(Z.dist===void 0&&X!==void 0)Z.dist=X;if(Z.message)Z.message=Q0(Z.message,W);const J=Z.exception&&Z.exception.values&&Z.exception.values[0];if(J&&J.value)J.value=Q0(J.value,W);const K=Z.request;if(K&&K.url)K.url=Q0(K.url,W)},_X=function(Z,Y){const $=L._sentryDebugIds;if(!$)return;let Q;const X=AQ.get(Y);if(X)Q=X;else Q=new Map,AQ.set(Y,Q);const W=Object.keys($).reduce((J,K)=>{let z;const N=Q.get(K);if(N)z=N;else z=Y(K),Q.set(K,z);for(let V=z.length-1;V>=0;V--){const G=z[V];if(G.filename){J[G.filename]=$[K];break}}return J},{});try{Z.exception.values.forEach((J)=>{J.stacktrace.frames.forEach((K)=>{if(K.filename)K.debug_id=W[K.filename]})})}catch(J){}},bX=function(Z){const Y={};try{Z.exception.values.forEach((Q)=>{Q.stacktrace.frames.forEach((X)=>{if(X.debug_id){if(X.abs_path)Y[X.abs_path]=X.debug_id;else if(X.filename)Y[X.filename]=X.debug_id;delete X.debug_id}})})}catch(Q){}if(Object.keys(Y).length===0)return;Z.debug_meta=Z.debug_meta||{},Z.debug_meta.images=Z.debug_meta.images||[];const $=Z.debug_meta.images;Object.keys(Y).forEach((Q)=>{$.push({type:"sourcemap",code_file:Q,debug_id:Y[Q]})})},xX=function(Z,Y){if(Y.length>0)Z.sdk=Z.sdk||{},Z.sdk.integrations=[...Z.sdk.integrations||[],...Y]},hX=function(Z,Y,$){if(!Z)return null;const Q={...Z,...Z.breadcrumbs&&{breadcrumbs:Z.breadcrumbs.map((X)=>({...X,...X.data&&{data:g(X.data,Y,$)}}))},...Z.user&&{user:g(Z.user,Y,$)},...Z.contexts&&{contexts:g(Z.contexts,Y,$)},...Z.extra&&{extra:g(Z.extra,Y,$)}};if(Z.contexts&&Z.contexts.trace&&Q.contexts){if(Q.contexts.trace=Z.contexts.trace,Z.contexts.trace.data)Q.contexts.trace.data=g(Z.contexts.trace.data,Y,$)}if(Z.spans)Q.spans=Z.spans.map((X)=>{if(X.data)X.data=g(X.data,Y,$);return X});return Q},DQ=function(Z){if(!Z)return;if(vX(Z))return{captureContext:Z};if(gX(Z))return{captureContext:Z};return Z},vX=function(Z){return Z instanceof s||typeof Z==="function"},gX=function(Z){return Object.keys(Z).some((Y)=>mX.includes(Y))},AQ=new WeakMap,mX=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];var ZZ=function(Z,Y){return B().captureException(Z,DQ(Y))};var P0=function(){return B().getClient()};var QY=function(Z){if(typeof __SENTRY_TRACING__==="boolean"&&!__SENTRY_TRACING__)return!1;const Y=P0(),$=Z||Y&&Y.getOptions();return!!$&&($.enableTracing||("tracesSampleRate"in $)||("tracesSampler"in $))};var OQ=function(Z,Y,$){if(!QY(Y))return Z.sampled=!1,Z;if(Z.sampled!==void 0)return Z.setMetadata({sampleRate:Number(Z.sampled)}),Z;let Q;if(typeof Y.tracesSampler==="function")Q=Y.tracesSampler($),Z.setMetadata({sampleRate:Number(Q)});else if($.parentSampled!==void 0)Q=$.parentSampled;else if(typeof Y.tracesSampleRate!=="undefined")Q=Y.tracesSampleRate,Z.setMetadata({sampleRate:Number(Q)});else Q=1,Z.setMetadata({sampleRate:Q});if(!dX(Q))return H&&w.warn("[Tracing] Discarding transaction because of invalid sample rate."),Z.sampled=!1,Z;if(!Q)return H&&w.log(`[Tracing] Discarding transaction because ${typeof Y.tracesSampler==="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),Z.sampled=!1,Z;if(Z.sampled=Math.random()<Q,!Z.sampled)return H&&w.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(Q)})`),Z;return H&&w.log(`[Tracing] starting ${Z.op} transaction - ${Z.name}`),Z},dX=function(Z){if(VZ(Z)||!(typeof Z==="number"||typeof Z==="boolean"))return H&&w.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(Z)} of type ${JSON.stringify(typeof Z)}.`),!1;if(Z<0||Z>1)return H&&w.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${Z}.`),!1;return!0};var uX=function(){const Y=this.getScope().getSpan();return Y?{"sentry-trace":Y.toTraceparent()}:{}},pX=function(Z,Y){const $=this.getClient(),Q=$&&$.getOptions()||{},X=Q.instrumenter||"sentry",W=Z.instrumenter||"sentry";if(X!==W)H&&w.error(`A transaction was started with instrumenter=\`${W}\`, but the SDK is configured with the \`${X}\` instrumenter.
The transaction will not be sampled. Please use the ${X} instrumentation to start transactions.`),Z.sampled=!1;let J=new e0(Z,this);if(J=OQ(J,Q,{parentSampled:Z.parentSampled,transactionContext:Z,...Y}),J.sampled)J.initSpanRecorder(Q._experiments&&Q._experiments.maxSpans);if($&&$.emit)$.emit("startTransaction",J);return J};var IQ=function(){const Z=r();if(!Z.__SENTRY__)return;if(Z.__SENTRY__.extensions=Z.__SENTRY__.extensions||{},!Z.__SENTRY__.extensions.startTransaction)Z.__SENTRY__.extensions.startTransaction=pX;if(!Z.__SENTRY__.extensions.traceHeaders)Z.__SENTRY__.extensions.traceHeaders=uX;LQ()};var XY=function(Z,Y,$=()=>{}){const Q=EQ(Z),X=B(),W=X.getScope(),J=W.getSpan(),K=qQ(X,J,Q);W.setSpan(K);function z(){K&&K.finish(),X.getScope().setSpan(J)}let N;try{N=Y(K)}catch(V){throw K&&K.setStatus("internal_error"),$(V),z(),V}if(k(N))Promise.resolve(N).then(()=>{z()},(V)=>{K&&K.setStatus("internal_error"),$(V),z()});else z();return N},WY=function(Z,Y){const $=EQ(Z),Q=B(),X=Q.getScope(),W=X.getSpan(),J=qQ(Q,W,$);X.setSpan(J);function K(){J&&J.finish(),Q.getScope().setSpan(W)}let z;try{z=Y(J)}catch(N){throw J&&J.setStatus("internal_error"),K(),N}if(k(z))Promise.resolve(z).then(()=>{K()},()=>{J&&J.setStatus("internal_error"),K()});else K();return z};var JY=function({sentryTrace:Z,baggage:Y},$){const X=B().getScope(),{traceparentData:W,dynamicSamplingContext:J,propagationContext:K}=BZ(Z,Y);if(X.setPropagationContext(K),H&&W)w.log(`[Tracing] Continuing trace ${W.traceId}.`);const z={...W,metadata:O({dynamicSamplingContext:W&&!J?{}:J})};if(!$)return z;return $(z)},qQ=function(Z,Y,$){if(!QY())return;return Y?Y.startChild($):Z.startTransaction($)},EQ=function(Z){const Y={...Z};if(Y.name!==void 0&&Y.description===void 0)Y.description=Y.name;return Y};var cX=function(Z,Y){if(!Y)return Z;return Z.sdk=Z.sdk||{},Z.sdk.name=Z.sdk.name||Y.name,Z.sdk.version=Z.sdk.version||Y.version,Z.sdk.integrations=[...Z.sdk.integrations||[],...Y.integrations||[]],Z.sdk.packages=[...Z.sdk.packages||[],...Y.packages||[]],Z},kQ=function(Z,Y,$,Q){const X=tZ($),W={sent_at:(new Date()).toISOString(),...X&&{sdk:X},...!!Q&&Y&&{dsn:F0(Y)}},J="aggregates"in Z?[{type:"sessions"},Z]:[{type:"session"},Z.toJSON()];return H0(W,[J])},fQ=function(Z,Y,$,Q){const X=tZ($),W=Z.type&&Z.type!=="replay_event"?Z.type:"event";cX(Z,$&&$.sdk);const J=Y$(Z,X,Q,Y);return delete Z.sdkProcessingMetadata,H0(J,[[{type:W},Z]])};class M${constructor(Z,Y){this._client=Z,this.flushTimeout=60,this._pendingAggregates={},this._isEnabled=!0,this._intervalId=setInterval(()=>this.flush(),this.flushTimeout*1000),this._sessionAttrs=Y}flush(){const Z=this.getSessionAggregates();if(Z.aggregates.length===0)return;this._pendingAggregates={},this._client.sendSession(Z)}getSessionAggregates(){const Z=Object.keys(this._pendingAggregates).map(($)=>{return this._pendingAggregates[parseInt($)]}),Y={attrs:this._sessionAttrs,aggregates:Z};return O(Y)}close(){clearInterval(this._intervalId),this._isEnabled=!1,this.flush()}incrementSessionStatusCount(){if(!this._isEnabled)return;const Z=B().getScope(),Y=Z.getRequestSession();if(Y&&Y.status)this._incrementSessionStatusCount(Y.status,new Date),Z.setRequestSession(void 0)}_incrementSessionStatusCount(Z,Y){const $=new Date(Y).setSeconds(0,0);this._pendingAggregates[$]=this._pendingAggregates[$]||{};const Q=this._pendingAggregates[$];if(!Q.started)Q.started=new Date($).toISOString();switch(Z){case"errored":return Q.errored=(Q.errored||0)+1,Q.errored;case"ok":return Q.exited=(Q.exited||0)+1,Q.exited;default:return Q.crashed=(Q.crashed||0)+1,Q.crashed}}}var iX=function(Z){const Y=Z.protocol?`${Z.protocol}:`:"",$=Z.port?`:${Z.port}`:"";return`${Y}//${Z.host}${$}${Z.path?`/${Z.path}`:""}/api/`},sX=function(Z){return`${iX(Z)}${Z.projectId}/envelope/`},aX=function(Z,Y){return SY({sentry_key:Z.publicKey,sentry_version:lX,...Y&&{sentry_client:`${Y.name}/${Y.version}`}})},SQ=function(Z,Y={}){const $=typeof Y==="string"?Y:Y.tunnel,Q=typeof Y==="string"||!Y._metadata?void 0:Y._metadata.sdk;return $?$:`${sX(Z)}?${aX(Z,Q)}`};var lX="7";var oX=function(Z){const Y={};return Z.forEach(($)=>{const{name:Q}=$,X=Y[Q];if(X&&!X.isDefaultInstance&&$.isDefaultInstance)return;Y[Q]=$}),Object.keys(Y).map(($)=>Y[$])},w$=function(Z){const Y=Z.defaultIntegrations||[],$=Z.integrations;Y.forEach((J)=>{J.isDefaultInstance=!0});let Q;if(Array.isArray($))Q=[...Y,...$];else if(typeof $==="function")Q=R0($(Y));else Q=Y;const X=oX(Q),W=rX(X,(J)=>J.name==="Debug");if(W!==-1){const[J]=X.splice(W,1);X.push(J)}return X},yQ=function(Z,Y){const $={};return Y.forEach((Q)=>{if(Q)F$(Z,Q,$)}),$},F$=function(Z,Y,$){if($[Y.name]=Y,CQ.indexOf(Y.name)===-1)Y.setupOnce(K$,B),CQ.push(Y.name);if(Y.setup&&typeof Y.setup==="function")Y.setup(Z);if(Z.on&&typeof Y.preprocessEvent==="function"){const Q=Y.preprocessEvent.bind(Y);Z.on("preprocessEvent",(X,W)=>Q(X,W,Z))}if(Z.addEventProcessor&&typeof Y.processEvent==="function"){const Q=Y.processEvent.bind(Y),X=Object.assign((W,J)=>Q(W,J,Z),{id:Y.name});Z.addEventProcessor(X)}H&&w.log(`Integration installed: ${Y.name}`)};var rX=function(Z,Y){for(let $=0;$<Z.length;$++)if(Y(Z[$])===!0)return $;return-1},CQ=[];var nX=function(Z,Y){const $=`${Y} must return \`null\` or a valid event.`;if(k(Z))return Z.then((Q)=>{if(!m(Q)&&Q!==null)throw new y($);return Q},(Q)=>{throw new y(`${Y} rejected with ${Q}`)});else if(!m(Z)&&Z!==null)throw new y($);return Z},tX=function(Z,Y,$){const{beforeSend:Q,beforeSendTransaction:X}=Z;if(bQ(Y)&&Q)return Q(Y,$);if(xQ(Y)&&X)return X(Y,$);return Y},bQ=function(Z){return Z.type===void 0},xQ=function(Z){return Z.type==="transaction"},_Q="Not capturing exception because it's already been captured.";class R${constructor(Z){if(this._options=Z,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],Z.dsn)this._dsn=dZ(Z.dsn);else H&&w.warn("No DSN provided, client will not send events.");if(this._dsn){const Y=SQ(this._dsn,Z);this._transport=Z.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...Z.transportOptions,url:Y})}}captureException(Z,Y,$){if(lZ(Z)){H&&w.log(_Q);return}let Q=Y&&Y.event_id;return this._process(this.eventFromException(Z,Y).then((X)=>this._captureEvent(X,Y,$)).then((X)=>{Q=X})),Q}captureMessage(Z,Y,$,Q){let X=$&&$.event_id;const W=vZ(Z)?this.eventFromMessage(String(Z),Y,$):this.eventFromException(Z,$);return this._process(W.then((J)=>this._captureEvent(J,$,Q)).then((J)=>{X=J})),X}captureEvent(Z,Y,$){if(Y&&Y.originalException&&lZ(Y.originalException)){H&&w.log(_Q);return}let Q=Y&&Y.event_id;return this._process(this._captureEvent(Z,Y,$).then((X)=>{Q=X})),Q}captureSession(Z){if(typeof Z.release!=="string")H&&w.warn("Discarded session because of missing or non-string release");else this.sendSession(Z),M0(Z,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(Z){const Y=this._transport;if(Y)return this._isClientDoneProcessing(Z).then(($)=>{return Y.flush(Z).then((Q)=>$&&Q)});else return d(!0)}close(Z){return this.flush(Z).then((Y)=>{return this.getOptions().enabled=!1,Y})}getEventProcessors(){return this._eventProcessors}addEventProcessor(Z){this._eventProcessors.push(Z)}setupIntegrations(Z){if(Z&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)this._integrations=yQ(this,this._options.integrations),this._integrationsInitialized=!0}getIntegrationById(Z){return this._integrations[Z]}getIntegration(Z){try{return this._integrations[Z.id]||null}catch(Y){return H&&w.warn(`Cannot retrieve integration ${Z.id} from the current Client`),null}}addIntegration(Z){F$(this,Z,this._integrations)}sendEvent(Z,Y={}){this.emit("beforeSendEvent",Z,Y);let $=fQ(Z,this._dsn,this._options._metadata,this._options.tunnel);for(let X of Y.attachments||[])$=eY($,Z$(X,this._options.transportOptions&&this._options.transportOptions.textEncoder));const Q=this._sendEnvelope($);if(Q)Q.then((X)=>this.emit("afterSendEvent",Z,X),null)}sendSession(Z){const Y=kQ(Z,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(Y)}recordDroppedEvent(Z,Y,$){if(this._options.sendClientReports){const Q=`${Z}:${Y}`;H&&w.log(`Adding outcome: "${Q}"`),this._outcomes[Q]=this._outcomes[Q]+1||1}}on(Z,Y){if(!this._hooks[Z])this._hooks[Z]=[];this._hooks[Z].push(Y)}emit(Z,...Y){if(this._hooks[Z])this._hooks[Z].forEach(($)=>$(...Y))}_updateSessionFromEvent(Z,Y){let $=!1,Q=!1;const X=Y.exception&&Y.exception.values;if(X){Q=!0;for(let K of X){const z=K.mechanism;if(z&&z.handled===!1){$=!0;break}}}const W=Z.status==="ok";if(W&&Z.errors===0||W&&$)M0(Z,{...$&&{status:"crashed"},errors:Z.errors||Number(Q||$)}),this.captureSession(Z)}_isClientDoneProcessing(Z){return new S((Y)=>{let $=0;const Q=1,X=setInterval(()=>{if(this._numProcessing==0)clearInterval(X),Y(!0);else if($+=Q,Z&&$>=Z)clearInterval(X),Y(!1)},Q)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(Z,Y,$){const Q=this.getOptions(),X=Object.keys(this._integrations);if(!Y.integrations&&X.length>0)Y.integrations=X;return this.emit("preprocessEvent",Z,Y),UQ(Q,Z,Y,$,this).then((W)=>{if(W===null)return W;const{propagationContext:J}=W.sdkProcessingMetadata||{};if(!(W.contexts&&W.contexts.trace)&&J){const{traceId:z,spanId:N,parentSpanId:V,dsc:G}=J;W.contexts={trace:{trace_id:z,span_id:N,parent_span_id:V},...W.contexts};const M=G?G:n(z,this,$);W.sdkProcessingMetadata={dynamicSamplingContext:M,...W.sdkProcessingMetadata}}return W})}_captureEvent(Z,Y={},$){return this._processEvent(Z,Y,$).then((Q)=>{return Q.event_id},(Q)=>{if(H){const X=Q;if(X.logLevel==="log")w.log(X.message);else w.warn(X)}return})}_processEvent(Z,Y,$){const Q=this.getOptions(),{sampleRate:X}=Q,W=xQ(Z),J=bQ(Z),K=Z.type||"error",z=`before send for type \`${K}\``;if(J&&typeof X==="number"&&Math.random()>X)return this.recordDroppedEvent("sample_rate","error",Z),E0(new y(`Discarding event because it's not included in the random sample (sampling rate = ${X})`,"log"));const N=K==="replay_event"?"replay":K;return this._prepareEvent(Z,Y,$).then((V)=>{if(V===null)throw this.recordDroppedEvent("event_processor",N,Z),new y("An event processor returned `null`, will not send event.","log");if(Y.data&&Y.data.__sentry__===!0)return V;const M=tX(Q,V,Y);return nX(M,z)}).then((V)=>{if(V===null)throw this.recordDroppedEvent("before_send",N,Z),new y(`${z} returned \`null\`, will not send event.`,"log");const G=$&&$.getSession();if(!W&&G)this._updateSessionFromEvent(G,V);const M=V.transaction_info;if(W&&M&&V.transaction!==Z.transaction)V.transaction_info={...M,source:"custom"};return this.sendEvent(V,Y),V}).then(null,(V)=>{if(V instanceof y)throw V;throw this.captureException(V,{data:{__sentry__:!0},originalException:V}),new y(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${V}`)})}_process(Z){this._numProcessing++,Z.then((Y)=>{return this._numProcessing--,Y},(Y)=>{return this._numProcessing--,Y})}_sendEnvelope(Z){if(this.emit("beforeEnvelope",Z),this._isEnabled()&&this._transport)return this._transport.send(Z).then(null,(Y)=>{H&&w.error("Error while sending event:",Y)});else H&&w.error("Transport disabled")}_clearOutcomes(){const Z=this._outcomes;return this._outcomes={},Object.keys(Z).map((Y)=>{const[$,Q]=Y.split(":");return{reason:$,category:Q,quantity:Z[Y]}})}}var hQ=function(Z,Y,$,Q,X){const W={sent_at:(new Date()).toISOString()};if($&&$.sdk)W.sdk={name:$.sdk.name,version:$.sdk.version};if(!!Q&&!!X)W.dsn=F0(X);if(Y)W.trace=O(Y);const J=eX(Z);return H0(W,[J])},eX=function(Z){return[{type:"check_in"},Z]};class YZ extends R${constructor(Z){IQ();super(Z)}eventFromException(Z,Y){return d(W$(B,this._options.stackParser,Z,Y))}eventFromMessage(Z,Y="info",$){return d(J$(this._options.stackParser,Z,Y,$,this._options.attachStacktrace))}captureException(Z,Y,$){if(this._options.autoSessionTracking&&this._sessionFlusher&&$){const Q=$.getRequestSession();if(Q&&Q.status==="ok")Q.status="errored"}return super.captureException(Z,Y,$)}captureEvent(Z,Y,$){if(this._options.autoSessionTracking&&this._sessionFlusher&&$){if((Z.type||"exception")==="exception"&&Z.exception&&Z.exception.values&&Z.exception.values.length>0){const W=$.getRequestSession();if(W&&W.status==="ok")W.status="errored"}}return super.captureEvent(Z,Y,$)}close(Z){if(this._sessionFlusher)this._sessionFlusher.close();return super.close(Z)}initSessionFlusher(){const{release:Z,environment:Y}=this._options;if(!Z)H&&w.warn("Cannot initialise an instance of SessionFlusher if no release is provided!");else this._sessionFlusher=new M$(this,{release:Z,environment:Y})}captureCheckIn(Z,Y,$){const Q=Z.status!=="in_progress"&&Z.checkInId?Z.checkInId:U();if(!this._isEnabled())return H&&w.warn("SDK not enabled, will not capture checkin."),Q;const X=this.getOptions(),{release:W,environment:J,tunnel:K}=X,z={check_in_id:Q,monitor_slug:Z.monitorSlug,status:Z.status,release:W,environment:J};if(Z.status!=="in_progress")z.duration=Z.duration;if(Y)z.monitor_config={schedule:Y.schedule,checkin_margin:Y.checkinMargin,max_runtime:Y.maxRuntime,timezone:Y.timezone};const[N,V]=this._getTraceInfoFromScope($);if(V)z.contexts={trace:V};const G=hQ(z,N,this.getSdkMetadata(),K,this.getDsn());return H&&w.info("Sending checkin:",Z.monitorSlug,Z.status),this._sendEnvelope(G),Q}_captureRequestSession(){if(!this._sessionFlusher)H&&w.warn("Discarded request mode session because autoSessionTracking option was disabled");else this._sessionFlusher.incrementSessionStatusCount()}_prepareEvent(Z,Y,$){if(this._options.platform)Z.platform=Z.platform||this._options.platform;if(this._options.runtime)Z.contexts={...Z.contexts,runtime:(Z.contexts||{}).runtime||this._options.runtime};if(this._options.serverName)Z.server_name=Z.server_name||this._options.serverName;return super._prepareEvent(Z,Y,$)}_getTraceInfoFromScope(Z){if(!Z)return[void 0,void 0];const Y=Z.getSpan();if(Y)return[Y.transaction?Y.transaction.getDynamicSamplingContext():void 0,Y.getTraceContext()];const{traceId:$,spanId:Q,parentSpanId:X,dsc:W}=Z.getPropagationContext(),J={trace_id:$,span_id:Q,parent_span_id:X};if(W)return[W,J];return[n($,this,Z),J]}}var j$=function(Z,Y){if(Y.debug===!0)if(H)w.enable();else C(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")});const $=B();$.getScope().update(Y.initialScope);const X=new Z(Y);$.bindClient(X)};var _0=function(Z,Y,$=cY(Z.bufferSize||ZW)){let Q={};const X=(J)=>$.drain(J);function W(J){const K=[];if(rZ(J,(G,M)=>{const R=nZ(M);if($$(Q,R)){const j=vQ(G,M);Z.recordDroppedEvent("ratelimit_backoff",R,j)}else K.push(G)}),K.length===0)return d();const z=H0(J[0],K),N=(G)=>{rZ(z,(M,R)=>{const j=vQ(M,R);Z.recordDroppedEvent(G,nZ(R),j)})},V=()=>Y({body:LZ(z,Z.textEncoder)}).then((G)=>{if(G.statusCode!==void 0&&(G.statusCode<200||G.statusCode>=300))H&&w.warn(`Sentry responded with status code ${G.statusCode} to sent event.`);return Q=Q$(Q,G),G},(G)=>{throw N("network_error"),G});return $.add(V).then((G)=>G,(G)=>{if(G instanceof y)return H&&w.error("Skipped sending event because buffer is full."),N("queue_overflow"),d();else throw G})}return W.__sentry__baseTransport__=!0,{send:W,flush:X}},vQ=function(Z,Y){if(Y!=="event"&&Y!=="transaction")return;return Array.isArray(Z)?Z[1]:void 0},ZW=30;var B0="7.84.0";var x={};hZ(x,{LinkedErrors:()=>{{return GY}},InboundFilters:()=>{{return VY}},FunctionToString:()=>{{return KY}}});var mQ;class KY{static __initStatic(){this.id="FunctionToString"}constructor(){this.name=KY.id}setupOnce(){mQ=Function.prototype.toString;try{Function.prototype.toString=function(...Z){const Y=fY(this)||this;return mQ.apply(Y,Z)}}catch(Z){}}}KY.__initStatic();var QW=function(Z={},Y={}){return{allowUrls:[...Z.allowUrls||[],...Y.allowUrls||[]],denyUrls:[...Z.denyUrls||[],...Y.denyUrls||[]],ignoreErrors:[...Z.ignoreErrors||[],...Y.ignoreErrors||[],...Z.disableErrorDefaults?[]:YW],ignoreTransactions:[...Z.ignoreTransactions||[],...Y.ignoreTransactions||[],...Z.disableTransactionDefaults?[]:$W],ignoreInternal:Z.ignoreInternal!==void 0?Z.ignoreInternal:!0}},XW=function(Z,Y){if(Y.ignoreInternal&&GW(Z))return H&&w.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${G0(Z)}`),!0;if(WW(Z,Y.ignoreErrors))return H&&w.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${G0(Z)}`),!0;if(JW(Z,Y.ignoreTransactions))return H&&w.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${G0(Z)}`),!0;if(KW(Z,Y.denyUrls))return H&&w.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${G0(Z)}.\nUrl: ${zY(Z)}`),!0;if(!zW(Z,Y.allowUrls))return H&&w.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${G0(Z)}.\nUrl: ${zY(Z)}`),!0;return!1},WW=function(Z,Y){if(Z.type||!Y||!Y.length)return!1;return VW(Z).some(($)=>X0($,Y))},JW=function(Z,Y){if(Z.type!=="transaction"||!Y||!Y.length)return!1;const $=Z.transaction;return $?X0($,Y):!1},KW=function(Z,Y){if(!Y||!Y.length)return!1;const $=zY(Z);return!$?!1:X0($,Y)},zW=function(Z,Y){if(!Y||!Y.length)return!0;const $=zY(Z);return!$?!0:X0($,Y)},VW=function(Z){const Y=[];if(Z.message)Y.push(Z.message);let $;try{$=Z.exception.values[Z.exception.values.length-1]}catch(Q){}if($){if($.value){if(Y.push($.value),$.type)Y.push(`${$.type}: ${$.value}`)}}if(H&&Y.length===0)w.error(`Could not extract message for event ${G0(Z)}`);return Y},GW=function(Z){try{return Z.exception.values[0].type==="SentryError"}catch(Y){}return!1},NW=function(Z=[]){for(let Y=Z.length-1;Y>=0;Y--){const $=Z[Y];if($&&$.filename!=="<anonymous>"&&$.filename!=="[native code]")return $.filename||null}return null},zY=function(Z){try{let Y;try{Y=Z.exception.values[0].stacktrace.frames}catch($){}return Y?NW(Y):null}catch(Y){return H&&w.error(`Cannot extract url for event ${G0(Z)}`),null}},YW=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],$W=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/];class VY{static __initStatic(){this.id="InboundFilters"}constructor(Z={}){this.name=VY.id,this._options=Z}setupOnce(Z,Y){}processEvent(Z,Y,$){const Q=$.getOptions(),X=QW(this._options,Q);return XW(Z,X)?null:Z}}VY.__initStatic();var MW="cause",wW=5;class GY{static __initStatic(){this.id="LinkedErrors"}constructor(Z={}){this._key=Z.key||MW,this._limit=Z.limit||wW,this.name=GY.id}setupOnce(){}preprocessEvent(Z,Y,$){const Q=$.getOptions();EY(eZ,Q.stackParser,Q.maxValueLength,this._key,this._limit,Z,Y)}}GY.__initStatic();var b0=function(Z,Y){const $=Y.getClient(),Q=$&&$.getDsn(),X=$&&$.getOptions().tunnel;return RW(Z,Q)||FW(Z,X)},FW=function(Z,Y){if(!Y)return!1;return gQ(Z)===gQ(Y)},RW=function(Z,Y){return Y?Z.includes(Y.host):!1},gQ=function(Z){return Z[Z.length-1]==="/"?Z.slice(0,-1):Z};var jW=function(Z){const{transactionNamingScheme:Y,include:{ip:$,user:Q,...X}}=Z,W=[];for(let[K,z]of Object.entries(X))if(z)W.push(K);let J;if(Q===void 0)J=!0;else if(typeof Q==="boolean")J=Q;else{const K=[];for(let[z,N]of Object.entries(Q))if(N)K.push(z);J=K}return{include:{ip:$,user:J,request:W.length!==0?W:void 0,transaction:Y}}},HW=function(Z){try{return Z.getClient().getOptions()._metadata.sdk.name}catch(Y){return}},H$={include:{cookies:!0,data:!0,headers:!0,ip:!1,query_string:!0,url:!0,user:{id:!0,username:!0,email:!0}},transactionNamingScheme:"methodPath"};class L0{static __initStatic(){this.id="RequestData"}constructor(Z={}){this.name=L0.id,this._addRequestData=iY,this._options={...H$,...Z,include:{method:!0,...H$.include,...Z.include,user:Z.include&&typeof Z.include.user==="boolean"?Z.include.user:{...H$.include.user,...(Z.include||{}).user}}}}setupOnce(Z,Y){const{transactionNamingScheme:$}=this._options;Z((Q)=>{const X=Y(),W=X.getIntegration(L0),{sdkProcessingMetadata:J={}}=Q,K=J.request;if(!W||!K)return Q;const z=J.requestDataOptionsFromExpressHandler||J.requestDataOptionsFromGCPWrapper||jW(this._options),N=this._addRequestData(Q,K,z);if(Q.type==="transaction"||$==="handler")return N;const G=K._sentryTransaction;if(G){const M=HW(X)==="sentry.javascript.nextjs"?G.name.startsWith("/api"):$!=="path",[R]=f0(K,{path:!0,method:M,customRoute:G.name});N.transaction=R}return N})}}L0.__initStatic();var A=typeof __SENTRY_DEBUG__==="undefined"||__SENTRY_DEBUG__;var h=function(Z){const Y=F([Z,"call",(Q)=>Q(),"access",(Q)=>Q.getClient,"call",(Q)=>Q(),"optionalAccess",(Q)=>Q.getOptions,"call",(Q)=>Q()]);return(F([Y,"optionalAccess",(Q)=>Q.instrumenter])||"sentry")!=="sentry"};var dQ=function(Z,Y){const $=Z.length;switch($){case 2:return function(Q,X){const W=X.__sentry_transaction;if(W){const J=W.startChild({description:Z.name,op:`middleware.express.${Y}`,origin:"auto.middleware.express"});X.once("finish",()=>{J.finish()})}return Z.call(this,Q,X)};case 3:return function(Q,X,W){const J=X.__sentry_transaction,K=F([J,"optionalAccess",(z)=>z.startChild,"call",(z)=>z({description:Z.name,op:`middleware.express.${Y}`,origin:"auto.middleware.express"})]);Z.call(this,Q,X,function(...z){F([K,"optionalAccess",(N)=>N.finish,"call",(N)=>N()]),W.call(this,...z)})};case 4:return function(Q,X,W,J){const K=W.__sentry_transaction,z=F([K,"optionalAccess",(N)=>N.startChild,"call",(N)=>N({description:Z.name,op:`middleware.express.${Y}`,origin:"auto.middleware.express"})]);Z.call(this,Q,X,W,function(...N){F([z,"optionalAccess",(V)=>V.finish,"call",(V)=>V()]),J.call(this,...N)})};default:throw new Error(`Express middleware takes 2-4 arguments. Got: ${$}`)}},mW=function(Z,Y){return Z.map(($)=>{if(typeof $==="function")return dQ($,Y);if(Array.isArray($))return $.map((Q)=>{if(typeof Q==="function")return dQ(Q,Y);return Q});return $})},gW=function(Z,Y){const $=Z[Y];return Z[Y]=function(...Q){return $.call(this,...mW(Q,Y))},Z},dW=function(Z,Y=[]){Y.forEach(($)=>gW(Z,$))},uW=function(Z){const Y="settings"in Z;if(Y&&Z._router===void 0&&Z.lazyrouter)Z.lazyrouter();const $=Y?Z._router:Z;if(!$){A&&w.debug("Cannot instrument router for URL Parameterization (did not find a valid router)."),A&&w.debug("Routing instrumentation is currently only supported in Express 4.");return}const Q=Object.getPrototypeOf($),X=Q.process_params;Q.process_params=function W(J,K,z,N,V){if(!z._reconstructedRoute)z._reconstructedRoute="";const{layerRoutePath:G,isRegex:M,isArray:R,numExtraSegments:j}=cW(J);if(G||M||R)z._hasParameters=!0;let P;if(G)P=G;else P=sW(z.originalUrl,z._reconstructedRoute,J.path)||"";const T=P.split("/").filter((e)=>e.length>0&&(M||R||!e.includes("*"))).join("/");if(T&&T.length>0)z._reconstructedRoute+=`/${T}${M?"/":""}`;const E=i0(k0(z.originalUrl||""))+j,t=i0(z._reconstructedRoute);if(E===t){if(!z._hasParameters){if(z._reconstructedRoute!==z.originalUrl)z._reconstructedRoute=z.originalUrl?k0(z.originalUrl):z.originalUrl}const e=N.__sentry_transaction;if(e&&e.metadata.source!=="custom"){const u=z._reconstructedRoute||"/";e.setName(...f0(z,{path:!0,method:!0,customRoute:u}))}}return X.call(this,J,K,z,N,V)}},cW=function(Z){let Y=F([Z,"access",(J)=>J.route,"optionalAccess",(J)=>J.path]);const $=zZ(Y),Q=Array.isArray(Y);if(!Y){const[J]=L.process.versions.node.split(".").map(Number);if(J>=16)Y=pW(Z.path,Z.regexp,Z.keys)}if(!Y)return{isRegex:$,isArray:Q,numExtraSegments:0};const X=Q?Math.max(lW(Y)-i0(Z.path||""),0):0;return{layerRoutePath:iW(Q,Y),isRegex:$,isArray:Q,numExtraSegments:X}},lW=function(Z){return Z.reduce((Y,$)=>{return Y+i0($.toString())},0)},iW=function(Z,Y){if(Z)return Y.map(($)=>$.toString()).join(",");return Y&&Y.toString()},sW=function(Z,Y,$){const Q=k0(Z||""),X=F([Q,"optionalAccess",(z)=>z.split,"call",(z)=>z("/"),"access",(z)=>z.filter,"call",(z)=>z((N)=>!!N)]);let W=0;const J=F([Y,"optionalAccess",(z)=>z.split,"call",(z)=>z("/"),"access",(z)=>z.filter,"call",(z)=>z((N)=>!!N),"access",(z)=>z.length])||0;return F([$,"optionalAccess",(z)=>z.split,"call",(z)=>z("/"),"access",(z)=>z.filter,"call",(z)=>z((N)=>{if(F([X,"optionalAccess",(V)=>V[J+W]])===N)return W+=1,!0;return!1}),"access",(z)=>z.join,"call",(z)=>z("/")])};class DZ{static __initStatic(){this.id="Express"}constructor(Z={}){this.name=DZ.id,this._router=Z.router||Z.app,this._methods=(Array.isArray(Z.methods)?Z.methods:[]).concat("use")}setupOnce(Z,Y){if(!this._router){A&&w.error("ExpressIntegration is missing an Express instance");return}if(h(Y)){A&&w.log("Express Integration is skipped because of instrumenter configuration.");return}dW(this._router,this._methods),uW(this._router)}}DZ.__initStatic();var pW=(Z,Y,$)=>{if(!Z||!Y||!$||Object.keys($).length===0||!F([$,"access",(N)=>N[0],"optionalAccess",(N)=>N.offset]))return;const Q=$.sort((N,V)=>N.offset-V.offset),W=new RegExp(Y,`${Y.flags}d`).exec(Z);if(!W||!W.indices)return;const[,...J]=W.indices;if(J.length!==Q.length)return;let K=Z,z=0;return J.forEach((N,V)=>{if(N){const[G,M]=N,R=K.substring(0,G-z),j=`:${Q[V].name}`,P=K.substring(M-z);K=R+j+P,z=z+(M-G-j.length)}}),K};class OZ{static __initStatic(){this.id="Postgres"}constructor(Z={}){this.name=OZ.id,this._usePgNative=!!Z.usePgNative,this._module=Z.module}loadDependency(){return this._module=this._module||l("pg")}setupOnce(Z,Y){if(h(Y)){A&&w.log("Postgres Integration is skipped because of instrumenter configuration.");return}const $=this.loadDependency();if(!$){A&&w.error("Postgres Integration was unable to require `pg` package.");return}const Q=this._usePgNative?F([$,"access",(X)=>X.native,"optionalAccess",(X)=>X.Client]):$.Client;if(!Q){A&&w.error("Postgres Integration was unable to access 'pg-native' bindings.");return}D(Q.prototype,"query",function(X){return function(W,J,K){const N=Y().getScope().getSpan(),V={"db.system":"postgresql"};try{if(this.database)V["db.name"]=this.database;if(this.host)V["server.address"]=this.host;if(this.port)V["server.port"]=this.port;if(this.user)V["db.user"]=this.user}catch(R){}const G=F([N,"optionalAccess",(R)=>R.startChild,"call",(R)=>R({description:typeof W==="string"?W:W.text,op:"db",origin:"auto.db.postgres",data:V})]);if(typeof K==="function")return X.call(this,W,J,function(R,j){F([G,"optionalAccess",(P)=>P.finish,"call",(P)=>P()]),K(R,j)});if(typeof J==="function")return X.call(this,W,function(R,j){F([G,"optionalAccess",(P)=>P.finish,"call",(P)=>P()]),J(R,j)});const M=typeof J!=="undefined"?X.call(this,W,J):X.call(this,W);if(k(M))return M.then((R)=>{return F([G,"optionalAccess",(j)=>j.finish,"call",(j)=>j()]),R});return F([G,"optionalAccess",(R)=>R.finish,"call",(R)=>R()]),M}})}}OZ.__initStatic();class IZ{static __initStatic(){this.id="Mysql"}constructor(){this.name=IZ.id}loadDependency(){return this._module=this._module||l("mysql/lib/Connection.js")}setupOnce(Z,Y){if(h(Y)){A&&w.log("Mysql Integration is skipped because of instrumenter configuration.");return}const $=this.loadDependency();if(!$){A&&w.error("Mysql Integration was unable to require `mysql` package.");return}let Q=void 0;try{$.prototype.connect=new Proxy($.prototype.connect,{apply(J,K,z){if(!Q)Q=K.config;return J.apply(K,z)}})}catch(J){A&&w.error("Mysql Integration was unable to instrument `mysql` config.")}function X(){if(!Q)return{};return{"server.address":Q.host,"server.port":Q.port,"db.user":Q.user}}function W(J){if(!J||J.endTimestamp)return;const K=X();Object.keys(K).forEach((z)=>{J.setData(z,K[z])}),J.finish()}D($,"createQuery",function(J){return function(K,z,N){const G=Y().getScope().getSpan(),M=F([G,"optionalAccess",(j)=>j.startChild,"call",(j)=>j({description:typeof K==="string"?K:K.sql,op:"db",origin:"auto.db.mysql",data:{"db.system":"mysql"}})]);if(typeof N==="function")return J.call(this,K,z,function(j,P,T){W(M),N(j,P,T)});if(typeof z==="function")return J.call(this,K,function(j,P,T){W(M),z(j,P,T)});const R=J.call(this,K,z);return R.on("end",()=>{W(M)}),R}})}}IZ.__initStatic();var rW=function(Z){return Z&&typeof Z==="object"&&Z.once&&typeof Z.once==="function"},aW=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],oW={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]};class qZ{static __initStatic(){this.id="Mongo"}constructor(Z={}){this.name=qZ.id,this._operations=Array.isArray(Z.operations)?Z.operations:aW,this._describeOperations="describeOperations"in Z?Z.describeOperations:!0,this._useMongoose=!!Z.useMongoose}loadDependency(){const Z=this._useMongoose?"mongoose":"mongodb";return this._module=this._module||l(Z)}setupOnce(Z,Y){if(h(Y)){A&&w.log("Mongo Integration is skipped because of instrumenter configuration.");return}const $=this.loadDependency();if(!$){const Q=this._useMongoose?"mongoose":"mongodb";A&&w.error(`Mongo Integration was unable to require \`${Q}\` package.`);return}this._instrumentOperations($.Collection,this._operations,Y)}_instrumentOperations(Z,Y,$){Y.forEach((Q)=>this._patchOperation(Z,Q,$))}_patchOperation(Z,Y,$){if(!(Y in Z.prototype))return;const Q=this._getSpanContextFromOperationArguments.bind(this);D(Z.prototype,Y,function(X){return function(...W){const J=W[W.length-1],z=$().getScope().getSpan();if(typeof J!=="function"||Y==="mapReduce"&&W.length===2){const V=F([z,"optionalAccess",(M)=>M.startChild,"call",(M)=>M(Q(this,Y,W))]),G=X.call(this,...W);if(k(G))return G.then((M)=>{return F([V,"optionalAccess",(R)=>R.finish,"call",(R)=>R()]),M});else if(rW(G)){const M=G;try{M.once("close",()=>{F([V,"optionalAccess",(R)=>R.finish,"call",(R)=>R()])})}catch(R){F([V,"optionalAccess",(j)=>j.finish,"call",(j)=>j()])}return M}else return F([V,"optionalAccess",(M)=>M.finish,"call",(M)=>M()]),G}const N=F([z,"optionalAccess",(V)=>V.startChild,"call",(V)=>V(Q(this,Y,W.slice(0,-1)))]);return X.call(this,...W.slice(0,-1),function(V,G){F([N,"optionalAccess",(M)=>M.finish,"call",(M)=>M()]),J(V,G)})}})}_getSpanContextFromOperationArguments(Z,Y,$){const Q={"db.system":"mongodb","db.name":Z.dbName,"db.operation":Y,"db.mongodb.collection":Z.collectionName},X={op:"db",origin:"auto.db.mongo",description:Y,data:Q},W=oW[Y],J=Array.isArray(this._describeOperations)?this._describeOperations.includes(Y):this._describeOperations;if(!W||!J)return X;try{if(Y==="mapReduce"){const[K,z]=$;Q[W[0]]=typeof K==="string"?K:K.name||"<anonymous>",Q[W[1]]=typeof z==="string"?z:z.name||"<anonymous>"}else for(let K=0;K<W.length;K++)Q[`db.mongodb.${W[K]}`]=JSON.stringify($[K])}catch(K){}return X}}qZ.__initStatic();var nW=function(Z){return!!Z&&!!Z.$use};class EZ{static __initStatic(){this.id="Prisma"}constructor(Z={}){if(this.name=EZ.id,nW(Z.client)&&!Z.client._sentryInstrumented){u0(Z.client,"_sentryInstrumented",!0);const Y={};try{const $=Z.client._engineConfig;if($){const{activeProvider:Q,clientVersion:X}=$;if(Q)Y["db.system"]=Q;if(X)Y["db.prisma.version"]=X}}catch($){}Z.client.$use(($,Q)=>{if(h(B))return Q($);const{action:X,model:W}=$;return XY({name:W?`${W} ${X}`:X,op:"db.prisma",origin:"auto.db.prisma",data:{...Y,"db.operation":X}},()=>Q($))})}else A&&w.warn("Unsupported Prisma client provided to PrismaIntegration. Provided client:",Z.client)}setupOnce(){}}EZ.__initStatic();class kZ{static __initStatic(){this.id="GraphQL"}constructor(){this.name=kZ.id}loadDependency(){return this._module=this._module||l("graphql/execution/execute.js")}setupOnce(Z,Y){if(h(Y)){A&&w.log("GraphQL Integration is skipped because of instrumenter configuration.");return}const $=this.loadDependency();if(!$){A&&w.error("GraphQL Integration was unable to require graphql/execution package.");return}D($,"execute",function(Q){return function(...X){const W=Y().getScope(),J=W.getSpan(),K=F([J,"optionalAccess",(N)=>N.startChild,"call",(N)=>N({description:"execute",op:"graphql.execute",origin:"auto.graphql.graphql"})]);F([W,"optionalAccess",(N)=>N.setSpan,"call",(N)=>N(K)]);const z=Q.call(this,...X);if(k(z))return z.then((N)=>{return F([K,"optionalAccess",(V)=>V.finish,"call",(V)=>V()]),F([W,"optionalAccess",(V)=>V.setSpan,"call",(V)=>V(J)]),N});return F([K,"optionalAccess",(N)=>N.finish,"call",(N)=>N()]),F([W,"optionalAccess",(N)=>N.setSpan,"call",(N)=>N(J)]),z}})}}kZ.__initStatic();var uQ=function(Z,Y){return Z.map(($)=>{return Object.keys($).forEach((Q)=>{Object.keys($[Q]).forEach((X)=>{if(typeof $[Q][X]!=="function")return;tW($,Q,X,Y)})}),$})},tW=function(Z,Y,$,Q){D(Z[Y],$,function(X){return function(...W){const K=Q().getScope().getSpan(),z=F([K,"optionalAccess",(V)=>V.startChild,"call",(V)=>V({description:`${Y}.${$}`,op:"graphql.resolve",origin:"auto.graphql.apollo"})]),N=X.call(this,...W);if(k(N))return N.then((V)=>{return F([z,"optionalAccess",(G)=>G.finish,"call",(G)=>G()]),V});return F([z,"optionalAccess",(V)=>V.finish,"call",(V)=>V()]),N}})};class fZ{static __initStatic(){this.id="Apollo"}constructor(Z={useNestjs:!1}){this.name=fZ.id,this._useNest=!!Z.useNestjs}loadDependency(){if(this._useNest)this._module=this._module||l("@nestjs/graphql");else this._module=this._module||l("apollo-server-core");return this._module}setupOnce(Z,Y){if(h(Y)){A&&w.log("Apollo Integration is skipped because of instrumenter configuration.");return}if(this._useNest){const $=this.loadDependency();if(!$){A&&w.error("Apollo-NestJS Integration was unable to require @nestjs/graphql package.");return}D($.GraphQLFactory.prototype,"mergeWithSchema",function(Q){return function(...X){return D(this.resolversExplorerService,"explore",function(W){return function(){const J=R0(W.call(this));return uQ(J,Y)}}),Q.call(this,...X)}})}else{const $=this.loadDependency();if(!$){A&&w.error("Apollo Integration was unable to require apollo-server-core package.");return}D($.ApolloServerBase.prototype,"constructSchema",function(Q){return function(){if(!this.config.resolvers){if(A){if(this.config.schema)w.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `schema` property.If you are using NestJS with Apollo, please use `Sentry.Integrations.Apollo({ useNestjs: true })` instead."),w.warn();else if(this.config.modules)w.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `modules` property.");w.error("Skipping tracing as no resolvers found on the `ApolloServer` instance.")}return Q.call(this)}const X=R0(this.config.resolvers);return this.config.resolvers=uQ(X,Y),Q.call(this)}})}}}fZ.__initStatic();import*as pQ from"os";import{TextEncoder as eW} from"util";class P$ extends YZ{constructor(Z){Z._metadata=Z._metadata||{},Z._metadata.sdk=Z._metadata.sdk||{name:"sentry.javascript.node",packages:[{name:"npm:@sentry/node",version:B0}],version:B0},Z.transportOptions={textEncoder:new eW,...Z.transportOptions};const Y={...Z,platform:"node",runtime:{name:"node",version:global.process.version},serverName:Z.serverName||global.process.env.SENTRY_NAME||pQ.hostname()};super(Y)}}import*as $8 from"http";import*as Q8 from"https";import{Readable as X8} from"stream";import{URL as j1} from"url";import{createGzip as W8} from"zlib";var H1=e1(R1(),1),K8=function(Z){return new X8({read(){this.push(Z),this.push(null)}})},P1=function(Z){let Y;try{Y=new j1(Z.url)}catch(z){return C(()=>{console.warn("[@sentry/node]: Invalid dsn or tunnel option, will not send any events. The tunnel option must be a full URL when used.")}),_0(Z,()=>Promise.resolve({}))}const $=Y.protocol==="https:",Q=z8(Y,Z.proxy||($?process.env.https_proxy:void 0)||process.env.http_proxy),X=$?Q8:$8,W=Z.keepAlive===void 0?!1:Z.keepAlive,J=Q?new H1.HttpsProxyAgent(Q):new X.Agent({keepAlive:W,maxSockets:30,timeout:2000}),K=V8(Z,TZ(Z.httpModule,()=>X),J);return _0(Z,K)},z8=function(Z,Y){const{no_proxy:$}=process.env;if($&&$.split(",").some((X)=>Z.host.endsWith(X)||Z.hostname.endsWith(X)))return;else return Y},V8=function(Z,Y,$){const{hostname:Q,pathname:X,port:W,protocol:J,search:K}=new j1(Z.url);return function z(N){return new Promise((V,G)=>{let M=K8(N.body);const R={...Z.headers};if(N.body.length>J8)R["content-encoding"]="gzip",M=M.pipe(W8());const j=Y.request({method:"POST",agent:$,headers:R,hostname:Q,path:`${X}${K}`,port:W,protocol:J,ca:Z.caCerts},(P)=>{P.on("data",()=>{}),P.on("end",()=>{}),P.setEncoding("utf8");const T=TZ(P.headers["retry-after"],()=>null),E=TZ(P.headers["x-sentry-rate-limits"],()=>null);V({statusCode:P.statusCode,headers:{"retry-after":T,"x-sentry-rate-limits":Array.isArray(E)?E[0]:E}})});j.on("error",G),M.pipe(j)})}},J8=32768;import{spawn as Hz} from"child_process";import{posix as G8,sep as N8} from"path";var w8=function(Z){return Z.replace(/^[A-Z]:/,"").replace(/\\/g,"/")},B1=function(Z,Y=M8){if(!Z)return;const $=Y?w8(Z):Z;let{root:Q,dir:X,base:W,ext:J}=G8.parse($);const z=`${require&&require.main&&require.main.filename&&X||global.process.cwd()}/`;let N=W;if(J===".js"||J===".mjs"||J===".cjs")N=N.slice(0,J.length*-1);if(!Q&&!X)X=".";let V=X.lastIndexOf("/node_modules/");if(V>-1)return`${X.slice(V+14).replace(/\//g,".")}:${N}`;if(V=`${X}/`.lastIndexOf(z,0),V===0){let G=X.slice(z.length).replace(/\//g,".");if(G)G+=":";return G+=N,G}return N},M8=N8==="\\";var L1=function(){return!!process.send&&!!process.env.SENTRY_ANR_CHILD_PROCESS};var v=vY(process.versions.node);import*as PY from"domain";var T1=function(){return PY.active},F8=function(){const Z=T1();if(!Z)return;return n0(Z),a(Z)},R8=function(Z){const Y={};return n0(Y,Z),a(Y)},j8=function(Z,Y){const $=T1();if($&&F([Y,"optionalAccess",(J)=>J.reuseExisting]))return Z();const Q=PY.create(),X=$?a($):void 0,W=R8(X);return t0(Q,W),Q.bind(()=>{return Z()})()},A1=function(){UZ({getCurrentHub:F8,runWithAsyncContext:j8})};import*as U1 from"async_hooks";var D1=function(){if(!BY)BY=new U1.AsyncLocalStorage;function Z(){return BY.getStore()}function Y(Q){const X={};return n0(X,Q),a(X)}function $(Q,X){const W=Z();if(W&&F([X,"optionalAccess",(K)=>K.reuseExisting]))return Q();const J=Y(W);return BY.run(J,()=>{return Q()})}UZ({getCurrentHub:Z,runWithAsyncContext:$})},BY;var O1=function(){if(v.major&&v.major>=14)D1();else A1()};import*as I1 from"util";class A0{constructor(){A0.prototype.__init.call(this)}static __initStatic(){this.id="Console"}__init(){this.name=A0.id}setupOnce(){xY(({args:Z,level:Y})=>{const $=B();if(!$.getIntegration(A0))return;$.addBreadcrumb({category:"console",level:sY(Y),message:I1.format.apply(void 0,Z)},{input:[...Z],level:Y})})}}A0.__initStatic();var J0=typeof __SENTRY_DEBUG__==="undefined"||__SENTRY_DEBUG__;import{URL as E$} from"url";var E1=function(Z){const{protocol:Y,hostname:$,port:Q}=f1(Z),X=Z.path?Z.path:"/";return`${Y}//${$}${Q}${X}`},k$=function(Z){const{protocol:Y,hostname:$,port:Q}=f1(Z),X=Z.pathname||"/",W=Z.auth?H8(Z.auth):"";return`${Y}//${W}${$}${Q}${X}`},H8=function(Z){const[Y,$]=Z.split(":");return`${Y?"[Filtered]":""}:${$?"[Filtered]":""}@`},f$=function(Z,Y,$){if(!Z)return Z;let[Q,X]=Z.split(" ");if(Y.host&&!Y.protocol)Y.protocol=F([$,"optionalAccess",(W)=>W.agent,"optionalAccess",(W)=>W.protocol]),X=k$(Y);if(F([X,"optionalAccess",(W)=>W.startsWith,"call",(W)=>W("///")]))X=X.slice(2);return`${Q} ${X}`},q1=function(Z){const Y={protocol:Z.protocol,hostname:typeof Z.hostname==="string"&&Z.hostname.startsWith("[")?Z.hostname.slice(1,-1):Z.hostname,hash:Z.hash,search:Z.search,pathname:Z.pathname,path:`${Z.pathname||""}${Z.search||""}`,href:Z.href};if(Z.port!=="")Y.port=Number(Z.port);if(Z.username||Z.password)Y.auth=`${Z.username}:${Z.password}`;return Y},k1=function(Z,Y){let $,Q;if(typeof Y[Y.length-1]==="function")$=Y.pop();if(typeof Y[0]==="string")Q=q1(new E$(Y[0]));else if(Y[0]instanceof E$)Q=q1(Y[0]);else{Q=Y[0];try{const X=new E$(Q.path||"",`${Q.protocol||"http:"}//${Q.hostname}`);Q={pathname:X.pathname,search:X.search,hash:X.hash,...Q}}catch(X){}}if(Y.length===2)Q={...Q,...Y[1]};if(Q.protocol===void 0)if(v.major&&v.major>8)Q.protocol=F([F([Z,"optionalAccess",(X)=>X.globalAgent]),"optionalAccess",(X)=>X.protocol])||F([Q.agent,"optionalAccess",(X)=>X.protocol])||F([Q._defaultAgent,"optionalAccess",(X)=>X.protocol]);else Q.protocol=F([Q.agent,"optionalAccess",(X)=>X.protocol])||F([Q._defaultAgent,"optionalAccess",(X)=>X.protocol])||F([F([Z,"optionalAccess",(X)=>X.globalAgent]),"optionalAccess",(X)=>X.protocol]);if($)return[Q,$];else return[Q]},f1=function(Z){const Y=Z.protocol||"",$=Z.hostname||Z.host||"",Q=!Z.port||Z.port===80||Z.port===443||/^(.*):(\d+)$/.test($)?"":`:${Z.port}`;return{protocol:Y,hostname:$,port:Q}};var S1=function(Z,Y,$,Q){const X=new i(100),W=new i(100),J=(N)=>{if($===void 0)return!0;const V=X.get(N);if(V!==void 0)return V;const G=$(N);return X.set(N,G),G},K=(N)=>{if(Q===void 0)return!0;const V=W.get(N);if(V!==void 0)return V;const G=X0(N,Q);return W.set(N,G),G};function z(N,V,G,M){if(!B().getIntegration(U0))return;B().addBreadcrumb({category:"http",data:{status_code:M&&M.statusCode,...V},type:"http"},{event:N,request:G,response:M})}return function N(V){return function G(...M){const R=k1(Z,M),j=R[0],P=E1(j),T=k$(j);if(b0(T,B()))return V.apply(Z,R);const E=B(),t=E.getScope(),e=t.getSpan(),u=P8(T,j),b=J(P)?F([e,"optionalAccess",(I)=>I.startChild,"call",(I)=>I({op:"http.client",origin:"auto.http.node.http",description:`${u["http.method"]} ${u.url}`,data:u})]):void 0;if(K(P))if(b){const I=b.toTraceparent(),V0=F([b,"optionalAccess",(Z0)=>Z0.transaction,"optionalAccess",(Z0)=>Z0.getDynamicSamplingContext,"call",(Z0)=>Z0()]);C1(j,T,I,V0)}else{const I=E.getClient(),{traceId:V0,sampled:Z0,dsc:TY}=t.getPropagationContext(),s1=y0(V0,void 0,Z0),a1=TY||(I?n(V0,I,t):void 0);C1(j,T,s1,a1)}else J0&&w.log(`[Tracing] Not adding sentry-trace header to outgoing request (${T}) due to mismatching tracePropagationTargets option.`);return V.apply(Z,R).once("response",function(I){const V0=this;if(Y)z("response",u,V0,I);if(b){if(I.statusCode)b.setHttpStatus(I.statusCode);b.description=f$(b.description,j,V0),b.finish()}}).once("error",function(){const I=this;if(Y)z("error",u,I);if(b)b.setHttpStatus(500),b.description=f$(b.description,j,I),b.finish()})}}},C1=function(Z,Y,$,Q){if((Z.headers||{})["sentry-trace"])return;J0&&w.log(`[Tracing] Adding sentry-trace header ${$} to outgoing request to "${Y}": `);const W=s0(Q),J=W&&W.length>0?B8(Z,W):void 0;Z.headers={...Z.headers,"sentry-trace":$,...J&&{baggage:J}}},P8=function(Z,Y){const $=Y.method||"GET",Q={url:Z,"http.method":$};if(Y.hash)Q["http.fragment"]=Y.hash.substring(1);if(Y.search)Q["http.query"]=Y.search.substring(1);return Q},B8=function(Z,Y){if(!Z.headers||!Z.headers.baggage)return Y;else if(!Y)return Z.headers.baggage;else if(Array.isArray(Z.headers.baggage))return[...Z.headers.baggage,Y];return[Z.headers.baggage,Y]};class U0{static __initStatic(){this.id="Http"}__init(){this.name=U0.id}constructor(Z={}){U0.prototype.__init.call(this),this._breadcrumbs=typeof Z.breadcrumbs==="undefined"?!0:Z.breadcrumbs,this._tracing=!Z.tracing?void 0:Z.tracing===!0?{}:Z.tracing}setupOnce(Z,Y){if(!this._breadcrumbs&&!this._tracing)return;const $=F([Y,"call",(K)=>K(),"access",(K)=>K.getClient,"call",(K)=>K(),"optionalAccess",(K)=>K.getOptions,"call",(K)=>K()]);if($&&$.instrumenter!=="sentry"){J0&&w.log("HTTP Integration is skipped because of instrumenter configuration.");return}const Q=F([this,"access",(K)=>K._tracing,"optionalAccess",(K)=>K.shouldCreateSpanForRequest])||F([$,"optionalAccess",(K)=>K.shouldCreateSpanForRequest]),X=F([$,"optionalAccess",(K)=>K.tracePropagationTargets])||F([this,"access",(K)=>K._tracing,"optionalAccess",(K)=>K.tracePropagationTargets]),W=import.meta.require("http"),J=S1(W,this._breadcrumbs,Q,X);if(D(W,"get",J),D(W,"request",J),v.major&&v.major>8){const K=import.meta.require("https"),z=S1(K,this._breadcrumbs,Q,X);D(K,"get",z),D(K,"request",z)}}}U0.__initStatic();var bZ=function(Z){C(()=>{console.error(Z)});const Y=P0();if(Y===void 0)J0&&w.warn("No NodeClient was defined, we are exiting the process now."),global.process.exit(1);const $=Y.getOptions(),Q=$&&$.shutdownTimeout&&$.shutdownTimeout>0&&$.shutdownTimeout||L8;Y.close(Q).then((X)=>{if(!X)J0&&w.warn("We reached the timeout for emptying the request buffer, still exiting now!");global.process.exit(1)},(X)=>{J0&&w.error(X)})},L8=2000;class w0{static __initStatic(){this.id="OnUncaughtException"}__init(){this.name=w0.id}__init2(){this.handler=this._makeErrorHandler()}constructor(Z={}){w0.prototype.__init.call(this),w0.prototype.__init2.call(this),this._options={exitEvenIfOtherHandlersAreRegistered:!0,...Z}}setupOnce(){global.process.on("uncaughtException",this.handler)}_makeErrorHandler(){let Y=!1,$=!1,Q=!1,X;return(W)=>{let J=bZ;const K=P0();if(this._options.onFatalError)J=this._options.onFatalError;else if(K&&K.getOptions().onFatalError)J=K.getOptions().onFatalError;const N=global.process.listeners("uncaughtException").reduce((G,M)=>{if(M.name==="domainUncaughtExceptionClear"||M.tag&&M.tag==="sentry_tracingErrorCallback"||M===this.handler)return G;else return G+1},0)===0,V=this._options.exitEvenIfOtherHandlersAreRegistered||N;if(!Y){const G=B();if(X=W,Y=!0,G.getIntegration(w0))G.withScope((M)=>{if(M.setLevel("fatal"),G.captureException(W,{originalException:W,data:{mechanism:{handled:!1,type:"onuncaughtexception"}}}),!Q&&V)Q=!0,J(W)});else if(!Q&&V)Q=!0,J(W)}else if(V){if(Q)J0&&w.warn("uncaught exception after calling fatal error shutdown callback - this is bad! forcing shutdown"),bZ(W);else if(!$)$=!0,setTimeout(()=>{if(!Q)Q=!0,J(X,W)},2000)}}}}w0.__initStatic();class D0{static __initStatic(){this.id="OnUnhandledRejection"}__init(){this.name=D0.id}constructor(Z={mode:"warn"}){this._options=Z,D0.prototype.__init.call(this)}setupOnce(){global.process.on("unhandledRejection",this.sendUnhandledPromise.bind(this))}sendUnhandledPromise(Z,Y){const $=B();if($.getIntegration(D0))$.withScope((Q)=>{Q.setExtra("unhandledPromiseRejection",!0),$.captureException(Z,{originalException:Y,data:{mechanism:{handled:!1,type:"onunhandledrejection"}}})});this._handleRejection(Z)}_handleRejection(Z){const Y="This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). The promise rejected with the reason:";if(this._options.mode==="warn")C(()=>{console.warn(Y),console.error(Z&&Z.stack?Z.stack:Z)});else if(this._options.mode==="strict")C(()=>{console.warn(Y)}),bZ(Z)}}D0.__initStatic();import{existsSync as T8,readFileSync as A8} from"fs";import{dirname as U8,join as D8} from"path";var O8=function(){try{return require.cache?Object.keys(require.cache):[]}catch(Z){return[]}},I8=function(){const Z=require.main&&require.main.paths||[],Y=O8(),$={},Q={};return Y.forEach((X)=>{let W=X;const J=()=>{const K=W;if(W=U8(K),!W||K===W||Q[K])return;if(Z.indexOf(W)<0)return J();const z=D8(K,"package.json");if(Q[K]=!0,!T8(z))return J();try{const N=JSON.parse(A8(z,"utf8"));$[N.name]=N.version}catch(N){}};J()}),$},S$;class O0{constructor(){O0.prototype.__init.call(this)}static __initStatic(){this.id="Modules"}__init(){this.name=O0.id}setupOnce(Z,Y){Z(($)=>{if(!Y().getIntegration(O0))return $;return{...$,modules:{...$.modules,...this._getModules()}}})}_getModules(){if(!S$)S$=I8();return S$}}O0.__initStatic();import{readFile as q8} from"fs";var k8=function(Z){return new Promise((Y,$)=>{q8(Z,"utf8",(Q,X)=>{if(Q)$(Q);else Y(X)})})};async function f8(Z){const Y=LY.get(Z);if(Y===null)return null;if(Y!==void 0)return Y;let $=null;try{$=(await k8(Z)).split("\n")}catch(Q){}return LY.set(Z,$),$}var LY=new i(100),E8=7;class I0{static __initStatic(){this.id="ContextLines"}__init(){this.name=I0.id}constructor(Z={}){this._options=Z,I0.prototype.__init.call(this)}get _contextLines(){return this._options.frameContextLines!==void 0?this._options.frameContextLines:E8}setupOnce(Z,Y){Z(($)=>{if(!Y().getIntegration(I0))return $;return this.addSourceContext($)})}async addSourceContext(Z){const Y={},$=[];if(this._contextLines>0&&F([Z,"access",(Q)=>Q.exception,"optionalAccess",(Q)=>Q.values]))for(let Q of Z.exception.values){if(!F([Q,"access",(X)=>X.stacktrace,"optionalAccess",(X)=>X.frames]))continue;for(let X=Q.stacktrace.frames.length-1;X>=0;X--){const W=Q.stacktrace.frames[X];if(W.filename&&!Y[W.filename]&&!LY.get(W.filename))$.push(f8(W.filename)),Y[W.filename]=1}}if($.length>0)await Promise.all($);if(this._contextLines>0&&F([Z,"access",(Q)=>Q.exception,"optionalAccess",(Q)=>Q.values])){for(let Q of Z.exception.values)if(Q.stacktrace&&Q.stacktrace.frames)await this.addSourceContextToFrames(Q.stacktrace.frames)}return Z}addSourceContextToFrames(Z){for(let Y of Z)if(Y.filename&&Y.context_line===void 0){const $=LY.get(Y.filename);if($)try{mY($,Y,this._contextLines)}catch(Q){}}}}I0.__initStatic();import{execFile as S8} from"child_process";import{readFile as C8,readdir as y8} from"fs";import*as q from"os";import{join as _8} from"path";import{promisify as _1} from"util";async function h8(){const Z=q.platform();switch(Z){case"darwin":return c8();case"linux":return l8();default:return{name:d8[Z]||Z,version:q.release()}}}var v8=function(){try{if(typeof process.versions.icu!=="string")return;const Z=new Date(900000000);if(new Intl.DateTimeFormat("es",{month:"long"}).format(Z)==="enero"){const $=Intl.DateTimeFormat().resolvedOptions();return{locale:$.locale,timezone:$.timeZone}}}catch(Z){}return},m8=function(){const Z=process.memoryUsage().rss;return{app_start_time:new Date(Date.now()-process.uptime()*1000).toISOString(),app_memory:Z}},g8=function(Z){const Y={};let $;try{$=q.uptime&&q.uptime()}catch(Q){}if(typeof $==="number")Y.boot_time=new Date(Date.now()-$*1000).toISOString();if(Y.arch=q.arch(),Z===!0||Z.memory)Y.memory_size=q.totalmem(),Y.free_memory=q.freemem();if(Z===!0||Z.cpu){const Q=q.cpus();if(Q&&Q.length){const X=Q[0];Y.processor_count=Q.length,Y.cpu_description=X.model,Y.processor_frequency=X.speed}}return Y},K0=function(Z,Y){const $=Z.exec(Y);return $?$[1]:void 0};async function c8(){const Z={kernel_version:q.release(),name:"Mac OS X",version:`10.${Number(q.release().split(".")[0])-4}`};try{const Y=await new Promise(($,Q)=>{S8("/usr/bin/sw_vers",(X,W)=>{if(X){Q(X);return}$(W)})});Z.name=K0(/^ProductName:\s+(.*)$/m,Y),Z.version=K0(/^ProductVersion:\s+(.*)$/m,Y),Z.build=K0(/^BuildVersion:\s+(.*)$/m,Y)}catch(Y){}return Z}var y1=function(Z){return Z.split(" ")[0].toLowerCase()};async function l8(){const Z={kernel_version:q.release(),name:"Linux"};try{const Y=await x8("/etc"),$=u8.find((K)=>Y.includes(K.name));if(!$)return Z;const Q=_8("/etc",$.name),X=(await b8(Q,{encoding:"utf-8"})).toLowerCase(),{distros:W}=$;Z.name=W.find((K)=>X.indexOf(y1(K))>=0)||W[0];const J=y1(Z.name);Z.version=p8[J](X)}catch(Y){}return Z}var i8=function(){if(process.env.VERCEL)return{"cloud.provider":"vercel","cloud.region":process.env.VERCEL_REGION};else if(process.env.AWS_REGION)return{"cloud.provider":"aws","cloud.region":process.env.AWS_REGION,"cloud.platform":process.env.AWS_EXECUTION_ENV};else if(process.env.GCP_PROJECT)return{"cloud.provider":"gcp"};else if(process.env.ALIYUN_REGION_ID)return{"cloud.provider":"alibaba_cloud","cloud.region":process.env.ALIYUN_REGION_ID};else if(process.env.WEBSITE_SITE_NAME&&process.env.REGION_NAME)return{"cloud.provider":"azure","cloud.region":process.env.REGION_NAME};else if(process.env.IBM_CLOUD_REGION)return{"cloud.provider":"ibm_cloud","cloud.region":process.env.IBM_CLOUD_REGION};else if(process.env.TENCENTCLOUD_REGION)return{"cloud.provider":"tencent_cloud","cloud.region":process.env.TENCENTCLOUD_REGION,"cloud.account.id":process.env.TENCENTCLOUD_APPID,"cloud.availability_zone":process.env.TENCENTCLOUD_ZONE};else if(process.env.NETLIFY)return{"cloud.provider":"netlify"};else if(process.env.FLY_REGION)return{"cloud.provider":"fly.io","cloud.region":process.env.FLY_REGION};else if(process.env.DYNO)return{"cloud.provider":"heroku"};else return},b8=_1(C8),x8=_1(y8);class v0{static __initStatic(){this.id="Context"}__init(){this.name=v0.id}constructor(Z={app:!0,os:!0,device:!0,culture:!0,cloudResource:!0}){this._options=Z,v0.prototype.__init.call(this)}setupOnce(Z){Z((Y)=>this.addContext(Y))}async addContext(Z){if(this._cachedContext===void 0)this._cachedContext=this._getContexts();const Y=this._updateContext(await this._cachedContext);return Z.contexts={...Z.contexts,app:{...Y.app,...F([Z,"access",($)=>$.contexts,"optionalAccess",($)=>$.app])},os:{...Y.os,...F([Z,"access",($)=>$.contexts,"optionalAccess",($)=>$.os])},device:{...Y.device,...F([Z,"access",($)=>$.contexts,"optionalAccess",($)=>$.device])},culture:{...Y.culture,...F([Z,"access",($)=>$.contexts,"optionalAccess",($)=>$.culture])},cloud_resource:{...Y.cloud_resource,...F([Z,"access",($)=>$.contexts,"optionalAccess",($)=>$.cloud_resource])}},Z}_updateContext(Z){if(F([Z,"optionalAccess",(Y)=>Y.app,"optionalAccess",(Y)=>Y.app_memory]))Z.app.app_memory=process.memoryUsage().rss;if(F([Z,"optionalAccess",(Y)=>Y.device,"optionalAccess",(Y)=>Y.free_memory]))Z.device.free_memory=q.freemem();return Z}async _getContexts(){const Z={};if(this._options.os)Z.os=await h8();if(this._options.app)Z.app=m8();if(this._options.device)Z.device=g8(this._options.device);if(this._options.culture){const Y=v8();if(Y)Z.culture=Y}if(this._options.cloudResource)Z.cloud_resource=i8();return Z}}v0.__initStatic();var d8={aix:"IBM AIX",freebsd:"FreeBSD",openbsd:"OpenBSD",sunos:"SunOS",win32:"Windows"},u8=[{name:"fedora-release",distros:["Fedora"]},{name:"redhat-release",distros:["Red Hat Linux","Centos"]},{name:"redhat_version",distros:["Red Hat Linux"]},{name:"SuSE-release",distros:["SUSE Linux"]},{name:"lsb-release",distros:["Ubuntu Linux","Arch Linux"]},{name:"debian_version",distros:["Debian"]},{name:"debian_release",distros:["Debian"]},{name:"arch-release",distros:["Arch Linux"]},{name:"gentoo-release",distros:["Gentoo Linux"]},{name:"novell-release",distros:["SUSE Linux"]},{name:"alpine-release",distros:["Alpine Linux"]}],p8={alpine:(Z)=>Z,arch:(Z)=>K0(/distrib_release=(.*)/,Z),centos:(Z)=>K0(/release ([^ ]+)/,Z),debian:(Z)=>Z,fedora:(Z)=>K0(/release (..)/,Z),mint:(Z)=>K0(/distrib_release=(.*)/,Z),red:(Z)=>K0(/release ([^ ]+)/,Z),suse:(Z)=>K0(/VERSION = (.*)\n/,Z),ubuntu:(Z)=>K0(/distrib_release=(.*)/,Z)};var s8=function(Z,Y,$){let Q=0,X=5,W=0;return setInterval(()=>{if(W===0){if(Q>Z){if(X*=2,$(X),X>86400)X=86400;W=X}}else if(W-=1,W===0)Y();Q=0},1000).unref(),()=>{Q+=1}},x1=function(Z){let Y=[],$=!1;function Q(J){if(Y=[],$)return;$=!0,Z(J)}Y.push(Q);function X(J){Y.push(J)}function W(J){const K=Y.pop()||Q;try{K(J)}catch(z){Q(J)}}return{add:X,next:W}},a8=function(){try{return new h1}catch(Z){return}},b1=function(Z){return Z!==void 0&&["","?","<anonymous>"].includes(Z)},o8=function(Z,Y){return Z===Y||b1(Z)&&b1(Y)},v1=function(Z){if(Z===void 0)return;return Z.slice(-10).reduce((Y,$)=>`${Y},${$.function},${$.lineno},${$.colno}`,"")},r8=function(Z,Y){if(Y===void 0)return;return v1(Z(Y,1))};class h1{constructor(){const{Session:Z}=import.meta.require("inspector");this._session=new Z}configureAndConnect(Z,Y){this._session.connect(),this._session.on("Debugger.paused",($)=>{Z($,()=>{this._session.post("Debugger.resume")})}),this._session.post("Debugger.enable"),this._session.post("Debugger.setPauseOnExceptions",{state:Y?"all":"uncaught"})}setPauseOnExceptions(Z){this._session.post("Debugger.setPauseOnExceptions",{state:Z?"all":"uncaught"})}getLocalVariables(Z,Y){this._getProperties(Z,($)=>{const{add:Q,next:X}=x1(Y);for(let W of $)if(F([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.objectId])&&F([W,"optionalAccess",(J)=>J.value,"access",(J)=>J.className])==="Array"){const J=W.value.objectId;Q((K)=>this._unrollArray(J,W.name,K,X))}else if(F([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.objectId])&&F([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.className])==="Object"){const J=W.value.objectId;Q((K)=>this._unrollObject(J,W.name,K,X))}else if(F([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.value])||F([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.description]))Q((J)=>this._unrollOther(W,J,X));X({})})}_getProperties(Z,Y){this._session.post("Runtime.getProperties",{objectId:Z,ownProperties:!0},($,Q)=>{if($)Y([]);else Y(Q.result)})}_unrollArray(Z,Y,$,Q){this._getProperties(Z,(X)=>{$[Y]=X.filter((W)=>W.name!=="length"&&!isNaN(parseInt(W.name,10))).sort((W,J)=>parseInt(W.name,10)-parseInt(J.name,10)).map((W)=>F([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.value])),Q($)})}_unrollObject(Z,Y,$,Q){this._getProperties(Z,(X)=>{$[Y]=X.map((W)=>[W.name,F([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.value])]).reduce((W,[J,K])=>{return W[J]=K,W},{}),Q($)})}_unrollOther(Z,Y,$){if(F([Z,"optionalAccess",(Q)=>Q.value,"optionalAccess",(Q)=>Q.value]))Y[Z.name]=Z.value.value;else if(F([Z,"optionalAccess",(Q)=>Q.value,"optionalAccess",(Q)=>Q.description])&&F([Z,"optionalAccess",(Q)=>Q.value,"optionalAccess",(Q)=>Q.type])!=="function")Y[Z.name]=`<${Z.value.description}>`;$(Y)}}class q0{static __initStatic(){this.id="LocalVariables"}__init(){this.name=q0.id}__init2(){this._cachedFrames=new i(20)}constructor(Z={},Y=a8()){this._options=Z,this._session=Y,q0.prototype.__init.call(this),q0.prototype.__init2.call(this)}setupOnce(Z,Y){this._setup(Z,F([Y,"call",($)=>$(),"access",($)=>$.getClient,"call",($)=>$(),"optionalAccess",($)=>$.getOptions,"call",($)=>$()]))}_setup(Z,Y){if(this._session&&F([Y,"optionalAccess",($)=>$.includeLocalVariables])){if((v.major||0)<18){w.log("The `LocalVariables` integration is only supported on Node >= v18.");return}const Q=this._options.captureAllExceptions!==!1;if(this._session.configureAndConnect((X,W)=>this._handlePaused(Y.stackParser,X,W),Q),Q){const X=this._options.maxExceptionsPerSecond||50;this._rateLimiter=s8(X,()=>{w.log("Local variables rate-limit lifted."),F([this,"access",(W)=>W._session,"optionalAccess",(W)=>W.setPauseOnExceptions,"call",(W)=>W(!0)])},(W)=>{w.log(`Local variables rate-limit exceeded. Disabling capturing of caught exceptions for ${W} seconds.`),F([this,"access",(J)=>J._session,"optionalAccess",(J)=>J.setPauseOnExceptions,"call",(J)=>J(!1)])})}Z(async(X)=>this._addLocalVariables(X))}}_handlePaused(Z,{params:{reason:Y,data:$,callFrames:Q}},X){if(Y!=="exception"&&Y!=="promiseRejection"){X();return}F([this,"access",(z)=>z._rateLimiter,"optionalCall",(z)=>z()]);const W=r8(Z,F([$,"optionalAccess",(z)=>z.description]));if(W==null){X();return}const{add:J,next:K}=x1((z)=>{this._cachedFrames.set(W,z),X()});for(let z=0;z<Math.min(Q.length,5);z++){const{scopeChain:N,functionName:V,this:G}=Q[z],M=N.find((j)=>j.type==="local"),R=G.className==="global"||!G.className?V:`${G.className}.${V}`;if(F([M,"optionalAccess",(j)=>j.object,"access",(j)=>j.objectId])===void 0)J((j)=>{j[z]={function:R},K(j)});else{const j=M.object.objectId;J((P)=>F([this,"access",(T)=>T._session,"optionalAccess",(T)=>T.getLocalVariables,"call",(T)=>T(j,(E)=>{P[z]={function:R,vars:E},K(P)})]))}}K([])}_addLocalVariables(Z){for(let Y of F([Z,"optionalAccess",($)=>$.exception,"optionalAccess",($)=>$.values])||[])this._addLocalVariablesToException(Y);return Z}_addLocalVariablesToException(Z){const Y=v1(F([Z,"optionalAccess",(X)=>X.stacktrace,"optionalAccess",(X)=>X.frames]));if(Y===void 0)return;const $=this._cachedFrames.remove(Y);if($===void 0)return;const Q=F([Z,"access",(X)=>X.stacktrace,"optionalAccess",(X)=>X.frames,"optionalAccess",(X)=>X.length])||0;for(let X=0;X<Q;X++){const W=Q-X-1;if(!F([Z,"optionalAccess",(J)=>J.stacktrace,"optionalAccess",(J)=>J.frames,"optionalAccess",(J)=>J[W]])||!$[X])break;if($[X].vars===void 0||Z.stacktrace.frames[W].in_app===!1||!o8(Z.stacktrace.frames[W].function,$[X].function))continue;Z.stacktrace.frames[W].vars=$[X].vars}}}q0.__initStatic();var m1=function(Z,Y,$){if(Z.headers.split("\r\n").some((W)=>W.startsWith("sentry-trace:")))return;if(Z.addHeader("sentry-trace",Y),$)Z.addHeader("baggage",$)},n8=function(Z,Y,$){const Q=jZ($),X=Y.method||"GET",W={"http.method":X};if(Q.search)W["http.query"]=Q.search;if(Q.hash)W["http.fragment"]=Q.hash;return F([Z,"optionalAccess",(J)=>J.startChild,"call",(J)=>J({op:"http.client",origin:"auto.http.node.undici",description:`${X} ${HZ(Q)}`,data:W})])},xZ;(function(Z){Z.RequestCreate="undici:request:create";const $="undici:request:headers";Z.RequestEnd=$;const Q="undici:request:error";Z.RequestError=Q})(xZ||(xZ={}));class _{static __initStatic(){this.id="Undici"}__init(){this.name=_.id}__init2(){this._createSpanUrlMap=new i(100)}__init3(){this._headersUrlMap=new i(100)}constructor(Z={}){_.prototype.__init.call(this),_.prototype.__init2.call(this),_.prototype.__init3.call(this),_.prototype.__init4.call(this),_.prototype.__init5.call(this),_.prototype.__init6.call(this),this._options={breadcrumbs:Z.breadcrumbs===void 0?!0:Z.breadcrumbs,shouldCreateSpanForRequest:Z.shouldCreateSpanForRequest}}setupOnce(Z){if(v.major&&v.major<16)return;let Y;try{Y=j0(t8,"diagnostics_channel")}catch($){}if(!Y||!Y.subscribe)return;Y.subscribe(xZ.RequestCreate,this._onRequestCreate),Y.subscribe(xZ.RequestEnd,this._onRequestEnd),Y.subscribe(xZ.RequestError,this._onRequestError)}_shouldCreateSpan(Z){if(this._options.shouldCreateSpanForRequest===void 0)return!0;const Y=this._createSpanUrlMap.get(Z);if(Y!==void 0)return Y;const $=this._options.shouldCreateSpanForRequest(Z);return this._createSpanUrlMap.set(Z,$),$}__init4(){this._onRequestCreate=(Z)=>{const Y=B();if(!Y.getIntegration(_))return;const{request:$}=Z,Q=$.origin?$.origin.toString()+$.path:$.path;if(b0(Q,Y)||$.__sentry_span__!==void 0)return;const X=Y.getClient();if(!X)return;const W=X.getOptions(),J=Y.getScope(),K=J.getSpan(),z=this._shouldCreateSpan(Q)?n8(K,$,Q):void 0;if(z)$.__sentry_span__=z;if(((V)=>{if(W.tracePropagationTargets===void 0)return!0;const G=this._headersUrlMap.get(V);if(G!==void 0)return G;const M=X0(V,W.tracePropagationTargets);return this._headersUrlMap.set(V,M),M})(Q))if(z){const V=F([z,"optionalAccess",(M)=>M.transaction,"optionalAccess",(M)=>M.getDynamicSamplingContext,"call",(M)=>M()]),G=s0(V);m1($,z.toTraceparent(),G)}else{const{traceId:V,sampled:G,dsc:M}=J.getPropagationContext(),R=y0(V,void 0,G),j=M||n(V,X,J),P=s0(j);m1($,R,P)}}}__init5(){this._onRequestEnd=(Z)=>{const Y=B();if(!Y.getIntegration(_))return;const{request:$,response:Q}=Z,X=$.origin?$.origin.toString()+$.path:$.path;if(b0(X,Y))return;const W=$.__sentry_span__;if(W)W.setHttpStatus(Q.statusCode),W.finish();if(this._options.breadcrumbs)Y.addBreadcrumb({category:"http",data:{method:$.method,status_code:Q.statusCode,url:X},type:"http"},{event:"response",request:$,response:Q})}}__init6(){this._onRequestError=(Z)=>{const Y=B();if(!Y.getIntegration(_))return;const{request:$}=Z,Q=$.origin?$.origin.toString()+$.path:$.path;if(b0(Q,Y))return;const X=$.__sentry_span__;if(X)X.setStatus("internal_error"),X.finish();if(this._options.breadcrumbs)Y.addBreadcrumb({category:"http",data:{method:$.method,url:Q},level:"error",type:"http"},{event:"error",request:$})}}}_.__initStatic();import*as g1 from"http";import{URL as e8} from"url";var Z9=function(Z,Y){const $=Y9(Y.sidecarUrl);if(!$)return;let Q=0;if(typeof Z.on!=="function"){w.warn("[Spotlight] Cannot connect to spotlight due to missing method on SDK client (`client.on`)");return}Z.on("beforeEnvelope",(X)=>{if(Q>3){w.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests");return}const W=LZ(X),J=g1.request({method:"POST",path:$.pathname,hostname:$.hostname,port:$.port,headers:{"Content-Type":"application/x-sentry-envelope"}},(K)=>{K.on("data",()=>{}),K.on("end",()=>{}),K.setEncoding("utf8")});J.on("error",()=>{Q++,w.warn("[Spotlight] Failed to send envelope to Spotlight Sidecar")}),J.write(W),J.end()})},Y9=function(Z){try{return new e8(`${Z}`)}catch(Y){w.warn(`[Spotlight] Invalid sidecar URL: ${Z}`);return}};class m0{static __initStatic(){this.id="Spotlight"}__init(){this.name=m0.id}constructor(Z){m0.prototype.__init.call(this),this._options={sidecarUrl:F([Z,"optionalAccess",(Y)=>Y.sidecarUrl])||"http://localhost:8969/stream"}}setupOnce(){}setup(Z){Z9(Z,this._options)}}m0.__initStatic();var C$=function(Z={}){if(L1())Z.autoSessionTracking=!1,Z.tracesSampleRate=0;const Y=r();O1();const $=F([Y,"access",(W)=>W.__SENTRY__,"optionalAccess",(W)=>W.integrations])||[];if(Z.defaultIntegrations=Z.defaultIntegrations===!1?[]:[...Array.isArray(Z.defaultIntegrations)?Z.defaultIntegrations:d1,...$],Z.dsn===void 0&&process.env.SENTRY_DSN)Z.dsn=process.env.SENTRY_DSN;const Q=process.env.SENTRY_TRACES_SAMPLE_RATE;if(Z.tracesSampleRate===void 0&&Q){const W=parseFloat(Q);if(isFinite(W))Z.tracesSampleRate=W}if(Z.release===void 0){const W=u1();if(W!==void 0)Z.release=W;else Z.autoSessionTracking=!1}if(Z.environment===void 0&&process.env.SENTRY_ENVIRONMENT)Z.environment=process.env.SENTRY_ENVIRONMENT;if(Z.autoSessionTracking===void 0&&Z.dsn!==void 0)Z.autoSessionTracking=!0;if(Z.instrumenter===void 0)Z.instrumenter="sentry";const X={...Z,stackParser:_Y(Z.stackParser||p1),integrations:w$(Z),transport:Z.transport||P1};if(j$(Z.clientClass||P$,X),Z.autoSessionTracking)$9();if(Q9(),Z.spotlight){const W=B().getClient();if(W&&W.addIntegration)W.setupIntegrations(!0),W.addIntegration(new m0({sidecarUrl:typeof Z.spotlight==="string"?Z.spotlight:void 0}))}};var u1=function(Z){if(process.env.SENTRY_RELEASE)return process.env.SENTRY_RELEASE;if(L.SENTRY_RELEASE&&L.SENTRY_RELEASE.id)return L.SENTRY_RELEASE.id;return process.env.GITHUB_SHA||process.env.COMMIT_REF||process.env.VERCEL_GIT_COMMIT_SHA||process.env.VERCEL_GITHUB_COMMIT_SHA||process.env.VERCEL_GITLAB_COMMIT_SHA||process.env.VERCEL_BITBUCKET_COMMIT_SHA||process.env.ZEIT_GITHUB_COMMIT_SHA||process.env.ZEIT_GITLAB_COMMIT_SHA||process.env.ZEIT_BITBUCKET_COMMIT_SHA||Z},$9=function(){const Z=B();Z.startSession(),process.on("beforeExit",()=>{const Y=Z.getScope().getSession();if(Y&&!["exited","crashed"].includes(Y.status))Z.endSession()})},Q9=function(){const Z=(process.env.SENTRY_USE_ENVIRONMENT||"").toLowerCase();if(!["false","n","no","off","0"].includes(Z)){const Y=process.env.SENTRY_TRACE,$=process.env.SENTRY_BAGGAGE,{propagationContext:Q}=BZ(Y,$);B().getScope().setPropagationContext(Q)}},d1=[new x.InboundFilters,new x.FunctionToString,new x.LinkedErrors,new A0,new U0,new _,new w0,new D0,new I0,new q0,new v0,new O0,new L0],p1=pZ(bY(B1));var y$={};hZ(y$,{Undici:()=>{{return _}},Spotlight:()=>{{return m0}},RequestData:()=>{{return L0}},OnUnhandledRejection:()=>{{return D0}},OnUncaughtException:()=>{{return w0}},Modules:()=>{{return O0}},LocalVariables:()=>{{return q0}},Http:()=>{{return U0}},ContextLines:()=>{{return I0}},Context:()=>{{return v0}},Console:()=>{{return A0}}});var _$={};hZ(_$,{Prisma:()=>{{return EZ}},Postgres:()=>{{return OZ}},Mysql:()=>{{return IZ}},Mongo:()=>{{return qZ}},GraphQL:()=>{{return kZ}},Express:()=>{{return DZ}},Apollo:()=>{{return fZ}}});var z0={...x,...y$,..._$};import*as c1 from"os";class b$ extends YZ{constructor(Z){Z._metadata=Z._metadata||{},Z._metadata.sdk=Z._metadata.sdk||{name:"sentry.javascript.bun",packages:[{name:"npm:@sentry/bun",version:B0}],version:B0};const Y={...Z,platform:"javascript",runtime:{name:"bun",version:Bun.version},serverName:Z.serverName||global.process.env.SENTRY_NAME||c1.hostname()};super(Y)}}var X9=function(){Bun.serve=new Proxy(Bun.serve,{apply(Z,Y,$){return W9($[0]),Z.apply(Y,$)}})},W9=function(Z){Z.fetch=new Proxy(Z.fetch,{apply(Y,$,Q){return YY(()=>{const X=Q[0],W=X.method.toUpperCase();if(W==="OPTIONS"||W==="HEAD")return Y.apply($,Q);const J=jZ(X.url),K={"http.request.method":X.method||"GET"};if(J.search)K["http.query"]=J.search;const z=HZ(J);return JY({sentryTrace:X.headers.get("sentry-trace")||"",baggage:X.headers.get("baggage")},(N)=>{return WY({op:"http.server",name:`${X.method} ${J.path||"/"}`,origin:"auto.http.bun.serve",...N,data:K,metadata:{...N.metadata,source:"url",request:{url:z,method:X.method,headers:X.headers.toJSON()}}},async(V)=>{try{const G=await Y.apply($,Q);if(G&&G.status){if(F([V,"optionalAccess",(M)=>M.setHttpStatus,"call",(M)=>M(G.status)]),F([V,"optionalAccess",(M)=>M.setData,"call",(M)=>M("http.response.status_code",G.status)]),V instanceof e0)V.setContext("response",{headers:G.headers.toJSON(),status_code:G.status})}return G}catch(G){throw ZZ(G,{mechanism:{type:"bun",handled:!1,data:{function:"serve"}}}),G}})})})}})};class g0{constructor(){g0.prototype.__init.call(this)}static __initStatic(){this.id="BunServer"}__init(){this.name=g0.id}setupOnce(){X9()}}g0.__initStatic();var l1=function(Z){function Y($){const Q={body:$.body,method:"POST",headers:Z.headers};try{return fetch(Z.url,Q).then((X)=>{return{statusCode:X.status,headers:{"x-sentry-rate-limits":X.headers.get("X-Sentry-Rate-Limits"),"retry-after":X.headers.get("Retry-After")}}})}catch(X){return E0(X)}}return _0(Z,Y)};var J9=function(Z={}){Z.clientClass=b$,Z.transport=Z.transport||l1,Z.defaultIntegrations=Z.defaultIntegrations===!1?[]:[...Array.isArray(Z.defaultIntegrations)?Z.defaultIntegrations:i1],C$(Z)},i1=[new x.InboundFilters,new x.FunctionToString,new x.LinkedErrors,new z0.Console,new z0.Http,new z0.Undici,new z0.ContextLines,new z0.Context,new z0.Modules,new z0.RequestData,new g0];var x$={};hZ(x$,{BunServer:()=>{{return g0}}});var PV={...x,...z0,...x$};async function z9(Z){try{throw new Error("Sentry Bun test")}catch(Y){ZZ(Y)}}export{z9 as default};

//# debugId=C9D835C41D97AEFB64756e2164756e21
