// @bun
var y8=Object.create;var{defineProperty:W1,getPrototypeOf:x8,getOwnPropertyNames:b8}=Object;var h8=Object.prototype.hasOwnProperty;var v8=($,Z,Y)=>{Y=$!=null?y8(x8($)):{};const X=Z||!$||!$.__esModule?W1(Y,"default",{value:$,enumerable:!0}):Y;for(let Q of b8($))if(!h8.call(X,Q))W1(X,Q,{get:()=>$[Q],enumerable:!0});return X};var $0=($,Z)=>()=>(Z||$((Z={exports:{}}).exports,Z),Z.exports);var Z0=($)=>{return import.meta.require($)};var tZ=($,Z)=>{for(var Y in Z)W1($,Y,{get:Z[Y],enumerable:!0,configurable:!0,set:(X)=>Z[Y]=()=>X})};var IW=$0((vw,SW)=>{var k6=function($){if($=String($),$.length>100)return;var Z=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec($);if(!Z)return;var Y=parseFloat(Z[1]),X=(Z[2]||"ms").toLowerCase();switch(X){case"years":case"year":case"yrs":case"yr":case"y":return Y*E6;case"weeks":case"week":case"w":return Y*q6;case"days":case"day":case"d":return Y*D$;case"hours":case"hour":case"hrs":case"hr":case"h":return Y*MZ;case"minutes":case"minute":case"mins":case"min":case"m":return Y*NZ;case"seconds":case"second":case"secs":case"sec":case"s":return Y*wZ;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return Y;default:return}},S6=function($){var Z=Math.abs($);if(Z>=D$)return Math.round($/D$)+"d";if(Z>=MZ)return Math.round($/MZ)+"h";if(Z>=NZ)return Math.round($/NZ)+"m";if(Z>=wZ)return Math.round($/wZ)+"s";return $+"ms"},I6=function($){var Z=Math.abs($);if(Z>=D$)return sY($,Z,D$,"day");if(Z>=MZ)return sY($,Z,MZ,"hour");if(Z>=NZ)return sY($,Z,NZ,"minute");if(Z>=wZ)return sY($,Z,wZ,"second");return $+" ms"},sY=function($,Z,Y,X){var Q=Z>=Y*1.5;return Math.round($/Y)+" "+X+(Q?"s":"")},wZ=1000,NZ=wZ*60,MZ=NZ*60,D$=MZ*24,q6=D$*7,E6=D$*365.25;SW.exports=function($,Z){Z=Z||{};var Y=typeof $;if(Y==="string"&&$.length>0)return k6($);else if(Y==="number"&&isFinite($))return Z.long?I6($):S6($);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify($))}});var SX=$0((gw,fW)=>{var f6=function($){Y.debug=Y,Y.default=Y,Y.coerce=z,Y.disable=W,Y.enable=Q,Y.enabled=J,Y.humanize=IW(),Y.destroy=w,Object.keys($).forEach((G)=>{Y[G]=$[G]}),Y.names=[],Y.skips=[],Y.formatters={};function Z(G){let V=0;for(let N=0;N<G.length;N++)V=(V<<5)-V+G.charCodeAt(N),V|=0;return Y.colors[Math.abs(V)%Y.colors.length]}Y.selectColor=Z;function Y(G){let V,N=null,H,F;function B(...T){if(!B.enabled)return;const A=B,S=Number(new Date),f=S-(V||S);if(A.diff=f,A.prev=V,A.curr=S,V=S,T[0]=Y.coerce(T[0]),typeof T[0]!=="string")T.unshift("%O");let q=0;T[0]=T[0].replace(/%([a-zA-Z%])/g,(E,o)=>{if(E==="%%")return"%";q++;const N0=Y.formatters[o];if(typeof N0==="function"){const Q1=T[q];E=N0.call(A,Q1),T.splice(q,1),q--}return E}),Y.formatArgs.call(A,T),(A.log||Y.log).apply(A,T)}if(B.namespace=G,B.useColors=Y.useColors(),B.color=Y.selectColor(G),B.extend=X,B.destroy=Y.destroy,Object.defineProperty(B,"enabled",{enumerable:!0,configurable:!1,get:()=>{if(N!==null)return N;if(H!==Y.namespaces)H=Y.namespaces,F=Y.enabled(G);return F},set:(T)=>{N=T}}),typeof Y.init==="function")Y.init(B);return B}function X(G,V){const N=Y(this.namespace+(typeof V==="undefined"?":":V)+G);return N.log=this.log,N}function Q(G){Y.save(G),Y.namespaces=G,Y.names=[],Y.skips=[];let V;const N=(typeof G==="string"?G:"").split(/[\s,]+/),H=N.length;for(V=0;V<H;V++){if(!N[V])continue;if(G=N[V].replace(/\*/g,".*?"),G[0]==="-")Y.skips.push(new RegExp("^"+G.slice(1)+"$"));else Y.names.push(new RegExp("^"+G+"$"))}}function W(){const G=[...Y.names.map(K),...Y.skips.map(K).map((V)=>"-"+V)].join(",");return Y.enable(""),G}function J(G){if(G[G.length-1]==="*")return!0;let V,N;for(V=0,N=Y.skips.length;V<N;V++)if(Y.skips[V].test(G))return!1;for(V=0,N=Y.names.length;V<N;V++)if(Y.names[V].test(G))return!0;return!1}function K(G){return G.toString().substring(2,G.toString().length-2).replace(/\.\*\?$/,"*")}function z(G){if(G instanceof Error)return G.stack||G.message;return G}function w(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return Y.enable(Y.load()),Y};fW.exports=f6});var _W=$0((CW,oY)=>{var C6=function(){if(typeof window!=="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},_6=function($){if($[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+$[0]+(this.useColors?"%c ":" ")+"+"+CW.humanize(this.diff),!this.useColors)return;const Z="color: "+this.color;$.splice(1,0,Z,"color: inherit");let Y=0,X=0;$[0].replace(/%[a-zA-Z%]/g,(Q)=>{if(Q==="%%")return;if(Y++,Q==="%c")X=Y}),$.splice(X,0,Z)},y6=function($){try{if($)CW.storage.setItem("debug",$);else CW.storage.removeItem("debug")}catch(Z){}},x6=function(){let $;try{$=CW.storage.getItem("debug")}catch(Z){}if(!$&&typeof process!=="undefined"&&"env"in process)$=process.env.DEBUG;return $},b6=function(){try{return localStorage}catch($){}};CW.formatArgs=_6;CW.save=y6;CW.load=x6;CW.useColors=C6;CW.storage=b6();CW.destroy=(()=>{let $=!1;return()=>{if(!$)$=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}})();CW.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];CW.log=console.debug||console.log||(()=>{});oY.exports=SX()(CW);var{formatters:h6}=oY.exports;h6.j=function($){try{return JSON.stringify($)}catch(Z){return"[UnexpectedJSONParseError]: "+Z.message}}});var xW=$0((dw,yW)=>{yW.exports=($,Z=process.argv)=>{const Y=$.startsWith("-")?"":$.length===1?"-":"--",X=Z.indexOf(Y+$),Q=Z.indexOf("--");return X!==-1&&(Q===-1||X<Q)}});var vW=$0((uw,hW)=>{var IX=function($){if($===0)return!1;return{level:$,hasBasic:!0,has256:$>=2,has16m:$>=3}},fX=function($,Z){if(v0===0)return 0;if(K0("color=16m")||K0("color=full")||K0("color=truecolor"))return 3;if(K0("color=256"))return 2;if($&&!Z&&v0===void 0)return 0;const Y=v0||0;if(d.TERM==="dumb")return Y;if(process.platform==="win32"){const X=l6.release().split(".");if(Number(X[0])>=10&&Number(X[2])>=10586)return Number(X[2])>=14931?3:2;return 1}if("CI"in d){if(["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some((X)=>(X in d))||d.CI_NAME==="codeship")return 1;return Y}if("TEAMCITY_VERSION"in d)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(d.TEAMCITY_VERSION)?1:0;if(d.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in d){const X=parseInt((d.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(d.TERM_PROGRAM){case"iTerm.app":return X>=3?3:2;case"Apple_Terminal":return 2}}if(/-256(color)?$/i.test(d.TERM))return 2;if(/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(d.TERM))return 1;if("COLORTERM"in d)return 1;return Y},i6=function($){const Z=fX($,$&&$.isTTY);return IX(Z)},l6=import.meta.require("os"),bW=import.meta.require("tty"),K0=xW(),{env:d}=process,v0;if(K0("no-color")||K0("no-colors")||K0("color=false")||K0("color=never"))v0=0;else if(K0("color")||K0("colors")||K0("color=true")||K0("color=always"))v0=1;if("FORCE_COLOR"in d)if(d.FORCE_COLOR==="true")v0=1;else if(d.FORCE_COLOR==="false")v0=0;else v0=d.FORCE_COLOR.length===0?1:Math.min(parseInt(d.FORCE_COLOR,10),3);hW.exports={supportsColor:i6,stdout:IX(fX(!0,bW.isatty(1))),stderr:IX(fX(!0,bW.isatty(2)))}});var uW=$0((mW,tY)=>{var s6=function(){return"colors"in mW.inspectOpts?Boolean(mW.inspectOpts.colors):a6.isatty(process.stderr.fd)},r6=function($){const{namespace:Z,useColors:Y}=this;if(Y){const X=this.color,Q="\x1B[3"+(X<8?X:"8;5;"+X),W=`  ${Q};1m${Z} \x1B[0m`;$[0]=W+$[0].split("\n").join("\n"+W),$.push(Q+"m+"+mW.humanize(this.diff)+"\x1B[0m")}else $[0]=o6()+Z+" "+$[0]},o6=function(){if(mW.inspectOpts.hideDate)return"";return(new Date()).toISOString()+" "},n6=function(...$){return process.stderr.write(nY.format(...$)+"\n")},t6=function($){if($)process.env.DEBUG=$;else delete process.env.DEBUG},e6=function(){return process.env.DEBUG},$J=function($){$.inspectOpts={};const Z=Object.keys(mW.inspectOpts);for(let Y=0;Y<Z.length;Y++)$.inspectOpts[Z[Y]]=mW.inspectOpts[Z[Y]]},a6=import.meta.require("tty"),nY=import.meta.require("util");mW.init=$J;mW.log=n6;mW.formatArgs=r6;mW.save=t6;mW.load=e6;mW.useColors=s6;mW.destroy=nY.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");mW.colors=[6,2,3,4,5,1];try{const $=vW();if($&&($.stderr||$).level>=2)mW.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}catch($){}mW.inspectOpts=Object.keys(process.env).filter(($)=>{return/^debug_/i.test($)}).reduce(($,Z)=>{const Y=Z.substring(6).toLowerCase().replace(/_([a-z])/g,(Q,W)=>{return W.toUpperCase()});let X=process.env[Z];if(/^(yes|on|true|enabled)$/i.test(X))X=!0;else if(/^(no|off|false|disabled)$/i.test(X))X=!1;else if(X==="null")X=null;else X=Number(X);return $[Y]=X,$},{});tY.exports=SX()(mW);var{formatters:gW}=tY.exports;gW.o=function($){return this.inspectOpts.colors=this.useColors,nY.inspect($,this.inspectOpts).split("\n").map((Z)=>Z.trim()).join(" ")};gW.O=function($){return this.inspectOpts.colors=this.useColors,nY.inspect($,this.inspectOpts)}});var eY=$0((pw,CX)=>{if(typeof process==="undefined"||process.type==="renderer"||!1||process.__nwjs)CX.exports=_W();else CX.exports=uW()});var pW=$0((cW)=>{var zJ=function($){return function(Z,Y){return new Promise((X,Q)=>{$.call(this,Z,Y,(W,J)=>{if(W)Q(W);else X(J)})})}};Object.defineProperty(cW,"__esModule",{value:!0});cW.default=zJ});var aW=$0((yX,iW)=>{var MJ=function($){return Boolean($)&&typeof $.addRequest==="function"},_X=function(){const{stack:$}=new Error;if(typeof $!=="string")return!1;return $.split("\n").some((Z)=>Z.indexOf("(https.js:")!==-1||Z.indexOf("node:https:")!==-1)},$1=function($,Z){return new $1.Agent($,Z)},lW=yX&&yX.__importDefault||function($){return $&&$.__esModule?$:{default:$}},GJ=import.meta.require("events"),wJ=lW(eY()),NJ=lW(pW()),iZ=wJ.default("agent-base");(function($){class Z extends GJ.EventEmitter{constructor(Y,X){super();let Q=X;if(typeof Y==="function")this.callback=Y;else if(Y)Q=Y;if(this.timeout=null,Q&&typeof Q.timeout==="number")this.timeout=Q.timeout;this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=Infinity,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){if(typeof this.explicitDefaultPort==="number")return this.explicitDefaultPort;return _X()?443:80}set defaultPort(Y){this.explicitDefaultPort=Y}get protocol(){if(typeof this.explicitProtocol==="string")return this.explicitProtocol;return _X()?"https:":"http:"}set protocol(Y){this.explicitProtocol=Y}callback(Y,X,Q){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(Y,X){const Q=Object.assign({},X);if(typeof Q.secureEndpoint!=="boolean")Q.secureEndpoint=_X();if(Q.host==null)Q.host="localhost";if(Q.port==null)Q.port=Q.secureEndpoint?443:80;if(Q.protocol==null)Q.protocol=Q.secureEndpoint?"https:":"http:";if(Q.host&&Q.path)delete Q.path;delete Q.agent,delete Q.hostname,delete Q._defaultAgent,delete Q.defaultPort,delete Q.createConnection,Y._last=!0,Y.shouldKeepAlive=!1;let W=!1,J=null;const K=Q.timeout||this.timeout,z=(N)=>{if(Y._hadError)return;Y.emit("error",N),Y._hadError=!0},w=()=>{J=null,W=!0;const N=new Error(`A "socket" was not created for HTTP request before ${K}ms`);N.code="ETIMEOUT",z(N)},G=(N)=>{if(W)return;if(J!==null)clearTimeout(J),J=null;z(N)},V=(N)=>{if(W)return;if(J!=null)clearTimeout(J),J=null;if(MJ(N)){iZ("Callback returned another Agent instance %o",N.constructor.name),N.addRequest(Y,Q);return}if(N){N.once("free",()=>{this.freeSocket(N,Q)}),Y.onSocket(N);return}const H=new Error(`no Duplex stream was returned to agent-base for \`${Y.method} ${Y.path}\``);z(H)};if(typeof this.callback!=="function"){z(new Error("`callback` is not defined"));return}if(!this.promisifiedCallback)if(this.callback.length>=3)iZ("Converting legacy callback function to promise"),this.promisifiedCallback=NJ.default(this.callback);else this.promisifiedCallback=this.callback;if(typeof K==="number"&&K>0)J=setTimeout(w,K);if("port"in Q&&typeof Q.port!=="number")Q.port=Number(Q.port);try{iZ("Resolving socket for %o request: %o",Q.protocol,`${Y.method} ${Y.path}`),Promise.resolve(this.promisifiedCallback(Y,Q)).then(V,G)}catch(N){Promise.reject(N).catch(G)}}freeSocket(Y,X){iZ("Freeing socket %o %o",Y.constructor.name,X),Y.destroy()}destroy(){iZ("Destroying agent %o",this.constructor.name)}}$.Agent=Z,$.prototype=$.Agent.prototype})($1||($1={}));iW.exports=$1});var sW=$0((sZ)=>{var FJ=function($){return new Promise((Z,Y)=>{let X=0;const Q=[];function W(){const V=$.read();if(V)G(V);else $.once("readable",W)}function J(){$.removeListener("end",z),$.removeListener("error",w),$.removeListener("close",K),$.removeListener("readable",W)}function K(V){aZ("onclose had error %o",V)}function z(){aZ("onend")}function w(V){J(),aZ("onerror %o",V),Y(V)}function G(V){Q.push(V),X+=V.length;const N=Buffer.concat(Q,X);if(N.indexOf("\r\n\r\n")===-1){aZ("have not received end of HTTP headers yet..."),W();return}const F=N.toString("ascii",0,N.indexOf("\r\n")),B=+F.split(" ")[1];aZ("got proxy server response: %o",F),Z({statusCode:B,buffered:N})}$.on("error",w),$.on("close",K),$.on("end",z),W()})},LJ=sZ&&sZ.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(sZ,"__esModule",{value:!0});var HJ=LJ(eY()),aZ=HJ.default("https-proxy-agent:parse-proxy-response");sZ.default=FJ});var tW=$0((P$)=>{var PJ=function($){$.resume()},OJ=function($,Z){return Boolean(!Z&&$===80||Z&&$===443)},AJ=function($){return typeof $==="string"?/^https:?$/i.test($):!1},qJ=function($,...Z){const Y={};let X;for(X in $)if(!Z.includes(X))Y[X]=$[X];return Y},BJ=P$&&P$.__awaiter||function($,Z,Y,X){function Q(W){return W instanceof Y?W:new Y(function(J){J(W)})}return new(Y||(Y=Promise))(function(W,J){function K(G){try{w(X.next(G))}catch(V){J(V)}}function z(G){try{w(X.throw(G))}catch(V){J(V)}}function w(G){G.done?W(G.value):Q(G.value).then(K,z)}w((X=X.apply($,Z||[])).next())})},HZ=P$&&P$.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(P$,"__esModule",{value:!0});var rW=HZ(import.meta.require("net")),oW=HZ(import.meta.require("tls")),jJ=HZ(import.meta.require("url")),UJ=HZ(import.meta.require("assert")),TJ=HZ(eY()),RJ=aW(),DJ=HZ(sW()),rZ=TJ.default("https-proxy-agent:agent");class nW extends RJ.Agent{constructor($){let Z;if(typeof $==="string")Z=jJ.default.parse($);else Z=$;if(!Z)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");rZ("creating new HttpsProxyAgent instance: %o",Z);super(Z);const Y=Object.assign({},Z);if(this.secureProxy=Z.secureProxy||AJ(Y.protocol),Y.host=Y.hostname||Y.host,typeof Y.port==="string")Y.port=parseInt(Y.port,10);if(!Y.port&&Y.host)Y.port=this.secureProxy?443:80;if(this.secureProxy&&!("ALPNProtocols"in Y))Y.ALPNProtocols=["http 1.1"];if(Y.host&&Y.path)delete Y.path,delete Y.pathname;this.proxy=Y}callback($,Z){return BJ(this,void 0,void 0,function*(){const{proxy:Y,secureProxy:X}=this;let Q;if(X)rZ("Creating `tls.Socket`: %o",Y),Q=oW.default.connect(Y);else rZ("Creating `net.Socket`: %o",Y),Q=rW.default.connect(Y);const W=Object.assign({},Y.headers);let K=`CONNECT ${`${Z.host}:${Z.port}`} HTTP/1.1\r\n`;if(Y.auth)W["Proxy-Authorization"]=`Basic ${Buffer.from(Y.auth).toString("base64")}`;let{host:z,port:w,secureEndpoint:G}=Z;if(!OJ(w,G))z+=`:${w}`;W.Host=z,W.Connection="close";for(let B of Object.keys(W))K+=`${B}: ${W[B]}\r\n`;const V=DJ.default(Q);Q.write(`${K}\r\n`);const{statusCode:N,buffered:H}=yield V;if(N===200){if($.once("socket",PJ),Z.secureEndpoint){rZ("Upgrading socket connection to TLS");const B=Z.servername||Z.host;return oW.default.connect(Object.assign(Object.assign({},qJ(Z,"host","hostname","path","port")),{socket:Q,servername:B}))}return Q}Q.destroy();const F=new rW.default.Socket({writable:!1});return F.readable=!0,$.once("socket",(B)=>{rZ("replaying proxy buffer for failed request"),UJ.default(B.listenerCount("data")>0),B.push(H),B.push(null)}),F})}}P$.default=nW});var $8=$0((hX,eW)=>{var bX=function($){return new xX.default($)},EJ=hX&&hX.__importDefault||function($){return $&&$.__esModule?$:{default:$}},xX=EJ(tW());(function($){$.HttpsProxyAgent=xX.default,$.prototype=xX.default.prototype})(bX||(bX={}));eW.exports=bX});var l0="4.20.0";function sX($,Z={auto:!1}){if(aX)throw new Error(`you must \`import 'openai/shims/${$.kind}'\` before importing anything else from openai`);if(i0)throw new Error(`can't \`import 'openai/shims/${$.kind}'\` after \`import 'openai/shims/${i0}'\``);aX=Z.auto,i0=$.kind,J1=$.fetch,g8=$.Request,m8=$.Response,d8=$.Headers,K1=$.FormData,u8=$.Blob,eZ=$.File,z1=$.ReadableStream,V1=$.getMultipartRequestOptions,G1=$.getDefaultAgent,$Y=$.fileFromPath,w1=$.isFsReadStream}var aX=!1,i0=void 0,J1=void 0,g8=void 0,m8=void 0,d8=void 0,K1=void 0,u8=void 0,eZ=void 0,z1=void 0,V1=void 0,G1=void 0,$Y=void 0,w1=void 0;class N1{constructor($){this.body=$}get[Symbol.toStringTag](){return"MultipartBody"}}function rX({manuallyImported:$}={}){const Z=$?"You may need to use polyfills":`Add one of these imports before your first \`import \u2026 from 'openai'\`:
- \`import 'openai/shims/node'\` (if you're running on Node)
- \`import 'openai/shims/web'\` (otherwise)
`;let Y,X,Q,W;try{Y=fetch,X=Request,Q=Response,W=Headers}catch(J){throw new Error(`this environment is missing the following Web Fetch API type: ${J.message}. ${Z}`)}return{kind:"web",fetch:Y,Request:X,Response:Q,Headers:W,FormData:typeof FormData!=="undefined"?FormData:class J{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${Z}`)}},Blob:typeof Blob!=="undefined"?Blob:class J{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${Z}`)}},File:typeof File!=="undefined"?File:class J{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${Z}`)}},ReadableStream:typeof ReadableStream!=="undefined"?ReadableStream:class J{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${Z}`)}},getMultipartRequestOptions:async(J,K)=>({...K,body:new N1(J)}),getDefaultAgent:(J)=>{return},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:(J)=>!1}}import{ReadStream as p8} from"fs";function oX(){const $=rX();function Z(Y){return Y instanceof p8}return{...$,isFsReadStream:Z}}if(!i0)sX(oX(),{auto:!0});class D extends Error{}class y extends D{constructor($,Z,Y,X){super(`${y.makeMessage($,Z,Y)}`);this.status=$,this.headers=X;const Q=Z;this.error=Q,this.code=Q?.code,this.param=Q?.param,this.type=Q?.type}static makeMessage($,Z,Y){const X=Z?.message?typeof Z.message==="string"?Z.message:JSON.stringify(Z.message):Z?JSON.stringify(Z):Y;if($&&X)return`${$} ${X}`;if($)return`${$} status code (no body)`;if(X)return X;return"(no status code or body)"}static generate($,Z,Y,X){if(!$)return new a0({cause:VY(Z)});const Q=Z?.error;if($===400)return new ZY($,Q,Y,X);if($===401)return new YY($,Q,Y,X);if($===403)return new XY($,Q,Y,X);if($===404)return new QY($,Q,Y,X);if($===409)return new WY($,Q,Y,X);if($===422)return new JY($,Q,Y,X);if($===429)return new KY($,Q,Y,X);if($>=500)return new zY($,Q,Y,X);return new y($,Q,Y,X)}}class Y0 extends y{constructor({message:$}={}){super(void 0,void 0,$||"Request was aborted.",void 0);this.status=void 0}}class a0 extends y{constructor({message:$,cause:Z}){super(void 0,void 0,$||"Connection error.",void 0);if(this.status=void 0,Z)this.cause=Z}}class s0 extends a0{constructor({message:$}={}){super({message:$??"Request timed out."})}}class ZY extends y{constructor(){super(...arguments);this.status=400}}class YY extends y{constructor(){super(...arguments);this.status=401}}class XY extends y{constructor(){super(...arguments);this.status=403}}class QY extends y{constructor(){super(...arguments);this.status=404}}class WY extends y{constructor(){super(...arguments);this.status=409}}class JY extends y{constructor(){super(...arguments);this.status=422}}class KY extends y{constructor(){super(...arguments);this.status=429}}class zY extends y{}var i8=function($,Z){const Y=$.indexOf(Z);if(Y!==-1)return[$.substring(0,Y),Z,$.substring(Y+Z.length)];return[$,"",""]},nX=function($){if($[Symbol.asyncIterator])return $;const Z=$.getReader();return{async next(){try{const Y=await Z.read();if(Y?.done)Z.releaseLock();return Y}catch(Y){throw Z.releaseLock(),Y}},async return(){const Y=Z.cancel();return Z.releaseLock(),await Y,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}};class M0{constructor($,Z){this.iterator=$,this.controller=Z}static fromSSEResponse($,Z){let Y=!1;const X=new tX;async function*Q(){if(!$.body)throw Z.abort(),new D("Attempted to iterate over a response with no body");const J=new r0,K=nX($.body);for await(let z of K)for(let w of J.decode(z)){const G=X.decode(w);if(G)yield G}for(let z of J.flush()){const w=X.decode(z);if(w)yield w}}async function*W(){if(Y)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");Y=!0;let J=!1;try{for await(let K of Q()){if(J)continue;if(K.data.startsWith("[DONE]")){J=!0;continue}if(K.event===null){let z;try{z=JSON.parse(K.data)}catch(w){throw console.error("Could not parse message into JSON:",K.data),console.error("From chunk:",K.raw),w}if(z&&z.error)throw new y(void 0,z.error,void 0,void 0);yield z}}J=!0}catch(K){if(K instanceof Error&&K.name==="AbortError")return;throw K}finally{if(!J)Z.abort()}}return new M0(W,Z)}static fromReadableStream($,Z){let Y=!1;async function*X(){const W=new r0,J=nX($);for await(let K of J)for(let z of W.decode(K))yield z;for(let K of W.flush())yield K}async function*Q(){if(Y)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");Y=!0;let W=!1;try{for await(let J of X()){if(W)continue;if(J)yield JSON.parse(J)}W=!0}catch(J){if(J instanceof Error&&J.name==="AbortError")return;throw J}finally{if(!W)Z.abort()}}return new M0(Q,Z)}[Symbol.asyncIterator](){return this.iterator()}tee(){const $=[],Z=[],Y=this.iterator(),X=(Q)=>{return{next:()=>{if(Q.length===0){const W=Y.next();$.push(W),Z.push(W)}return Q.shift()}}};return[new M0(()=>X($),this.controller),new M0(()=>X(Z),this.controller)]}toReadableStream(){const $=this;let Z;const Y=new TextEncoder;return new z1({async start(){Z=$[Symbol.asyncIterator]()},async pull(X){try{const{value:Q,done:W}=await Z.next();if(W)return X.close();const J=Y.encode(JSON.stringify(Q)+"\n");X.enqueue(J)}catch(Q){X.error(Q)}},async cancel(){await Z.return?.()}})}}class tX{constructor(){this.event=null,this.data=[],this.chunks=[]}decode($){if($.endsWith("\r"))$=$.substring(0,$.length-1);if(!$){if(!this.event&&!this.data.length)return null;const Q={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],Q}if(this.chunks.push($),$.startsWith(":"))return null;let[Z,Y,X]=i8($,":");if(X.startsWith(" "))X=X.substring(1);if(Z==="event")this.event=X;else if(Z==="data")this.data.push(X);return null}}class r0{constructor(){this.buffer=[],this.trailingCR=!1}decode($){let Z=this.decodeText($);if(this.trailingCR)Z="\r"+Z,this.trailingCR=!1;if(Z.endsWith("\r"))this.trailingCR=!0,Z=Z.slice(0,-1);if(!Z)return[];const Y=r0.NEWLINE_CHARS.has(Z[Z.length-1]||"");let X=Z.split(r0.NEWLINE_REGEXP);if(X.length===1&&!Y)return this.buffer.push(X[0]),[];if(this.buffer.length>0)X=[this.buffer.join("")+X[0],...X.slice(1)],this.buffer=[];if(!Y)this.buffer=[X.pop()||""];return X}decodeText($){if($==null)return"";if(typeof $==="string")return $;if(typeof Buffer!=="undefined"){if($ instanceof Buffer)return $.toString();if($ instanceof Uint8Array)return Buffer.from($).toString();throw new D(`Unexpected: received non-Uint8Array (${$.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder!=="undefined"){if($ instanceof Uint8Array||$ instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode($);throw new D(`Unexpected: received non-Uint8Array/ArrayBuffer (${$.constructor.name}) in a web platform. Please report this error.`)}throw new D("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const $=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,$}}r0.NEWLINE_CHARS=new Set(["\n","\r","\v","\f","\x1C","\x1D","\x1E","\x85","\u2028","\u2029"]);r0.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;async function H1($,Z,Y={}){if($=await $,eX($)){const Q=await $.blob();return Z||(Z=new URL($.url).pathname.split(/[\\/]/).pop()??"unknown_file"),new eZ([Q],Z,Y)}const X=await r8($);if(Z||(Z=n8($)??"unknown_file"),!Y.type){const Q=X[0]?.type;if(typeof Q==="string")Y={...Y,type:Q}}return new eZ(X,Z,Y)}async function r8($){let Z=[];if(typeof $==="string"||ArrayBuffer.isView($)||$ instanceof ArrayBuffer)Z.push($);else if($Q($))Z.push(await $.arrayBuffer());else if(t8($))for await(let Y of $)Z.push(Y);else throw new Error(`Unexpected data type: ${typeof $}; constructor: ${$?.constructor?.name}; props: ${o8($)}`);return Z}var o8=function($){return`[${Object.getOwnPropertyNames($).map((Y)=>`"${Y}"`).join(", ")}]`},n8=function($){return M1($.name)||M1($.filename)||M1($.path)?.split(/[\\/]/).pop()},eX=($)=>$!=null&&typeof $==="object"&&typeof $.url==="string"&&typeof $.blob==="function",a8=($)=>$!=null&&typeof $==="object"&&typeof $.name==="string"&&typeof $.lastModified==="number"&&$Q($),$Q=($)=>$!=null&&typeof $==="object"&&typeof $.size==="number"&&typeof $.type==="string"&&typeof $.text==="function"&&typeof $.slice==="function"&&typeof $.arrayBuffer==="function",s8=($)=>{return a8($)||eX($)||w1($)},M1=($)=>{if(typeof $==="string")return $;if(typeof Buffer!=="undefined"&&$ instanceof Buffer)return String($);return},t8=($)=>$!=null&&typeof $==="object"&&typeof $[Symbol.asyncIterator]==="function",F1=($)=>$&&typeof $==="object"&&$.body&&$[Symbol.toStringTag]==="MultipartBody";var L0=async($)=>{const Z=await ZQ($.body);return V1(Z,$)},ZQ=async($)=>{const Z=new K1;return await Promise.all(Object.entries($||{}).map(([Y,X])=>L1(Z,Y,X))),Z};var L1=async($,Z,Y)=>{if(Y===void 0)return;if(Y==null)throw new TypeError(`Received null for "${Z}"; to pass null in FormData, you must use the string 'null'`);if(typeof Y==="string"||typeof Y==="number"||typeof Y==="boolean")$.append(Z,String(Y));else if(s8(Y)){const X=await H1(Y);$.append(Z,X)}else if(Array.isArray(Y))await Promise.all(Y.map((X)=>L1($,Z+"[]",X)));else if(typeof Y==="object")await Promise.all(Object.entries(Y).map(([X,Q])=>L1($,`${Z}[${X}]`,Q)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${Y} instead`)};async function WQ($){const{response:Z}=$;if($.options.stream)return FZ("response",Z.status,Z.url,Z.headers,Z.body),M0.fromSSEResponse(Z,$.controller);if(Z.status===204)return null;if($.options.__binaryResponse)return Z;if(Z.headers.get("content-type")?.includes("application/json")){const Q=await Z.json();return FZ("response",Z.status,Z.url,Z.headers,Q),Q}const X=await Z.text();return FZ("response",Z.status,Z.url,Z.headers,X),X}var W9=function(){if(typeof navigator==="undefined"||!navigator)return null;const $=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:Z,pattern:Y}of $){const X=Y.exec(navigator.userAgent);if(X){const Q=X[1]||0,W=X[2]||0,J=X[3]||0;return{browser:Z,version:`${Q}.${W}.${J}`}}}return null};function KQ($){if(!$)return!0;for(let Z in $)return!1;return!0}function G9($,Z){return Object.prototype.hasOwnProperty.call($,Z)}function FZ($,...Z){if(typeof process!=="undefined"&&process.env.DEBUG==="true")console.log(`OpenAI:DEBUG:${$}`,...Z)}var $9=function($,Z,Y,X,Q){if(X==="m")throw new TypeError("Private method is not writable");if(X==="a"&&!Q)throw new TypeError("Private accessor was defined without a setter");if(typeof Z==="function"?$!==Z||!Q:!Z.has($))throw new TypeError("Cannot write private member to an object whose class did not declare it");return X==="a"?Q.call($,Y):Q?Q.value=Y:Z.set($,Y),Y},Z9=function($,Z,Y,X){if(Y==="a"&&!X)throw new TypeError("Private accessor was defined without a getter");if(typeof Z==="function"?$!==Z||!X:!Z.has($))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Y==="m"?X:Y==="a"?X.call($):X?X.value:Z.get($)},GY;class wY extends Promise{constructor($,Z=WQ){super((Y)=>{Y(null)});this.responsePromise=$,this.parseResponse=Z}_thenUnwrap($){return new wY(this.responsePromise,async(Z)=>$(await this.parseResponse(Z)))}asResponse(){return this.responsePromise.then(($)=>$.response)}async withResponse(){const[$,Z]=await Promise.all([this.parse(),this.asResponse()]);return{data:$,response:Z}}parse(){if(!this.parsedPromise)this.parsedPromise=this.responsePromise.then(this.parseResponse);return this.parsedPromise}then($,Z){return this.parse().then($,Z)}catch($){return this.parse().catch($)}finally($){return this.parse().finally($)}}class j1{constructor({baseURL:$,maxRetries:Z=2,timeout:Y=600000,httpAgent:X,fetch:Q}){this.baseURL=$,this.maxRetries=B1("maxRetries",Z),this.timeout=B1("timeout",Y),this.httpAgent=X,this.fetch=Q??J1}authHeaders($){return{}}defaultHeaders($){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...J9(),...this.authHeaders($)}}validateHeaders($,Z){}defaultIdempotencyKey(){return`stainless-node-retry-${w9()}`}get($,Z){return this.methodRequest("get",$,Z)}post($,Z){return this.methodRequest("post",$,Z)}patch($,Z){return this.methodRequest("patch",$,Z)}put($,Z){return this.methodRequest("put",$,Z)}delete($,Z){return this.methodRequest("delete",$,Z)}methodRequest($,Z,Y){return this.request(Promise.resolve(Y).then((X)=>({method:$,path:Z,...X})))}getAPIList($,Z,Y){return this.requestAPIList(Z,{method:"get",path:$,...Y})}calculateContentLength($){if(typeof $==="string"){if(typeof Buffer!=="undefined")return Buffer.byteLength($,"utf8").toString();if(typeof TextEncoder!=="undefined")return(new TextEncoder()).encode($).length.toString()}return null}buildRequest($){const{method:Z,path:Y,query:X,headers:Q={}}=$,W=F1($.body)?$.body.body:$.body?JSON.stringify($.body,null,2):null,J=this.calculateContentLength(W),K=this.buildURL(Y,X);if("timeout"in $)B1("timeout",$.timeout);const z=$.timeout??this.timeout,w=$.httpAgent??this.httpAgent??G1(K),G=z+1000;if(typeof w?.options?.timeout==="number"&&G>(w.options.timeout??0))w.options.timeout=G;if(this.idempotencyHeader&&Z!=="get"){if(!$.idempotencyKey)$.idempotencyKey=this.defaultIdempotencyKey();Q[this.idempotencyHeader]=$.idempotencyKey}const V={...J&&{"Content-Length":J},...this.defaultHeaders($),...Q};if(F1($.body)&&i0!=="node")delete V["Content-Type"];Object.keys(V).forEach((H)=>V[H]===null&&delete V[H]);const N={method:Z,...W&&{body:W},headers:V,...w&&{agent:w},signal:$.signal??null};return this.validateHeaders(V,Q),{req:N,url:K,timeout:z}}async prepareRequest($,{url:Z,options:Y}){}parseHeaders($){return!$?{}:(Symbol.iterator in $)?Object.fromEntries(Array.from($).map((Z)=>[...Z])):{...$}}makeStatusError($,Z,Y,X){return y.generate($,Z,Y,X)}request($,Z=null){return new wY(this.makeRequest($,Z))}async makeRequest($,Z){const Y=await $;if(Z==null)Z=Y.maxRetries??this.maxRetries;const{req:X,url:Q,timeout:W}=this.buildRequest(Y);if(await this.prepareRequest(X,{url:Q,options:Y}),FZ("request",Q,Y,X.headers),Y.signal?.aborted)throw new Y0;const J=new AbortController,K=await this.fetchWithTimeout(Q,X,W,J).catch(VY);if(K instanceof Error){if(Y.signal?.aborted)throw new Y0;if(Z)return this.retryRequest(Y,Z);if(K.name==="AbortError")throw new s0;throw new a0({cause:K})}const z=Y9(K.headers);if(!K.ok){if(Z&&this.shouldRetry(K))return this.retryRequest(Y,Z,z);const w=await K.text().catch((H)=>VY(H).message),G=K9(w),V=G?void 0:w;throw FZ("response",K.status,Q,z,V),this.makeStatusError(K.status,G,V,z)}return{response:K,options:Y,controller:J}}requestAPIList($,Z){const Y=this.makeRequest(Z,null);return new JQ(this,Y,$)}buildURL($,Z){const Y=V9($)?new URL($):new URL(this.baseURL+(this.baseURL.endsWith("/")&&$.startsWith("/")?$.slice(1):$)),X=this.defaultQuery();if(!KQ(X))Z={...X,...Z};if(Z)Y.search=this.stringifyQuery(Z);return Y.toString()}stringifyQuery($){return Object.entries($).filter(([Z,Y])=>typeof Y!=="undefined").map(([Z,Y])=>{if(typeof Y==="string"||typeof Y==="number"||typeof Y==="boolean")return`${encodeURIComponent(Z)}=${encodeURIComponent(Y)}`;if(Y===null)return`${encodeURIComponent(Z)}=`;throw new D(`Cannot stringify type ${typeof Y}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout($,Z,Y,X){const{signal:Q,...W}=Z||{};if(Q)Q.addEventListener("abort",()=>X.abort());const J=setTimeout(()=>X.abort(),Y);return this.getRequestClient().fetch.call(void 0,$,{signal:X.signal,...W}).finally(()=>{clearTimeout(J)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry($){const Z=$.headers.get("x-should-retry");if(Z==="true")return!0;if(Z==="false")return!1;if($.status===408)return!0;if($.status===409)return!0;if($.status===429)return!0;if($.status>=500)return!0;return!1}async retryRequest($,Z,Y){let X;const Q=Y?.["retry-after"];if(Q){const W=parseInt(Q);if(!Number.isNaN(W))X=W*1000;else X=Date.parse(Q)-Date.now()}if(!X||!Number.isInteger(X)||X<=0||X>60000){const W=$.maxRetries??this.maxRetries;X=this.calculateDefaultRetryTimeoutMillis(Z,W)}return await U1(X),this.makeRequest($,Z-1)}calculateDefaultRetryTimeoutMillis($,Z){const Q=Z-$,W=Math.min(0.5*Math.pow(2,Q),8),J=1-Math.random()*0.25;return W*J*1000}getUserAgent(){return`${this.constructor.name}/JS ${l0}`}}class NY{constructor($,Z,Y,X){GY.set(this,void 0),$9(this,GY,$,"f"),this.options=X,this.response=Z,this.body=Y}hasNextPage(){if(!this.getPaginatedItems().length)return!1;return this.nextPageInfo()!=null}async getNextPage(){const $=this.nextPageInfo();if(!$)throw new D("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const Z={...this.options};if("params"in $)Z.query={...Z.query,...$.params};else if("url"in $){const Y=[...Object.entries(Z.query||{}),...$.url.searchParams.entries()];for(let[X,Q]of Y)$.url.searchParams.set(X,Q);Z.query=void 0,Z.path=$.url.toString()}return await Z9(this,GY,"f").requestAPIList(this.constructor,Z)}async*iterPages(){let $=this;yield $;while($.hasNextPage())$=await $.getNextPage(),yield $}async*[(GY=new WeakMap,Symbol.asyncIterator)](){for await(let $ of this.iterPages())for(let Z of $.getPaginatedItems())yield Z}}class JQ extends wY{constructor($,Z,Y){super(Z,async(X)=>new Y($,X.response,await WQ(X),X.options))}async*[Symbol.asyncIterator](){const $=await this;for await(let Z of $)yield Z}}var Y9=($)=>{return new Proxy(Object.fromEntries($.entries()),{get(Z,Y){const X=Y.toString();return Z[X.toLowerCase()]||Z[X]}})},X9={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryResponse:!0},x=($)=>{return typeof $==="object"&&$!==null&&!KQ($)&&Object.keys($).every((Z)=>G9(X9,Z))},Q9=()=>{if(typeof Deno!=="undefined"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":l0,"X-Stainless-OS":XQ(Deno.build.os),"X-Stainless-Arch":YQ(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":Deno.version};if(typeof EdgeRuntime!=="undefined")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":l0,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process!=="undefined"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":l0,"X-Stainless-OS":XQ(process.platform),"X-Stainless-Arch":YQ(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const $=W9();if($)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":l0,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${$.browser}`,"X-Stainless-Runtime-Version":$.version};return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":l0,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}},YQ=($)=>{if($==="x32")return"x32";if($==="x86_64"||$==="x64")return"x64";if($==="arm")return"arm";if($==="aarch64"||$==="arm64")return"arm64";if($)return`other:${$}`;return"unknown"},XQ=($)=>{if($=$.toLowerCase(),$.includes("ios"))return"iOS";if($==="android")return"Android";if($==="darwin")return"MacOS";if($==="win32")return"Windows";if($==="freebsd")return"FreeBSD";if($==="openbsd")return"OpenBSD";if($==="linux")return"Linux";if($)return`Other:${$}`;return"Unknown"},QQ,J9=()=>{return QQ??(QQ=Q9())},K9=($)=>{try{return JSON.parse($)}catch(Z){return}},z9=new RegExp("^(?:[a-z]+:)?//","i"),V9=($)=>{return z9.test($)},U1=($)=>new Promise((Z)=>setTimeout(Z,$)),B1=($,Z)=>{if(typeof Z!=="number"||!Number.isInteger(Z))throw new D(`${$} must be an integer`);if(Z<0)throw new D(`${$} must be a positive integer`);return Z},VY=($)=>{if($ instanceof Error)return $;return new Error($)};var T1=($)=>{if(typeof process!=="undefined")return process.env?.[$]??void 0;if(typeof Deno!=="undefined")return Deno.env?.get?.($);return};var w9=()=>{return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,($)=>{const Z=Math.random()*16|0;return($==="x"?Z:Z&3|8).toString(16)})},zQ=()=>{return typeof window!=="undefined"&&typeof window.document!=="undefined"&&typeof navigator!=="undefined"};class O0 extends NY{constructor($,Z,Y,X){super($,Z,Y,X);this.data=Y.data,this.object=Y.object}getPaginatedItems(){return this.data}nextPageParams(){return null}nextPageInfo(){return null}}class g extends NY{constructor($,Z,Y,X){super($,Z,Y,X);this.data=Y.data}getPaginatedItems(){return this.data}nextPageParams(){const $=this.nextPageInfo();if(!$)return null;if("params"in $)return $.params;const Z=Object.fromEntries($.url.searchParams);if(!Object.keys(Z).length)return null;return Z}nextPageInfo(){if(!this.data?.length)return null;const $=this.data[this.data.length-1]?.id;if(!$)return null;return{params:{after:$}}}}class U{constructor($){this._client=$}}class E$ extends U{create($,Z){return this._client.post("/chat/completions",{body:$,...Z,stream:$.stream??!1})}}(function($){})(E$||(E$={}));class o0 extends U{constructor(){super(...arguments);this.completions=new E$(this._client)}}(function($){$.Completions=E$})(o0||(o0={}));class k$ extends U{create($,Z){return this._client.post("/audio/speech",{body:$,...Z,__binaryResponse:!0})}}(function($){})(k$||(k$={}));class S$ extends U{create($,Z){return this._client.post("/audio/transcriptions",L0({body:$,...Z}))}}(function($){})(S$||(S$={}));class I$ extends U{create($,Z){return this._client.post("/audio/translations",L0({body:$,...Z}))}}(function($){})(I$||(I$={}));class n0 extends U{constructor(){super(...arguments);this.transcriptions=new S$(this._client),this.translations=new I$(this._client),this.speech=new k$(this._client)}}(function($){$.Transcriptions=S$,$.Translations=I$,$.Speech=k$})(n0||(n0={}));class f$ extends U{create($,Z,Y){return this._client.post(`/assistants/${$}/files`,{body:Z,...Y,headers:{"OpenAI-Beta":"assistants=v1",...Y?.headers}})}retrieve($,Z,Y){return this._client.get(`/assistants/${$}/files/${Z}`,{...Y,headers:{"OpenAI-Beta":"assistants=v1",...Y?.headers}})}list($,Z={},Y){if(x(Z))return this.list($,{},Z);return this._client.getAPIList(`/assistants/${$}/files`,C$,{query:Z,...Y,headers:{"OpenAI-Beta":"assistants=v1",...Y?.headers}})}del($,Z,Y){return this._client.delete(`/assistants/${$}/files/${Z}`,{...Y,headers:{"OpenAI-Beta":"assistants=v1",...Y?.headers}})}}class C$ extends g{}(function($){$.AssistantFilesPage=C$})(f$||(f$={}));class _$ extends U{constructor(){super(...arguments);this.files=new f$(this._client)}create($,Z){return this._client.post("/assistants",{body:$,...Z,headers:{"OpenAI-Beta":"assistants=v1",...Z?.headers}})}retrieve($,Z){return this._client.get(`/assistants/${$}`,{...Z,headers:{"OpenAI-Beta":"assistants=v1",...Z?.headers}})}update($,Z,Y){return this._client.post(`/assistants/${$}`,{body:Z,...Y,headers:{"OpenAI-Beta":"assistants=v1",...Y?.headers}})}list($={},Z){if(x($))return this.list({},$);return this._client.getAPIList("/assistants",y$,{query:$,...Z,headers:{"OpenAI-Beta":"assistants=v1",...Z?.headers}})}del($,Z){return this._client.delete(`/assistants/${$}`,{...Z,headers:{"OpenAI-Beta":"assistants=v1",...Z?.headers}})}}class y$ extends g{}(function($){$.AssistantsPage=y$,$.Files=f$,$.AssistantFilesPage=C$})(_$||(_$={}));function R1($){return typeof $.parse==="function"}var t0=($)=>{return $?.role==="assistant"},D1=($)=>{return $?.role==="function"},wQ=($)=>{return $?.role==="tool"};var z0=function($,Z,Y,X,Q){if(X==="m")throw new TypeError("Private method is not writable");if(X==="a"&&!Q)throw new TypeError("Private accessor was defined without a setter");if(typeof Z==="function"?$!==Z||!Q:!Z.has($))throw new TypeError("Cannot write private member to an object whose class did not declare it");return X==="a"?Q.call($,Y):Q?Q.value=Y:Z.set($,Y),Y},P=function($,Z,Y,X){if(Y==="a"&&!X)throw new TypeError("Private accessor was defined without a getter");if(typeof Z==="function"?$!==Z||!X:!Z.has($))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Y==="m"?X:Y==="a"?X.call($):X?X.value:Z.get($)},c,MY,LY,BZ,jZ,HY,UZ,A0,TZ,FY,BY,x$,P1,O1,A1,q1,E1,k1,MQ,S1,NQ=10;class RZ{constructor(){c.add(this),this.controller=new AbortController,MY.set(this,void 0),LY.set(this,()=>{}),BZ.set(this,()=>{}),jZ.set(this,void 0),HY.set(this,()=>{}),UZ.set(this,()=>{}),A0.set(this,{}),this._chatCompletions=[],this.messages=[],TZ.set(this,!1),FY.set(this,!1),BY.set(this,!1),x$.set(this,!1),k1.set(this,($)=>{if(z0(this,FY,!0,"f"),$ instanceof Error&&$.name==="AbortError")$=new Y0;if($ instanceof Y0)return z0(this,BY,!0,"f"),this._emit("abort",$);if($ instanceof D)return this._emit("error",$);if($ instanceof Error){const Z=new D($.message);return Z.cause=$,this._emit("error",Z)}return this._emit("error",new D(String($)))}),z0(this,MY,new Promise(($,Z)=>{z0(this,LY,$,"f"),z0(this,BZ,Z,"f")}),"f"),z0(this,jZ,new Promise(($,Z)=>{z0(this,HY,$,"f"),z0(this,UZ,Z,"f")}),"f"),P(this,MY,"f").catch(()=>{}),P(this,jZ,"f").catch(()=>{})}_run($){setTimeout(()=>{$().then(()=>{this._emitFinal(),this._emit("end")},P(this,k1,"f"))},0)}_addChatCompletion($){this._chatCompletions.push($),this._emit("chatCompletion",$);const Z=$.choices[0]?.message;if(Z)this._addMessage(Z);return $}_addMessage($,Z=!0){if(this.messages.push($),Z){if(this._emit("message",$),(D1($)||wQ($))&&$.content)this._emit("functionCallResult",$.content);else if(t0($)&&$.function_call)this._emit("functionCall",$.function_call);else if(t0($)&&$.tool_calls){for(let Y of $.tool_calls)if(Y.type==="function")this._emit("functionCall",Y.function)}}}_connected(){if(this.ended)return;P(this,LY,"f").call(this),this._emit("connect")}get ended(){return P(this,TZ,"f")}get errored(){return P(this,FY,"f")}get aborted(){return P(this,BY,"f")}abort(){this.controller.abort()}on($,Z){return(P(this,A0,"f")[$]||(P(this,A0,"f")[$]=[])).push({listener:Z}),this}off($,Z){const Y=P(this,A0,"f")[$];if(!Y)return this;const X=Y.findIndex((Q)=>Q.listener===Z);if(X>=0)Y.splice(X,1);return this}once($,Z){return(P(this,A0,"f")[$]||(P(this,A0,"f")[$]=[])).push({listener:Z,once:!0}),this}emitted($){return new Promise((Z,Y)=>{if(z0(this,x$,!0,"f"),$!=="error")this.once("error",Y);this.once($,Z)})}async done(){z0(this,x$,!0,"f"),await P(this,jZ,"f")}async finalChatCompletion(){await this.done();const $=this._chatCompletions[this._chatCompletions.length-1];if(!$)throw new D("stream ended without producing a ChatCompletion");return $}async finalContent(){return await this.done(),P(this,c,"m",P1).call(this)}async finalMessage(){return await this.done(),P(this,c,"m",O1).call(this)}async finalFunctionCall(){return await this.done(),P(this,c,"m",A1).call(this)}async finalFunctionCallResult(){return await this.done(),P(this,c,"m",q1).call(this)}async totalUsage(){return await this.done(),P(this,c,"m",E1).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emit($,...Z){if(P(this,TZ,"f"))return;if($==="end")z0(this,TZ,!0,"f"),P(this,HY,"f").call(this);const Y=P(this,A0,"f")[$];if(Y)P(this,A0,"f")[$]=Y.filter((X)=>!X.once),Y.forEach(({listener:X})=>X(...Z));if($==="abort"){const X=Z[0];if(!P(this,x$,"f")&&!Y?.length)Promise.reject(X);P(this,BZ,"f").call(this,X),P(this,UZ,"f").call(this,X),this._emit("end");return}if($==="error"){const X=Z[0];if(!P(this,x$,"f")&&!Y?.length)Promise.reject(X);P(this,BZ,"f").call(this,X),P(this,UZ,"f").call(this,X),this._emit("end")}}_emitFinal(){const $=this._chatCompletions[this._chatCompletions.length-1];if($)this._emit("finalChatCompletion",$);const Z=this.messages[this.messages.length-1];if(Z)this._emit("finalMessage",Z);const Y=P(this,c,"m",P1).call(this);if(Y)this._emit("finalContent",Y);const X=P(this,c,"m",A1).call(this);if(X)this._emit("finalFunctionCall",X);const Q=P(this,c,"m",q1).call(this);if(Q!=null)this._emit("finalFunctionCallResult",Q);if(this._chatCompletions.some((W)=>W.usage))this._emit("totalUsage",P(this,c,"m",E1).call(this))}async _createChatCompletion($,Z,Y){const X=Y?.signal;if(X){if(X.aborted)this.controller.abort();X.addEventListener("abort",()=>this.controller.abort())}P(this,c,"m",MQ).call(this,Z);const Q=await $.create({...Z,stream:!1},{...Y,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Q)}async _runChatCompletion($,Z,Y){for(let X of Z.messages)this._addMessage(X,!1);return await this._createChatCompletion($,Z,Y)}async _runFunctions($,Z,Y){const{function_call:Q="auto",stream:W,...J}=Z,K=typeof Q!=="string"&&Q?.name,{maxChatCompletions:z=NQ}=Y||{},w={};for(let V of Z.functions)w[V.name||V.function.name]=V;const G=Z.functions.map((V)=>({name:V.name||V.function.name,parameters:V.parameters,description:V.description}));for(let V of Z.messages)this._addMessage(V,!1);for(let V=0;V<z;++V){const H=(await this._createChatCompletion($,{...J,function_call:Q,functions:G,messages:[...this.messages]},Y)).choices[0]?.message;if(!H)throw new D("missing message in ChatCompletion response");if(!H.function_call)return;const{name:F,arguments:B}=H.function_call,T=w[F];if(!T){const q=`Invalid function_call: ${JSON.stringify(F)}. Available options are: ${G.map((v)=>JSON.stringify(v.name)).join(", ")}. Please try again`;this._addMessage({role:"function",name:F,content:q});continue}else if(K&&K!==F){const q=`Invalid function_call: ${JSON.stringify(F)}. ${JSON.stringify(K)} requested. Please try again`;this._addMessage({role:"function",name:F,content:q});continue}let A;try{A=R1(T)?await T.parse(B):B}catch(q){this._addMessage({role:"function",name:F,content:q instanceof Error?q.message:String(q)});continue}const S=await T.function(A,this),f=P(this,c,"m",S1).call(this,S);if(this._addMessage({role:"function",name:F,content:f}),K)return}}async _runTools($,Z,Y){const{tool_choice:Q="auto",stream:W,...J}=Z,K=typeof Q!=="string"&&Q?.function?.name,{maxChatCompletions:z=NQ}=Y||{},w={};for(let V of Z.tools)if(V.type==="function")w[V.function.name||V.function.function.name]=V.function;const G="tools"in Z?Z.tools.map((V)=>V.type==="function"?{type:"function",function:{name:V.function.name||V.function.function.name,parameters:V.function.parameters,description:V.function.description}}:V):void 0;for(let V of Z.messages)this._addMessage(V,!1);for(let V=0;V<z;++V){const H=(await this._createChatCompletion($,{...J,tool_choice:Q,tools:G,messages:[...this.messages]},Y)).choices[0]?.message;if(!H)throw new D("missing message in ChatCompletion response");if(!H.tool_calls)return;for(let F of H.tool_calls){if(F.type!=="function")continue;const B=F.id,{name:T,arguments:A}=F.function,S=w[T];if(!S){const E=`Invalid tool_call: ${JSON.stringify(T)}. Available options are: ${G.map((o)=>JSON.stringify(o.function.name)).join(", ")}. Please try again`;this._addMessage({role:"tool",tool_call_id:B,content:E});continue}else if(K&&K!==T){const E=`Invalid tool_call: ${JSON.stringify(T)}. ${JSON.stringify(K)} requested. Please try again`;this._addMessage({role:"tool",tool_call_id:B,content:E});continue}let f;try{f=R1(S)?await S.parse(A):A}catch(E){const o=E instanceof Error?E.message:String(E);this._addMessage({role:"tool",tool_call_id:B,content:o});continue}const q=await S.function(f,this),v=P(this,c,"m",S1).call(this,q);if(this._addMessage({role:"tool",tool_call_id:B,content:v}),K)return}}}}MY=new WeakMap,LY=new WeakMap,BZ=new WeakMap,jZ=new WeakMap,HY=new WeakMap,UZ=new WeakMap,A0=new WeakMap,TZ=new WeakMap,FY=new WeakMap,BY=new WeakMap,x$=new WeakMap,k1=new WeakMap,c=new WeakSet,P1=function $(){return P(this,c,"m",O1).call(this).content},O1=function $(){let Z=this.messages.length;while(Z-- >0){const Y=this.messages[Z];if(t0(Y))return Y}throw new D("stream ended without producing a ChatCompletionMessage with role=assistant")},A1=function $(){for(let Z=this.messages.length-1;Z>=0;Z--){const Y=this.messages[Z];if(t0(Y)&&Y?.function_call)return Y.function_call}return},q1=function $(){for(let Z=this.messages.length-1;Z>=0;Z--){const Y=this.messages[Z];if(D1(Y)&&Y.content!=null)return Y.content}return},E1=function $(){const Z={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(let{usage:Y}of this._chatCompletions)if(Y)Z.completion_tokens+=Y.completion_tokens,Z.prompt_tokens+=Y.prompt_tokens,Z.total_tokens+=Y.total_tokens;return Z},MQ=function $(Z){if(Z.n!=null&&Z.n>1)throw new D("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},S1=function $(Z){return typeof Z==="string"?Z:Z===void 0?"undefined":JSON.stringify(Z)};class b$ extends RZ{static runFunctions($,Z,Y){const X=new b$;return X._run(()=>X._runFunctions($,Z,Y)),X}static runTools($,Z,Y){const X=new b$;return X._run(()=>X._runTools($,Z,Y)),X}_addMessage($){if(super._addMessage($),t0($)&&$.content)this._emit("content",$.content)}}var j9=function($){const{id:Z,choices:Y,created:X,model:Q}=$;return{id:Z,choices:Y.map(({message:W,finish_reason:J,index:K})=>{if(!J)throw new D(`missing finish_reason for choice ${K}`);const{content:z=null,function_call:w,tool_calls:G}=W,V=W.role;if(!V)throw new D(`missing role for choice ${K}`);if(w){const{arguments:N,name:H}=w;if(N==null)throw new D(`missing function_call.arguments for choice ${K}`);if(!H)throw new D(`missing function_call.name for choice ${K}`);return{message:{content:z,function_call:{arguments:N,name:H},role:V},finish_reason:J,index:K}}if(G)return{index:K,finish_reason:J,message:{role:V,content:z,tool_calls:G.map((N,H)=>{const{function:F,type:B,id:T}=N,{arguments:A,name:S}=F||{};if(T==null)throw new D(`missing choices[${K}].tool_calls[${H}].id\n${UY($)}`);if(B==null)throw new D(`missing choices[${K}].tool_calls[${H}].type\n${UY($)}`);if(S==null)throw new D(`missing choices[${K}].tool_calls[${H}].function.name\n${UY($)}`);if(A==null)throw new D(`missing choices[${K}].tool_calls[${H}].function.arguments\n${UY($)}`);return{id:T,type:B,function:{name:S,arguments:A}}})}};return{message:{content:z,role:V},finish_reason:J,index:K}}),created:X,model:Q,object:"chat.completion"}},UY=function($){return JSON.stringify($)},V0=function($,Z,Y,X){if(Y==="a"&&!X)throw new TypeError("Private accessor was defined without a getter");if(typeof Z==="function"?$!==Z||!X:!Z.has($))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Y==="m"?X:Y==="a"?X.call($):X?X.value:Z.get($)},I1=function($,Z,Y,X,Q){if(X==="m")throw new TypeError("Private method is not writable");if(X==="a"&&!Q)throw new TypeError("Private accessor was defined without a setter");if(typeof Z==="function"?$!==Z||!Q:!Z.has($))throw new TypeError("Cannot write private member to an object whose class did not declare it");return X==="a"?Q.call($,Y):Q?Q.value=Y:Z.set($,Y),Y},H0,I0,f1,C1,jY,LQ;class e0 extends RZ{constructor(){super(...arguments);H0.add(this),I0.set(this,void 0)}get currentChatCompletionSnapshot(){return V0(this,I0,"f")}static fromReadableStream($){const Z=new e0;return Z._run(()=>Z._fromReadableStream($)),Z}static createChatCompletion($,Z,Y){const X=new e0;return X._run(()=>X._runChatCompletion($,{...Z,stream:!0},{...Y,headers:{...Y?.headers,"X-Stainless-Helper-Method":"stream"}})),X}async _createChatCompletion($,Z,Y){const X=Y?.signal;if(X){if(X.aborted)this.controller.abort();X.addEventListener("abort",()=>this.controller.abort())}V0(this,H0,"m",f1).call(this);const Q=await $.create({...Z,stream:!0},{...Y,signal:this.controller.signal});this._connected();for await(let W of Q)V0(this,H0,"m",C1).call(this,W);if(Q.controller.signal?.aborted)throw new Y0;return this._addChatCompletion(V0(this,H0,"m",jY).call(this))}async _fromReadableStream($,Z){const Y=Z?.signal;if(Y){if(Y.aborted)this.controller.abort();Y.addEventListener("abort",()=>this.controller.abort())}V0(this,H0,"m",f1).call(this),this._connected();const X=M0.fromReadableStream($,this.controller);let Q;for await(let W of X){if(Q&&Q!==W.id)this._addChatCompletion(V0(this,H0,"m",jY).call(this));V0(this,H0,"m",C1).call(this,W),Q=W.id}if(X.controller.signal?.aborted)throw new Y0;return this._addChatCompletion(V0(this,H0,"m",jY).call(this))}[(I0=new WeakMap,H0=new WeakSet,f1=function $(){if(this.ended)return;I1(this,I0,void 0,"f")},C1=function $(Z){if(this.ended)return;const Y=V0(this,H0,"m",LQ).call(this,Z);this._emit("chunk",Z,Y);const X=Z.choices[0]?.delta?.content,Q=Y.choices[0]?.message;if(X!=null&&Q?.role==="assistant"&&Q?.content)this._emit("content",X,Q.content)},jY=function $(){if(this.ended)throw new D("stream has ended, this shouldn't happen");const Z=V0(this,I0,"f");if(!Z)throw new D("request ended without sending any chunks");return I1(this,I0,void 0,"f"),j9(Z)},LQ=function $(Z){var Y,X;let Q=V0(this,I0,"f");const{choices:W,...J}=Z;if(!Q)Q=I1(this,I0,{...J,choices:[]},"f");else Object.assign(Q,J);for(let{delta:K,finish_reason:z,index:w,...G}of Z.choices){let V=Q.choices[w];if(!V){Q.choices[w]={finish_reason:z,index:w,message:K,...G};continue}if(z)V.finish_reason=z;if(Object.assign(V,G),!K)continue;const{content:N,function_call:H,role:F,tool_calls:B}=K;if(N)V.message.content=(V.message.content||"")+N;if(F)V.message.role=F;if(H)if(!V.message.function_call)V.message.function_call=H;else{if(H.name)V.message.function_call.name=H.name;if(H.arguments)(Y=V.message.function_call).arguments??(Y.arguments=""),V.message.function_call.arguments+=H.arguments}if(B){if(!V.message.tool_calls)V.message.tool_calls=[];for(let{index:T,id:A,type:S,function:f}of B){const q=(X=V.message.tool_calls)[T]??(X[T]={});if(A)q.id=A;if(S)q.type=S;if(f)q.function??(q.function={arguments:""});if(f?.name)q.function.name=f.name;if(f?.arguments)q.function.arguments+=f.arguments}}}return Q},Symbol.asyncIterator)](){const $=[],Z=[];let Y=!1;return this.on("chunk",(X)=>{const Q=Z.shift();if(Q)Q(X);else $.push(X)}),this.on("end",()=>{Y=!0;for(let X of Z)X(void 0);Z.length=0}),{next:async()=>{if(!$.length){if(Y)return{value:void 0,done:!0};return new Promise((Q)=>Z.push(Q)).then((Q)=>Q?{value:Q,done:!1}:{value:void 0,done:!0})}return{value:$.shift(),done:!1}}}}toReadableStream(){return new M0(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}class $$ extends e0{static fromReadableStream($){const Z=new $$;return Z._run(()=>Z._fromReadableStream($)),Z}static runFunctions($,Z,Y){const X=new $$;return X._run(()=>X._runFunctions($,Z,{...Y,headers:{...Y?.headers,"X-Stainless-Helper-Method":"runFunctions"}})),X}static runTools($,Z,Y){const X=new $$;return X._run(()=>X._runTools($,Z,{...Y,headers:{...Y?.headers,"X-Stainless-Helper-Method":"runTools"}})),X}}class TY extends U{runFunctions($,Z){if($.stream)return $$.runFunctions(this._client.chat.completions,$,Z);return b$.runFunctions(this._client.chat.completions,$,Z)}runTools($,Z){if($.stream)return $$.runTools(this._client.chat.completions,$,Z);return b$.runTools(this._client.chat.completions,$,Z)}stream($,Z){return e0.createChatCompletion(this._client.chat.completions,$,Z)}}class h$ extends U{constructor(){super(...arguments);this.completions=new TY(this._client)}}(function($){$.Completions=TY})(h$||(h$={}));class v$ extends U{retrieve($,Z,Y,X){return this._client.get(`/threads/${$}/messages/${Z}/files/${Y}`,{...X,headers:{"OpenAI-Beta":"assistants=v1",...X?.headers}})}list($,Z,Y={},X){if(x(Y))return this.list($,Z,{},Y);return this._client.getAPIList(`/threads/${$}/messages/${Z}/files`,g$,{query:Y,...X,headers:{"OpenAI-Beta":"assistants=v1",...X?.headers}})}}class g$ extends g{}(function($){$.MessageFilesPage=g$})(v$||(v$={}));class m$ extends U{constructor(){super(...arguments);this.files=new v$(this._client)}create($,Z,Y){return this._client.post(`/threads/${$}/messages`,{body:Z,...Y,headers:{"OpenAI-Beta":"assistants=v1",...Y?.headers}})}retrieve($,Z,Y){return this._client.get(`/threads/${$}/messages/${Z}`,{...Y,headers:{"OpenAI-Beta":"assistants=v1",...Y?.headers}})}update($,Z,Y,X){return this._client.post(`/threads/${$}/messages/${Z}`,{body:Y,...X,headers:{"OpenAI-Beta":"assistants=v1",...X?.headers}})}list($,Z={},Y){if(x(Z))return this.list($,{},Z);return this._client.getAPIList(`/threads/${$}/messages`,d$,{query:Z,...Y,headers:{"OpenAI-Beta":"assistants=v1",...Y?.headers}})}}class d$ extends g{}(function($){$.ThreadMessagesPage=d$,$.Files=v$,$.MessageFilesPage=g$})(m$||(m$={}));class u$ extends U{retrieve($,Z,Y,X){return this._client.get(`/threads/${$}/runs/${Z}/steps/${Y}`,{...X,headers:{"OpenAI-Beta":"assistants=v1",...X?.headers}})}list($,Z,Y={},X){if(x(Y))return this.list($,Z,{},Y);return this._client.getAPIList(`/threads/${$}/runs/${Z}/steps`,c$,{query:Y,...X,headers:{"OpenAI-Beta":"assistants=v1",...X?.headers}})}}class c$ extends g{}(function($){$.RunStepsPage=c$})(u$||(u$={}));class p$ extends U{constructor(){super(...arguments);this.steps=new u$(this._client)}create($,Z,Y){return this._client.post(`/threads/${$}/runs`,{body:Z,...Y,headers:{"OpenAI-Beta":"assistants=v1",...Y?.headers}})}retrieve($,Z,Y){return this._client.get(`/threads/${$}/runs/${Z}`,{...Y,headers:{"OpenAI-Beta":"assistants=v1",...Y?.headers}})}update($,Z,Y,X){return this._client.post(`/threads/${$}/runs/${Z}`,{body:Y,...X,headers:{"OpenAI-Beta":"assistants=v1",...X?.headers}})}list($,Z={},Y){if(x(Z))return this.list($,{},Z);return this._client.getAPIList(`/threads/${$}/runs`,l$,{query:Z,...Y,headers:{"OpenAI-Beta":"assistants=v1",...Y?.headers}})}cancel($,Z,Y){return this._client.post(`/threads/${$}/runs/${Z}/cancel`,{...Y,headers:{"OpenAI-Beta":"assistants=v1",...Y?.headers}})}submitToolOutputs($,Z,Y,X){return this._client.post(`/threads/${$}/runs/${Z}/submit_tool_outputs`,{body:Y,...X,headers:{"OpenAI-Beta":"assistants=v1",...X?.headers}})}}class l$ extends g{}(function($){$.RunsPage=l$,$.Steps=u$,$.RunStepsPage=c$})(p$||(p$={}));class i$ extends U{constructor(){super(...arguments);this.runs=new p$(this._client),this.messages=new m$(this._client)}create($={},Z){if(x($))return this.create({},$);return this._client.post("/threads",{body:$,...Z,headers:{"OpenAI-Beta":"assistants=v1",...Z?.headers}})}retrieve($,Z){return this._client.get(`/threads/${$}`,{...Z,headers:{"OpenAI-Beta":"assistants=v1",...Z?.headers}})}update($,Z,Y){return this._client.post(`/threads/${$}`,{body:Z,...Y,headers:{"OpenAI-Beta":"assistants=v1",...Y?.headers}})}del($,Z){return this._client.delete(`/threads/${$}`,{...Z,headers:{"OpenAI-Beta":"assistants=v1",...Z?.headers}})}createAndRun($,Z){return this._client.post("/threads/runs",{body:$,...Z,headers:{"OpenAI-Beta":"assistants=v1",...Z?.headers}})}}(function($){$.Runs=p$,$.RunsPage=l$,$.Messages=m$,$.ThreadMessagesPage=d$})(i$||(i$={}));class Z$ extends U{constructor(){super(...arguments);this.chat=new h$(this._client),this.assistants=new _$(this._client),this.threads=new i$(this._client)}}(function($){$.Chat=h$,$.Assistants=_$,$.AssistantsPage=y$,$.Threads=i$})(Z$||(Z$={}));class Y$ extends U{create($,Z){return this._client.post("/completions",{body:$,...Z,stream:$.stream??!1})}}(function($){})(Y$||(Y$={}));class X$ extends U{create($,Z){return this._client.post("/embeddings",{body:$,...Z})}}(function($){})(X$||(X$={}));class Q$ extends U{create($,Z){return this._client.post("/edits",{body:$,...Z})}}(function($){})(Q$||(Q$={}));class W$ extends U{create($,Z){return this._client.post("/files",L0({body:$,...Z}))}retrieve($,Z){return this._client.get(`/files/${$}`,Z)}list($={},Z){if(x($))return this.list({},$);return this._client.getAPIList("/files",J$,{query:$,...Z})}del($,Z){return this._client.delete(`/files/${$}`,Z)}content($,Z){return this._client.get(`/files/${$}/content`,{...Z,__binaryResponse:!0})}retrieveContent($,Z){return this._client.get(`/files/${$}/content`,{...Z,headers:{Accept:"application/json",...Z?.headers}})}async waitForProcessing($,{pollInterval:Z=5000,maxWait:Y=1800000}={}){const X=new Set(["processed","error","deleted"]),Q=Date.now();let W=await this.retrieve($);while(!W.status||!X.has(W.status))if(await U1(Z),W=await this.retrieve($),Date.now()-Q>Y)throw new s0({message:`Giving up on waiting for file ${$} to finish processing after ${Y} milliseconds.`});return W}}class J$ extends O0{}(function($){$.FileObjectsPage=J$})(W$||(W$={}));class K$ extends U{create($,Z){return this._client.post("/fine-tunes",{body:$,...Z})}retrieve($,Z){return this._client.get(`/fine-tunes/${$}`,Z)}list($){return this._client.getAPIList("/fine-tunes",z$,$)}cancel($,Z){return this._client.post(`/fine-tunes/${$}/cancel`,Z)}listEvents($,Z,Y){return this._client.get(`/fine-tunes/${$}/events`,{query:Z,timeout:86400000,...Y,stream:Z?.stream??!1})}}class z$ extends O0{}(function($){$.FineTunesPage=z$})(K$||(K$={}));class a$ extends U{create($,Z){return this._client.post("/fine_tuning/jobs",{body:$,...Z})}retrieve($,Z){return this._client.get(`/fine_tuning/jobs/${$}`,Z)}list($={},Z){if(x($))return this.list({},$);return this._client.getAPIList("/fine_tuning/jobs",s$,{query:$,...Z})}cancel($,Z){return this._client.post(`/fine_tuning/jobs/${$}/cancel`,Z)}listEvents($,Z={},Y){if(x(Z))return this.listEvents($,{},Z);return this._client.getAPIList(`/fine_tuning/jobs/${$}/events`,r$,{query:Z,...Y})}}class s$ extends g{}class r$ extends g{}(function($){$.FineTuningJobsPage=s$,$.FineTuningJobEventsPage=r$})(a$||(a$={}));class V$ extends U{constructor(){super(...arguments);this.jobs=new a$(this._client)}}(function($){$.Jobs=a$,$.FineTuningJobsPage=s$,$.FineTuningJobEventsPage=r$})(V$||(V$={}));class G$ extends U{createVariation($,Z){return this._client.post("/images/variations",L0({body:$,...Z}))}edit($,Z){return this._client.post("/images/edits",L0({body:$,...Z}))}generate($,Z){return this._client.post("/images/generations",{body:$,...Z})}}(function($){})(G$||(G$={}));class w$ extends U{retrieve($,Z){return this._client.get(`/models/${$}`,Z)}list($){return this._client.getAPIList("/models",N$,$)}del($,Z){return this._client.delete(`/models/${$}`,Z)}}class N$ extends O0{}(function($){$.ModelsPage=N$})(w$||(w$={}));class M$ extends U{create($,Z){return this._client.post("/moderations",{body:$,...Z})}}(function($){})(M$||(M$={}));var TQ;class b extends j1{constructor({apiKey:$=T1("OPENAI_API_KEY"),organization:Z=T1("OPENAI_ORG_ID")??null,...Y}={}){if($===void 0)throw new D("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const X={apiKey:$,organization:Z,...Y,baseURL:Y.baseURL??"https://api.openai.com/v1"};if(!X.dangerouslyAllowBrowser&&zQ())throw new D("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n");super({baseURL:X.baseURL,timeout:X.timeout??600000,httpAgent:X.httpAgent,maxRetries:X.maxRetries,fetch:X.fetch});this.completions=new Y$(this),this.chat=new o0(this),this.edits=new Q$(this),this.embeddings=new X$(this),this.files=new W$(this),this.images=new G$(this),this.audio=new n0(this),this.moderations=new M$(this),this.models=new w$(this),this.fineTuning=new V$(this),this.fineTunes=new K$(this),this.beta=new Z$(this),this._options=X,this.apiKey=$,this.organization=Z}defaultQuery(){return this._options.defaultQuery}defaultHeaders($){return{...super.defaultHeaders($),"OpenAI-Organization":this.organization,...this._options.defaultHeaders}}authHeaders($){return{Authorization:`Bearer ${this.apiKey}`}}}TQ=b;b.OpenAI=TQ;b.OpenAIError=D;b.APIError=y;b.APIConnectionError=a0;b.APIConnectionTimeoutError=s0;b.APIUserAbortError=Y0;b.NotFoundError=QY;b.ConflictError=WY;b.RateLimitError=KY;b.BadRequestError=ZY;b.AuthenticationError=YY;b.InternalServerError=zY;b.PermissionDeniedError=XY;b.UnprocessableEntityError=JY;(function($){$.toFile=H1,$.fileFromPath=$Y,$.Page=O0,$.CursorPage=g,$.Completions=Y$,$.Chat=o0,$.Edits=Q$,$.Embeddings=X$,$.Files=W$,$.FileObjectsPage=J$,$.Images=G$,$.Audio=n0,$.Moderations=M$,$.Models=w$,$.ModelsPage=N$,$.FineTuning=V$,$.FineTunes=K$,$.FineTunesPage=z$,$.Beta=Z$})(b||(b={}));var RQ=b;var DZ=function($){switch(DQ.call($)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return B0($,Error)}},_1=function($,Z){return DQ.call($)===`[object ${Z}]`};var F0=function($){return _1($,"String")},RY=function($){return $===null||typeof $!=="object"&&typeof $!=="function"},n=function($){return _1($,"Object")},y1=function($){return typeof Event!=="undefined"&&B0($,Event)},x1=function($){return typeof Element!=="undefined"&&B0($,Element)},PZ=function($){return _1($,"RegExp")},m=function($){return Boolean($&&$.then&&typeof $.then==="function")},b1=function($){return n($)&&"nativeEvent"in $&&"preventDefault"in $&&"stopPropagation"in $},OZ=function($){return typeof $==="number"&&$!==$},B0=function($,Z){try{return $ instanceof Z}catch(Y){return!1}},DY=function($){return!!(typeof $==="object"&&$!==null&&($.__isVue||$._isVue))},DQ=Object.prototype.toString;var j0=function($,Z=0){if(typeof $!=="string"||Z===0)return $;return $.length<=Z?$:`${$.slice(0,Z)}...`},AZ=function($,Z){let Y=$;const X=Y.length;if(X<=150)return Y;if(Z>X)Z=X;let Q=Math.max(Z-60,0);if(Q<5)Q=0;let W=Math.min(Q+140,X);if(W>X-5)W=X;if(W===X)Q=Math.max(W-140,0);if(Y=Y.slice(Q,W),Q>0)Y=`'{snip} ${Y}`;if(W<X)Y+=" {snip}";return Y};var PQ=function($,Z,Y=!1){if(!F0($))return!1;if(PZ(Z))return Z.test($);if(F0(Z))return Y?$===Z:$.includes(Z);return!1},U0=function($,Z=[],Y=!1){return Z.some((X)=>PQ($,X,Y))};var v1=function($,Z,Y=250,X,Q,W,J){if(!W.exception||!W.exception.values||!J||!B0(J.originalException,Error))return;const K=W.exception.values.length>0?W.exception.values[W.exception.values.length-1]:void 0;if(K)W.exception.values=q9(h1($,Z,Q,J.originalException,X,W.exception.values,K,0),Y)},h1=function($,Z,Y,X,Q,W,J,K){if(W.length>=Y+1)return W;let z=[...W];if(B0(X[Q],Error)){OQ(J,K);const w=$(Z,X[Q]),G=z.length;AQ(w,Q,G,K),z=h1($,Z,Y,X[Q],Q,[w,...z],w,G)}if(Array.isArray(X.errors))X.errors.forEach((w,G)=>{if(B0(w,Error)){OQ(J,K);const V=$(Z,w),N=z.length;AQ(V,`errors[${G}]`,N,K),z=h1($,Z,Y,w,Q,[V,...z],V,N)}});return z},OQ=function($,Z){$.mechanism=$.mechanism||{type:"generic",handled:!0},$.mechanism={...$.mechanism,is_exception_group:!0,exception_id:Z}},AQ=function($,Z,Y,X){$.mechanism=$.mechanism||{type:"generic",handled:!0},$.mechanism={...$.mechanism,type:"chained",source:Z,exception_id:Y,parent_id:X}},q9=function($,Z){return $.map((Y)=>{if(Y.value)Y.value=j0(Y.value,Z);return Y})};var PY=function($){return $&&$.Math==Math?$:void 0},qZ=function(){return O},EZ=function($,Z,Y){const X=Y||O,Q=X.__SENTRY__=X.__SENTRY__||{};return Q[$]||(Q[$]=Z())},O=typeof globalThis=="object"&&PY(globalThis)||typeof window=="object"&&PY(window)||typeof self=="object"&&PY(self)||typeof global=="object"&&PY(global)||function(){return this}()||{};var qQ=function($,Z={}){if(!$)return"<unknown>";try{let Y=$;const X=5,Q=[];let W=0,J=0;const K=" > ",z=K.length;let w;const G=Array.isArray(Z)?Z:Z.keyAttrs,V=!Array.isArray(Z)&&Z.maxStringLength||E9;while(Y&&W++<X){if(w=k9(Y,G),w==="html"||W>1&&J+Q.length*z+w.length>=V)break;Q.push(w),J+=w.length,Y=Y.parentNode}return Q.reverse().join(K)}catch(Y){return"<unknown>"}},k9=function($,Z){const Y=$,X=[];let Q,W,J,K,z;if(!Y||!Y.tagName)return"";X.push(Y.tagName.toLowerCase());const w=Z&&Z.length?Z.filter((V)=>Y.getAttribute(V)).map((V)=>[V,Y.getAttribute(V)]):null;if(w&&w.length)w.forEach((V)=>{X.push(`[${V[0]}="${V[1]}"]`)});else{if(Y.id)X.push(`#${Y.id}`);if(Q=Y.className,Q&&F0(Q)){W=Q.split(/\s+/);for(z=0;z<W.length;z++)X.push(`.${W[z]}`)}}const G=["aria-label","type","name","title","alt"];for(z=0;z<G.length;z++)if(J=G[z],K=Y.getAttribute(J),K)X.push(`[${J}="${K}"]`);return X.join("")};var Jz=qZ(),E9=80;var T0=typeof __SENTRY_DEBUG__==="undefined"||__SENTRY_DEBUG__;var p=function($){if(!("console"in O))return $();const Z=O.console,Y={},X=Object.keys(o$);X.forEach((Q)=>{const W=o$[Q];Y[Q]=Z[Q],Z[Q]=W});try{return $()}finally{X.forEach((Q)=>{Z[Q]=Y[Q]})}},I9=function(){let $=!1;const Z={enable:()=>{$=!0},disable:()=>{$=!1},isEnabled:()=>$};if(T0)kZ.forEach((Y)=>{Z[Y]=(...X)=>{if($)p(()=>{O.console[Y](`${S9}[${Y}]:`,...X)})}});else kZ.forEach((Y)=>{Z[Y]=()=>{return}});return Z},S9="Sentry Logger ",kZ=["debug","info","warn","error","log","assert","trace"],o$={},M=I9();var C9=function($){return $==="http"||$==="https"},f0=function($,Z=!1){const{host:Y,path:X,pass:Q,port:W,projectId:J,protocol:K,publicKey:z}=$;return`${K}://${z}${Z&&Q?`:${Q}`:""}`+`@${Y}${W?`:${W}`:""}/${X?`${X}/`:X}${J}`},EQ=function($){const Z=f9.exec($);if(!Z){p(()=>{console.error(`Invalid Sentry Dsn: ${$}`)});return}const[Y,X,Q="",W,J="",K]=Z.slice(1);let z="",w=K;const G=w.split("/");if(G.length>1)z=G.slice(0,-1).join("/"),w=G.pop();if(w){const V=w.match(/^\d+/);if(V)w=V[0]}return kQ({host:W,pass:Q,path:z,projectId:w,port:J,protocol:Y,publicKey:X})},kQ=function($){return{protocol:$.protocol,publicKey:$.publicKey||"",pass:$.pass||"",host:$.host,port:$.port||"",path:$.path||"",projectId:$.projectId}},_9=function($){if(!T0)return!0;const{port:Z,projectId:Y,protocol:X}=$;if(["protocol","publicKey","host","projectId"].find((J)=>{if(!$[J])return M.error(`Invalid Sentry Dsn: ${J} missing`),!0;return!1}))return!1;if(!Y.match(/^\d+$/))return M.error(`Invalid Sentry Dsn: Invalid projectId ${Y}`),!1;if(!C9(X))return M.error(`Invalid Sentry Dsn: Invalid protocol ${X}`),!1;if(Z&&isNaN(parseInt(Z,10)))return M.error(`Invalid Sentry Dsn: Invalid port ${Z}`),!1;return!0},OY=function($){const Z=typeof $==="string"?EQ($):kQ($);if(!Z||!_9(Z))return;return Z},f9=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;class l extends Error{constructor($,Z="warn"){super($);this.message=$,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=Z}}var C=function($,Z,Y){if(!(Z in $))return;const X=$[Z],Q=Y(X);if(typeof Q==="function")fQ(Q,X);$[Z]=Q},n$=function($,Z,Y){try{Object.defineProperty($,Z,{value:Y,writable:!0,configurable:!0})}catch(X){T0&&M.log(`Failed to add non-enumerable property "${Z}" to object`,$)}},fQ=function($,Z){try{const Y=Z.prototype||{};$.prototype=Z.prototype=Y,n$($,"__sentry_original__",Z)}catch(Y){}},m1=function($){return $.__sentry_original__},d1=function($){return Object.keys($).map((Z)=>`${encodeURIComponent(Z)}=${encodeURIComponent($[Z])}`).join("&")},AY=function($){if(DZ($))return{message:$.message,name:$.name,stack:$.stack,...IQ($)};else if(y1($)){const Z={type:$.type,target:SQ($.target),currentTarget:SQ($.currentTarget),...IQ($)};if(typeof CustomEvent!=="undefined"&&B0($,CustomEvent))Z.detail=$.detail;return Z}else return $},SQ=function($){try{return x1($)?qQ($):Object.prototype.toString.call($)}catch(Z){return"<unknown>"}},IQ=function($){if(typeof $==="object"&&$!==null){const Z={};for(let Y in $)if(Object.prototype.hasOwnProperty.call($,Y))Z[Y]=$[Y];return Z}else return{}},u1=function($,Z=40){const Y=Object.keys(AY($));if(Y.sort(),!Y.length)return"[object has no keys]";if(Y[0].length>=Z)return j0(Y[0],Z);for(let X=Y.length;X>0;X--){const Q=Y.slice(0,X).join(", ");if(Q.length>Z)continue;if(X===Y.length)return Q;return j0(Q,Z)}return""},_=function($){return g1($,new Map)},g1=function($,Z){if(n($)){const Y=Z.get($);if(Y!==void 0)return Y;const X={};Z.set($,X);for(let Q of Object.keys($))if(typeof $[Q]!=="undefined")X[Q]=g1($[Q],Z);return X}if(Array.isArray($)){const Y=Z.get($);if(Y!==void 0)return Y;const X=[];return Z.set($,X),$.forEach((Q)=>{X.push(g1(Q,Z))}),X}return $};var y9=function($,Z=!1){return!(Z||$&&!$.startsWith("/")&&!$.includes(":\\")&&!$.startsWith(".")&&!$.match(/^[a-zA-Z]([a-zA-Z0-9.\-+])*:\/\//))&&$!==void 0&&!$.includes("node_modules/")},CQ=function($){const Z=/^\s*[-]{4,}$/,Y=/at (?:async )?(?:(.+?)\s+\()?(?:(.+):(\d+):(\d+)?|([^)]+))\)?/;return(X)=>{const Q=X.match(Y);if(Q){let W,J,K,z,w;if(Q[1]){K=Q[1];let N=K.lastIndexOf(".");if(K[N-1]===".")N--;if(N>0){W=K.slice(0,N),J=K.slice(N+1);const H=W.indexOf(".Module");if(H>0)K=K.slice(H+1),W=W.slice(0,H)}z=void 0}if(J)z=W,w=J;if(J==="<anonymous>")w=void 0,K=void 0;if(K===void 0)w=w||"<anonymous>",K=z?`${z}.${w}`:w;let G=Q[2]&&Q[2].startsWith("file://")?Q[2].slice(7):Q[2];const V=Q[5]==="native";if(!G&&Q[5]&&!V)G=Q[5];return{filename:G,module:$?$(G):void 0,function:K,lineno:parseInt(Q[3],10)||void 0,colno:parseInt(Q[4],10)||void 0,in_app:y9(G,V)}}if(X.match(Z))return{filename:X};return}};var qY=function(...$){const Z=$.sort((Y,X)=>Y[0]-X[0]).map((Y)=>Y[1]);return(Y,X=0)=>{const Q=[],W=Y.split("\n");for(let J=X;J<W.length;J++){const K=W[J];if(K.length>1024)continue;const z=_Q.test(K)?K.replace(_Q,"$1"):K;if(z.match(/\S*Error: /))continue;for(let w of Z){const G=w(z);if(G){Q.push(G);break}}if(Q.length>=xQ)break}return bQ(Q)}},p1=function($){if(Array.isArray($))return qY(...$);return $},bQ=function($){if(!$.length)return[];const Z=Array.from($);if(/sentryWrapped/.test(Z[Z.length-1].function||""))Z.pop();if(Z.reverse(),yQ.test(Z[Z.length-1].function||"")){if(Z.pop(),yQ.test(Z[Z.length-1].function||""))Z.pop()}return Z.slice(0,xQ).map((Y)=>({...Y,filename:Y.filename||Z[Z.length-1].filename,function:Y.function||"?"}))},SZ=function($){try{if(!$||typeof $!=="function")return c1;return $.name||c1}catch(Z){return c1}},l1=function($){return[90,CQ($)]},xQ=50,_Q=/\(error: (.*)\)/,yQ=/captureMessage|captureException/,c1="<anonymous>";var t$=function($,Z){EY[$]=EY[$]||[],EY[$].push(Z)};var e$=function($,Z){if(!hQ[$])Z(),hQ[$]=!0},$Z=function($,Z){const Y=$&&EY[$];if(!Y)return;for(let X of Y)try{X(Z)}catch(Q){T0&&M.error(`Error while triggering instrumentation handler.\nType: ${$}\nName: ${SZ(X)}\nError:`,Q)}},EY={},hQ={};var i1=function($){t$("console",$),e$("console",x9)},x9=function(){if(!("console"in O))return;kZ.forEach(function($){if(!($ in O.console))return;C(O.console,$,function(Z){return o$[$]=Z,function(...Y){$Z("console",{args:Y,level:$});const Q=o$[$];Q&&Q.apply(O.console,Y)}})})};var I=function(){const $=O,Z=$.crypto||$.msCrypto;let Y=()=>Math.random()*16;try{if(Z&&Z.randomUUID)return Z.randomUUID().replace(/-/g,"");if(Z&&Z.getRandomValues)Y=()=>Z.getRandomValues(new Uint8Array(1))[0]}catch(X){}return([1e7]+1000+4000+8000+100000000000).replace(/[018]/g,(X)=>(X^(Y()&15)>>X/4).toString(16))},vQ=function($){return $.exception&&$.exception.values?$.exception.values[0]:void 0},q0=function($){const{message:Z,event_id:Y}=$;if(Z)return Z;const X=vQ($);if(X){if(X.type&&X.value)return`${X.type}: ${X.value}`;return X.type||X.value||Y||"<unknown>"}return Y||"<unknown>"},a1=function($,Z,Y){const X=$.exception=$.exception||{},Q=X.values=X.values||[],W=Q[0]=Q[0]||{};if(!W.value)W.value=Z||"";if(!W.type)W.type=Y||"Error"},IZ=function($,Z){const Y=vQ($);if(!Y)return;const X={type:"generic",handled:!0},Q=Y.mechanism;if(Y.mechanism={...X,...Q,...Z},Z&&"data"in Z){const W={...Q&&Q.data,...Z.data};Y.mechanism.data=W}},s1=function($){const Z=$.match(b9)||[],Y=parseInt(Z[1],10),X=parseInt(Z[2],10),Q=parseInt(Z[3],10);return{buildmetadata:Z[5],major:isNaN(Y)?void 0:Y,minor:isNaN(X)?void 0:X,patch:isNaN(Q)?void 0:Q,prerelease:Z[4]}},r1=function($,Z,Y=5){if(Z.lineno===void 0)return;const X=$.length,Q=Math.max(Math.min(X-1,Z.lineno-1),0);Z.pre_context=$.slice(Math.max(0,Q-Y),Q).map((W)=>AZ(W,0)),Z.context_line=AZ($[Math.min(X-1,Q)],Z.colno||0),Z.post_context=$.slice(Math.min(Q+1,X),Q+1+Y).map((W)=>AZ(W,0))},kY=function($){if($&&$.__sentry_captured__)return!0;try{n$($,"__sentry_captured__",!0)}catch(Z){}return!1},C0=function($){return Array.isArray($)?$:[$]},b9=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;var o1=function($){t$("error",$),e$("error",h9)},h9=function(){SY=O.onerror,O.onerror=function($,Z,Y,X,Q){if($Z("error",{column:X,error:Q,line:Y,msg:$,url:Z}),SY&&!SY.__SENTRY_LOADER__)return SY.apply(this,arguments);return!1},O.onerror.__SENTRY_INSTRUMENTED__=!0},SY=null;var n1=function($){t$("unhandledrejection",$),e$("unhandledrejection",v9)},v9=function(){IY=O.onunhandledrejection,O.onunhandledrejection=function($){if($Z("unhandledrejection",$),IY&&!IY.__SENTRY_LOADER__)return IY.apply(this,arguments);return!0},O.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0},IY=null;var gQ=function(){return typeof __SENTRY_BROWSER_BUNDLE__!=="undefined"&&!!__SENTRY_BROWSER_BUNDLE__};var e1=function(){return!gQ()&&Object.prototype.toString.call(typeof process!=="undefined"?process:0)==="[object process]"},_0=function($,Z){return $.require(Z)},X0=function($){let Z;try{Z=_0(t1,$)}catch(Y){}try{const{cwd:Y}=_0(t1,"process");Z=_0(t1,`${Y()}/node_modules/${$}`)}catch(Y){}return Z};var mQ=function(){const $=typeof WeakSet==="function",Z=$?new WeakSet:[];function Y(Q){if($){if(Z.has(Q))return!0;return Z.add(Q),!1}for(let W=0;W<Z.length;W++)if(Z[W]===Q)return!0;return Z.push(Q),!1}function X(Q){if($)Z.delete(Q);else for(let W=0;W<Z.length;W++)if(Z[W]===Q){Z.splice(W,1);break}}return[Y,X]};var t=function($,Z=100,Y=Infinity){try{return fY("",$,Z,Y)}catch(X){return{ERROR:`**non-serializable** (${X})`}}},CY=function($,Z=3,Y=102400){const X=t($,Z);if(u9(X)>Y)return CY($,Z-1,Y);return X},fY=function($,Z,Y=Infinity,X=Infinity,Q=mQ()){const[W,J]=Q;if(Z==null||["number","boolean","string"].includes(typeof Z)&&!OZ(Z))return Z;const K=g9($,Z);if(!K.startsWith("[object "))return K;if(Z.__sentry_skip_normalization__)return Z;const z=typeof Z.__sentry_override_normalization_depth__==="number"?Z.__sentry_override_normalization_depth__:Y;if(z===0)return K.replace("object ","");if(W(Z))return"[Circular ~]";const w=Z;if(w&&typeof w.toJSON==="function")try{const H=w.toJSON();return fY("",H,z-1,X,Q)}catch(H){}const G=Array.isArray(Z)?[]:{};let V=0;const N=AY(Z);for(let H in N){if(!Object.prototype.hasOwnProperty.call(N,H))continue;if(V>=X){G[H]="[MaxProperties ~]";break}const F=N[H];G[H]=fY(H,F,z-1,X,Q),V++}return J(Z),G},g9=function($,Z){try{if($==="domain"&&Z&&typeof Z==="object"&&Z._events)return"[Domain]";if($==="domainEmitter")return"[DomainEmitter]";if(typeof global!=="undefined"&&Z===global)return"[Global]";if(typeof window!=="undefined"&&Z===window)return"[Window]";if(typeof document!=="undefined"&&Z===document)return"[Document]";if(DY(Z))return"[VueViewModel]";if(b1(Z))return"[SyntheticEvent]";if(typeof Z==="number"&&Z!==Z)return"[NaN]";if(typeof Z==="function")return`[Function: ${SZ(Z)}]`;if(typeof Z==="symbol")return`[${String(Z)}]`;if(typeof Z==="bigint")return`[BigInt: ${String(Z)}]`;const Y=m9(Z);if(/^HTML(\w*)Element$/.test(Y))return`[HTMLElement: ${Y}]`;return`[object ${Y}]`}catch(Y){return`**non-serializable** (${Y})`}},m9=function($){const Z=Object.getPrototypeOf($);return Z?Z.constructor.name:"null prototype"},d9=function($){return~-encodeURI($).split(/%..|./).length},u9=function($){return d9(JSON.stringify($))};var e=function($){return new u((Z)=>{Z($)})},L$=function($){return new u((Z,Y)=>{Y($)})},E0;(function($){$[$.PENDING=0]="PENDING";const Y=1;$[$.RESOLVED=Y]="RESOLVED";const X=2;$[$.REJECTED=X]="REJECTED"})(E0||(E0={}));class u{constructor($){u.prototype.__init.call(this),u.prototype.__init2.call(this),u.prototype.__init3.call(this),u.prototype.__init4.call(this),this._state=E0.PENDING,this._handlers=[];try{$(this._resolve,this._reject)}catch(Z){this._reject(Z)}}then($,Z){return new u((Y,X)=>{this._handlers.push([!1,(Q)=>{if(!$)Y(Q);else try{Y($(Q))}catch(W){X(W)}},(Q)=>{if(!Z)X(Q);else try{Y(Z(Q))}catch(W){X(W)}}]),this._executeHandlers()})}catch($){return this.then((Z)=>Z,$)}finally($){return new u((Z,Y)=>{let X,Q;return this.then((W)=>{if(Q=!1,X=W,$)$()},(W)=>{if(Q=!0,X=W,$)$()}).then(()=>{if(Q){Y(X);return}Z(X)})})}__init(){this._resolve=($)=>{this._setResult(E0.RESOLVED,$)}}__init2(){this._reject=($)=>{this._setResult(E0.REJECTED,$)}}__init3(){this._setResult=($,Z)=>{if(this._state!==E0.PENDING)return;if(m(Z)){Z.then(this._resolve,this._reject);return}this._state=$,this._value=Z,this._executeHandlers()}}__init4(){this._executeHandlers=()=>{if(this._state===E0.PENDING)return;const $=this._handlers.slice();this._handlers=[],$.forEach((Z)=>{if(Z[0])return;if(this._state===E0.RESOLVED)Z[1](this._value);if(this._state===E0.REJECTED)Z[2](this._value);Z[0]=!0})}}}var $X=function($){const Z=[];function Y(){return $===void 0||Z.length<$}function X(J){return Z.splice(Z.indexOf(J),1)[0]}function Q(J){if(!Y())return L$(new l("Not adding Promise because buffer limit was reached."));const K=J();if(Z.indexOf(K)===-1)Z.push(K);return K.then(()=>X(K)).then(null,()=>X(K).then(null,()=>{})),K}function W(J){return new u((K,z)=>{let w=Z.length;if(!w)return K(!0);const G=setTimeout(()=>{if(J&&J>0)K(!1)},J);Z.forEach((V)=>{e(V).then(()=>{if(!--w)clearTimeout(G),K(!0)},z)})})}return{$:Z,add:Q,drain:W}};var dQ=function($){const Z={};let Y=0;while(Y<$.length){const X=$.indexOf("=",Y);if(X===-1)break;let Q=$.indexOf(";",Y);if(Q===-1)Q=$.length;else if(Q<X){Y=$.lastIndexOf(";",X-1)+1;continue}const W=$.slice(Y,X).trim();if(Z[W]===void 0){let J=$.slice(X+1,Q).trim();if(J.charCodeAt(0)===34)J=J.slice(1,-1);try{Z[W]=J.indexOf("%")!==-1?decodeURIComponent(J):J}catch(K){Z[W]=J}}Y=Q+1}return Z};var fZ=function($){if(!$)return{};const Z=$.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!Z)return{};const Y=Z[6]||"",X=Z[8]||"";return{host:Z[4],path:Z[5],protocol:Z[2],search:Y,hash:X,relative:Z[5]+Y+X}},H$=function($){return $.split(/[\?#]/,1)[0]},ZZ=function($){return $.split(/\\?\//).filter((Z)=>Z.length>0&&Z!==",").length},CZ=function($){const{protocol:Z,host:Y,path:X}=$,Q=Y&&Y.replace(/^.*@/,"[filtered]:[filtered]@").replace(/(:80)$/,"").replace(/(:443)$/,"")||"";return`${Z?`${Z}://`:""}${Q}${X}`};var F$=function($,Z={}){const Y=$.method&&$.method.toUpperCase();let X="",Q="url";if(Z.customRoute||$.route)X=Z.customRoute||`${$.baseUrl||""}${$.route&&$.route.path}`,Q="route";else if($.originalUrl||$.url)X=H$($.originalUrl||$.url||"");let W="";if(Z.method&&Y)W+=Y;if(Z.method&&Z.path)W+=" ";if(Z.path&&X)W+=X;return[W,Q]},l9=function($,Z){switch(Z){case"path":return F$($,{path:!0})[0];case"handler":return $.route&&$.route.stack&&$.route.stack[0]&&$.route.stack[0].name||"<anonymous>";case"methodPath":default:{const Y=$._reconstructedRoute?$._reconstructedRoute:void 0;return F$($,{path:!0,method:!0,customRoute:Y})[0]}}},i9=function($,Z){const Y={};return(Array.isArray(Z)?Z:uQ).forEach((Q)=>{if($&&Q in $)Y[Q]=$[Q]}),Y},ZX=function($,Z){const{include:Y=p9,deps:X}=Z||{},Q={},W=$.headers||{},J=$.method,K=$.hostname||$.host||W.host||"<no host>",z=$.protocol==="https"||$.socket&&$.socket.encrypted?"https":"http",w=$.originalUrl||$.url||"",G=w.startsWith(z)?w:`${z}://${K}${w}`;return Y.forEach((V)=>{switch(V){case"headers":{if(Q.headers=W,!Y.includes("cookies"))delete Q.headers.cookie;break}case"method":{Q.method=J;break}case"url":{Q.url=G;break}case"cookies":{Q.cookies=$.cookies||W.cookie&&dQ(W.cookie)||{};break}case"query_string":{Q.query_string=a9($,X);break}case"data":{if(J==="GET"||J==="HEAD")break;if($.body!==void 0)Q.data=F0($.body)?$.body:JSON.stringify(t($.body));break}default:if({}.hasOwnProperty.call($,V))Q[V]=$[V]}}),Q},YX=function($,Z,Y){const X={...c9,...Y&&Y.include};if(X.request){const Q=Array.isArray(X.request)?ZX(Z,{include:X.request,deps:Y&&Y.deps}):ZX(Z,{deps:Y&&Y.deps});$.request={...$.request,...Q}}if(X.user){const Q=Z.user&&n(Z.user)?i9(Z.user,X.user):{};if(Object.keys(Q).length)$.user={...$.user,...Q}}if(X.ip){const Q=Z.ip||Z.socket&&Z.socket.remoteAddress;if(Q)$.user={...$.user,ip_address:Q}}if(X.transaction&&!$.transaction)$.transaction=l9(Z,X.transaction);return $},a9=function($,Z){let Y=$.originalUrl||$.url||"";if(!Y)return;if(Y.startsWith("/"))Y=`http://dogs.are.great${Y}`;try{return $.query||typeof URL!==void 0&&new URL(Y).search.slice(1)||Z&&Z.url&&Z.url.parse(Y).query||void 0}catch(X){return}};var c9={ip:!1,request:!0,transaction:!0,user:!0},p9=["cookies","data","headers","method","query_string","url"],uQ=["id","username","email"];var XX=function($){return $==="warn"?"warning":cQ.includes($)?$:"log"},cQ=["fatal","error","warning","log","info","debug"];var s9=function(){const{performance:$}=lQ;if(!$||!$.now)return;const Z=Date.now()-$.now();return{now:()=>$.now(),timeOrigin:Z}},r9=function(){try{return _0(n9,"perf_hooks").performance}catch($){return}},lQ=qZ(),WX={nowSeconds:()=>Date.now()/1000},QX=e1()?r9():s9(),pQ=QX===void 0?WX:{nowSeconds:()=>(QX.timeOrigin+QX.now())/1000},B$=WX.nowSeconds.bind(WX),j$=pQ.nowSeconds.bind(pQ);var _Z,o9=(()=>{const{performance:$}=lQ;if(!$||!$.now){_Z="none";return}const Z=3600000,Y=$.now(),X=Date.now(),Q=$.timeOrigin?Math.abs($.timeOrigin+Y-X):Z,W=Q<Z,J=$.timing&&$.timing.navigationStart,z=typeof J==="number"?Math.abs(J+Y-X):Z,w=z<Z;if(W||w)if(Q<=z)return _Z="timeOrigin",$.timeOrigin;else return _Z="navigationStart",J;return _Z="dateNow",X})();var KX=function($){if(!F0($)&&!Array.isArray($))return;let Z={};if(Array.isArray($))Z=$.reduce((X,Q)=>{const W=iQ(Q);return{...X,...W}},{});else{if(!$)return;Z=iQ($)}const Y=Object.entries(Z).reduce((X,[Q,W])=>{if(Q.match(aQ)){const J=Q.slice(JX.length);X[J]=W}return X},{});if(Object.keys(Y).length>0)return Y;else return},YZ=function($){if(!$)return;const Z=Object.entries($).reduce((Y,[X,Q])=>{if(Q)Y[`${JX}${X}`]=Q;return Y},{});return t9(Z)},iQ=function($){return $.split(",").map((Z)=>Z.split("=").map((Y)=>decodeURIComponent(Y.trim()))).reduce((Z,[Y,X])=>{return Z[Y]=X,Z},{})},t9=function($){if(Object.keys($).length===0)return;return Object.entries($).reduce((Z,[Y,X],Q)=>{const W=`${encodeURIComponent(Y)}=${encodeURIComponent(X)}`,J=Q===0?W:`${Z},${W}`;if(J.length>sQ)return T0&&M.warn(`Not adding key: ${Y} with val: ${X} to baggage header due to exceeding baggage size limits.`),Z;else return J},"")};var JX="sentry-",aQ=/^sentry-/,sQ=8192;var oQ=function($){if(!$)return;const Z=$.match(rQ);if(!Z)return;let Y;if(Z[3]==="1")Y=!0;else if(Z[3]==="0")Y=!1;return{traceId:Z[1],parentSampled:Y,parentSpanId:Z[2]}},yZ=function($,Z){const Y=oQ($),X=KX(Z),{traceId:Q,parentSpanId:W,parentSampled:J}=Y||{},K={traceId:Q||I(),spanId:I().substring(16),sampled:J};if(W)K.parentSpanId=W;if(X)K.dsc=X;return{traceparentData:Y,dynamicSamplingContext:X,propagationContext:K}},U$=function($=I(),Z=I().substring(16),Y){let X="";if(Y!==void 0)X=Y?"-1":"-0";return`${$}-${Z}${X}`},rQ=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");var y0=function($,Z=[]){return[$,Z]},VX=function($,Z){const[Y,X]=$;return[Y,[...X,Z]]},_Y=function($,Z){const Y=$[1];for(let X of Y){const Q=X[0].type;if(Z(X,Q))return!0}return!1};var zX=function($,Z){return(Z||new TextEncoder).encode($)},xZ=function($,Z){const[Y,X]=$;let Q=JSON.stringify(Y);function W(J){if(typeof Q==="string")Q=typeof J==="string"?Q+J:[zX(Q,Z),J];else Q.push(typeof J==="string"?zX(J,Z):J)}for(let J of X){const[K,z]=J;if(W(`\n${JSON.stringify(K)}\n`),typeof z==="string"||z instanceof Uint8Array)W(z);else{let w;try{w=JSON.stringify(z)}catch(G){w=JSON.stringify(t(z))}W(w)}}return typeof Q==="string"?Q:e9(Q)},e9=function($){const Z=$.reduce((Q,W)=>Q+W.length,0),Y=new Uint8Array(Z);let X=0;for(let Q of $)Y.set(Q,X),X+=Q.length;return Y};var GX=function($,Z){const Y=typeof $.data==="string"?zX($.data,Z):$.data;return[_({type:"attachment",length:Y.length,filename:$.filename,content_type:$.contentType,attachment_type:$.attachmentType}),Y]},yY=function($){return $7[$]},xY=function($){if(!$||!$.sdk)return;const{name:Z,version:Y}=$.sdk;return{name:Z,version:Y}},wX=function($,Z,Y,X){const Q=$.sdkProcessingMetadata&&$.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:$.event_id,sent_at:(new Date()).toISOString(),...Z&&{sdk:Z},...!!Y&&X&&{dsn:f0(X)},...Q&&{trace:_({...Q})}}},$7={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",statsd:"unknown"};var nQ=function($,Z=Date.now()){const Y=parseInt(`${$}`,10);if(!isNaN(Y))return Y*1000;const X=Date.parse(`${$}`);if(!isNaN(X))return X-Z;return 60000},tQ=function($,Z){return $[Z]||$.all||0},NX=function($,Z,Y=Date.now()){return tQ($,Z)>Y},MX=function($,{statusCode:Z,headers:Y},X=Date.now()){const Q={...$},W=Y&&Y["x-sentry-rate-limits"],J=Y&&Y["retry-after"];if(W)for(let K of W.trim().split(",")){const[z,w]=K.split(":",2),G=parseInt(z,10),V=(!isNaN(G)?G:60)*1000;if(!w)Q.all=X+V;else for(let N of w.split(";"))Q[N]=X+V}else if(J)Q.all=X+nQ(J,X);else if(Z===429)Q.all=X+60000;return Q};var LX=function($,Z){return $(Z.stack||"",1)},bY=function($,Z){const Y={type:Z.name||Z.constructor.name,value:Z.message},X=LX($,Z);if(X.length)Y.stacktrace={frames:X};return Y},Z7=function($){if("name"in $&&typeof $.name==="string"){let Z=`'${$.name}' captured as exception`;if("message"in $&&typeof $.message==="string")Z+=` with message '${$.message}'`;return Z}else if("message"in $&&typeof $.message==="string")return $.message;else return`Object captured as exception with keys: ${u1($)}`},HX=function($,Z,Y,X){let Q=Y;const J=X&&X.data&&X.data.mechanism||{handled:!0,type:"generic"};if(!DZ(Y)){if(n(Y)){const z=$(),w=z.getClient(),G=w&&w.getOptions().normalizeDepth;z.configureScope((N)=>{N.setExtra("__serialized__",CY(Y,G))});const V=Z7(Y);Q=X&&X.syntheticException||new Error(V),Q.message=V}else Q=X&&X.syntheticException||new Error(Y),Q.message=Y;J.synthetic=!0}const K={exception:{values:[bY(Z,Q)]}};return a1(K,void 0,void 0),IZ(K,J),{...K,event_id:X&&X.event_id}},FX=function($,Z,Y="info",X,Q){const W={event_id:X&&X.event_id,level:Y,message:Z};if(Q&&X&&X.syntheticException){const J=LX($,X.syntheticException);if(J.length)W.exception={values:[{value:Z,stacktrace:{frames:J}}]}}return W};class Q0{constructor($){this._maxSize=$,this._cache=new Map}get size(){return this._cache.size}get($){const Z=this._cache.get($);if(Z===void 0)return;return this._cache.delete($),this._cache.set($,Z),Z}set($,Z){if(this._cache.size>=this._maxSize)this._cache.delete(this._cache.keys().next().value);this._cache.set($,Z)}remove($){const Z=this._cache.get($);if(Z)this._cache.delete($);return Z}clear(){this._cache.clear()}keys(){return Array.from(this._cache.keys())}values(){const $=[];return this._cache.forEach((Z)=>$.push(Z)),$}}var bZ=function($,Z){return $!=null?$:Z()};var L=function($){let Z=void 0,Y=$[0],X=1;while(X<$.length){const Q=$[X],W=$[X+1];if(X+=2,(Q==="optionalAccess"||Q==="optionalCall")&&Y==null)return;if(Q==="access"||Q==="optionalAccess")Z=Y,Y=W(Y);else if(Q==="call"||Q==="optionalCall")Y=W((...J)=>Y.call(Z,...J)),Z=void 0}return Y};var j=typeof __SENTRY_DEBUG__==="undefined"||__SENTRY_DEBUG__;var XZ="production";var hZ=function(){return EZ("globalEventProcessors",()=>[])},BX=function($){hZ().push($)},QZ=function($,Z,Y,X=0){return new u((Q,W)=>{const J=$[X];if(Z===null||typeof J!=="function")Q(Z);else{const K=J({...Z},Y);if(j&&J.id&&K===null&&M.log(`Event processor "${J.id}" dropped event`),m(K))K.then((z)=>QZ($,z,Y,X+1).then(Q)).then(null,W);else QZ($,K,Y,X+1).then(Q).then(null,W)}})};var eQ=function($){const Z=j$(),Y={sid:I(),init:!0,timestamp:Z,started:Z,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Y7(Y)};if($)k0(Y,$);return Y},k0=function($,Z={}){if(Z.user){if(!$.ipAddress&&Z.user.ip_address)$.ipAddress=Z.user.ip_address;if(!$.did&&!Z.did)$.did=Z.user.id||Z.user.email||Z.user.username}if($.timestamp=Z.timestamp||j$(),Z.abnormal_mechanism)$.abnormal_mechanism=Z.abnormal_mechanism;if(Z.ignoreDuration)$.ignoreDuration=Z.ignoreDuration;if(Z.sid)$.sid=Z.sid.length===32?Z.sid:I();if(Z.init!==void 0)$.init=Z.init;if(!$.did&&Z.did)$.did=`${Z.did}`;if(typeof Z.started==="number")$.started=Z.started;if($.ignoreDuration)$.duration=void 0;else if(typeof Z.duration==="number")$.duration=Z.duration;else{const Y=$.timestamp-$.started;$.duration=Y>=0?Y:0}if(Z.release)$.release=Z.release;if(Z.environment)$.environment=Z.environment;if(!$.ipAddress&&Z.ipAddress)$.ipAddress=Z.ipAddress;if(!$.userAgent&&Z.userAgent)$.userAgent=Z.userAgent;if(typeof Z.errors==="number")$.errors=Z.errors;if(Z.status)$.status=Z.status},$W=function($,Z){let Y={};if(Z)Y={status:Z};else if($.status==="ok")Y={status:"exited"};k0($,Y)},Y7=function($){return _({sid:`${$.sid}`,init:$.init,started:new Date($.started*1000).toISOString(),timestamp:new Date($.timestamp*1000).toISOString(),status:$.status,errors:$.errors,did:typeof $.did==="number"||typeof $.did==="string"?`${$.did}`:void 0,duration:$.duration,abnormal_mechanism:$.abnormal_mechanism,attrs:{release:$.release,environment:$.environment,ip_address:$.ipAddress,user_agent:$.userAgent}})};var ZW=function(){return{traceId:I(),spanId:I().substring(16)}},X7=100;class W0{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=ZW()}static clone($){const Z=new W0;if($)Z._breadcrumbs=[...$._breadcrumbs],Z._tags={...$._tags},Z._extra={...$._extra},Z._contexts={...$._contexts},Z._user=$._user,Z._level=$._level,Z._span=$._span,Z._session=$._session,Z._transactionName=$._transactionName,Z._fingerprint=$._fingerprint,Z._eventProcessors=[...$._eventProcessors],Z._requestSession=$._requestSession,Z._attachments=[...$._attachments],Z._sdkProcessingMetadata={...$._sdkProcessingMetadata},Z._propagationContext={...$._propagationContext};return Z}addScopeListener($){this._scopeListeners.push($)}addEventProcessor($){return this._eventProcessors.push($),this}setUser($){if(this._user=$||{},this._session)k0(this._session,{user:$});return this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession($){return this._requestSession=$,this}setTags($){return this._tags={...this._tags,...$},this._notifyScopeListeners(),this}setTag($,Z){return this._tags={...this._tags,[$]:Z},this._notifyScopeListeners(),this}setExtras($){return this._extra={...this._extra,...$},this._notifyScopeListeners(),this}setExtra($,Z){return this._extra={...this._extra,[$]:Z},this._notifyScopeListeners(),this}setFingerprint($){return this._fingerprint=$,this._notifyScopeListeners(),this}setLevel($){return this._level=$,this._notifyScopeListeners(),this}setTransactionName($){return this._transactionName=$,this._notifyScopeListeners(),this}setContext($,Z){if(Z===null)delete this._contexts[$];else this._contexts[$]=Z;return this._notifyScopeListeners(),this}setSpan($){return this._span=$,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const $=this.getSpan();return $&&$.transaction}setSession($){if(!$)delete this._session;else this._session=$;return this._notifyScopeListeners(),this}getSession(){return this._session}update($){if(!$)return this;if(typeof $==="function"){const Z=$(this);return Z instanceof W0?Z:this}if($ instanceof W0){if(this._tags={...this._tags,...$._tags},this._extra={...this._extra,...$._extra},this._contexts={...this._contexts,...$._contexts},$._user&&Object.keys($._user).length)this._user=$._user;if($._level)this._level=$._level;if($._fingerprint)this._fingerprint=$._fingerprint;if($._requestSession)this._requestSession=$._requestSession;if($._propagationContext)this._propagationContext=$._propagationContext}else if(n($)){if($=$,this._tags={...this._tags,...$.tags},this._extra={...this._extra,...$.extra},this._contexts={...this._contexts,...$.contexts},$.user)this._user=$.user;if($.level)this._level=$.level;if($.fingerprint)this._fingerprint=$.fingerprint;if($.requestSession)this._requestSession=$.requestSession;if($.propagationContext)this._propagationContext=$.propagationContext}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=ZW(),this}addBreadcrumb($,Z){const Y=typeof Z==="number"?Z:X7;if(Y<=0)return this;const X={timestamp:B$(),...$},Q=this._breadcrumbs;return Q.push(X),this._breadcrumbs=Q.length>Y?Q.slice(-Y):Q,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment($){return this._attachments.push($),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent($,Z={},Y){if(this._extra&&Object.keys(this._extra).length)$.extra={...this._extra,...$.extra};if(this._tags&&Object.keys(this._tags).length)$.tags={...this._tags,...$.tags};if(this._user&&Object.keys(this._user).length)$.user={...this._user,...$.user};if(this._contexts&&Object.keys(this._contexts).length)$.contexts={...this._contexts,...$.contexts};if(this._level)$.level=this._level;if(this._transactionName)$.transaction=this._transactionName;if(this._span){$.contexts={trace:this._span.getTraceContext(),...$.contexts};const W=this._span.transaction;if(W){$.sdkProcessingMetadata={dynamicSamplingContext:W.getDynamicSamplingContext(),...$.sdkProcessingMetadata};const J=W.name;if(J)$.tags={transaction:J,...$.tags}}}this._applyFingerprint($);const X=this._getBreadcrumbs(),Q=[...$.breadcrumbs||[],...X];return $.breadcrumbs=Q.length>0?Q:void 0,$.sdkProcessingMetadata={...$.sdkProcessingMetadata,...this._sdkProcessingMetadata,propagationContext:this._propagationContext},QZ([...Y||[],...hZ(),...this._eventProcessors],$,Z)}setSDKProcessingMetadata($){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...$},this}setPropagationContext($){return this._propagationContext=$,this}getPropagationContext(){return this._propagationContext}_getBreadcrumbs(){return this._breadcrumbs}_notifyScopeListeners(){if(!this._notifyingListeners)this._notifyingListeners=!0,this._scopeListeners.forEach(($)=>{$(this)}),this._notifyingListeners=!1}_applyFingerprint($){if($.fingerprint=$.fingerprint?C0($.fingerprint):[],this._fingerprint)$.fingerprint=$.fingerprint.concat(this._fingerprint);if($.fingerprint&&!$.fingerprint.length)delete $.fingerprint}}var G0=function(){return O.__SENTRY__=O.__SENTRY__||{extensions:{},hub:void 0},O},hY=function($){const Z=G0(),Y=J0(Z);return KZ(Z,$),Y},R=function(){const $=G0();if($.__SENTRY__&&$.__SENTRY__.acs){const Z=$.__SENTRY__.acs.getCurrentHub();if(Z)return Z}return YW($)},YW=function($=G0()){if(!XW($)||J0($).isOlderThan(jX))KZ($,new WZ);return J0($)},JZ=function($,Z=YW()){if(!XW($)||J0($).isOlderThan(jX)){const Y=Z.getStackTop();KZ($,new WZ(Y.client,W0.clone(Y.scope)))}},vZ=function($){const Z=G0();Z.__SENTRY__=Z.__SENTRY__||{},Z.__SENTRY__.acs=$},vY=function($,Z={}){const Y=G0();if(Y.__SENTRY__&&Y.__SENTRY__.acs)return Y.__SENTRY__.acs.runWithAsyncContext($,Z);return $()},XW=function($){return!!($&&$.__SENTRY__&&$.__SENTRY__.hub)},J0=function($){return EZ("hub",()=>new WZ,$)},KZ=function($,Z){if(!$)return!1;const Y=$.__SENTRY__=$.__SENTRY__||{};return Y.hub=Z,!0},jX=4,Q7=100;class WZ{constructor($,Z=new W0,Y=jX){if(this._version=Y,this._stack=[{scope:Z}],$)this.bindClient($)}isOlderThan($){return this._version<$}bindClient($){const Z=this.getStackTop();if(Z.client=$,$&&$.setupIntegrations)$.setupIntegrations()}pushScope(){const $=W0.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:$}),$}popScope(){if(this.getStack().length<=1)return!1;return!!this.getStack().pop()}withScope($){const Z=this.pushScope();try{$(Z)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException($,Z){const Y=this._lastEventId=Z&&Z.event_id?Z.event_id:I(),X=new Error("Sentry syntheticException");return this._withClient((Q,W)=>{Q.captureException($,{originalException:$,syntheticException:X,...Z,event_id:Y},W)}),Y}captureMessage($,Z,Y){const X=this._lastEventId=Y&&Y.event_id?Y.event_id:I(),Q=new Error($);return this._withClient((W,J)=>{W.captureMessage($,Z,{originalException:$,syntheticException:Q,...Y,event_id:X},J)}),X}captureEvent($,Z){const Y=Z&&Z.event_id?Z.event_id:I();if(!$.type)this._lastEventId=Y;return this._withClient((X,Q)=>{X.captureEvent($,{...Z,event_id:Y},Q)}),Y}lastEventId(){return this._lastEventId}addBreadcrumb($,Z){const{scope:Y,client:X}=this.getStackTop();if(!X)return;const{beforeBreadcrumb:Q=null,maxBreadcrumbs:W=Q7}=X.getOptions&&X.getOptions()||{};if(W<=0)return;const K={timestamp:B$(),...$},z=Q?p(()=>Q(K,Z)):K;if(z===null)return;if(X.emit)X.emit("beforeAddBreadcrumb",z,Z);Y.addBreadcrumb(z,W)}setUser($){this.getScope().setUser($)}setTags($){this.getScope().setTags($)}setExtras($){this.getScope().setExtras($)}setTag($,Z){this.getScope().setTag($,Z)}setExtra($,Z){this.getScope().setExtra($,Z)}setContext($,Z){this.getScope().setContext($,Z)}configureScope($){const{scope:Z,client:Y}=this.getStackTop();if(Y)$(Z)}run($){const Z=hY(this);try{$(this)}finally{hY(Z)}}getIntegration($){const Z=this.getClient();if(!Z)return null;try{return Z.getIntegration($)}catch(Y){return j&&M.warn(`Cannot retrieve integration ${$.id} from the current Hub`),null}}startTransaction($,Z){const Y=this._callExtensionMethod("startTransaction",$,Z);if(j&&!Y)if(!this.getClient())M.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'");else M.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`);return Y}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession($=!1){if($)return this.endSession();this._sendSessionUpdate()}endSession(){const Z=this.getStackTop().scope,Y=Z.getSession();if(Y)$W(Y);this._sendSessionUpdate(),Z.setSession()}startSession($){const{scope:Z,client:Y}=this.getStackTop(),{release:X,environment:Q=XZ}=Y&&Y.getOptions()||{},{userAgent:W}=O.navigator||{},J=eQ({release:X,environment:Q,user:Z.getUser(),...W&&{userAgent:W},...$}),K=Z.getSession&&Z.getSession();if(K&&K.status==="ok")k0(K,{status:"exited"});return this.endSession(),Z.setSession(J),J}shouldSendDefaultPii(){const $=this.getClient(),Z=$&&$.getOptions();return Boolean(Z&&Z.sendDefaultPii)}_sendSessionUpdate(){const{scope:$,client:Z}=this.getStackTop(),Y=$.getSession();if(Y&&Z&&Z.captureSession)Z.captureSession(Y)}_withClient($){const{scope:Z,client:Y}=this.getStackTop();if(Y)$(Y,Z)}_callExtensionMethod($,...Z){const X=G0().__SENTRY__;if(X&&X.extensions&&typeof X.extensions[$]==="function")return X.extensions[$].apply(this,Z);j&&M.warn(`Extension method ${$} couldn't be found, doing nothing.`)}}var UX=function($){return($||R()).getScope().getTransaction()};var WW=function(){if(QW)return;QW=!0,o1(TX),n1(TX)},TX=function(){const $=UX();if($)j&&M.log("[Tracing] Transaction: internal_error -> Global error occured"),$.setStatus("internal_error")},QW=!1;TX.tag="sentry_tracingErrorCallback";var JW=function($){if($<400&&$>=100)return"ok";if($>=400&&$<500)switch($){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if($>=500&&$<600)switch($){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"};class RX{constructor($=1000){this._maxlen=$,this.spans=[]}add($){if(this.spans.length>this._maxlen)$.spanRecorder=void 0;else this.spans.push($)}}class gY{constructor($={}){if(this.traceId=$.traceId||I(),this.spanId=$.spanId||I().substring(16),this.startTimestamp=$.startTimestamp||j$(),this.tags=$.tags||{},this.data=$.data||{},this.instrumenter=$.instrumenter||"sentry",this.origin=$.origin||"manual",$.parentSpanId)this.parentSpanId=$.parentSpanId;if("sampled"in $)this.sampled=$.sampled;if($.op)this.op=$.op;if($.description)this.description=$.description;if($.name)this.description=$.name;if($.status)this.status=$.status;if($.endTimestamp)this.endTimestamp=$.endTimestamp}get name(){return this.description||""}set name($){this.setName($)}startChild($){const Z=new gY({...$,parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId});if(Z.spanRecorder=this.spanRecorder,Z.spanRecorder)Z.spanRecorder.add(Z);if(Z.transaction=this.transaction,j&&Z.transaction){const Y=$&&$.op||"< unknown op >",X=Z.transaction.name||"< unknown name >",Q=Z.transaction.spanId,W=`[Tracing] Starting '${Y}' span on transaction '${X}' (${Q}).`;Z.transaction.metadata.spanMetadata[Z.spanId]={logMessage:W},M.log(W)}return Z}setTag($,Z){return this.tags={...this.tags,[$]:Z},this}setData($,Z){return this.data={...this.data,[$]:Z},this}setStatus($){return this.status=$,this}setHttpStatus($){this.setTag("http.status_code",String($)),this.setData("http.response.status_code",$);const Z=JW($);if(Z!=="unknown_error")this.setStatus(Z);return this}setName($){this.description=$}isSuccess(){return this.status==="ok"}finish($){if(j&&this.transaction&&this.transaction.spanId!==this.spanId){const{logMessage:Z}=this.transaction.metadata.spanMetadata[this.spanId];if(Z)M.log(Z.replace("Starting","Finishing"))}this.endTimestamp=typeof $==="number"?$:j$()}toTraceparent(){return U$(this.traceId,this.spanId,this.sampled)}toContext(){return _({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})}updateWithContext($){return this.data=$.data||{},this.description=$.description,this.endTimestamp=$.endTimestamp,this.op=$.op,this.parentSpanId=$.parentSpanId,this.sampled=$.sampled,this.spanId=$.spanId||this.spanId,this.startTimestamp=$.startTimestamp||this.startTimestamp,this.status=$.status,this.tags=$.tags||{},this.traceId=$.traceId||this.traceId,this}getTraceContext(){return _({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId,origin:this.origin})}toJSON(){return _({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId,origin:this.origin})}}var w0=function($,Z,Y){const X=Z.getOptions(),{publicKey:Q}=Z.getDsn()||{},{segment:W}=Y&&Y.getUser()||{},J=_({environment:X.environment||XZ,release:X.release,user_segment:W,public_key:Q,trace_id:$});return Z.emit&&Z.emit("createDsc",J),J};class zZ extends gY{constructor($,Z){super($);delete this.description,this._measurements={},this._contexts={},this._hub=Z||R(),this._name=$.name||"",this.metadata={source:"custom",...$.metadata,spanMetadata:{}},this._trimEnd=$.trimEnd,this.transaction=this;const Y=this.metadata.dynamicSamplingContext;if(Y)this._frozenDynamicSamplingContext={...Y}}get name(){return this._name}set name($){this.setName($)}setName($,Z="custom"){this._name=$,this.metadata.source=Z}initSpanRecorder($=1000){if(!this.spanRecorder)this.spanRecorder=new RX($);this.spanRecorder.add(this)}setContext($,Z){if(Z===null)delete this._contexts[$];else this._contexts[$]=Z}setMeasurement($,Z,Y=""){this._measurements[$]={value:Z,unit:Y}}setMetadata($){this.metadata={...this.metadata,...$}}finish($){const Z=this._finishTransaction($);if(!Z)return;return this._hub.captureEvent(Z)}toContext(){const $=super.toContext();return _({...$,name:this.name,trimEnd:this._trimEnd})}updateWithContext($){return super.updateWithContext($),this.name=$.name||"",this._trimEnd=$.trimEnd,this}getDynamicSamplingContext(){if(this._frozenDynamicSamplingContext)return this._frozenDynamicSamplingContext;const $=this._hub||R(),Z=$.getClient();if(!Z)return{};const Y=$.getScope(),X=w0(this.traceId,Z,Y),Q=this.metadata.sampleRate;if(Q!==void 0)X.sample_rate=`${Q}`;const W=this.metadata.source;if(W&&W!=="url")X.transaction=this.name;if(this.sampled!==void 0)X.sampled=String(this.sampled);return X}setHub($){this._hub=$}_finishTransaction($){if(this.endTimestamp!==void 0)return;if(!this.name)j&&M.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>";super.finish($);const Z=this._hub.getClient();if(Z&&Z.emit)Z.emit("finishTransaction",this);if(this.sampled!==!0){if(j&&M.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),Z)Z.recordDroppedEvent("sample_rate","transaction");return}const Y=this.spanRecorder?this.spanRecorder.spans.filter((J)=>J!==this&&J.endTimestamp):[];if(this._trimEnd&&Y.length>0)this.endTimestamp=Y.reduce((J,K)=>{if(J.endTimestamp&&K.endTimestamp)return J.endTimestamp>K.endTimestamp?J:K;return J}).endTimestamp;const X=this.metadata,Q={contexts:{...this._contexts,trace:this.getTraceContext()},spans:Y,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",sdkProcessingMetadata:{...X,dynamicSamplingContext:this.getDynamicSamplingContext()},...X.source&&{transaction_info:{source:X.source}}};if(Object.keys(this._measurements).length>0)j&&M.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),Q.measurements=this._measurements;return j&&M.log(`[Tracing] Finishing ${this.op} transaction: ${this.name}.`),Q}}var zW=function($,Z,Y,X,Q){const{normalizeDepth:W=3,normalizeMaxBreadth:J=1000}=$,K={...Z,event_id:Z.event_id||Y.event_id||I(),timestamp:Z.timestamp||B$()},z=Y.integrations||$.integrations.map((N)=>N.name);if(W7(K,$),z7(K,z),Z.type===void 0)J7(K,$.stackParser);let w=X;if(Y.captureContext)w=W0.clone(w).update(Y.captureContext);if(Y.mechanism)IZ(K,Y.mechanism);let G=e(K);const V=Q&&Q.getEventProcessors?Q.getEventProcessors():[];if(w){if(w.getAttachments){const N=[...Y.attachments||[],...w.getAttachments()];if(N.length)Y.attachments=N}G=w.applyToEvent(K,Y,V)}else G=QZ([...V,...hZ()],K,Y);return G.then((N)=>{if(N)K7(N);if(typeof W==="number"&&W>0)return V7(N,W,J);return N})},W7=function($,Z){const{environment:Y,release:X,dist:Q,maxValueLength:W=250}=Z;if(!("environment"in $))$.environment="environment"in Z?Y:XZ;if($.release===void 0&&X!==void 0)$.release=X;if($.dist===void 0&&Q!==void 0)$.dist=Q;if($.message)$.message=j0($.message,W);const J=$.exception&&$.exception.values&&$.exception.values[0];if(J&&J.value)J.value=j0(J.value,W);const K=$.request;if(K&&K.url)K.url=j0(K.url,W)},J7=function($,Z){const Y=O._sentryDebugIds;if(!Y)return;let X;const Q=KW.get(Z);if(Q)X=Q;else X=new Map,KW.set(Z,X);const W=Object.keys(Y).reduce((J,K)=>{let z;const w=X.get(K);if(w)z=w;else z=Z(K),X.set(K,z);for(let G=z.length-1;G>=0;G--){const V=z[G];if(V.filename){J[V.filename]=Y[K];break}}return J},{});try{$.exception.values.forEach((J)=>{J.stacktrace.frames.forEach((K)=>{if(K.filename)K.debug_id=W[K.filename]})})}catch(J){}},K7=function($){const Z={};try{$.exception.values.forEach((X)=>{X.stacktrace.frames.forEach((Q)=>{if(Q.debug_id){if(Q.abs_path)Z[Q.abs_path]=Q.debug_id;else if(Q.filename)Z[Q.filename]=Q.debug_id;delete Q.debug_id}})})}catch(X){}if(Object.keys(Z).length===0)return;$.debug_meta=$.debug_meta||{},$.debug_meta.images=$.debug_meta.images||[];const Y=$.debug_meta.images;Object.keys(Z).forEach((X)=>{Y.push({type:"sourcemap",code_file:X,debug_id:Z[X]})})},z7=function($,Z){if(Z.length>0)$.sdk=$.sdk||{},$.sdk.integrations=[...$.sdk.integrations||[],...Z]},V7=function($,Z,Y){if(!$)return null;const X={...$,...$.breadcrumbs&&{breadcrumbs:$.breadcrumbs.map((Q)=>({...Q,...Q.data&&{data:t(Q.data,Z,Y)}}))},...$.user&&{user:t($.user,Z,Y)},...$.contexts&&{contexts:t($.contexts,Z,Y)},...$.extra&&{extra:t($.extra,Z,Y)}};if($.contexts&&$.contexts.trace&&X.contexts){if(X.contexts.trace=$.contexts.trace,$.contexts.trace.data)X.contexts.trace.data=t($.contexts.trace.data,Z,Y)}if($.spans)X.spans=$.spans.map((Q)=>{if(Q.data)Q.data=t(Q.data,Z,Y);return Q});return X},VW=function($){if(!$)return;if(G7($))return{captureContext:$};if(N7($))return{captureContext:$};return $},G7=function($){return $ instanceof W0||typeof $==="function"},N7=function($){return Object.keys($).some((Z)=>w7.includes(Z))},KW=new WeakMap,w7=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];var VZ=function($,Z){return R().captureException($,VW(Z))};var x0=function(){return R().getClient()};var mY=function($){if(typeof __SENTRY_TRACING__==="boolean"&&!__SENTRY_TRACING__)return!1;const Z=x0(),Y=$||Z&&Z.getOptions();return!!Y&&(Y.enableTracing||("tracesSampleRate"in Y)||("tracesSampler"in Y))};var GW=function($,Z,Y){if(!mY(Z))return $.sampled=!1,$;if($.sampled!==void 0)return $.setMetadata({sampleRate:Number($.sampled)}),$;let X;if(typeof Z.tracesSampler==="function")X=Z.tracesSampler(Y),$.setMetadata({sampleRate:Number(X)});else if(Y.parentSampled!==void 0)X=Y.parentSampled;else if(typeof Z.tracesSampleRate!=="undefined")X=Z.tracesSampleRate,$.setMetadata({sampleRate:Number(X)});else X=1,$.setMetadata({sampleRate:X});if(!M7(X))return j&&M.warn("[Tracing] Discarding transaction because of invalid sample rate."),$.sampled=!1,$;if(!X)return j&&M.log(`[Tracing] Discarding transaction because ${typeof Z.tracesSampler==="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),$.sampled=!1,$;if($.sampled=Math.random()<X,!$.sampled)return j&&M.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(X)})`),$;return j&&M.log(`[Tracing] starting ${$.op} transaction - ${$.name}`),$},M7=function($){if(OZ($)||!(typeof $==="number"||typeof $==="boolean"))return j&&M.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify($)} of type ${JSON.stringify(typeof $)}.`),!1;if($<0||$>1)return j&&M.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${$}.`),!1;return!0};var L7=function(){const Z=this.getScope().getSpan();return Z?{"sentry-trace":Z.toTraceparent()}:{}},H7=function($,Z){const Y=this.getClient(),X=Y&&Y.getOptions()||{},Q=X.instrumenter||"sentry",W=$.instrumenter||"sentry";if(Q!==W)j&&M.error(`A transaction was started with instrumenter=\`${W}\`, but the SDK is configured with the \`${Q}\` instrumenter.
The transaction will not be sampled. Please use the ${Q} instrumentation to start transactions.`),$.sampled=!1;let J=new zZ($,this);if(J=GW(J,X,{parentSampled:$.parentSampled,transactionContext:$,...Z}),J.sampled)J.initSpanRecorder(X._experiments&&X._experiments.maxSpans);if(Y&&Y.emit)Y.emit("startTransaction",J);return J};var wW=function(){const $=G0();if(!$.__SENTRY__)return;if($.__SENTRY__.extensions=$.__SENTRY__.extensions||{},!$.__SENTRY__.extensions.startTransaction)$.__SENTRY__.extensions.startTransaction=H7;if(!$.__SENTRY__.extensions.traceHeaders)$.__SENTRY__.extensions.traceHeaders=L7;WW()};var dY=function($,Z,Y=()=>{}){const X=MW($),Q=R(),W=Q.getScope(),J=W.getSpan(),K=NW(Q,J,X);W.setSpan(K);function z(){K&&K.finish(),Q.getScope().setSpan(J)}let w;try{w=Z(K)}catch(G){throw K&&K.setStatus("internal_error"),Y(G),z(),G}if(m(w))Promise.resolve(w).then(()=>{z()},(G)=>{K&&K.setStatus("internal_error"),Y(G),z()});else z();return w},uY=function($,Z){const Y=MW($),X=R(),Q=X.getScope(),W=Q.getSpan(),J=NW(X,W,Y);Q.setSpan(J);function K(){J&&J.finish(),X.getScope().setSpan(W)}let z;try{z=Z(J)}catch(w){throw J&&J.setStatus("internal_error"),K(),w}if(m(z))Promise.resolve(z).then(()=>{K()},()=>{J&&J.setStatus("internal_error"),K()});else K();return z};var cY=function({sentryTrace:$,baggage:Z},Y){const Q=R().getScope(),{traceparentData:W,dynamicSamplingContext:J,propagationContext:K}=yZ($,Z);if(Q.setPropagationContext(K),j&&W)M.log(`[Tracing] Continuing trace ${W.traceId}.`);const z={...W,metadata:_({dynamicSamplingContext:W&&!J?{}:J})};if(!Y)return z;return Y(z)},NW=function($,Z,Y){if(!mY())return;return Z?Z.startChild(Y):$.startTransaction(Y)},MW=function($){const Z={...$};if(Z.name!==void 0&&Z.description===void 0)Z.description=Z.name;return Z};var F7=function($,Z){if(!Z)return $;return $.sdk=$.sdk||{},$.sdk.name=$.sdk.name||Z.name,$.sdk.version=$.sdk.version||Z.version,$.sdk.integrations=[...$.sdk.integrations||[],...Z.integrations||[]],$.sdk.packages=[...$.sdk.packages||[],...Z.packages||[]],$},LW=function($,Z,Y,X){const Q=xY(Y),W={sent_at:(new Date()).toISOString(),...Q&&{sdk:Q},...!!X&&Z&&{dsn:f0(Z)}},J="aggregates"in $?[{type:"sessions"},$]:[{type:"session"},$.toJSON()];return y0(W,[J])},HW=function($,Z,Y,X){const Q=xY(Y),W=$.type&&$.type!=="replay_event"?$.type:"event";F7($,Y&&Y.sdk);const J=wX($,Q,X,Z);return delete $.sdkProcessingMetadata,y0(J,[[{type:W},$]])};class DX{constructor($,Z){this._client=$,this.flushTimeout=60,this._pendingAggregates={},this._isEnabled=!0,this._intervalId=setInterval(()=>this.flush(),this.flushTimeout*1000),this._sessionAttrs=Z}flush(){const $=this.getSessionAggregates();if($.aggregates.length===0)return;this._pendingAggregates={},this._client.sendSession($)}getSessionAggregates(){const $=Object.keys(this._pendingAggregates).map((Y)=>{return this._pendingAggregates[parseInt(Y)]}),Z={attrs:this._sessionAttrs,aggregates:$};return _(Z)}close(){clearInterval(this._intervalId),this._isEnabled=!1,this.flush()}incrementSessionStatusCount(){if(!this._isEnabled)return;const $=R().getScope(),Z=$.getRequestSession();if(Z&&Z.status)this._incrementSessionStatusCount(Z.status,new Date),$.setRequestSession(void 0)}_incrementSessionStatusCount($,Z){const Y=new Date(Z).setSeconds(0,0);this._pendingAggregates[Y]=this._pendingAggregates[Y]||{};const X=this._pendingAggregates[Y];if(!X.started)X.started=new Date(Y).toISOString();switch($){case"errored":return X.errored=(X.errored||0)+1,X.errored;case"ok":return X.exited=(X.exited||0)+1,X.exited;default:return X.crashed=(X.crashed||0)+1,X.crashed}}}var j7=function($){const Z=$.protocol?`${$.protocol}:`:"",Y=$.port?`:${$.port}`:"";return`${Z}//${$.host}${Y}${$.path?`/${$.path}`:""}/api/`},U7=function($){return`${j7($)}${$.projectId}/envelope/`},T7=function($,Z){return d1({sentry_key:$.publicKey,sentry_version:B7,...Z&&{sentry_client:`${Z.name}/${Z.version}`}})},FW=function($,Z={}){const Y=typeof Z==="string"?Z:Z.tunnel,X=typeof Z==="string"||!Z._metadata?void 0:Z._metadata.sdk;return Y?Y:`${U7($)}?${T7($,X)}`};var B7="7";var R7=function($){const Z={};return $.forEach((Y)=>{const{name:X}=Y,Q=Z[X];if(Q&&!Q.isDefaultInstance&&Y.isDefaultInstance)return;Z[X]=Y}),Object.keys(Z).map((Y)=>Z[Y])},PX=function($){const Z=$.defaultIntegrations||[],Y=$.integrations;Z.forEach((J)=>{J.isDefaultInstance=!0});let X;if(Array.isArray(Y))X=[...Z,...Y];else if(typeof Y==="function")X=C0(Y(Z));else X=Z;const Q=R7(X),W=D7(Q,(J)=>J.name==="Debug");if(W!==-1){const[J]=Q.splice(W,1);Q.push(J)}return Q},jW=function($,Z){const Y={};return Z.forEach((X)=>{if(X)OX($,X,Y)}),Y},OX=function($,Z,Y){if(Y[Z.name]=Z,BW.indexOf(Z.name)===-1)Z.setupOnce(BX,R),BW.push(Z.name);if(Z.setup&&typeof Z.setup==="function")Z.setup($);if($.on&&typeof Z.preprocessEvent==="function"){const X=Z.preprocessEvent.bind(Z);$.on("preprocessEvent",(Q,W)=>X(Q,W,$))}if($.addEventProcessor&&typeof Z.processEvent==="function"){const X=Z.processEvent.bind(Z),Q=Object.assign((W,J)=>X(W,J,$),{id:Z.name});$.addEventProcessor(Q)}j&&M.log(`Integration installed: ${Z.name}`)};var D7=function($,Z){for(let Y=0;Y<$.length;Y++)if(Z($[Y])===!0)return Y;return-1},BW=[];var P7=function($,Z){const Y=`${Z} must return \`null\` or a valid event.`;if(m($))return $.then((X)=>{if(!n(X)&&X!==null)throw new l(Y);return X},(X)=>{throw new l(`${Z} rejected with ${X}`)});else if(!n($)&&$!==null)throw new l(Y);return $},O7=function($,Z,Y){const{beforeSend:X,beforeSendTransaction:Q}=$;if(TW(Z)&&X)return X(Z,Y);if(RW(Z)&&Q)return Q(Z,Y);return Z},TW=function($){return $.type===void 0},RW=function($){return $.type==="transaction"},UW="Not capturing exception because it's already been captured.";class AX{constructor($){if(this._options=$,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],$.dsn)this._dsn=OY($.dsn);else j&&M.warn("No DSN provided, client will not send events.");if(this._dsn){const Z=FW(this._dsn,$);this._transport=$.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...$.transportOptions,url:Z})}}captureException($,Z,Y){if(kY($)){j&&M.log(UW);return}let X=Z&&Z.event_id;return this._process(this.eventFromException($,Z).then((Q)=>this._captureEvent(Q,Z,Y)).then((Q)=>{X=Q})),X}captureMessage($,Z,Y,X){let Q=Y&&Y.event_id;const W=RY($)?this.eventFromMessage(String($),Z,Y):this.eventFromException($,Y);return this._process(W.then((J)=>this._captureEvent(J,Y,X)).then((J)=>{Q=J})),Q}captureEvent($,Z,Y){if(Z&&Z.originalException&&kY(Z.originalException)){j&&M.log(UW);return}let X=Z&&Z.event_id;return this._process(this._captureEvent($,Z,Y).then((Q)=>{X=Q})),X}captureSession($){if(typeof $.release!=="string")j&&M.warn("Discarded session because of missing or non-string release");else this.sendSession($),k0($,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush($){const Z=this._transport;if(Z)return this._isClientDoneProcessing($).then((Y)=>{return Z.flush($).then((X)=>Y&&X)});else return e(!0)}close($){return this.flush($).then((Z)=>{return this.getOptions().enabled=!1,Z})}getEventProcessors(){return this._eventProcessors}addEventProcessor($){this._eventProcessors.push($)}setupIntegrations($){if($&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)this._integrations=jW(this,this._options.integrations),this._integrationsInitialized=!0}getIntegrationById($){return this._integrations[$]}getIntegration($){try{return this._integrations[$.id]||null}catch(Z){return j&&M.warn(`Cannot retrieve integration ${$.id} from the current Client`),null}}addIntegration($){OX(this,$,this._integrations)}sendEvent($,Z={}){this.emit("beforeSendEvent",$,Z);let Y=HW($,this._dsn,this._options._metadata,this._options.tunnel);for(let Q of Z.attachments||[])Y=VX(Y,GX(Q,this._options.transportOptions&&this._options.transportOptions.textEncoder));const X=this._sendEnvelope(Y);if(X)X.then((Q)=>this.emit("afterSendEvent",$,Q),null)}sendSession($){const Z=LW($,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(Z)}recordDroppedEvent($,Z,Y){if(this._options.sendClientReports){const X=`${$}:${Z}`;j&&M.log(`Adding outcome: "${X}"`),this._outcomes[X]=this._outcomes[X]+1||1}}on($,Z){if(!this._hooks[$])this._hooks[$]=[];this._hooks[$].push(Z)}emit($,...Z){if(this._hooks[$])this._hooks[$].forEach((Y)=>Y(...Z))}_updateSessionFromEvent($,Z){let Y=!1,X=!1;const Q=Z.exception&&Z.exception.values;if(Q){X=!0;for(let K of Q){const z=K.mechanism;if(z&&z.handled===!1){Y=!0;break}}}const W=$.status==="ok";if(W&&$.errors===0||W&&Y)k0($,{...Y&&{status:"crashed"},errors:$.errors||Number(X||Y)}),this.captureSession($)}_isClientDoneProcessing($){return new u((Z)=>{let Y=0;const X=1,Q=setInterval(()=>{if(this._numProcessing==0)clearInterval(Q),Z(!0);else if(Y+=X,$&&Y>=$)clearInterval(Q),Z(!1)},X)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent($,Z,Y){const X=this.getOptions(),Q=Object.keys(this._integrations);if(!Z.integrations&&Q.length>0)Z.integrations=Q;return this.emit("preprocessEvent",$,Z),zW(X,$,Z,Y,this).then((W)=>{if(W===null)return W;const{propagationContext:J}=W.sdkProcessingMetadata||{};if(!(W.contexts&&W.contexts.trace)&&J){const{traceId:z,spanId:w,parentSpanId:G,dsc:V}=J;W.contexts={trace:{trace_id:z,span_id:w,parent_span_id:G},...W.contexts};const N=V?V:w0(z,this,Y);W.sdkProcessingMetadata={dynamicSamplingContext:N,...W.sdkProcessingMetadata}}return W})}_captureEvent($,Z={},Y){return this._processEvent($,Z,Y).then((X)=>{return X.event_id},(X)=>{if(j){const Q=X;if(Q.logLevel==="log")M.log(Q.message);else M.warn(Q)}return})}_processEvent($,Z,Y){const X=this.getOptions(),{sampleRate:Q}=X,W=RW($),J=TW($),K=$.type||"error",z=`before send for type \`${K}\``;if(J&&typeof Q==="number"&&Math.random()>Q)return this.recordDroppedEvent("sample_rate","error",$),L$(new l(`Discarding event because it's not included in the random sample (sampling rate = ${Q})`,"log"));const w=K==="replay_event"?"replay":K;return this._prepareEvent($,Z,Y).then((G)=>{if(G===null)throw this.recordDroppedEvent("event_processor",w,$),new l("An event processor returned `null`, will not send event.","log");if(Z.data&&Z.data.__sentry__===!0)return G;const N=O7(X,G,Z);return P7(N,z)}).then((G)=>{if(G===null)throw this.recordDroppedEvent("before_send",w,$),new l(`${z} returned \`null\`, will not send event.`,"log");const V=Y&&Y.getSession();if(!W&&V)this._updateSessionFromEvent(V,G);const N=G.transaction_info;if(W&&N&&G.transaction!==$.transaction)G.transaction_info={...N,source:"custom"};return this.sendEvent(G,Z),G}).then(null,(G)=>{if(G instanceof l)throw G;throw this.captureException(G,{data:{__sentry__:!0},originalException:G}),new l(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${G}`)})}_process($){this._numProcessing++,$.then((Z)=>{return this._numProcessing--,Z},(Z)=>{return this._numProcessing--,Z})}_sendEnvelope($){if(this.emit("beforeEnvelope",$),this._isEnabled()&&this._transport)return this._transport.send($).then(null,(Z)=>{j&&M.error("Error while sending event:",Z)});else j&&M.error("Transport disabled")}_clearOutcomes(){const $=this._outcomes;return this._outcomes={},Object.keys($).map((Z)=>{const[Y,X]=Z.split(":");return{reason:Y,category:X,quantity:$[Z]}})}}var DW=function($,Z,Y,X,Q){const W={sent_at:(new Date()).toISOString()};if(Y&&Y.sdk)W.sdk={name:Y.sdk.name,version:Y.sdk.version};if(!!X&&!!Q)W.dsn=f0(Q);if(Z)W.trace=_(Z);const J=A7($);return y0(W,[J])},A7=function($){return[{type:"check_in"},$]};class GZ extends AX{constructor($){wW();super($)}eventFromException($,Z){return e(HX(R,this._options.stackParser,$,Z))}eventFromMessage($,Z="info",Y){return e(FX(this._options.stackParser,$,Z,Y,this._options.attachStacktrace))}captureException($,Z,Y){if(this._options.autoSessionTracking&&this._sessionFlusher&&Y){const X=Y.getRequestSession();if(X&&X.status==="ok")X.status="errored"}return super.captureException($,Z,Y)}captureEvent($,Z,Y){if(this._options.autoSessionTracking&&this._sessionFlusher&&Y){if(($.type||"exception")==="exception"&&$.exception&&$.exception.values&&$.exception.values.length>0){const W=Y.getRequestSession();if(W&&W.status==="ok")W.status="errored"}}return super.captureEvent($,Z,Y)}close($){if(this._sessionFlusher)this._sessionFlusher.close();return super.close($)}initSessionFlusher(){const{release:$,environment:Z}=this._options;if(!$)j&&M.warn("Cannot initialise an instance of SessionFlusher if no release is provided!");else this._sessionFlusher=new DX(this,{release:$,environment:Z})}captureCheckIn($,Z,Y){const X=$.status!=="in_progress"&&$.checkInId?$.checkInId:I();if(!this._isEnabled())return j&&M.warn("SDK not enabled, will not capture checkin."),X;const Q=this.getOptions(),{release:W,environment:J,tunnel:K}=Q,z={check_in_id:X,monitor_slug:$.monitorSlug,status:$.status,release:W,environment:J};if($.status!=="in_progress")z.duration=$.duration;if(Z)z.monitor_config={schedule:Z.schedule,checkin_margin:Z.checkinMargin,max_runtime:Z.maxRuntime,timezone:Z.timezone};const[w,G]=this._getTraceInfoFromScope(Y);if(G)z.contexts={trace:G};const V=DW(z,w,this.getSdkMetadata(),K,this.getDsn());return j&&M.info("Sending checkin:",$.monitorSlug,$.status),this._sendEnvelope(V),X}_captureRequestSession(){if(!this._sessionFlusher)j&&M.warn("Discarded request mode session because autoSessionTracking option was disabled");else this._sessionFlusher.incrementSessionStatusCount()}_prepareEvent($,Z,Y){if(this._options.platform)$.platform=$.platform||this._options.platform;if(this._options.runtime)$.contexts={...$.contexts,runtime:($.contexts||{}).runtime||this._options.runtime};if(this._options.serverName)$.server_name=$.server_name||this._options.serverName;return super._prepareEvent($,Z,Y)}_getTraceInfoFromScope($){if(!$)return[void 0,void 0];const Z=$.getSpan();if(Z)return[Z.transaction?Z.transaction.getDynamicSamplingContext():void 0,Z.getTraceContext()];const{traceId:Y,spanId:X,parentSpanId:Q,dsc:W}=$.getPropagationContext(),J={trace_id:Y,span_id:X,parent_span_id:Q};if(W)return[W,J];return[w0(Y,this,$),J]}}var qX=function($,Z){if(Z.debug===!0)if(j)M.enable();else p(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")});const Y=R();Y.getScope().update(Z.initialScope);const Q=new $(Z);Y.bindClient(Q)};var T$=function($,Z,Y=$X($.bufferSize||q7)){let X={};const Q=(J)=>Y.drain(J);function W(J){const K=[];if(_Y(J,(V,N)=>{const H=yY(N);if(NX(X,H)){const F=PW(V,N);$.recordDroppedEvent("ratelimit_backoff",H,F)}else K.push(V)}),K.length===0)return e();const z=y0(J[0],K),w=(V)=>{_Y(z,(N,H)=>{const F=PW(N,H);$.recordDroppedEvent(V,yY(H),F)})},G=()=>Z({body:xZ(z,$.textEncoder)}).then((V)=>{if(V.statusCode!==void 0&&(V.statusCode<200||V.statusCode>=300))j&&M.warn(`Sentry responded with status code ${V.statusCode} to sent event.`);return X=MX(X,V),V},(V)=>{throw w("network_error"),V});return Y.add(G).then((V)=>V,(V)=>{if(V instanceof l)return j&&M.error("Skipped sending event because buffer is full."),w("queue_overflow"),e();else throw V})}return W.__sentry__baseTransport__=!0,{send:W,flush:Q}},PW=function($,Z){if(Z!=="event"&&Z!=="transaction")return;return Array.isArray($)?$[1]:void 0},q7=30;var b0="7.84.0";var a={};tZ(a,{LinkedErrors:()=>{{return aY}},InboundFilters:()=>{{return iY}},FunctionToString:()=>{{return pY}}});var OW;class pY{static __initStatic(){this.id="FunctionToString"}constructor(){this.name=pY.id}setupOnce(){OW=Function.prototype.toString;try{Function.prototype.toString=function(...$){const Z=m1(this)||this;return OW.apply(Z,$)}}catch($){}}}pY.__initStatic();var S7=function($={},Z={}){return{allowUrls:[...$.allowUrls||[],...Z.allowUrls||[]],denyUrls:[...$.denyUrls||[],...Z.denyUrls||[]],ignoreErrors:[...$.ignoreErrors||[],...Z.ignoreErrors||[],...$.disableErrorDefaults?[]:E7],ignoreTransactions:[...$.ignoreTransactions||[],...Z.ignoreTransactions||[],...$.disableTransactionDefaults?[]:k7],ignoreInternal:$.ignoreInternal!==void 0?$.ignoreInternal:!0}},I7=function($,Z){if(Z.ignoreInternal&&b7($))return j&&M.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${q0($)}`),!0;if(f7($,Z.ignoreErrors))return j&&M.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${q0($)}`),!0;if(C7($,Z.ignoreTransactions))return j&&M.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${q0($)}`),!0;if(_7($,Z.denyUrls))return j&&M.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${q0($)}.\nUrl: ${lY($)}`),!0;if(!y7($,Z.allowUrls))return j&&M.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${q0($)}.\nUrl: ${lY($)}`),!0;return!1},f7=function($,Z){if($.type||!Z||!Z.length)return!1;return x7($).some((Y)=>U0(Y,Z))},C7=function($,Z){if($.type!=="transaction"||!Z||!Z.length)return!1;const Y=$.transaction;return Y?U0(Y,Z):!1},_7=function($,Z){if(!Z||!Z.length)return!1;const Y=lY($);return!Y?!1:U0(Y,Z)},y7=function($,Z){if(!Z||!Z.length)return!0;const Y=lY($);return!Y?!0:U0(Y,Z)},x7=function($){const Z=[];if($.message)Z.push($.message);let Y;try{Y=$.exception.values[$.exception.values.length-1]}catch(X){}if(Y){if(Y.value){if(Z.push(Y.value),Y.type)Z.push(`${Y.type}: ${Y.value}`)}}if(j&&Z.length===0)M.error(`Could not extract message for event ${q0($)}`);return Z},b7=function($){try{return $.exception.values[0].type==="SentryError"}catch(Z){}return!1},h7=function($=[]){for(let Z=$.length-1;Z>=0;Z--){const Y=$[Z];if(Y&&Y.filename!=="<anonymous>"&&Y.filename!=="[native code]")return Y.filename||null}return null},lY=function($){try{let Z;try{Z=$.exception.values[0].stacktrace.frames}catch(Y){}return Z?h7(Z):null}catch(Z){return j&&M.error(`Cannot extract url for event ${q0($)}`),null}},E7=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],k7=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/];class iY{static __initStatic(){this.id="InboundFilters"}constructor($={}){this.name=iY.id,this._options=$}setupOnce($,Z){}processEvent($,Z,Y){const X=Y.getOptions(),Q=S7(this._options,X);return I7($,Q)?null:$}}iY.__initStatic();var v7="cause",g7=5;class aY{static __initStatic(){this.id="LinkedErrors"}constructor($={}){this._key=$.key||v7,this._limit=$.limit||g7,this.name=aY.id}setupOnce(){}preprocessEvent($,Z,Y){const X=Y.getOptions();v1(bY,X.stackParser,X.maxValueLength,this._key,this._limit,$,Z)}}aY.__initStatic();var R$=function($,Z){const Y=Z.getClient(),X=Y&&Y.getDsn(),Q=Y&&Y.getOptions().tunnel;return d7($,X)||m7($,Q)},m7=function($,Z){if(!Z)return!1;return AW($)===AW(Z)},d7=function($,Z){return Z?$.includes(Z.host):!1},AW=function($){return $[$.length-1]==="/"?$.slice(0,-1):$};var u7=function($){const{transactionNamingScheme:Z,include:{ip:Y,user:X,...Q}}=$,W=[];for(let[K,z]of Object.entries(Q))if(z)W.push(K);let J;if(X===void 0)J=!0;else if(typeof X==="boolean")J=X;else{const K=[];for(let[z,w]of Object.entries(X))if(w)K.push(z);J=K}return{include:{ip:Y,user:J,request:W.length!==0?W:void 0,transaction:Z}}},c7=function($){try{return $.getClient().getOptions()._metadata.sdk.name}catch(Z){return}},EX={include:{cookies:!0,data:!0,headers:!0,ip:!1,query_string:!0,url:!0,user:{id:!0,username:!0,email:!0}},transactionNamingScheme:"methodPath"};class h0{static __initStatic(){this.id="RequestData"}constructor($={}){this.name=h0.id,this._addRequestData=YX,this._options={...EX,...$,include:{method:!0,...EX.include,...$.include,user:$.include&&typeof $.include.user==="boolean"?$.include.user:{...EX.include.user,...($.include||{}).user}}}}setupOnce($,Z){const{transactionNamingScheme:Y}=this._options;$((X)=>{const Q=Z(),W=Q.getIntegration(h0),{sdkProcessingMetadata:J={}}=X,K=J.request;if(!W||!K)return X;const z=J.requestDataOptionsFromExpressHandler||J.requestDataOptionsFromGCPWrapper||u7(this._options),w=this._addRequestData(X,K,z);if(X.type==="transaction"||Y==="handler")return w;const V=K._sentryTransaction;if(V){const N=c7(Q)==="sentry.javascript.nextjs"?V.name.startsWith("/api"):Y!=="path",[H]=F$(K,{path:!0,method:N,customRoute:V.name});w.transaction=H}return w})}}h0.__initStatic();var k=typeof __SENTRY_DEBUG__==="undefined"||__SENTRY_DEBUG__;var s=function($){const Z=L([$,"call",(X)=>X(),"access",(X)=>X.getClient,"call",(X)=>X(),"optionalAccess",(X)=>X.getOptions,"call",(X)=>X()]);return(L([Z,"optionalAccess",(X)=>X.instrumenter])||"sentry")!=="sentry"};var qW=function($,Z){const Y=$.length;switch(Y){case 2:return function(X,Q){const W=Q.__sentry_transaction;if(W){const J=W.startChild({description:$.name,op:`middleware.express.${Z}`,origin:"auto.middleware.express"});Q.once("finish",()=>{J.finish()})}return $.call(this,X,Q)};case 3:return function(X,Q,W){const J=Q.__sentry_transaction,K=L([J,"optionalAccess",(z)=>z.startChild,"call",(z)=>z({description:$.name,op:`middleware.express.${Z}`,origin:"auto.middleware.express"})]);$.call(this,X,Q,function(...z){L([K,"optionalAccess",(w)=>w.finish,"call",(w)=>w()]),W.call(this,...z)})};case 4:return function(X,Q,W,J){const K=W.__sentry_transaction,z=L([K,"optionalAccess",(w)=>w.startChild,"call",(w)=>w({description:$.name,op:`middleware.express.${Z}`,origin:"auto.middleware.express"})]);$.call(this,X,Q,W,function(...w){L([z,"optionalAccess",(G)=>G.finish,"call",(G)=>G()]),J.call(this,...w)})};default:throw new Error(`Express middleware takes 2-4 arguments. Got: ${Y}`)}},w6=function($,Z){return $.map((Y)=>{if(typeof Y==="function")return qW(Y,Z);if(Array.isArray(Y))return Y.map((X)=>{if(typeof X==="function")return qW(X,Z);return X});return Y})},N6=function($,Z){const Y=$[Z];return $[Z]=function(...X){return Y.call(this,...w6(X,Z))},$},M6=function($,Z=[]){Z.forEach((Y)=>N6($,Y))},L6=function($){const Z="settings"in $;if(Z&&$._router===void 0&&$.lazyrouter)$.lazyrouter();const Y=Z?$._router:$;if(!Y){k&&M.debug("Cannot instrument router for URL Parameterization (did not find a valid router)."),k&&M.debug("Routing instrumentation is currently only supported in Express 4.");return}const X=Object.getPrototypeOf(Y),Q=X.process_params;X.process_params=function W(J,K,z,w,G){if(!z._reconstructedRoute)z._reconstructedRoute="";const{layerRoutePath:V,isRegex:N,isArray:H,numExtraSegments:F}=F6(J);if(V||N||H)z._hasParameters=!0;let B;if(V)B=V;else B=U6(z.originalUrl,z._reconstructedRoute,J.path)||"";const T=B.split("/").filter((f)=>f.length>0&&(N||H||!f.includes("*"))).join("/");if(T&&T.length>0)z._reconstructedRoute+=`/${T}${N?"/":""}`;const A=ZZ(H$(z.originalUrl||""))+F,S=ZZ(z._reconstructedRoute);if(A===S){if(!z._hasParameters){if(z._reconstructedRoute!==z.originalUrl)z._reconstructedRoute=z.originalUrl?H$(z.originalUrl):z.originalUrl}const f=w.__sentry_transaction;if(f&&f.metadata.source!=="custom"){const q=z._reconstructedRoute||"/";f.setName(...F$(z,{path:!0,method:!0,customRoute:q}))}}return Q.call(this,J,K,z,w,G)}},F6=function($){let Z=L([$,"access",(J)=>J.route,"optionalAccess",(J)=>J.path]);const Y=PZ(Z),X=Array.isArray(Z);if(!Z){const[J]=O.process.versions.node.split(".").map(Number);if(J>=16)Z=H6($.path,$.regexp,$.keys)}if(!Z)return{isRegex:Y,isArray:X,numExtraSegments:0};const Q=X?Math.max(B6(Z)-ZZ($.path||""),0):0;return{layerRoutePath:j6(X,Z),isRegex:Y,isArray:X,numExtraSegments:Q}},B6=function($){return $.reduce((Z,Y)=>{return Z+ZZ(Y.toString())},0)},j6=function($,Z){if($)return Z.map((Y)=>Y.toString()).join(",");return Z&&Z.toString()},U6=function($,Z,Y){const X=H$($||""),Q=L([X,"optionalAccess",(z)=>z.split,"call",(z)=>z("/"),"access",(z)=>z.filter,"call",(z)=>z((w)=>!!w)]);let W=0;const J=L([Z,"optionalAccess",(z)=>z.split,"call",(z)=>z("/"),"access",(z)=>z.filter,"call",(z)=>z((w)=>!!w),"access",(z)=>z.length])||0;return L([Y,"optionalAccess",(z)=>z.split,"call",(z)=>z("/"),"access",(z)=>z.filter,"call",(z)=>z((w)=>{if(L([Q,"optionalAccess",(G)=>G[J+W]])===w)return W+=1,!0;return!1}),"access",(z)=>z.join,"call",(z)=>z("/")])};class gZ{static __initStatic(){this.id="Express"}constructor($={}){this.name=gZ.id,this._router=$.router||$.app,this._methods=(Array.isArray($.methods)?$.methods:[]).concat("use")}setupOnce($,Z){if(!this._router){k&&M.error("ExpressIntegration is missing an Express instance");return}if(s(Z)){k&&M.log("Express Integration is skipped because of instrumenter configuration.");return}M6(this._router,this._methods),L6(this._router)}}gZ.__initStatic();var H6=($,Z,Y)=>{if(!$||!Z||!Y||Object.keys(Y).length===0||!L([Y,"access",(w)=>w[0],"optionalAccess",(w)=>w.offset]))return;const X=Y.sort((w,G)=>w.offset-G.offset),W=new RegExp(Z,`${Z.flags}d`).exec($);if(!W||!W.indices)return;const[,...J]=W.indices;if(J.length!==X.length)return;let K=$,z=0;return J.forEach((w,G)=>{if(w){const[V,N]=w,H=K.substring(0,V-z),F=`:${X[G].name}`,B=K.substring(N-z);K=H+F+B,z=z+(N-V-F.length)}}),K};class mZ{static __initStatic(){this.id="Postgres"}constructor($={}){this.name=mZ.id,this._usePgNative=!!$.usePgNative,this._module=$.module}loadDependency(){return this._module=this._module||X0("pg")}setupOnce($,Z){if(s(Z)){k&&M.log("Postgres Integration is skipped because of instrumenter configuration.");return}const Y=this.loadDependency();if(!Y){k&&M.error("Postgres Integration was unable to require `pg` package.");return}const X=this._usePgNative?L([Y,"access",(Q)=>Q.native,"optionalAccess",(Q)=>Q.Client]):Y.Client;if(!X){k&&M.error("Postgres Integration was unable to access 'pg-native' bindings.");return}C(X.prototype,"query",function(Q){return function(W,J,K){const w=Z().getScope().getSpan(),G={"db.system":"postgresql"};try{if(this.database)G["db.name"]=this.database;if(this.host)G["server.address"]=this.host;if(this.port)G["server.port"]=this.port;if(this.user)G["db.user"]=this.user}catch(H){}const V=L([w,"optionalAccess",(H)=>H.startChild,"call",(H)=>H({description:typeof W==="string"?W:W.text,op:"db",origin:"auto.db.postgres",data:G})]);if(typeof K==="function")return Q.call(this,W,J,function(H,F){L([V,"optionalAccess",(B)=>B.finish,"call",(B)=>B()]),K(H,F)});if(typeof J==="function")return Q.call(this,W,function(H,F){L([V,"optionalAccess",(B)=>B.finish,"call",(B)=>B()]),J(H,F)});const N=typeof J!=="undefined"?Q.call(this,W,J):Q.call(this,W);if(m(N))return N.then((H)=>{return L([V,"optionalAccess",(F)=>F.finish,"call",(F)=>F()]),H});return L([V,"optionalAccess",(H)=>H.finish,"call",(H)=>H()]),N}})}}mZ.__initStatic();class dZ{static __initStatic(){this.id="Mysql"}constructor(){this.name=dZ.id}loadDependency(){return this._module=this._module||X0("mysql/lib/Connection.js")}setupOnce($,Z){if(s(Z)){k&&M.log("Mysql Integration is skipped because of instrumenter configuration.");return}const Y=this.loadDependency();if(!Y){k&&M.error("Mysql Integration was unable to require `mysql` package.");return}let X=void 0;try{Y.prototype.connect=new Proxy(Y.prototype.connect,{apply(J,K,z){if(!X)X=K.config;return J.apply(K,z)}})}catch(J){k&&M.error("Mysql Integration was unable to instrument `mysql` config.")}function Q(){if(!X)return{};return{"server.address":X.host,"server.port":X.port,"db.user":X.user}}function W(J){if(!J||J.endTimestamp)return;const K=Q();Object.keys(K).forEach((z)=>{J.setData(z,K[z])}),J.finish()}C(Y,"createQuery",function(J){return function(K,z,w){const V=Z().getScope().getSpan(),N=L([V,"optionalAccess",(F)=>F.startChild,"call",(F)=>F({description:typeof K==="string"?K:K.sql,op:"db",origin:"auto.db.mysql",data:{"db.system":"mysql"}})]);if(typeof w==="function")return J.call(this,K,z,function(F,B,T){W(N),w(F,B,T)});if(typeof z==="function")return J.call(this,K,function(F,B,T){W(N),z(F,B,T)});const H=J.call(this,K,z);return H.on("end",()=>{W(N)}),H}})}}dZ.__initStatic();var D6=function($){return $&&typeof $==="object"&&$.once&&typeof $.once==="function"},T6=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],R6={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]};class uZ{static __initStatic(){this.id="Mongo"}constructor($={}){this.name=uZ.id,this._operations=Array.isArray($.operations)?$.operations:T6,this._describeOperations="describeOperations"in $?$.describeOperations:!0,this._useMongoose=!!$.useMongoose}loadDependency(){const $=this._useMongoose?"mongoose":"mongodb";return this._module=this._module||X0($)}setupOnce($,Z){if(s(Z)){k&&M.log("Mongo Integration is skipped because of instrumenter configuration.");return}const Y=this.loadDependency();if(!Y){const X=this._useMongoose?"mongoose":"mongodb";k&&M.error(`Mongo Integration was unable to require \`${X}\` package.`);return}this._instrumentOperations(Y.Collection,this._operations,Z)}_instrumentOperations($,Z,Y){Z.forEach((X)=>this._patchOperation($,X,Y))}_patchOperation($,Z,Y){if(!(Z in $.prototype))return;const X=this._getSpanContextFromOperationArguments.bind(this);C($.prototype,Z,function(Q){return function(...W){const J=W[W.length-1],z=Y().getScope().getSpan();if(typeof J!=="function"||Z==="mapReduce"&&W.length===2){const G=L([z,"optionalAccess",(N)=>N.startChild,"call",(N)=>N(X(this,Z,W))]),V=Q.call(this,...W);if(m(V))return V.then((N)=>{return L([G,"optionalAccess",(H)=>H.finish,"call",(H)=>H()]),N});else if(D6(V)){const N=V;try{N.once("close",()=>{L([G,"optionalAccess",(H)=>H.finish,"call",(H)=>H()])})}catch(H){L([G,"optionalAccess",(F)=>F.finish,"call",(F)=>F()])}return N}else return L([G,"optionalAccess",(N)=>N.finish,"call",(N)=>N()]),V}const w=L([z,"optionalAccess",(G)=>G.startChild,"call",(G)=>G(X(this,Z,W.slice(0,-1)))]);return Q.call(this,...W.slice(0,-1),function(G,V){L([w,"optionalAccess",(N)=>N.finish,"call",(N)=>N()]),J(G,V)})}})}_getSpanContextFromOperationArguments($,Z,Y){const X={"db.system":"mongodb","db.name":$.dbName,"db.operation":Z,"db.mongodb.collection":$.collectionName},Q={op:"db",origin:"auto.db.mongo",description:Z,data:X},W=R6[Z],J=Array.isArray(this._describeOperations)?this._describeOperations.includes(Z):this._describeOperations;if(!W||!J)return Q;try{if(Z==="mapReduce"){const[K,z]=Y;X[W[0]]=typeof K==="string"?K:K.name||"<anonymous>",X[W[1]]=typeof z==="string"?z:z.name||"<anonymous>"}else for(let K=0;K<W.length;K++)X[`db.mongodb.${W[K]}`]=JSON.stringify(Y[K])}catch(K){}return Q}}uZ.__initStatic();var P6=function($){return!!$&&!!$.$use};class cZ{static __initStatic(){this.id="Prisma"}constructor($={}){if(this.name=cZ.id,P6($.client)&&!$.client._sentryInstrumented){n$($.client,"_sentryInstrumented",!0);const Z={};try{const Y=$.client._engineConfig;if(Y){const{activeProvider:X,clientVersion:Q}=Y;if(X)Z["db.system"]=X;if(Q)Z["db.prisma.version"]=Q}}catch(Y){}$.client.$use((Y,X)=>{if(s(R))return X(Y);const{action:Q,model:W}=Y;return dY({name:W?`${W} ${Q}`:Q,op:"db.prisma",origin:"auto.db.prisma",data:{...Z,"db.operation":Q}},()=>X(Y))})}else k&&M.warn("Unsupported Prisma client provided to PrismaIntegration. Provided client:",$.client)}setupOnce(){}}cZ.__initStatic();class pZ{static __initStatic(){this.id="GraphQL"}constructor(){this.name=pZ.id}loadDependency(){return this._module=this._module||X0("graphql/execution/execute.js")}setupOnce($,Z){if(s(Z)){k&&M.log("GraphQL Integration is skipped because of instrumenter configuration.");return}const Y=this.loadDependency();if(!Y){k&&M.error("GraphQL Integration was unable to require graphql/execution package.");return}C(Y,"execute",function(X){return function(...Q){const W=Z().getScope(),J=W.getSpan(),K=L([J,"optionalAccess",(w)=>w.startChild,"call",(w)=>w({description:"execute",op:"graphql.execute",origin:"auto.graphql.graphql"})]);L([W,"optionalAccess",(w)=>w.setSpan,"call",(w)=>w(K)]);const z=X.call(this,...Q);if(m(z))return z.then((w)=>{return L([K,"optionalAccess",(G)=>G.finish,"call",(G)=>G()]),L([W,"optionalAccess",(G)=>G.setSpan,"call",(G)=>G(J)]),w});return L([K,"optionalAccess",(w)=>w.finish,"call",(w)=>w()]),L([W,"optionalAccess",(w)=>w.setSpan,"call",(w)=>w(J)]),z}})}}pZ.__initStatic();var EW=function($,Z){return $.map((Y)=>{return Object.keys(Y).forEach((X)=>{Object.keys(Y[X]).forEach((Q)=>{if(typeof Y[X][Q]!=="function")return;O6(Y,X,Q,Z)})}),Y})},O6=function($,Z,Y,X){C($[Z],Y,function(Q){return function(...W){const K=X().getScope().getSpan(),z=L([K,"optionalAccess",(G)=>G.startChild,"call",(G)=>G({description:`${Z}.${Y}`,op:"graphql.resolve",origin:"auto.graphql.apollo"})]),w=Q.call(this,...W);if(m(w))return w.then((G)=>{return L([z,"optionalAccess",(V)=>V.finish,"call",(V)=>V()]),G});return L([z,"optionalAccess",(G)=>G.finish,"call",(G)=>G()]),w}})};class lZ{static __initStatic(){this.id="Apollo"}constructor($={useNestjs:!1}){this.name=lZ.id,this._useNest=!!$.useNestjs}loadDependency(){if(this._useNest)this._module=this._module||X0("@nestjs/graphql");else this._module=this._module||X0("apollo-server-core");return this._module}setupOnce($,Z){if(s(Z)){k&&M.log("Apollo Integration is skipped because of instrumenter configuration.");return}if(this._useNest){const Y=this.loadDependency();if(!Y){k&&M.error("Apollo-NestJS Integration was unable to require @nestjs/graphql package.");return}C(Y.GraphQLFactory.prototype,"mergeWithSchema",function(X){return function(...Q){return C(this.resolversExplorerService,"explore",function(W){return function(){const J=C0(W.call(this));return EW(J,Z)}}),X.call(this,...Q)}})}else{const Y=this.loadDependency();if(!Y){k&&M.error("Apollo Integration was unable to require apollo-server-core package.");return}C(Y.ApolloServerBase.prototype,"constructSchema",function(X){return function(){if(!this.config.resolvers){if(k){if(this.config.schema)M.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `schema` property.If you are using NestJS with Apollo, please use `Sentry.Integrations.Apollo({ useNestjs: true })` instead."),M.warn();else if(this.config.modules)M.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `modules` property.");M.error("Skipping tracing as no resolvers found on the `ApolloServer` instance.")}return X.call(this)}const Q=C0(this.config.resolvers);return this.config.resolvers=EW(Q,Z),X.call(this)}})}}}lZ.__initStatic();import*as kW from"os";import{TextEncoder as A6} from"util";class kX extends GZ{constructor($){$._metadata=$._metadata||{},$._metadata.sdk=$._metadata.sdk||{name:"sentry.javascript.node",packages:[{name:"npm:@sentry/node",version:b0}],version:b0},$.transportOptions={textEncoder:new A6,...$.transportOptions};const Z={...$,platform:"node",runtime:{name:"node",version:global.process.version},serverName:$.serverName||global.process.env.SENTRY_NAME||kW.hostname()};super(Z)}}import*as kJ from"http";import*as SJ from"https";import{Readable as IJ} from"stream";import{URL as Z8} from"url";import{createGzip as fJ} from"zlib";var Y8=v8($8(),1),_J=function($){return new IJ({read(){this.push($),this.push(null)}})},X8=function($){let Z;try{Z=new Z8($.url)}catch(z){return p(()=>{console.warn("[@sentry/node]: Invalid dsn or tunnel option, will not send any events. The tunnel option must be a full URL when used.")}),T$($,()=>Promise.resolve({}))}const Y=Z.protocol==="https:",X=yJ(Z,$.proxy||(Y?process.env.https_proxy:void 0)||process.env.http_proxy),Q=Y?SJ:kJ,W=$.keepAlive===void 0?!1:$.keepAlive,J=X?new Y8.HttpsProxyAgent(X):new Q.Agent({keepAlive:W,maxSockets:30,timeout:2000}),K=xJ($,bZ($.httpModule,()=>Q),J);return T$($,K)},yJ=function($,Z){const{no_proxy:Y}=process.env;if(Y&&Y.split(",").some((Q)=>$.host.endsWith(Q)||$.hostname.endsWith(Q)))return;else return Z},xJ=function($,Z,Y){const{hostname:X,pathname:Q,port:W,protocol:J,search:K}=new Z8($.url);return function z(w){return new Promise((G,V)=>{let N=_J(w.body);const H={...$.headers};if(w.body.length>CJ)H["content-encoding"]="gzip",N=N.pipe(fJ());const F=Z.request({method:"POST",agent:Y,headers:H,hostname:X,path:`${Q}${K}`,port:W,protocol:J,ca:$.caCerts},(B)=>{B.on("data",()=>{}),B.on("end",()=>{}),B.setEncoding("utf8");const T=bZ(B.headers["retry-after"],()=>null),A=bZ(B.headers["x-sentry-rate-limits"],()=>null);G({statusCode:B.statusCode,headers:{"retry-after":T,"x-sentry-rate-limits":Array.isArray(A)?A[0]:A}})});F.on("error",V),N.pipe(F)})}},CJ=32768;import{spawn as QN} from"child_process";import{posix as bJ,sep as hJ} from"path";var gJ=function($){return $.replace(/^[A-Z]:/,"").replace(/\\/g,"/")},Q8=function($,Z=vJ){if(!$)return;const Y=Z?gJ($):$;let{root:X,dir:Q,base:W,ext:J}=bJ.parse(Y);const z=`${require&&require.main&&require.main.filename&&Q||global.process.cwd()}/`;let w=W;if(J===".js"||J===".mjs"||J===".cjs")w=w.slice(0,J.length*-1);if(!X&&!Q)Q=".";let G=Q.lastIndexOf("/node_modules/");if(G>-1)return`${Q.slice(G+14).replace(/\//g,".")}:${w}`;if(G=`${Q}/`.lastIndexOf(z,0),G===0){let V=Q.slice(z.length).replace(/\//g,".");if(V)V+=":";return V+=w,V}return w},vJ=hJ==="\\";var W8=function(){return!!process.send&&!!process.env.SENTRY_ANR_CHILD_PROCESS};var r=s1(process.versions.node);import*as Z1 from"domain";var J8=function(){return Z1.active},mJ=function(){const $=J8();if(!$)return;return JZ($),J0($)},dJ=function($){const Z={};return JZ(Z,$),J0(Z)},uJ=function($,Z){const Y=J8();if(Y&&L([Z,"optionalAccess",(J)=>J.reuseExisting]))return $();const X=Z1.create(),Q=Y?J0(Y):void 0,W=dJ(Q);return KZ(X,W),X.bind(()=>{return $()})()},K8=function(){vZ({getCurrentHub:mJ,runWithAsyncContext:uJ})};import*as z8 from"async_hooks";var V8=function(){if(!Y1)Y1=new z8.AsyncLocalStorage;function $(){return Y1.getStore()}function Z(X){const Q={};return JZ(Q,X),J0(Q)}function Y(X,Q){const W=$();if(W&&L([Q,"optionalAccess",(K)=>K.reuseExisting]))return X();const J=Z(W);return Y1.run(J,()=>{return X()})}vZ({getCurrentHub:$,runWithAsyncContext:Y})},Y1;var G8=function(){if(r.major&&r.major>=14)V8();else K8()};import*as w8 from"util";class g0{constructor(){g0.prototype.__init.call(this)}static __initStatic(){this.id="Console"}__init(){this.name=g0.id}setupOnce(){i1(({args:$,level:Z})=>{const Y=R();if(!Y.getIntegration(g0))return;Y.addBreadcrumb({category:"console",level:XX(Z),message:w8.format.apply(void 0,$)},{input:[...$],level:Z})})}}g0.__initStatic();var R0=typeof __SENTRY_DEBUG__==="undefined"||__SENTRY_DEBUG__;import{URL as vX} from"url";var M8=function($){const{protocol:Z,hostname:Y,port:X}=H8($),Q=$.path?$.path:"/";return`${Z}//${Y}${X}${Q}`},gX=function($){const{protocol:Z,hostname:Y,port:X}=H8($),Q=$.pathname||"/",W=$.auth?cJ($.auth):"";return`${Z}//${W}${Y}${X}${Q}`},cJ=function($){const[Z,Y]=$.split(":");return`${Z?"[Filtered]":""}:${Y?"[Filtered]":""}@`},mX=function($,Z,Y){if(!$)return $;let[X,Q]=$.split(" ");if(Z.host&&!Z.protocol)Z.protocol=L([Y,"optionalAccess",(W)=>W.agent,"optionalAccess",(W)=>W.protocol]),Q=gX(Z);if(L([Q,"optionalAccess",(W)=>W.startsWith,"call",(W)=>W("///")]))Q=Q.slice(2);return`${X} ${Q}`},N8=function($){const Z={protocol:$.protocol,hostname:typeof $.hostname==="string"&&$.hostname.startsWith("[")?$.hostname.slice(1,-1):$.hostname,hash:$.hash,search:$.search,pathname:$.pathname,path:`${$.pathname||""}${$.search||""}`,href:$.href};if($.port!=="")Z.port=Number($.port);if($.username||$.password)Z.auth=`${$.username}:${$.password}`;return Z},L8=function($,Z){let Y,X;if(typeof Z[Z.length-1]==="function")Y=Z.pop();if(typeof Z[0]==="string")X=N8(new vX(Z[0]));else if(Z[0]instanceof vX)X=N8(Z[0]);else{X=Z[0];try{const Q=new vX(X.path||"",`${X.protocol||"http:"}//${X.hostname}`);X={pathname:Q.pathname,search:Q.search,hash:Q.hash,...X}}catch(Q){}}if(Z.length===2)X={...X,...Z[1]};if(X.protocol===void 0)if(r.major&&r.major>8)X.protocol=L([L([$,"optionalAccess",(Q)=>Q.globalAgent]),"optionalAccess",(Q)=>Q.protocol])||L([X.agent,"optionalAccess",(Q)=>Q.protocol])||L([X._defaultAgent,"optionalAccess",(Q)=>Q.protocol]);else X.protocol=L([X.agent,"optionalAccess",(Q)=>Q.protocol])||L([X._defaultAgent,"optionalAccess",(Q)=>Q.protocol])||L([L([$,"optionalAccess",(Q)=>Q.globalAgent]),"optionalAccess",(Q)=>Q.protocol]);if(Y)return[X,Y];else return[X]},H8=function($){const Z=$.protocol||"",Y=$.hostname||$.host||"",X=!$.port||$.port===80||$.port===443||/^(.*):(\d+)$/.test(Y)?"":`:${$.port}`;return{protocol:Z,hostname:Y,port:X}};var F8=function($,Z,Y,X){const Q=new Q0(100),W=new Q0(100),J=(w)=>{if(Y===void 0)return!0;const G=Q.get(w);if(G!==void 0)return G;const V=Y(w);return Q.set(w,V),V},K=(w)=>{if(X===void 0)return!0;const G=W.get(w);if(G!==void 0)return G;const V=U0(w,X);return W.set(w,V),V};function z(w,G,V,N){if(!R().getIntegration(m0))return;R().addBreadcrumb({category:"http",data:{status_code:N&&N.statusCode,...G},type:"http"},{event:w,request:V,response:N})}return function w(G){return function V(...N){const H=L8($,N),F=H[0],B=M8(F),T=gX(F);if(R$(T,R()))return G.apply($,H);const A=R(),S=A.getScope(),f=S.getSpan(),q=pJ(T,F),v=J(B)?L([f,"optionalAccess",(E)=>E.startChild,"call",(E)=>E({op:"http.client",origin:"auto.http.node.http",description:`${q["http.method"]} ${q.url}`,data:q})]):void 0;if(K(B))if(v){const E=v.toTraceparent(),o=L([v,"optionalAccess",(N0)=>N0.transaction,"optionalAccess",(N0)=>N0.getDynamicSamplingContext,"call",(N0)=>N0()]);B8(F,T,E,o)}else{const E=A.getClient(),{traceId:o,sampled:N0,dsc:Q1}=S.getPropagationContext(),C8=U$(o,void 0,N0),_8=Q1||(E?w0(o,E,S):void 0);B8(F,T,C8,_8)}else R0&&M.log(`[Tracing] Not adding sentry-trace header to outgoing request (${T}) due to mismatching tracePropagationTargets option.`);return G.apply($,H).once("response",function(E){const o=this;if(Z)z("response",q,o,E);if(v){if(E.statusCode)v.setHttpStatus(E.statusCode);v.description=mX(v.description,F,o),v.finish()}}).once("error",function(){const E=this;if(Z)z("error",q,E);if(v)v.setHttpStatus(500),v.description=mX(v.description,F,E),v.finish()})}}},B8=function($,Z,Y,X){if(($.headers||{})["sentry-trace"])return;R0&&M.log(`[Tracing] Adding sentry-trace header ${Y} to outgoing request to "${Z}": `);const W=YZ(X),J=W&&W.length>0?lJ($,W):void 0;$.headers={...$.headers,"sentry-trace":Y,...J&&{baggage:J}}},pJ=function($,Z){const Y=Z.method||"GET",X={url:$,"http.method":Y};if(Z.hash)X["http.fragment"]=Z.hash.substring(1);if(Z.search)X["http.query"]=Z.search.substring(1);return X},lJ=function($,Z){if(!$.headers||!$.headers.baggage)return Z;else if(!Z)return $.headers.baggage;else if(Array.isArray($.headers.baggage))return[...$.headers.baggage,Z];return[$.headers.baggage,Z]};class m0{static __initStatic(){this.id="Http"}__init(){this.name=m0.id}constructor($={}){m0.prototype.__init.call(this),this._breadcrumbs=typeof $.breadcrumbs==="undefined"?!0:$.breadcrumbs,this._tracing=!$.tracing?void 0:$.tracing===!0?{}:$.tracing}setupOnce($,Z){if(!this._breadcrumbs&&!this._tracing)return;const Y=L([Z,"call",(K)=>K(),"access",(K)=>K.getClient,"call",(K)=>K(),"optionalAccess",(K)=>K.getOptions,"call",(K)=>K()]);if(Y&&Y.instrumenter!=="sentry"){R0&&M.log("HTTP Integration is skipped because of instrumenter configuration.");return}const X=L([this,"access",(K)=>K._tracing,"optionalAccess",(K)=>K.shouldCreateSpanForRequest])||L([Y,"optionalAccess",(K)=>K.shouldCreateSpanForRequest]),Q=L([Y,"optionalAccess",(K)=>K.tracePropagationTargets])||L([this,"access",(K)=>K._tracing,"optionalAccess",(K)=>K.tracePropagationTargets]),W=import.meta.require("http"),J=F8(W,this._breadcrumbs,X,Q);if(C(W,"get",J),C(W,"request",J),r.major&&r.major>8){const K=import.meta.require("https"),z=F8(K,this._breadcrumbs,X,Q);C(K,"get",z),C(K,"request",z)}}}m0.__initStatic();var oZ=function($){p(()=>{console.error($)});const Z=x0();if(Z===void 0)R0&&M.warn("No NodeClient was defined, we are exiting the process now."),global.process.exit(1);const Y=Z.getOptions(),X=Y&&Y.shutdownTimeout&&Y.shutdownTimeout>0&&Y.shutdownTimeout||iJ;Z.close(X).then((Q)=>{if(!Q)R0&&M.warn("We reached the timeout for emptying the request buffer, still exiting now!");global.process.exit(1)},(Q)=>{R0&&M.error(Q)})},iJ=2000;class S0{static __initStatic(){this.id="OnUncaughtException"}__init(){this.name=S0.id}__init2(){this.handler=this._makeErrorHandler()}constructor($={}){S0.prototype.__init.call(this),S0.prototype.__init2.call(this),this._options={exitEvenIfOtherHandlersAreRegistered:!0,...$}}setupOnce(){global.process.on("uncaughtException",this.handler)}_makeErrorHandler(){let Z=!1,Y=!1,X=!1,Q;return(W)=>{let J=oZ;const K=x0();if(this._options.onFatalError)J=this._options.onFatalError;else if(K&&K.getOptions().onFatalError)J=K.getOptions().onFatalError;const w=global.process.listeners("uncaughtException").reduce((V,N)=>{if(N.name==="domainUncaughtExceptionClear"||N.tag&&N.tag==="sentry_tracingErrorCallback"||N===this.handler)return V;else return V+1},0)===0,G=this._options.exitEvenIfOtherHandlersAreRegistered||w;if(!Z){const V=R();if(Q=W,Z=!0,V.getIntegration(S0))V.withScope((N)=>{if(N.setLevel("fatal"),V.captureException(W,{originalException:W,data:{mechanism:{handled:!1,type:"onuncaughtexception"}}}),!X&&G)X=!0,J(W)});else if(!X&&G)X=!0,J(W)}else if(G){if(X)R0&&M.warn("uncaught exception after calling fatal error shutdown callback - this is bad! forcing shutdown"),oZ(W);else if(!Y)Y=!0,setTimeout(()=>{if(!X)X=!0,J(Q,W)},2000)}}}}S0.__initStatic();class d0{static __initStatic(){this.id="OnUnhandledRejection"}__init(){this.name=d0.id}constructor($={mode:"warn"}){this._options=$,d0.prototype.__init.call(this)}setupOnce(){global.process.on("unhandledRejection",this.sendUnhandledPromise.bind(this))}sendUnhandledPromise($,Z){const Y=R();if(Y.getIntegration(d0))Y.withScope((X)=>{X.setExtra("unhandledPromiseRejection",!0),Y.captureException($,{originalException:Z,data:{mechanism:{handled:!1,type:"onunhandledrejection"}}})});this._handleRejection($)}_handleRejection($){const Z="This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). The promise rejected with the reason:";if(this._options.mode==="warn")p(()=>{console.warn(Z),console.error($&&$.stack?$.stack:$)});else if(this._options.mode==="strict")p(()=>{console.warn(Z)}),oZ($)}}d0.__initStatic();import{existsSync as aJ,readFileSync as sJ} from"fs";import{dirname as rJ,join as oJ} from"path";var nJ=function(){try{return require.cache?Object.keys(require.cache):[]}catch($){return[]}},tJ=function(){const $=require.main&&require.main.paths||[],Z=nJ(),Y={},X={};return Z.forEach((Q)=>{let W=Q;const J=()=>{const K=W;if(W=rJ(K),!W||K===W||X[K])return;if($.indexOf(W)<0)return J();const z=oJ(K,"package.json");if(X[K]=!0,!aJ(z))return J();try{const w=JSON.parse(sJ(z,"utf8"));Y[w.name]=w.version}catch(w){}};J()}),Y},dX;class u0{constructor(){u0.prototype.__init.call(this)}static __initStatic(){this.id="Modules"}__init(){this.name=u0.id}setupOnce($,Z){$((Y)=>{if(!Z().getIntegration(u0))return Y;return{...Y,modules:{...Y.modules,...this._getModules()}}})}_getModules(){if(!dX)dX=tJ();return dX}}u0.__initStatic();import{readFile as eJ} from"fs";var ZK=function($){return new Promise((Z,Y)=>{eJ($,"utf8",(X,Q)=>{if(X)Y(X);else Z(Q)})})};async function YK($){const Z=X1.get($);if(Z===null)return null;if(Z!==void 0)return Z;let Y=null;try{Y=(await ZK($)).split("\n")}catch(X){}return X1.set($,Y),Y}var X1=new Q0(100),$K=7;class c0{static __initStatic(){this.id="ContextLines"}__init(){this.name=c0.id}constructor($={}){this._options=$,c0.prototype.__init.call(this)}get _contextLines(){return this._options.frameContextLines!==void 0?this._options.frameContextLines:$K}setupOnce($,Z){$((Y)=>{if(!Z().getIntegration(c0))return Y;return this.addSourceContext(Y)})}async addSourceContext($){const Z={},Y=[];if(this._contextLines>0&&L([$,"access",(X)=>X.exception,"optionalAccess",(X)=>X.values]))for(let X of $.exception.values){if(!L([X,"access",(Q)=>Q.stacktrace,"optionalAccess",(Q)=>Q.frames]))continue;for(let Q=X.stacktrace.frames.length-1;Q>=0;Q--){const W=X.stacktrace.frames[Q];if(W.filename&&!Z[W.filename]&&!X1.get(W.filename))Y.push(YK(W.filename)),Z[W.filename]=1}}if(Y.length>0)await Promise.all(Y);if(this._contextLines>0&&L([$,"access",(X)=>X.exception,"optionalAccess",(X)=>X.values])){for(let X of $.exception.values)if(X.stacktrace&&X.stacktrace.frames)await this.addSourceContextToFrames(X.stacktrace.frames)}return $}addSourceContextToFrames($){for(let Z of $)if(Z.filename&&Z.context_line===void 0){const Y=X1.get(Z.filename);if(Y)try{r1(Y,Z,this._contextLines)}catch(X){}}}}c0.__initStatic();import{execFile as XK} from"child_process";import{readFile as QK,readdir as WK} from"fs";import*as h from"os";import{join as JK} from"path";import{promisify as U8} from"util";async function VK(){const $=h.platform();switch($){case"darwin":return FK();case"linux":return BK();default:return{name:MK[$]||$,version:h.release()}}}var GK=function(){try{if(typeof process.versions.icu!=="string")return;const $=new Date(900000000);if(new Intl.DateTimeFormat("es",{month:"long"}).format($)==="enero"){const Y=Intl.DateTimeFormat().resolvedOptions();return{locale:Y.locale,timezone:Y.timeZone}}}catch($){}return},wK=function(){const $=process.memoryUsage().rss;return{app_start_time:new Date(Date.now()-process.uptime()*1000).toISOString(),app_memory:$}},NK=function($){const Z={};let Y;try{Y=h.uptime&&h.uptime()}catch(X){}if(typeof Y==="number")Z.boot_time=new Date(Date.now()-Y*1000).toISOString();if(Z.arch=h.arch(),$===!0||$.memory)Z.memory_size=h.totalmem(),Z.free_memory=h.freemem();if($===!0||$.cpu){const X=h.cpus();if(X&&X.length){const Q=X[0];Z.processor_count=X.length,Z.cpu_description=Q.model,Z.processor_frequency=Q.speed}}return Z},D0=function($,Z){const Y=$.exec(Z);return Y?Y[1]:void 0};async function FK(){const $={kernel_version:h.release(),name:"Mac OS X",version:`10.${Number(h.release().split(".")[0])-4}`};try{const Z=await new Promise((Y,X)=>{XK("/usr/bin/sw_vers",(Q,W)=>{if(Q){X(Q);return}Y(W)})});$.name=D0(/^ProductName:\s+(.*)$/m,Z),$.version=D0(/^ProductVersion:\s+(.*)$/m,Z),$.build=D0(/^BuildVersion:\s+(.*)$/m,Z)}catch(Z){}return $}var j8=function($){return $.split(" ")[0].toLowerCase()};async function BK(){const $={kernel_version:h.release(),name:"Linux"};try{const Z=await zK("/etc"),Y=LK.find((K)=>Z.includes(K.name));if(!Y)return $;const X=JK("/etc",Y.name),Q=(await KK(X,{encoding:"utf-8"})).toLowerCase(),{distros:W}=Y;$.name=W.find((K)=>Q.indexOf(j8(K))>=0)||W[0];const J=j8($.name);$.version=HK[J](Q)}catch(Z){}return $}var jK=function(){if(process.env.VERCEL)return{"cloud.provider":"vercel","cloud.region":process.env.VERCEL_REGION};else if(process.env.AWS_REGION)return{"cloud.provider":"aws","cloud.region":process.env.AWS_REGION,"cloud.platform":process.env.AWS_EXECUTION_ENV};else if(process.env.GCP_PROJECT)return{"cloud.provider":"gcp"};else if(process.env.ALIYUN_REGION_ID)return{"cloud.provider":"alibaba_cloud","cloud.region":process.env.ALIYUN_REGION_ID};else if(process.env.WEBSITE_SITE_NAME&&process.env.REGION_NAME)return{"cloud.provider":"azure","cloud.region":process.env.REGION_NAME};else if(process.env.IBM_CLOUD_REGION)return{"cloud.provider":"ibm_cloud","cloud.region":process.env.IBM_CLOUD_REGION};else if(process.env.TENCENTCLOUD_REGION)return{"cloud.provider":"tencent_cloud","cloud.region":process.env.TENCENTCLOUD_REGION,"cloud.account.id":process.env.TENCENTCLOUD_APPID,"cloud.availability_zone":process.env.TENCENTCLOUD_ZONE};else if(process.env.NETLIFY)return{"cloud.provider":"netlify"};else if(process.env.FLY_REGION)return{"cloud.provider":"fly.io","cloud.region":process.env.FLY_REGION};else if(process.env.DYNO)return{"cloud.provider":"heroku"};else return},KK=U8(QK),zK=U8(WK);class O${static __initStatic(){this.id="Context"}__init(){this.name=O$.id}constructor($={app:!0,os:!0,device:!0,culture:!0,cloudResource:!0}){this._options=$,O$.prototype.__init.call(this)}setupOnce($){$((Z)=>this.addContext(Z))}async addContext($){if(this._cachedContext===void 0)this._cachedContext=this._getContexts();const Z=this._updateContext(await this._cachedContext);return $.contexts={...$.contexts,app:{...Z.app,...L([$,"access",(Y)=>Y.contexts,"optionalAccess",(Y)=>Y.app])},os:{...Z.os,...L([$,"access",(Y)=>Y.contexts,"optionalAccess",(Y)=>Y.os])},device:{...Z.device,...L([$,"access",(Y)=>Y.contexts,"optionalAccess",(Y)=>Y.device])},culture:{...Z.culture,...L([$,"access",(Y)=>Y.contexts,"optionalAccess",(Y)=>Y.culture])},cloud_resource:{...Z.cloud_resource,...L([$,"access",(Y)=>Y.contexts,"optionalAccess",(Y)=>Y.cloud_resource])}},$}_updateContext($){if(L([$,"optionalAccess",(Z)=>Z.app,"optionalAccess",(Z)=>Z.app_memory]))$.app.app_memory=process.memoryUsage().rss;if(L([$,"optionalAccess",(Z)=>Z.device,"optionalAccess",(Z)=>Z.free_memory]))$.device.free_memory=h.freemem();return $}async _getContexts(){const $={};if(this._options.os)$.os=await VK();if(this._options.app)$.app=wK();if(this._options.device)$.device=NK(this._options.device);if(this._options.culture){const Z=GK();if(Z)$.culture=Z}if(this._options.cloudResource)$.cloud_resource=jK();return $}}O$.__initStatic();var MK={aix:"IBM AIX",freebsd:"FreeBSD",openbsd:"OpenBSD",sunos:"SunOS",win32:"Windows"},LK=[{name:"fedora-release",distros:["Fedora"]},{name:"redhat-release",distros:["Red Hat Linux","Centos"]},{name:"redhat_version",distros:["Red Hat Linux"]},{name:"SuSE-release",distros:["SUSE Linux"]},{name:"lsb-release",distros:["Ubuntu Linux","Arch Linux"]},{name:"debian_version",distros:["Debian"]},{name:"debian_release",distros:["Debian"]},{name:"arch-release",distros:["Arch Linux"]},{name:"gentoo-release",distros:["Gentoo Linux"]},{name:"novell-release",distros:["SUSE Linux"]},{name:"alpine-release",distros:["Alpine Linux"]}],HK={alpine:($)=>$,arch:($)=>D0(/distrib_release=(.*)/,$),centos:($)=>D0(/release ([^ ]+)/,$),debian:($)=>$,fedora:($)=>D0(/release (..)/,$),mint:($)=>D0(/distrib_release=(.*)/,$),red:($)=>D0(/release ([^ ]+)/,$),suse:($)=>D0(/VERSION = (.*)\n/,$),ubuntu:($)=>D0(/distrib_release=(.*)/,$)};var UK=function($,Z,Y){let X=0,Q=5,W=0;return setInterval(()=>{if(W===0){if(X>$){if(Q*=2,Y(Q),Q>86400)Q=86400;W=Q}}else if(W-=1,W===0)Z();X=0},1000).unref(),()=>{X+=1}},R8=function($){let Z=[],Y=!1;function X(J){if(Z=[],Y)return;Y=!0,$(J)}Z.push(X);function Q(J){Z.push(J)}function W(J){const K=Z.pop()||X;try{K(J)}catch(z){X(J)}}return{add:Q,next:W}},TK=function(){try{return new D8}catch($){return}},T8=function($){return $!==void 0&&["","?","<anonymous>"].includes($)},RK=function($,Z){return $===Z||T8($)&&T8(Z)},P8=function($){if($===void 0)return;return $.slice(-10).reduce((Z,Y)=>`${Z},${Y.function},${Y.lineno},${Y.colno}`,"")},DK=function($,Z){if(Z===void 0)return;return P8($(Z,1))};class D8{constructor(){const{Session:$}=import.meta.require("inspector");this._session=new $}configureAndConnect($,Z){this._session.connect(),this._session.on("Debugger.paused",(Y)=>{$(Y,()=>{this._session.post("Debugger.resume")})}),this._session.post("Debugger.enable"),this._session.post("Debugger.setPauseOnExceptions",{state:Z?"all":"uncaught"})}setPauseOnExceptions($){this._session.post("Debugger.setPauseOnExceptions",{state:$?"all":"uncaught"})}getLocalVariables($,Z){this._getProperties($,(Y)=>{const{add:X,next:Q}=R8(Z);for(let W of Y)if(L([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.objectId])&&L([W,"optionalAccess",(J)=>J.value,"access",(J)=>J.className])==="Array"){const J=W.value.objectId;X((K)=>this._unrollArray(J,W.name,K,Q))}else if(L([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.objectId])&&L([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.className])==="Object"){const J=W.value.objectId;X((K)=>this._unrollObject(J,W.name,K,Q))}else if(L([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.value])||L([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.description]))X((J)=>this._unrollOther(W,J,Q));Q({})})}_getProperties($,Z){this._session.post("Runtime.getProperties",{objectId:$,ownProperties:!0},(Y,X)=>{if(Y)Z([]);else Z(X.result)})}_unrollArray($,Z,Y,X){this._getProperties($,(Q)=>{Y[Z]=Q.filter((W)=>W.name!=="length"&&!isNaN(parseInt(W.name,10))).sort((W,J)=>parseInt(W.name,10)-parseInt(J.name,10)).map((W)=>L([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.value])),X(Y)})}_unrollObject($,Z,Y,X){this._getProperties($,(Q)=>{Y[Z]=Q.map((W)=>[W.name,L([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.value])]).reduce((W,[J,K])=>{return W[J]=K,W},{}),X(Y)})}_unrollOther($,Z,Y){if(L([$,"optionalAccess",(X)=>X.value,"optionalAccess",(X)=>X.value]))Z[$.name]=$.value.value;else if(L([$,"optionalAccess",(X)=>X.value,"optionalAccess",(X)=>X.description])&&L([$,"optionalAccess",(X)=>X.value,"optionalAccess",(X)=>X.type])!=="function")Z[$.name]=`<${$.value.description}>`;Y(Z)}}class p0{static __initStatic(){this.id="LocalVariables"}__init(){this.name=p0.id}__init2(){this._cachedFrames=new Q0(20)}constructor($={},Z=TK()){this._options=$,this._session=Z,p0.prototype.__init.call(this),p0.prototype.__init2.call(this)}setupOnce($,Z){this._setup($,L([Z,"call",(Y)=>Y(),"access",(Y)=>Y.getClient,"call",(Y)=>Y(),"optionalAccess",(Y)=>Y.getOptions,"call",(Y)=>Y()]))}_setup($,Z){if(this._session&&L([Z,"optionalAccess",(Y)=>Y.includeLocalVariables])){if((r.major||0)<18){M.log("The `LocalVariables` integration is only supported on Node >= v18.");return}const X=this._options.captureAllExceptions!==!1;if(this._session.configureAndConnect((Q,W)=>this._handlePaused(Z.stackParser,Q,W),X),X){const Q=this._options.maxExceptionsPerSecond||50;this._rateLimiter=UK(Q,()=>{M.log("Local variables rate-limit lifted."),L([this,"access",(W)=>W._session,"optionalAccess",(W)=>W.setPauseOnExceptions,"call",(W)=>W(!0)])},(W)=>{M.log(`Local variables rate-limit exceeded. Disabling capturing of caught exceptions for ${W} seconds.`),L([this,"access",(J)=>J._session,"optionalAccess",(J)=>J.setPauseOnExceptions,"call",(J)=>J(!1)])})}$(async(Q)=>this._addLocalVariables(Q))}}_handlePaused($,{params:{reason:Z,data:Y,callFrames:X}},Q){if(Z!=="exception"&&Z!=="promiseRejection"){Q();return}L([this,"access",(z)=>z._rateLimiter,"optionalCall",(z)=>z()]);const W=DK($,L([Y,"optionalAccess",(z)=>z.description]));if(W==null){Q();return}const{add:J,next:K}=R8((z)=>{this._cachedFrames.set(W,z),Q()});for(let z=0;z<Math.min(X.length,5);z++){const{scopeChain:w,functionName:G,this:V}=X[z],N=w.find((F)=>F.type==="local"),H=V.className==="global"||!V.className?G:`${V.className}.${G}`;if(L([N,"optionalAccess",(F)=>F.object,"access",(F)=>F.objectId])===void 0)J((F)=>{F[z]={function:H},K(F)});else{const F=N.object.objectId;J((B)=>L([this,"access",(T)=>T._session,"optionalAccess",(T)=>T.getLocalVariables,"call",(T)=>T(F,(A)=>{B[z]={function:H,vars:A},K(B)})]))}}K([])}_addLocalVariables($){for(let Z of L([$,"optionalAccess",(Y)=>Y.exception,"optionalAccess",(Y)=>Y.values])||[])this._addLocalVariablesToException(Z);return $}_addLocalVariablesToException($){const Z=P8(L([$,"optionalAccess",(Q)=>Q.stacktrace,"optionalAccess",(Q)=>Q.frames]));if(Z===void 0)return;const Y=this._cachedFrames.remove(Z);if(Y===void 0)return;const X=L([$,"access",(Q)=>Q.stacktrace,"optionalAccess",(Q)=>Q.frames,"optionalAccess",(Q)=>Q.length])||0;for(let Q=0;Q<X;Q++){const W=X-Q-1;if(!L([$,"optionalAccess",(J)=>J.stacktrace,"optionalAccess",(J)=>J.frames,"optionalAccess",(J)=>J[W]])||!Y[Q])break;if(Y[Q].vars===void 0||$.stacktrace.frames[W].in_app===!1||!RK($.stacktrace.frames[W].function,Y[Q].function))continue;$.stacktrace.frames[W].vars=Y[Q].vars}}}p0.__initStatic();var O8=function($,Z,Y){if($.headers.split("\r\n").some((W)=>W.startsWith("sentry-trace:")))return;if($.addHeader("sentry-trace",Z),Y)$.addHeader("baggage",Y)},PK=function($,Z,Y){const X=fZ(Y),Q=Z.method||"GET",W={"http.method":Q};if(X.search)W["http.query"]=X.search;if(X.hash)W["http.fragment"]=X.hash;return L([$,"optionalAccess",(J)=>J.startChild,"call",(J)=>J({op:"http.client",origin:"auto.http.node.undici",description:`${Q} ${CZ(X)}`,data:W})])},nZ;(function($){$.RequestCreate="undici:request:create";const Y="undici:request:headers";$.RequestEnd=Y;const X="undici:request:error";$.RequestError=X})(nZ||(nZ={}));class i{static __initStatic(){this.id="Undici"}__init(){this.name=i.id}__init2(){this._createSpanUrlMap=new Q0(100)}__init3(){this._headersUrlMap=new Q0(100)}constructor($={}){i.prototype.__init.call(this),i.prototype.__init2.call(this),i.prototype.__init3.call(this),i.prototype.__init4.call(this),i.prototype.__init5.call(this),i.prototype.__init6.call(this),this._options={breadcrumbs:$.breadcrumbs===void 0?!0:$.breadcrumbs,shouldCreateSpanForRequest:$.shouldCreateSpanForRequest}}setupOnce($){if(r.major&&r.major<16)return;let Z;try{Z=_0(OK,"diagnostics_channel")}catch(Y){}if(!Z||!Z.subscribe)return;Z.subscribe(nZ.RequestCreate,this._onRequestCreate),Z.subscribe(nZ.RequestEnd,this._onRequestEnd),Z.subscribe(nZ.RequestError,this._onRequestError)}_shouldCreateSpan($){if(this._options.shouldCreateSpanForRequest===void 0)return!0;const Z=this._createSpanUrlMap.get($);if(Z!==void 0)return Z;const Y=this._options.shouldCreateSpanForRequest($);return this._createSpanUrlMap.set($,Y),Y}__init4(){this._onRequestCreate=($)=>{const Z=R();if(!Z.getIntegration(i))return;const{request:Y}=$,X=Y.origin?Y.origin.toString()+Y.path:Y.path;if(R$(X,Z)||Y.__sentry_span__!==void 0)return;const Q=Z.getClient();if(!Q)return;const W=Q.getOptions(),J=Z.getScope(),K=J.getSpan(),z=this._shouldCreateSpan(X)?PK(K,Y,X):void 0;if(z)Y.__sentry_span__=z;if(((G)=>{if(W.tracePropagationTargets===void 0)return!0;const V=this._headersUrlMap.get(G);if(V!==void 0)return V;const N=U0(G,W.tracePropagationTargets);return this._headersUrlMap.set(G,N),N})(X))if(z){const G=L([z,"optionalAccess",(N)=>N.transaction,"optionalAccess",(N)=>N.getDynamicSamplingContext,"call",(N)=>N()]),V=YZ(G);O8(Y,z.toTraceparent(),V)}else{const{traceId:G,sampled:V,dsc:N}=J.getPropagationContext(),H=U$(G,void 0,V),F=N||w0(G,Q,J),B=YZ(F);O8(Y,H,B)}}}__init5(){this._onRequestEnd=($)=>{const Z=R();if(!Z.getIntegration(i))return;const{request:Y,response:X}=$,Q=Y.origin?Y.origin.toString()+Y.path:Y.path;if(R$(Q,Z))return;const W=Y.__sentry_span__;if(W)W.setHttpStatus(X.statusCode),W.finish();if(this._options.breadcrumbs)Z.addBreadcrumb({category:"http",data:{method:Y.method,status_code:X.statusCode,url:Q},type:"http"},{event:"response",request:Y,response:X})}}__init6(){this._onRequestError=($)=>{const Z=R();if(!Z.getIntegration(i))return;const{request:Y}=$,X=Y.origin?Y.origin.toString()+Y.path:Y.path;if(R$(X,Z))return;const Q=Y.__sentry_span__;if(Q)Q.setStatus("internal_error"),Q.finish();if(this._options.breadcrumbs)Z.addBreadcrumb({category:"http",data:{method:Y.method,url:X},level:"error",type:"http"},{event:"error",request:Y})}}}i.__initStatic();import*as A8 from"http";import{URL as AK} from"url";var qK=function($,Z){const Y=EK(Z.sidecarUrl);if(!Y)return;let X=0;if(typeof $.on!=="function"){M.warn("[Spotlight] Cannot connect to spotlight due to missing method on SDK client (`client.on`)");return}$.on("beforeEnvelope",(Q)=>{if(X>3){M.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests");return}const W=xZ(Q),J=A8.request({method:"POST",path:Y.pathname,hostname:Y.hostname,port:Y.port,headers:{"Content-Type":"application/x-sentry-envelope"}},(K)=>{K.on("data",()=>{}),K.on("end",()=>{}),K.setEncoding("utf8")});J.on("error",()=>{X++,M.warn("[Spotlight] Failed to send envelope to Spotlight Sidecar")}),J.write(W),J.end()})},EK=function($){try{return new AK(`${$}`)}catch(Z){M.warn(`[Spotlight] Invalid sidecar URL: ${$}`);return}};class A${static __initStatic(){this.id="Spotlight"}__init(){this.name=A$.id}constructor($){A$.prototype.__init.call(this),this._options={sidecarUrl:L([$,"optionalAccess",(Z)=>Z.sidecarUrl])||"http://localhost:8969/stream"}}setupOnce(){}setup($){qK($,this._options)}}A$.__initStatic();var uX=function($={}){if(W8())$.autoSessionTracking=!1,$.tracesSampleRate=0;const Z=G0();G8();const Y=L([Z,"access",(W)=>W.__SENTRY__,"optionalAccess",(W)=>W.integrations])||[];if($.defaultIntegrations=$.defaultIntegrations===!1?[]:[...Array.isArray($.defaultIntegrations)?$.defaultIntegrations:q8,...Y],$.dsn===void 0&&process.env.SENTRY_DSN)$.dsn=process.env.SENTRY_DSN;const X=process.env.SENTRY_TRACES_SAMPLE_RATE;if($.tracesSampleRate===void 0&&X){const W=parseFloat(X);if(isFinite(W))$.tracesSampleRate=W}if($.release===void 0){const W=E8();if(W!==void 0)$.release=W;else $.autoSessionTracking=!1}if($.environment===void 0&&process.env.SENTRY_ENVIRONMENT)$.environment=process.env.SENTRY_ENVIRONMENT;if($.autoSessionTracking===void 0&&$.dsn!==void 0)$.autoSessionTracking=!0;if($.instrumenter===void 0)$.instrumenter="sentry";const Q={...$,stackParser:p1($.stackParser||k8),integrations:PX($),transport:$.transport||X8};if(qX($.clientClass||kX,Q),$.autoSessionTracking)kK();if(SK(),$.spotlight){const W=R().getClient();if(W&&W.addIntegration)W.setupIntegrations(!0),W.addIntegration(new A$({sidecarUrl:typeof $.spotlight==="string"?$.spotlight:void 0}))}};var E8=function($){if(process.env.SENTRY_RELEASE)return process.env.SENTRY_RELEASE;if(O.SENTRY_RELEASE&&O.SENTRY_RELEASE.id)return O.SENTRY_RELEASE.id;return process.env.GITHUB_SHA||process.env.COMMIT_REF||process.env.VERCEL_GIT_COMMIT_SHA||process.env.VERCEL_GITHUB_COMMIT_SHA||process.env.VERCEL_GITLAB_COMMIT_SHA||process.env.VERCEL_BITBUCKET_COMMIT_SHA||process.env.ZEIT_GITHUB_COMMIT_SHA||process.env.ZEIT_GITLAB_COMMIT_SHA||process.env.ZEIT_BITBUCKET_COMMIT_SHA||$},kK=function(){const $=R();$.startSession(),process.on("beforeExit",()=>{const Z=$.getScope().getSession();if(Z&&!["exited","crashed"].includes(Z.status))$.endSession()})},SK=function(){const $=(process.env.SENTRY_USE_ENVIRONMENT||"").toLowerCase();if(!["false","n","no","off","0"].includes($)){const Z=process.env.SENTRY_TRACE,Y=process.env.SENTRY_BAGGAGE,{propagationContext:X}=yZ(Z,Y);R().getScope().setPropagationContext(X)}},q8=[new a.InboundFilters,new a.FunctionToString,new a.LinkedErrors,new g0,new m0,new i,new S0,new d0,new c0,new p0,new O$,new u0,new h0],k8=qY(l1(Q8));var cX={};tZ(cX,{Undici:()=>{{return i}},Spotlight:()=>{{return A$}},RequestData:()=>{{return h0}},OnUnhandledRejection:()=>{{return d0}},OnUncaughtException:()=>{{return S0}},Modules:()=>{{return u0}},LocalVariables:()=>{{return p0}},Http:()=>{{return m0}},ContextLines:()=>{{return c0}},Context:()=>{{return O$}},Console:()=>{{return g0}}});var pX={};tZ(pX,{Prisma:()=>{{return cZ}},Postgres:()=>{{return mZ}},Mysql:()=>{{return dZ}},Mongo:()=>{{return uZ}},GraphQL:()=>{{return pZ}},Express:()=>{{return gZ}},Apollo:()=>{{return lZ}}});var P0={...a,...cX,...pX};import*as S8 from"os";class lX extends GZ{constructor($){$._metadata=$._metadata||{},$._metadata.sdk=$._metadata.sdk||{name:"sentry.javascript.bun",packages:[{name:"npm:@sentry/bun",version:b0}],version:b0};const Z={...$,platform:"javascript",runtime:{name:"bun",version:Bun.version},serverName:$.serverName||global.process.env.SENTRY_NAME||S8.hostname()};super(Z)}}var IK=function(){Bun.serve=new Proxy(Bun.serve,{apply($,Z,Y){return fK(Y[0]),$.apply(Z,Y)}})},fK=function($){$.fetch=new Proxy($.fetch,{apply(Z,Y,X){return vY(()=>{const Q=X[0],W=Q.method.toUpperCase();if(W==="OPTIONS"||W==="HEAD")return Z.apply(Y,X);const J=fZ(Q.url),K={"http.request.method":Q.method||"GET"};if(J.search)K["http.query"]=J.search;const z=CZ(J);return cY({sentryTrace:Q.headers.get("sentry-trace")||"",baggage:Q.headers.get("baggage")},(w)=>{return uY({op:"http.server",name:`${Q.method} ${J.path||"/"}`,origin:"auto.http.bun.serve",...w,data:K,metadata:{...w.metadata,source:"url",request:{url:z,method:Q.method,headers:Q.headers.toJSON()}}},async(G)=>{try{const V=await Z.apply(Y,X);if(V&&V.status){if(L([G,"optionalAccess",(N)=>N.setHttpStatus,"call",(N)=>N(V.status)]),L([G,"optionalAccess",(N)=>N.setData,"call",(N)=>N("http.response.status_code",V.status)]),G instanceof zZ)G.setContext("response",{headers:V.headers.toJSON(),status_code:V.status})}return V}catch(V){throw VZ(V,{mechanism:{type:"bun",handled:!1,data:{function:"serve"}}}),V}})})})}})};class q${constructor(){q$.prototype.__init.call(this)}static __initStatic(){this.id="BunServer"}__init(){this.name=q$.id}setupOnce(){IK()}}q$.__initStatic();var I8=function($){function Z(Y){const X={body:Y.body,method:"POST",headers:$.headers};try{return fetch($.url,X).then((Q)=>{return{statusCode:Q.status,headers:{"x-sentry-rate-limits":Q.headers.get("X-Sentry-Rate-Limits"),"retry-after":Q.headers.get("Retry-After")}}})}catch(Q){return L$(Q)}}return T$($,Z)};var CK=function($={}){$.clientClass=lX,$.transport=$.transport||I8,$.defaultIntegrations=$.defaultIntegrations===!1?[]:[...Array.isArray($.defaultIntegrations)?$.defaultIntegrations:f8],uX($)},f8=[new a.InboundFilters,new a.FunctionToString,new a.LinkedErrors,new P0.Console,new P0.Http,new P0.Undici,new P0.ContextLines,new P0.Context,new P0.Modules,new P0.RequestData,new q$];var iX={};tZ(iX,{BunServer:()=>{{return q$}}});var WL={...a,...P0,...iX};var yK=function($){return"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"};async function bK($){return await xK.beta.assistants.create({instructions:"You're Emma, bilingual English Coach at E4CC. Always keep responses really short, focus on teaching English to Spanish speakers. Stay friendly and encouraging, avoid off-topic discussions.",name:"Emma, bilingual English Coach at E4CC",model:"gpt-3.5-turbo"})}console.log("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");var xK=new RQ({apiKey:"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"});async function hK($){try{const Z=yK($),Y=await bK(Z);return console.log(Y),Y}catch(Z){throw VZ(Z),console.error(Z),Z}}export{hK as default};

//# debugId=C35EC0BE057BF1EC64756e2164756e21
