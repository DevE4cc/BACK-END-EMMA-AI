// @bun
var O8=Object.create;var{defineProperty:Z1,getPrototypeOf:A8,getOwnPropertyNames:q8}=Object;var E8=Object.prototype.hasOwnProperty;var k8=($,Y,Z)=>{Z=$!=null?O8(A8($)):{};const X=Y||!$||!$.__esModule?Z1(Z,"default",{value:$,enumerable:!0}):Z;for(let Q of q8($))if(!E8.call(X,Q))Z1(X,Q,{get:()=>$[Q],enumerable:!0});return X};var G0=($,Y)=>()=>(Y||$((Y={exports:{}}).exports,Y),Y.exports);var Q0=($)=>{return import.meta.require($)};var rY=($,Y)=>{for(var Z in Y)Z1($,Z,{get:Y[Z],enumerable:!0,configurable:!0,set:(X)=>Y[Z]=()=>X})};var AW=G0((qw,OW)=>{var j6=function($){if($=String($),$.length>100)return;var Y=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec($);if(!Y)return;var Z=parseFloat(Y[1]),X=(Y[2]||"ms").toLowerCase();switch(X){case"years":case"year":case"yrs":case"yr":case"y":return Z*B6;case"weeks":case"week":case"w":return Z*H6;case"days":case"day":case"d":return Z*U$;case"hours":case"hour":case"hrs":case"hr":case"h":return Z*GY;case"minutes":case"minute":case"mins":case"min":case"m":return Z*VY;case"seconds":case"second":case"secs":case"sec":case"s":return Z*zY;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return Z;default:return}},U6=function($){var Y=Math.abs($);if(Y>=U$)return Math.round($/U$)+"d";if(Y>=GY)return Math.round($/GY)+"h";if(Y>=VY)return Math.round($/VY)+"m";if(Y>=zY)return Math.round($/zY)+"s";return $+"ms"},T6=function($){var Y=Math.abs($);if(Y>=U$)return lZ($,Y,U$,"day");if(Y>=GY)return lZ($,Y,GY,"hour");if(Y>=VY)return lZ($,Y,VY,"minute");if(Y>=zY)return lZ($,Y,zY,"second");return $+" ms"},lZ=function($,Y,Z,X){var Q=Y>=Z*1.5;return Math.round($/Z)+" "+X+(Q?"s":"")},zY=1000,VY=zY*60,GY=VY*60,U$=GY*24,H6=U$*7,B6=U$*365.25;OW.exports=function($,Y){Y=Y||{};var Z=typeof $;if(Z==="string"&&$.length>0)return j6($);else if(Z==="number"&&isFinite($))return Y.long?T6($):U6($);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify($))}});var qX=G0((Ew,qW)=>{var R6=function($){Z.debug=Z,Z.default=Z,Z.coerce=z,Z.disable=W,Z.enable=Q,Z.enabled=J,Z.humanize=AW(),Z.destroy=w,Object.keys($).forEach((G)=>{Z[G]=$[G]}),Z.names=[],Z.skips=[],Z.formatters={};function Y(G){let V=0;for(let N=0;N<G.length;N++)V=(V<<5)-V+G.charCodeAt(N),V|=0;return Z.colors[Math.abs(V)%Z.colors.length]}Z.selectColor=Y;function Z(G){let V,N=null,F,H;function B(...T){if(!B.enabled)return;const A=B,S=Number(new Date),f=S-(V||S);if(A.diff=f,A.prev=V,A.curr=S,V=S,T[0]=Z.coerce(T[0]),typeof T[0]!=="string")T.unshift("%O");let q=0;T[0]=T[0].replace(/%([a-zA-Z%])/g,(E,r)=>{if(E==="%%")return"%";q++;const V0=Z.formatters[r];if(typeof V0==="function"){const Y1=T[q];E=V0.call(A,Y1),T.splice(q,1),q--}return E}),Z.formatArgs.call(A,T),(A.log||Z.log).apply(A,T)}if(B.namespace=G,B.useColors=Z.useColors(),B.color=Z.selectColor(G),B.extend=X,B.destroy=Z.destroy,Object.defineProperty(B,"enabled",{enumerable:!0,configurable:!1,get:()=>{if(N!==null)return N;if(F!==Z.namespaces)F=Z.namespaces,H=Z.enabled(G);return H},set:(T)=>{N=T}}),typeof Z.init==="function")Z.init(B);return B}function X(G,V){const N=Z(this.namespace+(typeof V==="undefined"?":":V)+G);return N.log=this.log,N}function Q(G){Z.save(G),Z.namespaces=G,Z.names=[],Z.skips=[];let V;const N=(typeof G==="string"?G:"").split(/[\s,]+/),F=N.length;for(V=0;V<F;V++){if(!N[V])continue;if(G=N[V].replace(/\*/g,".*?"),G[0]==="-")Z.skips.push(new RegExp("^"+G.slice(1)+"$"));else Z.names.push(new RegExp("^"+G+"$"))}}function W(){const G=[...Z.names.map(K),...Z.skips.map(K).map((V)=>"-"+V)].join(",");return Z.enable(""),G}function J(G){if(G[G.length-1]==="*")return!0;let V,N;for(V=0,N=Z.skips.length;V<N;V++)if(Z.skips[V].test(G))return!1;for(V=0,N=Z.names.length;V<N;V++)if(Z.names[V].test(G))return!0;return!1}function K(G){return G.toString().substring(2,G.toString().length-2).replace(/\.\*\?$/,"*")}function z(G){if(G instanceof Error)return G.stack||G.message;return G}function w(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return Z.enable(Z.load()),Z};qW.exports=R6});var kW=G0((EW,aZ)=>{var D6=function(){if(typeof window!=="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},P6=function($){if($[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+$[0]+(this.useColors?"%c ":" ")+"+"+EW.humanize(this.diff),!this.useColors)return;const Y="color: "+this.color;$.splice(1,0,Y,"color: inherit");let Z=0,X=0;$[0].replace(/%[a-zA-Z%]/g,(Q)=>{if(Q==="%%")return;if(Z++,Q==="%c")X=Z}),$.splice(X,0,Y)},O6=function($){try{if($)EW.storage.setItem("debug",$);else EW.storage.removeItem("debug")}catch(Y){}},A6=function(){let $;try{$=EW.storage.getItem("debug")}catch(Y){}if(!$&&typeof process!=="undefined"&&("env"in process))$=process.env.DEBUG;return $},q6=function(){try{return localStorage}catch($){}};EW.formatArgs=P6;EW.save=O6;EW.load=A6;EW.useColors=D6;EW.storage=q6();EW.destroy=(()=>{let $=!1;return()=>{if(!$)$=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}})();EW.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];EW.log=console.debug||console.log||(()=>{});aZ.exports=qX()(EW);var{formatters:E6}=aZ.exports;E6.j=function($){try{return JSON.stringify($)}catch(Y){return"[UnexpectedJSONParseError]: "+Y.message}}});var CW=G0((IW,rZ)=>{var b6=function(){return"colors"in IW.inspectOpts?Boolean(IW.inspectOpts.colors):x6.isatty(process.stderr.fd)},h6=function($){const{namespace:Y,useColors:Z}=this;if(Z){const X=this.color,Q="\x1B[3"+(X<8?X:"8;5;"+X),W=`  ${Q};1m${Y} \x1B[0m`;$[0]=W+$[0].split("\n").join("\n"+W),$.push(Q+"m+"+IW.humanize(this.diff)+"\x1B[0m")}else $[0]=v6()+Y+" "+$[0]},v6=function(){if(IW.inspectOpts.hideDate)return"";return(new Date()).toISOString()+" "},g6=function(...$){return process.stderr.write(sZ.format(...$)+"\n")},m6=function($){if($)process.env.DEBUG=$;else delete process.env.DEBUG},d6=function(){return process.env.DEBUG},u6=function($){$.inspectOpts={};const Y=Object.keys(IW.inspectOpts);for(let Z=0;Z<Y.length;Z++)$.inspectOpts[Y[Z]]=IW.inspectOpts[Y[Z]]},x6=import.meta.require("tty"),sZ=import.meta.require("util");IW.init=u6;IW.log=g6;IW.formatArgs=h6;IW.save=m6;IW.load=d6;IW.useColors=b6;IW.destroy=sZ.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");IW.colors=[6,2,3,4,5,1];try{const $=(()=>{ throw new Error(`Cannot require module "supports-color"`);})();if($&&($.stderr||$).level>=2)IW.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}catch($){}IW.inspectOpts=Object.keys(process.env).filter(($)=>{return/^debug_/i.test($)}).reduce(($,Y)=>{const Z=Y.substring(6).toLowerCase().replace(/_([a-z])/g,(Q,W)=>{return W.toUpperCase()});let X=process.env[Y];if(/^(yes|on|true|enabled)$/i.test(X))X=!0;else if(/^(no|off|false|disabled)$/i.test(X))X=!1;else if(X==="null")X=null;else X=Number(X);return $[Z]=X,$},{});rZ.exports=qX()(IW);var{formatters:SW}=rZ.exports;SW.o=function($){return this.inspectOpts.colors=this.useColors,sZ.inspect($,this.inspectOpts).split("\n").map((Y)=>Y.trim()).join(" ")};SW.O=function($){return this.inspectOpts.colors=this.useColors,sZ.inspect($,this.inspectOpts)}});var oZ=G0((Iw,EX)=>{if(typeof process==="undefined"||process.type==="renderer"||!1||process.__nwjs)EX.exports=kW();else EX.exports=CW()});var yW=G0((_W)=>{var o6=function($){return function(Y,Z){return new Promise((X,Q)=>{$.call(this,Y,Z,(W,J)=>{if(W)Q(W);else X(J)})})}};Object.defineProperty(_W,"__esModule",{value:!0});_W.default=o6});var hW=G0((SX,bW)=>{var YJ=function($){return Boolean($)&&typeof $.addRequest==="function"},kX=function(){const{stack:$}=new Error;if(typeof $!=="string")return!1;return $.split("\n").some((Y)=>Y.indexOf("(https.js:")!==-1||Y.indexOf("node:https:")!==-1)},nZ=function($,Y){return new nZ.Agent($,Y)},xW=SX&&SX.__importDefault||function($){return $&&$.__esModule?$:{default:$}},t6=import.meta.require("events"),e6=xW(oZ()),$J=xW(yW()),cY=e6.default("agent-base");(function($){class Y extends t6.EventEmitter{constructor(Z,X){super();let Q=X;if(typeof Z==="function")this.callback=Z;else if(Z)Q=Z;if(this.timeout=null,Q&&typeof Q.timeout==="number")this.timeout=Q.timeout;this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=Infinity,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){if(typeof this.explicitDefaultPort==="number")return this.explicitDefaultPort;return kX()?443:80}set defaultPort(Z){this.explicitDefaultPort=Z}get protocol(){if(typeof this.explicitProtocol==="string")return this.explicitProtocol;return kX()?"https:":"http:"}set protocol(Z){this.explicitProtocol=Z}callback(Z,X,Q){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(Z,X){const Q=Object.assign({},X);if(typeof Q.secureEndpoint!=="boolean")Q.secureEndpoint=kX();if(Q.host==null)Q.host="localhost";if(Q.port==null)Q.port=Q.secureEndpoint?443:80;if(Q.protocol==null)Q.protocol=Q.secureEndpoint?"https:":"http:";if(Q.host&&Q.path)delete Q.path;delete Q.agent,delete Q.hostname,delete Q._defaultAgent,delete Q.defaultPort,delete Q.createConnection,Z._last=!0,Z.shouldKeepAlive=!1;let W=!1,J=null;const K=Q.timeout||this.timeout,z=(N)=>{if(Z._hadError)return;Z.emit("error",N),Z._hadError=!0},w=()=>{J=null,W=!0;const N=new Error(`A "socket" was not created for HTTP request before ${K}ms`);N.code="ETIMEOUT",z(N)},G=(N)=>{if(W)return;if(J!==null)clearTimeout(J),J=null;z(N)},V=(N)=>{if(W)return;if(J!=null)clearTimeout(J),J=null;if(YJ(N)){cY("Callback returned another Agent instance %o",N.constructor.name),N.addRequest(Z,Q);return}if(N){N.once("free",()=>{this.freeSocket(N,Q)}),Z.onSocket(N);return}const F=new Error(`no Duplex stream was returned to agent-base for \`${Z.method} ${Z.path}\``);z(F)};if(typeof this.callback!=="function"){z(new Error("`callback` is not defined"));return}if(!this.promisifiedCallback)if(this.callback.length>=3)cY("Converting legacy callback function to promise"),this.promisifiedCallback=$J.default(this.callback);else this.promisifiedCallback=this.callback;if(typeof K==="number"&&K>0)J=setTimeout(w,K);if(("port"in Q)&&typeof Q.port!=="number")Q.port=Number(Q.port);try{cY("Resolving socket for %o request: %o",Q.protocol,`${Z.method} ${Z.path}`),Promise.resolve(this.promisifiedCallback(Z,Q)).then(V,G)}catch(N){Promise.reject(N).catch(G)}}freeSocket(Z,X){cY("Freeing socket %o %o",Z.constructor.name,X),Z.destroy()}destroy(){cY("Destroying agent %o",this.constructor.name)}}$.Agent=Y,$.prototype=$.Agent.prototype})(nZ||(nZ={}));bW.exports=nZ});var vW=G0((lY)=>{var QJ=function($){return new Promise((Y,Z)=>{let X=0;const Q=[];function W(){const V=$.read();if(V)G(V);else $.once("readable",W)}function J(){$.removeListener("end",z),$.removeListener("error",w),$.removeListener("close",K),$.removeListener("readable",W)}function K(V){pY("onclose had error %o",V)}function z(){pY("onend")}function w(V){J(),pY("onerror %o",V),Z(V)}function G(V){Q.push(V),X+=V.length;const N=Buffer.concat(Q,X);if(N.indexOf("\r\n\r\n")===-1){pY("have not received end of HTTP headers yet..."),W();return}const H=N.toString("ascii",0,N.indexOf("\r\n")),B=+H.split(" ")[1];pY("got proxy server response: %o",H),Y({statusCode:B,buffered:N})}$.on("error",w),$.on("close",K),$.on("end",z),W()})},ZJ=lY&&lY.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(lY,"__esModule",{value:!0});var XJ=ZJ(oZ()),pY=XJ.default("https-proxy-agent:parse-proxy-response");lY.default=QJ});var uW=G0((T$)=>{var wJ=function($){$.resume()},NJ=function($,Y){return Boolean(!Y&&$===80||Y&&$===443)},MJ=function($){return typeof $==="string"?/^https:?$/i.test($):!1},LJ=function($,...Y){const Z={};let X;for(X in $)if(!Y.includes(X))Z[X]=$[X];return Z},WJ=T$&&T$.__awaiter||function($,Y,Z,X){function Q(W){return W instanceof Z?W:new Z(function(J){J(W)})}return new(Z||(Z=Promise))(function(W,J){function K(G){try{w(X.next(G))}catch(V){J(V)}}function z(G){try{w(X.throw(G))}catch(V){J(V)}}function w(G){G.done?W(G.value):Q(G.value).then(K,z)}w((X=X.apply($,Y||[])).next())})},NY=T$&&T$.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(T$,"__esModule",{value:!0});var gW=NY(import.meta.require("net")),mW=NY(import.meta.require("tls")),JJ=NY(import.meta.require("url")),KJ=NY(import.meta.require("assert")),zJ=NY(oZ()),VJ=hW(),GJ=NY(vW()),iY=zJ.default("https-proxy-agent:agent");class dW extends VJ.Agent{constructor($){let Y;if(typeof $==="string")Y=JJ.default.parse($);else Y=$;if(!Y)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");iY("creating new HttpsProxyAgent instance: %o",Y);super(Y);const Z=Object.assign({},Y);if(this.secureProxy=Y.secureProxy||MJ(Z.protocol),Z.host=Z.hostname||Z.host,typeof Z.port==="string")Z.port=parseInt(Z.port,10);if(!Z.port&&Z.host)Z.port=this.secureProxy?443:80;if(this.secureProxy&&!("ALPNProtocols"in Z))Z.ALPNProtocols=["http 1.1"];if(Z.host&&Z.path)delete Z.path,delete Z.pathname;this.proxy=Z}callback($,Y){return WJ(this,void 0,void 0,function*(){const{proxy:Z,secureProxy:X}=this;let Q;if(X)iY("Creating `tls.Socket`: %o",Z),Q=mW.default.connect(Z);else iY("Creating `net.Socket`: %o",Z),Q=gW.default.connect(Z);const W=Object.assign({},Z.headers);let K=`CONNECT ${`${Y.host}:${Y.port}`} HTTP/1.1\r\n`;if(Z.auth)W["Proxy-Authorization"]=`Basic ${Buffer.from(Z.auth).toString("base64")}`;let{host:z,port:w,secureEndpoint:G}=Y;if(!NJ(w,G))z+=`:${w}`;W.Host=z,W.Connection="close";for(let B of Object.keys(W))K+=`${B}: ${W[B]}\r\n`;const V=GJ.default(Q);Q.write(`${K}\r\n`);const{statusCode:N,buffered:F}=yield V;if(N===200){if($.once("socket",wJ),Y.secureEndpoint){iY("Upgrading socket connection to TLS");const B=Y.servername||Y.host;return mW.default.connect(Object.assign(Object.assign({},LJ(Y,"host","hostname","path","port")),{socket:Q,servername:B}))}return Q}Q.destroy();const H=new gW.default.Socket({writable:!1});return H.readable=!0,$.once("socket",(B)=>{iY("replaying proxy buffer for failed request"),KJ.default(B.listenerCount("data")>0),B.push(F),B.push(null)}),H})}}T$.default=dW});var pW=G0((CX,cW)=>{var fX=function($){return new IX.default($)},FJ=CX&&CX.__importDefault||function($){return $&&$.__esModule?$:{default:$}},IX=FJ(uW());(function($){$.HttpsProxyAgent=IX.default,$.prototype=IX.default.prototype})(fX||(fX={}));cW.exports=fX});var u0="4.20.0";function cX($,Y={auto:!1}){if(uX)throw new Error(`you must \`import 'openai/shims/${$.kind}'\` before importing anything else from openai`);if(c0)throw new Error(`can't \`import 'openai/shims/${$.kind}'\` after \`import 'openai/shims/${c0}'\``);uX=Y.auto,c0=$.kind,X1=$.fetch,S8=$.Request,I8=$.Response,f8=$.Headers,Q1=$.FormData,C8=$.Blob,oY=$.File,W1=$.ReadableStream,J1=$.getMultipartRequestOptions,K1=$.getDefaultAgent,nY=$.fileFromPath,z1=$.isFsReadStream}var uX=!1,c0=void 0,X1=void 0,S8=void 0,I8=void 0,f8=void 0,Q1=void 0,C8=void 0,oY=void 0,W1=void 0,J1=void 0,K1=void 0,nY=void 0,z1=void 0;class V1{constructor($){this.body=$}get[Symbol.toStringTag](){return"MultipartBody"}}function pX({manuallyImported:$}={}){const Y=$?"You may need to use polyfills":`Add one of these imports before your first \`import \u2026 from 'openai'\`:
- \`import 'openai/shims/node'\` (if you're running on Node)
- \`import 'openai/shims/web'\` (otherwise)
`;let Z,X,Q,W;try{Z=fetch,X=Request,Q=Response,W=Headers}catch(J){throw new Error(`this environment is missing the following Web Fetch API type: ${J.message}. ${Y}`)}return{kind:"web",fetch:Z,Request:X,Response:Q,Headers:W,FormData:typeof FormData!=="undefined"?FormData:class J{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${Y}`)}},Blob:typeof Blob!=="undefined"?Blob:class J{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${Y}`)}},File:typeof File!=="undefined"?File:class J{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${Y}`)}},ReadableStream:typeof ReadableStream!=="undefined"?ReadableStream:class J{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${Y}`)}},getMultipartRequestOptions:async(J,K)=>({...K,body:new V1(J)}),getDefaultAgent:(J)=>{return},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:(J)=>!1}}import{ReadStream as y8} from"fs";function lX(){const $=pX();function Y(Z){return Z instanceof y8}return{...$,isFsReadStream:Y}}if(!c0)cX(lX(),{auto:!0});class D extends Error{}class y extends D{constructor($,Y,Z,X){super(`${y.makeMessage($,Y,Z)}`);this.status=$,this.headers=X;const Q=Y;this.error=Q,this.code=Q?.code,this.param=Q?.param,this.type=Q?.type}static makeMessage($,Y,Z){const X=Y?.message?typeof Y.message==="string"?Y.message:JSON.stringify(Y.message):Y?JSON.stringify(Y):Z;if($&&X)return`${$} ${X}`;if($)return`${$} status code (no body)`;if(X)return X;return"(no status code or body)"}static generate($,Y,Z,X){if(!$)return new p0({cause:JZ(Y)});const Q=Y?.error;if($===400)return new tY($,Q,Z,X);if($===401)return new eY($,Q,Z,X);if($===403)return new $Z($,Q,Z,X);if($===404)return new YZ($,Q,Z,X);if($===409)return new ZZ($,Q,Z,X);if($===422)return new XZ($,Q,Z,X);if($===429)return new QZ($,Q,Z,X);if($>=500)return new WZ($,Q,Z,X);return new y($,Q,Z,X)}}class e extends y{constructor({message:$}={}){super(void 0,void 0,$||"Request was aborted.",void 0);this.status=void 0}}class p0 extends y{constructor({message:$,cause:Y}){super(void 0,void 0,$||"Connection error.",void 0);if(this.status=void 0,Y)this.cause=Y}}class l0 extends p0{constructor({message:$}={}){super({message:$??"Request timed out."})}}class tY extends y{constructor(){super(...arguments);this.status=400}}class eY extends y{constructor(){super(...arguments);this.status=401}}class $Z extends y{constructor(){super(...arguments);this.status=403}}class YZ extends y{constructor(){super(...arguments);this.status=404}}class ZZ extends y{constructor(){super(...arguments);this.status=409}}class XZ extends y{constructor(){super(...arguments);this.status=422}}class QZ extends y{constructor(){super(...arguments);this.status=429}}class WZ extends y{}var b8=function($,Y){const Z=$.indexOf(Y);if(Z!==-1)return[$.substring(0,Z),Y,$.substring(Z+Y.length)];return[$,"",""]},iX=function($){if($[Symbol.asyncIterator])return $;const Y=$.getReader();return{async next(){try{const Z=await Y.read();if(Z?.done)Y.releaseLock();return Z}catch(Z){throw Y.releaseLock(),Z}},async return(){const Z=Y.cancel();return Y.releaseLock(),await Z,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}};class w0{constructor($,Y){this.iterator=$,this.controller=Y}static fromSSEResponse($,Y){let Z=!1;const X=new aX;async function*Q(){if(!$.body)throw Y.abort(),new D("Attempted to iterate over a response with no body");const J=new i0,K=iX($.body);for await(let z of K)for(let w of J.decode(z)){const G=X.decode(w);if(G)yield G}for(let z of J.flush()){const w=X.decode(z);if(w)yield w}}async function*W(){if(Z)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");Z=!0;let J=!1;try{for await(let K of Q()){if(J)continue;if(K.data.startsWith("[DONE]")){J=!0;continue}if(K.event===null){let z;try{z=JSON.parse(K.data)}catch(w){throw console.error("Could not parse message into JSON:",K.data),console.error("From chunk:",K.raw),w}if(z&&z.error)throw new y(void 0,z.error,void 0,void 0);yield z}}J=!0}catch(K){if(K instanceof Error&&K.name==="AbortError")return;throw K}finally{if(!J)Y.abort()}}return new w0(W,Y)}static fromReadableStream($,Y){let Z=!1;async function*X(){const W=new i0,J=iX($);for await(let K of J)for(let z of W.decode(K))yield z;for(let K of W.flush())yield K}async function*Q(){if(Z)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");Z=!0;let W=!1;try{for await(let J of X()){if(W)continue;if(J)yield JSON.parse(J)}W=!0}catch(J){if(J instanceof Error&&J.name==="AbortError")return;throw J}finally{if(!W)Y.abort()}}return new w0(Q,Y)}[Symbol.asyncIterator](){return this.iterator()}tee(){const $=[],Y=[],Z=this.iterator(),X=(Q)=>{return{next:()=>{if(Q.length===0){const W=Z.next();$.push(W),Y.push(W)}return Q.shift()}}};return[new w0(()=>X($),this.controller),new w0(()=>X(Y),this.controller)]}toReadableStream(){const $=this;let Y;const Z=new TextEncoder;return new W1({async start(){Y=$[Symbol.asyncIterator]()},async pull(X){try{const{value:Q,done:W}=await Y.next();if(W)return X.close();const J=Z.encode(JSON.stringify(Q)+"\n");X.enqueue(J)}catch(Q){X.error(Q)}},async cancel(){await Y.return?.()}})}}class aX{constructor(){this.event=null,this.data=[],this.chunks=[]}decode($){if($.endsWith("\r"))$=$.substring(0,$.length-1);if(!$){if(!this.event&&!this.data.length)return null;const Q={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],Q}if(this.chunks.push($),$.startsWith(":"))return null;let[Y,Z,X]=b8($,":");if(X.startsWith(" "))X=X.substring(1);if(Y==="event")this.event=X;else if(Y==="data")this.data.push(X);return null}}class i0{constructor(){this.buffer=[],this.trailingCR=!1}decode($){let Y=this.decodeText($);if(this.trailingCR)Y="\r"+Y,this.trailingCR=!1;if(Y.endsWith("\r"))this.trailingCR=!0,Y=Y.slice(0,-1);if(!Y)return[];const Z=i0.NEWLINE_CHARS.has(Y[Y.length-1]||"");let X=Y.split(i0.NEWLINE_REGEXP);if(X.length===1&&!Z)return this.buffer.push(X[0]),[];if(this.buffer.length>0)X=[this.buffer.join("")+X[0],...X.slice(1)],this.buffer=[];if(!Z)this.buffer=[X.pop()||""];return X}decodeText($){if($==null)return"";if(typeof $==="string")return $;if(typeof Buffer!=="undefined"){if($ instanceof Buffer)return $.toString();if($ instanceof Uint8Array)return Buffer.from($).toString();throw new D(`Unexpected: received non-Uint8Array (${$.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder!=="undefined"){if($ instanceof Uint8Array||$ instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode($);throw new D(`Unexpected: received non-Uint8Array/ArrayBuffer (${$.constructor.name}) in a web platform. Please report this error.`)}throw new D("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const $=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,$}}i0.NEWLINE_CHARS=new Set(["\n","\r","\v","\f","\x1C","\x1D","\x1E","\x85","\u2028","\u2029"]);i0.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;async function N1($,Y,Z={}){if($=await $,sX($)){const Q=await $.blob();return Y||(Y=new URL($.url).pathname.split(/[\\/]/).pop()??"unknown_file"),new oY([Q],Y,Z)}const X=await g8($);if(Y||(Y=d8($)??"unknown_file"),!Z.type){const Q=X[0]?.type;if(typeof Q==="string")Z={...Z,type:Q}}return new oY(X,Y,Z)}async function g8($){let Y=[];if(typeof $==="string"||ArrayBuffer.isView($)||$ instanceof ArrayBuffer)Y.push($);else if(rX($))Y.push(await $.arrayBuffer());else if(u8($))for await(let Z of $)Y.push(Z);else throw new Error(`Unexpected data type: ${typeof $}; constructor: ${$?.constructor?.name}; props: ${m8($)}`);return Y}var m8=function($){return`[${Object.getOwnPropertyNames($).map((Z)=>`"${Z}"`).join(", ")}]`},d8=function($){return G1($.name)||G1($.filename)||G1($.path)?.split(/[\\/]/).pop()},sX=($)=>$!=null&&typeof $==="object"&&typeof $.url==="string"&&typeof $.blob==="function",h8=($)=>$!=null&&typeof $==="object"&&typeof $.name==="string"&&typeof $.lastModified==="number"&&rX($),rX=($)=>$!=null&&typeof $==="object"&&typeof $.size==="number"&&typeof $.type==="string"&&typeof $.text==="function"&&typeof $.slice==="function"&&typeof $.arrayBuffer==="function",v8=($)=>{return h8($)||sX($)||z1($)},G1=($)=>{if(typeof $==="string")return $;if(typeof Buffer!=="undefined"&&$ instanceof Buffer)return String($);return},u8=($)=>$!=null&&typeof $==="object"&&typeof $[Symbol.asyncIterator]==="function",M1=($)=>$&&typeof $==="object"&&$.body&&$[Symbol.toStringTag]==="MultipartBody";var N0=async($)=>{const Y=await oX($.body);return J1(Y,$)},oX=async($)=>{const Y=new Q1;return await Promise.all(Object.entries($||{}).map(([Z,X])=>w1(Y,Z,X))),Y};var w1=async($,Y,Z)=>{if(Z===void 0)return;if(Z==null)throw new TypeError(`Received null for "${Y}"; to pass null in FormData, you must use the string 'null'`);if(typeof Z==="string"||typeof Z==="number"||typeof Z==="boolean")$.append(Y,String(Z));else if(v8(Z)){const X=await N1(Z);$.append(Y,X)}else if(Array.isArray(Z))await Promise.all(Z.map((X)=>w1($,Y+"[]",X)));else if(typeof Z==="object")await Promise.all(Object.entries(Z).map(([X,Q])=>w1($,`${Y}[${X}]`,Q)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${Z} instead`)};async function $Q($){const{response:Y}=$;if($.options.stream)return MY("response",Y.status,Y.url,Y.headers,Y.body),w0.fromSSEResponse(Y,$.controller);if(Y.status===204)return null;if($.options.__binaryResponse)return Y;if(Y.headers.get("content-type")?.includes("application/json")){const Q=await Y.json();return MY("response",Y.status,Y.url,Y.headers,Q),Q}const X=await Y.text();return MY("response",Y.status,Y.url,Y.headers,X),X}var r8=function(){if(typeof navigator==="undefined"||!navigator)return null;const $=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:Y,pattern:Z}of $){const X=Z.exec(navigator.userAgent);if(X){const Q=X[1]||0,W=X[2]||0,J=X[3]||0;return{browser:Y,version:`${Q}.${W}.${J}`}}}return null};function ZQ($){if(!$)return!0;for(let Y in $)return!1;return!0}function $9($,Y){return Object.prototype.hasOwnProperty.call($,Y)}function MY($,...Y){if(typeof process!=="undefined"&&process.env.DEBUG==="true")console.log(`OpenAI:DEBUG:${$}`,...Y)}var p8=function($,Y,Z,X,Q){if(X==="m")throw new TypeError("Private method is not writable");if(X==="a"&&!Q)throw new TypeError("Private accessor was defined without a setter");if(typeof Y==="function"?$!==Y||!Q:!Y.has($))throw new TypeError("Cannot write private member to an object whose class did not declare it");return X==="a"?Q.call($,Z):Q?Q.value=Z:Y.set($,Z),Z},l8=function($,Y,Z,X){if(Z==="a"&&!X)throw new TypeError("Private accessor was defined without a getter");if(typeof Y==="function"?$!==Y||!X:!Y.has($))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Z==="m"?X:Z==="a"?X.call($):X?X.value:Y.get($)},KZ;class zZ extends Promise{constructor($,Y=$Q){super((Z)=>{Z(null)});this.responsePromise=$,this.parseResponse=Y}_thenUnwrap($){return new zZ(this.responsePromise,async(Y)=>$(await this.parseResponse(Y)))}asResponse(){return this.responsePromise.then(($)=>$.response)}async withResponse(){const[$,Y]=await Promise.all([this.parse(),this.asResponse()]);return{data:$,response:Y}}parse(){if(!this.parsedPromise)this.parsedPromise=this.responsePromise.then(this.parseResponse);return this.parsedPromise}then($,Y){return this.parse().then($,Y)}catch($){return this.parse().catch($)}finally($){return this.parse().finally($)}}class F1{constructor({baseURL:$,maxRetries:Y=2,timeout:Z=600000,httpAgent:X,fetch:Q}){this.baseURL=$,this.maxRetries=L1("maxRetries",Y),this.timeout=L1("timeout",Z),this.httpAgent=X,this.fetch=Q??X1}authHeaders($){return{}}defaultHeaders($){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...o8(),...this.authHeaders($)}}validateHeaders($,Y){}defaultIdempotencyKey(){return`stainless-node-retry-${Y9()}`}get($,Y){return this.methodRequest("get",$,Y)}post($,Y){return this.methodRequest("post",$,Y)}patch($,Y){return this.methodRequest("patch",$,Y)}put($,Y){return this.methodRequest("put",$,Y)}delete($,Y){return this.methodRequest("delete",$,Y)}methodRequest($,Y,Z){return this.request(Promise.resolve(Z).then((X)=>({method:$,path:Y,...X})))}getAPIList($,Y,Z){return this.requestAPIList(Y,{method:"get",path:$,...Z})}calculateContentLength($){if(typeof $==="string"){if(typeof Buffer!=="undefined")return Buffer.byteLength($,"utf8").toString();if(typeof TextEncoder!=="undefined")return(new TextEncoder()).encode($).length.toString()}return null}buildRequest($){const{method:Y,path:Z,query:X,headers:Q={}}=$,W=M1($.body)?$.body.body:$.body?JSON.stringify($.body,null,2):null,J=this.calculateContentLength(W),K=this.buildURL(Z,X);if("timeout"in $)L1("timeout",$.timeout);const z=$.timeout??this.timeout,w=$.httpAgent??this.httpAgent??K1(K),G=z+1000;if(typeof w?.options?.timeout==="number"&&G>(w.options.timeout??0))w.options.timeout=G;if(this.idempotencyHeader&&Y!=="get"){if(!$.idempotencyKey)$.idempotencyKey=this.defaultIdempotencyKey();Q[this.idempotencyHeader]=$.idempotencyKey}const V={...J&&{"Content-Length":J},...this.defaultHeaders($),...Q};if(M1($.body)&&c0!=="node")delete V["Content-Type"];Object.keys(V).forEach((F)=>V[F]===null&&delete V[F]);const N={method:Y,...W&&{body:W},headers:V,...w&&{agent:w},signal:$.signal??null};return this.validateHeaders(V,Q),{req:N,url:K,timeout:z}}async prepareRequest($,{url:Y,options:Z}){}parseHeaders($){return!$?{}:(Symbol.iterator in $)?Object.fromEntries(Array.from($).map((Y)=>[...Y])):{...$}}makeStatusError($,Y,Z,X){return y.generate($,Y,Z,X)}request($,Y=null){return new zZ(this.makeRequest($,Y))}async makeRequest($,Y){const Z=await $;if(Y==null)Y=Z.maxRetries??this.maxRetries;const{req:X,url:Q,timeout:W}=this.buildRequest(Z);if(await this.prepareRequest(X,{url:Q,options:Z}),MY("request",Q,Z,X.headers),Z.signal?.aborted)throw new e;const J=new AbortController,K=await this.fetchWithTimeout(Q,X,W,J).catch(JZ);if(K instanceof Error){if(Z.signal?.aborted)throw new e;if(Y)return this.retryRequest(Z,Y);if(K.name==="AbortError")throw new l0;throw new p0({cause:K})}const z=i8(K.headers);if(!K.ok){if(Y&&this.shouldRetry(K))return this.retryRequest(Z,Y,z);const w=await K.text().catch((F)=>JZ(F).message),G=n8(w),V=G?void 0:w;throw MY("response",K.status,Q,z,V),this.makeStatusError(K.status,G,V,z)}return{response:K,options:Z,controller:J}}requestAPIList($,Y){const Z=this.makeRequest(Y,null);return new YQ(this,Z,$)}buildURL($,Y){const Z=e8($)?new URL($):new URL(this.baseURL+(this.baseURL.endsWith("/")&&$.startsWith("/")?$.slice(1):$)),X=this.defaultQuery();if(!ZQ(X))Y={...X,...Y};if(Y)Z.search=this.stringifyQuery(Y);return Z.toString()}stringifyQuery($){return Object.entries($).filter(([Y,Z])=>typeof Z!=="undefined").map(([Y,Z])=>{if(typeof Z==="string"||typeof Z==="number"||typeof Z==="boolean")return`${encodeURIComponent(Y)}=${encodeURIComponent(Z)}`;if(Z===null)return`${encodeURIComponent(Y)}=`;throw new D(`Cannot stringify type ${typeof Z}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout($,Y,Z,X){const{signal:Q,...W}=Y||{};if(Q)Q.addEventListener("abort",()=>X.abort());const J=setTimeout(()=>X.abort(),Z);return this.getRequestClient().fetch.call(void 0,$,{signal:X.signal,...W}).finally(()=>{clearTimeout(J)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry($){const Y=$.headers.get("x-should-retry");if(Y==="true")return!0;if(Y==="false")return!1;if($.status===408)return!0;if($.status===409)return!0;if($.status===429)return!0;if($.status>=500)return!0;return!1}async retryRequest($,Y,Z){let X;const Q=Z?.["retry-after"];if(Q){const W=parseInt(Q);if(!Number.isNaN(W))X=W*1000;else X=Date.parse(Q)-Date.now()}if(!X||!Number.isInteger(X)||X<=0||X>60000){const W=$.maxRetries??this.maxRetries;X=this.calculateDefaultRetryTimeoutMillis(Y,W)}return await H1(X),this.makeRequest($,Y-1)}calculateDefaultRetryTimeoutMillis($,Y){const Q=Y-$,W=Math.min(0.5*Math.pow(2,Q),8),J=1-Math.random()*0.25;return W*J*1000}getUserAgent(){return`${this.constructor.name}/JS ${u0}`}}class VZ{constructor($,Y,Z,X){KZ.set(this,void 0),p8(this,KZ,$,"f"),this.options=X,this.response=Y,this.body=Z}hasNextPage(){if(!this.getPaginatedItems().length)return!1;return this.nextPageInfo()!=null}async getNextPage(){const $=this.nextPageInfo();if(!$)throw new D("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const Y={...this.options};if("params"in $)Y.query={...Y.query,...$.params};else if("url"in $){const Z=[...Object.entries(Y.query||{}),...$.url.searchParams.entries()];for(let[X,Q]of Z)$.url.searchParams.set(X,Q);Y.query=void 0,Y.path=$.url.toString()}return await l8(this,KZ,"f").requestAPIList(this.constructor,Y)}async*iterPages(){let $=this;yield $;while($.hasNextPage())$=await $.getNextPage(),yield $}async*[(KZ=new WeakMap,Symbol.asyncIterator)](){for await(let $ of this.iterPages())for(let Y of $.getPaginatedItems())yield Y}}class YQ extends zZ{constructor($,Y,Z){super(Y,async(X)=>new Z($,X.response,await $Q(X),X.options))}async*[Symbol.asyncIterator](){const $=await this;for await(let Y of $)yield Y}}var i8=($)=>{return new Proxy(Object.fromEntries($.entries()),{get(Y,Z){const X=Z.toString();return Y[X.toLowerCase()]||Y[X]}})},a8={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryResponse:!0},x=($)=>{return typeof $==="object"&&$!==null&&!ZQ($)&&Object.keys($).every((Y)=>$9(a8,Y))},s8=()=>{if(typeof Deno!=="undefined"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":u0,"X-Stainless-OS":tX(Deno.build.os),"X-Stainless-Arch":nX(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":Deno.version};if(typeof EdgeRuntime!=="undefined")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":u0,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process!=="undefined"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":u0,"X-Stainless-OS":tX(process.platform),"X-Stainless-Arch":nX(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const $=r8();if($)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":u0,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${$.browser}`,"X-Stainless-Runtime-Version":$.version};return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":u0,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}},nX=($)=>{if($==="x32")return"x32";if($==="x86_64"||$==="x64")return"x64";if($==="arm")return"arm";if($==="aarch64"||$==="arm64")return"arm64";if($)return`other:${$}`;return"unknown"},tX=($)=>{if($=$.toLowerCase(),$.includes("ios"))return"iOS";if($==="android")return"Android";if($==="darwin")return"MacOS";if($==="win32")return"Windows";if($==="freebsd")return"FreeBSD";if($==="openbsd")return"OpenBSD";if($==="linux")return"Linux";if($)return`Other:${$}`;return"Unknown"},eX,o8=()=>{return eX??(eX=s8())},n8=($)=>{try{return JSON.parse($)}catch(Y){return}},t8=new RegExp("^(?:[a-z]+:)?//","i"),e8=($)=>{return t8.test($)},H1=($)=>new Promise((Y)=>setTimeout(Y,$)),L1=($,Y)=>{if(typeof Y!=="number"||!Number.isInteger(Y))throw new D(`${$} must be an integer`);if(Y<0)throw new D(`${$} must be a positive integer`);return Y},JZ=($)=>{if($ instanceof Error)return $;return new Error($)};var B1=($)=>{if(typeof process!=="undefined")return process.env?.[$]??void 0;if(typeof Deno!=="undefined")return Deno.env?.get?.($);return};var Y9=()=>{return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,($)=>{const Y=Math.random()*16|0;return($==="x"?Y:Y&3|8).toString(16)})},XQ=()=>{return typeof window!=="undefined"&&typeof window.document!=="undefined"&&typeof navigator!=="undefined"};class D0 extends VZ{constructor($,Y,Z,X){super($,Y,Z,X);this.data=Z.data,this.object=Z.object}getPaginatedItems(){return this.data}nextPageParams(){return null}nextPageInfo(){return null}}class g extends VZ{constructor($,Y,Z,X){super($,Y,Z,X);this.data=Z.data}getPaginatedItems(){return this.data}nextPageParams(){const $=this.nextPageInfo();if(!$)return null;if("params"in $)return $.params;const Y=Object.fromEntries($.url.searchParams);if(!Object.keys(Y).length)return null;return Y}nextPageInfo(){if(!this.data?.length)return null;const $=this.data[this.data.length-1]?.id;if(!$)return null;return{params:{after:$}}}}class U{constructor($){this._client=$}}class O$ extends U{create($,Y){return this._client.post("/chat/completions",{body:$,...Y,stream:$.stream??!1})}}(function($){})(O$||(O$={}));class a0 extends U{constructor(){super(...arguments);this.completions=new O$(this._client)}}(function($){$.Completions=O$})(a0||(a0={}));class A$ extends U{create($,Y){return this._client.post("/audio/speech",{body:$,...Y,__binaryResponse:!0})}}(function($){})(A$||(A$={}));class q$ extends U{create($,Y){return this._client.post("/audio/transcriptions",N0({body:$,...Y}))}}(function($){})(q$||(q$={}));class E$ extends U{create($,Y){return this._client.post("/audio/translations",N0({body:$,...Y}))}}(function($){})(E$||(E$={}));class s0 extends U{constructor(){super(...arguments);this.transcriptions=new q$(this._client),this.translations=new E$(this._client),this.speech=new A$(this._client)}}(function($){$.Transcriptions=q$,$.Translations=E$,$.Speech=A$})(s0||(s0={}));class k$ extends U{create($,Y,Z){return this._client.post(`/assistants/${$}/files`,{body:Y,...Z,headers:{"OpenAI-Beta":"assistants=v1",...Z?.headers}})}retrieve($,Y,Z){return this._client.get(`/assistants/${$}/files/${Y}`,{...Z,headers:{"OpenAI-Beta":"assistants=v1",...Z?.headers}})}list($,Y={},Z){if(x(Y))return this.list($,{},Y);return this._client.getAPIList(`/assistants/${$}/files`,S$,{query:Y,...Z,headers:{"OpenAI-Beta":"assistants=v1",...Z?.headers}})}del($,Y,Z){return this._client.delete(`/assistants/${$}/files/${Y}`,{...Z,headers:{"OpenAI-Beta":"assistants=v1",...Z?.headers}})}}class S$ extends g{}(function($){$.AssistantFilesPage=S$})(k$||(k$={}));class I$ extends U{constructor(){super(...arguments);this.files=new k$(this._client)}create($,Y){return this._client.post("/assistants",{body:$,...Y,headers:{"OpenAI-Beta":"assistants=v1",...Y?.headers}})}retrieve($,Y){return this._client.get(`/assistants/${$}`,{...Y,headers:{"OpenAI-Beta":"assistants=v1",...Y?.headers}})}update($,Y,Z){return this._client.post(`/assistants/${$}`,{body:Y,...Z,headers:{"OpenAI-Beta":"assistants=v1",...Z?.headers}})}list($={},Y){if(x($))return this.list({},$);return this._client.getAPIList("/assistants",f$,{query:$,...Y,headers:{"OpenAI-Beta":"assistants=v1",...Y?.headers}})}del($,Y){return this._client.delete(`/assistants/${$}`,{...Y,headers:{"OpenAI-Beta":"assistants=v1",...Y?.headers}})}}class f$ extends g{}(function($){$.AssistantsPage=f$,$.Files=k$,$.AssistantFilesPage=S$})(I$||(I$={}));function j1($){return typeof $.parse==="function"}var r0=($)=>{return $?.role==="assistant"},U1=($)=>{return $?.role==="function"},JQ=($)=>{return $?.role==="tool"};var W0=function($,Y,Z,X,Q){if(X==="m")throw new TypeError("Private method is not writable");if(X==="a"&&!Q)throw new TypeError("Private accessor was defined without a setter");if(typeof Y==="function"?$!==Y||!Q:!Y.has($))throw new TypeError("Cannot write private member to an object whose class did not declare it");return X==="a"?Q.call($,Z):Q?Q.value=Z:Y.set($,Z),Z},P=function($,Y,Z,X){if(Z==="a"&&!X)throw new TypeError("Private accessor was defined without a getter");if(typeof Y==="function"?$!==Y||!X:!Y.has($))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Z==="m"?X:Z==="a"?X.call($):X?X.value:Y.get($)},u,GZ,wZ,LY,FY,NZ,HY,P0,BY,MZ,LZ,C$,T1,R1,D1,P1,O1,A1,zQ,q1,KQ=10;class jY{constructor(){u.add(this),this.controller=new AbortController,GZ.set(this,void 0),wZ.set(this,()=>{}),LY.set(this,()=>{}),FY.set(this,void 0),NZ.set(this,()=>{}),HY.set(this,()=>{}),P0.set(this,{}),this._chatCompletions=[],this.messages=[],BY.set(this,!1),MZ.set(this,!1),LZ.set(this,!1),C$.set(this,!1),A1.set(this,($)=>{if(W0(this,MZ,!0,"f"),$ instanceof Error&&$.name==="AbortError")$=new e;if($ instanceof e)return W0(this,LZ,!0,"f"),this._emit("abort",$);if($ instanceof D)return this._emit("error",$);if($ instanceof Error){const Y=new D($.message);return Y.cause=$,this._emit("error",Y)}return this._emit("error",new D(String($)))}),W0(this,GZ,new Promise(($,Y)=>{W0(this,wZ,$,"f"),W0(this,LY,Y,"f")}),"f"),W0(this,FY,new Promise(($,Y)=>{W0(this,NZ,$,"f"),W0(this,HY,Y,"f")}),"f"),P(this,GZ,"f").catch(()=>{}),P(this,FY,"f").catch(()=>{})}_run($){setTimeout(()=>{$().then(()=>{this._emitFinal(),this._emit("end")},P(this,A1,"f"))},0)}_addChatCompletion($){this._chatCompletions.push($),this._emit("chatCompletion",$);const Y=$.choices[0]?.message;if(Y)this._addMessage(Y);return $}_addMessage($,Y=!0){if(this.messages.push($),Y){if(this._emit("message",$),(U1($)||JQ($))&&$.content)this._emit("functionCallResult",$.content);else if(r0($)&&$.function_call)this._emit("functionCall",$.function_call);else if(r0($)&&$.tool_calls){for(let Z of $.tool_calls)if(Z.type==="function")this._emit("functionCall",Z.function)}}}_connected(){if(this.ended)return;P(this,wZ,"f").call(this),this._emit("connect")}get ended(){return P(this,BY,"f")}get errored(){return P(this,MZ,"f")}get aborted(){return P(this,LZ,"f")}abort(){this.controller.abort()}on($,Y){return(P(this,P0,"f")[$]||(P(this,P0,"f")[$]=[])).push({listener:Y}),this}off($,Y){const Z=P(this,P0,"f")[$];if(!Z)return this;const X=Z.findIndex((Q)=>Q.listener===Y);if(X>=0)Z.splice(X,1);return this}once($,Y){return(P(this,P0,"f")[$]||(P(this,P0,"f")[$]=[])).push({listener:Y,once:!0}),this}emitted($){return new Promise((Y,Z)=>{if(W0(this,C$,!0,"f"),$!=="error")this.once("error",Z);this.once($,Y)})}async done(){W0(this,C$,!0,"f"),await P(this,FY,"f")}async finalChatCompletion(){await this.done();const $=this._chatCompletions[this._chatCompletions.length-1];if(!$)throw new D("stream ended without producing a ChatCompletion");return $}async finalContent(){return await this.done(),P(this,u,"m",T1).call(this)}async finalMessage(){return await this.done(),P(this,u,"m",R1).call(this)}async finalFunctionCall(){return await this.done(),P(this,u,"m",D1).call(this)}async finalFunctionCallResult(){return await this.done(),P(this,u,"m",P1).call(this)}async totalUsage(){return await this.done(),P(this,u,"m",O1).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emit($,...Y){if(P(this,BY,"f"))return;if($==="end")W0(this,BY,!0,"f"),P(this,NZ,"f").call(this);const Z=P(this,P0,"f")[$];if(Z)P(this,P0,"f")[$]=Z.filter((X)=>!X.once),Z.forEach(({listener:X})=>X(...Y));if($==="abort"){const X=Y[0];if(!P(this,C$,"f")&&!Z?.length)Promise.reject(X);P(this,LY,"f").call(this,X),P(this,HY,"f").call(this,X),this._emit("end");return}if($==="error"){const X=Y[0];if(!P(this,C$,"f")&&!Z?.length)Promise.reject(X);P(this,LY,"f").call(this,X),P(this,HY,"f").call(this,X),this._emit("end")}}_emitFinal(){const $=this._chatCompletions[this._chatCompletions.length-1];if($)this._emit("finalChatCompletion",$);const Y=this.messages[this.messages.length-1];if(Y)this._emit("finalMessage",Y);const Z=P(this,u,"m",T1).call(this);if(Z)this._emit("finalContent",Z);const X=P(this,u,"m",D1).call(this);if(X)this._emit("finalFunctionCall",X);const Q=P(this,u,"m",P1).call(this);if(Q!=null)this._emit("finalFunctionCallResult",Q);if(this._chatCompletions.some((W)=>W.usage))this._emit("totalUsage",P(this,u,"m",O1).call(this))}async _createChatCompletion($,Y,Z){const X=Z?.signal;if(X){if(X.aborted)this.controller.abort();X.addEventListener("abort",()=>this.controller.abort())}P(this,u,"m",zQ).call(this,Y);const Q=await $.create({...Y,stream:!1},{...Z,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Q)}async _runChatCompletion($,Y,Z){for(let X of Y.messages)this._addMessage(X,!1);return await this._createChatCompletion($,Y,Z)}async _runFunctions($,Y,Z){const{function_call:Q="auto",stream:W,...J}=Y,K=typeof Q!=="string"&&Q?.name,{maxChatCompletions:z=KQ}=Z||{},w={};for(let V of Y.functions)w[V.name||V.function.name]=V;const G=Y.functions.map((V)=>({name:V.name||V.function.name,parameters:V.parameters,description:V.description}));for(let V of Y.messages)this._addMessage(V,!1);for(let V=0;V<z;++V){const F=(await this._createChatCompletion($,{...J,function_call:Q,functions:G,messages:[...this.messages]},Z)).choices[0]?.message;if(!F)throw new D("missing message in ChatCompletion response");if(!F.function_call)return;const{name:H,arguments:B}=F.function_call,T=w[H];if(!T){const q=`Invalid function_call: ${JSON.stringify(H)}. Available options are: ${G.map((v)=>JSON.stringify(v.name)).join(", ")}. Please try again`;this._addMessage({role:"function",name:H,content:q});continue}else if(K&&K!==H){const q=`Invalid function_call: ${JSON.stringify(H)}. ${JSON.stringify(K)} requested. Please try again`;this._addMessage({role:"function",name:H,content:q});continue}let A;try{A=j1(T)?await T.parse(B):B}catch(q){this._addMessage({role:"function",name:H,content:q instanceof Error?q.message:String(q)});continue}const S=await T.function(A,this),f=P(this,u,"m",q1).call(this,S);if(this._addMessage({role:"function",name:H,content:f}),K)return}}async _runTools($,Y,Z){const{tool_choice:Q="auto",stream:W,...J}=Y,K=typeof Q!=="string"&&Q?.function?.name,{maxChatCompletions:z=KQ}=Z||{},w={};for(let V of Y.tools)if(V.type==="function")w[V.function.name||V.function.function.name]=V.function;const G="tools"in Y?Y.tools.map((V)=>V.type==="function"?{type:"function",function:{name:V.function.name||V.function.function.name,parameters:V.function.parameters,description:V.function.description}}:V):void 0;for(let V of Y.messages)this._addMessage(V,!1);for(let V=0;V<z;++V){const F=(await this._createChatCompletion($,{...J,tool_choice:Q,tools:G,messages:[...this.messages]},Z)).choices[0]?.message;if(!F)throw new D("missing message in ChatCompletion response");if(!F.tool_calls)return;for(let H of F.tool_calls){if(H.type!=="function")continue;const B=H.id,{name:T,arguments:A}=H.function,S=w[T];if(!S){const E=`Invalid tool_call: ${JSON.stringify(T)}. Available options are: ${G.map((r)=>JSON.stringify(r.function.name)).join(", ")}. Please try again`;this._addMessage({role:"tool",tool_call_id:B,content:E});continue}else if(K&&K!==T){const E=`Invalid tool_call: ${JSON.stringify(T)}. ${JSON.stringify(K)} requested. Please try again`;this._addMessage({role:"tool",tool_call_id:B,content:E});continue}let f;try{f=j1(S)?await S.parse(A):A}catch(E){const r=E instanceof Error?E.message:String(E);this._addMessage({role:"tool",tool_call_id:B,content:r});continue}const q=await S.function(f,this),v=P(this,u,"m",q1).call(this,q);if(this._addMessage({role:"tool",tool_call_id:B,content:v}),K)return}}}}GZ=new WeakMap,wZ=new WeakMap,LY=new WeakMap,FY=new WeakMap,NZ=new WeakMap,HY=new WeakMap,P0=new WeakMap,BY=new WeakMap,MZ=new WeakMap,LZ=new WeakMap,C$=new WeakMap,A1=new WeakMap,u=new WeakSet,T1=function $(){return P(this,u,"m",R1).call(this).content},R1=function $(){let Y=this.messages.length;while(Y-- >0){const Z=this.messages[Y];if(r0(Z))return Z}throw new D("stream ended without producing a ChatCompletionMessage with role=assistant")},D1=function $(){for(let Y=this.messages.length-1;Y>=0;Y--){const Z=this.messages[Y];if(r0(Z)&&Z?.function_call)return Z.function_call}return},P1=function $(){for(let Y=this.messages.length-1;Y>=0;Y--){const Z=this.messages[Y];if(U1(Z)&&Z.content!=null)return Z.content}return},O1=function $(){const Y={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(let{usage:Z}of this._chatCompletions)if(Z)Y.completion_tokens+=Z.completion_tokens,Y.prompt_tokens+=Z.prompt_tokens,Y.total_tokens+=Z.total_tokens;return Y},zQ=function $(Y){if(Y.n!=null&&Y.n>1)throw new D("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},q1=function $(Y){return typeof Y==="string"?Y:Y===void 0?"undefined":JSON.stringify(Y)};class _$ extends jY{static runFunctions($,Y,Z){const X=new _$;return X._run(()=>X._runFunctions($,Y,Z)),X}static runTools($,Y,Z){const X=new _$;return X._run(()=>X._runTools($,Y,Z)),X}_addMessage($){if(super._addMessage($),r0($)&&$.content)this._emit("content",$.content)}}var z9=function($){const{id:Y,choices:Z,created:X,model:Q}=$;return{id:Y,choices:Z.map(({message:W,finish_reason:J,index:K})=>{if(!J)throw new D(`missing finish_reason for choice ${K}`);const{content:z=null,function_call:w,tool_calls:G}=W,V=W.role;if(!V)throw new D(`missing role for choice ${K}`);if(w){const{arguments:N,name:F}=w;if(N==null)throw new D(`missing function_call.arguments for choice ${K}`);if(!F)throw new D(`missing function_call.name for choice ${K}`);return{message:{content:z,function_call:{arguments:N,name:F},role:V},finish_reason:J,index:K}}if(G)return{index:K,finish_reason:J,message:{role:V,content:z,tool_calls:G.map((N,F)=>{const{function:H,type:B,id:T}=N,{arguments:A,name:S}=H||{};if(T==null)throw new D(`missing choices[${K}].tool_calls[${F}].id\n${HZ($)}`);if(B==null)throw new D(`missing choices[${K}].tool_calls[${F}].type\n${HZ($)}`);if(S==null)throw new D(`missing choices[${K}].tool_calls[${F}].function.name\n${HZ($)}`);if(A==null)throw new D(`missing choices[${K}].tool_calls[${F}].function.arguments\n${HZ($)}`);return{id:T,type:B,function:{name:S,arguments:A}}})}};return{message:{content:z,role:V},finish_reason:J,index:K}}),created:X,model:Q,object:"chat.completion"}},HZ=function($){return JSON.stringify($)},J0=function($,Y,Z,X){if(Z==="a"&&!X)throw new TypeError("Private accessor was defined without a getter");if(typeof Y==="function"?$!==Y||!X:!Y.has($))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Z==="m"?X:Z==="a"?X.call($):X?X.value:Y.get($)},E1=function($,Y,Z,X,Q){if(X==="m")throw new TypeError("Private method is not writable");if(X==="a"&&!Q)throw new TypeError("Private accessor was defined without a setter");if(typeof Y==="function"?$!==Y||!Q:!Y.has($))throw new TypeError("Cannot write private member to an object whose class did not declare it");return X==="a"?Q.call($,Z):Q?Q.value=Z:Y.set($,Z),Z},M0,k0,k1,S1,FZ,VQ;class o0 extends jY{constructor(){super(...arguments);M0.add(this),k0.set(this,void 0)}get currentChatCompletionSnapshot(){return J0(this,k0,"f")}static fromReadableStream($){const Y=new o0;return Y._run(()=>Y._fromReadableStream($)),Y}static createChatCompletion($,Y,Z){const X=new o0;return X._run(()=>X._runChatCompletion($,{...Y,stream:!0},{...Z,headers:{...Z?.headers,"X-Stainless-Helper-Method":"stream"}})),X}async _createChatCompletion($,Y,Z){const X=Z?.signal;if(X){if(X.aborted)this.controller.abort();X.addEventListener("abort",()=>this.controller.abort())}J0(this,M0,"m",k1).call(this);const Q=await $.create({...Y,stream:!0},{...Z,signal:this.controller.signal});this._connected();for await(let W of Q)J0(this,M0,"m",S1).call(this,W);if(Q.controller.signal?.aborted)throw new e;return this._addChatCompletion(J0(this,M0,"m",FZ).call(this))}async _fromReadableStream($,Y){const Z=Y?.signal;if(Z){if(Z.aborted)this.controller.abort();Z.addEventListener("abort",()=>this.controller.abort())}J0(this,M0,"m",k1).call(this),this._connected();const X=w0.fromReadableStream($,this.controller);let Q;for await(let W of X){if(Q&&Q!==W.id)this._addChatCompletion(J0(this,M0,"m",FZ).call(this));J0(this,M0,"m",S1).call(this,W),Q=W.id}if(X.controller.signal?.aborted)throw new e;return this._addChatCompletion(J0(this,M0,"m",FZ).call(this))}[(k0=new WeakMap,M0=new WeakSet,k1=function $(){if(this.ended)return;E1(this,k0,void 0,"f")},S1=function $(Y){if(this.ended)return;const Z=J0(this,M0,"m",VQ).call(this,Y);this._emit("chunk",Y,Z);const X=Y.choices[0]?.delta?.content,Q=Z.choices[0]?.message;if(X!=null&&Q?.role==="assistant"&&Q?.content)this._emit("content",X,Q.content)},FZ=function $(){if(this.ended)throw new D("stream has ended, this shouldn't happen");const Y=J0(this,k0,"f");if(!Y)throw new D("request ended without sending any chunks");return E1(this,k0,void 0,"f"),z9(Y)},VQ=function $(Y){var Z,X;let Q=J0(this,k0,"f");const{choices:W,...J}=Y;if(!Q)Q=E1(this,k0,{...J,choices:[]},"f");else Object.assign(Q,J);for(let{delta:K,finish_reason:z,index:w,...G}of Y.choices){let V=Q.choices[w];if(!V){Q.choices[w]={finish_reason:z,index:w,message:K,...G};continue}if(z)V.finish_reason=z;if(Object.assign(V,G),!K)continue;const{content:N,function_call:F,role:H,tool_calls:B}=K;if(N)V.message.content=(V.message.content||"")+N;if(H)V.message.role=H;if(F)if(!V.message.function_call)V.message.function_call=F;else{if(F.name)V.message.function_call.name=F.name;if(F.arguments)(Z=V.message.function_call).arguments??(Z.arguments=""),V.message.function_call.arguments+=F.arguments}if(B){if(!V.message.tool_calls)V.message.tool_calls=[];for(let{index:T,id:A,type:S,function:f}of B){const q=(X=V.message.tool_calls)[T]??(X[T]={});if(A)q.id=A;if(S)q.type=S;if(f)q.function??(q.function={arguments:""});if(f?.name)q.function.name=f.name;if(f?.arguments)q.function.arguments+=f.arguments}}}return Q},Symbol.asyncIterator)](){const $=[],Y=[];let Z=!1;return this.on("chunk",(X)=>{const Q=Y.shift();if(Q)Q(X);else $.push(X)}),this.on("end",()=>{Z=!0;for(let X of Y)X(void 0);Y.length=0}),{next:async()=>{if(!$.length){if(Z)return{value:void 0,done:!0};return new Promise((Q)=>Y.push(Q)).then((Q)=>Q?{value:Q,done:!1}:{value:void 0,done:!0})}return{value:$.shift(),done:!1}}}}toReadableStream(){return new w0(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}class n0 extends o0{static fromReadableStream($){const Y=new n0;return Y._run(()=>Y._fromReadableStream($)),Y}static runFunctions($,Y,Z){const X=new n0;return X._run(()=>X._runFunctions($,Y,{...Z,headers:{...Z?.headers,"X-Stainless-Helper-Method":"runFunctions"}})),X}static runTools($,Y,Z){const X=new n0;return X._run(()=>X._runTools($,Y,{...Z,headers:{...Z?.headers,"X-Stainless-Helper-Method":"runTools"}})),X}}class BZ extends U{runFunctions($,Y){if($.stream)return n0.runFunctions(this._client.chat.completions,$,Y);return _$.runFunctions(this._client.chat.completions,$,Y)}runTools($,Y){if($.stream)return n0.runTools(this._client.chat.completions,$,Y);return _$.runTools(this._client.chat.completions,$,Y)}stream($,Y){return o0.createChatCompletion(this._client.chat.completions,$,Y)}}class y$ extends U{constructor(){super(...arguments);this.completions=new BZ(this._client)}}(function($){$.Completions=BZ})(y$||(y$={}));class x$ extends U{retrieve($,Y,Z,X){return this._client.get(`/threads/${$}/messages/${Y}/files/${Z}`,{...X,headers:{"OpenAI-Beta":"assistants=v1",...X?.headers}})}list($,Y,Z={},X){if(x(Z))return this.list($,Y,{},Z);return this._client.getAPIList(`/threads/${$}/messages/${Y}/files`,b$,{query:Z,...X,headers:{"OpenAI-Beta":"assistants=v1",...X?.headers}})}}class b$ extends g{}(function($){$.MessageFilesPage=b$})(x$||(x$={}));class h$ extends U{constructor(){super(...arguments);this.files=new x$(this._client)}create($,Y,Z){return this._client.post(`/threads/${$}/messages`,{body:Y,...Z,headers:{"OpenAI-Beta":"assistants=v1",...Z?.headers}})}retrieve($,Y,Z){return this._client.get(`/threads/${$}/messages/${Y}`,{...Z,headers:{"OpenAI-Beta":"assistants=v1",...Z?.headers}})}update($,Y,Z,X){return this._client.post(`/threads/${$}/messages/${Y}`,{body:Z,...X,headers:{"OpenAI-Beta":"assistants=v1",...X?.headers}})}list($,Y={},Z){if(x(Y))return this.list($,{},Y);return this._client.getAPIList(`/threads/${$}/messages`,v$,{query:Y,...Z,headers:{"OpenAI-Beta":"assistants=v1",...Z?.headers}})}}class v$ extends g{}(function($){$.ThreadMessagesPage=v$,$.Files=x$,$.MessageFilesPage=b$})(h$||(h$={}));class g$ extends U{retrieve($,Y,Z,X){return this._client.get(`/threads/${$}/runs/${Y}/steps/${Z}`,{...X,headers:{"OpenAI-Beta":"assistants=v1",...X?.headers}})}list($,Y,Z={},X){if(x(Z))return this.list($,Y,{},Z);return this._client.getAPIList(`/threads/${$}/runs/${Y}/steps`,m$,{query:Z,...X,headers:{"OpenAI-Beta":"assistants=v1",...X?.headers}})}}class m$ extends g{}(function($){$.RunStepsPage=m$})(g$||(g$={}));class d$ extends U{constructor(){super(...arguments);this.steps=new g$(this._client)}create($,Y,Z){return this._client.post(`/threads/${$}/runs`,{body:Y,...Z,headers:{"OpenAI-Beta":"assistants=v1",...Z?.headers}})}retrieve($,Y,Z){return this._client.get(`/threads/${$}/runs/${Y}`,{...Z,headers:{"OpenAI-Beta":"assistants=v1",...Z?.headers}})}update($,Y,Z,X){return this._client.post(`/threads/${$}/runs/${Y}`,{body:Z,...X,headers:{"OpenAI-Beta":"assistants=v1",...X?.headers}})}list($,Y={},Z){if(x(Y))return this.list($,{},Y);return this._client.getAPIList(`/threads/${$}/runs`,u$,{query:Y,...Z,headers:{"OpenAI-Beta":"assistants=v1",...Z?.headers}})}cancel($,Y,Z){return this._client.post(`/threads/${$}/runs/${Y}/cancel`,{...Z,headers:{"OpenAI-Beta":"assistants=v1",...Z?.headers}})}submitToolOutputs($,Y,Z,X){return this._client.post(`/threads/${$}/runs/${Y}/submit_tool_outputs`,{body:Z,...X,headers:{"OpenAI-Beta":"assistants=v1",...X?.headers}})}}class u$ extends g{}(function($){$.RunsPage=u$,$.Steps=g$,$.RunStepsPage=m$})(d$||(d$={}));class c$ extends U{constructor(){super(...arguments);this.runs=new d$(this._client),this.messages=new h$(this._client)}create($={},Y){if(x($))return this.create({},$);return this._client.post("/threads",{body:$,...Y,headers:{"OpenAI-Beta":"assistants=v1",...Y?.headers}})}retrieve($,Y){return this._client.get(`/threads/${$}`,{...Y,headers:{"OpenAI-Beta":"assistants=v1",...Y?.headers}})}update($,Y,Z){return this._client.post(`/threads/${$}`,{body:Y,...Z,headers:{"OpenAI-Beta":"assistants=v1",...Z?.headers}})}del($,Y){return this._client.delete(`/threads/${$}`,{...Y,headers:{"OpenAI-Beta":"assistants=v1",...Y?.headers}})}createAndRun($,Y){return this._client.post("/threads/runs",{body:$,...Y,headers:{"OpenAI-Beta":"assistants=v1",...Y?.headers}})}}(function($){$.Runs=d$,$.RunsPage=u$,$.Messages=h$,$.ThreadMessagesPage=v$})(c$||(c$={}));class t0 extends U{constructor(){super(...arguments);this.chat=new y$(this._client),this.assistants=new I$(this._client),this.threads=new c$(this._client)}}(function($){$.Chat=y$,$.Assistants=I$,$.AssistantsPage=f$,$.Threads=c$})(t0||(t0={}));class e0 extends U{create($,Y){return this._client.post("/completions",{body:$,...Y,stream:$.stream??!1})}}(function($){})(e0||(e0={}));class $$ extends U{create($,Y){return this._client.post("/embeddings",{body:$,...Y})}}(function($){})($$||($$={}));class Y$ extends U{create($,Y){return this._client.post("/edits",{body:$,...Y})}}(function($){})(Y$||(Y$={}));class Z$ extends U{create($,Y){return this._client.post("/files",N0({body:$,...Y}))}retrieve($,Y){return this._client.get(`/files/${$}`,Y)}list($={},Y){if(x($))return this.list({},$);return this._client.getAPIList("/files",X$,{query:$,...Y})}del($,Y){return this._client.delete(`/files/${$}`,Y)}content($,Y){return this._client.get(`/files/${$}/content`,{...Y,__binaryResponse:!0})}retrieveContent($,Y){return this._client.get(`/files/${$}/content`,{...Y,headers:{Accept:"application/json",...Y?.headers}})}async waitForProcessing($,{pollInterval:Y=5000,maxWait:Z=1800000}={}){const X=new Set(["processed","error","deleted"]),Q=Date.now();let W=await this.retrieve($);while(!W.status||!X.has(W.status))if(await H1(Y),W=await this.retrieve($),Date.now()-Q>Z)throw new l0({message:`Giving up on waiting for file ${$} to finish processing after ${Z} milliseconds.`});return W}}class X$ extends D0{}(function($){$.FileObjectsPage=X$})(Z$||(Z$={}));class Q$ extends U{create($,Y){return this._client.post("/fine-tunes",{body:$,...Y})}retrieve($,Y){return this._client.get(`/fine-tunes/${$}`,Y)}list($){return this._client.getAPIList("/fine-tunes",W$,$)}cancel($,Y){return this._client.post(`/fine-tunes/${$}/cancel`,Y)}listEvents($,Y,Z){return this._client.get(`/fine-tunes/${$}/events`,{query:Y,timeout:86400000,...Z,stream:Y?.stream??!1})}}class W$ extends D0{}(function($){$.FineTunesPage=W$})(Q$||(Q$={}));class p$ extends U{create($,Y){return this._client.post("/fine_tuning/jobs",{body:$,...Y})}retrieve($,Y){return this._client.get(`/fine_tuning/jobs/${$}`,Y)}list($={},Y){if(x($))return this.list({},$);return this._client.getAPIList("/fine_tuning/jobs",l$,{query:$,...Y})}cancel($,Y){return this._client.post(`/fine_tuning/jobs/${$}/cancel`,Y)}listEvents($,Y={},Z){if(x(Y))return this.listEvents($,{},Y);return this._client.getAPIList(`/fine_tuning/jobs/${$}/events`,i$,{query:Y,...Z})}}class l$ extends g{}class i$ extends g{}(function($){$.FineTuningJobsPage=l$,$.FineTuningJobEventsPage=i$})(p$||(p$={}));class J$ extends U{constructor(){super(...arguments);this.jobs=new p$(this._client)}}(function($){$.Jobs=p$,$.FineTuningJobsPage=l$,$.FineTuningJobEventsPage=i$})(J$||(J$={}));class K$ extends U{createVariation($,Y){return this._client.post("/images/variations",N0({body:$,...Y}))}edit($,Y){return this._client.post("/images/edits",N0({body:$,...Y}))}generate($,Y){return this._client.post("/images/generations",{body:$,...Y})}}(function($){})(K$||(K$={}));class z$ extends U{retrieve($,Y){return this._client.get(`/models/${$}`,Y)}list($){return this._client.getAPIList("/models",V$,$)}del($,Y){return this._client.delete(`/models/${$}`,Y)}}class V$ extends D0{}(function($){$.ModelsPage=V$})(z$||(z$={}));class G$ extends U{create($,Y){return this._client.post("/moderations",{body:$,...Y})}}(function($){})(G$||(G$={}));var FQ;class b extends F1{constructor({apiKey:$=B1("OPENAI_API_KEY"),organization:Y=B1("OPENAI_ORG_ID")??null,...Z}={}){if($===void 0)throw new D("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const X={apiKey:$,organization:Y,...Z,baseURL:Z.baseURL??"https://api.openai.com/v1"};if(!X.dangerouslyAllowBrowser&&XQ())throw new D("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n");super({baseURL:X.baseURL,timeout:X.timeout??600000,httpAgent:X.httpAgent,maxRetries:X.maxRetries,fetch:X.fetch});this.completions=new e0(this),this.chat=new a0(this),this.edits=new Y$(this),this.embeddings=new $$(this),this.files=new Z$(this),this.images=new K$(this),this.audio=new s0(this),this.moderations=new G$(this),this.models=new z$(this),this.fineTuning=new J$(this),this.fineTunes=new Q$(this),this.beta=new t0(this),this._options=X,this.apiKey=$,this.organization=Y}defaultQuery(){return this._options.defaultQuery}defaultHeaders($){return{...super.defaultHeaders($),"OpenAI-Organization":this.organization,...this._options.defaultHeaders}}authHeaders($){return{Authorization:`Bearer ${this.apiKey}`}}}FQ=b;b.OpenAI=FQ;b.OpenAIError=D;b.APIError=y;b.APIConnectionError=p0;b.APIConnectionTimeoutError=l0;b.APIUserAbortError=e;b.NotFoundError=YZ;b.ConflictError=ZZ;b.RateLimitError=QZ;b.BadRequestError=tY;b.AuthenticationError=eY;b.InternalServerError=WZ;b.PermissionDeniedError=$Z;b.UnprocessableEntityError=XZ;(function($){$.toFile=N1,$.fileFromPath=nY,$.Page=D0,$.CursorPage=g,$.Completions=e0,$.Chat=a0,$.Edits=Y$,$.Embeddings=$$,$.Files=Z$,$.FileObjectsPage=X$,$.Images=K$,$.Audio=s0,$.Moderations=G$,$.Models=z$,$.ModelsPage=V$,$.FineTuning=J$,$.FineTunes=Q$,$.FineTunesPage=W$,$.Beta=t0})(b||(b={}));var HQ=b;var UY=function($){switch(BQ.call($)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return F0($,Error)}},I1=function($,Y){return BQ.call($)===`[object ${Y}]`};var L0=function($){return I1($,"String")},jZ=function($){return $===null||typeof $!=="object"&&typeof $!=="function"},o=function($){return I1($,"Object")},f1=function($){return typeof Event!=="undefined"&&F0($,Event)},C1=function($){return typeof Element!=="undefined"&&F0($,Element)},TY=function($){return I1($,"RegExp")},m=function($){return Boolean($&&$.then&&typeof $.then==="function")},_1=function($){return o($)&&("nativeEvent"in $)&&("preventDefault"in $)&&("stopPropagation"in $)},RY=function($){return typeof $==="number"&&$!==$},F0=function($,Y){try{return $ instanceof Y}catch(Z){return!1}},UZ=function($){return!!(typeof $==="object"&&$!==null&&($.__isVue||$._isVue))},BQ=Object.prototype.toString;var H0=function($,Y=0){if(typeof $!=="string"||Y===0)return $;return $.length<=Y?$:`${$.slice(0,Y)}...`},DY=function($,Y){let Z=$;const X=Z.length;if(X<=150)return Z;if(Y>X)Y=X;let Q=Math.max(Y-60,0);if(Q<5)Q=0;let W=Math.min(Q+140,X);if(W>X-5)W=X;if(W===X)Q=Math.max(W-140,0);if(Z=Z.slice(Q,W),Q>0)Z=`'{snip} ${Z}`;if(W<X)Z+=" {snip}";return Z};var jQ=function($,Y,Z=!1){if(!L0($))return!1;if(TY(Y))return Y.test($);if(L0(Y))return Z?$===Y:$.includes(Y);return!1},B0=function($,Y=[],Z=!1){return Y.some((X)=>jQ($,X,Z))};var x1=function($,Y,Z=250,X,Q,W,J){if(!W.exception||!W.exception.values||!J||!F0(J.originalException,Error))return;const K=W.exception.values.length>0?W.exception.values[W.exception.values.length-1]:void 0;if(K)W.exception.values=H9(y1($,Y,Q,J.originalException,X,W.exception.values,K,0),Z)},y1=function($,Y,Z,X,Q,W,J,K){if(W.length>=Z+1)return W;let z=[...W];if(F0(X[Q],Error)){UQ(J,K);const w=$(Y,X[Q]),G=z.length;TQ(w,Q,G,K),z=y1($,Y,Z,X[Q],Q,[w,...z],w,G)}if(Array.isArray(X.errors))X.errors.forEach((w,G)=>{if(F0(w,Error)){UQ(J,K);const V=$(Y,w),N=z.length;TQ(V,`errors[${G}]`,N,K),z=y1($,Y,Z,w,Q,[V,...z],V,N)}});return z},UQ=function($,Y){$.mechanism=$.mechanism||{type:"generic",handled:!0},$.mechanism={...$.mechanism,is_exception_group:!0,exception_id:Y}},TQ=function($,Y,Z,X){$.mechanism=$.mechanism||{type:"generic",handled:!0},$.mechanism={...$.mechanism,type:"chained",source:Y,exception_id:Z,parent_id:X}},H9=function($,Y){return $.map((Z)=>{if(Z.value)Z.value=H0(Z.value,Y);return Z})};var TZ=function($){return $&&$.Math==Math?$:void 0},PY=function(){return O},OY=function($,Y,Z){const X=Z||O,Q=X.__SENTRY__=X.__SENTRY__||{};return Q[$]||(Q[$]=Y())},O=typeof globalThis=="object"&&TZ(globalThis)||typeof window=="object"&&TZ(window)||typeof self=="object"&&TZ(self)||typeof global=="object"&&TZ(global)||function(){return this}()||{};var RQ=function($,Y={}){if(!$)return"<unknown>";try{let Z=$;const X=5,Q=[];let W=0,J=0;const K=" > ",z=K.length;let w;const G=Array.isArray(Y)?Y:Y.keyAttrs,V=!Array.isArray(Y)&&Y.maxStringLength||B9;while(Z&&W++<X){if(w=j9(Z,G),w==="html"||W>1&&J+Q.length*z+w.length>=V)break;Q.push(w),J+=w.length,Z=Z.parentNode}return Q.reverse().join(K)}catch(Z){return"<unknown>"}},j9=function($,Y){const Z=$,X=[];let Q,W,J,K,z;if(!Z||!Z.tagName)return"";X.push(Z.tagName.toLowerCase());const w=Y&&Y.length?Y.filter((V)=>Z.getAttribute(V)).map((V)=>[V,Z.getAttribute(V)]):null;if(w&&w.length)w.forEach((V)=>{X.push(`[${V[0]}="${V[1]}"]`)});else{if(Z.id)X.push(`#${Z.id}`);if(Q=Z.className,Q&&L0(Q)){W=Q.split(/\s+/);for(z=0;z<W.length;z++)X.push(`.${W[z]}`)}}const G=["aria-label","type","name","title","alt"];for(z=0;z<G.length;z++)if(J=G[z],K=Z.getAttribute(J),K)X.push(`[${J}="${K}"]`);return X.join("")};var s5=PY(),B9=80;var j0=typeof __SENTRY_DEBUG__==="undefined"||__SENTRY_DEBUG__;var c=function($){if(!("console"in O))return $();const Y=O.console,Z={},X=Object.keys(a$);X.forEach((Q)=>{const W=a$[Q];Z[Q]=Y[Q],Y[Q]=W});try{return $()}finally{X.forEach((Q)=>{Y[Q]=Z[Q]})}},T9=function(){let $=!1;const Y={enable:()=>{$=!0},disable:()=>{$=!1},isEnabled:()=>$};if(j0)AY.forEach((Z)=>{Y[Z]=(...X)=>{if($)c(()=>{O.console[Z](`${U9}[${Z}]:`,...X)})}});else AY.forEach((Z)=>{Y[Z]=()=>{return}});return Y},U9="Sentry Logger ",AY=["debug","info","warn","error","log","assert","trace"],a$={},M=T9();var D9=function($){return $==="http"||$==="https"},S0=function($,Y=!1){const{host:Z,path:X,pass:Q,port:W,projectId:J,protocol:K,publicKey:z}=$;return`${K}://${z}${Y&&Q?`:${Q}`:""}`+`@${Z}${W?`:${W}`:""}/${X?`${X}/`:X}${J}`},DQ=function($){const Y=R9.exec($);if(!Y){c(()=>{console.error(`Invalid Sentry Dsn: ${$}`)});return}const[Z,X,Q="",W,J="",K]=Y.slice(1);let z="",w=K;const G=w.split("/");if(G.length>1)z=G.slice(0,-1).join("/"),w=G.pop();if(w){const V=w.match(/^\d+/);if(V)w=V[0]}return PQ({host:W,pass:Q,path:z,projectId:w,port:J,protocol:Z,publicKey:X})},PQ=function($){return{protocol:$.protocol,publicKey:$.publicKey||"",pass:$.pass||"",host:$.host,port:$.port||"",path:$.path||"",projectId:$.projectId}},P9=function($){if(!j0)return!0;const{port:Y,projectId:Z,protocol:X}=$;if(["protocol","publicKey","host","projectId"].find((J)=>{if(!$[J])return M.error(`Invalid Sentry Dsn: ${J} missing`),!0;return!1}))return!1;if(!Z.match(/^\d+$/))return M.error(`Invalid Sentry Dsn: Invalid projectId ${Z}`),!1;if(!D9(X))return M.error(`Invalid Sentry Dsn: Invalid protocol ${X}`),!1;if(Y&&isNaN(parseInt(Y,10)))return M.error(`Invalid Sentry Dsn: Invalid port ${Y}`),!1;return!0},RZ=function($){const Y=typeof $==="string"?DQ($):PQ($);if(!Y||!P9(Y))return;return Y},R9=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;class p extends Error{constructor($,Y="warn"){super($);this.message=$,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=Y}}var C=function($,Y,Z){if(!(Y in $))return;const X=$[Y],Q=Z(X);if(typeof Q==="function")qQ(Q,X);$[Y]=Q},s$=function($,Y,Z){try{Object.defineProperty($,Y,{value:Z,writable:!0,configurable:!0})}catch(X){j0&&M.log(`Failed to add non-enumerable property "${Y}" to object`,$)}},qQ=function($,Y){try{const Z=Y.prototype||{};$.prototype=Y.prototype=Z,s$($,"__sentry_original__",Y)}catch(Z){}},h1=function($){return $.__sentry_original__},v1=function($){return Object.keys($).map((Y)=>`${encodeURIComponent(Y)}=${encodeURIComponent($[Y])}`).join("&")},DZ=function($){if(UY($))return{message:$.message,name:$.name,stack:$.stack,...AQ($)};else if(f1($)){const Y={type:$.type,target:OQ($.target),currentTarget:OQ($.currentTarget),...AQ($)};if(typeof CustomEvent!=="undefined"&&F0($,CustomEvent))Y.detail=$.detail;return Y}else return $},OQ=function($){try{return C1($)?RQ($):Object.prototype.toString.call($)}catch(Y){return"<unknown>"}},AQ=function($){if(typeof $==="object"&&$!==null){const Y={};for(let Z in $)if(Object.prototype.hasOwnProperty.call($,Z))Y[Z]=$[Z];return Y}else return{}},g1=function($,Y=40){const Z=Object.keys(DZ($));if(Z.sort(),!Z.length)return"[object has no keys]";if(Z[0].length>=Y)return H0(Z[0],Y);for(let X=Z.length;X>0;X--){const Q=Z.slice(0,X).join(", ");if(Q.length>Y)continue;if(X===Z.length)return Q;return H0(Q,Y)}return""},_=function($){return b1($,new Map)},b1=function($,Y){if(o($)){const Z=Y.get($);if(Z!==void 0)return Z;const X={};Y.set($,X);for(let Q of Object.keys($))if(typeof $[Q]!=="undefined")X[Q]=b1($[Q],Y);return X}if(Array.isArray($)){const Z=Y.get($);if(Z!==void 0)return Z;const X=[];return Y.set($,X),$.forEach((Q)=>{X.push(b1(Q,Y))}),X}return $};var O9=function($,Y=!1){return!(Y||$&&!$.startsWith("/")&&!$.includes(":\\")&&!$.startsWith(".")&&!$.match(/^[a-zA-Z]([a-zA-Z0-9.\-+])*:\/\//))&&$!==void 0&&!$.includes("node_modules/")},EQ=function($){const Y=/^\s*[-]{4,}$/,Z=/at (?:async )?(?:(.+?)\s+\()?(?:(.+):(\d+):(\d+)?|([^)]+))\)?/;return(X)=>{const Q=X.match(Z);if(Q){let W,J,K,z,w;if(Q[1]){K=Q[1];let N=K.lastIndexOf(".");if(K[N-1]===".")N--;if(N>0){W=K.slice(0,N),J=K.slice(N+1);const F=W.indexOf(".Module");if(F>0)K=K.slice(F+1),W=W.slice(0,F)}z=void 0}if(J)z=W,w=J;if(J==="<anonymous>")w=void 0,K=void 0;if(K===void 0)w=w||"<anonymous>",K=z?`${z}.${w}`:w;let G=Q[2]&&Q[2].startsWith("file://")?Q[2].slice(7):Q[2];const V=Q[5]==="native";if(!G&&Q[5]&&!V)G=Q[5];return{filename:G,module:$?$(G):void 0,function:K,lineno:parseInt(Q[3],10)||void 0,colno:parseInt(Q[4],10)||void 0,in_app:O9(G,V)}}if(X.match(Y))return{filename:X};return}};var PZ=function(...$){const Y=$.sort((Z,X)=>Z[0]-X[0]).map((Z)=>Z[1]);return(Z,X=0)=>{const Q=[],W=Z.split("\n");for(let J=X;J<W.length;J++){const K=W[J];if(K.length>1024)continue;const z=kQ.test(K)?K.replace(kQ,"$1"):K;if(z.match(/\S*Error: /))continue;for(let w of Y){const G=w(z);if(G){Q.push(G);break}}if(Q.length>=IQ)break}return fQ(Q)}},d1=function($){if(Array.isArray($))return PZ(...$);return $},fQ=function($){if(!$.length)return[];const Y=Array.from($);if(/sentryWrapped/.test(Y[Y.length-1].function||""))Y.pop();if(Y.reverse(),SQ.test(Y[Y.length-1].function||"")){if(Y.pop(),SQ.test(Y[Y.length-1].function||""))Y.pop()}return Y.slice(0,IQ).map((Z)=>({...Z,filename:Z.filename||Y[Y.length-1].filename,function:Z.function||"?"}))},qY=function($){try{if(!$||typeof $!=="function")return m1;return $.name||m1}catch(Y){return m1}},u1=function($){return[90,EQ($)]},IQ=50,kQ=/\(error: (.*)\)/,SQ=/captureMessage|captureException/,m1="<anonymous>";var r$=function($,Y){OZ[$]=OZ[$]||[],OZ[$].push(Y)};var o$=function($,Y){if(!CQ[$])Y(),CQ[$]=!0},n$=function($,Y){const Z=$&&OZ[$];if(!Z)return;for(let X of Z)try{X(Y)}catch(Q){j0&&M.error(`Error while triggering instrumentation handler.\nType: ${$}\nName: ${qY(X)}\nError:`,Q)}},OZ={},CQ={};var c1=function($){r$("console",$),o$("console",A9)},A9=function(){if(!("console"in O))return;AY.forEach(function($){if(!($ in O.console))return;C(O.console,$,function(Y){return a$[$]=Y,function(...Z){n$("console",{args:Z,level:$});const Q=a$[$];Q&&Q.apply(O.console,Z)}})})};var I=function(){const $=O,Y=$.crypto||$.msCrypto;let Z=()=>Math.random()*16;try{if(Y&&Y.randomUUID)return Y.randomUUID().replace(/-/g,"");if(Y&&Y.getRandomValues)Z=()=>Y.getRandomValues(new Uint8Array(1))[0]}catch(X){}return([1e7]+1000+4000+8000+100000000000).replace(/[018]/g,(X)=>(X^(Z()&15)>>X/4).toString(16))},_Q=function($){return $.exception&&$.exception.values?$.exception.values[0]:void 0},O0=function($){const{message:Y,event_id:Z}=$;if(Y)return Y;const X=_Q($);if(X){if(X.type&&X.value)return`${X.type}: ${X.value}`;return X.type||X.value||Z||"<unknown>"}return Z||"<unknown>"},p1=function($,Y,Z){const X=$.exception=$.exception||{},Q=X.values=X.values||[],W=Q[0]=Q[0]||{};if(!W.value)W.value=Y||"";if(!W.type)W.type=Z||"Error"},EY=function($,Y){const Z=_Q($);if(!Z)return;const X={type:"generic",handled:!0},Q=Z.mechanism;if(Z.mechanism={...X,...Q,...Y},Y&&("data"in Y)){const W={...Q&&Q.data,...Y.data};Z.mechanism.data=W}},l1=function($){const Y=$.match(q9)||[],Z=parseInt(Y[1],10),X=parseInt(Y[2],10),Q=parseInt(Y[3],10);return{buildmetadata:Y[5],major:isNaN(Z)?void 0:Z,minor:isNaN(X)?void 0:X,patch:isNaN(Q)?void 0:Q,prerelease:Y[4]}},i1=function($,Y,Z=5){if(Y.lineno===void 0)return;const X=$.length,Q=Math.max(Math.min(X-1,Y.lineno-1),0);Y.pre_context=$.slice(Math.max(0,Q-Z),Q).map((W)=>DY(W,0)),Y.context_line=DY($[Math.min(X-1,Q)],Y.colno||0),Y.post_context=$.slice(Math.min(Q+1,X),Q+1+Z).map((W)=>DY(W,0))},AZ=function($){if($&&$.__sentry_captured__)return!0;try{s$($,"__sentry_captured__",!0)}catch(Y){}return!1},I0=function($){return Array.isArray($)?$:[$]},q9=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;var a1=function($){r$("error",$),o$("error",E9)},E9=function(){qZ=O.onerror,O.onerror=function($,Y,Z,X,Q){if(n$("error",{column:X,error:Q,line:Z,msg:$,url:Y}),qZ&&!qZ.__SENTRY_LOADER__)return qZ.apply(this,arguments);return!1},O.onerror.__SENTRY_INSTRUMENTED__=!0},qZ=null;var s1=function($){r$("unhandledrejection",$),o$("unhandledrejection",k9)},k9=function(){EZ=O.onunhandledrejection,O.onunhandledrejection=function($){if(n$("unhandledrejection",$),EZ&&!EZ.__SENTRY_LOADER__)return EZ.apply(this,arguments);return!0},O.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0},EZ=null;var yQ=function(){return typeof __SENTRY_BROWSER_BUNDLE__!=="undefined"&&!!__SENTRY_BROWSER_BUNDLE__};var o1=function(){return!yQ()&&Object.prototype.toString.call(typeof process!=="undefined"?process:0)==="[object process]"},f0=function($,Y){return $.require(Y)},$0=function($){let Y;try{Y=f0(r1,$)}catch(Z){}try{const{cwd:Z}=f0(r1,"process");Y=f0(r1,`${Z()}/node_modules/${$}`)}catch(Z){}return Y};var xQ=function(){const $=typeof WeakSet==="function",Y=$?new WeakSet:[];function Z(Q){if($){if(Y.has(Q))return!0;return Y.add(Q),!1}for(let W=0;W<Y.length;W++)if(Y[W]===Q)return!0;return Y.push(Q),!1}function X(Q){if($)Y.delete(Q);else for(let W=0;W<Y.length;W++)if(Y[W]===Q){Y.splice(W,1);break}}return[Z,X]};var n=function($,Y=100,Z=Infinity){try{return kZ("",$,Y,Z)}catch(X){return{ERROR:`**non-serializable** (${X})`}}},SZ=function($,Y=3,Z=102400){const X=n($,Y);if(C9(X)>Z)return SZ($,Y-1,Z);return X},kZ=function($,Y,Z=Infinity,X=Infinity,Q=xQ()){const[W,J]=Q;if(Y==null||["number","boolean","string"].includes(typeof Y)&&!RY(Y))return Y;const K=S9($,Y);if(!K.startsWith("[object "))return K;if(Y.__sentry_skip_normalization__)return Y;const z=typeof Y.__sentry_override_normalization_depth__==="number"?Y.__sentry_override_normalization_depth__:Z;if(z===0)return K.replace("object ","");if(W(Y))return"[Circular ~]";const w=Y;if(w&&typeof w.toJSON==="function")try{const F=w.toJSON();return kZ("",F,z-1,X,Q)}catch(F){}const G=Array.isArray(Y)?[]:{};let V=0;const N=DZ(Y);for(let F in N){if(!Object.prototype.hasOwnProperty.call(N,F))continue;if(V>=X){G[F]="[MaxProperties ~]";break}const H=N[F];G[F]=kZ(F,H,z-1,X,Q),V++}return J(Y),G},S9=function($,Y){try{if($==="domain"&&Y&&typeof Y==="object"&&Y._events)return"[Domain]";if($==="domainEmitter")return"[DomainEmitter]";if(typeof global!=="undefined"&&Y===global)return"[Global]";if(typeof window!=="undefined"&&Y===window)return"[Window]";if(typeof document!=="undefined"&&Y===document)return"[Document]";if(UZ(Y))return"[VueViewModel]";if(_1(Y))return"[SyntheticEvent]";if(typeof Y==="number"&&Y!==Y)return"[NaN]";if(typeof Y==="function")return`[Function: ${qY(Y)}]`;if(typeof Y==="symbol")return`[${String(Y)}]`;if(typeof Y==="bigint")return`[BigInt: ${String(Y)}]`;const Z=I9(Y);if(/^HTML(\w*)Element$/.test(Z))return`[HTMLElement: ${Z}]`;return`[object ${Z}]`}catch(Z){return`**non-serializable** (${Z})`}},I9=function($){const Y=Object.getPrototypeOf($);return Y?Y.constructor.name:"null prototype"},f9=function($){return~-encodeURI($).split(/%..|./).length},C9=function($){return f9(JSON.stringify($))};var t=function($){return new d((Y)=>{Y($)})},w$=function($){return new d((Y,Z)=>{Z($)})},A0;(function($){$[$.PENDING=0]="PENDING";const Z=1;$[$.RESOLVED=Z]="RESOLVED";const X=2;$[$.REJECTED=X]="REJECTED"})(A0||(A0={}));class d{constructor($){d.prototype.__init.call(this),d.prototype.__init2.call(this),d.prototype.__init3.call(this),d.prototype.__init4.call(this),this._state=A0.PENDING,this._handlers=[];try{$(this._resolve,this._reject)}catch(Y){this._reject(Y)}}then($,Y){return new d((Z,X)=>{this._handlers.push([!1,(Q)=>{if(!$)Z(Q);else try{Z($(Q))}catch(W){X(W)}},(Q)=>{if(!Y)X(Q);else try{Z(Y(Q))}catch(W){X(W)}}]),this._executeHandlers()})}catch($){return this.then((Y)=>Y,$)}finally($){return new d((Y,Z)=>{let X,Q;return this.then((W)=>{if(Q=!1,X=W,$)$()},(W)=>{if(Q=!0,X=W,$)$()}).then(()=>{if(Q){Z(X);return}Y(X)})})}__init(){this._resolve=($)=>{this._setResult(A0.RESOLVED,$)}}__init2(){this._reject=($)=>{this._setResult(A0.REJECTED,$)}}__init3(){this._setResult=($,Y)=>{if(this._state!==A0.PENDING)return;if(m(Y)){Y.then(this._resolve,this._reject);return}this._state=$,this._value=Y,this._executeHandlers()}}__init4(){this._executeHandlers=()=>{if(this._state===A0.PENDING)return;const $=this._handlers.slice();this._handlers=[],$.forEach((Y)=>{if(Y[0])return;if(this._state===A0.RESOLVED)Y[1](this._value);if(this._state===A0.REJECTED)Y[2](this._value);Y[0]=!0})}}}var n1=function($){const Y=[];function Z(){return $===void 0||Y.length<$}function X(J){return Y.splice(Y.indexOf(J),1)[0]}function Q(J){if(!Z())return w$(new p("Not adding Promise because buffer limit was reached."));const K=J();if(Y.indexOf(K)===-1)Y.push(K);return K.then(()=>X(K)).then(null,()=>X(K).then(null,()=>{})),K}function W(J){return new d((K,z)=>{let w=Y.length;if(!w)return K(!0);const G=setTimeout(()=>{if(J&&J>0)K(!1)},J);Y.forEach((V)=>{t(V).then(()=>{if(!--w)clearTimeout(G),K(!0)},z)})})}return{$:Y,add:Q,drain:W}};var bQ=function($){const Y={};let Z=0;while(Z<$.length){const X=$.indexOf("=",Z);if(X===-1)break;let Q=$.indexOf(";",Z);if(Q===-1)Q=$.length;else if(Q<X){Z=$.lastIndexOf(";",X-1)+1;continue}const W=$.slice(Z,X).trim();if(Y[W]===void 0){let J=$.slice(X+1,Q).trim();if(J.charCodeAt(0)===34)J=J.slice(1,-1);try{Y[W]=J.indexOf("%")!==-1?decodeURIComponent(J):J}catch(K){Y[W]=J}}Z=Q+1}return Y};var kY=function($){if(!$)return{};const Y=$.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!Y)return{};const Z=Y[6]||"",X=Y[8]||"";return{host:Y[4],path:Y[5],protocol:Y[2],search:Z,hash:X,relative:Y[5]+Z+X}},N$=function($){return $.split(/[\?#]/,1)[0]},t$=function($){return $.split(/\\?\//).filter((Y)=>Y.length>0&&Y!==",").length},SY=function($){const{protocol:Y,host:Z,path:X}=$,Q=Z&&Z.replace(/^.*@/,"[filtered]:[filtered]@").replace(/(:80)$/,"").replace(/(:443)$/,"")||"";return`${Y?`${Y}://`:""}${Q}${X}`};var M$=function($,Y={}){const Z=$.method&&$.method.toUpperCase();let X="",Q="url";if(Y.customRoute||$.route)X=Y.customRoute||`${$.baseUrl||""}${$.route&&$.route.path}`,Q="route";else if($.originalUrl||$.url)X=N$($.originalUrl||$.url||"");let W="";if(Y.method&&Z)W+=Z;if(Y.method&&Y.path)W+=" ";if(Y.path&&X)W+=X;return[W,Q]},x9=function($,Y){switch(Y){case"path":return M$($,{path:!0})[0];case"handler":return $.route&&$.route.stack&&$.route.stack[0]&&$.route.stack[0].name||"<anonymous>";case"methodPath":default:{const Z=$._reconstructedRoute?$._reconstructedRoute:void 0;return M$($,{path:!0,method:!0,customRoute:Z})[0]}}},b9=function($,Y){const Z={};return(Array.isArray(Y)?Y:hQ).forEach((Q)=>{if($&&(Q in $))Z[Q]=$[Q]}),Z},t1=function($,Y){const{include:Z=y9,deps:X}=Y||{},Q={},W=$.headers||{},J=$.method,K=$.hostname||$.host||W.host||"<no host>",z=$.protocol==="https"||$.socket&&$.socket.encrypted?"https":"http",w=$.originalUrl||$.url||"",G=w.startsWith(z)?w:`${z}://${K}${w}`;return Z.forEach((V)=>{switch(V){case"headers":{if(Q.headers=W,!Z.includes("cookies"))delete Q.headers.cookie;break}case"method":{Q.method=J;break}case"url":{Q.url=G;break}case"cookies":{Q.cookies=$.cookies||W.cookie&&bQ(W.cookie)||{};break}case"query_string":{Q.query_string=h9($,X);break}case"data":{if(J==="GET"||J==="HEAD")break;if($.body!==void 0)Q.data=L0($.body)?$.body:JSON.stringify(n($.body));break}default:if({}.hasOwnProperty.call($,V))Q[V]=$[V]}}),Q},e1=function($,Y,Z){const X={..._9,...Z&&Z.include};if(X.request){const Q=Array.isArray(X.request)?t1(Y,{include:X.request,deps:Z&&Z.deps}):t1(Y,{deps:Z&&Z.deps});$.request={...$.request,...Q}}if(X.user){const Q=Y.user&&o(Y.user)?b9(Y.user,X.user):{};if(Object.keys(Q).length)$.user={...$.user,...Q}}if(X.ip){const Q=Y.ip||Y.socket&&Y.socket.remoteAddress;if(Q)$.user={...$.user,ip_address:Q}}if(X.transaction&&!$.transaction)$.transaction=x9(Y,X.transaction);return $},h9=function($,Y){let Z=$.originalUrl||$.url||"";if(!Z)return;if(Z.startsWith("/"))Z=`http://dogs.are.great${Z}`;try{return $.query||typeof URL!==void 0&&new URL(Z).search.slice(1)||Y&&Y.url&&Y.url.parse(Z).query||void 0}catch(X){return}};var _9={ip:!1,request:!0,transaction:!0,user:!0},y9=["cookies","data","headers","method","query_string","url"],hQ=["id","username","email"];var $X=function($){return $==="warn"?"warning":vQ.includes($)?$:"log"},vQ=["fatal","error","warning","log","info","debug"];var v9=function(){const{performance:$}=mQ;if(!$||!$.now)return;const Y=Date.now()-$.now();return{now:()=>$.now(),timeOrigin:Y}},g9=function(){try{return f0(d9,"perf_hooks").performance}catch($){return}},mQ=PY(),ZX={nowSeconds:()=>Date.now()/1000},YX=o1()?g9():v9(),gQ=YX===void 0?ZX:{nowSeconds:()=>(YX.timeOrigin+YX.now())/1000},L$=ZX.nowSeconds.bind(ZX),F$=gQ.nowSeconds.bind(gQ);var IY,m9=(()=>{const{performance:$}=mQ;if(!$||!$.now){IY="none";return}const Y=3600000,Z=$.now(),X=Date.now(),Q=$.timeOrigin?Math.abs($.timeOrigin+Z-X):Y,W=Q<Y,J=$.timing&&$.timing.navigationStart,z=typeof J==="number"?Math.abs(J+Z-X):Y,w=z<Y;if(W||w)if(Q<=z)return IY="timeOrigin",$.timeOrigin;else return IY="navigationStart",J;return IY="dateNow",X})();var QX=function($){if(!L0($)&&!Array.isArray($))return;let Y={};if(Array.isArray($))Y=$.reduce((X,Q)=>{const W=dQ(Q);return{...X,...W}},{});else{if(!$)return;Y=dQ($)}const Z=Object.entries(Y).reduce((X,[Q,W])=>{if(Q.match(uQ)){const J=Q.slice(XX.length);X[J]=W}return X},{});if(Object.keys(Z).length>0)return Z;else return},e$=function($){if(!$)return;const Y=Object.entries($).reduce((Z,[X,Q])=>{if(Q)Z[`${XX}${X}`]=Q;return Z},{});return u9(Y)},dQ=function($){return $.split(",").map((Y)=>Y.split("=").map((Z)=>decodeURIComponent(Z.trim()))).reduce((Y,[Z,X])=>{return Y[Z]=X,Y},{})},u9=function($){if(Object.keys($).length===0)return;return Object.entries($).reduce((Y,[Z,X],Q)=>{const W=`${encodeURIComponent(Z)}=${encodeURIComponent(X)}`,J=Q===0?W:`${Y},${W}`;if(J.length>cQ)return j0&&M.warn(`Not adding key: ${Z} with val: ${X} to baggage header due to exceeding baggage size limits.`),Y;else return J},"")};var XX="sentry-",uQ=/^sentry-/,cQ=8192;var lQ=function($){if(!$)return;const Y=$.match(pQ);if(!Y)return;let Z;if(Y[3]==="1")Z=!0;else if(Y[3]==="0")Z=!1;return{traceId:Y[1],parentSampled:Z,parentSpanId:Y[2]}},fY=function($,Y){const Z=lQ($),X=QX(Y),{traceId:Q,parentSpanId:W,parentSampled:J}=Z||{},K={traceId:Q||I(),spanId:I().substring(16),sampled:J};if(W)K.parentSpanId=W;if(X)K.dsc=X;return{traceparentData:Z,dynamicSamplingContext:X,propagationContext:K}},H$=function($=I(),Y=I().substring(16),Z){let X="";if(Z!==void 0)X=Z?"-1":"-0";return`${$}-${Y}${X}`},pQ=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");var C0=function($,Y=[]){return[$,Y]},JX=function($,Y){const[Z,X]=$;return[Z,[...X,Y]]},IZ=function($,Y){const Z=$[1];for(let X of Z){const Q=X[0].type;if(Y(X,Q))return!0}return!1};var WX=function($,Y){return(Y||new TextEncoder).encode($)},CY=function($,Y){const[Z,X]=$;let Q=JSON.stringify(Z);function W(J){if(typeof Q==="string")Q=typeof J==="string"?Q+J:[WX(Q,Y),J];else Q.push(typeof J==="string"?WX(J,Y):J)}for(let J of X){const[K,z]=J;if(W(`\n${JSON.stringify(K)}\n`),typeof z==="string"||z instanceof Uint8Array)W(z);else{let w;try{w=JSON.stringify(z)}catch(G){w=JSON.stringify(n(z))}W(w)}}return typeof Q==="string"?Q:c9(Q)},c9=function($){const Y=$.reduce((Q,W)=>Q+W.length,0),Z=new Uint8Array(Y);let X=0;for(let Q of $)Z.set(Q,X),X+=Q.length;return Z};var KX=function($,Y){const Z=typeof $.data==="string"?WX($.data,Y):$.data;return[_({type:"attachment",length:Z.length,filename:$.filename,content_type:$.contentType,attachment_type:$.attachmentType}),Z]},fZ=function($){return p9[$]},CZ=function($){if(!$||!$.sdk)return;const{name:Y,version:Z}=$.sdk;return{name:Y,version:Z}},zX=function($,Y,Z,X){const Q=$.sdkProcessingMetadata&&$.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:$.event_id,sent_at:(new Date()).toISOString(),...Y&&{sdk:Y},...!!Z&&X&&{dsn:S0(X)},...Q&&{trace:_({...Q})}}},p9={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",statsd:"unknown"};var iQ=function($,Y=Date.now()){const Z=parseInt(`${$}`,10);if(!isNaN(Z))return Z*1000;const X=Date.parse(`${$}`);if(!isNaN(X))return X-Y;return 60000},aQ=function($,Y){return $[Y]||$.all||0},VX=function($,Y,Z=Date.now()){return aQ($,Y)>Z},GX=function($,{statusCode:Y,headers:Z},X=Date.now()){const Q={...$},W=Z&&Z["x-sentry-rate-limits"],J=Z&&Z["retry-after"];if(W)for(let K of W.trim().split(",")){const[z,w]=K.split(":",2),G=parseInt(z,10),V=(!isNaN(G)?G:60)*1000;if(!w)Q.all=X+V;else for(let N of w.split(";"))Q[N]=X+V}else if(J)Q.all=X+iQ(J,X);else if(Y===429)Q.all=X+60000;return Q};var wX=function($,Y){return $(Y.stack||"",1)},_Z=function($,Y){const Z={type:Y.name||Y.constructor.name,value:Y.message},X=wX($,Y);if(X.length)Z.stacktrace={frames:X};return Z},l9=function($){if(("name"in $)&&typeof $.name==="string"){let Y=`'${$.name}' captured as exception`;if(("message"in $)&&typeof $.message==="string")Y+=` with message '${$.message}'`;return Y}else if(("message"in $)&&typeof $.message==="string")return $.message;else return`Object captured as exception with keys: ${g1($)}`},NX=function($,Y,Z,X){let Q=Z;const J=X&&X.data&&X.data.mechanism||{handled:!0,type:"generic"};if(!UY(Z)){if(o(Z)){const z=$(),w=z.getClient(),G=w&&w.getOptions().normalizeDepth;z.configureScope((N)=>{N.setExtra("__serialized__",SZ(Z,G))});const V=l9(Z);Q=X&&X.syntheticException||new Error(V),Q.message=V}else Q=X&&X.syntheticException||new Error(Z),Q.message=Z;J.synthetic=!0}const K={exception:{values:[_Z(Y,Q)]}};return p1(K,void 0,void 0),EY(K,J),{...K,event_id:X&&X.event_id}},MX=function($,Y,Z="info",X,Q){const W={event_id:X&&X.event_id,level:Z,message:Y};if(Q&&X&&X.syntheticException){const J=wX($,X.syntheticException);if(J.length)W.exception={values:[{value:Y,stacktrace:{frames:J}}]}}return W};class Y0{constructor($){this._maxSize=$,this._cache=new Map}get size(){return this._cache.size}get($){const Y=this._cache.get($);if(Y===void 0)return;return this._cache.delete($),this._cache.set($,Y),Y}set($,Y){if(this._cache.size>=this._maxSize)this._cache.delete(this._cache.keys().next().value);this._cache.set($,Y)}remove($){const Y=this._cache.get($);if(Y)this._cache.delete($);return Y}clear(){this._cache.clear()}keys(){return Array.from(this._cache.keys())}values(){const $=[];return this._cache.forEach((Y)=>$.push(Y)),$}}var _Y=function($,Y){return $!=null?$:Y()};var L=function($){let Y=void 0,Z=$[0],X=1;while(X<$.length){const Q=$[X],W=$[X+1];if(X+=2,(Q==="optionalAccess"||Q==="optionalCall")&&Z==null)return;if(Q==="access"||Q==="optionalAccess")Y=Z,Z=W(Z);else if(Q==="call"||Q==="optionalCall")Z=W((...J)=>Z.call(Y,...J)),Y=void 0}return Z};var j=typeof __SENTRY_DEBUG__==="undefined"||__SENTRY_DEBUG__;var $Y="production";var yY=function(){return OY("globalEventProcessors",()=>[])},LX=function($){yY().push($)},YY=function($,Y,Z,X=0){return new d((Q,W)=>{const J=$[X];if(Y===null||typeof J!=="function")Q(Y);else{const K=J({...Y},Z);if(j&&J.id&&K===null&&M.log(`Event processor "${J.id}" dropped event`),m(K))K.then((z)=>YY($,z,Z,X+1).then(Q)).then(null,W);else YY($,K,Z,X+1).then(Q).then(null,W)}})};var sQ=function($){const Y=F$(),Z={sid:I(),init:!0,timestamp:Y,started:Y,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>i9(Z)};if($)q0(Z,$);return Z},q0=function($,Y={}){if(Y.user){if(!$.ipAddress&&Y.user.ip_address)$.ipAddress=Y.user.ip_address;if(!$.did&&!Y.did)$.did=Y.user.id||Y.user.email||Y.user.username}if($.timestamp=Y.timestamp||F$(),Y.abnormal_mechanism)$.abnormal_mechanism=Y.abnormal_mechanism;if(Y.ignoreDuration)$.ignoreDuration=Y.ignoreDuration;if(Y.sid)$.sid=Y.sid.length===32?Y.sid:I();if(Y.init!==void 0)$.init=Y.init;if(!$.did&&Y.did)$.did=`${Y.did}`;if(typeof Y.started==="number")$.started=Y.started;if($.ignoreDuration)$.duration=void 0;else if(typeof Y.duration==="number")$.duration=Y.duration;else{const Z=$.timestamp-$.started;$.duration=Z>=0?Z:0}if(Y.release)$.release=Y.release;if(Y.environment)$.environment=Y.environment;if(!$.ipAddress&&Y.ipAddress)$.ipAddress=Y.ipAddress;if(!$.userAgent&&Y.userAgent)$.userAgent=Y.userAgent;if(typeof Y.errors==="number")$.errors=Y.errors;if(Y.status)$.status=Y.status},rQ=function($,Y){let Z={};if(Y)Z={status:Y};else if($.status==="ok")Z={status:"exited"};q0($,Z)},i9=function($){return _({sid:`${$.sid}`,init:$.init,started:new Date($.started*1000).toISOString(),timestamp:new Date($.timestamp*1000).toISOString(),status:$.status,errors:$.errors,did:typeof $.did==="number"||typeof $.did==="string"?`${$.did}`:void 0,duration:$.duration,abnormal_mechanism:$.abnormal_mechanism,attrs:{release:$.release,environment:$.environment,ip_address:$.ipAddress,user_agent:$.userAgent}})};var oQ=function(){return{traceId:I(),spanId:I().substring(16)}},a9=100;class Z0{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=oQ()}static clone($){const Y=new Z0;if($)Y._breadcrumbs=[...$._breadcrumbs],Y._tags={...$._tags},Y._extra={...$._extra},Y._contexts={...$._contexts},Y._user=$._user,Y._level=$._level,Y._span=$._span,Y._session=$._session,Y._transactionName=$._transactionName,Y._fingerprint=$._fingerprint,Y._eventProcessors=[...$._eventProcessors],Y._requestSession=$._requestSession,Y._attachments=[...$._attachments],Y._sdkProcessingMetadata={...$._sdkProcessingMetadata},Y._propagationContext={...$._propagationContext};return Y}addScopeListener($){this._scopeListeners.push($)}addEventProcessor($){return this._eventProcessors.push($),this}setUser($){if(this._user=$||{},this._session)q0(this._session,{user:$});return this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession($){return this._requestSession=$,this}setTags($){return this._tags={...this._tags,...$},this._notifyScopeListeners(),this}setTag($,Y){return this._tags={...this._tags,[$]:Y},this._notifyScopeListeners(),this}setExtras($){return this._extra={...this._extra,...$},this._notifyScopeListeners(),this}setExtra($,Y){return this._extra={...this._extra,[$]:Y},this._notifyScopeListeners(),this}setFingerprint($){return this._fingerprint=$,this._notifyScopeListeners(),this}setLevel($){return this._level=$,this._notifyScopeListeners(),this}setTransactionName($){return this._transactionName=$,this._notifyScopeListeners(),this}setContext($,Y){if(Y===null)delete this._contexts[$];else this._contexts[$]=Y;return this._notifyScopeListeners(),this}setSpan($){return this._span=$,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const $=this.getSpan();return $&&$.transaction}setSession($){if(!$)delete this._session;else this._session=$;return this._notifyScopeListeners(),this}getSession(){return this._session}update($){if(!$)return this;if(typeof $==="function"){const Y=$(this);return Y instanceof Z0?Y:this}if($ instanceof Z0){if(this._tags={...this._tags,...$._tags},this._extra={...this._extra,...$._extra},this._contexts={...this._contexts,...$._contexts},$._user&&Object.keys($._user).length)this._user=$._user;if($._level)this._level=$._level;if($._fingerprint)this._fingerprint=$._fingerprint;if($._requestSession)this._requestSession=$._requestSession;if($._propagationContext)this._propagationContext=$._propagationContext}else if(o($)){if($=$,this._tags={...this._tags,...$.tags},this._extra={...this._extra,...$.extra},this._contexts={...this._contexts,...$.contexts},$.user)this._user=$.user;if($.level)this._level=$.level;if($.fingerprint)this._fingerprint=$.fingerprint;if($.requestSession)this._requestSession=$.requestSession;if($.propagationContext)this._propagationContext=$.propagationContext}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=oQ(),this}addBreadcrumb($,Y){const Z=typeof Y==="number"?Y:a9;if(Z<=0)return this;const X={timestamp:L$(),...$},Q=this._breadcrumbs;return Q.push(X),this._breadcrumbs=Q.length>Z?Q.slice(-Z):Q,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment($){return this._attachments.push($),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent($,Y={},Z){if(this._extra&&Object.keys(this._extra).length)$.extra={...this._extra,...$.extra};if(this._tags&&Object.keys(this._tags).length)$.tags={...this._tags,...$.tags};if(this._user&&Object.keys(this._user).length)$.user={...this._user,...$.user};if(this._contexts&&Object.keys(this._contexts).length)$.contexts={...this._contexts,...$.contexts};if(this._level)$.level=this._level;if(this._transactionName)$.transaction=this._transactionName;if(this._span){$.contexts={trace:this._span.getTraceContext(),...$.contexts};const W=this._span.transaction;if(W){$.sdkProcessingMetadata={dynamicSamplingContext:W.getDynamicSamplingContext(),...$.sdkProcessingMetadata};const J=W.name;if(J)$.tags={transaction:J,...$.tags}}}this._applyFingerprint($);const X=this._getBreadcrumbs(),Q=[...$.breadcrumbs||[],...X];return $.breadcrumbs=Q.length>0?Q:void 0,$.sdkProcessingMetadata={...$.sdkProcessingMetadata,...this._sdkProcessingMetadata,propagationContext:this._propagationContext},YY([...Z||[],...yY(),...this._eventProcessors],$,Y)}setSDKProcessingMetadata($){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...$},this}setPropagationContext($){return this._propagationContext=$,this}getPropagationContext(){return this._propagationContext}_getBreadcrumbs(){return this._breadcrumbs}_notifyScopeListeners(){if(!this._notifyingListeners)this._notifyingListeners=!0,this._scopeListeners.forEach(($)=>{$(this)}),this._notifyingListeners=!1}_applyFingerprint($){if($.fingerprint=$.fingerprint?I0($.fingerprint):[],this._fingerprint)$.fingerprint=$.fingerprint.concat(this._fingerprint);if($.fingerprint&&!$.fingerprint.length)delete $.fingerprint}}var K0=function(){return O.__SENTRY__=O.__SENTRY__||{extensions:{},hub:void 0},O},yZ=function($){const Y=K0(),Z=X0(Y);return QY(Y,$),Z},R=function(){const $=K0();if($.__SENTRY__&&$.__SENTRY__.acs){const Y=$.__SENTRY__.acs.getCurrentHub();if(Y)return Y}return nQ($)},nQ=function($=K0()){if(!tQ($)||X0($).isOlderThan(FX))QY($,new ZY);return X0($)},XY=function($,Y=nQ()){if(!tQ($)||X0($).isOlderThan(FX)){const Z=Y.getStackTop();QY($,new ZY(Z.client,Z0.clone(Z.scope)))}},xY=function($){const Y=K0();Y.__SENTRY__=Y.__SENTRY__||{},Y.__SENTRY__.acs=$},xZ=function($,Y={}){const Z=K0();if(Z.__SENTRY__&&Z.__SENTRY__.acs)return Z.__SENTRY__.acs.runWithAsyncContext($,Y);return $()},tQ=function($){return!!($&&$.__SENTRY__&&$.__SENTRY__.hub)},X0=function($){return OY("hub",()=>new ZY,$)},QY=function($,Y){if(!$)return!1;const Z=$.__SENTRY__=$.__SENTRY__||{};return Z.hub=Y,!0},FX=4,s9=100;class ZY{constructor($,Y=new Z0,Z=FX){if(this._version=Z,this._stack=[{scope:Y}],$)this.bindClient($)}isOlderThan($){return this._version<$}bindClient($){const Y=this.getStackTop();if(Y.client=$,$&&$.setupIntegrations)$.setupIntegrations()}pushScope(){const $=Z0.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:$}),$}popScope(){if(this.getStack().length<=1)return!1;return!!this.getStack().pop()}withScope($){const Y=this.pushScope();try{$(Y)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException($,Y){const Z=this._lastEventId=Y&&Y.event_id?Y.event_id:I(),X=new Error("Sentry syntheticException");return this._withClient((Q,W)=>{Q.captureException($,{originalException:$,syntheticException:X,...Y,event_id:Z},W)}),Z}captureMessage($,Y,Z){const X=this._lastEventId=Z&&Z.event_id?Z.event_id:I(),Q=new Error($);return this._withClient((W,J)=>{W.captureMessage($,Y,{originalException:$,syntheticException:Q,...Z,event_id:X},J)}),X}captureEvent($,Y){const Z=Y&&Y.event_id?Y.event_id:I();if(!$.type)this._lastEventId=Z;return this._withClient((X,Q)=>{X.captureEvent($,{...Y,event_id:Z},Q)}),Z}lastEventId(){return this._lastEventId}addBreadcrumb($,Y){const{scope:Z,client:X}=this.getStackTop();if(!X)return;const{beforeBreadcrumb:Q=null,maxBreadcrumbs:W=s9}=X.getOptions&&X.getOptions()||{};if(W<=0)return;const K={timestamp:L$(),...$},z=Q?c(()=>Q(K,Y)):K;if(z===null)return;if(X.emit)X.emit("beforeAddBreadcrumb",z,Y);Z.addBreadcrumb(z,W)}setUser($){this.getScope().setUser($)}setTags($){this.getScope().setTags($)}setExtras($){this.getScope().setExtras($)}setTag($,Y){this.getScope().setTag($,Y)}setExtra($,Y){this.getScope().setExtra($,Y)}setContext($,Y){this.getScope().setContext($,Y)}configureScope($){const{scope:Y,client:Z}=this.getStackTop();if(Z)$(Y)}run($){const Y=yZ(this);try{$(this)}finally{yZ(Y)}}getIntegration($){const Y=this.getClient();if(!Y)return null;try{return Y.getIntegration($)}catch(Z){return j&&M.warn(`Cannot retrieve integration ${$.id} from the current Hub`),null}}startTransaction($,Y){const Z=this._callExtensionMethod("startTransaction",$,Y);if(j&&!Z)if(!this.getClient())M.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'");else M.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`);return Z}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession($=!1){if($)return this.endSession();this._sendSessionUpdate()}endSession(){const Y=this.getStackTop().scope,Z=Y.getSession();if(Z)rQ(Z);this._sendSessionUpdate(),Y.setSession()}startSession($){const{scope:Y,client:Z}=this.getStackTop(),{release:X,environment:Q=$Y}=Z&&Z.getOptions()||{},{userAgent:W}=O.navigator||{},J=sQ({release:X,environment:Q,user:Y.getUser(),...W&&{userAgent:W},...$}),K=Y.getSession&&Y.getSession();if(K&&K.status==="ok")q0(K,{status:"exited"});return this.endSession(),Y.setSession(J),J}shouldSendDefaultPii(){const $=this.getClient(),Y=$&&$.getOptions();return Boolean(Y&&Y.sendDefaultPii)}_sendSessionUpdate(){const{scope:$,client:Y}=this.getStackTop(),Z=$.getSession();if(Z&&Y&&Y.captureSession)Y.captureSession(Z)}_withClient($){const{scope:Y,client:Z}=this.getStackTop();if(Z)$(Z,Y)}_callExtensionMethod($,...Y){const X=K0().__SENTRY__;if(X&&X.extensions&&typeof X.extensions[$]==="function")return X.extensions[$].apply(this,Y);j&&M.warn(`Extension method ${$} couldn't be found, doing nothing.`)}}var HX=function($){return($||R()).getScope().getTransaction()};var $W=function(){if(eQ)return;eQ=!0,a1(BX),s1(BX)},BX=function(){const $=HX();if($)j&&M.log("[Tracing] Transaction: internal_error -> Global error occured"),$.setStatus("internal_error")},eQ=!1;BX.tag="sentry_tracingErrorCallback";var YW=function($){if($<400&&$>=100)return"ok";if($>=400&&$<500)switch($){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if($>=500&&$<600)switch($){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"};class jX{constructor($=1000){this._maxlen=$,this.spans=[]}add($){if(this.spans.length>this._maxlen)$.spanRecorder=void 0;else this.spans.push($)}}class bZ{constructor($={}){if(this.traceId=$.traceId||I(),this.spanId=$.spanId||I().substring(16),this.startTimestamp=$.startTimestamp||F$(),this.tags=$.tags||{},this.data=$.data||{},this.instrumenter=$.instrumenter||"sentry",this.origin=$.origin||"manual",$.parentSpanId)this.parentSpanId=$.parentSpanId;if("sampled"in $)this.sampled=$.sampled;if($.op)this.op=$.op;if($.description)this.description=$.description;if($.name)this.description=$.name;if($.status)this.status=$.status;if($.endTimestamp)this.endTimestamp=$.endTimestamp}get name(){return this.description||""}set name($){this.setName($)}startChild($){const Y=new bZ({...$,parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId});if(Y.spanRecorder=this.spanRecorder,Y.spanRecorder)Y.spanRecorder.add(Y);if(Y.transaction=this.transaction,j&&Y.transaction){const Z=$&&$.op||"< unknown op >",X=Y.transaction.name||"< unknown name >",Q=Y.transaction.spanId,W=`[Tracing] Starting '${Z}' span on transaction '${X}' (${Q}).`;Y.transaction.metadata.spanMetadata[Y.spanId]={logMessage:W},M.log(W)}return Y}setTag($,Y){return this.tags={...this.tags,[$]:Y},this}setData($,Y){return this.data={...this.data,[$]:Y},this}setStatus($){return this.status=$,this}setHttpStatus($){this.setTag("http.status_code",String($)),this.setData("http.response.status_code",$);const Y=YW($);if(Y!=="unknown_error")this.setStatus(Y);return this}setName($){this.description=$}isSuccess(){return this.status==="ok"}finish($){if(j&&this.transaction&&this.transaction.spanId!==this.spanId){const{logMessage:Y}=this.transaction.metadata.spanMetadata[this.spanId];if(Y)M.log(Y.replace("Starting","Finishing"))}this.endTimestamp=typeof $==="number"?$:F$()}toTraceparent(){return H$(this.traceId,this.spanId,this.sampled)}toContext(){return _({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})}updateWithContext($){return this.data=$.data||{},this.description=$.description,this.endTimestamp=$.endTimestamp,this.op=$.op,this.parentSpanId=$.parentSpanId,this.sampled=$.sampled,this.spanId=$.spanId||this.spanId,this.startTimestamp=$.startTimestamp||this.startTimestamp,this.status=$.status,this.tags=$.tags||{},this.traceId=$.traceId||this.traceId,this}getTraceContext(){return _({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId,origin:this.origin})}toJSON(){return _({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId,origin:this.origin})}}var z0=function($,Y,Z){const X=Y.getOptions(),{publicKey:Q}=Y.getDsn()||{},{segment:W}=Z&&Z.getUser()||{},J=_({environment:X.environment||$Y,release:X.release,user_segment:W,public_key:Q,trace_id:$});return Y.emit&&Y.emit("createDsc",J),J};class WY extends bZ{constructor($,Y){super($);delete this.description,this._measurements={},this._contexts={},this._hub=Y||R(),this._name=$.name||"",this.metadata={source:"custom",...$.metadata,spanMetadata:{}},this._trimEnd=$.trimEnd,this.transaction=this;const Z=this.metadata.dynamicSamplingContext;if(Z)this._frozenDynamicSamplingContext={...Z}}get name(){return this._name}set name($){this.setName($)}setName($,Y="custom"){this._name=$,this.metadata.source=Y}initSpanRecorder($=1000){if(!this.spanRecorder)this.spanRecorder=new jX($);this.spanRecorder.add(this)}setContext($,Y){if(Y===null)delete this._contexts[$];else this._contexts[$]=Y}setMeasurement($,Y,Z=""){this._measurements[$]={value:Y,unit:Z}}setMetadata($){this.metadata={...this.metadata,...$}}finish($){const Y=this._finishTransaction($);if(!Y)return;return this._hub.captureEvent(Y)}toContext(){const $=super.toContext();return _({...$,name:this.name,trimEnd:this._trimEnd})}updateWithContext($){return super.updateWithContext($),this.name=$.name||"",this._trimEnd=$.trimEnd,this}getDynamicSamplingContext(){if(this._frozenDynamicSamplingContext)return this._frozenDynamicSamplingContext;const $=this._hub||R(),Y=$.getClient();if(!Y)return{};const Z=$.getScope(),X=z0(this.traceId,Y,Z),Q=this.metadata.sampleRate;if(Q!==void 0)X.sample_rate=`${Q}`;const W=this.metadata.source;if(W&&W!=="url")X.transaction=this.name;if(this.sampled!==void 0)X.sampled=String(this.sampled);return X}setHub($){this._hub=$}_finishTransaction($){if(this.endTimestamp!==void 0)return;if(!this.name)j&&M.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>";super.finish($);const Y=this._hub.getClient();if(Y&&Y.emit)Y.emit("finishTransaction",this);if(this.sampled!==!0){if(j&&M.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),Y)Y.recordDroppedEvent("sample_rate","transaction");return}const Z=this.spanRecorder?this.spanRecorder.spans.filter((J)=>J!==this&&J.endTimestamp):[];if(this._trimEnd&&Z.length>0)this.endTimestamp=Z.reduce((J,K)=>{if(J.endTimestamp&&K.endTimestamp)return J.endTimestamp>K.endTimestamp?J:K;return J}).endTimestamp;const X=this.metadata,Q={contexts:{...this._contexts,trace:this.getTraceContext()},spans:Z,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",sdkProcessingMetadata:{...X,dynamicSamplingContext:this.getDynamicSamplingContext()},...X.source&&{transaction_info:{source:X.source}}};if(Object.keys(this._measurements).length>0)j&&M.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),Q.measurements=this._measurements;return j&&M.log(`[Tracing] Finishing ${this.op} transaction: ${this.name}.`),Q}}var XW=function($,Y,Z,X,Q){const{normalizeDepth:W=3,normalizeMaxBreadth:J=1000}=$,K={...Y,event_id:Y.event_id||Z.event_id||I(),timestamp:Y.timestamp||L$()},z=Z.integrations||$.integrations.map((N)=>N.name);if(r9(K,$),t9(K,z),Y.type===void 0)o9(K,$.stackParser);let w=X;if(Z.captureContext)w=Z0.clone(w).update(Z.captureContext);if(Z.mechanism)EY(K,Z.mechanism);let G=t(K);const V=Q&&Q.getEventProcessors?Q.getEventProcessors():[];if(w){if(w.getAttachments){const N=[...Z.attachments||[],...w.getAttachments()];if(N.length)Z.attachments=N}G=w.applyToEvent(K,Z,V)}else G=YY([...V,...yY()],K,Z);return G.then((N)=>{if(N)n9(N);if(typeof W==="number"&&W>0)return e9(N,W,J);return N})},r9=function($,Y){const{environment:Z,release:X,dist:Q,maxValueLength:W=250}=Y;if(!("environment"in $))$.environment=("environment"in Y)?Z:$Y;if($.release===void 0&&X!==void 0)$.release=X;if($.dist===void 0&&Q!==void 0)$.dist=Q;if($.message)$.message=H0($.message,W);const J=$.exception&&$.exception.values&&$.exception.values[0];if(J&&J.value)J.value=H0(J.value,W);const K=$.request;if(K&&K.url)K.url=H0(K.url,W)},o9=function($,Y){const Z=O._sentryDebugIds;if(!Z)return;let X;const Q=ZW.get(Y);if(Q)X=Q;else X=new Map,ZW.set(Y,X);const W=Object.keys(Z).reduce((J,K)=>{let z;const w=X.get(K);if(w)z=w;else z=Y(K),X.set(K,z);for(let G=z.length-1;G>=0;G--){const V=z[G];if(V.filename){J[V.filename]=Z[K];break}}return J},{});try{$.exception.values.forEach((J)=>{J.stacktrace.frames.forEach((K)=>{if(K.filename)K.debug_id=W[K.filename]})})}catch(J){}},n9=function($){const Y={};try{$.exception.values.forEach((X)=>{X.stacktrace.frames.forEach((Q)=>{if(Q.debug_id){if(Q.abs_path)Y[Q.abs_path]=Q.debug_id;else if(Q.filename)Y[Q.filename]=Q.debug_id;delete Q.debug_id}})})}catch(X){}if(Object.keys(Y).length===0)return;$.debug_meta=$.debug_meta||{},$.debug_meta.images=$.debug_meta.images||[];const Z=$.debug_meta.images;Object.keys(Y).forEach((X)=>{Z.push({type:"sourcemap",code_file:X,debug_id:Y[X]})})},t9=function($,Y){if(Y.length>0)$.sdk=$.sdk||{},$.sdk.integrations=[...$.sdk.integrations||[],...Y]},e9=function($,Y,Z){if(!$)return null;const X={...$,...$.breadcrumbs&&{breadcrumbs:$.breadcrumbs.map((Q)=>({...Q,...Q.data&&{data:n(Q.data,Y,Z)}}))},...$.user&&{user:n($.user,Y,Z)},...$.contexts&&{contexts:n($.contexts,Y,Z)},...$.extra&&{extra:n($.extra,Y,Z)}};if($.contexts&&$.contexts.trace&&X.contexts){if(X.contexts.trace=$.contexts.trace,$.contexts.trace.data)X.contexts.trace.data=n($.contexts.trace.data,Y,Z)}if($.spans)X.spans=$.spans.map((Q)=>{if(Q.data)Q.data=n(Q.data,Y,Z);return Q});return X},QW=function($){if(!$)return;if($7($))return{captureContext:$};if(Z7($))return{captureContext:$};return $},$7=function($){return $ instanceof Z0||typeof $==="function"},Z7=function($){return Object.keys($).some((Y)=>Y7.includes(Y))},ZW=new WeakMap,Y7=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];var JY=function($,Y){return R().captureException($,QW(Y))};var _0=function(){return R().getClient()};var hZ=function($){if(typeof __SENTRY_TRACING__==="boolean"&&!__SENTRY_TRACING__)return!1;const Y=_0(),Z=$||Y&&Y.getOptions();return!!Z&&(Z.enableTracing||("tracesSampleRate"in Z)||("tracesSampler"in Z))};var WW=function($,Y,Z){if(!hZ(Y))return $.sampled=!1,$;if($.sampled!==void 0)return $.setMetadata({sampleRate:Number($.sampled)}),$;let X;if(typeof Y.tracesSampler==="function")X=Y.tracesSampler(Z),$.setMetadata({sampleRate:Number(X)});else if(Z.parentSampled!==void 0)X=Z.parentSampled;else if(typeof Y.tracesSampleRate!=="undefined")X=Y.tracesSampleRate,$.setMetadata({sampleRate:Number(X)});else X=1,$.setMetadata({sampleRate:X});if(!X7(X))return j&&M.warn("[Tracing] Discarding transaction because of invalid sample rate."),$.sampled=!1,$;if(!X)return j&&M.log(`[Tracing] Discarding transaction because ${typeof Y.tracesSampler==="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),$.sampled=!1,$;if($.sampled=Math.random()<X,!$.sampled)return j&&M.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(X)})`),$;return j&&M.log(`[Tracing] starting ${$.op} transaction - ${$.name}`),$},X7=function($){if(RY($)||!(typeof $==="number"||typeof $==="boolean"))return j&&M.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify($)} of type ${JSON.stringify(typeof $)}.`),!1;if($<0||$>1)return j&&M.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${$}.`),!1;return!0};var Q7=function(){const Y=this.getScope().getSpan();return Y?{"sentry-trace":Y.toTraceparent()}:{}},W7=function($,Y){const Z=this.getClient(),X=Z&&Z.getOptions()||{},Q=X.instrumenter||"sentry",W=$.instrumenter||"sentry";if(Q!==W)j&&M.error(`A transaction was started with instrumenter=\`${W}\`, but the SDK is configured with the \`${Q}\` instrumenter.
The transaction will not be sampled. Please use the ${Q} instrumentation to start transactions.`),$.sampled=!1;let J=new WY($,this);if(J=WW(J,X,{parentSampled:$.parentSampled,transactionContext:$,...Y}),J.sampled)J.initSpanRecorder(X._experiments&&X._experiments.maxSpans);if(Z&&Z.emit)Z.emit("startTransaction",J);return J};var JW=function(){const $=K0();if(!$.__SENTRY__)return;if($.__SENTRY__.extensions=$.__SENTRY__.extensions||{},!$.__SENTRY__.extensions.startTransaction)$.__SENTRY__.extensions.startTransaction=W7;if(!$.__SENTRY__.extensions.traceHeaders)$.__SENTRY__.extensions.traceHeaders=Q7;$W()};var vZ=function($,Y,Z=()=>{}){const X=zW($),Q=R(),W=Q.getScope(),J=W.getSpan(),K=KW(Q,J,X);W.setSpan(K);function z(){K&&K.finish(),Q.getScope().setSpan(J)}let w;try{w=Y(K)}catch(G){throw K&&K.setStatus("internal_error"),Z(G),z(),G}if(m(w))Promise.resolve(w).then(()=>{z()},(G)=>{K&&K.setStatus("internal_error"),Z(G),z()});else z();return w},gZ=function($,Y){const Z=zW($),X=R(),Q=X.getScope(),W=Q.getSpan(),J=KW(X,W,Z);Q.setSpan(J);function K(){J&&J.finish(),X.getScope().setSpan(W)}let z;try{z=Y(J)}catch(w){throw J&&J.setStatus("internal_error"),K(),w}if(m(z))Promise.resolve(z).then(()=>{K()},()=>{J&&J.setStatus("internal_error"),K()});else K();return z};var mZ=function({sentryTrace:$,baggage:Y},Z){const Q=R().getScope(),{traceparentData:W,dynamicSamplingContext:J,propagationContext:K}=fY($,Y);if(Q.setPropagationContext(K),j&&W)M.log(`[Tracing] Continuing trace ${W.traceId}.`);const z={...W,metadata:_({dynamicSamplingContext:W&&!J?{}:J})};if(!Z)return z;return Z(z)},KW=function($,Y,Z){if(!hZ())return;return Y?Y.startChild(Z):$.startTransaction(Z)},zW=function($){const Y={...$};if(Y.name!==void 0&&Y.description===void 0)Y.description=Y.name;return Y};var J7=function($,Y){if(!Y)return $;return $.sdk=$.sdk||{},$.sdk.name=$.sdk.name||Y.name,$.sdk.version=$.sdk.version||Y.version,$.sdk.integrations=[...$.sdk.integrations||[],...Y.integrations||[]],$.sdk.packages=[...$.sdk.packages||[],...Y.packages||[]],$},VW=function($,Y,Z,X){const Q=CZ(Z),W={sent_at:(new Date()).toISOString(),...Q&&{sdk:Q},...!!X&&Y&&{dsn:S0(Y)}},J="aggregates"in $?[{type:"sessions"},$]:[{type:"session"},$.toJSON()];return C0(W,[J])},GW=function($,Y,Z,X){const Q=CZ(Z),W=$.type&&$.type!=="replay_event"?$.type:"event";J7($,Z&&Z.sdk);const J=zX($,Q,X,Y);return delete $.sdkProcessingMetadata,C0(J,[[{type:W},$]])};class UX{constructor($,Y){this._client=$,this.flushTimeout=60,this._pendingAggregates={},this._isEnabled=!0,this._intervalId=setInterval(()=>this.flush(),this.flushTimeout*1000),this._sessionAttrs=Y}flush(){const $=this.getSessionAggregates();if($.aggregates.length===0)return;this._pendingAggregates={},this._client.sendSession($)}getSessionAggregates(){const $=Object.keys(this._pendingAggregates).map((Z)=>{return this._pendingAggregates[parseInt(Z)]}),Y={attrs:this._sessionAttrs,aggregates:$};return _(Y)}close(){clearInterval(this._intervalId),this._isEnabled=!1,this.flush()}incrementSessionStatusCount(){if(!this._isEnabled)return;const $=R().getScope(),Y=$.getRequestSession();if(Y&&Y.status)this._incrementSessionStatusCount(Y.status,new Date),$.setRequestSession(void 0)}_incrementSessionStatusCount($,Y){const Z=new Date(Y).setSeconds(0,0);this._pendingAggregates[Z]=this._pendingAggregates[Z]||{};const X=this._pendingAggregates[Z];if(!X.started)X.started=new Date(Z).toISOString();switch($){case"errored":return X.errored=(X.errored||0)+1,X.errored;case"ok":return X.exited=(X.exited||0)+1,X.exited;default:return X.crashed=(X.crashed||0)+1,X.crashed}}}var z7=function($){const Y=$.protocol?`${$.protocol}:`:"",Z=$.port?`:${$.port}`:"";return`${Y}//${$.host}${Z}${$.path?`/${$.path}`:""}/api/`},V7=function($){return`${z7($)}${$.projectId}/envelope/`},G7=function($,Y){return v1({sentry_key:$.publicKey,sentry_version:K7,...Y&&{sentry_client:`${Y.name}/${Y.version}`}})},wW=function($,Y={}){const Z=typeof Y==="string"?Y:Y.tunnel,X=typeof Y==="string"||!Y._metadata?void 0:Y._metadata.sdk;return Z?Z:`${V7($)}?${G7($,X)}`};var K7="7";var w7=function($){const Y={};return $.forEach((Z)=>{const{name:X}=Z,Q=Y[X];if(Q&&!Q.isDefaultInstance&&Z.isDefaultInstance)return;Y[X]=Z}),Object.keys(Y).map((Z)=>Y[Z])},TX=function($){const Y=$.defaultIntegrations||[],Z=$.integrations;Y.forEach((J)=>{J.isDefaultInstance=!0});let X;if(Array.isArray(Z))X=[...Y,...Z];else if(typeof Z==="function")X=I0(Z(Y));else X=Y;const Q=w7(X),W=N7(Q,(J)=>J.name==="Debug");if(W!==-1){const[J]=Q.splice(W,1);Q.push(J)}return Q},MW=function($,Y){const Z={};return Y.forEach((X)=>{if(X)RX($,X,Z)}),Z},RX=function($,Y,Z){if(Z[Y.name]=Y,NW.indexOf(Y.name)===-1)Y.setupOnce(LX,R),NW.push(Y.name);if(Y.setup&&typeof Y.setup==="function")Y.setup($);if($.on&&typeof Y.preprocessEvent==="function"){const X=Y.preprocessEvent.bind(Y);$.on("preprocessEvent",(Q,W)=>X(Q,W,$))}if($.addEventProcessor&&typeof Y.processEvent==="function"){const X=Y.processEvent.bind(Y),Q=Object.assign((W,J)=>X(W,J,$),{id:Y.name});$.addEventProcessor(Q)}j&&M.log(`Integration installed: ${Y.name}`)};var N7=function($,Y){for(let Z=0;Z<$.length;Z++)if(Y($[Z])===!0)return Z;return-1},NW=[];var M7=function($,Y){const Z=`${Y} must return \`null\` or a valid event.`;if(m($))return $.then((X)=>{if(!o(X)&&X!==null)throw new p(Z);return X},(X)=>{throw new p(`${Y} rejected with ${X}`)});else if(!o($)&&$!==null)throw new p(Z);return $},L7=function($,Y,Z){const{beforeSend:X,beforeSendTransaction:Q}=$;if(FW(Y)&&X)return X(Y,Z);if(HW(Y)&&Q)return Q(Y,Z);return Y},FW=function($){return $.type===void 0},HW=function($){return $.type==="transaction"},LW="Not capturing exception because it's already been captured.";class DX{constructor($){if(this._options=$,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],$.dsn)this._dsn=RZ($.dsn);else j&&M.warn("No DSN provided, client will not send events.");if(this._dsn){const Y=wW(this._dsn,$);this._transport=$.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...$.transportOptions,url:Y})}}captureException($,Y,Z){if(AZ($)){j&&M.log(LW);return}let X=Y&&Y.event_id;return this._process(this.eventFromException($,Y).then((Q)=>this._captureEvent(Q,Y,Z)).then((Q)=>{X=Q})),X}captureMessage($,Y,Z,X){let Q=Z&&Z.event_id;const W=jZ($)?this.eventFromMessage(String($),Y,Z):this.eventFromException($,Z);return this._process(W.then((J)=>this._captureEvent(J,Z,X)).then((J)=>{Q=J})),Q}captureEvent($,Y,Z){if(Y&&Y.originalException&&AZ(Y.originalException)){j&&M.log(LW);return}let X=Y&&Y.event_id;return this._process(this._captureEvent($,Y,Z).then((Q)=>{X=Q})),X}captureSession($){if(typeof $.release!=="string")j&&M.warn("Discarded session because of missing or non-string release");else this.sendSession($),q0($,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush($){const Y=this._transport;if(Y)return this._isClientDoneProcessing($).then((Z)=>{return Y.flush($).then((X)=>Z&&X)});else return t(!0)}close($){return this.flush($).then((Y)=>{return this.getOptions().enabled=!1,Y})}getEventProcessors(){return this._eventProcessors}addEventProcessor($){this._eventProcessors.push($)}setupIntegrations($){if($&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)this._integrations=MW(this,this._options.integrations),this._integrationsInitialized=!0}getIntegrationById($){return this._integrations[$]}getIntegration($){try{return this._integrations[$.id]||null}catch(Y){return j&&M.warn(`Cannot retrieve integration ${$.id} from the current Client`),null}}addIntegration($){RX(this,$,this._integrations)}sendEvent($,Y={}){this.emit("beforeSendEvent",$,Y);let Z=GW($,this._dsn,this._options._metadata,this._options.tunnel);for(let Q of Y.attachments||[])Z=JX(Z,KX(Q,this._options.transportOptions&&this._options.transportOptions.textEncoder));const X=this._sendEnvelope(Z);if(X)X.then((Q)=>this.emit("afterSendEvent",$,Q),null)}sendSession($){const Y=VW($,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(Y)}recordDroppedEvent($,Y,Z){if(this._options.sendClientReports){const X=`${$}:${Y}`;j&&M.log(`Adding outcome: "${X}"`),this._outcomes[X]=this._outcomes[X]+1||1}}on($,Y){if(!this._hooks[$])this._hooks[$]=[];this._hooks[$].push(Y)}emit($,...Y){if(this._hooks[$])this._hooks[$].forEach((Z)=>Z(...Y))}_updateSessionFromEvent($,Y){let Z=!1,X=!1;const Q=Y.exception&&Y.exception.values;if(Q){X=!0;for(let K of Q){const z=K.mechanism;if(z&&z.handled===!1){Z=!0;break}}}const W=$.status==="ok";if(W&&$.errors===0||W&&Z)q0($,{...Z&&{status:"crashed"},errors:$.errors||Number(X||Z)}),this.captureSession($)}_isClientDoneProcessing($){return new d((Y)=>{let Z=0;const X=1,Q=setInterval(()=>{if(this._numProcessing==0)clearInterval(Q),Y(!0);else if(Z+=X,$&&Z>=$)clearInterval(Q),Y(!1)},X)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent($,Y,Z){const X=this.getOptions(),Q=Object.keys(this._integrations);if(!Y.integrations&&Q.length>0)Y.integrations=Q;return this.emit("preprocessEvent",$,Y),XW(X,$,Y,Z,this).then((W)=>{if(W===null)return W;const{propagationContext:J}=W.sdkProcessingMetadata||{};if(!(W.contexts&&W.contexts.trace)&&J){const{traceId:z,spanId:w,parentSpanId:G,dsc:V}=J;W.contexts={trace:{trace_id:z,span_id:w,parent_span_id:G},...W.contexts};const N=V?V:z0(z,this,Z);W.sdkProcessingMetadata={dynamicSamplingContext:N,...W.sdkProcessingMetadata}}return W})}_captureEvent($,Y={},Z){return this._processEvent($,Y,Z).then((X)=>{return X.event_id},(X)=>{if(j){const Q=X;if(Q.logLevel==="log")M.log(Q.message);else M.warn(Q)}return})}_processEvent($,Y,Z){const X=this.getOptions(),{sampleRate:Q}=X,W=HW($),J=FW($),K=$.type||"error",z=`before send for type \`${K}\``;if(J&&typeof Q==="number"&&Math.random()>Q)return this.recordDroppedEvent("sample_rate","error",$),w$(new p(`Discarding event because it's not included in the random sample (sampling rate = ${Q})`,"log"));const w=K==="replay_event"?"replay":K;return this._prepareEvent($,Y,Z).then((G)=>{if(G===null)throw this.recordDroppedEvent("event_processor",w,$),new p("An event processor returned `null`, will not send event.","log");if(Y.data&&Y.data.__sentry__===!0)return G;const N=L7(X,G,Y);return M7(N,z)}).then((G)=>{if(G===null)throw this.recordDroppedEvent("before_send",w,$),new p(`${z} returned \`null\`, will not send event.`,"log");const V=Z&&Z.getSession();if(!W&&V)this._updateSessionFromEvent(V,G);const N=G.transaction_info;if(W&&N&&G.transaction!==$.transaction)G.transaction_info={...N,source:"custom"};return this.sendEvent(G,Y),G}).then(null,(G)=>{if(G instanceof p)throw G;throw this.captureException(G,{data:{__sentry__:!0},originalException:G}),new p(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${G}`)})}_process($){this._numProcessing++,$.then((Y)=>{return this._numProcessing--,Y},(Y)=>{return this._numProcessing--,Y})}_sendEnvelope($){if(this.emit("beforeEnvelope",$),this._isEnabled()&&this._transport)return this._transport.send($).then(null,(Y)=>{j&&M.error("Error while sending event:",Y)});else j&&M.error("Transport disabled")}_clearOutcomes(){const $=this._outcomes;return this._outcomes={},Object.keys($).map((Y)=>{const[Z,X]=Y.split(":");return{reason:Z,category:X,quantity:$[Y]}})}}var BW=function($,Y,Z,X,Q){const W={sent_at:(new Date()).toISOString()};if(Z&&Z.sdk)W.sdk={name:Z.sdk.name,version:Z.sdk.version};if(!!X&&!!Q)W.dsn=S0(Q);if(Y)W.trace=_(Y);const J=F7($);return C0(W,[J])},F7=function($){return[{type:"check_in"},$]};class KY extends DX{constructor($){JW();super($)}eventFromException($,Y){return t(NX(R,this._options.stackParser,$,Y))}eventFromMessage($,Y="info",Z){return t(MX(this._options.stackParser,$,Y,Z,this._options.attachStacktrace))}captureException($,Y,Z){if(this._options.autoSessionTracking&&this._sessionFlusher&&Z){const X=Z.getRequestSession();if(X&&X.status==="ok")X.status="errored"}return super.captureException($,Y,Z)}captureEvent($,Y,Z){if(this._options.autoSessionTracking&&this._sessionFlusher&&Z){if(($.type||"exception")==="exception"&&$.exception&&$.exception.values&&$.exception.values.length>0){const W=Z.getRequestSession();if(W&&W.status==="ok")W.status="errored"}}return super.captureEvent($,Y,Z)}close($){if(this._sessionFlusher)this._sessionFlusher.close();return super.close($)}initSessionFlusher(){const{release:$,environment:Y}=this._options;if(!$)j&&M.warn("Cannot initialise an instance of SessionFlusher if no release is provided!");else this._sessionFlusher=new UX(this,{release:$,environment:Y})}captureCheckIn($,Y,Z){const X=$.status!=="in_progress"&&$.checkInId?$.checkInId:I();if(!this._isEnabled())return j&&M.warn("SDK not enabled, will not capture checkin."),X;const Q=this.getOptions(),{release:W,environment:J,tunnel:K}=Q,z={check_in_id:X,monitor_slug:$.monitorSlug,status:$.status,release:W,environment:J};if($.status!=="in_progress")z.duration=$.duration;if(Y)z.monitor_config={schedule:Y.schedule,checkin_margin:Y.checkinMargin,max_runtime:Y.maxRuntime,timezone:Y.timezone};const[w,G]=this._getTraceInfoFromScope(Z);if(G)z.contexts={trace:G};const V=BW(z,w,this.getSdkMetadata(),K,this.getDsn());return j&&M.info("Sending checkin:",$.monitorSlug,$.status),this._sendEnvelope(V),X}_captureRequestSession(){if(!this._sessionFlusher)j&&M.warn("Discarded request mode session because autoSessionTracking option was disabled");else this._sessionFlusher.incrementSessionStatusCount()}_prepareEvent($,Y,Z){if(this._options.platform)$.platform=$.platform||this._options.platform;if(this._options.runtime)$.contexts={...$.contexts,runtime:($.contexts||{}).runtime||this._options.runtime};if(this._options.serverName)$.server_name=$.server_name||this._options.serverName;return super._prepareEvent($,Y,Z)}_getTraceInfoFromScope($){if(!$)return[void 0,void 0];const Y=$.getSpan();if(Y)return[Y.transaction?Y.transaction.getDynamicSamplingContext():void 0,Y.getTraceContext()];const{traceId:Z,spanId:X,parentSpanId:Q,dsc:W}=$.getPropagationContext(),J={trace_id:Z,span_id:X,parent_span_id:Q};if(W)return[W,J];return[z0(Z,this,$),J]}}var PX=function($,Y){if(Y.debug===!0)if(j)M.enable();else c(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")});const Z=R();Z.getScope().update(Y.initialScope);const Q=new $(Y);Z.bindClient(Q)};var B$=function($,Y,Z=n1($.bufferSize||H7)){let X={};const Q=(J)=>Z.drain(J);function W(J){const K=[];if(IZ(J,(V,N)=>{const F=fZ(N);if(VX(X,F)){const H=jW(V,N);$.recordDroppedEvent("ratelimit_backoff",F,H)}else K.push(V)}),K.length===0)return t();const z=C0(J[0],K),w=(V)=>{IZ(z,(N,F)=>{const H=jW(N,F);$.recordDroppedEvent(V,fZ(F),H)})},G=()=>Y({body:CY(z,$.textEncoder)}).then((V)=>{if(V.statusCode!==void 0&&(V.statusCode<200||V.statusCode>=300))j&&M.warn(`Sentry responded with status code ${V.statusCode} to sent event.`);return X=GX(X,V),V},(V)=>{throw w("network_error"),V});return Z.add(G).then((V)=>V,(V)=>{if(V instanceof p)return j&&M.error("Skipped sending event because buffer is full."),w("queue_overflow"),t();else throw V})}return W.__sentry__baseTransport__=!0,{send:W,flush:Q}},jW=function($,Y){if(Y!=="event"&&Y!=="transaction")return;return Array.isArray($)?$[1]:void 0},H7=30;var y0="7.84.0";var i={};rY(i,{LinkedErrors:()=>{{return pZ}},InboundFilters:()=>{{return cZ}},FunctionToString:()=>{{return dZ}}});var UW;class dZ{static __initStatic(){this.id="FunctionToString"}constructor(){this.name=dZ.id}setupOnce(){UW=Function.prototype.toString;try{Function.prototype.toString=function(...$){const Y=h1(this)||this;return UW.apply(Y,$)}}catch($){}}}dZ.__initStatic();var U7=function($={},Y={}){return{allowUrls:[...$.allowUrls||[],...Y.allowUrls||[]],denyUrls:[...$.denyUrls||[],...Y.denyUrls||[]],ignoreErrors:[...$.ignoreErrors||[],...Y.ignoreErrors||[],...$.disableErrorDefaults?[]:B7],ignoreTransactions:[...$.ignoreTransactions||[],...Y.ignoreTransactions||[],...$.disableTransactionDefaults?[]:j7],ignoreInternal:$.ignoreInternal!==void 0?$.ignoreInternal:!0}},T7=function($,Y){if(Y.ignoreInternal&&q7($))return j&&M.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${O0($)}`),!0;if(R7($,Y.ignoreErrors))return j&&M.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${O0($)}`),!0;if(D7($,Y.ignoreTransactions))return j&&M.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${O0($)}`),!0;if(P7($,Y.denyUrls))return j&&M.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${O0($)}.\nUrl: ${uZ($)}`),!0;if(!O7($,Y.allowUrls))return j&&M.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${O0($)}.\nUrl: ${uZ($)}`),!0;return!1},R7=function($,Y){if($.type||!Y||!Y.length)return!1;return A7($).some((Z)=>B0(Z,Y))},D7=function($,Y){if($.type!=="transaction"||!Y||!Y.length)return!1;const Z=$.transaction;return Z?B0(Z,Y):!1},P7=function($,Y){if(!Y||!Y.length)return!1;const Z=uZ($);return!Z?!1:B0(Z,Y)},O7=function($,Y){if(!Y||!Y.length)return!0;const Z=uZ($);return!Z?!0:B0(Z,Y)},A7=function($){const Y=[];if($.message)Y.push($.message);let Z;try{Z=$.exception.values[$.exception.values.length-1]}catch(X){}if(Z){if(Z.value){if(Y.push(Z.value),Z.type)Y.push(`${Z.type}: ${Z.value}`)}}if(j&&Y.length===0)M.error(`Could not extract message for event ${O0($)}`);return Y},q7=function($){try{return $.exception.values[0].type==="SentryError"}catch(Y){}return!1},E7=function($=[]){for(let Y=$.length-1;Y>=0;Y--){const Z=$[Y];if(Z&&Z.filename!=="<anonymous>"&&Z.filename!=="[native code]")return Z.filename||null}return null},uZ=function($){try{let Y;try{Y=$.exception.values[0].stacktrace.frames}catch(Z){}return Y?E7(Y):null}catch(Y){return j&&M.error(`Cannot extract url for event ${O0($)}`),null}},B7=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],j7=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/];class cZ{static __initStatic(){this.id="InboundFilters"}constructor($={}){this.name=cZ.id,this._options=$}setupOnce($,Y){}processEvent($,Y,Z){const X=Z.getOptions(),Q=U7(this._options,X);return T7($,Q)?null:$}}cZ.__initStatic();var k7="cause",S7=5;class pZ{static __initStatic(){this.id="LinkedErrors"}constructor($={}){this._key=$.key||k7,this._limit=$.limit||S7,this.name=pZ.id}setupOnce(){}preprocessEvent($,Y,Z){const X=Z.getOptions();x1(_Z,X.stackParser,X.maxValueLength,this._key,this._limit,$,Y)}}pZ.__initStatic();var j$=function($,Y){const Z=Y.getClient(),X=Z&&Z.getDsn(),Q=Z&&Z.getOptions().tunnel;return f7($,X)||I7($,Q)},I7=function($,Y){if(!Y)return!1;return TW($)===TW(Y)},f7=function($,Y){return Y?$.includes(Y.host):!1},TW=function($){return $[$.length-1]==="/"?$.slice(0,-1):$};var C7=function($){const{transactionNamingScheme:Y,include:{ip:Z,user:X,...Q}}=$,W=[];for(let[K,z]of Object.entries(Q))if(z)W.push(K);let J;if(X===void 0)J=!0;else if(typeof X==="boolean")J=X;else{const K=[];for(let[z,w]of Object.entries(X))if(w)K.push(z);J=K}return{include:{ip:Z,user:J,request:W.length!==0?W:void 0,transaction:Y}}},_7=function($){try{return $.getClient().getOptions()._metadata.sdk.name}catch(Y){return}},OX={include:{cookies:!0,data:!0,headers:!0,ip:!1,query_string:!0,url:!0,user:{id:!0,username:!0,email:!0}},transactionNamingScheme:"methodPath"};class x0{static __initStatic(){this.id="RequestData"}constructor($={}){this.name=x0.id,this._addRequestData=e1,this._options={...OX,...$,include:{method:!0,...OX.include,...$.include,user:$.include&&typeof $.include.user==="boolean"?$.include.user:{...OX.include.user,...($.include||{}).user}}}}setupOnce($,Y){const{transactionNamingScheme:Z}=this._options;$((X)=>{const Q=Y(),W=Q.getIntegration(x0),{sdkProcessingMetadata:J={}}=X,K=J.request;if(!W||!K)return X;const z=J.requestDataOptionsFromExpressHandler||J.requestDataOptionsFromGCPWrapper||C7(this._options),w=this._addRequestData(X,K,z);if(X.type==="transaction"||Z==="handler")return w;const V=K._sentryTransaction;if(V){const N=_7(Q)==="sentry.javascript.nextjs"?V.name.startsWith("/api"):Z!=="path",[F]=M$(K,{path:!0,method:N,customRoute:V.name});w.transaction=F}return w})}}x0.__initStatic();var k=typeof __SENTRY_DEBUG__==="undefined"||__SENTRY_DEBUG__;var a=function($){const Y=L([$,"call",(X)=>X(),"access",(X)=>X.getClient,"call",(X)=>X(),"optionalAccess",(X)=>X.getOptions,"call",(X)=>X()]);return(L([Y,"optionalAccess",(X)=>X.instrumenter])||"sentry")!=="sentry"};var RW=function($,Y){const Z=$.length;switch(Z){case 2:return function(X,Q){const W=Q.__sentry_transaction;if(W){const J=W.startChild({description:$.name,op:`middleware.express.${Y}`,origin:"auto.middleware.express"});Q.once("finish",()=>{J.finish()})}return $.call(this,X,Q)};case 3:return function(X,Q,W){const J=Q.__sentry_transaction,K=L([J,"optionalAccess",(z)=>z.startChild,"call",(z)=>z({description:$.name,op:`middleware.express.${Y}`,origin:"auto.middleware.express"})]);$.call(this,X,Q,function(...z){L([K,"optionalAccess",(w)=>w.finish,"call",(w)=>w()]),W.call(this,...z)})};case 4:return function(X,Q,W,J){const K=W.__sentry_transaction,z=L([K,"optionalAccess",(w)=>w.startChild,"call",(w)=>w({description:$.name,op:`middleware.express.${Y}`,origin:"auto.middleware.express"})]);$.call(this,X,Q,W,function(...w){L([z,"optionalAccess",(G)=>G.finish,"call",(G)=>G()]),J.call(this,...w)})};default:throw new Error(`Express middleware takes 2-4 arguments. Got: ${Z}`)}},Y6=function($,Y){return $.map((Z)=>{if(typeof Z==="function")return RW(Z,Y);if(Array.isArray(Z))return Z.map((X)=>{if(typeof X==="function")return RW(X,Y);return X});return Z})},Z6=function($,Y){const Z=$[Y];return $[Y]=function(...X){return Z.call(this,...Y6(X,Y))},$},X6=function($,Y=[]){Y.forEach((Z)=>Z6($,Z))},Q6=function($){const Y="settings"in $;if(Y&&$._router===void 0&&$.lazyrouter)$.lazyrouter();const Z=Y?$._router:$;if(!Z){k&&M.debug("Cannot instrument router for URL Parameterization (did not find a valid router)."),k&&M.debug("Routing instrumentation is currently only supported in Express 4.");return}const X=Object.getPrototypeOf(Z),Q=X.process_params;X.process_params=function W(J,K,z,w,G){if(!z._reconstructedRoute)z._reconstructedRoute="";const{layerRoutePath:V,isRegex:N,isArray:F,numExtraSegments:H}=J6(J);if(V||N||F)z._hasParameters=!0;let B;if(V)B=V;else B=V6(z.originalUrl,z._reconstructedRoute,J.path)||"";const T=B.split("/").filter((f)=>f.length>0&&(N||F||!f.includes("*"))).join("/");if(T&&T.length>0)z._reconstructedRoute+=`/${T}${N?"/":""}`;const A=t$(N$(z.originalUrl||""))+H,S=t$(z._reconstructedRoute);if(A===S){if(!z._hasParameters){if(z._reconstructedRoute!==z.originalUrl)z._reconstructedRoute=z.originalUrl?N$(z.originalUrl):z.originalUrl}const f=w.__sentry_transaction;if(f&&f.metadata.source!=="custom"){const q=z._reconstructedRoute||"/";f.setName(...M$(z,{path:!0,method:!0,customRoute:q}))}}return Q.call(this,J,K,z,w,G)}},J6=function($){let Y=L([$,"access",(J)=>J.route,"optionalAccess",(J)=>J.path]);const Z=TY(Y),X=Array.isArray(Y);if(!Y){const[J]=O.process.versions.node.split(".").map(Number);if(J>=16)Y=W6($.path,$.regexp,$.keys)}if(!Y)return{isRegex:Z,isArray:X,numExtraSegments:0};const Q=X?Math.max(K6(Y)-t$($.path||""),0):0;return{layerRoutePath:z6(X,Y),isRegex:Z,isArray:X,numExtraSegments:Q}},K6=function($){return $.reduce((Y,Z)=>{return Y+t$(Z.toString())},0)},z6=function($,Y){if($)return Y.map((Z)=>Z.toString()).join(",");return Y&&Y.toString()},V6=function($,Y,Z){const X=N$($||""),Q=L([X,"optionalAccess",(z)=>z.split,"call",(z)=>z("/"),"access",(z)=>z.filter,"call",(z)=>z((w)=>!!w)]);let W=0;const J=L([Y,"optionalAccess",(z)=>z.split,"call",(z)=>z("/"),"access",(z)=>z.filter,"call",(z)=>z((w)=>!!w),"access",(z)=>z.length])||0;return L([Z,"optionalAccess",(z)=>z.split,"call",(z)=>z("/"),"access",(z)=>z.filter,"call",(z)=>z((w)=>{if(L([Q,"optionalAccess",(G)=>G[J+W]])===w)return W+=1,!0;return!1}),"access",(z)=>z.join,"call",(z)=>z("/")])};class bY{static __initStatic(){this.id="Express"}constructor($={}){this.name=bY.id,this._router=$.router||$.app,this._methods=(Array.isArray($.methods)?$.methods:[]).concat("use")}setupOnce($,Y){if(!this._router){k&&M.error("ExpressIntegration is missing an Express instance");return}if(a(Y)){k&&M.log("Express Integration is skipped because of instrumenter configuration.");return}X6(this._router,this._methods),Q6(this._router)}}bY.__initStatic();var W6=($,Y,Z)=>{if(!$||!Y||!Z||Object.keys(Z).length===0||!L([Z,"access",(w)=>w[0],"optionalAccess",(w)=>w.offset]))return;const X=Z.sort((w,G)=>w.offset-G.offset),W=new RegExp(Y,`${Y.flags}d`).exec($);if(!W||!W.indices)return;const[,...J]=W.indices;if(J.length!==X.length)return;let K=$,z=0;return J.forEach((w,G)=>{if(w){const[V,N]=w,F=K.substring(0,V-z),H=`:${X[G].name}`,B=K.substring(N-z);K=F+H+B,z=z+(N-V-H.length)}}),K};class hY{static __initStatic(){this.id="Postgres"}constructor($={}){this.name=hY.id,this._usePgNative=!!$.usePgNative,this._module=$.module}loadDependency(){return this._module=this._module||$0("pg")}setupOnce($,Y){if(a(Y)){k&&M.log("Postgres Integration is skipped because of instrumenter configuration.");return}const Z=this.loadDependency();if(!Z){k&&M.error("Postgres Integration was unable to require `pg` package.");return}const X=this._usePgNative?L([Z,"access",(Q)=>Q.native,"optionalAccess",(Q)=>Q.Client]):Z.Client;if(!X){k&&M.error("Postgres Integration was unable to access 'pg-native' bindings.");return}C(X.prototype,"query",function(Q){return function(W,J,K){const w=Y().getScope().getSpan(),G={"db.system":"postgresql"};try{if(this.database)G["db.name"]=this.database;if(this.host)G["server.address"]=this.host;if(this.port)G["server.port"]=this.port;if(this.user)G["db.user"]=this.user}catch(F){}const V=L([w,"optionalAccess",(F)=>F.startChild,"call",(F)=>F({description:typeof W==="string"?W:W.text,op:"db",origin:"auto.db.postgres",data:G})]);if(typeof K==="function")return Q.call(this,W,J,function(F,H){L([V,"optionalAccess",(B)=>B.finish,"call",(B)=>B()]),K(F,H)});if(typeof J==="function")return Q.call(this,W,function(F,H){L([V,"optionalAccess",(B)=>B.finish,"call",(B)=>B()]),J(F,H)});const N=typeof J!=="undefined"?Q.call(this,W,J):Q.call(this,W);if(m(N))return N.then((F)=>{return L([V,"optionalAccess",(H)=>H.finish,"call",(H)=>H()]),F});return L([V,"optionalAccess",(F)=>F.finish,"call",(F)=>F()]),N}})}}hY.__initStatic();class vY{static __initStatic(){this.id="Mysql"}constructor(){this.name=vY.id}loadDependency(){return this._module=this._module||$0("mysql/lib/Connection.js")}setupOnce($,Y){if(a(Y)){k&&M.log("Mysql Integration is skipped because of instrumenter configuration.");return}const Z=this.loadDependency();if(!Z){k&&M.error("Mysql Integration was unable to require `mysql` package.");return}let X=void 0;try{Z.prototype.connect=new Proxy(Z.prototype.connect,{apply(J,K,z){if(!X)X=K.config;return J.apply(K,z)}})}catch(J){k&&M.error("Mysql Integration was unable to instrument `mysql` config.")}function Q(){if(!X)return{};return{"server.address":X.host,"server.port":X.port,"db.user":X.user}}function W(J){if(!J||J.endTimestamp)return;const K=Q();Object.keys(K).forEach((z)=>{J.setData(z,K[z])}),J.finish()}C(Z,"createQuery",function(J){return function(K,z,w){const V=Y().getScope().getSpan(),N=L([V,"optionalAccess",(H)=>H.startChild,"call",(H)=>H({description:typeof K==="string"?K:K.sql,op:"db",origin:"auto.db.mysql",data:{"db.system":"mysql"}})]);if(typeof w==="function")return J.call(this,K,z,function(H,B,T){W(N),w(H,B,T)});if(typeof z==="function")return J.call(this,K,function(H,B,T){W(N),z(H,B,T)});const F=J.call(this,K,z);return F.on("end",()=>{W(N)}),F}})}}vY.__initStatic();var N6=function($){return $&&typeof $==="object"&&$.once&&typeof $.once==="function"},G6=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],w6={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]};class gY{static __initStatic(){this.id="Mongo"}constructor($={}){this.name=gY.id,this._operations=Array.isArray($.operations)?$.operations:G6,this._describeOperations=("describeOperations"in $)?$.describeOperations:!0,this._useMongoose=!!$.useMongoose}loadDependency(){const $=this._useMongoose?"mongoose":"mongodb";return this._module=this._module||$0($)}setupOnce($,Y){if(a(Y)){k&&M.log("Mongo Integration is skipped because of instrumenter configuration.");return}const Z=this.loadDependency();if(!Z){const X=this._useMongoose?"mongoose":"mongodb";k&&M.error(`Mongo Integration was unable to require \`${X}\` package.`);return}this._instrumentOperations(Z.Collection,this._operations,Y)}_instrumentOperations($,Y,Z){Y.forEach((X)=>this._patchOperation($,X,Z))}_patchOperation($,Y,Z){if(!(Y in $.prototype))return;const X=this._getSpanContextFromOperationArguments.bind(this);C($.prototype,Y,function(Q){return function(...W){const J=W[W.length-1],z=Z().getScope().getSpan();if(typeof J!=="function"||Y==="mapReduce"&&W.length===2){const G=L([z,"optionalAccess",(N)=>N.startChild,"call",(N)=>N(X(this,Y,W))]),V=Q.call(this,...W);if(m(V))return V.then((N)=>{return L([G,"optionalAccess",(F)=>F.finish,"call",(F)=>F()]),N});else if(N6(V)){const N=V;try{N.once("close",()=>{L([G,"optionalAccess",(F)=>F.finish,"call",(F)=>F()])})}catch(F){L([G,"optionalAccess",(H)=>H.finish,"call",(H)=>H()])}return N}else return L([G,"optionalAccess",(N)=>N.finish,"call",(N)=>N()]),V}const w=L([z,"optionalAccess",(G)=>G.startChild,"call",(G)=>G(X(this,Y,W.slice(0,-1)))]);return Q.call(this,...W.slice(0,-1),function(G,V){L([w,"optionalAccess",(N)=>N.finish,"call",(N)=>N()]),J(G,V)})}})}_getSpanContextFromOperationArguments($,Y,Z){const X={"db.system":"mongodb","db.name":$.dbName,"db.operation":Y,"db.mongodb.collection":$.collectionName},Q={op:"db",origin:"auto.db.mongo",description:Y,data:X},W=w6[Y],J=Array.isArray(this._describeOperations)?this._describeOperations.includes(Y):this._describeOperations;if(!W||!J)return Q;try{if(Y==="mapReduce"){const[K,z]=Z;X[W[0]]=typeof K==="string"?K:K.name||"<anonymous>",X[W[1]]=typeof z==="string"?z:z.name||"<anonymous>"}else for(let K=0;K<W.length;K++)X[`db.mongodb.${W[K]}`]=JSON.stringify(Z[K])}catch(K){}return Q}}gY.__initStatic();var M6=function($){return!!$&&!!$.$use};class mY{static __initStatic(){this.id="Prisma"}constructor($={}){if(this.name=mY.id,M6($.client)&&!$.client._sentryInstrumented){s$($.client,"_sentryInstrumented",!0);const Y={};try{const Z=$.client._engineConfig;if(Z){const{activeProvider:X,clientVersion:Q}=Z;if(X)Y["db.system"]=X;if(Q)Y["db.prisma.version"]=Q}}catch(Z){}$.client.$use((Z,X)=>{if(a(R))return X(Z);const{action:Q,model:W}=Z;return vZ({name:W?`${W} ${Q}`:Q,op:"db.prisma",origin:"auto.db.prisma",data:{...Y,"db.operation":Q}},()=>X(Z))})}else k&&M.warn("Unsupported Prisma client provided to PrismaIntegration. Provided client:",$.client)}setupOnce(){}}mY.__initStatic();class dY{static __initStatic(){this.id="GraphQL"}constructor(){this.name=dY.id}loadDependency(){return this._module=this._module||$0("graphql/execution/execute.js")}setupOnce($,Y){if(a(Y)){k&&M.log("GraphQL Integration is skipped because of instrumenter configuration.");return}const Z=this.loadDependency();if(!Z){k&&M.error("GraphQL Integration was unable to require graphql/execution package.");return}C(Z,"execute",function(X){return function(...Q){const W=Y().getScope(),J=W.getSpan(),K=L([J,"optionalAccess",(w)=>w.startChild,"call",(w)=>w({description:"execute",op:"graphql.execute",origin:"auto.graphql.graphql"})]);L([W,"optionalAccess",(w)=>w.setSpan,"call",(w)=>w(K)]);const z=X.call(this,...Q);if(m(z))return z.then((w)=>{return L([K,"optionalAccess",(G)=>G.finish,"call",(G)=>G()]),L([W,"optionalAccess",(G)=>G.setSpan,"call",(G)=>G(J)]),w});return L([K,"optionalAccess",(w)=>w.finish,"call",(w)=>w()]),L([W,"optionalAccess",(w)=>w.setSpan,"call",(w)=>w(J)]),z}})}}dY.__initStatic();var DW=function($,Y){return $.map((Z)=>{return Object.keys(Z).forEach((X)=>{Object.keys(Z[X]).forEach((Q)=>{if(typeof Z[X][Q]!=="function")return;L6(Z,X,Q,Y)})}),Z})},L6=function($,Y,Z,X){C($[Y],Z,function(Q){return function(...W){const K=X().getScope().getSpan(),z=L([K,"optionalAccess",(G)=>G.startChild,"call",(G)=>G({description:`${Y}.${Z}`,op:"graphql.resolve",origin:"auto.graphql.apollo"})]),w=Q.call(this,...W);if(m(w))return w.then((G)=>{return L([z,"optionalAccess",(V)=>V.finish,"call",(V)=>V()]),G});return L([z,"optionalAccess",(G)=>G.finish,"call",(G)=>G()]),w}})};class uY{static __initStatic(){this.id="Apollo"}constructor($={useNestjs:!1}){this.name=uY.id,this._useNest=!!$.useNestjs}loadDependency(){if(this._useNest)this._module=this._module||$0("@nestjs/graphql");else this._module=this._module||$0("apollo-server-core");return this._module}setupOnce($,Y){if(a(Y)){k&&M.log("Apollo Integration is skipped because of instrumenter configuration.");return}if(this._useNest){const Z=this.loadDependency();if(!Z){k&&M.error("Apollo-NestJS Integration was unable to require @nestjs/graphql package.");return}C(Z.GraphQLFactory.prototype,"mergeWithSchema",function(X){return function(...Q){return C(this.resolversExplorerService,"explore",function(W){return function(){const J=I0(W.call(this));return DW(J,Y)}}),X.call(this,...Q)}})}else{const Z=this.loadDependency();if(!Z){k&&M.error("Apollo Integration was unable to require apollo-server-core package.");return}C(Z.ApolloServerBase.prototype,"constructSchema",function(X){return function(){if(!this.config.resolvers){if(k){if(this.config.schema)M.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `schema` property.If you are using NestJS with Apollo, please use `Sentry.Integrations.Apollo({ useNestjs: true })` instead."),M.warn();else if(this.config.modules)M.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `modules` property.");M.error("Skipping tracing as no resolvers found on the `ApolloServer` instance.")}return X.call(this)}const Q=I0(this.config.resolvers);return this.config.resolvers=DW(Q,Y),X.call(this)}})}}}uY.__initStatic();import*as PW from"os";import{TextEncoder as F6} from"util";class AX extends KY{constructor($){$._metadata=$._metadata||{},$._metadata.sdk=$._metadata.sdk||{name:"sentry.javascript.node",packages:[{name:"npm:@sentry/node",version:y0}],version:y0},$.transportOptions={textEncoder:new F6,...$.transportOptions};const Y={...$,platform:"node",runtime:{name:"node",version:global.process.version},serverName:$.serverName||global.process.env.SENTRY_NAME||PW.hostname()};super(Y)}}import*as HJ from"http";import*as BJ from"https";import{Readable as jJ} from"stream";import{URL as lW} from"url";import{createGzip as UJ} from"zlib";var iW=k8(pW(),1),RJ=function($){return new jJ({read(){this.push($),this.push(null)}})},aW=function($){let Y;try{Y=new lW($.url)}catch(z){return c(()=>{console.warn("[@sentry/node]: Invalid dsn or tunnel option, will not send any events. The tunnel option must be a full URL when used.")}),B$($,()=>Promise.resolve({}))}const Z=Y.protocol==="https:",X=DJ(Y,$.proxy||(Z?process.env.https_proxy:void 0)||process.env.http_proxy),Q=Z?BJ:HJ,W=$.keepAlive===void 0?!1:$.keepAlive,J=X?new iW.HttpsProxyAgent(X):new Q.Agent({keepAlive:W,maxSockets:30,timeout:2000}),K=PJ($,_Y($.httpModule,()=>Q),J);return B$($,K)},DJ=function($,Y){const{no_proxy:Z}=process.env;if(Z&&Z.split(",").some((Q)=>$.host.endsWith(Q)||$.hostname.endsWith(Q)))return;else return Y},PJ=function($,Y,Z){const{hostname:X,pathname:Q,port:W,protocol:J,search:K}=new lW($.url);return function z(w){return new Promise((G,V)=>{let N=RJ(w.body);const F={...$.headers};if(w.body.length>TJ)F["content-encoding"]="gzip",N=N.pipe(UJ());const H=Y.request({method:"POST",agent:Z,headers:F,hostname:X,path:`${Q}${K}`,port:W,protocol:J,ca:$.caCerts},(B)=>{B.on("data",()=>{}),B.on("end",()=>{}),B.setEncoding("utf8");const T=_Y(B.headers["retry-after"],()=>null),A=_Y(B.headers["x-sentry-rate-limits"],()=>null);G({statusCode:B.statusCode,headers:{"retry-after":T,"x-sentry-rate-limits":Array.isArray(A)?A[0]:A}})});H.on("error",V),N.pipe(H)})}},TJ=32768;import{spawn as pw} from"child_process";import{posix as OJ,sep as AJ} from"path";var EJ=function($){return $.replace(/^[A-Z]:/,"").replace(/\\/g,"/")},sW=function($,Y=qJ){if(!$)return;const Z=Y?EJ($):$;let{root:X,dir:Q,base:W,ext:J}=OJ.parse(Z);const z=`${require&&require.main&&require.main.filename&&Q||global.process.cwd()}/`;let w=W;if(J===".js"||J===".mjs"||J===".cjs")w=w.slice(0,J.length*-1);if(!X&&!Q)Q=".";let G=Q.lastIndexOf("/node_modules/");if(G>-1)return`${Q.slice(G+14).replace(/\//g,".")}:${w}`;if(G=`${Q}/`.lastIndexOf(z,0),G===0){let V=Q.slice(z.length).replace(/\//g,".");if(V)V+=":";return V+=w,V}return w},qJ=AJ==="\\";var rW=function(){return!!process.send&&!!process.env.SENTRY_ANR_CHILD_PROCESS};var s=l1(process.versions.node);import*as tZ from"domain";var oW=function(){return tZ.active},kJ=function(){const $=oW();if(!$)return;return XY($),X0($)},SJ=function($){const Y={};return XY(Y,$),X0(Y)},IJ=function($,Y){const Z=oW();if(Z&&L([Y,"optionalAccess",(J)=>J.reuseExisting]))return $();const X=tZ.create(),Q=Z?X0(Z):void 0,W=SJ(Q);return QY(X,W),X.bind(()=>{return $()})()},nW=function(){xY({getCurrentHub:kJ,runWithAsyncContext:IJ})};import*as tW from"async_hooks";var eW=function(){if(!eZ)eZ=new tW.AsyncLocalStorage;function $(){return eZ.getStore()}function Y(X){const Q={};return XY(Q,X),X0(Q)}function Z(X,Q){const W=$();if(W&&L([Q,"optionalAccess",(K)=>K.reuseExisting]))return X();const J=Y(W);return eZ.run(J,()=>{return X()})}xY({getCurrentHub:$,runWithAsyncContext:Z})},eZ;var $8=function(){if(s.major&&s.major>=14)eW();else nW()};import*as Y8 from"util";class b0{constructor(){b0.prototype.__init.call(this)}static __initStatic(){this.id="Console"}__init(){this.name=b0.id}setupOnce(){c1(({args:$,level:Y})=>{const Z=R();if(!Z.getIntegration(b0))return;Z.addBreadcrumb({category:"console",level:$X(Y),message:Y8.format.apply(void 0,$)},{input:[...$],level:Y})})}}b0.__initStatic();var U0=typeof __SENTRY_DEBUG__==="undefined"||__SENTRY_DEBUG__;import{URL as _X} from"url";var X8=function($){const{protocol:Y,hostname:Z,port:X}=W8($),Q=$.path?$.path:"/";return`${Y}//${Z}${X}${Q}`},yX=function($){const{protocol:Y,hostname:Z,port:X}=W8($),Q=$.pathname||"/",W=$.auth?fJ($.auth):"";return`${Y}//${W}${Z}${X}${Q}`},fJ=function($){const[Y,Z]=$.split(":");return`${Y?"[Filtered]":""}:${Z?"[Filtered]":""}@`},xX=function($,Y,Z){if(!$)return $;let[X,Q]=$.split(" ");if(Y.host&&!Y.protocol)Y.protocol=L([Z,"optionalAccess",(W)=>W.agent,"optionalAccess",(W)=>W.protocol]),Q=yX(Y);if(L([Q,"optionalAccess",(W)=>W.startsWith,"call",(W)=>W("///")]))Q=Q.slice(2);return`${X} ${Q}`},Z8=function($){const Y={protocol:$.protocol,hostname:typeof $.hostname==="string"&&$.hostname.startsWith("[")?$.hostname.slice(1,-1):$.hostname,hash:$.hash,search:$.search,pathname:$.pathname,path:`${$.pathname||""}${$.search||""}`,href:$.href};if($.port!=="")Y.port=Number($.port);if($.username||$.password)Y.auth=`${$.username}:${$.password}`;return Y},Q8=function($,Y){let Z,X;if(typeof Y[Y.length-1]==="function")Z=Y.pop();if(typeof Y[0]==="string")X=Z8(new _X(Y[0]));else if(Y[0]instanceof _X)X=Z8(Y[0]);else{X=Y[0];try{const Q=new _X(X.path||"",`${X.protocol||"http:"}//${X.hostname}`);X={pathname:Q.pathname,search:Q.search,hash:Q.hash,...X}}catch(Q){}}if(Y.length===2)X={...X,...Y[1]};if(X.protocol===void 0)if(s.major&&s.major>8)X.protocol=L([L([$,"optionalAccess",(Q)=>Q.globalAgent]),"optionalAccess",(Q)=>Q.protocol])||L([X.agent,"optionalAccess",(Q)=>Q.protocol])||L([X._defaultAgent,"optionalAccess",(Q)=>Q.protocol]);else X.protocol=L([X.agent,"optionalAccess",(Q)=>Q.protocol])||L([X._defaultAgent,"optionalAccess",(Q)=>Q.protocol])||L([L([$,"optionalAccess",(Q)=>Q.globalAgent]),"optionalAccess",(Q)=>Q.protocol]);if(Z)return[X,Z];else return[X]},W8=function($){const Y=$.protocol||"",Z=$.hostname||$.host||"",X=!$.port||$.port===80||$.port===443||/^(.*):(\d+)$/.test(Z)?"":`:${$.port}`;return{protocol:Y,hostname:Z,port:X}};var J8=function($,Y,Z,X){const Q=new Y0(100),W=new Y0(100),J=(w)=>{if(Z===void 0)return!0;const G=Q.get(w);if(G!==void 0)return G;const V=Z(w);return Q.set(w,V),V},K=(w)=>{if(X===void 0)return!0;const G=W.get(w);if(G!==void 0)return G;const V=B0(w,X);return W.set(w,V),V};function z(w,G,V,N){if(!R().getIntegration(h0))return;R().addBreadcrumb({category:"http",data:{status_code:N&&N.statusCode,...G},type:"http"},{event:w,request:V,response:N})}return function w(G){return function V(...N){const F=Q8($,N),H=F[0],B=X8(H),T=yX(H);if(j$(T,R()))return G.apply($,F);const A=R(),S=A.getScope(),f=S.getSpan(),q=CJ(T,H),v=J(B)?L([f,"optionalAccess",(E)=>E.startChild,"call",(E)=>E({op:"http.client",origin:"auto.http.node.http",description:`${q["http.method"]} ${q.url}`,data:q})]):void 0;if(K(B))if(v){const E=v.toTraceparent(),r=L([v,"optionalAccess",(V0)=>V0.transaction,"optionalAccess",(V0)=>V0.getDynamicSamplingContext,"call",(V0)=>V0()]);K8(H,T,E,r)}else{const E=A.getClient(),{traceId:r,sampled:V0,dsc:Y1}=S.getPropagationContext(),D8=H$(r,void 0,V0),P8=Y1||(E?z0(r,E,S):void 0);K8(H,T,D8,P8)}else U0&&M.log(`[Tracing] Not adding sentry-trace header to outgoing request (${T}) due to mismatching tracePropagationTargets option.`);return G.apply($,F).once("response",function(E){const r=this;if(Y)z("response",q,r,E);if(v){if(E.statusCode)v.setHttpStatus(E.statusCode);v.description=xX(v.description,H,r),v.finish()}}).once("error",function(){const E=this;if(Y)z("error",q,E);if(v)v.setHttpStatus(500),v.description=xX(v.description,H,E),v.finish()})}}},K8=function($,Y,Z,X){if(($.headers||{})["sentry-trace"])return;U0&&M.log(`[Tracing] Adding sentry-trace header ${Z} to outgoing request to "${Y}": `);const W=e$(X),J=W&&W.length>0?_J($,W):void 0;$.headers={...$.headers,"sentry-trace":Z,...J&&{baggage:J}}},CJ=function($,Y){const Z=Y.method||"GET",X={url:$,"http.method":Z};if(Y.hash)X["http.fragment"]=Y.hash.substring(1);if(Y.search)X["http.query"]=Y.search.substring(1);return X},_J=function($,Y){if(!$.headers||!$.headers.baggage)return Y;else if(!Y)return $.headers.baggage;else if(Array.isArray($.headers.baggage))return[...$.headers.baggage,Y];return[$.headers.baggage,Y]};class h0{static __initStatic(){this.id="Http"}__init(){this.name=h0.id}constructor($={}){h0.prototype.__init.call(this),this._breadcrumbs=typeof $.breadcrumbs==="undefined"?!0:$.breadcrumbs,this._tracing=!$.tracing?void 0:$.tracing===!0?{}:$.tracing}setupOnce($,Y){if(!this._breadcrumbs&&!this._tracing)return;const Z=L([Y,"call",(K)=>K(),"access",(K)=>K.getClient,"call",(K)=>K(),"optionalAccess",(K)=>K.getOptions,"call",(K)=>K()]);if(Z&&Z.instrumenter!=="sentry"){U0&&M.log("HTTP Integration is skipped because of instrumenter configuration.");return}const X=L([this,"access",(K)=>K._tracing,"optionalAccess",(K)=>K.shouldCreateSpanForRequest])||L([Z,"optionalAccess",(K)=>K.shouldCreateSpanForRequest]),Q=L([Z,"optionalAccess",(K)=>K.tracePropagationTargets])||L([this,"access",(K)=>K._tracing,"optionalAccess",(K)=>K.tracePropagationTargets]),W=import.meta.require("http"),J=J8(W,this._breadcrumbs,X,Q);if(C(W,"get",J),C(W,"request",J),s.major&&s.major>8){const K=import.meta.require("https"),z=J8(K,this._breadcrumbs,X,Q);C(K,"get",z),C(K,"request",z)}}}h0.__initStatic();var aY=function($){c(()=>{console.error($)});const Y=_0();if(Y===void 0)U0&&M.warn("No NodeClient was defined, we are exiting the process now."),global.process.exit(1);const Z=Y.getOptions(),X=Z&&Z.shutdownTimeout&&Z.shutdownTimeout>0&&Z.shutdownTimeout||yJ;Y.close(X).then((Q)=>{if(!Q)U0&&M.warn("We reached the timeout for emptying the request buffer, still exiting now!");global.process.exit(1)},(Q)=>{U0&&M.error(Q)})},yJ=2000;class E0{static __initStatic(){this.id="OnUncaughtException"}__init(){this.name=E0.id}__init2(){this.handler=this._makeErrorHandler()}constructor($={}){E0.prototype.__init.call(this),E0.prototype.__init2.call(this),this._options={exitEvenIfOtherHandlersAreRegistered:!0,...$}}setupOnce(){global.process.on("uncaughtException",this.handler)}_makeErrorHandler(){let Y=!1,Z=!1,X=!1,Q;return(W)=>{let J=aY;const K=_0();if(this._options.onFatalError)J=this._options.onFatalError;else if(K&&K.getOptions().onFatalError)J=K.getOptions().onFatalError;const w=global.process.listeners("uncaughtException").reduce((V,N)=>{if(N.name==="domainUncaughtExceptionClear"||N.tag&&N.tag==="sentry_tracingErrorCallback"||N===this.handler)return V;else return V+1},0)===0,G=this._options.exitEvenIfOtherHandlersAreRegistered||w;if(!Y){const V=R();if(Q=W,Y=!0,V.getIntegration(E0))V.withScope((N)=>{if(N.setLevel("fatal"),V.captureException(W,{originalException:W,data:{mechanism:{handled:!1,type:"onuncaughtexception"}}}),!X&&G)X=!0,J(W)});else if(!X&&G)X=!0,J(W)}else if(G){if(X)U0&&M.warn("uncaught exception after calling fatal error shutdown callback - this is bad! forcing shutdown"),aY(W);else if(!Z)Z=!0,setTimeout(()=>{if(!X)X=!0,J(Q,W)},2000)}}}}E0.__initStatic();class v0{static __initStatic(){this.id="OnUnhandledRejection"}__init(){this.name=v0.id}constructor($={mode:"warn"}){this._options=$,v0.prototype.__init.call(this)}setupOnce(){global.process.on("unhandledRejection",this.sendUnhandledPromise.bind(this))}sendUnhandledPromise($,Y){const Z=R();if(Z.getIntegration(v0))Z.withScope((X)=>{X.setExtra("unhandledPromiseRejection",!0),Z.captureException($,{originalException:Y,data:{mechanism:{handled:!1,type:"onunhandledrejection"}}})});this._handleRejection($)}_handleRejection($){const Y="This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). The promise rejected with the reason:";if(this._options.mode==="warn")c(()=>{console.warn(Y),console.error($&&$.stack?$.stack:$)});else if(this._options.mode==="strict")c(()=>{console.warn(Y)}),aY($)}}v0.__initStatic();import{existsSync as xJ,readFileSync as bJ} from"fs";import{dirname as hJ,join as vJ} from"path";var gJ=function(){try{return require.cache?Object.keys(require.cache):[]}catch($){return[]}},mJ=function(){const $=require.main&&require.main.paths||[],Y=gJ(),Z={},X={};return Y.forEach((Q)=>{let W=Q;const J=()=>{const K=W;if(W=hJ(K),!W||K===W||X[K])return;if($.indexOf(W)<0)return J();const z=vJ(K,"package.json");if(X[K]=!0,!xJ(z))return J();try{const w=JSON.parse(bJ(z,"utf8"));Z[w.name]=w.version}catch(w){}};J()}),Z},bX;class g0{constructor(){g0.prototype.__init.call(this)}static __initStatic(){this.id="Modules"}__init(){this.name=g0.id}setupOnce($,Y){$((Z)=>{if(!Y().getIntegration(g0))return Z;return{...Z,modules:{...Z.modules,...this._getModules()}}})}_getModules(){if(!bX)bX=mJ();return bX}}g0.__initStatic();import{readFile as dJ} from"fs";var cJ=function($){return new Promise((Y,Z)=>{dJ($,"utf8",(X,Q)=>{if(X)Z(X);else Y(Q)})})};async function pJ($){const Y=$1.get($);if(Y===null)return null;if(Y!==void 0)return Y;let Z=null;try{Z=(await cJ($)).split("\n")}catch(X){}return $1.set($,Z),Z}var $1=new Y0(100),uJ=7;class m0{static __initStatic(){this.id="ContextLines"}__init(){this.name=m0.id}constructor($={}){this._options=$,m0.prototype.__init.call(this)}get _contextLines(){return this._options.frameContextLines!==void 0?this._options.frameContextLines:uJ}setupOnce($,Y){$((Z)=>{if(!Y().getIntegration(m0))return Z;return this.addSourceContext(Z)})}async addSourceContext($){const Y={},Z=[];if(this._contextLines>0&&L([$,"access",(X)=>X.exception,"optionalAccess",(X)=>X.values]))for(let X of $.exception.values){if(!L([X,"access",(Q)=>Q.stacktrace,"optionalAccess",(Q)=>Q.frames]))continue;for(let Q=X.stacktrace.frames.length-1;Q>=0;Q--){const W=X.stacktrace.frames[Q];if(W.filename&&!Y[W.filename]&&!$1.get(W.filename))Z.push(pJ(W.filename)),Y[W.filename]=1}}if(Z.length>0)await Promise.all(Z);if(this._contextLines>0&&L([$,"access",(X)=>X.exception,"optionalAccess",(X)=>X.values])){for(let X of $.exception.values)if(X.stacktrace&&X.stacktrace.frames)await this.addSourceContextToFrames(X.stacktrace.frames)}return $}addSourceContextToFrames($){for(let Y of $)if(Y.filename&&Y.context_line===void 0){const Z=$1.get(Y.filename);if(Z)try{i1(Z,Y,this._contextLines)}catch(X){}}}}m0.__initStatic();import{execFile as lJ} from"child_process";import{readFile as iJ,readdir as aJ} from"fs";import*as h from"os";import{join as sJ} from"path";import{promisify as V8} from"util";async function nJ(){const $=h.platform();switch($){case"darwin":return QK();case"linux":return WK();default:return{name:YK[$]||$,version:h.release()}}}var tJ=function(){try{if(typeof process.versions.icu!=="string")return;const $=new Date(900000000);if(new Intl.DateTimeFormat("es",{month:"long"}).format($)==="enero"){const Z=Intl.DateTimeFormat().resolvedOptions();return{locale:Z.locale,timezone:Z.timeZone}}}catch($){}return},eJ=function(){const $=process.memoryUsage().rss;return{app_start_time:new Date(Date.now()-process.uptime()*1000).toISOString(),app_memory:$}},$K=function($){const Y={};let Z;try{Z=h.uptime&&h.uptime()}catch(X){}if(typeof Z==="number")Y.boot_time=new Date(Date.now()-Z*1000).toISOString();if(Y.arch=h.arch(),$===!0||$.memory)Y.memory_size=h.totalmem(),Y.free_memory=h.freemem();if($===!0||$.cpu){const X=h.cpus();if(X&&X.length){const Q=X[0];Y.processor_count=X.length,Y.cpu_description=Q.model,Y.processor_frequency=Q.speed}}return Y},T0=function($,Y){const Z=$.exec(Y);return Z?Z[1]:void 0};async function QK(){const $={kernel_version:h.release(),name:"Mac OS X",version:`10.${Number(h.release().split(".")[0])-4}`};try{const Y=await new Promise((Z,X)=>{lJ("/usr/bin/sw_vers",(Q,W)=>{if(Q){X(Q);return}Z(W)})});$.name=T0(/^ProductName:\s+(.*)$/m,Y),$.version=T0(/^ProductVersion:\s+(.*)$/m,Y),$.build=T0(/^BuildVersion:\s+(.*)$/m,Y)}catch(Y){}return $}var z8=function($){return $.split(" ")[0].toLowerCase()};async function WK(){const $={kernel_version:h.release(),name:"Linux"};try{const Y=await oJ("/etc"),Z=ZK.find((K)=>Y.includes(K.name));if(!Z)return $;const X=sJ("/etc",Z.name),Q=(await rJ(X,{encoding:"utf-8"})).toLowerCase(),{distros:W}=Z;$.name=W.find((K)=>Q.indexOf(z8(K))>=0)||W[0];const J=z8($.name);$.version=XK[J](Q)}catch(Y){}return $}var JK=function(){if(process.env.VERCEL)return{"cloud.provider":"vercel","cloud.region":process.env.VERCEL_REGION};else if(process.env.AWS_REGION)return{"cloud.provider":"aws","cloud.region":process.env.AWS_REGION,"cloud.platform":process.env.AWS_EXECUTION_ENV};else if(process.env.GCP_PROJECT)return{"cloud.provider":"gcp"};else if(process.env.ALIYUN_REGION_ID)return{"cloud.provider":"alibaba_cloud","cloud.region":process.env.ALIYUN_REGION_ID};else if(process.env.WEBSITE_SITE_NAME&&process.env.REGION_NAME)return{"cloud.provider":"azure","cloud.region":process.env.REGION_NAME};else if(process.env.IBM_CLOUD_REGION)return{"cloud.provider":"ibm_cloud","cloud.region":process.env.IBM_CLOUD_REGION};else if(process.env.TENCENTCLOUD_REGION)return{"cloud.provider":"tencent_cloud","cloud.region":process.env.TENCENTCLOUD_REGION,"cloud.account.id":process.env.TENCENTCLOUD_APPID,"cloud.availability_zone":process.env.TENCENTCLOUD_ZONE};else if(process.env.NETLIFY)return{"cloud.provider":"netlify"};else if(process.env.FLY_REGION)return{"cloud.provider":"fly.io","cloud.region":process.env.FLY_REGION};else if(process.env.DYNO)return{"cloud.provider":"heroku"};else return},rJ=V8(iJ),oJ=V8(aJ);class R${static __initStatic(){this.id="Context"}__init(){this.name=R$.id}constructor($={app:!0,os:!0,device:!0,culture:!0,cloudResource:!0}){this._options=$,R$.prototype.__init.call(this)}setupOnce($){$((Y)=>this.addContext(Y))}async addContext($){if(this._cachedContext===void 0)this._cachedContext=this._getContexts();const Y=this._updateContext(await this._cachedContext);return $.contexts={...$.contexts,app:{...Y.app,...L([$,"access",(Z)=>Z.contexts,"optionalAccess",(Z)=>Z.app])},os:{...Y.os,...L([$,"access",(Z)=>Z.contexts,"optionalAccess",(Z)=>Z.os])},device:{...Y.device,...L([$,"access",(Z)=>Z.contexts,"optionalAccess",(Z)=>Z.device])},culture:{...Y.culture,...L([$,"access",(Z)=>Z.contexts,"optionalAccess",(Z)=>Z.culture])},cloud_resource:{...Y.cloud_resource,...L([$,"access",(Z)=>Z.contexts,"optionalAccess",(Z)=>Z.cloud_resource])}},$}_updateContext($){if(L([$,"optionalAccess",(Y)=>Y.app,"optionalAccess",(Y)=>Y.app_memory]))$.app.app_memory=process.memoryUsage().rss;if(L([$,"optionalAccess",(Y)=>Y.device,"optionalAccess",(Y)=>Y.free_memory]))$.device.free_memory=h.freemem();return $}async _getContexts(){const $={};if(this._options.os)$.os=await nJ();if(this._options.app)$.app=eJ();if(this._options.device)$.device=$K(this._options.device);if(this._options.culture){const Y=tJ();if(Y)$.culture=Y}if(this._options.cloudResource)$.cloud_resource=JK();return $}}R$.__initStatic();var YK={aix:"IBM AIX",freebsd:"FreeBSD",openbsd:"OpenBSD",sunos:"SunOS",win32:"Windows"},ZK=[{name:"fedora-release",distros:["Fedora"]},{name:"redhat-release",distros:["Red Hat Linux","Centos"]},{name:"redhat_version",distros:["Red Hat Linux"]},{name:"SuSE-release",distros:["SUSE Linux"]},{name:"lsb-release",distros:["Ubuntu Linux","Arch Linux"]},{name:"debian_version",distros:["Debian"]},{name:"debian_release",distros:["Debian"]},{name:"arch-release",distros:["Arch Linux"]},{name:"gentoo-release",distros:["Gentoo Linux"]},{name:"novell-release",distros:["SUSE Linux"]},{name:"alpine-release",distros:["Alpine Linux"]}],XK={alpine:($)=>$,arch:($)=>T0(/distrib_release=(.*)/,$),centos:($)=>T0(/release ([^ ]+)/,$),debian:($)=>$,fedora:($)=>T0(/release (..)/,$),mint:($)=>T0(/distrib_release=(.*)/,$),red:($)=>T0(/release ([^ ]+)/,$),suse:($)=>T0(/VERSION = (.*)\n/,$),ubuntu:($)=>T0(/distrib_release=(.*)/,$)};var KK=function($,Y,Z){let X=0,Q=5,W=0;return setInterval(()=>{if(W===0){if(X>$){if(Q*=2,Z(Q),Q>86400)Q=86400;W=Q}}else if(W-=1,W===0)Y();X=0},1000).unref(),()=>{X+=1}},w8=function($){let Y=[],Z=!1;function X(J){if(Y=[],Z)return;Z=!0,$(J)}Y.push(X);function Q(J){Y.push(J)}function W(J){const K=Y.pop()||X;try{K(J)}catch(z){X(J)}}return{add:Q,next:W}},zK=function(){try{return new N8}catch($){return}},G8=function($){return $!==void 0&&["","?","<anonymous>"].includes($)},VK=function($,Y){return $===Y||G8($)&&G8(Y)},M8=function($){if($===void 0)return;return $.slice(-10).reduce((Y,Z)=>`${Y},${Z.function},${Z.lineno},${Z.colno}`,"")},GK=function($,Y){if(Y===void 0)return;return M8($(Y,1))};class N8{constructor(){const{Session:$}=import.meta.require("inspector");this._session=new $}configureAndConnect($,Y){this._session.connect(),this._session.on("Debugger.paused",(Z)=>{$(Z,()=>{this._session.post("Debugger.resume")})}),this._session.post("Debugger.enable"),this._session.post("Debugger.setPauseOnExceptions",{state:Y?"all":"uncaught"})}setPauseOnExceptions($){this._session.post("Debugger.setPauseOnExceptions",{state:$?"all":"uncaught"})}getLocalVariables($,Y){this._getProperties($,(Z)=>{const{add:X,next:Q}=w8(Y);for(let W of Z)if(L([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.objectId])&&L([W,"optionalAccess",(J)=>J.value,"access",(J)=>J.className])==="Array"){const J=W.value.objectId;X((K)=>this._unrollArray(J,W.name,K,Q))}else if(L([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.objectId])&&L([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.className])==="Object"){const J=W.value.objectId;X((K)=>this._unrollObject(J,W.name,K,Q))}else if(L([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.value])||L([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.description]))X((J)=>this._unrollOther(W,J,Q));Q({})})}_getProperties($,Y){this._session.post("Runtime.getProperties",{objectId:$,ownProperties:!0},(Z,X)=>{if(Z)Y([]);else Y(X.result)})}_unrollArray($,Y,Z,X){this._getProperties($,(Q)=>{Z[Y]=Q.filter((W)=>W.name!=="length"&&!isNaN(parseInt(W.name,10))).sort((W,J)=>parseInt(W.name,10)-parseInt(J.name,10)).map((W)=>L([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.value])),X(Z)})}_unrollObject($,Y,Z,X){this._getProperties($,(Q)=>{Z[Y]=Q.map((W)=>[W.name,L([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.value])]).reduce((W,[J,K])=>{return W[J]=K,W},{}),X(Z)})}_unrollOther($,Y,Z){if(L([$,"optionalAccess",(X)=>X.value,"optionalAccess",(X)=>X.value]))Y[$.name]=$.value.value;else if(L([$,"optionalAccess",(X)=>X.value,"optionalAccess",(X)=>X.description])&&L([$,"optionalAccess",(X)=>X.value,"optionalAccess",(X)=>X.type])!=="function")Y[$.name]=`<${$.value.description}>`;Z(Y)}}class d0{static __initStatic(){this.id="LocalVariables"}__init(){this.name=d0.id}__init2(){this._cachedFrames=new Y0(20)}constructor($={},Y=zK()){this._options=$,this._session=Y,d0.prototype.__init.call(this),d0.prototype.__init2.call(this)}setupOnce($,Y){this._setup($,L([Y,"call",(Z)=>Z(),"access",(Z)=>Z.getClient,"call",(Z)=>Z(),"optionalAccess",(Z)=>Z.getOptions,"call",(Z)=>Z()]))}_setup($,Y){if(this._session&&L([Y,"optionalAccess",(Z)=>Z.includeLocalVariables])){if((s.major||0)<18){M.log("The `LocalVariables` integration is only supported on Node >= v18.");return}const X=this._options.captureAllExceptions!==!1;if(this._session.configureAndConnect((Q,W)=>this._handlePaused(Y.stackParser,Q,W),X),X){const Q=this._options.maxExceptionsPerSecond||50;this._rateLimiter=KK(Q,()=>{M.log("Local variables rate-limit lifted."),L([this,"access",(W)=>W._session,"optionalAccess",(W)=>W.setPauseOnExceptions,"call",(W)=>W(!0)])},(W)=>{M.log(`Local variables rate-limit exceeded. Disabling capturing of caught exceptions for ${W} seconds.`),L([this,"access",(J)=>J._session,"optionalAccess",(J)=>J.setPauseOnExceptions,"call",(J)=>J(!1)])})}$(async(Q)=>this._addLocalVariables(Q))}}_handlePaused($,{params:{reason:Y,data:Z,callFrames:X}},Q){if(Y!=="exception"&&Y!=="promiseRejection"){Q();return}L([this,"access",(z)=>z._rateLimiter,"optionalCall",(z)=>z()]);const W=GK($,L([Z,"optionalAccess",(z)=>z.description]));if(W==void 0){Q();return}const{add:J,next:K}=w8((z)=>{this._cachedFrames.set(W,z),Q()});for(let z=0;z<Math.min(X.length,5);z++){const{scopeChain:w,functionName:G,this:V}=X[z],N=w.find((H)=>H.type==="local"),F=V.className==="global"||!V.className?G:`${V.className}.${G}`;if(L([N,"optionalAccess",(H)=>H.object,"access",(H)=>H.objectId])===void 0)J((H)=>{H[z]={function:F},K(H)});else{const H=N.object.objectId;J((B)=>L([this,"access",(T)=>T._session,"optionalAccess",(T)=>T.getLocalVariables,"call",(T)=>T(H,(A)=>{B[z]={function:F,vars:A},K(B)})]))}}K([])}_addLocalVariables($){for(let Y of L([$,"optionalAccess",(Z)=>Z.exception,"optionalAccess",(Z)=>Z.values])||[])this._addLocalVariablesToException(Y);return $}_addLocalVariablesToException($){const Y=M8(L([$,"optionalAccess",(Q)=>Q.stacktrace,"optionalAccess",(Q)=>Q.frames]));if(Y===void 0)return;const Z=this._cachedFrames.remove(Y);if(Z===void 0)return;const X=L([$,"access",(Q)=>Q.stacktrace,"optionalAccess",(Q)=>Q.frames,"optionalAccess",(Q)=>Q.length])||0;for(let Q=0;Q<X;Q++){const W=X-Q-1;if(!L([$,"optionalAccess",(J)=>J.stacktrace,"optionalAccess",(J)=>J.frames,"optionalAccess",(J)=>J[W]])||!Z[Q])break;if(Z[Q].vars===void 0||$.stacktrace.frames[W].in_app===!1||!VK($.stacktrace.frames[W].function,Z[Q].function))continue;$.stacktrace.frames[W].vars=Z[Q].vars}}}d0.__initStatic();var L8=function($,Y,Z){if($.headers.split("\r\n").some((W)=>W.startsWith("sentry-trace:")))return;if($.addHeader("sentry-trace",Y),Z)$.addHeader("baggage",Z)},wK=function($,Y,Z){const X=kY(Z),Q=Y.method||"GET",W={"http.method":Q};if(X.search)W["http.query"]=X.search;if(X.hash)W["http.fragment"]=X.hash;return L([$,"optionalAccess",(J)=>J.startChild,"call",(J)=>J({op:"http.client",origin:"auto.http.node.undici",description:`${Q} ${SY(X)}`,data:W})])},sY;(function($){$.RequestCreate="undici:request:create";const Z="undici:request:headers";$.RequestEnd=Z;const X="undici:request:error";$.RequestError=X})(sY||(sY={}));class l{static __initStatic(){this.id="Undici"}__init(){this.name=l.id}__init2(){this._createSpanUrlMap=new Y0(100)}__init3(){this._headersUrlMap=new Y0(100)}constructor($={}){l.prototype.__init.call(this),l.prototype.__init2.call(this),l.prototype.__init3.call(this),l.prototype.__init4.call(this),l.prototype.__init5.call(this),l.prototype.__init6.call(this),this._options={breadcrumbs:$.breadcrumbs===void 0?!0:$.breadcrumbs,shouldCreateSpanForRequest:$.shouldCreateSpanForRequest}}setupOnce($){if(s.major&&s.major<16)return;let Y;try{Y=f0(NK,"diagnostics_channel")}catch(Z){}if(!Y||!Y.subscribe)return;Y.subscribe(sY.RequestCreate,this._onRequestCreate),Y.subscribe(sY.RequestEnd,this._onRequestEnd),Y.subscribe(sY.RequestError,this._onRequestError)}_shouldCreateSpan($){if(this._options.shouldCreateSpanForRequest===void 0)return!0;const Y=this._createSpanUrlMap.get($);if(Y!==void 0)return Y;const Z=this._options.shouldCreateSpanForRequest($);return this._createSpanUrlMap.set($,Z),Z}__init4(){this._onRequestCreate=($)=>{const Y=R();if(!Y.getIntegration(l))return;const{request:Z}=$,X=Z.origin?Z.origin.toString()+Z.path:Z.path;if(j$(X,Y)||Z.__sentry_span__!==void 0)return;const Q=Y.getClient();if(!Q)return;const W=Q.getOptions(),J=Y.getScope(),K=J.getSpan(),z=this._shouldCreateSpan(X)?wK(K,Z,X):void 0;if(z)Z.__sentry_span__=z;if(((G)=>{if(W.tracePropagationTargets===void 0)return!0;const V=this._headersUrlMap.get(G);if(V!==void 0)return V;const N=B0(G,W.tracePropagationTargets);return this._headersUrlMap.set(G,N),N})(X))if(z){const G=L([z,"optionalAccess",(N)=>N.transaction,"optionalAccess",(N)=>N.getDynamicSamplingContext,"call",(N)=>N()]),V=e$(G);L8(Z,z.toTraceparent(),V)}else{const{traceId:G,sampled:V,dsc:N}=J.getPropagationContext(),F=H$(G,void 0,V),H=N||z0(G,Q,J),B=e$(H);L8(Z,F,B)}}}__init5(){this._onRequestEnd=($)=>{const Y=R();if(!Y.getIntegration(l))return;const{request:Z,response:X}=$,Q=Z.origin?Z.origin.toString()+Z.path:Z.path;if(j$(Q,Y))return;const W=Z.__sentry_span__;if(W)W.setHttpStatus(X.statusCode),W.finish();if(this._options.breadcrumbs)Y.addBreadcrumb({category:"http",data:{method:Z.method,status_code:X.statusCode,url:Q},type:"http"},{event:"response",request:Z,response:X})}}__init6(){this._onRequestError=($)=>{const Y=R();if(!Y.getIntegration(l))return;const{request:Z}=$,X=Z.origin?Z.origin.toString()+Z.path:Z.path;if(j$(X,Y))return;const Q=Z.__sentry_span__;if(Q)Q.setStatus("internal_error"),Q.finish();if(this._options.breadcrumbs)Y.addBreadcrumb({category:"http",data:{method:Z.method,url:X},level:"error",type:"http"},{event:"error",request:Z})}}}l.__initStatic();import*as F8 from"http";import{URL as MK} from"url";var LK=function($,Y){const Z=FK(Y.sidecarUrl);if(!Z)return;let X=0;if(typeof $.on!=="function"){M.warn("[Spotlight] Cannot connect to spotlight due to missing method on SDK client (`client.on`)");return}$.on("beforeEnvelope",(Q)=>{if(X>3){M.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests");return}const W=CY(Q),J=F8.request({method:"POST",path:Z.pathname,hostname:Z.hostname,port:Z.port,headers:{"Content-Type":"application/x-sentry-envelope"}},(K)=>{K.on("data",()=>{}),K.on("end",()=>{}),K.setEncoding("utf8")});J.on("error",()=>{X++,M.warn("[Spotlight] Failed to send envelope to Spotlight Sidecar")}),J.write(W),J.end()})},FK=function($){try{return new MK(`${$}`)}catch(Y){M.warn(`[Spotlight] Invalid sidecar URL: ${$}`);return}};class D${static __initStatic(){this.id="Spotlight"}__init(){this.name=D$.id}constructor($){D$.prototype.__init.call(this),this._options={sidecarUrl:L([$,"optionalAccess",(Y)=>Y.sidecarUrl])||"http://localhost:8969/stream"}}setupOnce(){}setup($){LK($,this._options)}}D$.__initStatic();var hX=function($={}){if(rW())$.autoSessionTracking=!1,$.tracesSampleRate=0;const Y=K0();$8();const Z=L([Y,"access",(W)=>W.__SENTRY__,"optionalAccess",(W)=>W.integrations])||[];if($.defaultIntegrations=$.defaultIntegrations===!1?[]:[...Array.isArray($.defaultIntegrations)?$.defaultIntegrations:H8,...Z],$.dsn===void 0&&process.env.SENTRY_DSN)$.dsn=process.env.SENTRY_DSN;const X=process.env.SENTRY_TRACES_SAMPLE_RATE;if($.tracesSampleRate===void 0&&X){const W=parseFloat(X);if(isFinite(W))$.tracesSampleRate=W}if($.release===void 0){const W=B8();if(W!==void 0)$.release=W;else $.autoSessionTracking=!1}if($.environment===void 0&&process.env.SENTRY_ENVIRONMENT)$.environment=process.env.SENTRY_ENVIRONMENT;if($.autoSessionTracking===void 0&&$.dsn!==void 0)$.autoSessionTracking=!0;if($.instrumenter===void 0)$.instrumenter="sentry";const Q={...$,stackParser:d1($.stackParser||j8),integrations:TX($),transport:$.transport||aW};if(PX($.clientClass||AX,Q),$.autoSessionTracking)HK();if(BK(),$.spotlight){const W=R().getClient();if(W&&W.addIntegration)W.setupIntegrations(!0),W.addIntegration(new D$({sidecarUrl:typeof $.spotlight==="string"?$.spotlight:void 0}))}};var B8=function($){if(process.env.SENTRY_RELEASE)return process.env.SENTRY_RELEASE;if(O.SENTRY_RELEASE&&O.SENTRY_RELEASE.id)return O.SENTRY_RELEASE.id;return process.env.GITHUB_SHA||process.env.COMMIT_REF||process.env.VERCEL_GIT_COMMIT_SHA||process.env.VERCEL_GITHUB_COMMIT_SHA||process.env.VERCEL_GITLAB_COMMIT_SHA||process.env.VERCEL_BITBUCKET_COMMIT_SHA||process.env.ZEIT_GITHUB_COMMIT_SHA||process.env.ZEIT_GITLAB_COMMIT_SHA||process.env.ZEIT_BITBUCKET_COMMIT_SHA||$},HK=function(){const $=R();$.startSession(),process.on("beforeExit",()=>{const Y=$.getScope().getSession();if(Y&&!["exited","crashed"].includes(Y.status))$.endSession()})},BK=function(){const $=(process.env.SENTRY_USE_ENVIRONMENT||"").toLowerCase();if(!["false","n","no","off","0"].includes($)){const Y=process.env.SENTRY_TRACE,Z=process.env.SENTRY_BAGGAGE,{propagationContext:X}=fY(Y,Z);R().getScope().setPropagationContext(X)}},H8=[new i.InboundFilters,new i.FunctionToString,new i.LinkedErrors,new b0,new h0,new l,new E0,new v0,new m0,new d0,new R$,new g0,new x0],j8=PZ(u1(sW));var vX={};rY(vX,{Undici:()=>{{return l}},Spotlight:()=>{{return D$}},RequestData:()=>{{return x0}},OnUnhandledRejection:()=>{{return v0}},OnUncaughtException:()=>{{return E0}},Modules:()=>{{return g0}},LocalVariables:()=>{{return d0}},Http:()=>{{return h0}},ContextLines:()=>{{return m0}},Context:()=>{{return R$}},Console:()=>{{return b0}}});var gX={};rY(gX,{Prisma:()=>{{return mY}},Postgres:()=>{{return hY}},Mysql:()=>{{return vY}},Mongo:()=>{{return gY}},GraphQL:()=>{{return dY}},Express:()=>{{return bY}},Apollo:()=>{{return uY}}});var R0={...i,...vX,...gX};import*as U8 from"os";class mX extends KY{constructor($){$._metadata=$._metadata||{},$._metadata.sdk=$._metadata.sdk||{name:"sentry.javascript.bun",packages:[{name:"npm:@sentry/bun",version:y0}],version:y0};const Y={...$,platform:"javascript",runtime:{name:"bun",version:Bun.version},serverName:$.serverName||global.process.env.SENTRY_NAME||U8.hostname()};super(Y)}}var jK=function(){Bun.serve=new Proxy(Bun.serve,{apply($,Y,Z){return UK(Z[0]),$.apply(Y,Z)}})},UK=function($){$.fetch=new Proxy($.fetch,{apply(Y,Z,X){return xZ(()=>{const Q=X[0],W=Q.method.toUpperCase();if(W==="OPTIONS"||W==="HEAD")return Y.apply(Z,X);const J=kY(Q.url),K={"http.request.method":Q.method||"GET"};if(J.search)K["http.query"]=J.search;const z=SY(J);return mZ({sentryTrace:Q.headers.get("sentry-trace")||"",baggage:Q.headers.get("baggage")},(w)=>{return gZ({op:"http.server",name:`${Q.method} ${J.path||"/"}`,origin:"auto.http.bun.serve",...w,data:K,metadata:{...w.metadata,source:"url",request:{url:z,method:Q.method,headers:Q.headers.toJSON()}}},async(G)=>{try{const V=await Y.apply(Z,X);if(V&&V.status){if(L([G,"optionalAccess",(N)=>N.setHttpStatus,"call",(N)=>N(V.status)]),L([G,"optionalAccess",(N)=>N.setData,"call",(N)=>N("http.response.status_code",V.status)]),G instanceof WY)G.setContext("response",{headers:V.headers.toJSON(),status_code:V.status})}return V}catch(V){throw JY(V,{mechanism:{type:"bun",handled:!1,data:{function:"serve"}}}),V}})})})}})};class P${constructor(){P$.prototype.__init.call(this)}static __initStatic(){this.id="BunServer"}__init(){this.name=P$.id}setupOnce(){jK()}}P$.__initStatic();var T8=function($){function Y(Z){const X={body:Z.body,method:"POST",headers:$.headers};try{return fetch($.url,X).then((Q)=>{return{statusCode:Q.status,headers:{"x-sentry-rate-limits":Q.headers.get("X-Sentry-Rate-Limits"),"retry-after":Q.headers.get("Retry-After")}}})}catch(Q){return w$(Q)}}return B$($,Y)};var TK=function($={}){$.clientClass=mX,$.transport=$.transport||T8,$.defaultIntegrations=$.defaultIntegrations===!1?[]:[...Array.isArray($.defaultIntegrations)?$.defaultIntegrations:R8],hX($)},R8=[new i.InboundFilters,new i.FunctionToString,new i.LinkedErrors,new R0.Console,new R0.Http,new R0.Undici,new R0.ContextLines,new R0.Context,new R0.Modules,new R0.RequestData,new P$];var dX={};rY(dX,{BunServer:()=>{{return P$}}});var lM={...i,...R0,...dX};var DK=function($){return"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"};async function OK($){return await PK.beta.assistants.create({instructions:"You're Emma, bilingual English Coach at E4CC. Always keep responses really short, focus on teaching English to Spanish speakers. Stay friendly and encouraging, avoid off-topic discussions.",name:"Emma, bilingual English Coach at E4CC",model:"gpt-3.5-turbo"})}console.log("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");var PK=new HQ({apiKey:"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"});async function AK($){try{const Y=DK($),Z=await OK(Y);return console.log(Z),Z}catch(Y){throw JY(Y),console.error(Y),Y}}export{AK as default};

//# debugId=BE6197500485272D64756e2164756e21
