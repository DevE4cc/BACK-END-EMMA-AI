// @bun
var m1=Object.create;var{defineProperty:LZ,getPrototypeOf:g1,getOwnPropertyNames:d1}=Object;var u1=Object.prototype.hasOwnProperty;var p1=(Y,Z,$)=>{$=Y!=null?m1(g1(Y)):{};const Q=Z||!Y||!Y.__esModule?LZ($,"default",{value:Y,enumerable:!0}):$;for(let X of d1(Y))if(!u1.call(Q,X))LZ(Q,X,{get:()=>Y[X],enumerable:!0});return Q};var t=(Y,Z)=>()=>(Z||Y((Z={exports:{}}).exports,Z),Z.exports);var i=(Y)=>{return import.meta.require(Y)};var _Y=(Y,Z)=>{for(var $ in Z)LZ(Y,$,{get:Z[$],enumerable:!0,configurable:!0,set:(Q)=>Z[$]=()=>Q})};var gQ=t((mz,mQ)=>{var iW=function(Y){if(Y=String(Y),Y.length>100)return;var Z=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(Y);if(!Z)return;var $=parseFloat(Z[1]),Q=(Z[2]||"ms").toLowerCase();switch(Q){case"years":case"year":case"yrs":case"yr":case"y":return $*lW;case"weeks":case"week":case"w":return $*cW;case"days":case"day":case"d":return $*y0;case"hours":case"hour":case"hrs":case"hr":case"h":return $*ZY;case"minutes":case"minute":case"mins":case"min":case"m":return $*YY;case"seconds":case"second":case"secs":case"sec":case"s":return $*e0;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return $;default:return}},aW=function(Y){var Z=Math.abs(Y);if(Z>=y0)return Math.round(Y/y0)+"d";if(Z>=ZY)return Math.round(Y/ZY)+"h";if(Z>=YY)return Math.round(Y/YY)+"m";if(Z>=e0)return Math.round(Y/e0)+"s";return Y+"ms"},sW=function(Y){var Z=Math.abs(Y);if(Z>=y0)return zZ(Y,Z,y0,"day");if(Z>=ZY)return zZ(Y,Z,ZY,"hour");if(Z>=YY)return zZ(Y,Z,YY,"minute");if(Z>=e0)return zZ(Y,Z,e0,"second");return Y+" ms"},zZ=function(Y,Z,$,Q){var X=Z>=$*1.5;return Math.round(Y/$)+" "+Q+(X?"s":"")},e0=1000,YY=e0*60,ZY=YY*60,y0=ZY*24,cW=y0*7,lW=y0*365.25;mQ.exports=function(Y,Z){Z=Z||{};var $=typeof Y;if($==="string"&&Y.length>0)return iW(Y);else if($==="number"&&isFinite(Y))return Z.long?sW(Y):aW(Y);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(Y))}});var j$=t((gz,dQ)=>{var oW=function(Y){$.debug=$,$.default=$,$.coerce=z,$.disable=W,$.enable=X,$.enabled=J,$.humanize=gQ(),$.destroy=N,Object.keys(Y).forEach((V)=>{$[V]=Y[V]}),$.names=[],$.skips=[],$.formatters={};function Z(V){let G=0;for(let M=0;M<V.length;M++)G=(G<<5)-G+V.charCodeAt(M),G|=0;return $.colors[Math.abs(G)%$.colors.length]}$.selectColor=Z;function $(V){let G,M=null,R,j;function H(...T){if(!H.enabled)return;const E=H,o=Number(new Date),r=o-(G||o);if(E.diff=r,E.prev=G,E.curr=o,G=o,T[0]=$.coerce(T[0]),typeof T[0]!=="string")T.unshift("%O");let d=0;T[0]=T[0].replace(/%([a-zA-Z%])/g,(I,K0)=>{if(I==="%%")return"%";d++;const n=$.formatters[K0];if(typeof n==="function"){const HZ=T[d];I=n.call(E,HZ),T.splice(d,1),d--}return I}),$.formatArgs.call(E,T),(E.log||$.log).apply(E,T)}if(H.namespace=V,H.useColors=$.useColors(),H.color=$.selectColor(V),H.extend=Q,H.destroy=$.destroy,Object.defineProperty(H,"enabled",{enumerable:!0,configurable:!1,get:()=>{if(M!==null)return M;if(R!==$.namespaces)R=$.namespaces,j=$.enabled(V);return j},set:(T)=>{M=T}}),typeof $.init==="function")$.init(H);return H}function Q(V,G){const M=$(this.namespace+(typeof G==="undefined"?":":G)+V);return M.log=this.log,M}function X(V){$.save(V),$.namespaces=V,$.names=[],$.skips=[];let G;const M=(typeof V==="string"?V:"").split(/[\s,]+/),R=M.length;for(G=0;G<R;G++){if(!M[G])continue;if(V=M[G].replace(/\*/g,".*?"),V[0]==="-")$.skips.push(new RegExp("^"+V.slice(1)+"$"));else $.names.push(new RegExp("^"+V+"$"))}}function W(){const V=[...$.names.map(K),...$.skips.map(K).map((G)=>"-"+G)].join(",");return $.enable(""),V}function J(V){if(V[V.length-1]==="*")return!0;let G,M;for(G=0,M=$.skips.length;G<M;G++)if($.skips[G].test(V))return!1;for(G=0,M=$.names.length;G<M;G++)if($.names[G].test(V))return!0;return!1}function K(V){return V.toString().substring(2,V.toString().length-2).replace(/\.\*\?$/,"*")}function z(V){if(V instanceof Error)return V.stack||V.message;return V}function N(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return $.enable($.load()),$};dQ.exports=oW});var pQ=t((uQ,GZ)=>{var rW=function(){if(typeof window!=="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},nW=function(Y){if(Y[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+Y[0]+(this.useColors?"%c ":" ")+"+"+uQ.humanize(this.diff),!this.useColors)return;const Z="color: "+this.color;Y.splice(1,0,Z,"color: inherit");let $=0,Q=0;Y[0].replace(/%[a-zA-Z%]/g,(X)=>{if(X==="%%")return;if($++,X==="%c")Q=$}),Y.splice(Q,0,Z)},tW=function(Y){try{if(Y)uQ.storage.setItem("debug",Y);else uQ.storage.removeItem("debug")}catch(Z){}},eW=function(){let Y;try{Y=uQ.storage.getItem("debug")}catch(Z){}if(!Y&&typeof process!=="undefined"&&("env"in process))Y=process.env.DEBUG;return Y},YJ=function(){try{return localStorage}catch(Y){}};uQ.formatArgs=nW;uQ.save=tW;uQ.load=eW;uQ.useColors=rW;uQ.storage=YJ();uQ.destroy=(()=>{let Y=!1;return()=>{if(!Y)Y=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}})();uQ.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];uQ.log=console.debug||console.log||(()=>{});GZ.exports=j$()(uQ);var{formatters:ZJ}=GZ.exports;ZJ.j=function(Y){try{return JSON.stringify(Y)}catch(Z){return"[UnexpectedJSONParseError]: "+Z.message}}});var aQ=t((lQ,MZ)=>{var GJ=function(){return"colors"in lQ.inspectOpts?Boolean(lQ.inspectOpts.colors):VJ.isatty(process.stderr.fd)},NJ=function(Y){const{namespace:Z,useColors:$}=this;if($){const Q=this.color,X="\x1B[3"+(Q<8?Q:"8;5;"+Q),W=`  ${X};1m${Z} \x1B[0m`;Y[0]=W+Y[0].split("\n").join("\n"+W),Y.push(X+"m+"+lQ.humanize(this.diff)+"\x1B[0m")}else Y[0]=MJ()+Z+" "+Y[0]},MJ=function(){if(lQ.inspectOpts.hideDate)return"";return(new Date()).toISOString()+" "},wJ=function(...Y){return process.stderr.write(NZ.format(...Y)+"\n")},FJ=function(Y){if(Y)process.env.DEBUG=Y;else delete process.env.DEBUG},RJ=function(){return process.env.DEBUG},jJ=function(Y){Y.inspectOpts={};const Z=Object.keys(lQ.inspectOpts);for(let $=0;$<Z.length;$++)Y.inspectOpts[Z[$]]=lQ.inspectOpts[Z[$]]},VJ=import.meta.require("tty"),NZ=import.meta.require("util");lQ.init=jJ;lQ.log=wJ;lQ.formatArgs=NJ;lQ.save=FJ;lQ.load=RJ;lQ.useColors=GJ;lQ.destroy=NZ.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");lQ.colors=[6,2,3,4,5,1];try{const Y=(()=>{ throw new Error(`Cannot require module "supports-color"`);})();if(Y&&(Y.stderr||Y).level>=2)lQ.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}catch(Y){}lQ.inspectOpts=Object.keys(process.env).filter((Y)=>{return/^debug_/i.test(Y)}).reduce((Y,Z)=>{const $=Z.substring(6).toLowerCase().replace(/_([a-z])/g,(X,W)=>{return W.toUpperCase()});let Q=process.env[Z];if(/^(yes|on|true|enabled)$/i.test(Q))Q=!0;else if(/^(no|off|false|disabled)$/i.test(Q))Q=!1;else if(Q==="null")Q=null;else Q=Number(Q);return Y[$]=Q,Y},{});MZ.exports=j$()(lQ);var{formatters:cQ}=MZ.exports;cQ.o=function(Y){return this.inspectOpts.colors=this.useColors,NZ.inspect(Y,this.inspectOpts).split("\n").map((Z)=>Z.trim()).join(" ")};cQ.O=function(Y){return this.inspectOpts.colors=this.useColors,NZ.inspect(Y,this.inspectOpts)}});var wZ=t((pz,P$)=>{if(typeof process==="undefined"||process.type==="renderer"||!1||process.__nwjs)P$.exports=pQ();else P$.exports=aQ()});var oQ=t((sQ)=>{var DJ=function(Y){return function(Z,$){return new Promise((Q,X)=>{Y.call(this,Z,$,(W,J)=>{if(W)X(W);else Q(J)})})}};Object.defineProperty(sQ,"__esModule",{value:!0});sQ.default=DJ});var tQ=t((L$,nQ)=>{var kJ=function(Y){return Boolean(Y)&&typeof Y.addRequest==="function"},H$=function(){const{stack:Y}=new Error;if(typeof Y!=="string")return!1;return Y.split("\n").some((Z)=>Z.indexOf("(https.js:")!==-1||Z.indexOf("node:https:")!==-1)},FZ=function(Y,Z){return new FZ.Agent(Y,Z)},rQ=L$&&L$.__importDefault||function(Y){return Y&&Y.__esModule?Y:{default:Y}},IJ=import.meta.require("events"),qJ=rQ(wZ()),EJ=rQ(oQ()),EY=qJ.default("agent-base");(function(Y){class Z extends IJ.EventEmitter{constructor($,Q){super();let X=Q;if(typeof $==="function")this.callback=$;else if($)X=$;if(this.timeout=null,X&&typeof X.timeout==="number")this.timeout=X.timeout;this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=Infinity,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){if(typeof this.explicitDefaultPort==="number")return this.explicitDefaultPort;return H$()?443:80}set defaultPort($){this.explicitDefaultPort=$}get protocol(){if(typeof this.explicitProtocol==="string")return this.explicitProtocol;return H$()?"https:":"http:"}set protocol($){this.explicitProtocol=$}callback($,Q,X){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest($,Q){const X=Object.assign({},Q);if(typeof X.secureEndpoint!=="boolean")X.secureEndpoint=H$();if(X.host==null)X.host="localhost";if(X.port==null)X.port=X.secureEndpoint?443:80;if(X.protocol==null)X.protocol=X.secureEndpoint?"https:":"http:";if(X.host&&X.path)delete X.path;delete X.agent,delete X.hostname,delete X._defaultAgent,delete X.defaultPort,delete X.createConnection,$._last=!0,$.shouldKeepAlive=!1;let W=!1,J=null;const K=X.timeout||this.timeout,z=(M)=>{if($._hadError)return;$.emit("error",M),$._hadError=!0},N=()=>{J=null,W=!0;const M=new Error(`A "socket" was not created for HTTP request before ${K}ms`);M.code="ETIMEOUT",z(M)},V=(M)=>{if(W)return;if(J!==null)clearTimeout(J),J=null;z(M)},G=(M)=>{if(W)return;if(J!=null)clearTimeout(J),J=null;if(kJ(M)){EY("Callback returned another Agent instance %o",M.constructor.name),M.addRequest($,X);return}if(M){M.once("free",()=>{this.freeSocket(M,X)}),$.onSocket(M);return}const R=new Error(`no Duplex stream was returned to agent-base for \`${$.method} ${$.path}\``);z(R)};if(typeof this.callback!=="function"){z(new Error("`callback` is not defined"));return}if(!this.promisifiedCallback)if(this.callback.length>=3)EY("Converting legacy callback function to promise"),this.promisifiedCallback=EJ.default(this.callback);else this.promisifiedCallback=this.callback;if(typeof K==="number"&&K>0)J=setTimeout(N,K);if(("port"in X)&&typeof X.port!=="number")X.port=Number(X.port);try{EY("Resolving socket for %o request: %o",X.protocol,`${$.method} ${$.path}`),Promise.resolve(this.promisifiedCallback($,X)).then(G,V)}catch(M){Promise.reject(M).catch(V)}}freeSocket($,Q){EY("Freeing socket %o %o",$.constructor.name,Q),$.destroy()}destroy(){EY("Destroying agent %o",this.constructor.name)}}Y.Agent=Z,Y.prototype=Y.Agent.prototype})(FZ||(FZ={}));nQ.exports=FZ});var eQ=t((fY)=>{var CJ=function(Y){return new Promise((Z,$)=>{let Q=0;const X=[];function W(){const G=Y.read();if(G)V(G);else Y.once("readable",W)}function J(){Y.removeListener("end",z),Y.removeListener("error",N),Y.removeListener("close",K),Y.removeListener("readable",W)}function K(G){kY("onclose had error %o",G)}function z(){kY("onend")}function N(G){J(),kY("onerror %o",G),$(G)}function V(G){X.push(G),Q+=G.length;const M=Buffer.concat(X,Q);if(M.indexOf("\r\n\r\n")===-1){kY("have not received end of HTTP headers yet..."),W();return}const j=M.toString("ascii",0,M.indexOf("\r\n")),H=+j.split(" ")[1];kY("got proxy server response: %o",j),Z({statusCode:H,buffered:M})}Y.on("error",N),Y.on("close",K),Y.on("end",z),W()})},fJ=fY&&fY.__importDefault||function(Y){return Y&&Y.__esModule?Y:{default:Y}};Object.defineProperty(fY,"__esModule",{value:!0});var SJ=fJ(wZ()),kY=SJ.default("https-proxy-agent:parse-proxy-response");fY.default=CJ});var Q1=t((_0)=>{var mJ=function(Y){Y.resume()},gJ=function(Y,Z){return Boolean(!Z&&Y===80||Z&&Y===443)},dJ=function(Y){return typeof Y==="string"?/^https:?$/i.test(Y):!1},uJ=function(Y,...Z){const $={};let Q;for(Q in Y)if(!Z.includes(Q))$[Q]=Y[Q];return $},yJ=_0&&_0.__awaiter||function(Y,Z,$,Q){function X(W){return W instanceof $?W:new $(function(J){J(W)})}return new($||($=Promise))(function(W,J){function K(V){try{N(Q.next(V))}catch(G){J(G)}}function z(V){try{N(Q.throw(V))}catch(G){J(G)}}function N(V){V.done?W(V.value):X(V.value).then(K,z)}N((Q=Q.apply(Y,Z||[])).next())})},QY=_0&&_0.__importDefault||function(Y){return Y&&Y.__esModule?Y:{default:Y}};Object.defineProperty(_0,"__esModule",{value:!0});var Y1=QY(import.meta.require("net")),Z1=QY(import.meta.require("tls")),_J=QY(import.meta.require("url")),bJ=QY(import.meta.require("assert")),xJ=QY(wZ()),hJ=tQ(),vJ=QY(eQ()),SY=xJ.default("https-proxy-agent:agent");class $1 extends hJ.Agent{constructor(Y){let Z;if(typeof Y==="string")Z=_J.default.parse(Y);else Z=Y;if(!Z)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");SY("creating new HttpsProxyAgent instance: %o",Z);super(Z);const $=Object.assign({},Z);if(this.secureProxy=Z.secureProxy||dJ($.protocol),$.host=$.hostname||$.host,typeof $.port==="string")$.port=parseInt($.port,10);if(!$.port&&$.host)$.port=this.secureProxy?443:80;if(this.secureProxy&&!("ALPNProtocols"in $))$.ALPNProtocols=["http 1.1"];if($.host&&$.path)delete $.path,delete $.pathname;this.proxy=$}callback(Y,Z){return yJ(this,void 0,void 0,function*(){const{proxy:$,secureProxy:Q}=this;let X;if(Q)SY("Creating `tls.Socket`: %o",$),X=Z1.default.connect($);else SY("Creating `net.Socket`: %o",$),X=Y1.default.connect($);const W=Object.assign({},$.headers);let K=`CONNECT ${`${Z.host}:${Z.port}`} HTTP/1.1\r\n`;if($.auth)W["Proxy-Authorization"]=`Basic ${Buffer.from($.auth).toString("base64")}`;let{host:z,port:N,secureEndpoint:V}=Z;if(!gJ(N,V))z+=`:${N}`;W.Host=z,W.Connection="close";for(let H of Object.keys(W))K+=`${H}: ${W[H]}\r\n`;const G=vJ.default(X);X.write(`${K}\r\n`);const{statusCode:M,buffered:R}=yield G;if(M===200){if(Y.once("socket",mJ),Z.secureEndpoint){SY("Upgrading socket connection to TLS");const H=Z.servername||Z.host;return Z1.default.connect(Object.assign(Object.assign({},uJ(Z,"host","hostname","path","port")),{socket:X,servername:H}))}return X}X.destroy();const j=new Y1.default.Socket({writable:!1});return j.readable=!0,Y.once("socket",(H)=>{SY("replaying proxy buffer for failed request"),bJ.default(H.listenerCount("data")>0),H.push(R),H.push(null)}),j})}}_0.default=$1});var W1=t((A$,X1)=>{var T$=function(Y){return new B$.default(Y)},pJ=A$&&A$.__importDefault||function(Y){return Y&&Y.__esModule?Y:{default:Y}},B$=pJ(Q1());(function(Y){Y.HttpsProxyAgent=B$.default,Y.prototype=B$.default.prototype})(T$||(T$={}));X1.exports=T$});var XY=function(Y){switch(C$.call(Y)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Y0(Y,Error)}},BZ=function(Y,Z){return C$.call(Y)===`[object ${Z}]`};var e=function(Y){return BZ(Y,"String")},bY=function(Y){return Y===null||typeof Y!=="object"&&typeof Y!=="function"},v=function(Y){return BZ(Y,"Object")},TZ=function(Y){return typeof Event!=="undefined"&&Y0(Y,Event)},AZ=function(Y){return typeof Element!=="undefined"&&Y0(Y,Element)},WY=function(Y){return BZ(Y,"RegExp")},k=function(Y){return Boolean(Y&&Y.then&&typeof Y.then==="function")},UZ=function(Y){return v(Y)&&("nativeEvent"in Y)&&("preventDefault"in Y)&&("stopPropagation"in Y)},JY=function(Y){return typeof Y==="number"&&Y!==Y},Y0=function(Y,Z){try{return Y instanceof Z}catch($){return!1}},xY=function(Y){return!!(typeof Y==="object"&&Y!==null&&(Y.__isVue||Y._isVue))},C$=Object.prototype.toString;var Z0=function(Y,Z=0){if(typeof Y!=="string"||Z===0)return Y;return Y.length<=Z?Y:`${Y.slice(0,Z)}...`},KY=function(Y,Z){let $=Y;const Q=$.length;if(Q<=150)return $;if(Z>Q)Z=Q;let X=Math.max(Z-60,0);if(X<5)X=0;let W=Math.min(X+140,Q);if(W>Q-5)W=Q;if(W===Q)X=Math.max(W-140,0);if($=$.slice(X,W),X>0)$=`'{snip} ${$}`;if(W<Q)$+=" {snip}";return $};var y$=function(Y,Z,$=!1){if(!e(Y))return!1;if(WY(Z))return Z.test(Y);if(e(Z))return $?Y===Z:Y.includes(Z);return!1},$0=function(Y,Z=[],$=!1){return Z.some((Q)=>y$(Y,Q,$))};var OZ=function(Y,Z,$=250,Q,X,W,J){if(!W.exception||!W.exception.values||!J||!Y0(J.originalException,Error))return;const K=W.exception.values.length>0?W.exception.values[W.exception.values.length-1]:void 0;if(K)W.exception.values=c1(DZ(Y,Z,X,J.originalException,Q,W.exception.values,K,0),$)},DZ=function(Y,Z,$,Q,X,W,J,K){if(W.length>=$+1)return W;let z=[...W];if(Y0(Q[X],Error)){_$(J,K);const N=Y(Z,Q[X]),V=z.length;b$(N,X,V,K),z=DZ(Y,Z,$,Q[X],X,[N,...z],N,V)}if(Array.isArray(Q.errors))Q.errors.forEach((N,V)=>{if(Y0(N,Error)){_$(J,K);const G=Y(Z,N),M=z.length;b$(G,`errors[${V}]`,M,K),z=DZ(Y,Z,$,N,X,[G,...z],G,M)}});return z},_$=function(Y,Z){Y.mechanism=Y.mechanism||{type:"generic",handled:!0},Y.mechanism={...Y.mechanism,is_exception_group:!0,exception_id:Z}},b$=function(Y,Z,$,Q){Y.mechanism=Y.mechanism||{type:"generic",handled:!0},Y.mechanism={...Y.mechanism,type:"chained",source:Z,exception_id:$,parent_id:Q}},c1=function(Y,Z){return Y.map(($)=>{if($.value)$.value=Z0($.value,Z);return $})};var hY=function(Y){return Y&&Y.Math==Math?Y:void 0},zY=function(){return B},VY=function(Y,Z,$){const Q=$||B,X=Q.__SENTRY__=Q.__SENTRY__||{};return X[Y]||(X[Y]=Z())},B=typeof globalThis=="object"&&hY(globalThis)||typeof window=="object"&&hY(window)||typeof self=="object"&&hY(self)||typeof global=="object"&&hY(global)||function(){return this}()||{};var x$=function(Y,Z={}){if(!Y)return"<unknown>";try{let $=Y;const Q=5,X=[];let W=0,J=0;const K=" > ",z=K.length;let N;const V=Array.isArray(Z)?Z:Z.keyAttrs,G=!Array.isArray(Z)&&Z.maxStringLength||l1;while($&&W++<Q){if(N=i1($,V),N==="html"||W>1&&J+X.length*z+N.length>=G)break;X.push(N),J+=N.length,$=$.parentNode}return X.reverse().join(K)}catch($){return"<unknown>"}},i1=function(Y,Z){const $=Y,Q=[];let X,W,J,K,z;if(!$||!$.tagName)return"";Q.push($.tagName.toLowerCase());const N=Z&&Z.length?Z.filter((G)=>$.getAttribute(G)).map((G)=>[G,$.getAttribute(G)]):null;if(N&&N.length)N.forEach((G)=>{Q.push(`[${G[0]}="${G[1]}"]`)});else{if($.id)Q.push(`#${$.id}`);if(X=$.className,X&&e(X)){W=X.split(/\s+/);for(z=0;z<W.length;z++)Q.push(`.${W[z]}`)}}const V=["aria-label","type","name","title","alt"];for(z=0;z<V.length;z++)if(J=V[z],K=$.getAttribute(J),K)Q.push(`[${J}="${K}"]`);return Q.join("")};var K9=zY(),l1=80;var Q0=typeof __SENTRY_DEBUG__==="undefined"||__SENTRY_DEBUG__;var S=function(Y){if(!("console"in B))return Y();const Z=B.console,$={},Q=Object.keys(v0);Q.forEach((X)=>{const W=v0[X];$[X]=Z[X],Z[X]=W});try{return Y()}finally{Q.forEach((X)=>{Z[X]=$[X]})}},s1=function(){let Y=!1;const Z={enable:()=>{Y=!0},disable:()=>{Y=!1},isEnabled:()=>Y};if(Q0)GY.forEach(($)=>{Z[$]=(...Q)=>{if(Y)S(()=>{B.console[$](`${a1}[${$}]:`,...Q)})}});else GY.forEach(($)=>{Z[$]=()=>{return}});return Z},a1="Sentry Logger ",GY=["debug","info","warn","error","log","assert","trace"],v0={},w=s1();var r1=function(Y){return Y==="http"||Y==="https"},M0=function(Y,Z=!1){const{host:$,path:Q,pass:X,port:W,projectId:J,protocol:K,publicKey:z}=Y;return`${K}://${z}${Z&&X?`:${X}`:""}`+`@${$}${W?`:${W}`:""}/${Q?`${Q}/`:Q}${J}`},h$=function(Y){const Z=o1.exec(Y);if(!Z){S(()=>{console.error(`Invalid Sentry Dsn: ${Y}`)});return}const[$,Q,X="",W,J="",K]=Z.slice(1);let z="",N=K;const V=N.split("/");if(V.length>1)z=V.slice(0,-1).join("/"),N=V.pop();if(N){const G=N.match(/^\d+/);if(G)N=G[0]}return v$({host:W,pass:X,path:z,projectId:N,port:J,protocol:$,publicKey:Q})},v$=function(Y){return{protocol:Y.protocol,publicKey:Y.publicKey||"",pass:Y.pass||"",host:Y.host,port:Y.port||"",path:Y.path||"",projectId:Y.projectId}},n1=function(Y){if(!Q0)return!0;const{port:Z,projectId:$,protocol:Q}=Y;if(["protocol","publicKey","host","projectId"].find((J)=>{if(!Y[J])return w.error(`Invalid Sentry Dsn: ${J} missing`),!0;return!1}))return!1;if(!$.match(/^\d+$/))return w.error(`Invalid Sentry Dsn: Invalid projectId ${$}`),!1;if(!r1(Q))return w.error(`Invalid Sentry Dsn: Invalid protocol ${Q}`),!1;if(Z&&isNaN(parseInt(Z,10)))return w.error(`Invalid Sentry Dsn: Invalid port ${Z}`),!1;return!0},vY=function(Y){const Z=typeof Y==="string"?h$(Y):v$(Y);if(!Z||!n1(Z))return;return Z},o1=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;class C extends Error{constructor(Y,Z="warn"){super(Y);this.message=Y,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=Z}}var D=function(Y,Z,$){if(!(Z in Y))return;const Q=Y[Z],X=$(Q);if(typeof X==="function")d$(X,Q);Y[Z]=X},m0=function(Y,Z,$){try{Object.defineProperty(Y,Z,{value:$,writable:!0,configurable:!0})}catch(Q){Q0&&w.log(`Failed to add non-enumerable property "${Z}" to object`,Y)}},d$=function(Y,Z){try{const $=Z.prototype||{};Y.prototype=Z.prototype=$,m0(Y,"__sentry_original__",Z)}catch($){}},qZ=function(Y){return Y.__sentry_original__},EZ=function(Y){return Object.keys(Y).map((Z)=>`${encodeURIComponent(Z)}=${encodeURIComponent(Y[Z])}`).join("&")},mY=function(Y){if(XY(Y))return{message:Y.message,name:Y.name,stack:Y.stack,...g$(Y)};else if(TZ(Y)){const Z={type:Y.type,target:m$(Y.target),currentTarget:m$(Y.currentTarget),...g$(Y)};if(typeof CustomEvent!=="undefined"&&Y0(Y,CustomEvent))Z.detail=Y.detail;return Z}else return Y},m$=function(Y){try{return AZ(Y)?x$(Y):Object.prototype.toString.call(Y)}catch(Z){return"<unknown>"}},g$=function(Y){if(typeof Y==="object"&&Y!==null){const Z={};for(let $ in Y)if(Object.prototype.hasOwnProperty.call(Y,$))Z[$]=Y[$];return Z}else return{}},kZ=function(Y,Z=40){const $=Object.keys(mY(Y));if($.sort(),!$.length)return"[object has no keys]";if($[0].length>=Z)return Z0($[0],Z);for(let Q=$.length;Q>0;Q--){const X=$.slice(0,Q).join(", ");if(X.length>Z)continue;if(Q===$.length)return X;return Z0(X,Z)}return""},O=function(Y){return IZ(Y,new Map)},IZ=function(Y,Z){if(v(Y)){const $=Z.get(Y);if($!==void 0)return $;const Q={};Z.set(Y,Q);for(let X of Object.keys(Y))if(typeof Y[X]!=="undefined")Q[X]=IZ(Y[X],Z);return Q}if(Array.isArray(Y)){const $=Z.get(Y);if($!==void 0)return $;const Q=[];return Z.set(Y,Q),Y.forEach((X)=>{Q.push(IZ(X,Z))}),Q}return Y};var t1=function(Y,Z=!1){return!(Z||Y&&!Y.startsWith("/")&&!Y.includes(":\\")&&!Y.startsWith(".")&&!Y.match(/^[a-zA-Z]([a-zA-Z0-9.\-+])*:\/\//))&&Y!==void 0&&!Y.includes("node_modules/")},u$=function(Y){const Z=/^\s*[-]{4,}$/,$=/at (?:async )?(?:(.+?)\s+\()?(?:(.+):(\d+):(\d+)?|([^)]+))\)?/;return(Q)=>{const X=Q.match($);if(X){let W,J,K,z,N;if(X[1]){K=X[1];let M=K.lastIndexOf(".");if(K[M-1]===".")M--;if(M>0){W=K.slice(0,M),J=K.slice(M+1);const R=W.indexOf(".Module");if(R>0)K=K.slice(R+1),W=W.slice(0,R)}z=void 0}if(J)z=W,N=J;if(J==="<anonymous>")N=void 0,K=void 0;if(K===void 0)N=N||"<anonymous>",K=z?`${z}.${N}`:N;let V=X[2]&&X[2].startsWith("file://")?X[2].slice(7):X[2];const G=X[5]==="native";if(!V&&X[5]&&!G)V=X[5];return{filename:V,module:Y?Y(V):void 0,function:K,lineno:parseInt(X[3],10)||void 0,colno:parseInt(X[4],10)||void 0,in_app:t1(V,G)}}if(Q.match(Z))return{filename:Q};return}};var gY=function(...Y){const Z=Y.sort(($,Q)=>$[0]-Q[0]).map(($)=>$[1]);return($,Q=0)=>{const X=[],W=$.split("\n");for(let J=Q;J<W.length;J++){const K=W[J];if(K.length>1024)continue;const z=p$.test(K)?K.replace(p$,"$1"):K;if(z.match(/\S*Error: /))continue;for(let N of Z){const V=N(z);if(V){X.push(V);break}}if(X.length>=l$)break}return i$(X)}},SZ=function(Y){if(Array.isArray(Y))return gY(...Y);return Y},i$=function(Y){if(!Y.length)return[];const Z=Array.from(Y);if(/sentryWrapped/.test(Z[Z.length-1].function||""))Z.pop();if(Z.reverse(),c$.test(Z[Z.length-1].function||"")){if(Z.pop(),c$.test(Z[Z.length-1].function||""))Z.pop()}return Z.slice(0,l$).map(($)=>({...$,filename:$.filename||Z[Z.length-1].filename,function:$.function||"?"}))},NY=function(Y){try{if(!Y||typeof Y!=="function")return fZ;return Y.name||fZ}catch(Z){return fZ}},CZ=function(Y){return[90,u$(Y)]},l$=50,p$=/\(error: (.*)\)/,c$=/captureMessage|captureException/,fZ="<anonymous>";var g0=function(Y,Z){dY[Y]=dY[Y]||[],dY[Y].push(Z)};var d0=function(Y,Z){if(!a$[Y])Z(),a$[Y]=!0},u0=function(Y,Z){const $=Y&&dY[Y];if(!$)return;for(let Q of $)try{Q(Z)}catch(X){Q0&&w.error(`Error while triggering instrumentation handler.\nType: ${Y}\nName: ${NY(Q)}\nError:`,X)}},dY={},a$={};var yZ=function(Y){g0("console",Y),d0("console",e1)},e1=function(){if(!("console"in B))return;GY.forEach(function(Y){if(!(Y in B.console))return;D(B.console,Y,function(Z){return v0[Y]=Z,function(...$){u0("console",{args:$,level:Y});const X=v0[Y];X&&X.apply(B.console,$)}})})};var U=function(){const Y=B,Z=Y.crypto||Y.msCrypto;let $=()=>Math.random()*16;try{if(Z&&Z.randomUUID)return Z.randomUUID().replace(/-/g,"");if(Z&&Z.getRandomValues)$=()=>Z.getRandomValues(new Uint8Array(1))[0]}catch(Q){}return([1e7]+1000+4000+8000+100000000000).replace(/[018]/g,(Q)=>(Q^($()&15)>>Q/4).toString(16))},s$=function(Y){return Y.exception&&Y.exception.values?Y.exception.values[0]:void 0},z0=function(Y){const{message:Z,event_id:$}=Y;if(Z)return Z;const Q=s$(Y);if(Q){if(Q.type&&Q.value)return`${Q.type}: ${Q.value}`;return Q.type||Q.value||$||"<unknown>"}return $||"<unknown>"},_Z=function(Y,Z,$){const Q=Y.exception=Y.exception||{},X=Q.values=Q.values||[],W=X[0]=X[0]||{};if(!W.value)W.value=Z||"";if(!W.type)W.type=$||"Error"},MY=function(Y,Z){const $=s$(Y);if(!$)return;const Q={type:"generic",handled:!0},X=$.mechanism;if($.mechanism={...Q,...X,...Z},Z&&("data"in Z)){const W={...X&&X.data,...Z.data};$.mechanism.data=W}},bZ=function(Y){const Z=Y.match(YX)||[],$=parseInt(Z[1],10),Q=parseInt(Z[2],10),X=parseInt(Z[3],10);return{buildmetadata:Z[5],major:isNaN($)?void 0:$,minor:isNaN(Q)?void 0:Q,patch:isNaN(X)?void 0:X,prerelease:Z[4]}},xZ=function(Y,Z,$=5){if(Z.lineno===void 0)return;const Q=Y.length,X=Math.max(Math.min(Q-1,Z.lineno-1),0);Z.pre_context=Y.slice(Math.max(0,X-$),X).map((W)=>KY(W,0)),Z.context_line=KY(Y[Math.min(Q-1,X)],Z.colno||0),Z.post_context=Y.slice(Math.min(X+1,Q),X+1+$).map((W)=>KY(W,0))},uY=function(Y){if(Y&&Y.__sentry_captured__)return!0;try{m0(Y,"__sentry_captured__",!0)}catch(Z){}return!1},w0=function(Y){return Array.isArray(Y)?Y:[Y]},YX=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;var hZ=function(Y){g0("error",Y),d0("error",ZX)},ZX=function(){pY=B.onerror,B.onerror=function(Y,Z,$,Q,X){if(u0("error",{column:Q,error:X,line:$,msg:Y,url:Z}),pY&&!pY.__SENTRY_LOADER__)return pY.apply(this,arguments);return!1},B.onerror.__SENTRY_INSTRUMENTED__=!0},pY=null;var vZ=function(Y){g0("unhandledrejection",Y),d0("unhandledrejection",$X)},$X=function(){cY=B.onunhandledrejection,B.onunhandledrejection=function(Y){if(u0("unhandledrejection",Y),cY&&!cY.__SENTRY_LOADER__)return cY.apply(this,arguments);return!0},B.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0},cY=null;var o$=function(){return typeof __SENTRY_BROWSER_BUNDLE__!=="undefined"&&!!__SENTRY_BROWSER_BUNDLE__};var gZ=function(){return!o$()&&Object.prototype.toString.call(typeof process!=="undefined"?process:0)==="[object process]"},F0=function(Y,Z){return Y.require(Z)},u=function(Y){let Z;try{Z=F0(mZ,Y)}catch($){}try{const{cwd:$}=F0(mZ,"process");Z=F0(mZ,`${$()}/node_modules/${Y}`)}catch($){}return Z};var r$=function(){const Y=typeof WeakSet==="function",Z=Y?new WeakSet:[];function $(X){if(Y){if(Z.has(X))return!0;return Z.add(X),!1}for(let W=0;W<Z.length;W++)if(Z[W]===X)return!0;return Z.push(X),!1}function Q(X){if(Y)Z.delete(X);else for(let W=0;W<Z.length;W++)if(Z[W]===X){Z.splice(W,1);break}}return[$,Q]};var m=function(Y,Z=100,$=Infinity){try{return lY("",Y,Z,$)}catch(Q){return{ERROR:`**non-serializable** (${Q})`}}},iY=function(Y,Z=3,$=102400){const Q=m(Y,Z);if(JX(Q)>$)return iY(Y,Z-1,$);return Q},lY=function(Y,Z,$=Infinity,Q=Infinity,X=r$()){const[W,J]=X;if(Z==null||["number","boolean","string"].includes(typeof Z)&&!JY(Z))return Z;const K=QX(Y,Z);if(!K.startsWith("[object "))return K;if(Z.__sentry_skip_normalization__)return Z;const z=typeof Z.__sentry_override_normalization_depth__==="number"?Z.__sentry_override_normalization_depth__:$;if(z===0)return K.replace("object ","");if(W(Z))return"[Circular ~]";const N=Z;if(N&&typeof N.toJSON==="function")try{const R=N.toJSON();return lY("",R,z-1,Q,X)}catch(R){}const V=Array.isArray(Z)?[]:{};let G=0;const M=mY(Z);for(let R in M){if(!Object.prototype.hasOwnProperty.call(M,R))continue;if(G>=Q){V[R]="[MaxProperties ~]";break}const j=M[R];V[R]=lY(R,j,z-1,Q,X),G++}return J(Z),V},QX=function(Y,Z){try{if(Y==="domain"&&Z&&typeof Z==="object"&&Z._events)return"[Domain]";if(Y==="domainEmitter")return"[DomainEmitter]";if(typeof global!=="undefined"&&Z===global)return"[Global]";if(typeof window!=="undefined"&&Z===window)return"[Window]";if(typeof document!=="undefined"&&Z===document)return"[Document]";if(xY(Z))return"[VueViewModel]";if(UZ(Z))return"[SyntheticEvent]";if(typeof Z==="number"&&Z!==Z)return"[NaN]";if(typeof Z==="function")return`[Function: ${NY(Z)}]`;if(typeof Z==="symbol")return`[${String(Z)}]`;if(typeof Z==="bigint")return`[BigInt: ${String(Z)}]`;const $=XX(Z);if(/^HTML(\w*)Element$/.test($))return`[HTMLElement: ${$}]`;return`[object ${$}]`}catch($){return`**non-serializable** (${$})`}},XX=function(Y){const Z=Object.getPrototypeOf(Y);return Z?Z.constructor.name:"null prototype"},WX=function(Y){return~-encodeURI(Y).split(/%..|./).length},JX=function(Y){return WX(JSON.stringify(Y))};var g=function(Y){return new f((Z)=>{Z(Y)})},O0=function(Y){return new f((Z,$)=>{$(Y)})},V0;(function(Y){Y[Y.PENDING=0]="PENDING";const $=1;Y[Y.RESOLVED=$]="RESOLVED";const Q=2;Y[Y.REJECTED=Q]="REJECTED"})(V0||(V0={}));class f{constructor(Y){f.prototype.__init.call(this),f.prototype.__init2.call(this),f.prototype.__init3.call(this),f.prototype.__init4.call(this),this._state=V0.PENDING,this._handlers=[];try{Y(this._resolve,this._reject)}catch(Z){this._reject(Z)}}then(Y,Z){return new f(($,Q)=>{this._handlers.push([!1,(X)=>{if(!Y)$(X);else try{$(Y(X))}catch(W){Q(W)}},(X)=>{if(!Z)Q(X);else try{$(Z(X))}catch(W){Q(W)}}]),this._executeHandlers()})}catch(Y){return this.then((Z)=>Z,Y)}finally(Y){return new f((Z,$)=>{let Q,X;return this.then((W)=>{if(X=!1,Q=W,Y)Y()},(W)=>{if(X=!0,Q=W,Y)Y()}).then(()=>{if(X){$(Q);return}Z(Q)})})}__init(){this._resolve=(Y)=>{this._setResult(V0.RESOLVED,Y)}}__init2(){this._reject=(Y)=>{this._setResult(V0.REJECTED,Y)}}__init3(){this._setResult=(Y,Z)=>{if(this._state!==V0.PENDING)return;if(k(Z)){Z.then(this._resolve,this._reject);return}this._state=Y,this._value=Z,this._executeHandlers()}}__init4(){this._executeHandlers=()=>{if(this._state===V0.PENDING)return;const Y=this._handlers.slice();this._handlers=[],Y.forEach((Z)=>{if(Z[0])return;if(this._state===V0.RESOLVED)Z[1](this._value);if(this._state===V0.REJECTED)Z[2](this._value);Z[0]=!0})}}}var dZ=function(Y){const Z=[];function $(){return Y===void 0||Z.length<Y}function Q(J){return Z.splice(Z.indexOf(J),1)[0]}function X(J){if(!$())return O0(new C("Not adding Promise because buffer limit was reached."));const K=J();if(Z.indexOf(K)===-1)Z.push(K);return K.then(()=>Q(K)).then(null,()=>Q(K).then(null,()=>{})),K}function W(J){return new f((K,z)=>{let N=Z.length;if(!N)return K(!0);const V=setTimeout(()=>{if(J&&J>0)K(!1)},J);Z.forEach((G)=>{g(G).then(()=>{if(!--N)clearTimeout(V),K(!0)},z)})})}return{$:Z,add:X,drain:W}};var n$=function(Y){const Z={};let $=0;while($<Y.length){const Q=Y.indexOf("=",$);if(Q===-1)break;let X=Y.indexOf(";",$);if(X===-1)X=Y.length;else if(X<Q){$=Y.lastIndexOf(";",Q-1)+1;continue}const W=Y.slice($,Q).trim();if(Z[W]===void 0){let J=Y.slice(Q+1,X).trim();if(J.charCodeAt(0)===34)J=J.slice(1,-1);try{Z[W]=J.indexOf("%")!==-1?decodeURIComponent(J):J}catch(K){Z[W]=J}}$=X+1}return Z};var wY=function(Y){if(!Y)return{};const Z=Y.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!Z)return{};const $=Z[6]||"",Q=Z[8]||"";return{host:Z[4],path:Z[5],protocol:Z[2],search:$,hash:Q,relative:Z[5]+$+Q}},I0=function(Y){return Y.split(/[\?#]/,1)[0]},p0=function(Y){return Y.split(/\\?\//).filter((Z)=>Z.length>0&&Z!==",").length},FY=function(Y){const{protocol:Z,host:$,path:Q}=Y,X=$&&$.replace(/^.*@/,"[filtered]:[filtered]@").replace(/(:80)$/,"").replace(/(:443)$/,"")||"";return`${Z?`${Z}://`:""}${X}${Q}`};var q0=function(Y,Z={}){const $=Y.method&&Y.method.toUpperCase();let Q="",X="url";if(Z.customRoute||Y.route)Q=Z.customRoute||`${Y.baseUrl||""}${Y.route&&Y.route.path}`,X="route";else if(Y.originalUrl||Y.url)Q=I0(Y.originalUrl||Y.url||"");let W="";if(Z.method&&$)W+=$;if(Z.method&&Z.path)W+=" ";if(Z.path&&Q)W+=Q;return[W,X]},VX=function(Y,Z){switch(Z){case"path":return q0(Y,{path:!0})[0];case"handler":return Y.route&&Y.route.stack&&Y.route.stack[0]&&Y.route.stack[0].name||"<anonymous>";case"methodPath":default:{const $=Y._reconstructedRoute?Y._reconstructedRoute:void 0;return q0(Y,{path:!0,method:!0,customRoute:$})[0]}}},GX=function(Y,Z){const $={};return(Array.isArray(Z)?Z:t$).forEach((X)=>{if(Y&&(X in Y))$[X]=Y[X]}),$},uZ=function(Y,Z){const{include:$=zX,deps:Q}=Z||{},X={},W=Y.headers||{},J=Y.method,K=Y.hostname||Y.host||W.host||"<no host>",z=Y.protocol==="https"||Y.socket&&Y.socket.encrypted?"https":"http",N=Y.originalUrl||Y.url||"",V=N.startsWith(z)?N:`${z}://${K}${N}`;return $.forEach((G)=>{switch(G){case"headers":{if(X.headers=W,!$.includes("cookies"))delete X.headers.cookie;break}case"method":{X.method=J;break}case"url":{X.url=V;break}case"cookies":{X.cookies=Y.cookies||W.cookie&&n$(W.cookie)||{};break}case"query_string":{X.query_string=NX(Y,Q);break}case"data":{if(J==="GET"||J==="HEAD")break;if(Y.body!==void 0)X.data=e(Y.body)?Y.body:JSON.stringify(m(Y.body));break}default:if({}.hasOwnProperty.call(Y,G))X[G]=Y[G]}}),X},pZ=function(Y,Z,$){const Q={...KX,...$&&$.include};if(Q.request){const X=Array.isArray(Q.request)?uZ(Z,{include:Q.request,deps:$&&$.deps}):uZ(Z,{deps:$&&$.deps});Y.request={...Y.request,...X}}if(Q.user){const X=Z.user&&v(Z.user)?GX(Z.user,Q.user):{};if(Object.keys(X).length)Y.user={...Y.user,...X}}if(Q.ip){const X=Z.ip||Z.socket&&Z.socket.remoteAddress;if(X)Y.user={...Y.user,ip_address:X}}if(Q.transaction&&!Y.transaction)Y.transaction=VX(Z,Q.transaction);return Y},NX=function(Y,Z){let $=Y.originalUrl||Y.url||"";if(!$)return;if($.startsWith("/"))$=`http://dogs.are.great${$}`;try{return Y.query||typeof URL!==void 0&&new URL($).search.slice(1)||Z&&Z.url&&Z.url.parse($).query||void 0}catch(Q){return}};var KX={ip:!1,request:!0,transaction:!0,user:!0},zX=["cookies","data","headers","method","query_string","url"],t$=["id","username","email"];var cZ=function(Y){return Y==="warn"?"warning":e$.includes(Y)?Y:"log"},e$=["fatal","error","warning","log","info","debug"];var MX=function(){const{performance:Y}=ZQ;if(!Y||!Y.now)return;const Z=Date.now()-Y.now();return{now:()=>Y.now(),timeOrigin:Z}},wX=function(){try{return F0(RX,"perf_hooks").performance}catch(Y){return}},ZQ=zY(),iZ={nowSeconds:()=>Date.now()/1000},lZ=gZ()?wX():MX(),YQ=lZ===void 0?iZ:{nowSeconds:()=>(lZ.timeOrigin+lZ.now())/1000},E0=iZ.nowSeconds.bind(iZ),k0=YQ.nowSeconds.bind(YQ);var RY,FX=(()=>{const{performance:Y}=ZQ;if(!Y||!Y.now){RY="none";return}const Z=3600000,$=Y.now(),Q=Date.now(),X=Y.timeOrigin?Math.abs(Y.timeOrigin+$-Q):Z,W=X<Z,J=Y.timing&&Y.timing.navigationStart,z=typeof J==="number"?Math.abs(J+$-Q):Z,N=z<Z;if(W||N)if(X<=z)return RY="timeOrigin",Y.timeOrigin;else return RY="navigationStart",J;return RY="dateNow",Q})();var sZ=function(Y){if(!e(Y)&&!Array.isArray(Y))return;let Z={};if(Array.isArray(Y))Z=Y.reduce((Q,X)=>{const W=$Q(X);return{...Q,...W}},{});else{if(!Y)return;Z=$Q(Y)}const $=Object.entries(Z).reduce((Q,[X,W])=>{if(X.match(QQ)){const J=X.slice(aZ.length);Q[J]=W}return Q},{});if(Object.keys($).length>0)return $;else return},c0=function(Y){if(!Y)return;const Z=Object.entries(Y).reduce(($,[Q,X])=>{if(X)$[`${aZ}${Q}`]=X;return $},{});return jX(Z)},$Q=function(Y){return Y.split(",").map((Z)=>Z.split("=").map(($)=>decodeURIComponent($.trim()))).reduce((Z,[$,Q])=>{return Z[$]=Q,Z},{})},jX=function(Y){if(Object.keys(Y).length===0)return;return Object.entries(Y).reduce((Z,[$,Q],X)=>{const W=`${encodeURIComponent($)}=${encodeURIComponent(Q)}`,J=X===0?W:`${Z},${W}`;if(J.length>XQ)return Q0&&w.warn(`Not adding key: ${$} with val: ${Q} to baggage header due to exceeding baggage size limits.`),Z;else return J},"")};var aZ="sentry-",QQ=/^sentry-/,XQ=8192;var JQ=function(Y){if(!Y)return;const Z=Y.match(WQ);if(!Z)return;let $;if(Z[3]==="1")$=!0;else if(Z[3]==="0")$=!1;return{traceId:Z[1],parentSampled:$,parentSpanId:Z[2]}},jY=function(Y,Z){const $=JQ(Y),Q=sZ(Z),{traceId:X,parentSpanId:W,parentSampled:J}=$||{},K={traceId:X||U(),spanId:U().substring(16),sampled:J};if(W)K.parentSpanId=W;if(Q)K.dsc=Q;return{traceparentData:$,dynamicSamplingContext:Q,propagationContext:K}},f0=function(Y=U(),Z=U().substring(16),$){let Q="";if($!==void 0)Q=$?"-1":"-0";return`${Y}-${Z}${Q}`},WQ=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");var R0=function(Y,Z=[]){return[Y,Z]},rZ=function(Y,Z){const[$,Q]=Y;return[$,[...Q,Z]]},aY=function(Y,Z){const $=Y[1];for(let Q of $){const X=Q[0].type;if(Z(Q,X))return!0}return!1};var oZ=function(Y,Z){return(Z||new TextEncoder).encode(Y)},PY=function(Y,Z){const[$,Q]=Y;let X=JSON.stringify($);function W(J){if(typeof X==="string")X=typeof J==="string"?X+J:[oZ(X,Z),J];else X.push(typeof J==="string"?oZ(J,Z):J)}for(let J of Q){const[K,z]=J;if(W(`\n${JSON.stringify(K)}\n`),typeof z==="string"||z instanceof Uint8Array)W(z);else{let N;try{N=JSON.stringify(z)}catch(V){N=JSON.stringify(m(z))}W(N)}}return typeof X==="string"?X:PX(X)},PX=function(Y){const Z=Y.reduce((X,W)=>X+W.length,0),$=new Uint8Array(Z);let Q=0;for(let X of Y)$.set(X,Q),Q+=X.length;return $};var nZ=function(Y,Z){const $=typeof Y.data==="string"?oZ(Y.data,Z):Y.data;return[O({type:"attachment",length:$.length,filename:Y.filename,content_type:Y.contentType,attachment_type:Y.attachmentType}),$]},sY=function(Y){return HX[Y]},oY=function(Y){if(!Y||!Y.sdk)return;const{name:Z,version:$}=Y.sdk;return{name:Z,version:$}},tZ=function(Y,Z,$,Q){const X=Y.sdkProcessingMetadata&&Y.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:Y.event_id,sent_at:(new Date()).toISOString(),...Z&&{sdk:Z},...!!$&&Q&&{dsn:M0(Q)},...X&&{trace:O({...X})}}},HX={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",statsd:"unknown"};var KQ=function(Y,Z=Date.now()){const $=parseInt(`${Y}`,10);if(!isNaN($))return $*1000;const Q=Date.parse(`${Y}`);if(!isNaN(Q))return Q-Z;return 60000},zQ=function(Y,Z){return Y[Z]||Y.all||0},eZ=function(Y,Z,$=Date.now()){return zQ(Y,Z)>$},Y$=function(Y,{statusCode:Z,headers:$},Q=Date.now()){const X={...Y},W=$&&$["x-sentry-rate-limits"],J=$&&$["retry-after"];if(W)for(let K of W.trim().split(",")){const[z,N]=K.split(":",2),V=parseInt(z,10),G=(!isNaN(V)?V:60)*1000;if(!N)X.all=Q+G;else for(let M of N.split(";"))X[M]=Q+G}else if(J)X.all=Q+KQ(J,Q);else if(Z===429)X.all=Q+60000;return X};var Z$=function(Y,Z){return Y(Z.stack||"",1)},rY=function(Y,Z){const $={type:Z.name||Z.constructor.name,value:Z.message},Q=Z$(Y,Z);if(Q.length)$.stacktrace={frames:Q};return $},LX=function(Y){if(("name"in Y)&&typeof Y.name==="string"){let Z=`'${Y.name}' captured as exception`;if(("message"in Y)&&typeof Y.message==="string")Z+=` with message '${Y.message}'`;return Z}else if(("message"in Y)&&typeof Y.message==="string")return Y.message;else return`Object captured as exception with keys: ${kZ(Y)}`},$$=function(Y,Z,$,Q){let X=$;const J=Q&&Q.data&&Q.data.mechanism||{handled:!0,type:"generic"};if(!XY($)){if(v($)){const z=Y(),N=z.getClient(),V=N&&N.getOptions().normalizeDepth;z.configureScope((M)=>{M.setExtra("__serialized__",iY($,V))});const G=LX($);X=Q&&Q.syntheticException||new Error(G),X.message=G}else X=Q&&Q.syntheticException||new Error($),X.message=$;J.synthetic=!0}const K={exception:{values:[rY(Z,X)]}};return _Z(K,void 0,void 0),MY(K,J),{...K,event_id:Q&&Q.event_id}},Q$=function(Y,Z,$="info",Q,X){const W={event_id:Q&&Q.event_id,level:$,message:Z};if(X&&Q&&Q.syntheticException){const J=Z$(Y,Q.syntheticException);if(J.length)W.exception={values:[{value:Z,stacktrace:{frames:J}}]}}return W};class p{constructor(Y){this._maxSize=Y,this._cache=new Map}get size(){return this._cache.size}get(Y){const Z=this._cache.get(Y);if(Z===void 0)return;return this._cache.delete(Y),this._cache.set(Y,Z),Z}set(Y,Z){if(this._cache.size>=this._maxSize)this._cache.delete(this._cache.keys().next().value);this._cache.set(Y,Z)}remove(Y){const Z=this._cache.get(Y);if(Z)this._cache.delete(Y);return Z}clear(){this._cache.clear()}keys(){return Array.from(this._cache.keys())}values(){const Y=[];return this._cache.forEach((Z)=>Y.push(Z)),Y}}var HY=function(Y,Z){return Y!=null?Y:Z()};var F=function(Y){let Z=void 0,$=Y[0],Q=1;while(Q<Y.length){const X=Y[Q],W=Y[Q+1];if(Q+=2,(X==="optionalAccess"||X==="optionalCall")&&$==null)return;if(X==="access"||X==="optionalAccess")Z=$,$=W($);else if(X==="call"||X==="optionalCall")$=W((...J)=>$.call(Z,...J)),Z=void 0}return $};var P=typeof __SENTRY_DEBUG__==="undefined"||__SENTRY_DEBUG__;var l0="production";var LY=function(){return VY("globalEventProcessors",()=>[])},X$=function(Y){LY().push(Y)},i0=function(Y,Z,$,Q=0){return new f((X,W)=>{const J=Y[Q];if(Z===null||typeof J!=="function")X(Z);else{const K=J({...Z},$);if(P&&J.id&&K===null&&w.log(`Event processor "${J.id}" dropped event`),k(K))K.then((z)=>i0(Y,z,$,Q+1).then(X)).then(null,W);else i0(Y,K,$,Q+1).then(X).then(null,W)}})};var VQ=function(Y){const Z=k0(),$={sid:U(),init:!0,timestamp:Z,started:Z,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>BX($)};if(Y)G0($,Y);return $},G0=function(Y,Z={}){if(Z.user){if(!Y.ipAddress&&Z.user.ip_address)Y.ipAddress=Z.user.ip_address;if(!Y.did&&!Z.did)Y.did=Z.user.id||Z.user.email||Z.user.username}if(Y.timestamp=Z.timestamp||k0(),Z.abnormal_mechanism)Y.abnormal_mechanism=Z.abnormal_mechanism;if(Z.ignoreDuration)Y.ignoreDuration=Z.ignoreDuration;if(Z.sid)Y.sid=Z.sid.length===32?Z.sid:U();if(Z.init!==void 0)Y.init=Z.init;if(!Y.did&&Z.did)Y.did=`${Z.did}`;if(typeof Z.started==="number")Y.started=Z.started;if(Y.ignoreDuration)Y.duration=void 0;else if(typeof Z.duration==="number")Y.duration=Z.duration;else{const $=Y.timestamp-Y.started;Y.duration=$>=0?$:0}if(Z.release)Y.release=Z.release;if(Z.environment)Y.environment=Z.environment;if(!Y.ipAddress&&Z.ipAddress)Y.ipAddress=Z.ipAddress;if(!Y.userAgent&&Z.userAgent)Y.userAgent=Z.userAgent;if(typeof Z.errors==="number")Y.errors=Z.errors;if(Z.status)Y.status=Z.status},GQ=function(Y,Z){let $={};if(Z)$={status:Z};else if(Y.status==="ok")$={status:"exited"};G0(Y,$)},BX=function(Y){return O({sid:`${Y.sid}`,init:Y.init,started:new Date(Y.started*1000).toISOString(),timestamp:new Date(Y.timestamp*1000).toISOString(),status:Y.status,errors:Y.errors,did:typeof Y.did==="number"||typeof Y.did==="string"?`${Y.did}`:void 0,duration:Y.duration,abnormal_mechanism:Y.abnormal_mechanism,attrs:{release:Y.release,environment:Y.environment,ip_address:Y.ipAddress,user_agent:Y.userAgent}})};var NQ=function(){return{traceId:U(),spanId:U().substring(16)}},TX=100;class c{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=NQ()}static clone(Y){const Z=new c;if(Y)Z._breadcrumbs=[...Y._breadcrumbs],Z._tags={...Y._tags},Z._extra={...Y._extra},Z._contexts={...Y._contexts},Z._user=Y._user,Z._level=Y._level,Z._span=Y._span,Z._session=Y._session,Z._transactionName=Y._transactionName,Z._fingerprint=Y._fingerprint,Z._eventProcessors=[...Y._eventProcessors],Z._requestSession=Y._requestSession,Z._attachments=[...Y._attachments],Z._sdkProcessingMetadata={...Y._sdkProcessingMetadata},Z._propagationContext={...Y._propagationContext};return Z}addScopeListener(Y){this._scopeListeners.push(Y)}addEventProcessor(Y){return this._eventProcessors.push(Y),this}setUser(Y){if(this._user=Y||{},this._session)G0(this._session,{user:Y});return this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(Y){return this._requestSession=Y,this}setTags(Y){return this._tags={...this._tags,...Y},this._notifyScopeListeners(),this}setTag(Y,Z){return this._tags={...this._tags,[Y]:Z},this._notifyScopeListeners(),this}setExtras(Y){return this._extra={...this._extra,...Y},this._notifyScopeListeners(),this}setExtra(Y,Z){return this._extra={...this._extra,[Y]:Z},this._notifyScopeListeners(),this}setFingerprint(Y){return this._fingerprint=Y,this._notifyScopeListeners(),this}setLevel(Y){return this._level=Y,this._notifyScopeListeners(),this}setTransactionName(Y){return this._transactionName=Y,this._notifyScopeListeners(),this}setContext(Y,Z){if(Z===null)delete this._contexts[Y];else this._contexts[Y]=Z;return this._notifyScopeListeners(),this}setSpan(Y){return this._span=Y,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const Y=this.getSpan();return Y&&Y.transaction}setSession(Y){if(!Y)delete this._session;else this._session=Y;return this._notifyScopeListeners(),this}getSession(){return this._session}update(Y){if(!Y)return this;if(typeof Y==="function"){const Z=Y(this);return Z instanceof c?Z:this}if(Y instanceof c){if(this._tags={...this._tags,...Y._tags},this._extra={...this._extra,...Y._extra},this._contexts={...this._contexts,...Y._contexts},Y._user&&Object.keys(Y._user).length)this._user=Y._user;if(Y._level)this._level=Y._level;if(Y._fingerprint)this._fingerprint=Y._fingerprint;if(Y._requestSession)this._requestSession=Y._requestSession;if(Y._propagationContext)this._propagationContext=Y._propagationContext}else if(v(Y)){if(Y=Y,this._tags={...this._tags,...Y.tags},this._extra={...this._extra,...Y.extra},this._contexts={...this._contexts,...Y.contexts},Y.user)this._user=Y.user;if(Y.level)this._level=Y.level;if(Y.fingerprint)this._fingerprint=Y.fingerprint;if(Y.requestSession)this._requestSession=Y.requestSession;if(Y.propagationContext)this._propagationContext=Y.propagationContext}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=NQ(),this}addBreadcrumb(Y,Z){const $=typeof Z==="number"?Z:TX;if($<=0)return this;const Q={timestamp:E0(),...Y},X=this._breadcrumbs;return X.push(Q),this._breadcrumbs=X.length>$?X.slice(-$):X,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(Y){return this._attachments.push(Y),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(Y,Z={},$){if(this._extra&&Object.keys(this._extra).length)Y.extra={...this._extra,...Y.extra};if(this._tags&&Object.keys(this._tags).length)Y.tags={...this._tags,...Y.tags};if(this._user&&Object.keys(this._user).length)Y.user={...this._user,...Y.user};if(this._contexts&&Object.keys(this._contexts).length)Y.contexts={...this._contexts,...Y.contexts};if(this._level)Y.level=this._level;if(this._transactionName)Y.transaction=this._transactionName;if(this._span){Y.contexts={trace:this._span.getTraceContext(),...Y.contexts};const W=this._span.transaction;if(W){Y.sdkProcessingMetadata={dynamicSamplingContext:W.getDynamicSamplingContext(),...Y.sdkProcessingMetadata};const J=W.name;if(J)Y.tags={transaction:J,...Y.tags}}}this._applyFingerprint(Y);const Q=this._getBreadcrumbs(),X=[...Y.breadcrumbs||[],...Q];return Y.breadcrumbs=X.length>0?X:void 0,Y.sdkProcessingMetadata={...Y.sdkProcessingMetadata,...this._sdkProcessingMetadata,propagationContext:this._propagationContext},i0([...$||[],...LY(),...this._eventProcessors],Y,Z)}setSDKProcessingMetadata(Y){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...Y},this}setPropagationContext(Y){return this._propagationContext=Y,this}getPropagationContext(){return this._propagationContext}_getBreadcrumbs(){return this._breadcrumbs}_notifyScopeListeners(){if(!this._notifyingListeners)this._notifyingListeners=!0,this._scopeListeners.forEach((Y)=>{Y(this)}),this._notifyingListeners=!1}_applyFingerprint(Y){if(Y.fingerprint=Y.fingerprint?w0(Y.fingerprint):[],this._fingerprint)Y.fingerprint=Y.fingerprint.concat(this._fingerprint);if(Y.fingerprint&&!Y.fingerprint.length)delete Y.fingerprint}}var a=function(){return B.__SENTRY__=B.__SENTRY__||{extensions:{},hub:void 0},B},nY=function(Y){const Z=a(),$=l(Z);return o0(Z,Y),$},L=function(){const Y=a();if(Y.__SENTRY__&&Y.__SENTRY__.acs){const Z=Y.__SENTRY__.acs.getCurrentHub();if(Z)return Z}return MQ(Y)},MQ=function(Y=a()){if(!wQ(Y)||l(Y).isOlderThan(W$))o0(Y,new a0);return l(Y)},s0=function(Y,Z=MQ()){if(!wQ(Y)||l(Y).isOlderThan(W$)){const $=Z.getStackTop();o0(Y,new a0($.client,c.clone($.scope)))}},BY=function(Y){const Z=a();Z.__SENTRY__=Z.__SENTRY__||{},Z.__SENTRY__.acs=Y},tY=function(Y,Z={}){const $=a();if($.__SENTRY__&&$.__SENTRY__.acs)return $.__SENTRY__.acs.runWithAsyncContext(Y,Z);return Y()},wQ=function(Y){return!!(Y&&Y.__SENTRY__&&Y.__SENTRY__.hub)},l=function(Y){return VY("hub",()=>new a0,Y)},o0=function(Y,Z){if(!Y)return!1;const $=Y.__SENTRY__=Y.__SENTRY__||{};return $.hub=Z,!0},W$=4,AX=100;class a0{constructor(Y,Z=new c,$=W$){if(this._version=$,this._stack=[{scope:Z}],Y)this.bindClient(Y)}isOlderThan(Y){return this._version<Y}bindClient(Y){const Z=this.getStackTop();if(Z.client=Y,Y&&Y.setupIntegrations)Y.setupIntegrations()}pushScope(){const Y=c.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:Y}),Y}popScope(){if(this.getStack().length<=1)return!1;return!!this.getStack().pop()}withScope(Y){const Z=this.pushScope();try{Y(Z)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(Y,Z){const $=this._lastEventId=Z&&Z.event_id?Z.event_id:U(),Q=new Error("Sentry syntheticException");return this._withClient((X,W)=>{X.captureException(Y,{originalException:Y,syntheticException:Q,...Z,event_id:$},W)}),$}captureMessage(Y,Z,$){const Q=this._lastEventId=$&&$.event_id?$.event_id:U(),X=new Error(Y);return this._withClient((W,J)=>{W.captureMessage(Y,Z,{originalException:Y,syntheticException:X,...$,event_id:Q},J)}),Q}captureEvent(Y,Z){const $=Z&&Z.event_id?Z.event_id:U();if(!Y.type)this._lastEventId=$;return this._withClient((Q,X)=>{Q.captureEvent(Y,{...Z,event_id:$},X)}),$}lastEventId(){return this._lastEventId}addBreadcrumb(Y,Z){const{scope:$,client:Q}=this.getStackTop();if(!Q)return;const{beforeBreadcrumb:X=null,maxBreadcrumbs:W=AX}=Q.getOptions&&Q.getOptions()||{};if(W<=0)return;const K={timestamp:E0(),...Y},z=X?S(()=>X(K,Z)):K;if(z===null)return;if(Q.emit)Q.emit("beforeAddBreadcrumb",z,Z);$.addBreadcrumb(z,W)}setUser(Y){this.getScope().setUser(Y)}setTags(Y){this.getScope().setTags(Y)}setExtras(Y){this.getScope().setExtras(Y)}setTag(Y,Z){this.getScope().setTag(Y,Z)}setExtra(Y,Z){this.getScope().setExtra(Y,Z)}setContext(Y,Z){this.getScope().setContext(Y,Z)}configureScope(Y){const{scope:Z,client:$}=this.getStackTop();if($)Y(Z)}run(Y){const Z=nY(this);try{Y(this)}finally{nY(Z)}}getIntegration(Y){const Z=this.getClient();if(!Z)return null;try{return Z.getIntegration(Y)}catch($){return P&&w.warn(`Cannot retrieve integration ${Y.id} from the current Hub`),null}}startTransaction(Y,Z){const $=this._callExtensionMethod("startTransaction",Y,Z);if(P&&!$)if(!this.getClient())w.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'");else w.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`);return $}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(Y=!1){if(Y)return this.endSession();this._sendSessionUpdate()}endSession(){const Z=this.getStackTop().scope,$=Z.getSession();if($)GQ($);this._sendSessionUpdate(),Z.setSession()}startSession(Y){const{scope:Z,client:$}=this.getStackTop(),{release:Q,environment:X=l0}=$&&$.getOptions()||{},{userAgent:W}=B.navigator||{},J=VQ({release:Q,environment:X,user:Z.getUser(),...W&&{userAgent:W},...Y}),K=Z.getSession&&Z.getSession();if(K&&K.status==="ok")G0(K,{status:"exited"});return this.endSession(),Z.setSession(J),J}shouldSendDefaultPii(){const Y=this.getClient(),Z=Y&&Y.getOptions();return Boolean(Z&&Z.sendDefaultPii)}_sendSessionUpdate(){const{scope:Y,client:Z}=this.getStackTop(),$=Y.getSession();if($&&Z&&Z.captureSession)Z.captureSession($)}_withClient(Y){const{scope:Z,client:$}=this.getStackTop();if($)Y($,Z)}_callExtensionMethod(Y,...Z){const Q=a().__SENTRY__;if(Q&&Q.extensions&&typeof Q.extensions[Y]==="function")return Q.extensions[Y].apply(this,Z);P&&w.warn(`Extension method ${Y} couldn't be found, doing nothing.`)}}var J$=function(Y){return(Y||L()).getScope().getTransaction()};var RQ=function(){if(FQ)return;FQ=!0,hZ(K$),vZ(K$)},K$=function(){const Y=J$();if(Y)P&&w.log("[Tracing] Transaction: internal_error -> Global error occured"),Y.setStatus("internal_error")},FQ=!1;K$.tag="sentry_tracingErrorCallback";var jQ=function(Y){if(Y<400&&Y>=100)return"ok";if(Y>=400&&Y<500)switch(Y){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(Y>=500&&Y<600)switch(Y){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"};class z${constructor(Y=1000){this._maxlen=Y,this.spans=[]}add(Y){if(this.spans.length>this._maxlen)Y.spanRecorder=void 0;else this.spans.push(Y)}}class eY{constructor(Y={}){if(this.traceId=Y.traceId||U(),this.spanId=Y.spanId||U().substring(16),this.startTimestamp=Y.startTimestamp||k0(),this.tags=Y.tags||{},this.data=Y.data||{},this.instrumenter=Y.instrumenter||"sentry",this.origin=Y.origin||"manual",Y.parentSpanId)this.parentSpanId=Y.parentSpanId;if("sampled"in Y)this.sampled=Y.sampled;if(Y.op)this.op=Y.op;if(Y.description)this.description=Y.description;if(Y.name)this.description=Y.name;if(Y.status)this.status=Y.status;if(Y.endTimestamp)this.endTimestamp=Y.endTimestamp}get name(){return this.description||""}set name(Y){this.setName(Y)}startChild(Y){const Z=new eY({...Y,parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId});if(Z.spanRecorder=this.spanRecorder,Z.spanRecorder)Z.spanRecorder.add(Z);if(Z.transaction=this.transaction,P&&Z.transaction){const $=Y&&Y.op||"< unknown op >",Q=Z.transaction.name||"< unknown name >",X=Z.transaction.spanId,W=`[Tracing] Starting '${$}' span on transaction '${Q}' (${X}).`;Z.transaction.metadata.spanMetadata[Z.spanId]={logMessage:W},w.log(W)}return Z}setTag(Y,Z){return this.tags={...this.tags,[Y]:Z},this}setData(Y,Z){return this.data={...this.data,[Y]:Z},this}setStatus(Y){return this.status=Y,this}setHttpStatus(Y){this.setTag("http.status_code",String(Y)),this.setData("http.response.status_code",Y);const Z=jQ(Y);if(Z!=="unknown_error")this.setStatus(Z);return this}setName(Y){this.description=Y}isSuccess(){return this.status==="ok"}finish(Y){if(P&&this.transaction&&this.transaction.spanId!==this.spanId){const{logMessage:Z}=this.transaction.metadata.spanMetadata[this.spanId];if(Z)w.log(Z.replace("Starting","Finishing"))}this.endTimestamp=typeof Y==="number"?Y:k0()}toTraceparent(){return f0(this.traceId,this.spanId,this.sampled)}toContext(){return O({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})}updateWithContext(Y){return this.data=Y.data||{},this.description=Y.description,this.endTimestamp=Y.endTimestamp,this.op=Y.op,this.parentSpanId=Y.parentSpanId,this.sampled=Y.sampled,this.spanId=Y.spanId||this.spanId,this.startTimestamp=Y.startTimestamp||this.startTimestamp,this.status=Y.status,this.tags=Y.tags||{},this.traceId=Y.traceId||this.traceId,this}getTraceContext(){return O({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId,origin:this.origin})}toJSON(){return O({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId,origin:this.origin})}}var s=function(Y,Z,$){const Q=Z.getOptions(),{publicKey:X}=Z.getDsn()||{},{segment:W}=$&&$.getUser()||{},J=O({environment:Q.environment||l0,release:Q.release,user_segment:W,public_key:X,trace_id:Y});return Z.emit&&Z.emit("createDsc",J),J};class r0 extends eY{constructor(Y,Z){super(Y);delete this.description,this._measurements={},this._contexts={},this._hub=Z||L(),this._name=Y.name||"",this.metadata={source:"custom",...Y.metadata,spanMetadata:{}},this._trimEnd=Y.trimEnd,this.transaction=this;const $=this.metadata.dynamicSamplingContext;if($)this._frozenDynamicSamplingContext={...$}}get name(){return this._name}set name(Y){this.setName(Y)}setName(Y,Z="custom"){this._name=Y,this.metadata.source=Z}initSpanRecorder(Y=1000){if(!this.spanRecorder)this.spanRecorder=new z$(Y);this.spanRecorder.add(this)}setContext(Y,Z){if(Z===null)delete this._contexts[Y];else this._contexts[Y]=Z}setMeasurement(Y,Z,$=""){this._measurements[Y]={value:Z,unit:$}}setMetadata(Y){this.metadata={...this.metadata,...Y}}finish(Y){const Z=this._finishTransaction(Y);if(!Z)return;return this._hub.captureEvent(Z)}toContext(){const Y=super.toContext();return O({...Y,name:this.name,trimEnd:this._trimEnd})}updateWithContext(Y){return super.updateWithContext(Y),this.name=Y.name||"",this._trimEnd=Y.trimEnd,this}getDynamicSamplingContext(){if(this._frozenDynamicSamplingContext)return this._frozenDynamicSamplingContext;const Y=this._hub||L(),Z=Y.getClient();if(!Z)return{};const $=Y.getScope(),Q=s(this.traceId,Z,$),X=this.metadata.sampleRate;if(X!==void 0)Q.sample_rate=`${X}`;const W=this.metadata.source;if(W&&W!=="url")Q.transaction=this.name;if(this.sampled!==void 0)Q.sampled=String(this.sampled);return Q}setHub(Y){this._hub=Y}_finishTransaction(Y){if(this.endTimestamp!==void 0)return;if(!this.name)P&&w.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>";super.finish(Y);const Z=this._hub.getClient();if(Z&&Z.emit)Z.emit("finishTransaction",this);if(this.sampled!==!0){if(P&&w.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),Z)Z.recordDroppedEvent("sample_rate","transaction");return}const $=this.spanRecorder?this.spanRecorder.spans.filter((J)=>J!==this&&J.endTimestamp):[];if(this._trimEnd&&$.length>0)this.endTimestamp=$.reduce((J,K)=>{if(J.endTimestamp&&K.endTimestamp)return J.endTimestamp>K.endTimestamp?J:K;return J}).endTimestamp;const Q=this.metadata,X={contexts:{...this._contexts,trace:this.getTraceContext()},spans:$,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",sdkProcessingMetadata:{...Q,dynamicSamplingContext:this.getDynamicSamplingContext()},...Q.source&&{transaction_info:{source:Q.source}}};if(Object.keys(this._measurements).length>0)P&&w.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),X.measurements=this._measurements;return P&&w.log(`[Tracing] Finishing ${this.op} transaction: ${this.name}.`),X}}var HQ=function(Y,Z,$,Q,X){const{normalizeDepth:W=3,normalizeMaxBreadth:J=1000}=Y,K={...Z,event_id:Z.event_id||$.event_id||U(),timestamp:Z.timestamp||E0()},z=$.integrations||Y.integrations.map((M)=>M.name);if(UX(K,Y),IX(K,z),Z.type===void 0)DX(K,Y.stackParser);let N=Q;if($.captureContext)N=c.clone(N).update($.captureContext);if($.mechanism)MY(K,$.mechanism);let V=g(K);const G=X&&X.getEventProcessors?X.getEventProcessors():[];if(N){if(N.getAttachments){const M=[...$.attachments||[],...N.getAttachments()];if(M.length)$.attachments=M}V=N.applyToEvent(K,$,G)}else V=i0([...G,...LY()],K,$);return V.then((M)=>{if(M)OX(M);if(typeof W==="number"&&W>0)return qX(M,W,J);return M})},UX=function(Y,Z){const{environment:$,release:Q,dist:X,maxValueLength:W=250}=Z;if(!("environment"in Y))Y.environment=("environment"in Z)?$:l0;if(Y.release===void 0&&Q!==void 0)Y.release=Q;if(Y.dist===void 0&&X!==void 0)Y.dist=X;if(Y.message)Y.message=Z0(Y.message,W);const J=Y.exception&&Y.exception.values&&Y.exception.values[0];if(J&&J.value)J.value=Z0(J.value,W);const K=Y.request;if(K&&K.url)K.url=Z0(K.url,W)},DX=function(Y,Z){const $=B._sentryDebugIds;if(!$)return;let Q;const X=PQ.get(Z);if(X)Q=X;else Q=new Map,PQ.set(Z,Q);const W=Object.keys($).reduce((J,K)=>{let z;const N=Q.get(K);if(N)z=N;else z=Z(K),Q.set(K,z);for(let V=z.length-1;V>=0;V--){const G=z[V];if(G.filename){J[G.filename]=$[K];break}}return J},{});try{Y.exception.values.forEach((J)=>{J.stacktrace.frames.forEach((K)=>{if(K.filename)K.debug_id=W[K.filename]})})}catch(J){}},OX=function(Y){const Z={};try{Y.exception.values.forEach((Q)=>{Q.stacktrace.frames.forEach((X)=>{if(X.debug_id){if(X.abs_path)Z[X.abs_path]=X.debug_id;else if(X.filename)Z[X.filename]=X.debug_id;delete X.debug_id}})})}catch(Q){}if(Object.keys(Z).length===0)return;Y.debug_meta=Y.debug_meta||{},Y.debug_meta.images=Y.debug_meta.images||[];const $=Y.debug_meta.images;Object.keys(Z).forEach((Q)=>{$.push({type:"sourcemap",code_file:Q,debug_id:Z[Q]})})},IX=function(Y,Z){if(Z.length>0)Y.sdk=Y.sdk||{},Y.sdk.integrations=[...Y.sdk.integrations||[],...Z]},qX=function(Y,Z,$){if(!Y)return null;const Q={...Y,...Y.breadcrumbs&&{breadcrumbs:Y.breadcrumbs.map((X)=>({...X,...X.data&&{data:m(X.data,Z,$)}}))},...Y.user&&{user:m(Y.user,Z,$)},...Y.contexts&&{contexts:m(Y.contexts,Z,$)},...Y.extra&&{extra:m(Y.extra,Z,$)}};if(Y.contexts&&Y.contexts.trace&&Q.contexts){if(Q.contexts.trace=Y.contexts.trace,Y.contexts.trace.data)Q.contexts.trace.data=m(Y.contexts.trace.data,Z,$)}if(Y.spans)Q.spans=Y.spans.map((X)=>{if(X.data)X.data=m(X.data,Z,$);return X});return Q},LQ=function(Y){if(!Y)return;if(EX(Y))return{captureContext:Y};if(fX(Y))return{captureContext:Y};return Y},EX=function(Y){return Y instanceof c||typeof Y==="function"},fX=function(Y){return Object.keys(Y).some((Z)=>kX.includes(Z))},PQ=new WeakMap,kX=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];var n0=function(Y,Z){return L().captureException(Y,LQ(Z))};var j0=function(){return L().getClient()};var YZ=function(Y){if(typeof __SENTRY_TRACING__==="boolean"&&!__SENTRY_TRACING__)return!1;const Z=j0(),$=Y||Z&&Z.getOptions();return!!$&&($.enableTracing||("tracesSampleRate"in $)||("tracesSampler"in $))};var BQ=function(Y,Z,$){if(!YZ(Z))return Y.sampled=!1,Y;if(Y.sampled!==void 0)return Y.setMetadata({sampleRate:Number(Y.sampled)}),Y;let Q;if(typeof Z.tracesSampler==="function")Q=Z.tracesSampler($),Y.setMetadata({sampleRate:Number(Q)});else if($.parentSampled!==void 0)Q=$.parentSampled;else if(typeof Z.tracesSampleRate!=="undefined")Q=Z.tracesSampleRate,Y.setMetadata({sampleRate:Number(Q)});else Q=1,Y.setMetadata({sampleRate:Q});if(!SX(Q))return P&&w.warn("[Tracing] Discarding transaction because of invalid sample rate."),Y.sampled=!1,Y;if(!Q)return P&&w.log(`[Tracing] Discarding transaction because ${typeof Z.tracesSampler==="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),Y.sampled=!1,Y;if(Y.sampled=Math.random()<Q,!Y.sampled)return P&&w.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(Q)})`),Y;return P&&w.log(`[Tracing] starting ${Y.op} transaction - ${Y.name}`),Y},SX=function(Y){if(JY(Y)||!(typeof Y==="number"||typeof Y==="boolean"))return P&&w.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(Y)} of type ${JSON.stringify(typeof Y)}.`),!1;if(Y<0||Y>1)return P&&w.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${Y}.`),!1;return!0};var CX=function(){const Z=this.getScope().getSpan();return Z?{"sentry-trace":Z.toTraceparent()}:{}},yX=function(Y,Z){const $=this.getClient(),Q=$&&$.getOptions()||{},X=Q.instrumenter||"sentry",W=Y.instrumenter||"sentry";if(X!==W)P&&w.error(`A transaction was started with instrumenter=\`${W}\`, but the SDK is configured with the \`${X}\` instrumenter.
The transaction will not be sampled. Please use the ${X} instrumentation to start transactions.`),Y.sampled=!1;let J=new r0(Y,this);if(J=BQ(J,Q,{parentSampled:Y.parentSampled,transactionContext:Y,...Z}),J.sampled)J.initSpanRecorder(Q._experiments&&Q._experiments.maxSpans);if($&&$.emit)$.emit("startTransaction",J);return J};var TQ=function(){const Y=a();if(!Y.__SENTRY__)return;if(Y.__SENTRY__.extensions=Y.__SENTRY__.extensions||{},!Y.__SENTRY__.extensions.startTransaction)Y.__SENTRY__.extensions.startTransaction=yX;if(!Y.__SENTRY__.extensions.traceHeaders)Y.__SENTRY__.extensions.traceHeaders=CX;RQ()};var ZZ=function(Y,Z,$=()=>{}){const Q=UQ(Y),X=L(),W=X.getScope(),J=W.getSpan(),K=AQ(X,J,Q);W.setSpan(K);function z(){K&&K.finish(),X.getScope().setSpan(J)}let N;try{N=Z(K)}catch(V){throw K&&K.setStatus("internal_error"),$(V),z(),V}if(k(N))Promise.resolve(N).then(()=>{z()},(V)=>{K&&K.setStatus("internal_error"),$(V),z()});else z();return N},$Z=function(Y,Z){const $=UQ(Y),Q=L(),X=Q.getScope(),W=X.getSpan(),J=AQ(Q,W,$);X.setSpan(J);function K(){J&&J.finish(),Q.getScope().setSpan(W)}let z;try{z=Z(J)}catch(N){throw J&&J.setStatus("internal_error"),K(),N}if(k(z))Promise.resolve(z).then(()=>{K()},()=>{J&&J.setStatus("internal_error"),K()});else K();return z};var QZ=function({sentryTrace:Y,baggage:Z},$){const X=L().getScope(),{traceparentData:W,dynamicSamplingContext:J,propagationContext:K}=jY(Y,Z);if(X.setPropagationContext(K),P&&W)w.log(`[Tracing] Continuing trace ${W.traceId}.`);const z={...W,metadata:O({dynamicSamplingContext:W&&!J?{}:J})};if(!$)return z;return $(z)},AQ=function(Y,Z,$){if(!YZ())return;return Z?Z.startChild($):Y.startTransaction($)},UQ=function(Y){const Z={...Y};if(Z.name!==void 0&&Z.description===void 0)Z.description=Z.name;return Z};var _X=function(Y,Z){if(!Z)return Y;return Y.sdk=Y.sdk||{},Y.sdk.name=Y.sdk.name||Z.name,Y.sdk.version=Y.sdk.version||Z.version,Y.sdk.integrations=[...Y.sdk.integrations||[],...Z.integrations||[]],Y.sdk.packages=[...Y.sdk.packages||[],...Z.packages||[]],Y},DQ=function(Y,Z,$,Q){const X=oY($),W={sent_at:(new Date()).toISOString(),...X&&{sdk:X},...!!Q&&Z&&{dsn:M0(Z)}},J="aggregates"in Y?[{type:"sessions"},Y]:[{type:"session"},Y.toJSON()];return R0(W,[J])},OQ=function(Y,Z,$,Q){const X=oY($),W=Y.type&&Y.type!=="replay_event"?Y.type:"event";_X(Y,$&&$.sdk);const J=tZ(Y,X,Q,Z);return delete Y.sdkProcessingMetadata,R0(J,[[{type:W},Y]])};class V${constructor(Y,Z){this._client=Y,this.flushTimeout=60,this._pendingAggregates={},this._isEnabled=!0,this._intervalId=setInterval(()=>this.flush(),this.flushTimeout*1000),this._sessionAttrs=Z}flush(){const Y=this.getSessionAggregates();if(Y.aggregates.length===0)return;this._pendingAggregates={},this._client.sendSession(Y)}getSessionAggregates(){const Y=Object.keys(this._pendingAggregates).map(($)=>{return this._pendingAggregates[parseInt($)]}),Z={attrs:this._sessionAttrs,aggregates:Y};return O(Z)}close(){clearInterval(this._intervalId),this._isEnabled=!1,this.flush()}incrementSessionStatusCount(){if(!this._isEnabled)return;const Y=L().getScope(),Z=Y.getRequestSession();if(Z&&Z.status)this._incrementSessionStatusCount(Z.status,new Date),Y.setRequestSession(void 0)}_incrementSessionStatusCount(Y,Z){const $=new Date(Z).setSeconds(0,0);this._pendingAggregates[$]=this._pendingAggregates[$]||{};const Q=this._pendingAggregates[$];if(!Q.started)Q.started=new Date($).toISOString();switch(Y){case"errored":return Q.errored=(Q.errored||0)+1,Q.errored;case"ok":return Q.exited=(Q.exited||0)+1,Q.exited;default:return Q.crashed=(Q.crashed||0)+1,Q.crashed}}}var xX=function(Y){const Z=Y.protocol?`${Y.protocol}:`:"",$=Y.port?`:${Y.port}`:"";return`${Z}//${Y.host}${$}${Y.path?`/${Y.path}`:""}/api/`},hX=function(Y){return`${xX(Y)}${Y.projectId}/envelope/`},vX=function(Y,Z){return EZ({sentry_key:Y.publicKey,sentry_version:bX,...Z&&{sentry_client:`${Z.name}/${Z.version}`}})},IQ=function(Y,Z={}){const $=typeof Z==="string"?Z:Z.tunnel,Q=typeof Z==="string"||!Z._metadata?void 0:Z._metadata.sdk;return $?$:`${hX(Y)}?${vX(Y,Q)}`};var bX="7";var mX=function(Y){const Z={};return Y.forEach(($)=>{const{name:Q}=$,X=Z[Q];if(X&&!X.isDefaultInstance&&$.isDefaultInstance)return;Z[Q]=$}),Object.keys(Z).map(($)=>Z[$])},G$=function(Y){const Z=Y.defaultIntegrations||[],$=Y.integrations;Z.forEach((J)=>{J.isDefaultInstance=!0});let Q;if(Array.isArray($))Q=[...Z,...$];else if(typeof $==="function")Q=w0($(Z));else Q=Z;const X=mX(Q),W=gX(X,(J)=>J.name==="Debug");if(W!==-1){const[J]=X.splice(W,1);X.push(J)}return X},EQ=function(Y,Z){const $={};return Z.forEach((Q)=>{if(Q)N$(Y,Q,$)}),$},N$=function(Y,Z,$){if($[Z.name]=Z,qQ.indexOf(Z.name)===-1)Z.setupOnce(X$,L),qQ.push(Z.name);if(Z.setup&&typeof Z.setup==="function")Z.setup(Y);if(Y.on&&typeof Z.preprocessEvent==="function"){const Q=Z.preprocessEvent.bind(Z);Y.on("preprocessEvent",(X,W)=>Q(X,W,Y))}if(Y.addEventProcessor&&typeof Z.processEvent==="function"){const Q=Z.processEvent.bind(Z),X=Object.assign((W,J)=>Q(W,J,Y),{id:Z.name});Y.addEventProcessor(X)}P&&w.log(`Integration installed: ${Z.name}`)};var gX=function(Y,Z){for(let $=0;$<Y.length;$++)if(Z(Y[$])===!0)return $;return-1},qQ=[];var dX=function(Y,Z){const $=`${Z} must return \`null\` or a valid event.`;if(k(Y))return Y.then((Q)=>{if(!v(Q)&&Q!==null)throw new C($);return Q},(Q)=>{throw new C(`${Z} rejected with ${Q}`)});else if(!v(Y)&&Y!==null)throw new C($);return Y},uX=function(Y,Z,$){const{beforeSend:Q,beforeSendTransaction:X}=Y;if(fQ(Z)&&Q)return Q(Z,$);if(SQ(Z)&&X)return X(Z,$);return Z},fQ=function(Y){return Y.type===void 0},SQ=function(Y){return Y.type==="transaction"},kQ="Not capturing exception because it's already been captured.";class M${constructor(Y){if(this._options=Y,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],Y.dsn)this._dsn=vY(Y.dsn);else P&&w.warn("No DSN provided, client will not send events.");if(this._dsn){const Z=IQ(this._dsn,Y);this._transport=Y.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...Y.transportOptions,url:Z})}}captureException(Y,Z,$){if(uY(Y)){P&&w.log(kQ);return}let Q=Z&&Z.event_id;return this._process(this.eventFromException(Y,Z).then((X)=>this._captureEvent(X,Z,$)).then((X)=>{Q=X})),Q}captureMessage(Y,Z,$,Q){let X=$&&$.event_id;const W=bY(Y)?this.eventFromMessage(String(Y),Z,$):this.eventFromException(Y,$);return this._process(W.then((J)=>this._captureEvent(J,$,Q)).then((J)=>{X=J})),X}captureEvent(Y,Z,$){if(Z&&Z.originalException&&uY(Z.originalException)){P&&w.log(kQ);return}let Q=Z&&Z.event_id;return this._process(this._captureEvent(Y,Z,$).then((X)=>{Q=X})),Q}captureSession(Y){if(typeof Y.release!=="string")P&&w.warn("Discarded session because of missing or non-string release");else this.sendSession(Y),G0(Y,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(Y){const Z=this._transport;if(Z)return this._isClientDoneProcessing(Y).then(($)=>{return Z.flush(Y).then((Q)=>$&&Q)});else return g(!0)}close(Y){return this.flush(Y).then((Z)=>{return this.getOptions().enabled=!1,Z})}getEventProcessors(){return this._eventProcessors}addEventProcessor(Y){this._eventProcessors.push(Y)}setupIntegrations(Y){if(Y&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)this._integrations=EQ(this,this._options.integrations),this._integrationsInitialized=!0}getIntegrationById(Y){return this._integrations[Y]}getIntegration(Y){try{return this._integrations[Y.id]||null}catch(Z){return P&&w.warn(`Cannot retrieve integration ${Y.id} from the current Client`),null}}addIntegration(Y){N$(this,Y,this._integrations)}sendEvent(Y,Z={}){this.emit("beforeSendEvent",Y,Z);let $=OQ(Y,this._dsn,this._options._metadata,this._options.tunnel);for(let X of Z.attachments||[])$=rZ($,nZ(X,this._options.transportOptions&&this._options.transportOptions.textEncoder));const Q=this._sendEnvelope($);if(Q)Q.then((X)=>this.emit("afterSendEvent",Y,X),null)}sendSession(Y){const Z=DQ(Y,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(Z)}recordDroppedEvent(Y,Z,$){if(this._options.sendClientReports){const Q=`${Y}:${Z}`;P&&w.log(`Adding outcome: "${Q}"`),this._outcomes[Q]=this._outcomes[Q]+1||1}}on(Y,Z){if(!this._hooks[Y])this._hooks[Y]=[];this._hooks[Y].push(Z)}emit(Y,...Z){if(this._hooks[Y])this._hooks[Y].forEach(($)=>$(...Z))}_updateSessionFromEvent(Y,Z){let $=!1,Q=!1;const X=Z.exception&&Z.exception.values;if(X){Q=!0;for(let K of X){const z=K.mechanism;if(z&&z.handled===!1){$=!0;break}}}const W=Y.status==="ok";if(W&&Y.errors===0||W&&$)G0(Y,{...$&&{status:"crashed"},errors:Y.errors||Number(Q||$)}),this.captureSession(Y)}_isClientDoneProcessing(Y){return new f((Z)=>{let $=0;const Q=1,X=setInterval(()=>{if(this._numProcessing==0)clearInterval(X),Z(!0);else if($+=Q,Y&&$>=Y)clearInterval(X),Z(!1)},Q)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(Y,Z,$){const Q=this.getOptions(),X=Object.keys(this._integrations);if(!Z.integrations&&X.length>0)Z.integrations=X;return this.emit("preprocessEvent",Y,Z),HQ(Q,Y,Z,$,this).then((W)=>{if(W===null)return W;const{propagationContext:J}=W.sdkProcessingMetadata||{};if(!(W.contexts&&W.contexts.trace)&&J){const{traceId:z,spanId:N,parentSpanId:V,dsc:G}=J;W.contexts={trace:{trace_id:z,span_id:N,parent_span_id:V},...W.contexts};const M=G?G:s(z,this,$);W.sdkProcessingMetadata={dynamicSamplingContext:M,...W.sdkProcessingMetadata}}return W})}_captureEvent(Y,Z={},$){return this._processEvent(Y,Z,$).then((Q)=>{return Q.event_id},(Q)=>{if(P){const X=Q;if(X.logLevel==="log")w.log(X.message);else w.warn(X)}return})}_processEvent(Y,Z,$){const Q=this.getOptions(),{sampleRate:X}=Q,W=SQ(Y),J=fQ(Y),K=Y.type||"error",z=`before send for type \`${K}\``;if(J&&typeof X==="number"&&Math.random()>X)return this.recordDroppedEvent("sample_rate","error",Y),O0(new C(`Discarding event because it's not included in the random sample (sampling rate = ${X})`,"log"));const N=K==="replay_event"?"replay":K;return this._prepareEvent(Y,Z,$).then((V)=>{if(V===null)throw this.recordDroppedEvent("event_processor",N,Y),new C("An event processor returned `null`, will not send event.","log");if(Z.data&&Z.data.__sentry__===!0)return V;const M=uX(Q,V,Z);return dX(M,z)}).then((V)=>{if(V===null)throw this.recordDroppedEvent("before_send",N,Y),new C(`${z} returned \`null\`, will not send event.`,"log");const G=$&&$.getSession();if(!W&&G)this._updateSessionFromEvent(G,V);const M=V.transaction_info;if(W&&M&&V.transaction!==Y.transaction)V.transaction_info={...M,source:"custom"};return this.sendEvent(V,Z),V}).then(null,(V)=>{if(V instanceof C)throw V;throw this.captureException(V,{data:{__sentry__:!0},originalException:V}),new C(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${V}`)})}_process(Y){this._numProcessing++,Y.then((Z)=>{return this._numProcessing--,Z},(Z)=>{return this._numProcessing--,Z})}_sendEnvelope(Y){if(this.emit("beforeEnvelope",Y),this._isEnabled()&&this._transport)return this._transport.send(Y).then(null,(Z)=>{P&&w.error("Error while sending event:",Z)});else P&&w.error("Transport disabled")}_clearOutcomes(){const Y=this._outcomes;return this._outcomes={},Object.keys(Y).map((Z)=>{const[$,Q]=Z.split(":");return{reason:$,category:Q,quantity:Y[Z]}})}}var CQ=function(Y,Z,$,Q,X){const W={sent_at:(new Date()).toISOString()};if($&&$.sdk)W.sdk={name:$.sdk.name,version:$.sdk.version};if(!!Q&&!!X)W.dsn=M0(X);if(Z)W.trace=O(Z);const J=pX(Y);return R0(W,[J])},pX=function(Y){return[{type:"check_in"},Y]};class t0 extends M${constructor(Y){TQ();super(Y)}eventFromException(Y,Z){return g($$(L,this._options.stackParser,Y,Z))}eventFromMessage(Y,Z="info",$){return g(Q$(this._options.stackParser,Y,Z,$,this._options.attachStacktrace))}captureException(Y,Z,$){if(this._options.autoSessionTracking&&this._sessionFlusher&&$){const Q=$.getRequestSession();if(Q&&Q.status==="ok")Q.status="errored"}return super.captureException(Y,Z,$)}captureEvent(Y,Z,$){if(this._options.autoSessionTracking&&this._sessionFlusher&&$){if((Y.type||"exception")==="exception"&&Y.exception&&Y.exception.values&&Y.exception.values.length>0){const W=$.getRequestSession();if(W&&W.status==="ok")W.status="errored"}}return super.captureEvent(Y,Z,$)}close(Y){if(this._sessionFlusher)this._sessionFlusher.close();return super.close(Y)}initSessionFlusher(){const{release:Y,environment:Z}=this._options;if(!Y)P&&w.warn("Cannot initialise an instance of SessionFlusher if no release is provided!");else this._sessionFlusher=new V$(this,{release:Y,environment:Z})}captureCheckIn(Y,Z,$){const Q=Y.status!=="in_progress"&&Y.checkInId?Y.checkInId:U();if(!this._isEnabled())return P&&w.warn("SDK not enabled, will not capture checkin."),Q;const X=this.getOptions(),{release:W,environment:J,tunnel:K}=X,z={check_in_id:Q,monitor_slug:Y.monitorSlug,status:Y.status,release:W,environment:J};if(Y.status!=="in_progress")z.duration=Y.duration;if(Z)z.monitor_config={schedule:Z.schedule,checkin_margin:Z.checkinMargin,max_runtime:Z.maxRuntime,timezone:Z.timezone};const[N,V]=this._getTraceInfoFromScope($);if(V)z.contexts={trace:V};const G=CQ(z,N,this.getSdkMetadata(),K,this.getDsn());return P&&w.info("Sending checkin:",Y.monitorSlug,Y.status),this._sendEnvelope(G),Q}_captureRequestSession(){if(!this._sessionFlusher)P&&w.warn("Discarded request mode session because autoSessionTracking option was disabled");else this._sessionFlusher.incrementSessionStatusCount()}_prepareEvent(Y,Z,$){if(this._options.platform)Y.platform=Y.platform||this._options.platform;if(this._options.runtime)Y.contexts={...Y.contexts,runtime:(Y.contexts||{}).runtime||this._options.runtime};if(this._options.serverName)Y.server_name=Y.server_name||this._options.serverName;return super._prepareEvent(Y,Z,$)}_getTraceInfoFromScope(Y){if(!Y)return[void 0,void 0];const Z=Y.getSpan();if(Z)return[Z.transaction?Z.transaction.getDynamicSamplingContext():void 0,Z.getTraceContext()];const{traceId:$,spanId:Q,parentSpanId:X,dsc:W}=Y.getPropagationContext(),J={trace_id:$,span_id:Q,parent_span_id:X};if(W)return[W,J];return[s($,this,Y),J]}}var w$=function(Y,Z){if(Z.debug===!0)if(P)w.enable();else S(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")});const $=L();$.getScope().update(Z.initialScope);const X=new Y(Z);$.bindClient(X)};var S0=function(Y,Z,$=dZ(Y.bufferSize||cX)){let Q={};const X=(J)=>$.drain(J);function W(J){const K=[];if(aY(J,(G,M)=>{const R=sY(M);if(eZ(Q,R)){const j=yQ(G,M);Y.recordDroppedEvent("ratelimit_backoff",R,j)}else K.push(G)}),K.length===0)return g();const z=R0(J[0],K),N=(G)=>{aY(z,(M,R)=>{const j=yQ(M,R);Y.recordDroppedEvent(G,sY(R),j)})},V=()=>Z({body:PY(z,Y.textEncoder)}).then((G)=>{if(G.statusCode!==void 0&&(G.statusCode<200||G.statusCode>=300))P&&w.warn(`Sentry responded with status code ${G.statusCode} to sent event.`);return Q=Y$(Q,G),G},(G)=>{throw N("network_error"),G});return $.add(V).then((G)=>G,(G)=>{if(G instanceof C)return P&&w.error("Skipped sending event because buffer is full."),N("queue_overflow"),g();else throw G})}return W.__sentry__baseTransport__=!0,{send:W,flush:X}},yQ=function(Y,Z){if(Z!=="event"&&Z!=="transaction")return;return Array.isArray(Y)?Y[1]:void 0},cX=30;var P0="7.84.0";var b={};_Y(b,{LinkedErrors:()=>{{return KZ}},InboundFilters:()=>{{return JZ}},FunctionToString:()=>{{return XZ}}});var _Q;class XZ{static __initStatic(){this.id="FunctionToString"}constructor(){this.name=XZ.id}setupOnce(){_Q=Function.prototype.toString;try{Function.prototype.toString=function(...Y){const Z=qZ(this)||this;return _Q.apply(Z,Y)}}catch(Y){}}}XZ.__initStatic();var aX=function(Y={},Z={}){return{allowUrls:[...Y.allowUrls||[],...Z.allowUrls||[]],denyUrls:[...Y.denyUrls||[],...Z.denyUrls||[]],ignoreErrors:[...Y.ignoreErrors||[],...Z.ignoreErrors||[],...Y.disableErrorDefaults?[]:lX],ignoreTransactions:[...Y.ignoreTransactions||[],...Z.ignoreTransactions||[],...Y.disableTransactionDefaults?[]:iX],ignoreInternal:Y.ignoreInternal!==void 0?Y.ignoreInternal:!0}},sX=function(Y,Z){if(Z.ignoreInternal&&YW(Y))return P&&w.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${z0(Y)}`),!0;if(oX(Y,Z.ignoreErrors))return P&&w.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${z0(Y)}`),!0;if(rX(Y,Z.ignoreTransactions))return P&&w.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${z0(Y)}`),!0;if(nX(Y,Z.denyUrls))return P&&w.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${z0(Y)}.\nUrl: ${WZ(Y)}`),!0;if(!tX(Y,Z.allowUrls))return P&&w.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${z0(Y)}.\nUrl: ${WZ(Y)}`),!0;return!1},oX=function(Y,Z){if(Y.type||!Z||!Z.length)return!1;return eX(Y).some(($)=>$0($,Z))},rX=function(Y,Z){if(Y.type!=="transaction"||!Z||!Z.length)return!1;const $=Y.transaction;return $?$0($,Z):!1},nX=function(Y,Z){if(!Z||!Z.length)return!1;const $=WZ(Y);return!$?!1:$0($,Z)},tX=function(Y,Z){if(!Z||!Z.length)return!0;const $=WZ(Y);return!$?!0:$0($,Z)},eX=function(Y){const Z=[];if(Y.message)Z.push(Y.message);let $;try{$=Y.exception.values[Y.exception.values.length-1]}catch(Q){}if($){if($.value){if(Z.push($.value),$.type)Z.push(`${$.type}: ${$.value}`)}}if(P&&Z.length===0)w.error(`Could not extract message for event ${z0(Y)}`);return Z},YW=function(Y){try{return Y.exception.values[0].type==="SentryError"}catch(Z){}return!1},ZW=function(Y=[]){for(let Z=Y.length-1;Z>=0;Z--){const $=Y[Z];if($&&$.filename!=="<anonymous>"&&$.filename!=="[native code]")return $.filename||null}return null},WZ=function(Y){try{let Z;try{Z=Y.exception.values[0].stacktrace.frames}catch($){}return Z?ZW(Z):null}catch(Z){return P&&w.error(`Cannot extract url for event ${z0(Y)}`),null}},lX=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],iX=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/];class JZ{static __initStatic(){this.id="InboundFilters"}constructor(Y={}){this.name=JZ.id,this._options=Y}setupOnce(Y,Z){}processEvent(Y,Z,$){const Q=$.getOptions(),X=aX(this._options,Q);return sX(Y,X)?null:Y}}JZ.__initStatic();var $W="cause",QW=5;class KZ{static __initStatic(){this.id="LinkedErrors"}constructor(Y={}){this._key=Y.key||$W,this._limit=Y.limit||QW,this.name=KZ.id}setupOnce(){}preprocessEvent(Y,Z,$){const Q=$.getOptions();OZ(rY,Q.stackParser,Q.maxValueLength,this._key,this._limit,Y,Z)}}KZ.__initStatic();var C0=function(Y,Z){const $=Z.getClient(),Q=$&&$.getDsn(),X=$&&$.getOptions().tunnel;return WW(Y,Q)||XW(Y,X)},XW=function(Y,Z){if(!Z)return!1;return bQ(Y)===bQ(Z)},WW=function(Y,Z){return Z?Y.includes(Z.host):!1},bQ=function(Y){return Y[Y.length-1]==="/"?Y.slice(0,-1):Y};var JW=function(Y){const{transactionNamingScheme:Z,include:{ip:$,user:Q,...X}}=Y,W=[];for(let[K,z]of Object.entries(X))if(z)W.push(K);let J;if(Q===void 0)J=!0;else if(typeof Q==="boolean")J=Q;else{const K=[];for(let[z,N]of Object.entries(Q))if(N)K.push(z);J=K}return{include:{ip:$,user:J,request:W.length!==0?W:void 0,transaction:Z}}},KW=function(Y){try{return Y.getClient().getOptions()._metadata.sdk.name}catch(Z){return}},F$={include:{cookies:!0,data:!0,headers:!0,ip:!1,query_string:!0,url:!0,user:{id:!0,username:!0,email:!0}},transactionNamingScheme:"methodPath"};class H0{static __initStatic(){this.id="RequestData"}constructor(Y={}){this.name=H0.id,this._addRequestData=pZ,this._options={...F$,...Y,include:{method:!0,...F$.include,...Y.include,user:Y.include&&typeof Y.include.user==="boolean"?Y.include.user:{...F$.include.user,...(Y.include||{}).user}}}}setupOnce(Y,Z){const{transactionNamingScheme:$}=this._options;Y((Q)=>{const X=Z(),W=X.getIntegration(H0),{sdkProcessingMetadata:J={}}=Q,K=J.request;if(!W||!K)return Q;const z=J.requestDataOptionsFromExpressHandler||J.requestDataOptionsFromGCPWrapper||JW(this._options),N=this._addRequestData(Q,K,z);if(Q.type==="transaction"||$==="handler")return N;const G=K._sentryTransaction;if(G){const M=KW(X)==="sentry.javascript.nextjs"?G.name.startsWith("/api"):$!=="path",[R]=q0(K,{path:!0,method:M,customRoute:G.name});N.transaction=R}return N})}}H0.__initStatic();var A=typeof __SENTRY_DEBUG__==="undefined"||__SENTRY_DEBUG__;var x=function(Y){const Z=F([Y,"call",(Q)=>Q(),"access",(Q)=>Q.getClient,"call",(Q)=>Q(),"optionalAccess",(Q)=>Q.getOptions,"call",(Q)=>Q()]);return(F([Z,"optionalAccess",(Q)=>Q.instrumenter])||"sentry")!=="sentry"};var xQ=function(Y,Z){const $=Y.length;switch($){case 2:return function(Q,X){const W=X.__sentry_transaction;if(W){const J=W.startChild({description:Y.name,op:`middleware.express.${Z}`,origin:"auto.middleware.express"});X.once("finish",()=>{J.finish()})}return Y.call(this,Q,X)};case 3:return function(Q,X,W){const J=X.__sentry_transaction,K=F([J,"optionalAccess",(z)=>z.startChild,"call",(z)=>z({description:Y.name,op:`middleware.express.${Z}`,origin:"auto.middleware.express"})]);Y.call(this,Q,X,function(...z){F([K,"optionalAccess",(N)=>N.finish,"call",(N)=>N()]),W.call(this,...z)})};case 4:return function(Q,X,W,J){const K=W.__sentry_transaction,z=F([K,"optionalAccess",(N)=>N.startChild,"call",(N)=>N({description:Y.name,op:`middleware.express.${Z}`,origin:"auto.middleware.express"})]);Y.call(this,Q,X,W,function(...N){F([z,"optionalAccess",(V)=>V.finish,"call",(V)=>V()]),J.call(this,...N)})};default:throw new Error(`Express middleware takes 2-4 arguments. Got: ${$}`)}},kW=function(Y,Z){return Y.map(($)=>{if(typeof $==="function")return xQ($,Z);if(Array.isArray($))return $.map((Q)=>{if(typeof Q==="function")return xQ(Q,Z);return Q});return $})},fW=function(Y,Z){const $=Y[Z];return Y[Z]=function(...Q){return $.call(this,...kW(Q,Z))},Y},SW=function(Y,Z=[]){Z.forEach(($)=>fW(Y,$))},CW=function(Y){const Z="settings"in Y;if(Z&&Y._router===void 0&&Y.lazyrouter)Y.lazyrouter();const $=Z?Y._router:Y;if(!$){A&&w.debug("Cannot instrument router for URL Parameterization (did not find a valid router)."),A&&w.debug("Routing instrumentation is currently only supported in Express 4.");return}const Q=Object.getPrototypeOf($),X=Q.process_params;Q.process_params=function W(J,K,z,N,V){if(!z._reconstructedRoute)z._reconstructedRoute="";const{layerRoutePath:G,isRegex:M,isArray:R,numExtraSegments:j}=_W(J);if(G||M||R)z._hasParameters=!0;let H;if(G)H=G;else H=hW(z.originalUrl,z._reconstructedRoute,J.path)||"";const T=H.split("/").filter((r)=>r.length>0&&(M||R||!r.includes("*"))).join("/");if(T&&T.length>0)z._reconstructedRoute+=`/${T}${M?"/":""}`;const E=p0(I0(z.originalUrl||""))+j,o=p0(z._reconstructedRoute);if(E===o){if(!z._hasParameters){if(z._reconstructedRoute!==z.originalUrl)z._reconstructedRoute=z.originalUrl?I0(z.originalUrl):z.originalUrl}const r=N.__sentry_transaction;if(r&&r.metadata.source!=="custom"){const d=z._reconstructedRoute||"/";r.setName(...q0(z,{path:!0,method:!0,customRoute:d}))}}return X.call(this,J,K,z,N,V)}},_W=function(Y){let Z=F([Y,"access",(J)=>J.route,"optionalAccess",(J)=>J.path]);const $=WY(Z),Q=Array.isArray(Z);if(!Z){const[J]=B.process.versions.node.split(".").map(Number);if(J>=16)Z=yW(Y.path,Y.regexp,Y.keys)}if(!Z)return{isRegex:$,isArray:Q,numExtraSegments:0};const X=Q?Math.max(bW(Z)-p0(Y.path||""),0):0;return{layerRoutePath:xW(Q,Z),isRegex:$,isArray:Q,numExtraSegments:X}},bW=function(Y){return Y.reduce((Z,$)=>{return Z+p0($.toString())},0)},xW=function(Y,Z){if(Y)return Z.map(($)=>$.toString()).join(",");return Z&&Z.toString()},hW=function(Y,Z,$){const Q=I0(Y||""),X=F([Q,"optionalAccess",(z)=>z.split,"call",(z)=>z("/"),"access",(z)=>z.filter,"call",(z)=>z((N)=>!!N)]);let W=0;const J=F([Z,"optionalAccess",(z)=>z.split,"call",(z)=>z("/"),"access",(z)=>z.filter,"call",(z)=>z((N)=>!!N),"access",(z)=>z.length])||0;return F([$,"optionalAccess",(z)=>z.split,"call",(z)=>z("/"),"access",(z)=>z.filter,"call",(z)=>z((N)=>{if(F([X,"optionalAccess",(V)=>V[J+W]])===N)return W+=1,!0;return!1}),"access",(z)=>z.join,"call",(z)=>z("/")])};class TY{static __initStatic(){this.id="Express"}constructor(Y={}){this.name=TY.id,this._router=Y.router||Y.app,this._methods=(Array.isArray(Y.methods)?Y.methods:[]).concat("use")}setupOnce(Y,Z){if(!this._router){A&&w.error("ExpressIntegration is missing an Express instance");return}if(x(Z)){A&&w.log("Express Integration is skipped because of instrumenter configuration.");return}SW(this._router,this._methods),CW(this._router)}}TY.__initStatic();var yW=(Y,Z,$)=>{if(!Y||!Z||!$||Object.keys($).length===0||!F([$,"access",(N)=>N[0],"optionalAccess",(N)=>N.offset]))return;const Q=$.sort((N,V)=>N.offset-V.offset),W=new RegExp(Z,`${Z.flags}d`).exec(Y);if(!W||!W.indices)return;const[,...J]=W.indices;if(J.length!==Q.length)return;let K=Y,z=0;return J.forEach((N,V)=>{if(N){const[G,M]=N,R=K.substring(0,G-z),j=`:${Q[V].name}`,H=K.substring(M-z);K=R+j+H,z=z+(M-G-j.length)}}),K};class AY{static __initStatic(){this.id="Postgres"}constructor(Y={}){this.name=AY.id,this._usePgNative=!!Y.usePgNative,this._module=Y.module}loadDependency(){return this._module=this._module||u("pg")}setupOnce(Y,Z){if(x(Z)){A&&w.log("Postgres Integration is skipped because of instrumenter configuration.");return}const $=this.loadDependency();if(!$){A&&w.error("Postgres Integration was unable to require `pg` package.");return}const Q=this._usePgNative?F([$,"access",(X)=>X.native,"optionalAccess",(X)=>X.Client]):$.Client;if(!Q){A&&w.error("Postgres Integration was unable to access 'pg-native' bindings.");return}D(Q.prototype,"query",function(X){return function(W,J,K){const N=Z().getScope().getSpan(),V={"db.system":"postgresql"};try{if(this.database)V["db.name"]=this.database;if(this.host)V["server.address"]=this.host;if(this.port)V["server.port"]=this.port;if(this.user)V["db.user"]=this.user}catch(R){}const G=F([N,"optionalAccess",(R)=>R.startChild,"call",(R)=>R({description:typeof W==="string"?W:W.text,op:"db",origin:"auto.db.postgres",data:V})]);if(typeof K==="function")return X.call(this,W,J,function(R,j){F([G,"optionalAccess",(H)=>H.finish,"call",(H)=>H()]),K(R,j)});if(typeof J==="function")return X.call(this,W,function(R,j){F([G,"optionalAccess",(H)=>H.finish,"call",(H)=>H()]),J(R,j)});const M=typeof J!=="undefined"?X.call(this,W,J):X.call(this,W);if(k(M))return M.then((R)=>{return F([G,"optionalAccess",(j)=>j.finish,"call",(j)=>j()]),R});return F([G,"optionalAccess",(R)=>R.finish,"call",(R)=>R()]),M}})}}AY.__initStatic();class UY{static __initStatic(){this.id="Mysql"}constructor(){this.name=UY.id}loadDependency(){return this._module=this._module||u("mysql/lib/Connection.js")}setupOnce(Y,Z){if(x(Z)){A&&w.log("Mysql Integration is skipped because of instrumenter configuration.");return}const $=this.loadDependency();if(!$){A&&w.error("Mysql Integration was unable to require `mysql` package.");return}let Q=void 0;try{$.prototype.connect=new Proxy($.prototype.connect,{apply(J,K,z){if(!Q)Q=K.config;return J.apply(K,z)}})}catch(J){A&&w.error("Mysql Integration was unable to instrument `mysql` config.")}function X(){if(!Q)return{};return{"server.address":Q.host,"server.port":Q.port,"db.user":Q.user}}function W(J){if(!J||J.endTimestamp)return;const K=X();Object.keys(K).forEach((z)=>{J.setData(z,K[z])}),J.finish()}D($,"createQuery",function(J){return function(K,z,N){const G=Z().getScope().getSpan(),M=F([G,"optionalAccess",(j)=>j.startChild,"call",(j)=>j({description:typeof K==="string"?K:K.sql,op:"db",origin:"auto.db.mysql",data:{"db.system":"mysql"}})]);if(typeof N==="function")return J.call(this,K,z,function(j,H,T){W(M),N(j,H,T)});if(typeof z==="function")return J.call(this,K,function(j,H,T){W(M),z(j,H,T)});const R=J.call(this,K,z);return R.on("end",()=>{W(M)}),R}})}}UY.__initStatic();var gW=function(Y){return Y&&typeof Y==="object"&&Y.once&&typeof Y.once==="function"},vW=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],mW={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]};class DY{static __initStatic(){this.id="Mongo"}constructor(Y={}){this.name=DY.id,this._operations=Array.isArray(Y.operations)?Y.operations:vW,this._describeOperations=("describeOperations"in Y)?Y.describeOperations:!0,this._useMongoose=!!Y.useMongoose}loadDependency(){const Y=this._useMongoose?"mongoose":"mongodb";return this._module=this._module||u(Y)}setupOnce(Y,Z){if(x(Z)){A&&w.log("Mongo Integration is skipped because of instrumenter configuration.");return}const $=this.loadDependency();if(!$){const Q=this._useMongoose?"mongoose":"mongodb";A&&w.error(`Mongo Integration was unable to require \`${Q}\` package.`);return}this._instrumentOperations($.Collection,this._operations,Z)}_instrumentOperations(Y,Z,$){Z.forEach((Q)=>this._patchOperation(Y,Q,$))}_patchOperation(Y,Z,$){if(!(Z in Y.prototype))return;const Q=this._getSpanContextFromOperationArguments.bind(this);D(Y.prototype,Z,function(X){return function(...W){const J=W[W.length-1],z=$().getScope().getSpan();if(typeof J!=="function"||Z==="mapReduce"&&W.length===2){const V=F([z,"optionalAccess",(M)=>M.startChild,"call",(M)=>M(Q(this,Z,W))]),G=X.call(this,...W);if(k(G))return G.then((M)=>{return F([V,"optionalAccess",(R)=>R.finish,"call",(R)=>R()]),M});else if(gW(G)){const M=G;try{M.once("close",()=>{F([V,"optionalAccess",(R)=>R.finish,"call",(R)=>R()])})}catch(R){F([V,"optionalAccess",(j)=>j.finish,"call",(j)=>j()])}return M}else return F([V,"optionalAccess",(M)=>M.finish,"call",(M)=>M()]),G}const N=F([z,"optionalAccess",(V)=>V.startChild,"call",(V)=>V(Q(this,Z,W.slice(0,-1)))]);return X.call(this,...W.slice(0,-1),function(V,G){F([N,"optionalAccess",(M)=>M.finish,"call",(M)=>M()]),J(V,G)})}})}_getSpanContextFromOperationArguments(Y,Z,$){const Q={"db.system":"mongodb","db.name":Y.dbName,"db.operation":Z,"db.mongodb.collection":Y.collectionName},X={op:"db",origin:"auto.db.mongo",description:Z,data:Q},W=mW[Z],J=Array.isArray(this._describeOperations)?this._describeOperations.includes(Z):this._describeOperations;if(!W||!J)return X;try{if(Z==="mapReduce"){const[K,z]=$;Q[W[0]]=typeof K==="string"?K:K.name||"<anonymous>",Q[W[1]]=typeof z==="string"?z:z.name||"<anonymous>"}else for(let K=0;K<W.length;K++)Q[`db.mongodb.${W[K]}`]=JSON.stringify($[K])}catch(K){}return X}}DY.__initStatic();var dW=function(Y){return!!Y&&!!Y.$use};class OY{static __initStatic(){this.id="Prisma"}constructor(Y={}){if(this.name=OY.id,dW(Y.client)&&!Y.client._sentryInstrumented){m0(Y.client,"_sentryInstrumented",!0);const Z={};try{const $=Y.client._engineConfig;if($){const{activeProvider:Q,clientVersion:X}=$;if(Q)Z["db.system"]=Q;if(X)Z["db.prisma.version"]=X}}catch($){}Y.client.$use(($,Q)=>{if(x(L))return Q($);const{action:X,model:W}=$;return ZZ({name:W?`${W} ${X}`:X,op:"db.prisma",origin:"auto.db.prisma",data:{...Z,"db.operation":X}},()=>Q($))})}else A&&w.warn("Unsupported Prisma client provided to PrismaIntegration. Provided client:",Y.client)}setupOnce(){}}OY.__initStatic();class IY{static __initStatic(){this.id="GraphQL"}constructor(){this.name=IY.id}loadDependency(){return this._module=this._module||u("graphql/execution/execute.js")}setupOnce(Y,Z){if(x(Z)){A&&w.log("GraphQL Integration is skipped because of instrumenter configuration.");return}const $=this.loadDependency();if(!$){A&&w.error("GraphQL Integration was unable to require graphql/execution package.");return}D($,"execute",function(Q){return function(...X){const W=Z().getScope(),J=W.getSpan(),K=F([J,"optionalAccess",(N)=>N.startChild,"call",(N)=>N({description:"execute",op:"graphql.execute",origin:"auto.graphql.graphql"})]);F([W,"optionalAccess",(N)=>N.setSpan,"call",(N)=>N(K)]);const z=Q.call(this,...X);if(k(z))return z.then((N)=>{return F([K,"optionalAccess",(V)=>V.finish,"call",(V)=>V()]),F([W,"optionalAccess",(V)=>V.setSpan,"call",(V)=>V(J)]),N});return F([K,"optionalAccess",(N)=>N.finish,"call",(N)=>N()]),F([W,"optionalAccess",(N)=>N.setSpan,"call",(N)=>N(J)]),z}})}}IY.__initStatic();var hQ=function(Y,Z){return Y.map(($)=>{return Object.keys($).forEach((Q)=>{Object.keys($[Q]).forEach((X)=>{if(typeof $[Q][X]!=="function")return;uW($,Q,X,Z)})}),$})},uW=function(Y,Z,$,Q){D(Y[Z],$,function(X){return function(...W){const K=Q().getScope().getSpan(),z=F([K,"optionalAccess",(V)=>V.startChild,"call",(V)=>V({description:`${Z}.${$}`,op:"graphql.resolve",origin:"auto.graphql.apollo"})]),N=X.call(this,...W);if(k(N))return N.then((V)=>{return F([z,"optionalAccess",(G)=>G.finish,"call",(G)=>G()]),V});return F([z,"optionalAccess",(V)=>V.finish,"call",(V)=>V()]),N}})};class qY{static __initStatic(){this.id="Apollo"}constructor(Y={useNestjs:!1}){this.name=qY.id,this._useNest=!!Y.useNestjs}loadDependency(){if(this._useNest)this._module=this._module||u("@nestjs/graphql");else this._module=this._module||u("apollo-server-core");return this._module}setupOnce(Y,Z){if(x(Z)){A&&w.log("Apollo Integration is skipped because of instrumenter configuration.");return}if(this._useNest){const $=this.loadDependency();if(!$){A&&w.error("Apollo-NestJS Integration was unable to require @nestjs/graphql package.");return}D($.GraphQLFactory.prototype,"mergeWithSchema",function(Q){return function(...X){return D(this.resolversExplorerService,"explore",function(W){return function(){const J=w0(W.call(this));return hQ(J,Z)}}),Q.call(this,...X)}})}else{const $=this.loadDependency();if(!$){A&&w.error("Apollo Integration was unable to require apollo-server-core package.");return}D($.ApolloServerBase.prototype,"constructSchema",function(Q){return function(){if(!this.config.resolvers){if(A){if(this.config.schema)w.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `schema` property.If you are using NestJS with Apollo, please use `Sentry.Integrations.Apollo({ useNestjs: true })` instead."),w.warn();else if(this.config.modules)w.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `modules` property.");w.error("Skipping tracing as no resolvers found on the `ApolloServer` instance.")}return Q.call(this)}const X=w0(this.config.resolvers);return this.config.resolvers=hQ(X,Z),Q.call(this)}})}}}qY.__initStatic();import*as vQ from"os";import{TextEncoder as pW} from"util";class R$ extends t0{constructor(Y){Y._metadata=Y._metadata||{},Y._metadata.sdk=Y._metadata.sdk||{name:"sentry.javascript.node",packages:[{name:"npm:@sentry/node",version:P0}],version:P0},Y.transportOptions={textEncoder:new pW,...Y.transportOptions};const Z={...Y,platform:"node",runtime:{name:"node",version:global.process.version},serverName:Y.serverName||global.process.env.SENTRY_NAME||vQ.hostname()};super(Z)}}import*as cJ from"http";import*as lJ from"https";import{Readable as iJ} from"stream";import{URL as J1} from"url";import{createGzip as aJ} from"zlib";var K1=p1(W1(),1),oJ=function(Y){return new iJ({read(){this.push(Y),this.push(null)}})},z1=function(Y){let Z;try{Z=new J1(Y.url)}catch(z){return S(()=>{console.warn("[@sentry/node]: Invalid dsn or tunnel option, will not send any events. The tunnel option must be a full URL when used.")}),S0(Y,()=>Promise.resolve({}))}const $=Z.protocol==="https:",Q=rJ(Z,Y.proxy||($?process.env.https_proxy:void 0)||process.env.http_proxy),X=$?lJ:cJ,W=Y.keepAlive===void 0?!1:Y.keepAlive,J=Q?new K1.HttpsProxyAgent(Q):new X.Agent({keepAlive:W,maxSockets:30,timeout:2000}),K=nJ(Y,HY(Y.httpModule,()=>X),J);return S0(Y,K)},rJ=function(Y,Z){const{no_proxy:$}=process.env;if($&&$.split(",").some((X)=>Y.host.endsWith(X)||Y.hostname.endsWith(X)))return;else return Z},nJ=function(Y,Z,$){const{hostname:Q,pathname:X,port:W,protocol:J,search:K}=new J1(Y.url);return function z(N){return new Promise((V,G)=>{let M=oJ(N.body);const R={...Y.headers};if(N.body.length>sJ)R["content-encoding"]="gzip",M=M.pipe(aJ());const j=Z.request({method:"POST",agent:$,headers:R,hostname:Q,path:`${X}${K}`,port:W,protocol:J,ca:Y.caCerts},(H)=>{H.on("data",()=>{}),H.on("end",()=>{}),H.setEncoding("utf8");const T=HY(H.headers["retry-after"],()=>null),E=HY(H.headers["x-sentry-rate-limits"],()=>null);V({statusCode:H.statusCode,headers:{"retry-after":T,"x-sentry-rate-limits":Array.isArray(E)?E[0]:E}})});j.on("error",G),M.pipe(j)})}},sJ=32768;import{spawn as Q5} from"child_process";import{posix as tJ,sep as eJ} from"path";var Z8=function(Y){return Y.replace(/^[A-Z]:/,"").replace(/\\/g,"/")},V1=function(Y,Z=Y8){if(!Y)return;const $=Z?Z8(Y):Y;let{root:Q,dir:X,base:W,ext:J}=tJ.parse($);const z=`${require&&require.main&&require.main.filename&&X||global.process.cwd()}/`;let N=W;if(J===".js"||J===".mjs"||J===".cjs")N=N.slice(0,J.length*-1);if(!Q&&!X)X=".";let V=X.lastIndexOf("/node_modules/");if(V>-1)return`${X.slice(V+14).replace(/\//g,".")}:${N}`;if(V=`${X}/`.lastIndexOf(z,0),V===0){let G=X.slice(z.length).replace(/\//g,".");if(G)G+=":";return G+=N,G}return N},Y8=eJ==="\\";var G1=function(){return!!process.send&&!!process.env.SENTRY_ANR_CHILD_PROCESS};var h=bZ(process.versions.node);import*as RZ from"domain";var N1=function(){return RZ.active},$8=function(){const Y=N1();if(!Y)return;return s0(Y),l(Y)},Q8=function(Y){const Z={};return s0(Z,Y),l(Z)},X8=function(Y,Z){const $=N1();if($&&F([Z,"optionalAccess",(J)=>J.reuseExisting]))return Y();const Q=RZ.create(),X=$?l($):void 0,W=Q8(X);return o0(Q,W),Q.bind(()=>{return Y()})()},M1=function(){BY({getCurrentHub:$8,runWithAsyncContext:X8})};import*as w1 from"async_hooks";var F1=function(){if(!jZ)jZ=new w1.AsyncLocalStorage;function Y(){return jZ.getStore()}function Z(Q){const X={};return s0(X,Q),l(X)}function $(Q,X){const W=Y();if(W&&F([X,"optionalAccess",(K)=>K.reuseExisting]))return Q();const J=Z(W);return jZ.run(J,()=>{return Q()})}BY({getCurrentHub:Y,runWithAsyncContext:$})},jZ;var R1=function(){if(h.major&&h.major>=14)F1();else M1()};import*as j1 from"util";class L0{constructor(){L0.prototype.__init.call(this)}static __initStatic(){this.id="Console"}__init(){this.name=L0.id}setupOnce(){yZ(({args:Y,level:Z})=>{const $=L();if(!$.getIntegration(L0))return;$.addBreadcrumb({category:"console",level:cZ(Z),message:j1.format.apply(void 0,Y)},{input:[...Y],level:Z})})}}L0.__initStatic();var X0=typeof __SENTRY_DEBUG__==="undefined"||__SENTRY_DEBUG__;import{URL as U$} from"url";var H1=function(Y){const{protocol:Z,hostname:$,port:Q}=B1(Y),X=Y.path?Y.path:"/";return`${Z}//${$}${Q}${X}`},D$=function(Y){const{protocol:Z,hostname:$,port:Q}=B1(Y),X=Y.pathname||"/",W=Y.auth?W8(Y.auth):"";return`${Z}//${W}${$}${Q}${X}`},W8=function(Y){const[Z,$]=Y.split(":");return`${Z?"[Filtered]":""}:${$?"[Filtered]":""}@`},O$=function(Y,Z,$){if(!Y)return Y;let[Q,X]=Y.split(" ");if(Z.host&&!Z.protocol)Z.protocol=F([$,"optionalAccess",(W)=>W.agent,"optionalAccess",(W)=>W.protocol]),X=D$(Z);if(F([X,"optionalAccess",(W)=>W.startsWith,"call",(W)=>W("///")]))X=X.slice(2);return`${Q} ${X}`},P1=function(Y){const Z={protocol:Y.protocol,hostname:typeof Y.hostname==="string"&&Y.hostname.startsWith("[")?Y.hostname.slice(1,-1):Y.hostname,hash:Y.hash,search:Y.search,pathname:Y.pathname,path:`${Y.pathname||""}${Y.search||""}`,href:Y.href};if(Y.port!=="")Z.port=Number(Y.port);if(Y.username||Y.password)Z.auth=`${Y.username}:${Y.password}`;return Z},L1=function(Y,Z){let $,Q;if(typeof Z[Z.length-1]==="function")$=Z.pop();if(typeof Z[0]==="string")Q=P1(new U$(Z[0]));else if(Z[0]instanceof U$)Q=P1(Z[0]);else{Q=Z[0];try{const X=new U$(Q.path||"",`${Q.protocol||"http:"}//${Q.hostname}`);Q={pathname:X.pathname,search:X.search,hash:X.hash,...Q}}catch(X){}}if(Z.length===2)Q={...Q,...Z[1]};if(Q.protocol===void 0)if(h.major&&h.major>8)Q.protocol=F([F([Y,"optionalAccess",(X)=>X.globalAgent]),"optionalAccess",(X)=>X.protocol])||F([Q.agent,"optionalAccess",(X)=>X.protocol])||F([Q._defaultAgent,"optionalAccess",(X)=>X.protocol]);else Q.protocol=F([Q.agent,"optionalAccess",(X)=>X.protocol])||F([Q._defaultAgent,"optionalAccess",(X)=>X.protocol])||F([F([Y,"optionalAccess",(X)=>X.globalAgent]),"optionalAccess",(X)=>X.protocol]);if($)return[Q,$];else return[Q]},B1=function(Y){const Z=Y.protocol||"",$=Y.hostname||Y.host||"",Q=!Y.port||Y.port===80||Y.port===443||/^(.*):(\d+)$/.test($)?"":`:${Y.port}`;return{protocol:Z,hostname:$,port:Q}};var T1=function(Y,Z,$,Q){const X=new p(100),W=new p(100),J=(N)=>{if($===void 0)return!0;const V=X.get(N);if(V!==void 0)return V;const G=$(N);return X.set(N,G),G},K=(N)=>{if(Q===void 0)return!0;const V=W.get(N);if(V!==void 0)return V;const G=$0(N,Q);return W.set(N,G),G};function z(N,V,G,M){if(!L().getIntegration(B0))return;L().addBreadcrumb({category:"http",data:{status_code:M&&M.statusCode,...V},type:"http"},{event:N,request:G,response:M})}return function N(V){return function G(...M){const R=L1(Y,M),j=R[0],H=H1(j),T=D$(j);if(C0(T,L()))return V.apply(Y,R);const E=L(),o=E.getScope(),r=o.getSpan(),d=J8(T,j),_=J(H)?F([r,"optionalAccess",(I)=>I.startChild,"call",(I)=>I({op:"http.client",origin:"auto.http.node.http",description:`${d["http.method"]} ${d.url}`,data:d})]):void 0;if(K(H))if(_){const I=_.toTraceparent(),K0=F([_,"optionalAccess",(n)=>n.transaction,"optionalAccess",(n)=>n.getDynamicSamplingContext,"call",(n)=>n()]);A1(j,T,I,K0)}else{const I=E.getClient(),{traceId:K0,sampled:n,dsc:HZ}=o.getPropagationContext(),h1=f0(K0,void 0,n),v1=HZ||(I?s(K0,I,o):void 0);A1(j,T,h1,v1)}else X0&&w.log(`[Tracing] Not adding sentry-trace header to outgoing request (${T}) due to mismatching tracePropagationTargets option.`);return V.apply(Y,R).once("response",function(I){const K0=this;if(Z)z("response",d,K0,I);if(_){if(I.statusCode)_.setHttpStatus(I.statusCode);_.description=O$(_.description,j,K0),_.finish()}}).once("error",function(){const I=this;if(Z)z("error",d,I);if(_)_.setHttpStatus(500),_.description=O$(_.description,j,I),_.finish()})}}},A1=function(Y,Z,$,Q){if((Y.headers||{})["sentry-trace"])return;X0&&w.log(`[Tracing] Adding sentry-trace header ${$} to outgoing request to "${Z}": `);const W=c0(Q),J=W&&W.length>0?K8(Y,W):void 0;Y.headers={...Y.headers,"sentry-trace":$,...J&&{baggage:J}}},J8=function(Y,Z){const $=Z.method||"GET",Q={url:Y,"http.method":$};if(Z.hash)Q["http.fragment"]=Z.hash.substring(1);if(Z.search)Q["http.query"]=Z.search.substring(1);return Q},K8=function(Y,Z){if(!Y.headers||!Y.headers.baggage)return Z;else if(!Z)return Y.headers.baggage;else if(Array.isArray(Y.headers.baggage))return[...Y.headers.baggage,Z];return[Y.headers.baggage,Z]};class B0{static __initStatic(){this.id="Http"}__init(){this.name=B0.id}constructor(Y={}){B0.prototype.__init.call(this),this._breadcrumbs=typeof Y.breadcrumbs==="undefined"?!0:Y.breadcrumbs,this._tracing=!Y.tracing?void 0:Y.tracing===!0?{}:Y.tracing}setupOnce(Y,Z){if(!this._breadcrumbs&&!this._tracing)return;const $=F([Z,"call",(K)=>K(),"access",(K)=>K.getClient,"call",(K)=>K(),"optionalAccess",(K)=>K.getOptions,"call",(K)=>K()]);if($&&$.instrumenter!=="sentry"){X0&&w.log("HTTP Integration is skipped because of instrumenter configuration.");return}const Q=F([this,"access",(K)=>K._tracing,"optionalAccess",(K)=>K.shouldCreateSpanForRequest])||F([$,"optionalAccess",(K)=>K.shouldCreateSpanForRequest]),X=F([$,"optionalAccess",(K)=>K.tracePropagationTargets])||F([this,"access",(K)=>K._tracing,"optionalAccess",(K)=>K.tracePropagationTargets]),W=import.meta.require("http"),J=T1(W,this._breadcrumbs,Q,X);if(D(W,"get",J),D(W,"request",J),h.major&&h.major>8){const K=import.meta.require("https"),z=T1(K,this._breadcrumbs,Q,X);D(K,"get",z),D(K,"request",z)}}}B0.__initStatic();var CY=function(Y){S(()=>{console.error(Y)});const Z=j0();if(Z===void 0)X0&&w.warn("No NodeClient was defined, we are exiting the process now."),global.process.exit(1);const $=Z.getOptions(),Q=$&&$.shutdownTimeout&&$.shutdownTimeout>0&&$.shutdownTimeout||z8;Z.close(Q).then((X)=>{if(!X)X0&&w.warn("We reached the timeout for emptying the request buffer, still exiting now!");global.process.exit(1)},(X)=>{X0&&w.error(X)})},z8=2000;class N0{static __initStatic(){this.id="OnUncaughtException"}__init(){this.name=N0.id}__init2(){this.handler=this._makeErrorHandler()}constructor(Y={}){N0.prototype.__init.call(this),N0.prototype.__init2.call(this),this._options={exitEvenIfOtherHandlersAreRegistered:!0,...Y}}setupOnce(){global.process.on("uncaughtException",this.handler)}_makeErrorHandler(){let Z=!1,$=!1,Q=!1,X;return(W)=>{let J=CY;const K=j0();if(this._options.onFatalError)J=this._options.onFatalError;else if(K&&K.getOptions().onFatalError)J=K.getOptions().onFatalError;const N=global.process.listeners("uncaughtException").reduce((G,M)=>{if(M.name==="domainUncaughtExceptionClear"||M.tag&&M.tag==="sentry_tracingErrorCallback"||M===this.handler)return G;else return G+1},0)===0,V=this._options.exitEvenIfOtherHandlersAreRegistered||N;if(!Z){const G=L();if(X=W,Z=!0,G.getIntegration(N0))G.withScope((M)=>{if(M.setLevel("fatal"),G.captureException(W,{originalException:W,data:{mechanism:{handled:!1,type:"onuncaughtexception"}}}),!Q&&V)Q=!0,J(W)});else if(!Q&&V)Q=!0,J(W)}else if(V){if(Q)X0&&w.warn("uncaught exception after calling fatal error shutdown callback - this is bad! forcing shutdown"),CY(W);else if(!$)$=!0,setTimeout(()=>{if(!Q)Q=!0,J(X,W)},2000)}}}}N0.__initStatic();class T0{static __initStatic(){this.id="OnUnhandledRejection"}__init(){this.name=T0.id}constructor(Y={mode:"warn"}){this._options=Y,T0.prototype.__init.call(this)}setupOnce(){global.process.on("unhandledRejection",this.sendUnhandledPromise.bind(this))}sendUnhandledPromise(Y,Z){const $=L();if($.getIntegration(T0))$.withScope((Q)=>{Q.setExtra("unhandledPromiseRejection",!0),$.captureException(Y,{originalException:Z,data:{mechanism:{handled:!1,type:"onunhandledrejection"}}})});this._handleRejection(Y)}_handleRejection(Y){const Z="This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). The promise rejected with the reason:";if(this._options.mode==="warn")S(()=>{console.warn(Z),console.error(Y&&Y.stack?Y.stack:Y)});else if(this._options.mode==="strict")S(()=>{console.warn(Z)}),CY(Y)}}T0.__initStatic();import{existsSync as V8,readFileSync as G8} from"fs";import{dirname as N8,join as M8} from"path";var w8=function(){try{return require.cache?Object.keys(require.cache):[]}catch(Y){return[]}},F8=function(){const Y=require.main&&require.main.paths||[],Z=w8(),$={},Q={};return Z.forEach((X)=>{let W=X;const J=()=>{const K=W;if(W=N8(K),!W||K===W||Q[K])return;if(Y.indexOf(W)<0)return J();const z=M8(K,"package.json");if(Q[K]=!0,!V8(z))return J();try{const N=JSON.parse(G8(z,"utf8"));$[N.name]=N.version}catch(N){}};J()}),$},I$;class A0{constructor(){A0.prototype.__init.call(this)}static __initStatic(){this.id="Modules"}__init(){this.name=A0.id}setupOnce(Y,Z){Y(($)=>{if(!Z().getIntegration(A0))return $;return{...$,modules:{...$.modules,...this._getModules()}}})}_getModules(){if(!I$)I$=F8();return I$}}A0.__initStatic();import{readFile as R8} from"fs";var P8=function(Y){return new Promise((Z,$)=>{R8(Y,"utf8",(Q,X)=>{if(Q)$(Q);else Z(X)})})};async function H8(Y){const Z=PZ.get(Y);if(Z===null)return null;if(Z!==void 0)return Z;let $=null;try{$=(await P8(Y)).split("\n")}catch(Q){}return PZ.set(Y,$),$}var PZ=new p(100),j8=7;class U0{static __initStatic(){this.id="ContextLines"}__init(){this.name=U0.id}constructor(Y={}){this._options=Y,U0.prototype.__init.call(this)}get _contextLines(){return this._options.frameContextLines!==void 0?this._options.frameContextLines:j8}setupOnce(Y,Z){Y(($)=>{if(!Z().getIntegration(U0))return $;return this.addSourceContext($)})}async addSourceContext(Y){const Z={},$=[];if(this._contextLines>0&&F([Y,"access",(Q)=>Q.exception,"optionalAccess",(Q)=>Q.values]))for(let Q of Y.exception.values){if(!F([Q,"access",(X)=>X.stacktrace,"optionalAccess",(X)=>X.frames]))continue;for(let X=Q.stacktrace.frames.length-1;X>=0;X--){const W=Q.stacktrace.frames[X];if(W.filename&&!Z[W.filename]&&!PZ.get(W.filename))$.push(H8(W.filename)),Z[W.filename]=1}}if($.length>0)await Promise.all($);if(this._contextLines>0&&F([Y,"access",(Q)=>Q.exception,"optionalAccess",(Q)=>Q.values])){for(let Q of Y.exception.values)if(Q.stacktrace&&Q.stacktrace.frames)await this.addSourceContextToFrames(Q.stacktrace.frames)}return Y}addSourceContextToFrames(Y){for(let Z of Y)if(Z.filename&&Z.context_line===void 0){const $=PZ.get(Z.filename);if($)try{xZ($,Z,this._contextLines)}catch(Q){}}}}U0.__initStatic();import{execFile as L8} from"child_process";import{readFile as B8,readdir as T8} from"fs";import*as q from"os";import{join as A8} from"path";import{promisify as D1} from"util";async function O8(){const Y=q.platform();switch(Y){case"darwin":return C8();case"linux":return y8();default:return{name:k8[Y]||Y,version:q.release()}}}var I8=function(){try{if(typeof process.versions.icu!=="string")return;const Y=new Date(900000000);if(new Intl.DateTimeFormat("es",{month:"long"}).format(Y)==="enero"){const $=Intl.DateTimeFormat().resolvedOptions();return{locale:$.locale,timezone:$.timeZone}}}catch(Y){}return},q8=function(){const Y=process.memoryUsage().rss;return{app_start_time:new Date(Date.now()-process.uptime()*1000).toISOString(),app_memory:Y}},E8=function(Y){const Z={};let $;try{$=q.uptime&&q.uptime()}catch(Q){}if(typeof $==="number")Z.boot_time=new Date(Date.now()-$*1000).toISOString();if(Z.arch=q.arch(),Y===!0||Y.memory)Z.memory_size=q.totalmem(),Z.free_memory=q.freemem();if(Y===!0||Y.cpu){const Q=q.cpus();if(Q&&Q.length){const X=Q[0];Z.processor_count=Q.length,Z.cpu_description=X.model,Z.processor_frequency=X.speed}}return Z},W0=function(Y,Z){const $=Y.exec(Z);return $?$[1]:void 0};async function C8(){const Y={kernel_version:q.release(),name:"Mac OS X",version:`10.${Number(q.release().split(".")[0])-4}`};try{const Z=await new Promise(($,Q)=>{L8("/usr/bin/sw_vers",(X,W)=>{if(X){Q(X);return}$(W)})});Y.name=W0(/^ProductName:\s+(.*)$/m,Z),Y.version=W0(/^ProductVersion:\s+(.*)$/m,Z),Y.build=W0(/^BuildVersion:\s+(.*)$/m,Z)}catch(Z){}return Y}var U1=function(Y){return Y.split(" ")[0].toLowerCase()};async function y8(){const Y={kernel_version:q.release(),name:"Linux"};try{const Z=await D8("/etc"),$=f8.find((K)=>Z.includes(K.name));if(!$)return Y;const Q=A8("/etc",$.name),X=(await U8(Q,{encoding:"utf-8"})).toLowerCase(),{distros:W}=$;Y.name=W.find((K)=>X.indexOf(U1(K))>=0)||W[0];const J=U1(Y.name);Y.version=S8[J](X)}catch(Z){}return Y}var _8=function(){if(process.env.VERCEL)return{"cloud.provider":"vercel","cloud.region":process.env.VERCEL_REGION};else if(process.env.AWS_REGION)return{"cloud.provider":"aws","cloud.region":process.env.AWS_REGION,"cloud.platform":process.env.AWS_EXECUTION_ENV};else if(process.env.GCP_PROJECT)return{"cloud.provider":"gcp"};else if(process.env.ALIYUN_REGION_ID)return{"cloud.provider":"alibaba_cloud","cloud.region":process.env.ALIYUN_REGION_ID};else if(process.env.WEBSITE_SITE_NAME&&process.env.REGION_NAME)return{"cloud.provider":"azure","cloud.region":process.env.REGION_NAME};else if(process.env.IBM_CLOUD_REGION)return{"cloud.provider":"ibm_cloud","cloud.region":process.env.IBM_CLOUD_REGION};else if(process.env.TENCENTCLOUD_REGION)return{"cloud.provider":"tencent_cloud","cloud.region":process.env.TENCENTCLOUD_REGION,"cloud.account.id":process.env.TENCENTCLOUD_APPID,"cloud.availability_zone":process.env.TENCENTCLOUD_ZONE};else if(process.env.NETLIFY)return{"cloud.provider":"netlify"};else if(process.env.FLY_REGION)return{"cloud.provider":"fly.io","cloud.region":process.env.FLY_REGION};else if(process.env.DYNO)return{"cloud.provider":"heroku"};else return},U8=D1(B8),D8=D1(T8);class b0{static __initStatic(){this.id="Context"}__init(){this.name=b0.id}constructor(Y={app:!0,os:!0,device:!0,culture:!0,cloudResource:!0}){this._options=Y,b0.prototype.__init.call(this)}setupOnce(Y){Y((Z)=>this.addContext(Z))}async addContext(Y){if(this._cachedContext===void 0)this._cachedContext=this._getContexts();const Z=this._updateContext(await this._cachedContext);return Y.contexts={...Y.contexts,app:{...Z.app,...F([Y,"access",($)=>$.contexts,"optionalAccess",($)=>$.app])},os:{...Z.os,...F([Y,"access",($)=>$.contexts,"optionalAccess",($)=>$.os])},device:{...Z.device,...F([Y,"access",($)=>$.contexts,"optionalAccess",($)=>$.device])},culture:{...Z.culture,...F([Y,"access",($)=>$.contexts,"optionalAccess",($)=>$.culture])},cloud_resource:{...Z.cloud_resource,...F([Y,"access",($)=>$.contexts,"optionalAccess",($)=>$.cloud_resource])}},Y}_updateContext(Y){if(F([Y,"optionalAccess",(Z)=>Z.app,"optionalAccess",(Z)=>Z.app_memory]))Y.app.app_memory=process.memoryUsage().rss;if(F([Y,"optionalAccess",(Z)=>Z.device,"optionalAccess",(Z)=>Z.free_memory]))Y.device.free_memory=q.freemem();return Y}async _getContexts(){const Y={};if(this._options.os)Y.os=await O8();if(this._options.app)Y.app=q8();if(this._options.device)Y.device=E8(this._options.device);if(this._options.culture){const Z=I8();if(Z)Y.culture=Z}if(this._options.cloudResource)Y.cloud_resource=_8();return Y}}b0.__initStatic();var k8={aix:"IBM AIX",freebsd:"FreeBSD",openbsd:"OpenBSD",sunos:"SunOS",win32:"Windows"},f8=[{name:"fedora-release",distros:["Fedora"]},{name:"redhat-release",distros:["Red Hat Linux","Centos"]},{name:"redhat_version",distros:["Red Hat Linux"]},{name:"SuSE-release",distros:["SUSE Linux"]},{name:"lsb-release",distros:["Ubuntu Linux","Arch Linux"]},{name:"debian_version",distros:["Debian"]},{name:"debian_release",distros:["Debian"]},{name:"arch-release",distros:["Arch Linux"]},{name:"gentoo-release",distros:["Gentoo Linux"]},{name:"novell-release",distros:["SUSE Linux"]},{name:"alpine-release",distros:["Alpine Linux"]}],S8={alpine:(Y)=>Y,arch:(Y)=>W0(/distrib_release=(.*)/,Y),centos:(Y)=>W0(/release ([^ ]+)/,Y),debian:(Y)=>Y,fedora:(Y)=>W0(/release (..)/,Y),mint:(Y)=>W0(/distrib_release=(.*)/,Y),red:(Y)=>W0(/release ([^ ]+)/,Y),suse:(Y)=>W0(/VERSION = (.*)\n/,Y),ubuntu:(Y)=>W0(/distrib_release=(.*)/,Y)};var b8=function(Y,Z,$){let Q=0,X=5,W=0;return setInterval(()=>{if(W===0){if(Q>Y){if(X*=2,$(X),X>86400)X=86400;W=X}}else if(W-=1,W===0)Z();Q=0},1000).unref(),()=>{Q+=1}},I1=function(Y){let Z=[],$=!1;function Q(J){if(Z=[],$)return;$=!0,Y(J)}Z.push(Q);function X(J){Z.push(J)}function W(J){const K=Z.pop()||Q;try{K(J)}catch(z){Q(J)}}return{add:X,next:W}},x8=function(){try{return new q1}catch(Y){return}},O1=function(Y){return Y!==void 0&&["","?","<anonymous>"].includes(Y)},h8=function(Y,Z){return Y===Z||O1(Y)&&O1(Z)},E1=function(Y){if(Y===void 0)return;return Y.slice(-10).reduce((Z,$)=>`${Z},${$.function},${$.lineno},${$.colno}`,"")},v8=function(Y,Z){if(Z===void 0)return;return E1(Y(Z,1))};class q1{constructor(){const{Session:Y}=import.meta.require("inspector");this._session=new Y}configureAndConnect(Y,Z){this._session.connect(),this._session.on("Debugger.paused",($)=>{Y($,()=>{this._session.post("Debugger.resume")})}),this._session.post("Debugger.enable"),this._session.post("Debugger.setPauseOnExceptions",{state:Z?"all":"uncaught"})}setPauseOnExceptions(Y){this._session.post("Debugger.setPauseOnExceptions",{state:Y?"all":"uncaught"})}getLocalVariables(Y,Z){this._getProperties(Y,($)=>{const{add:Q,next:X}=I1(Z);for(let W of $)if(F([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.objectId])&&F([W,"optionalAccess",(J)=>J.value,"access",(J)=>J.className])==="Array"){const J=W.value.objectId;Q((K)=>this._unrollArray(J,W.name,K,X))}else if(F([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.objectId])&&F([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.className])==="Object"){const J=W.value.objectId;Q((K)=>this._unrollObject(J,W.name,K,X))}else if(F([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.value])||F([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.description]))Q((J)=>this._unrollOther(W,J,X));X({})})}_getProperties(Y,Z){this._session.post("Runtime.getProperties",{objectId:Y,ownProperties:!0},($,Q)=>{if($)Z([]);else Z(Q.result)})}_unrollArray(Y,Z,$,Q){this._getProperties(Y,(X)=>{$[Z]=X.filter((W)=>W.name!=="length"&&!isNaN(parseInt(W.name,10))).sort((W,J)=>parseInt(W.name,10)-parseInt(J.name,10)).map((W)=>F([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.value])),Q($)})}_unrollObject(Y,Z,$,Q){this._getProperties(Y,(X)=>{$[Z]=X.map((W)=>[W.name,F([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.value])]).reduce((W,[J,K])=>{return W[J]=K,W},{}),Q($)})}_unrollOther(Y,Z,$){if(F([Y,"optionalAccess",(Q)=>Q.value,"optionalAccess",(Q)=>Q.value]))Z[Y.name]=Y.value.value;else if(F([Y,"optionalAccess",(Q)=>Q.value,"optionalAccess",(Q)=>Q.description])&&F([Y,"optionalAccess",(Q)=>Q.value,"optionalAccess",(Q)=>Q.type])!=="function")Z[Y.name]=`<${Y.value.description}>`;$(Z)}}class D0{static __initStatic(){this.id="LocalVariables"}__init(){this.name=D0.id}__init2(){this._cachedFrames=new p(20)}constructor(Y={},Z=x8()){this._options=Y,this._session=Z,D0.prototype.__init.call(this),D0.prototype.__init2.call(this)}setupOnce(Y,Z){this._setup(Y,F([Z,"call",($)=>$(),"access",($)=>$.getClient,"call",($)=>$(),"optionalAccess",($)=>$.getOptions,"call",($)=>$()]))}_setup(Y,Z){if(this._session&&F([Z,"optionalAccess",($)=>$.includeLocalVariables])){if((h.major||0)<18){w.log("The `LocalVariables` integration is only supported on Node >= v18.");return}const Q=this._options.captureAllExceptions!==!1;if(this._session.configureAndConnect((X,W)=>this._handlePaused(Z.stackParser,X,W),Q),Q){const X=this._options.maxExceptionsPerSecond||50;this._rateLimiter=b8(X,()=>{w.log("Local variables rate-limit lifted."),F([this,"access",(W)=>W._session,"optionalAccess",(W)=>W.setPauseOnExceptions,"call",(W)=>W(!0)])},(W)=>{w.log(`Local variables rate-limit exceeded. Disabling capturing of caught exceptions for ${W} seconds.`),F([this,"access",(J)=>J._session,"optionalAccess",(J)=>J.setPauseOnExceptions,"call",(J)=>J(!1)])})}Y(async(X)=>this._addLocalVariables(X))}}_handlePaused(Y,{params:{reason:Z,data:$,callFrames:Q}},X){if(Z!=="exception"&&Z!=="promiseRejection"){X();return}F([this,"access",(z)=>z._rateLimiter,"optionalCall",(z)=>z()]);const W=v8(Y,F([$,"optionalAccess",(z)=>z.description]));if(W==void 0){X();return}const{add:J,next:K}=I1((z)=>{this._cachedFrames.set(W,z),X()});for(let z=0;z<Math.min(Q.length,5);z++){const{scopeChain:N,functionName:V,this:G}=Q[z],M=N.find((j)=>j.type==="local"),R=G.className==="global"||!G.className?V:`${G.className}.${V}`;if(F([M,"optionalAccess",(j)=>j.object,"access",(j)=>j.objectId])===void 0)J((j)=>{j[z]={function:R},K(j)});else{const j=M.object.objectId;J((H)=>F([this,"access",(T)=>T._session,"optionalAccess",(T)=>T.getLocalVariables,"call",(T)=>T(j,(E)=>{H[z]={function:R,vars:E},K(H)})]))}}K([])}_addLocalVariables(Y){for(let Z of F([Y,"optionalAccess",($)=>$.exception,"optionalAccess",($)=>$.values])||[])this._addLocalVariablesToException(Z);return Y}_addLocalVariablesToException(Y){const Z=E1(F([Y,"optionalAccess",(X)=>X.stacktrace,"optionalAccess",(X)=>X.frames]));if(Z===void 0)return;const $=this._cachedFrames.remove(Z);if($===void 0)return;const Q=F([Y,"access",(X)=>X.stacktrace,"optionalAccess",(X)=>X.frames,"optionalAccess",(X)=>X.length])||0;for(let X=0;X<Q;X++){const W=Q-X-1;if(!F([Y,"optionalAccess",(J)=>J.stacktrace,"optionalAccess",(J)=>J.frames,"optionalAccess",(J)=>J[W]])||!$[X])break;if($[X].vars===void 0||Y.stacktrace.frames[W].in_app===!1||!h8(Y.stacktrace.frames[W].function,$[X].function))continue;Y.stacktrace.frames[W].vars=$[X].vars}}}D0.__initStatic();var k1=function(Y,Z,$){if(Y.headers.split("\r\n").some((W)=>W.startsWith("sentry-trace:")))return;if(Y.addHeader("sentry-trace",Z),$)Y.addHeader("baggage",$)},m8=function(Y,Z,$){const Q=wY($),X=Z.method||"GET",W={"http.method":X};if(Q.search)W["http.query"]=Q.search;if(Q.hash)W["http.fragment"]=Q.hash;return F([Y,"optionalAccess",(J)=>J.startChild,"call",(J)=>J({op:"http.client",origin:"auto.http.node.undici",description:`${X} ${FY(Q)}`,data:W})])},yY;(function(Y){Y.RequestCreate="undici:request:create";const $="undici:request:headers";Y.RequestEnd=$;const Q="undici:request:error";Y.RequestError=Q})(yY||(yY={}));class y{static __initStatic(){this.id="Undici"}__init(){this.name=y.id}__init2(){this._createSpanUrlMap=new p(100)}__init3(){this._headersUrlMap=new p(100)}constructor(Y={}){y.prototype.__init.call(this),y.prototype.__init2.call(this),y.prototype.__init3.call(this),y.prototype.__init4.call(this),y.prototype.__init5.call(this),y.prototype.__init6.call(this),this._options={breadcrumbs:Y.breadcrumbs===void 0?!0:Y.breadcrumbs,shouldCreateSpanForRequest:Y.shouldCreateSpanForRequest}}setupOnce(Y){if(h.major&&h.major<16)return;let Z;try{Z=F0(g8,"diagnostics_channel")}catch($){}if(!Z||!Z.subscribe)return;Z.subscribe(yY.RequestCreate,this._onRequestCreate),Z.subscribe(yY.RequestEnd,this._onRequestEnd),Z.subscribe(yY.RequestError,this._onRequestError)}_shouldCreateSpan(Y){if(this._options.shouldCreateSpanForRequest===void 0)return!0;const Z=this._createSpanUrlMap.get(Y);if(Z!==void 0)return Z;const $=this._options.shouldCreateSpanForRequest(Y);return this._createSpanUrlMap.set(Y,$),$}__init4(){this._onRequestCreate=(Y)=>{const Z=L();if(!Z.getIntegration(y))return;const{request:$}=Y,Q=$.origin?$.origin.toString()+$.path:$.path;if(C0(Q,Z)||$.__sentry_span__!==void 0)return;const X=Z.getClient();if(!X)return;const W=X.getOptions(),J=Z.getScope(),K=J.getSpan(),z=this._shouldCreateSpan(Q)?m8(K,$,Q):void 0;if(z)$.__sentry_span__=z;if(((V)=>{if(W.tracePropagationTargets===void 0)return!0;const G=this._headersUrlMap.get(V);if(G!==void 0)return G;const M=$0(V,W.tracePropagationTargets);return this._headersUrlMap.set(V,M),M})(Q))if(z){const V=F([z,"optionalAccess",(M)=>M.transaction,"optionalAccess",(M)=>M.getDynamicSamplingContext,"call",(M)=>M()]),G=c0(V);k1($,z.toTraceparent(),G)}else{const{traceId:V,sampled:G,dsc:M}=J.getPropagationContext(),R=f0(V,void 0,G),j=M||s(V,X,J),H=c0(j);k1($,R,H)}}}__init5(){this._onRequestEnd=(Y)=>{const Z=L();if(!Z.getIntegration(y))return;const{request:$,response:Q}=Y,X=$.origin?$.origin.toString()+$.path:$.path;if(C0(X,Z))return;const W=$.__sentry_span__;if(W)W.setHttpStatus(Q.statusCode),W.finish();if(this._options.breadcrumbs)Z.addBreadcrumb({category:"http",data:{method:$.method,status_code:Q.statusCode,url:X},type:"http"},{event:"response",request:$,response:Q})}}__init6(){this._onRequestError=(Y)=>{const Z=L();if(!Z.getIntegration(y))return;const{request:$}=Y,Q=$.origin?$.origin.toString()+$.path:$.path;if(C0(Q,Z))return;const X=$.__sentry_span__;if(X)X.setStatus("internal_error"),X.finish();if(this._options.breadcrumbs)Z.addBreadcrumb({category:"http",data:{method:$.method,url:Q},level:"error",type:"http"},{event:"error",request:$})}}}y.__initStatic();import*as f1 from"http";import{URL as d8} from"url";var u8=function(Y,Z){const $=p8(Z.sidecarUrl);if(!$)return;let Q=0;if(typeof Y.on!=="function"){w.warn("[Spotlight] Cannot connect to spotlight due to missing method on SDK client (`client.on`)");return}Y.on("beforeEnvelope",(X)=>{if(Q>3){w.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests");return}const W=PY(X),J=f1.request({method:"POST",path:$.pathname,hostname:$.hostname,port:$.port,headers:{"Content-Type":"application/x-sentry-envelope"}},(K)=>{K.on("data",()=>{}),K.on("end",()=>{}),K.setEncoding("utf8")});J.on("error",()=>{Q++,w.warn("[Spotlight] Failed to send envelope to Spotlight Sidecar")}),J.write(W),J.end()})},p8=function(Y){try{return new d8(`${Y}`)}catch(Z){w.warn(`[Spotlight] Invalid sidecar URL: ${Y}`);return}};class x0{static __initStatic(){this.id="Spotlight"}__init(){this.name=x0.id}constructor(Y){x0.prototype.__init.call(this),this._options={sidecarUrl:F([Y,"optionalAccess",(Z)=>Z.sidecarUrl])||"http://localhost:8969/stream"}}setupOnce(){}setup(Y){u8(Y,this._options)}}x0.__initStatic();var q$=function(Y={}){if(G1())Y.autoSessionTracking=!1,Y.tracesSampleRate=0;const Z=a();R1();const $=F([Z,"access",(W)=>W.__SENTRY__,"optionalAccess",(W)=>W.integrations])||[];if(Y.defaultIntegrations=Y.defaultIntegrations===!1?[]:[...Array.isArray(Y.defaultIntegrations)?Y.defaultIntegrations:S1,...$],Y.dsn===void 0&&process.env.SENTRY_DSN)Y.dsn=process.env.SENTRY_DSN;const Q=process.env.SENTRY_TRACES_SAMPLE_RATE;if(Y.tracesSampleRate===void 0&&Q){const W=parseFloat(Q);if(isFinite(W))Y.tracesSampleRate=W}if(Y.release===void 0){const W=C1();if(W!==void 0)Y.release=W;else Y.autoSessionTracking=!1}if(Y.environment===void 0&&process.env.SENTRY_ENVIRONMENT)Y.environment=process.env.SENTRY_ENVIRONMENT;if(Y.autoSessionTracking===void 0&&Y.dsn!==void 0)Y.autoSessionTracking=!0;if(Y.instrumenter===void 0)Y.instrumenter="sentry";const X={...Y,stackParser:SZ(Y.stackParser||y1),integrations:G$(Y),transport:Y.transport||z1};if(w$(Y.clientClass||R$,X),Y.autoSessionTracking)c8();if(l8(),Y.spotlight){const W=L().getClient();if(W&&W.addIntegration)W.setupIntegrations(!0),W.addIntegration(new x0({sidecarUrl:typeof Y.spotlight==="string"?Y.spotlight:void 0}))}};var C1=function(Y){if(process.env.SENTRY_RELEASE)return process.env.SENTRY_RELEASE;if(B.SENTRY_RELEASE&&B.SENTRY_RELEASE.id)return B.SENTRY_RELEASE.id;return process.env.GITHUB_SHA||process.env.COMMIT_REF||process.env.VERCEL_GIT_COMMIT_SHA||process.env.VERCEL_GITHUB_COMMIT_SHA||process.env.VERCEL_GITLAB_COMMIT_SHA||process.env.VERCEL_BITBUCKET_COMMIT_SHA||process.env.ZEIT_GITHUB_COMMIT_SHA||process.env.ZEIT_GITLAB_COMMIT_SHA||process.env.ZEIT_BITBUCKET_COMMIT_SHA||Y},c8=function(){const Y=L();Y.startSession(),process.on("beforeExit",()=>{const Z=Y.getScope().getSession();if(Z&&!["exited","crashed"].includes(Z.status))Y.endSession()})},l8=function(){const Y=(process.env.SENTRY_USE_ENVIRONMENT||"").toLowerCase();if(!["false","n","no","off","0"].includes(Y)){const Z=process.env.SENTRY_TRACE,$=process.env.SENTRY_BAGGAGE,{propagationContext:Q}=jY(Z,$);L().getScope().setPropagationContext(Q)}},S1=[new b.InboundFilters,new b.FunctionToString,new b.LinkedErrors,new L0,new B0,new y,new N0,new T0,new U0,new D0,new b0,new A0,new H0],y1=gY(CZ(V1));var E$={};_Y(E$,{Undici:()=>{{return y}},Spotlight:()=>{{return x0}},RequestData:()=>{{return H0}},OnUnhandledRejection:()=>{{return T0}},OnUncaughtException:()=>{{return N0}},Modules:()=>{{return A0}},LocalVariables:()=>{{return D0}},Http:()=>{{return B0}},ContextLines:()=>{{return U0}},Context:()=>{{return b0}},Console:()=>{{return L0}}});var k$={};_Y(k$,{Prisma:()=>{{return OY}},Postgres:()=>{{return AY}},Mysql:()=>{{return UY}},Mongo:()=>{{return DY}},GraphQL:()=>{{return IY}},Express:()=>{{return TY}},Apollo:()=>{{return qY}}});var J0={...b,...E$,...k$};import*as _1 from"os";class f$ extends t0{constructor(Y){Y._metadata=Y._metadata||{},Y._metadata.sdk=Y._metadata.sdk||{name:"sentry.javascript.bun",packages:[{name:"npm:@sentry/bun",version:P0}],version:P0};const Z={...Y,platform:"javascript",runtime:{name:"bun",version:Bun.version},serverName:Y.serverName||global.process.env.SENTRY_NAME||_1.hostname()};super(Z)}}var i8=function(){Bun.serve=new Proxy(Bun.serve,{apply(Y,Z,$){return a8($[0]),Y.apply(Z,$)}})},a8=function(Y){Y.fetch=new Proxy(Y.fetch,{apply(Z,$,Q){return tY(()=>{const X=Q[0],W=X.method.toUpperCase();if(W==="OPTIONS"||W==="HEAD")return Z.apply($,Q);const J=wY(X.url),K={"http.request.method":X.method||"GET"};if(J.search)K["http.query"]=J.search;const z=FY(J);return QZ({sentryTrace:X.headers.get("sentry-trace")||"",baggage:X.headers.get("baggage")},(N)=>{return $Z({op:"http.server",name:`${X.method} ${J.path||"/"}`,origin:"auto.http.bun.serve",...N,data:K,metadata:{...N.metadata,source:"url",request:{url:z,method:X.method,headers:X.headers.toJSON()}}},async(V)=>{try{const G=await Z.apply($,Q);if(G&&G.status){if(F([V,"optionalAccess",(M)=>M.setHttpStatus,"call",(M)=>M(G.status)]),F([V,"optionalAccess",(M)=>M.setData,"call",(M)=>M("http.response.status_code",G.status)]),V instanceof r0)V.setContext("response",{headers:G.headers.toJSON(),status_code:G.status})}return G}catch(G){throw n0(G,{mechanism:{type:"bun",handled:!1,data:{function:"serve"}}}),G}})})})}})};class h0{constructor(){h0.prototype.__init.call(this)}static __initStatic(){this.id="BunServer"}__init(){this.name=h0.id}setupOnce(){i8()}}h0.__initStatic();var b1=function(Y){function Z($){const Q={body:$.body,method:"POST",headers:Y.headers};try{return fetch(Y.url,Q).then((X)=>{return{statusCode:X.status,headers:{"x-sentry-rate-limits":X.headers.get("X-Sentry-Rate-Limits"),"retry-after":X.headers.get("Retry-After")}}})}catch(X){return O0(X)}}return S0(Y,Z)};var s8=function(Y={}){Y.clientClass=f$,Y.transport=Y.transport||b1,Y.defaultIntegrations=Y.defaultIntegrations===!1?[]:[...Array.isArray(Y.defaultIntegrations)?Y.defaultIntegrations:x1],q$(Y)},x1=[new b.InboundFilters,new b.FunctionToString,new b.LinkedErrors,new J0.Console,new J0.Http,new J0.Undici,new J0.ContextLines,new J0.Context,new J0.Modules,new J0.RequestData,new h0];var S$={};_Y(S$,{BunServer:()=>{{return h0}}});var XV={...b,...J0,...S$};async function r8(){try{return Date.now()}catch(Y){n0(Y)}}export{r8 as default};

//# debugId=CBD58D0D757FD72664756e2164756e21
