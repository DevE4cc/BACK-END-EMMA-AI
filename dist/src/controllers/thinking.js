// @bun
var q8=Object.create;var{defineProperty:Q1,getPrototypeOf:E8,getOwnPropertyNames:k8}=Object;var S8=Object.prototype.hasOwnProperty;var I8=(Y,$,Z)=>{Z=Y!=null?q8(E8(Y)):{};const X=$||!Y||!Y.__esModule?Q1(Z,"default",{value:Y,enumerable:!0}):Z;for(let Q of k8(Y))if(!S8.call(X,Q))Q1(X,Q,{get:()=>Y[Q],enumerable:!0});return X};var w0=(Y,$)=>()=>($||Y(($={exports:{}}).exports,$),$.exports);var W0=(Y)=>{return import.meta.require(Y)};var o$=(Y,$)=>{for(var Z in $)Q1(Y,Z,{get:$[Z],enumerable:!0,configurable:!0,set:(X)=>$[Z]=()=>X})};var EW=w0((Sw,qW)=>{var R6=function(Y){if(Y=String(Y),Y.length>100)return;var $=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(Y);if(!$)return;var Z=parseFloat($[1]),X=($[2]||"ms").toLowerCase();switch(X){case"years":case"year":case"yrs":case"yr":case"y":return Z*U6;case"weeks":case"week":case"w":return Z*H6;case"days":case"day":case"d":return Z*DY;case"hours":case"hour":case"hrs":case"hr":case"h":return Z*w$;case"minutes":case"minute":case"mins":case"min":case"m":return Z*G$;case"seconds":case"second":case"secs":case"sec":case"s":return Z*V$;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return Z;default:return}},D6=function(Y){var $=Math.abs(Y);if($>=DY)return Math.round(Y/DY)+"d";if($>=w$)return Math.round(Y/w$)+"h";if($>=G$)return Math.round(Y/G$)+"m";if($>=V$)return Math.round(Y/V$)+"s";return Y+"ms"},P6=function(Y){var $=Math.abs(Y);if($>=DY)return iZ(Y,$,DY,"day");if($>=w$)return iZ(Y,$,w$,"hour");if($>=G$)return iZ(Y,$,G$,"minute");if($>=V$)return iZ(Y,$,V$,"second");return Y+" ms"},iZ=function(Y,$,Z,X){var Q=$>=Z*1.5;return Math.round(Y/Z)+" "+X+(Q?"s":"")},V$=1000,G$=V$*60,w$=G$*60,DY=w$*24,H6=DY*7,U6=DY*365.25;qW.exports=function(Y,$){$=$||{};var Z=typeof Y;if(Z==="string"&&Y.length>0)return R6(Y);else if(Z==="number"&&isFinite(Y))return $.long?P6(Y):D6(Y);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(Y))}});var kX=w0((Iw,kW)=>{var T6=function(Y){Z.debug=Z,Z.default=Z,Z.coerce=z,Z.disable=W,Z.enable=Q,Z.enabled=J,Z.humanize=EW(),Z.destroy=w,Object.keys(Y).forEach((G)=>{Z[G]=Y[G]}),Z.names=[],Z.skips=[],Z.formatters={};function $(G){let V=0;for(let N=0;N<G.length;N++)V=(V<<5)-V+G.charCodeAt(N),V|=0;return Z.colors[Math.abs(V)%Z.colors.length]}Z.selectColor=$;function Z(G){let V,N=null,F,B;function j(...R){if(!j.enabled)return;const A=j,S=Number(new Date),f=S-(V||S);if(A.diff=f,A.prev=V,A.curr=S,V=S,R[0]=Z.coerce(R[0]),typeof R[0]!=="string")R.unshift("%O");let q=0;R[0]=R[0].replace(/%([a-zA-Z%])/g,(E,r)=>{if(E==="%%")return"%";q++;const G0=Z.formatters[r];if(typeof G0==="function"){const X1=R[q];E=G0.call(A,X1),R.splice(q,1),q--}return E}),Z.formatArgs.call(A,R),(A.log||Z.log).apply(A,R)}if(j.namespace=G,j.useColors=Z.useColors(),j.color=Z.selectColor(G),j.extend=X,j.destroy=Z.destroy,Object.defineProperty(j,"enabled",{enumerable:!0,configurable:!1,get:()=>{if(N!==null)return N;if(F!==Z.namespaces)F=Z.namespaces,B=Z.enabled(G);return B},set:(R)=>{N=R}}),typeof Z.init==="function")Z.init(j);return j}function X(G,V){const N=Z(this.namespace+(typeof V==="undefined"?":":V)+G);return N.log=this.log,N}function Q(G){Z.save(G),Z.namespaces=G,Z.names=[],Z.skips=[];let V;const N=(typeof G==="string"?G:"").split(/[\s,]+/),F=N.length;for(V=0;V<F;V++){if(!N[V])continue;if(G=N[V].replace(/\*/g,".*?"),G[0]==="-")Z.skips.push(new RegExp("^"+G.slice(1)+"$"));else Z.names.push(new RegExp("^"+G+"$"))}}function W(){const G=[...Z.names.map(K),...Z.skips.map(K).map((V)=>"-"+V)].join(",");return Z.enable(""),G}function J(G){if(G[G.length-1]==="*")return!0;let V,N;for(V=0,N=Z.skips.length;V<N;V++)if(Z.skips[V].test(G))return!1;for(V=0,N=Z.names.length;V<N;V++)if(Z.names[V].test(G))return!0;return!1}function K(G){return G.toString().substring(2,G.toString().length-2).replace(/\.\*\?$/,"*")}function z(G){if(G instanceof Error)return G.stack||G.message;return G}function w(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return Z.enable(Z.load()),Z};kW.exports=T6});var IW=w0((SW,sZ)=>{var O6=function(){if(typeof window!=="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},A6=function(Y){if(Y[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+Y[0]+(this.useColors?"%c ":" ")+"+"+SW.humanize(this.diff),!this.useColors)return;const $="color: "+this.color;Y.splice(1,0,$,"color: inherit");let Z=0,X=0;Y[0].replace(/%[a-zA-Z%]/g,(Q)=>{if(Q==="%%")return;if(Z++,Q==="%c")X=Z}),Y.splice(X,0,$)},q6=function(Y){try{if(Y)SW.storage.setItem("debug",Y);else SW.storage.removeItem("debug")}catch($){}},E6=function(){let Y;try{Y=SW.storage.getItem("debug")}catch($){}if(!Y&&typeof process!=="undefined"&&("env"in process))Y=process.env.DEBUG;return Y},k6=function(){try{return localStorage}catch(Y){}};SW.formatArgs=A6;SW.save=q6;SW.load=E6;SW.useColors=O6;SW.storage=k6();SW.destroy=(()=>{let Y=!1;return()=>{if(!Y)Y=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}})();SW.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];SW.log=console.debug||console.log||(()=>{});sZ.exports=kX()(SW);var{formatters:S6}=sZ.exports;S6.j=function(Y){try{return JSON.stringify(Y)}catch($){return"[UnexpectedJSONParseError]: "+$.message}}});var yW=w0((CW,oZ)=>{var v6=function(){return"colors"in CW.inspectOpts?Boolean(CW.inspectOpts.colors):h6.isatty(process.stderr.fd)},g6=function(Y){const{namespace:$,useColors:Z}=this;if(Z){const X=this.color,Q="\x1B[3"+(X<8?X:"8;5;"+X),W=`  ${Q};1m${$} \x1B[0m`;Y[0]=W+Y[0].split("\n").join("\n"+W),Y.push(Q+"m+"+CW.humanize(this.diff)+"\x1B[0m")}else Y[0]=m6()+$+" "+Y[0]},m6=function(){if(CW.inspectOpts.hideDate)return"";return(new Date()).toISOString()+" "},d6=function(...Y){return process.stderr.write(rZ.format(...Y)+"\n")},u6=function(Y){if(Y)process.env.DEBUG=Y;else delete process.env.DEBUG},c6=function(){return process.env.DEBUG},l6=function(Y){Y.inspectOpts={};const $=Object.keys(CW.inspectOpts);for(let Z=0;Z<$.length;Z++)Y.inspectOpts[$[Z]]=CW.inspectOpts[$[Z]]},h6=import.meta.require("tty"),rZ=import.meta.require("util");CW.init=l6;CW.log=d6;CW.formatArgs=g6;CW.save=u6;CW.load=c6;CW.useColors=v6;CW.destroy=rZ.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");CW.colors=[6,2,3,4,5,1];try{const Y=(()=>{ throw new Error(`Cannot require module "supports-color"`);})();if(Y&&(Y.stderr||Y).level>=2)CW.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}catch(Y){}CW.inspectOpts=Object.keys(process.env).filter((Y)=>{return/^debug_/i.test(Y)}).reduce((Y,$)=>{const Z=$.substring(6).toLowerCase().replace(/_([a-z])/g,(Q,W)=>{return W.toUpperCase()});let X=process.env[$];if(/^(yes|on|true|enabled)$/i.test(X))X=!0;else if(/^(no|off|false|disabled)$/i.test(X))X=!1;else if(X==="null")X=null;else X=Number(X);return Y[Z]=X,Y},{});oZ.exports=kX()(CW);var{formatters:fW}=oZ.exports;fW.o=function(Y){return this.inspectOpts.colors=this.useColors,rZ.inspect(Y,this.inspectOpts).split("\n").map(($)=>$.trim()).join(" ")};fW.O=function(Y){return this.inspectOpts.colors=this.useColors,rZ.inspect(Y,this.inspectOpts)}});var nZ=w0((_w,SX)=>{if(typeof process==="undefined"||process.type==="renderer"||!1||process.__nwjs)SX.exports=IW();else SX.exports=yW()});var bW=w0((xW)=>{var t6=function(Y){return function($,Z){return new Promise((X,Q)=>{Y.call(this,$,Z,(W,J)=>{if(W)Q(W);else X(J)})})}};Object.defineProperty(xW,"__esModule",{value:!0});xW.default=t6});var gW=w0((fX,vW)=>{var XJ=function(Y){return Boolean(Y)&&typeof Y.addRequest==="function"},IX=function(){const{stack:Y}=new Error;if(typeof Y!=="string")return!1;return Y.split("\n").some(($)=>$.indexOf("(https.js:")!==-1||$.indexOf("node:https:")!==-1)},tZ=function(Y,$){return new tZ.Agent(Y,$)},hW=fX&&fX.__importDefault||function(Y){return Y&&Y.__esModule?Y:{default:Y}},YJ=import.meta.require("events"),$J=hW(nZ()),ZJ=hW(bW()),l$=$J.default("agent-base");(function(Y){class $ extends YJ.EventEmitter{constructor(Z,X){super();let Q=X;if(typeof Z==="function")this.callback=Z;else if(Z)Q=Z;if(this.timeout=null,Q&&typeof Q.timeout==="number")this.timeout=Q.timeout;this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=Infinity,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){if(typeof this.explicitDefaultPort==="number")return this.explicitDefaultPort;return IX()?443:80}set defaultPort(Z){this.explicitDefaultPort=Z}get protocol(){if(typeof this.explicitProtocol==="string")return this.explicitProtocol;return IX()?"https:":"http:"}set protocol(Z){this.explicitProtocol=Z}callback(Z,X,Q){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(Z,X){const Q=Object.assign({},X);if(typeof Q.secureEndpoint!=="boolean")Q.secureEndpoint=IX();if(Q.host==null)Q.host="localhost";if(Q.port==null)Q.port=Q.secureEndpoint?443:80;if(Q.protocol==null)Q.protocol=Q.secureEndpoint?"https:":"http:";if(Q.host&&Q.path)delete Q.path;delete Q.agent,delete Q.hostname,delete Q._defaultAgent,delete Q.defaultPort,delete Q.createConnection,Z._last=!0,Z.shouldKeepAlive=!1;let W=!1,J=null;const K=Q.timeout||this.timeout,z=(N)=>{if(Z._hadError)return;Z.emit("error",N),Z._hadError=!0},w=()=>{J=null,W=!0;const N=new Error(`A "socket" was not created for HTTP request before ${K}ms`);N.code="ETIMEOUT",z(N)},G=(N)=>{if(W)return;if(J!==null)clearTimeout(J),J=null;z(N)},V=(N)=>{if(W)return;if(J!=null)clearTimeout(J),J=null;if(XJ(N)){l$("Callback returned another Agent instance %o",N.constructor.name),N.addRequest(Z,Q);return}if(N){N.once("free",()=>{this.freeSocket(N,Q)}),Z.onSocket(N);return}const F=new Error(`no Duplex stream was returned to agent-base for \`${Z.method} ${Z.path}\``);z(F)};if(typeof this.callback!=="function"){z(new Error("`callback` is not defined"));return}if(!this.promisifiedCallback)if(this.callback.length>=3)l$("Converting legacy callback function to promise"),this.promisifiedCallback=ZJ.default(this.callback);else this.promisifiedCallback=this.callback;if(typeof K==="number"&&K>0)J=setTimeout(w,K);if(("port"in Q)&&typeof Q.port!=="number")Q.port=Number(Q.port);try{l$("Resolving socket for %o request: %o",Q.protocol,`${Z.method} ${Z.path}`),Promise.resolve(this.promisifiedCallback(Z,Q)).then(V,G)}catch(N){Promise.reject(N).catch(G)}}freeSocket(Z,X){l$("Freeing socket %o %o",Z.constructor.name,X),Z.destroy()}destroy(){l$("Destroying agent %o",this.constructor.name)}}Y.Agent=$,Y.prototype=Y.Agent.prototype})(tZ||(tZ={}));vW.exports=tZ});var mW=w0((i$)=>{var JJ=function(Y){return new Promise(($,Z)=>{let X=0;const Q=[];function W(){const V=Y.read();if(V)G(V);else Y.once("readable",W)}function J(){Y.removeListener("end",z),Y.removeListener("error",w),Y.removeListener("close",K),Y.removeListener("readable",W)}function K(V){p$("onclose had error %o",V)}function z(){p$("onend")}function w(V){J(),p$("onerror %o",V),Z(V)}function G(V){Q.push(V),X+=V.length;const N=Buffer.concat(Q,X);if(N.indexOf("\r\n\r\n")===-1){p$("have not received end of HTTP headers yet..."),W();return}const B=N.toString("ascii",0,N.indexOf("\r\n")),j=+B.split(" ")[1];p$("got proxy server response: %o",B),$({statusCode:j,buffered:N})}Y.on("error",w),Y.on("close",K),Y.on("end",z),W()})},QJ=i$&&i$.__importDefault||function(Y){return Y&&Y.__esModule?Y:{default:Y}};Object.defineProperty(i$,"__esModule",{value:!0});var WJ=QJ(nZ()),p$=WJ.default("https-proxy-agent:parse-proxy-response");i$.default=JJ});var lW=w0((PY)=>{var MJ=function(Y){Y.resume()},LJ=function(Y,$){return Boolean(!$&&Y===80||$&&Y===443)},FJ=function(Y){return typeof Y==="string"?/^https:?$/i.test(Y):!1},BJ=function(Y,...$){const Z={};let X;for(X in Y)if(!$.includes(X))Z[X]=Y[X];return Z},KJ=PY&&PY.__awaiter||function(Y,$,Z,X){function Q(W){return W instanceof Z?W:new Z(function(J){J(W)})}return new(Z||(Z=Promise))(function(W,J){function K(G){try{w(X.next(G))}catch(V){J(V)}}function z(G){try{w(X.throw(G))}catch(V){J(V)}}function w(G){G.done?W(G.value):Q(G.value).then(K,z)}w((X=X.apply(Y,$||[])).next())})},M$=PY&&PY.__importDefault||function(Y){return Y&&Y.__esModule?Y:{default:Y}};Object.defineProperty(PY,"__esModule",{value:!0});var dW=M$(import.meta.require("net")),uW=M$(import.meta.require("tls")),zJ=M$(import.meta.require("url")),VJ=M$(import.meta.require("assert")),GJ=M$(nZ()),wJ=gW(),NJ=M$(mW()),a$=GJ.default("https-proxy-agent:agent");class cW extends wJ.Agent{constructor(Y){let $;if(typeof Y==="string")$=zJ.default.parse(Y);else $=Y;if(!$)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");a$("creating new HttpsProxyAgent instance: %o",$);super($);const Z=Object.assign({},$);if(this.secureProxy=$.secureProxy||FJ(Z.protocol),Z.host=Z.hostname||Z.host,typeof Z.port==="string")Z.port=parseInt(Z.port,10);if(!Z.port&&Z.host)Z.port=this.secureProxy?443:80;if(this.secureProxy&&!("ALPNProtocols"in Z))Z.ALPNProtocols=["http 1.1"];if(Z.host&&Z.path)delete Z.path,delete Z.pathname;this.proxy=Z}callback(Y,$){return KJ(this,void 0,void 0,function*(){const{proxy:Z,secureProxy:X}=this;let Q;if(X)a$("Creating `tls.Socket`: %o",Z),Q=uW.default.connect(Z);else a$("Creating `net.Socket`: %o",Z),Q=dW.default.connect(Z);const W=Object.assign({},Z.headers);let K=`CONNECT ${`${$.host}:${$.port}`} HTTP/1.1\r\n`;if(Z.auth)W["Proxy-Authorization"]=`Basic ${Buffer.from(Z.auth).toString("base64")}`;let{host:z,port:w,secureEndpoint:G}=$;if(!LJ(w,G))z+=`:${w}`;W.Host=z,W.Connection="close";for(let j of Object.keys(W))K+=`${j}: ${W[j]}\r\n`;const V=NJ.default(Q);Q.write(`${K}\r\n`);const{statusCode:N,buffered:F}=yield V;if(N===200){if(Y.once("socket",MJ),$.secureEndpoint){a$("Upgrading socket connection to TLS");const j=$.servername||$.host;return uW.default.connect(Object.assign(Object.assign({},BJ($,"host","hostname","path","port")),{socket:Q,servername:j}))}return Q}Q.destroy();const B=new dW.default.Socket({writable:!1});return B.readable=!0,Y.once("socket",(j)=>{a$("replaying proxy buffer for failed request"),VJ.default(j.listenerCount("data")>0),j.push(F),j.push(null)}),B})}}PY.default=cW});var iW=w0((yX,pW)=>{var _X=function(Y){return new CX.default(Y)},jJ=yX&&yX.__importDefault||function(Y){return Y&&Y.__esModule?Y:{default:Y}},CX=jJ(lW());(function(Y){Y.HttpsProxyAgent=CX.default,Y.prototype=CX.default.prototype})(_X||(_X={}));pW.exports=_X});var l0="4.20.0";function pX(Y,$={auto:!1}){if(lX)throw new Error(`you must \`import 'openai/shims/${Y.kind}'\` before importing anything else from openai`);if(p0)throw new Error(`can't \`import 'openai/shims/${Y.kind}'\` after \`import 'openai/shims/${p0}'\``);lX=$.auto,p0=Y.kind,W1=Y.fetch,f8=Y.Request,C8=Y.Response,_8=Y.Headers,J1=Y.FormData,y8=Y.Blob,n$=Y.File,K1=Y.ReadableStream,z1=Y.getMultipartRequestOptions,V1=Y.getDefaultAgent,t$=Y.fileFromPath,G1=Y.isFsReadStream}var lX=!1,p0=void 0,W1=void 0,f8=void 0,C8=void 0,_8=void 0,J1=void 0,y8=void 0,n$=void 0,K1=void 0,z1=void 0,V1=void 0,t$=void 0,G1=void 0;class w1{constructor(Y){this.body=Y}get[Symbol.toStringTag](){return"MultipartBody"}}function iX({manuallyImported:Y}={}){const $=Y?"You may need to use polyfills":`Add one of these imports before your first \`import \u2026 from 'openai'\`:
- \`import 'openai/shims/node'\` (if you're running on Node)
- \`import 'openai/shims/web'\` (otherwise)
`;let Z,X,Q,W;try{Z=fetch,X=Request,Q=Response,W=Headers}catch(J){throw new Error(`this environment is missing the following Web Fetch API type: ${J.message}. ${$}`)}return{kind:"web",fetch:Z,Request:X,Response:Q,Headers:W,FormData:typeof FormData!=="undefined"?FormData:class J{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${$}`)}},Blob:typeof Blob!=="undefined"?Blob:class J{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${$}`)}},File:typeof File!=="undefined"?File:class J{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${$}`)}},ReadableStream:typeof ReadableStream!=="undefined"?ReadableStream:class J{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${$}`)}},getMultipartRequestOptions:async(J,K)=>({...K,body:new w1(J)}),getDefaultAgent:(J)=>{return},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:(J)=>!1}}import{ReadStream as b8} from"fs";function aX(){const Y=iX();function $(Z){return Z instanceof b8}return{...Y,isFsReadStream:$}}if(!p0)pX(aX(),{auto:!0});class P extends Error{}class y extends P{constructor(Y,$,Z,X){super(`${y.makeMessage(Y,$,Z)}`);this.status=Y,this.headers=X;const Q=$;this.error=Q,this.code=Q?.code,this.param=Q?.param,this.type=Q?.type}static makeMessage(Y,$,Z){const X=$?.message?typeof $.message==="string"?$.message:JSON.stringify($.message):$?JSON.stringify($):Z;if(Y&&X)return`${Y} ${X}`;if(Y)return`${Y} status code (no body)`;if(X)return X;return"(no status code or body)"}static generate(Y,$,Z,X){if(!Y)return new i0({cause:KZ($)});const Q=$?.error;if(Y===400)return new e$(Y,Q,Z,X);if(Y===401)return new YZ(Y,Q,Z,X);if(Y===403)return new $Z(Y,Q,Z,X);if(Y===404)return new ZZ(Y,Q,Z,X);if(Y===409)return new XZ(Y,Q,Z,X);if(Y===422)return new QZ(Y,Q,Z,X);if(Y===429)return new WZ(Y,Q,Z,X);if(Y>=500)return new JZ(Y,Q,Z,X);return new y(Y,Q,Z,X)}}class e extends y{constructor({message:Y}={}){super(void 0,void 0,Y||"Request was aborted.",void 0);this.status=void 0}}class i0 extends y{constructor({message:Y,cause:$}){super(void 0,void 0,Y||"Connection error.",void 0);if(this.status=void 0,$)this.cause=$}}class a0 extends i0{constructor({message:Y}={}){super({message:Y??"Request timed out."})}}class e$ extends y{constructor(){super(...arguments);this.status=400}}class YZ extends y{constructor(){super(...arguments);this.status=401}}class $Z extends y{constructor(){super(...arguments);this.status=403}}class ZZ extends y{constructor(){super(...arguments);this.status=404}}class XZ extends y{constructor(){super(...arguments);this.status=409}}class QZ extends y{constructor(){super(...arguments);this.status=422}}class WZ extends y{constructor(){super(...arguments);this.status=429}}class JZ extends y{}var v8=function(Y,$){const Z=Y.indexOf($);if(Z!==-1)return[Y.substring(0,Z),$,Y.substring(Z+$.length)];return[Y,"",""]},sX=function(Y){if(Y[Symbol.asyncIterator])return Y;const $=Y.getReader();return{async next(){try{const Z=await $.read();if(Z?.done)$.releaseLock();return Z}catch(Z){throw $.releaseLock(),Z}},async return(){const Z=$.cancel();return $.releaseLock(),await Z,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}};class N0{constructor(Y,$){this.iterator=Y,this.controller=$}static fromSSEResponse(Y,$){let Z=!1;const X=new rX;async function*Q(){if(!Y.body)throw $.abort(),new P("Attempted to iterate over a response with no body");const J=new s0,K=sX(Y.body);for await(let z of K)for(let w of J.decode(z)){const G=X.decode(w);if(G)yield G}for(let z of J.flush()){const w=X.decode(z);if(w)yield w}}async function*W(){if(Z)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");Z=!0;let J=!1;try{for await(let K of Q()){if(J)continue;if(K.data.startsWith("[DONE]")){J=!0;continue}if(K.event===null){let z;try{z=JSON.parse(K.data)}catch(w){throw console.error("Could not parse message into JSON:",K.data),console.error("From chunk:",K.raw),w}if(z&&z.error)throw new y(void 0,z.error,void 0,void 0);yield z}}J=!0}catch(K){if(K instanceof Error&&K.name==="AbortError")return;throw K}finally{if(!J)$.abort()}}return new N0(W,$)}static fromReadableStream(Y,$){let Z=!1;async function*X(){const W=new s0,J=sX(Y);for await(let K of J)for(let z of W.decode(K))yield z;for(let K of W.flush())yield K}async function*Q(){if(Z)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");Z=!0;let W=!1;try{for await(let J of X()){if(W)continue;if(J)yield JSON.parse(J)}W=!0}catch(J){if(J instanceof Error&&J.name==="AbortError")return;throw J}finally{if(!W)$.abort()}}return new N0(Q,$)}[Symbol.asyncIterator](){return this.iterator()}tee(){const Y=[],$=[],Z=this.iterator(),X=(Q)=>{return{next:()=>{if(Q.length===0){const W=Z.next();Y.push(W),$.push(W)}return Q.shift()}}};return[new N0(()=>X(Y),this.controller),new N0(()=>X($),this.controller)]}toReadableStream(){const Y=this;let $;const Z=new TextEncoder;return new K1({async start(){$=Y[Symbol.asyncIterator]()},async pull(X){try{const{value:Q,done:W}=await $.next();if(W)return X.close();const J=Z.encode(JSON.stringify(Q)+"\n");X.enqueue(J)}catch(Q){X.error(Q)}},async cancel(){await $.return?.()}})}}class rX{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(Y){if(Y.endsWith("\r"))Y=Y.substring(0,Y.length-1);if(!Y){if(!this.event&&!this.data.length)return null;const Q={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],Q}if(this.chunks.push(Y),Y.startsWith(":"))return null;let[$,Z,X]=v8(Y,":");if(X.startsWith(" "))X=X.substring(1);if($==="event")this.event=X;else if($==="data")this.data.push(X);return null}}class s0{constructor(){this.buffer=[],this.trailingCR=!1}decode(Y){let $=this.decodeText(Y);if(this.trailingCR)$="\r"+$,this.trailingCR=!1;if($.endsWith("\r"))this.trailingCR=!0,$=$.slice(0,-1);if(!$)return[];const Z=s0.NEWLINE_CHARS.has($[$.length-1]||"");let X=$.split(s0.NEWLINE_REGEXP);if(X.length===1&&!Z)return this.buffer.push(X[0]),[];if(this.buffer.length>0)X=[this.buffer.join("")+X[0],...X.slice(1)],this.buffer=[];if(!Z)this.buffer=[X.pop()||""];return X}decodeText(Y){if(Y==null)return"";if(typeof Y==="string")return Y;if(typeof Buffer!=="undefined"){if(Y instanceof Buffer)return Y.toString();if(Y instanceof Uint8Array)return Buffer.from(Y).toString();throw new P(`Unexpected: received non-Uint8Array (${Y.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder!=="undefined"){if(Y instanceof Uint8Array||Y instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(Y);throw new P(`Unexpected: received non-Uint8Array/ArrayBuffer (${Y.constructor.name}) in a web platform. Please report this error.`)}throw new P("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const Y=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,Y}}s0.NEWLINE_CHARS=new Set(["\n","\r","\v","\f","\x1C","\x1D","\x1E","\x85","\u2028","\u2029"]);s0.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;async function L1(Y,$,Z={}){if(Y=await Y,oX(Y)){const Q=await Y.blob();return $||($=new URL(Y.url).pathname.split(/[\\/]/).pop()??"unknown_file"),new n$([Q],$,Z)}const X=await d8(Y);if($||($=c8(Y)??"unknown_file"),!Z.type){const Q=X[0]?.type;if(typeof Q==="string")Z={...Z,type:Q}}return new n$(X,$,Z)}async function d8(Y){let $=[];if(typeof Y==="string"||ArrayBuffer.isView(Y)||Y instanceof ArrayBuffer)$.push(Y);else if(nX(Y))$.push(await Y.arrayBuffer());else if(l8(Y))for await(let Z of Y)$.push(Z);else throw new Error(`Unexpected data type: ${typeof Y}; constructor: ${Y?.constructor?.name}; props: ${u8(Y)}`);return $}var u8=function(Y){return`[${Object.getOwnPropertyNames(Y).map((Z)=>`"${Z}"`).join(", ")}]`},c8=function(Y){return N1(Y.name)||N1(Y.filename)||N1(Y.path)?.split(/[\\/]/).pop()},oX=(Y)=>Y!=null&&typeof Y==="object"&&typeof Y.url==="string"&&typeof Y.blob==="function",g8=(Y)=>Y!=null&&typeof Y==="object"&&typeof Y.name==="string"&&typeof Y.lastModified==="number"&&nX(Y),nX=(Y)=>Y!=null&&typeof Y==="object"&&typeof Y.size==="number"&&typeof Y.type==="string"&&typeof Y.text==="function"&&typeof Y.slice==="function"&&typeof Y.arrayBuffer==="function",m8=(Y)=>{return g8(Y)||oX(Y)||G1(Y)},N1=(Y)=>{if(typeof Y==="string")return Y;if(typeof Buffer!=="undefined"&&Y instanceof Buffer)return String(Y);return},l8=(Y)=>Y!=null&&typeof Y==="object"&&typeof Y[Symbol.asyncIterator]==="function",F1=(Y)=>Y&&typeof Y==="object"&&Y.body&&Y[Symbol.toStringTag]==="MultipartBody";var M0=async(Y)=>{const $=await tX(Y.body);return z1($,Y)},tX=async(Y)=>{const $=new J1;return await Promise.all(Object.entries(Y||{}).map(([Z,X])=>M1($,Z,X))),$};var M1=async(Y,$,Z)=>{if(Z===void 0)return;if(Z==null)throw new TypeError(`Received null for "${$}"; to pass null in FormData, you must use the string 'null'`);if(typeof Z==="string"||typeof Z==="number"||typeof Z==="boolean")Y.append($,String(Z));else if(m8(Z)){const X=await L1(Z);Y.append($,X)}else if(Array.isArray(Z))await Promise.all(Z.map((X)=>M1(Y,$+"[]",X)));else if(typeof Z==="object")await Promise.all(Object.entries(Z).map(([X,Q])=>M1(Y,`${$}[${X}]`,Q)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${Z} instead`)};async function ZQ(Y){const{response:$}=Y;if(Y.options.stream)return L$("response",$.status,$.url,$.headers,$.body),N0.fromSSEResponse($,Y.controller);if($.status===204)return null;if(Y.options.__binaryResponse)return $;if($.headers.get("content-type")?.includes("application/json")){const Q=await $.json();return L$("response",$.status,$.url,$.headers,Q),Q}const X=await $.text();return L$("response",$.status,$.url,$.headers,X),X}var n8=function(){if(typeof navigator==="undefined"||!navigator)return null;const Y=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:$,pattern:Z}of Y){const X=Z.exec(navigator.userAgent);if(X){const Q=X[1]||0,W=X[2]||0,J=X[3]||0;return{browser:$,version:`${Q}.${W}.${J}`}}}return null};function QQ(Y){if(!Y)return!0;for(let $ in Y)return!1;return!0}function Z9(Y,$){return Object.prototype.hasOwnProperty.call(Y,$)}function L$(Y,...$){if(typeof process!=="undefined"&&process.env.DEBUG==="true")console.log(`OpenAI:DEBUG:${Y}`,...$)}var i8=function(Y,$,Z,X,Q){if(X==="m")throw new TypeError("Private method is not writable");if(X==="a"&&!Q)throw new TypeError("Private accessor was defined without a setter");if(typeof $==="function"?Y!==$||!Q:!$.has(Y))throw new TypeError("Cannot write private member to an object whose class did not declare it");return X==="a"?Q.call(Y,Z):Q?Q.value=Z:$.set(Y,Z),Z},a8=function(Y,$,Z,X){if(Z==="a"&&!X)throw new TypeError("Private accessor was defined without a getter");if(typeof $==="function"?Y!==$||!X:!$.has(Y))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Z==="m"?X:Z==="a"?X.call(Y):X?X.value:$.get(Y)},zZ;class VZ extends Promise{constructor(Y,$=ZQ){super((Z)=>{Z(null)});this.responsePromise=Y,this.parseResponse=$}_thenUnwrap(Y){return new VZ(this.responsePromise,async($)=>Y(await this.parseResponse($)))}asResponse(){return this.responsePromise.then((Y)=>Y.response)}async withResponse(){const[Y,$]=await Promise.all([this.parse(),this.asResponse()]);return{data:Y,response:$}}parse(){if(!this.parsedPromise)this.parsedPromise=this.responsePromise.then(this.parseResponse);return this.parsedPromise}then(Y,$){return this.parse().then(Y,$)}catch(Y){return this.parse().catch(Y)}finally(Y){return this.parse().finally(Y)}}class j1{constructor({baseURL:Y,maxRetries:$=2,timeout:Z=600000,httpAgent:X,fetch:Q}){this.baseURL=Y,this.maxRetries=B1("maxRetries",$),this.timeout=B1("timeout",Z),this.httpAgent=X,this.fetch=Q??W1}authHeaders(Y){return{}}defaultHeaders(Y){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...t8(),...this.authHeaders(Y)}}validateHeaders(Y,$){}defaultIdempotencyKey(){return`stainless-node-retry-${X9()}`}get(Y,$){return this.methodRequest("get",Y,$)}post(Y,$){return this.methodRequest("post",Y,$)}patch(Y,$){return this.methodRequest("patch",Y,$)}put(Y,$){return this.methodRequest("put",Y,$)}delete(Y,$){return this.methodRequest("delete",Y,$)}methodRequest(Y,$,Z){return this.request(Promise.resolve(Z).then((X)=>({method:Y,path:$,...X})))}getAPIList(Y,$,Z){return this.requestAPIList($,{method:"get",path:Y,...Z})}calculateContentLength(Y){if(typeof Y==="string"){if(typeof Buffer!=="undefined")return Buffer.byteLength(Y,"utf8").toString();if(typeof TextEncoder!=="undefined")return(new TextEncoder()).encode(Y).length.toString()}return null}buildRequest(Y){const{method:$,path:Z,query:X,headers:Q={}}=Y,W=F1(Y.body)?Y.body.body:Y.body?JSON.stringify(Y.body,null,2):null,J=this.calculateContentLength(W),K=this.buildURL(Z,X);if("timeout"in Y)B1("timeout",Y.timeout);const z=Y.timeout??this.timeout,w=Y.httpAgent??this.httpAgent??V1(K),G=z+1000;if(typeof w?.options?.timeout==="number"&&G>(w.options.timeout??0))w.options.timeout=G;if(this.idempotencyHeader&&$!=="get"){if(!Y.idempotencyKey)Y.idempotencyKey=this.defaultIdempotencyKey();Q[this.idempotencyHeader]=Y.idempotencyKey}const V={...J&&{"Content-Length":J},...this.defaultHeaders(Y),...Q};if(F1(Y.body)&&p0!=="node")delete V["Content-Type"];Object.keys(V).forEach((F)=>V[F]===null&&delete V[F]);const N={method:$,...W&&{body:W},headers:V,...w&&{agent:w},signal:Y.signal??null};return this.validateHeaders(V,Q),{req:N,url:K,timeout:z}}async prepareRequest(Y,{url:$,options:Z}){}parseHeaders(Y){return!Y?{}:(Symbol.iterator in Y)?Object.fromEntries(Array.from(Y).map(($)=>[...$])):{...Y}}makeStatusError(Y,$,Z,X){return y.generate(Y,$,Z,X)}request(Y,$=null){return new VZ(this.makeRequest(Y,$))}async makeRequest(Y,$){const Z=await Y;if($==null)$=Z.maxRetries??this.maxRetries;const{req:X,url:Q,timeout:W}=this.buildRequest(Z);if(await this.prepareRequest(X,{url:Q,options:Z}),L$("request",Q,Z,X.headers),Z.signal?.aborted)throw new e;const J=new AbortController,K=await this.fetchWithTimeout(Q,X,W,J).catch(KZ);if(K instanceof Error){if(Z.signal?.aborted)throw new e;if($)return this.retryRequest(Z,$);if(K.name==="AbortError")throw new a0;throw new i0({cause:K})}const z=s8(K.headers);if(!K.ok){if($&&this.shouldRetry(K))return this.retryRequest(Z,$,z);const w=await K.text().catch((F)=>KZ(F).message),G=e8(w),V=G?void 0:w;throw L$("response",K.status,Q,z,V),this.makeStatusError(K.status,G,V,z)}return{response:K,options:Z,controller:J}}requestAPIList(Y,$){const Z=this.makeRequest($,null);return new XQ(this,Z,Y)}buildURL(Y,$){const Z=$9(Y)?new URL(Y):new URL(this.baseURL+(this.baseURL.endsWith("/")&&Y.startsWith("/")?Y.slice(1):Y)),X=this.defaultQuery();if(!QQ(X))$={...X,...$};if($)Z.search=this.stringifyQuery($);return Z.toString()}stringifyQuery(Y){return Object.entries(Y).filter(([$,Z])=>typeof Z!=="undefined").map(([$,Z])=>{if(typeof Z==="string"||typeof Z==="number"||typeof Z==="boolean")return`${encodeURIComponent($)}=${encodeURIComponent(Z)}`;if(Z===null)return`${encodeURIComponent($)}=`;throw new P(`Cannot stringify type ${typeof Z}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(Y,$,Z,X){const{signal:Q,...W}=$||{};if(Q)Q.addEventListener("abort",()=>X.abort());const J=setTimeout(()=>X.abort(),Z);return this.getRequestClient().fetch.call(void 0,Y,{signal:X.signal,...W}).finally(()=>{clearTimeout(J)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(Y){const $=Y.headers.get("x-should-retry");if($==="true")return!0;if($==="false")return!1;if(Y.status===408)return!0;if(Y.status===409)return!0;if(Y.status===429)return!0;if(Y.status>=500)return!0;return!1}async retryRequest(Y,$,Z){let X;const Q=Z?.["retry-after"];if(Q){const W=parseInt(Q);if(!Number.isNaN(W))X=W*1000;else X=Date.parse(Q)-Date.now()}if(!X||!Number.isInteger(X)||X<=0||X>60000){const W=Y.maxRetries??this.maxRetries;X=this.calculateDefaultRetryTimeoutMillis($,W)}return await H1(X),this.makeRequest(Y,$-1)}calculateDefaultRetryTimeoutMillis(Y,$){const Q=$-Y,W=Math.min(0.5*Math.pow(2,Q),8),J=1-Math.random()*0.25;return W*J*1000}getUserAgent(){return`${this.constructor.name}/JS ${l0}`}}class GZ{constructor(Y,$,Z,X){zZ.set(this,void 0),i8(this,zZ,Y,"f"),this.options=X,this.response=$,this.body=Z}hasNextPage(){if(!this.getPaginatedItems().length)return!1;return this.nextPageInfo()!=null}async getNextPage(){const Y=this.nextPageInfo();if(!Y)throw new P("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const $={...this.options};if("params"in Y)$.query={...$.query,...Y.params};else if("url"in Y){const Z=[...Object.entries($.query||{}),...Y.url.searchParams.entries()];for(let[X,Q]of Z)Y.url.searchParams.set(X,Q);$.query=void 0,$.path=Y.url.toString()}return await a8(this,zZ,"f").requestAPIList(this.constructor,$)}async*iterPages(){let Y=this;yield Y;while(Y.hasNextPage())Y=await Y.getNextPage(),yield Y}async*[(zZ=new WeakMap,Symbol.asyncIterator)](){for await(let Y of this.iterPages())for(let $ of Y.getPaginatedItems())yield $}}class XQ extends VZ{constructor(Y,$,Z){super($,async(X)=>new Z(Y,X.response,await ZQ(X),X.options))}async*[Symbol.asyncIterator](){const Y=await this;for await(let $ of Y)yield $}}var s8=(Y)=>{return new Proxy(Object.fromEntries(Y.entries()),{get($,Z){const X=Z.toString();return $[X.toLowerCase()]||$[X]}})},r8={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryResponse:!0},x=(Y)=>{return typeof Y==="object"&&Y!==null&&!QQ(Y)&&Object.keys(Y).every(($)=>Z9(r8,$))},o8=()=>{if(typeof Deno!=="undefined"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":l0,"X-Stainless-OS":YQ(Deno.build.os),"X-Stainless-Arch":eX(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":Deno.version};if(typeof EdgeRuntime!=="undefined")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":l0,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process!=="undefined"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":l0,"X-Stainless-OS":YQ(process.platform),"X-Stainless-Arch":eX(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const Y=n8();if(Y)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":l0,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${Y.browser}`,"X-Stainless-Runtime-Version":Y.version};return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":l0,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}},eX=(Y)=>{if(Y==="x32")return"x32";if(Y==="x86_64"||Y==="x64")return"x64";if(Y==="arm")return"arm";if(Y==="aarch64"||Y==="arm64")return"arm64";if(Y)return`other:${Y}`;return"unknown"},YQ=(Y)=>{if(Y=Y.toLowerCase(),Y.includes("ios"))return"iOS";if(Y==="android")return"Android";if(Y==="darwin")return"MacOS";if(Y==="win32")return"Windows";if(Y==="freebsd")return"FreeBSD";if(Y==="openbsd")return"OpenBSD";if(Y==="linux")return"Linux";if(Y)return`Other:${Y}`;return"Unknown"},$Q,t8=()=>{return $Q??($Q=o8())},e8=(Y)=>{try{return JSON.parse(Y)}catch($){return}},Y9=new RegExp("^(?:[a-z]+:)?//","i"),$9=(Y)=>{return Y9.test(Y)},H1=(Y)=>new Promise(($)=>setTimeout($,Y)),B1=(Y,$)=>{if(typeof $!=="number"||!Number.isInteger($))throw new P(`${Y} must be an integer`);if($<0)throw new P(`${Y} must be a positive integer`);return $},KZ=(Y)=>{if(Y instanceof Error)return Y;return new Error(Y)};var U1=(Y)=>{if(typeof process!=="undefined")return process.env?.[Y]??void 0;if(typeof Deno!=="undefined")return Deno.env?.get?.(Y);return};var X9=()=>{return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(Y)=>{const $=Math.random()*16|0;return(Y==="x"?$:$&3|8).toString(16)})},WQ=()=>{return typeof window!=="undefined"&&typeof window.document!=="undefined"&&typeof navigator!=="undefined"};class T0 extends GZ{constructor(Y,$,Z,X){super(Y,$,Z,X);this.data=Z.data,this.object=Z.object}getPaginatedItems(){return this.data}nextPageParams(){return null}nextPageInfo(){return null}}class g extends GZ{constructor(Y,$,Z,X){super(Y,$,Z,X);this.data=Z.data}getPaginatedItems(){return this.data}nextPageParams(){const Y=this.nextPageInfo();if(!Y)return null;if("params"in Y)return Y.params;const $=Object.fromEntries(Y.url.searchParams);if(!Object.keys($).length)return null;return $}nextPageInfo(){if(!this.data?.length)return null;const Y=this.data[this.data.length-1]?.id;if(!Y)return null;return{params:{after:Y}}}}class U{constructor(Y){this._client=Y}}class qY extends U{create(Y,$){return this._client.post("/chat/completions",{body:Y,...$,stream:Y.stream??!1})}}(function(Y){})(qY||(qY={}));class r0 extends U{constructor(){super(...arguments);this.completions=new qY(this._client)}}(function(Y){Y.Completions=qY})(r0||(r0={}));class EY extends U{create(Y,$){return this._client.post("/audio/speech",{body:Y,...$,__binaryResponse:!0})}}(function(Y){})(EY||(EY={}));class kY extends U{create(Y,$){return this._client.post("/audio/transcriptions",M0({body:Y,...$}))}}(function(Y){})(kY||(kY={}));class SY extends U{create(Y,$){return this._client.post("/audio/translations",M0({body:Y,...$}))}}(function(Y){})(SY||(SY={}));class o0 extends U{constructor(){super(...arguments);this.transcriptions=new kY(this._client),this.translations=new SY(this._client),this.speech=new EY(this._client)}}(function(Y){Y.Transcriptions=kY,Y.Translations=SY,Y.Speech=EY})(o0||(o0={}));class IY extends U{create(Y,$,Z){return this._client.post(`/assistants/${Y}/files`,{body:$,...Z,headers:{"OpenAI-Beta":"assistants=v1",...Z?.headers}})}retrieve(Y,$,Z){return this._client.get(`/assistants/${Y}/files/${$}`,{...Z,headers:{"OpenAI-Beta":"assistants=v1",...Z?.headers}})}list(Y,$={},Z){if(x($))return this.list(Y,{},$);return this._client.getAPIList(`/assistants/${Y}/files`,fY,{query:$,...Z,headers:{"OpenAI-Beta":"assistants=v1",...Z?.headers}})}del(Y,$,Z){return this._client.delete(`/assistants/${Y}/files/${$}`,{...Z,headers:{"OpenAI-Beta":"assistants=v1",...Z?.headers}})}}class fY extends g{}(function(Y){Y.AssistantFilesPage=fY})(IY||(IY={}));class CY extends U{constructor(){super(...arguments);this.files=new IY(this._client)}create(Y,$){return this._client.post("/assistants",{body:Y,...$,headers:{"OpenAI-Beta":"assistants=v1",...$?.headers}})}retrieve(Y,$){return this._client.get(`/assistants/${Y}`,{...$,headers:{"OpenAI-Beta":"assistants=v1",...$?.headers}})}update(Y,$,Z){return this._client.post(`/assistants/${Y}`,{body:$,...Z,headers:{"OpenAI-Beta":"assistants=v1",...Z?.headers}})}list(Y={},$){if(x(Y))return this.list({},Y);return this._client.getAPIList("/assistants",_Y,{query:Y,...$,headers:{"OpenAI-Beta":"assistants=v1",...$?.headers}})}del(Y,$){return this._client.delete(`/assistants/${Y}`,{...$,headers:{"OpenAI-Beta":"assistants=v1",...$?.headers}})}}class _Y extends g{}(function(Y){Y.AssistantsPage=_Y,Y.Files=IY,Y.AssistantFilesPage=fY})(CY||(CY={}));function R1(Y){return typeof Y.parse==="function"}var n0=(Y)=>{return Y?.role==="assistant"},D1=(Y)=>{return Y?.role==="function"},zQ=(Y)=>{return Y?.role==="tool"};var J0=function(Y,$,Z,X,Q){if(X==="m")throw new TypeError("Private method is not writable");if(X==="a"&&!Q)throw new TypeError("Private accessor was defined without a setter");if(typeof $==="function"?Y!==$||!Q:!$.has(Y))throw new TypeError("Cannot write private member to an object whose class did not declare it");return X==="a"?Q.call(Y,Z):Q?Q.value=Z:$.set(Y,Z),Z},T=function(Y,$,Z,X){if(Z==="a"&&!X)throw new TypeError("Private accessor was defined without a getter");if(typeof $==="function"?Y!==$||!X:!$.has(Y))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Z==="m"?X:Z==="a"?X.call(Y):X?X.value:$.get(Y)},u,wZ,NZ,F$,B$,MZ,j$,O0,H$,LZ,FZ,yY,P1,T1,O1,A1,q1,E1,GQ,k1,VQ=10;class U${constructor(){u.add(this),this.controller=new AbortController,wZ.set(this,void 0),NZ.set(this,()=>{}),F$.set(this,()=>{}),B$.set(this,void 0),MZ.set(this,()=>{}),j$.set(this,()=>{}),O0.set(this,{}),this._chatCompletions=[],this.messages=[],H$.set(this,!1),LZ.set(this,!1),FZ.set(this,!1),yY.set(this,!1),E1.set(this,(Y)=>{if(J0(this,LZ,!0,"f"),Y instanceof Error&&Y.name==="AbortError")Y=new e;if(Y instanceof e)return J0(this,FZ,!0,"f"),this._emit("abort",Y);if(Y instanceof P)return this._emit("error",Y);if(Y instanceof Error){const $=new P(Y.message);return $.cause=Y,this._emit("error",$)}return this._emit("error",new P(String(Y)))}),J0(this,wZ,new Promise((Y,$)=>{J0(this,NZ,Y,"f"),J0(this,F$,$,"f")}),"f"),J0(this,B$,new Promise((Y,$)=>{J0(this,MZ,Y,"f"),J0(this,j$,$,"f")}),"f"),T(this,wZ,"f").catch(()=>{}),T(this,B$,"f").catch(()=>{})}_run(Y){setTimeout(()=>{Y().then(()=>{this._emitFinal(),this._emit("end")},T(this,E1,"f"))},0)}_addChatCompletion(Y){this._chatCompletions.push(Y),this._emit("chatCompletion",Y);const $=Y.choices[0]?.message;if($)this._addMessage($);return Y}_addMessage(Y,$=!0){if(this.messages.push(Y),$){if(this._emit("message",Y),(D1(Y)||zQ(Y))&&Y.content)this._emit("functionCallResult",Y.content);else if(n0(Y)&&Y.function_call)this._emit("functionCall",Y.function_call);else if(n0(Y)&&Y.tool_calls){for(let Z of Y.tool_calls)if(Z.type==="function")this._emit("functionCall",Z.function)}}}_connected(){if(this.ended)return;T(this,NZ,"f").call(this),this._emit("connect")}get ended(){return T(this,H$,"f")}get errored(){return T(this,LZ,"f")}get aborted(){return T(this,FZ,"f")}abort(){this.controller.abort()}on(Y,$){return(T(this,O0,"f")[Y]||(T(this,O0,"f")[Y]=[])).push({listener:$}),this}off(Y,$){const Z=T(this,O0,"f")[Y];if(!Z)return this;const X=Z.findIndex((Q)=>Q.listener===$);if(X>=0)Z.splice(X,1);return this}once(Y,$){return(T(this,O0,"f")[Y]||(T(this,O0,"f")[Y]=[])).push({listener:$,once:!0}),this}emitted(Y){return new Promise(($,Z)=>{if(J0(this,yY,!0,"f"),Y!=="error")this.once("error",Z);this.once(Y,$)})}async done(){J0(this,yY,!0,"f"),await T(this,B$,"f")}async finalChatCompletion(){await this.done();const Y=this._chatCompletions[this._chatCompletions.length-1];if(!Y)throw new P("stream ended without producing a ChatCompletion");return Y}async finalContent(){return await this.done(),T(this,u,"m",P1).call(this)}async finalMessage(){return await this.done(),T(this,u,"m",T1).call(this)}async finalFunctionCall(){return await this.done(),T(this,u,"m",O1).call(this)}async finalFunctionCallResult(){return await this.done(),T(this,u,"m",A1).call(this)}async totalUsage(){return await this.done(),T(this,u,"m",q1).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emit(Y,...$){if(T(this,H$,"f"))return;if(Y==="end")J0(this,H$,!0,"f"),T(this,MZ,"f").call(this);const Z=T(this,O0,"f")[Y];if(Z)T(this,O0,"f")[Y]=Z.filter((X)=>!X.once),Z.forEach(({listener:X})=>X(...$));if(Y==="abort"){const X=$[0];if(!T(this,yY,"f")&&!Z?.length)Promise.reject(X);T(this,F$,"f").call(this,X),T(this,j$,"f").call(this,X),this._emit("end");return}if(Y==="error"){const X=$[0];if(!T(this,yY,"f")&&!Z?.length)Promise.reject(X);T(this,F$,"f").call(this,X),T(this,j$,"f").call(this,X),this._emit("end")}}_emitFinal(){const Y=this._chatCompletions[this._chatCompletions.length-1];if(Y)this._emit("finalChatCompletion",Y);const $=this.messages[this.messages.length-1];if($)this._emit("finalMessage",$);const Z=T(this,u,"m",P1).call(this);if(Z)this._emit("finalContent",Z);const X=T(this,u,"m",O1).call(this);if(X)this._emit("finalFunctionCall",X);const Q=T(this,u,"m",A1).call(this);if(Q!=null)this._emit("finalFunctionCallResult",Q);if(this._chatCompletions.some((W)=>W.usage))this._emit("totalUsage",T(this,u,"m",q1).call(this))}async _createChatCompletion(Y,$,Z){const X=Z?.signal;if(X){if(X.aborted)this.controller.abort();X.addEventListener("abort",()=>this.controller.abort())}T(this,u,"m",GQ).call(this,$);const Q=await Y.create({...$,stream:!1},{...Z,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Q)}async _runChatCompletion(Y,$,Z){for(let X of $.messages)this._addMessage(X,!1);return await this._createChatCompletion(Y,$,Z)}async _runFunctions(Y,$,Z){const{function_call:Q="auto",stream:W,...J}=$,K=typeof Q!=="string"&&Q?.name,{maxChatCompletions:z=VQ}=Z||{},w={};for(let V of $.functions)w[V.name||V.function.name]=V;const G=$.functions.map((V)=>({name:V.name||V.function.name,parameters:V.parameters,description:V.description}));for(let V of $.messages)this._addMessage(V,!1);for(let V=0;V<z;++V){const F=(await this._createChatCompletion(Y,{...J,function_call:Q,functions:G,messages:[...this.messages]},Z)).choices[0]?.message;if(!F)throw new P("missing message in ChatCompletion response");if(!F.function_call)return;const{name:B,arguments:j}=F.function_call,R=w[B];if(!R){const q=`Invalid function_call: ${JSON.stringify(B)}. Available options are: ${G.map((v)=>JSON.stringify(v.name)).join(", ")}. Please try again`;this._addMessage({role:"function",name:B,content:q});continue}else if(K&&K!==B){const q=`Invalid function_call: ${JSON.stringify(B)}. ${JSON.stringify(K)} requested. Please try again`;this._addMessage({role:"function",name:B,content:q});continue}let A;try{A=R1(R)?await R.parse(j):j}catch(q){this._addMessage({role:"function",name:B,content:q instanceof Error?q.message:String(q)});continue}const S=await R.function(A,this),f=T(this,u,"m",k1).call(this,S);if(this._addMessage({role:"function",name:B,content:f}),K)return}}async _runTools(Y,$,Z){const{tool_choice:Q="auto",stream:W,...J}=$,K=typeof Q!=="string"&&Q?.function?.name,{maxChatCompletions:z=VQ}=Z||{},w={};for(let V of $.tools)if(V.type==="function")w[V.function.name||V.function.function.name]=V.function;const G="tools"in $?$.tools.map((V)=>V.type==="function"?{type:"function",function:{name:V.function.name||V.function.function.name,parameters:V.function.parameters,description:V.function.description}}:V):void 0;for(let V of $.messages)this._addMessage(V,!1);for(let V=0;V<z;++V){const F=(await this._createChatCompletion(Y,{...J,tool_choice:Q,tools:G,messages:[...this.messages]},Z)).choices[0]?.message;if(!F)throw new P("missing message in ChatCompletion response");if(!F.tool_calls)return;for(let B of F.tool_calls){if(B.type!=="function")continue;const j=B.id,{name:R,arguments:A}=B.function,S=w[R];if(!S){const E=`Invalid tool_call: ${JSON.stringify(R)}. Available options are: ${G.map((r)=>JSON.stringify(r.function.name)).join(", ")}. Please try again`;this._addMessage({role:"tool",tool_call_id:j,content:E});continue}else if(K&&K!==R){const E=`Invalid tool_call: ${JSON.stringify(R)}. ${JSON.stringify(K)} requested. Please try again`;this._addMessage({role:"tool",tool_call_id:j,content:E});continue}let f;try{f=R1(S)?await S.parse(A):A}catch(E){const r=E instanceof Error?E.message:String(E);this._addMessage({role:"tool",tool_call_id:j,content:r});continue}const q=await S.function(f,this),v=T(this,u,"m",k1).call(this,q);if(this._addMessage({role:"tool",tool_call_id:j,content:v}),K)return}}}}wZ=new WeakMap,NZ=new WeakMap,F$=new WeakMap,B$=new WeakMap,MZ=new WeakMap,j$=new WeakMap,O0=new WeakMap,H$=new WeakMap,LZ=new WeakMap,FZ=new WeakMap,yY=new WeakMap,E1=new WeakMap,u=new WeakSet,P1=function Y(){return T(this,u,"m",T1).call(this).content},T1=function Y(){let $=this.messages.length;while($-- >0){const Z=this.messages[$];if(n0(Z))return Z}throw new P("stream ended without producing a ChatCompletionMessage with role=assistant")},O1=function Y(){for(let $=this.messages.length-1;$>=0;$--){const Z=this.messages[$];if(n0(Z)&&Z?.function_call)return Z.function_call}return},A1=function Y(){for(let $=this.messages.length-1;$>=0;$--){const Z=this.messages[$];if(D1(Z)&&Z.content!=null)return Z.content}return},q1=function Y(){const $={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(let{usage:Z}of this._chatCompletions)if(Z)$.completion_tokens+=Z.completion_tokens,$.prompt_tokens+=Z.prompt_tokens,$.total_tokens+=Z.total_tokens;return $},GQ=function Y($){if($.n!=null&&$.n>1)throw new P("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},k1=function Y($){return typeof $==="string"?$:$===void 0?"undefined":JSON.stringify($)};class xY extends U${static runFunctions(Y,$,Z){const X=new xY;return X._run(()=>X._runFunctions(Y,$,Z)),X}static runTools(Y,$,Z){const X=new xY;return X._run(()=>X._runTools(Y,$,Z)),X}_addMessage(Y){if(super._addMessage(Y),n0(Y)&&Y.content)this._emit("content",Y.content)}}var G9=function(Y){const{id:$,choices:Z,created:X,model:Q}=Y;return{id:$,choices:Z.map(({message:W,finish_reason:J,index:K})=>{if(!J)throw new P(`missing finish_reason for choice ${K}`);const{content:z=null,function_call:w,tool_calls:G}=W,V=W.role;if(!V)throw new P(`missing role for choice ${K}`);if(w){const{arguments:N,name:F}=w;if(N==null)throw new P(`missing function_call.arguments for choice ${K}`);if(!F)throw new P(`missing function_call.name for choice ${K}`);return{message:{content:z,function_call:{arguments:N,name:F},role:V},finish_reason:J,index:K}}if(G)return{index:K,finish_reason:J,message:{role:V,content:z,tool_calls:G.map((N,F)=>{const{function:B,type:j,id:R}=N,{arguments:A,name:S}=B||{};if(R==null)throw new P(`missing choices[${K}].tool_calls[${F}].id\n${jZ(Y)}`);if(j==null)throw new P(`missing choices[${K}].tool_calls[${F}].type\n${jZ(Y)}`);if(S==null)throw new P(`missing choices[${K}].tool_calls[${F}].function.name\n${jZ(Y)}`);if(A==null)throw new P(`missing choices[${K}].tool_calls[${F}].function.arguments\n${jZ(Y)}`);return{id:R,type:j,function:{name:S,arguments:A}}})}};return{message:{content:z,role:V},finish_reason:J,index:K}}),created:X,model:Q,object:"chat.completion"}},jZ=function(Y){return JSON.stringify(Y)},K0=function(Y,$,Z,X){if(Z==="a"&&!X)throw new TypeError("Private accessor was defined without a getter");if(typeof $==="function"?Y!==$||!X:!$.has(Y))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Z==="m"?X:Z==="a"?X.call(Y):X?X.value:$.get(Y)},S1=function(Y,$,Z,X,Q){if(X==="m")throw new TypeError("Private method is not writable");if(X==="a"&&!Q)throw new TypeError("Private accessor was defined without a setter");if(typeof $==="function"?Y!==$||!Q:!$.has(Y))throw new TypeError("Cannot write private member to an object whose class did not declare it");return X==="a"?Q.call(Y,Z):Q?Q.value=Z:$.set(Y,Z),Z},L0,I0,I1,f1,BZ,wQ;class t0 extends U${constructor(){super(...arguments);L0.add(this),I0.set(this,void 0)}get currentChatCompletionSnapshot(){return K0(this,I0,"f")}static fromReadableStream(Y){const $=new t0;return $._run(()=>$._fromReadableStream(Y)),$}static createChatCompletion(Y,$,Z){const X=new t0;return X._run(()=>X._runChatCompletion(Y,{...$,stream:!0},{...Z,headers:{...Z?.headers,"X-Stainless-Helper-Method":"stream"}})),X}async _createChatCompletion(Y,$,Z){const X=Z?.signal;if(X){if(X.aborted)this.controller.abort();X.addEventListener("abort",()=>this.controller.abort())}K0(this,L0,"m",I1).call(this);const Q=await Y.create({...$,stream:!0},{...Z,signal:this.controller.signal});this._connected();for await(let W of Q)K0(this,L0,"m",f1).call(this,W);if(Q.controller.signal?.aborted)throw new e;return this._addChatCompletion(K0(this,L0,"m",BZ).call(this))}async _fromReadableStream(Y,$){const Z=$?.signal;if(Z){if(Z.aborted)this.controller.abort();Z.addEventListener("abort",()=>this.controller.abort())}K0(this,L0,"m",I1).call(this),this._connected();const X=N0.fromReadableStream(Y,this.controller);let Q;for await(let W of X){if(Q&&Q!==W.id)this._addChatCompletion(K0(this,L0,"m",BZ).call(this));K0(this,L0,"m",f1).call(this,W),Q=W.id}if(X.controller.signal?.aborted)throw new e;return this._addChatCompletion(K0(this,L0,"m",BZ).call(this))}[(I0=new WeakMap,L0=new WeakSet,I1=function Y(){if(this.ended)return;S1(this,I0,void 0,"f")},f1=function Y($){if(this.ended)return;const Z=K0(this,L0,"m",wQ).call(this,$);this._emit("chunk",$,Z);const X=$.choices[0]?.delta?.content,Q=Z.choices[0]?.message;if(X!=null&&Q?.role==="assistant"&&Q?.content)this._emit("content",X,Q.content)},BZ=function Y(){if(this.ended)throw new P("stream has ended, this shouldn't happen");const $=K0(this,I0,"f");if(!$)throw new P("request ended without sending any chunks");return S1(this,I0,void 0,"f"),G9($)},wQ=function Y($){var Z,X;let Q=K0(this,I0,"f");const{choices:W,...J}=$;if(!Q)Q=S1(this,I0,{...J,choices:[]},"f");else Object.assign(Q,J);for(let{delta:K,finish_reason:z,index:w,...G}of $.choices){let V=Q.choices[w];if(!V){Q.choices[w]={finish_reason:z,index:w,message:K,...G};continue}if(z)V.finish_reason=z;if(Object.assign(V,G),!K)continue;const{content:N,function_call:F,role:B,tool_calls:j}=K;if(N)V.message.content=(V.message.content||"")+N;if(B)V.message.role=B;if(F)if(!V.message.function_call)V.message.function_call=F;else{if(F.name)V.message.function_call.name=F.name;if(F.arguments)(Z=V.message.function_call).arguments??(Z.arguments=""),V.message.function_call.arguments+=F.arguments}if(j){if(!V.message.tool_calls)V.message.tool_calls=[];for(let{index:R,id:A,type:S,function:f}of j){const q=(X=V.message.tool_calls)[R]??(X[R]={});if(A)q.id=A;if(S)q.type=S;if(f)q.function??(q.function={arguments:""});if(f?.name)q.function.name=f.name;if(f?.arguments)q.function.arguments+=f.arguments}}}return Q},Symbol.asyncIterator)](){const Y=[],$=[];let Z=!1;return this.on("chunk",(X)=>{const Q=$.shift();if(Q)Q(X);else Y.push(X)}),this.on("end",()=>{Z=!0;for(let X of $)X(void 0);$.length=0}),{next:async()=>{if(!Y.length){if(Z)return{value:void 0,done:!0};return new Promise((Q)=>$.push(Q)).then((Q)=>Q?{value:Q,done:!1}:{value:void 0,done:!0})}return{value:Y.shift(),done:!1}}}}toReadableStream(){return new N0(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}class e0 extends t0{static fromReadableStream(Y){const $=new e0;return $._run(()=>$._fromReadableStream(Y)),$}static runFunctions(Y,$,Z){const X=new e0;return X._run(()=>X._runFunctions(Y,$,{...Z,headers:{...Z?.headers,"X-Stainless-Helper-Method":"runFunctions"}})),X}static runTools(Y,$,Z){const X=new e0;return X._run(()=>X._runTools(Y,$,{...Z,headers:{...Z?.headers,"X-Stainless-Helper-Method":"runTools"}})),X}}class HZ extends U{runFunctions(Y,$){if(Y.stream)return e0.runFunctions(this._client.chat.completions,Y,$);return xY.runFunctions(this._client.chat.completions,Y,$)}runTools(Y,$){if(Y.stream)return e0.runTools(this._client.chat.completions,Y,$);return xY.runTools(this._client.chat.completions,Y,$)}stream(Y,$){return t0.createChatCompletion(this._client.chat.completions,Y,$)}}class bY extends U{constructor(){super(...arguments);this.completions=new HZ(this._client)}}(function(Y){Y.Completions=HZ})(bY||(bY={}));class hY extends U{retrieve(Y,$,Z,X){return this._client.get(`/threads/${Y}/messages/${$}/files/${Z}`,{...X,headers:{"OpenAI-Beta":"assistants=v1",...X?.headers}})}list(Y,$,Z={},X){if(x(Z))return this.list(Y,$,{},Z);return this._client.getAPIList(`/threads/${Y}/messages/${$}/files`,vY,{query:Z,...X,headers:{"OpenAI-Beta":"assistants=v1",...X?.headers}})}}class vY extends g{}(function(Y){Y.MessageFilesPage=vY})(hY||(hY={}));class gY extends U{constructor(){super(...arguments);this.files=new hY(this._client)}create(Y,$,Z){return this._client.post(`/threads/${Y}/messages`,{body:$,...Z,headers:{"OpenAI-Beta":"assistants=v1",...Z?.headers}})}retrieve(Y,$,Z){return this._client.get(`/threads/${Y}/messages/${$}`,{...Z,headers:{"OpenAI-Beta":"assistants=v1",...Z?.headers}})}update(Y,$,Z,X){return this._client.post(`/threads/${Y}/messages/${$}`,{body:Z,...X,headers:{"OpenAI-Beta":"assistants=v1",...X?.headers}})}list(Y,$={},Z){if(x($))return this.list(Y,{},$);return this._client.getAPIList(`/threads/${Y}/messages`,mY,{query:$,...Z,headers:{"OpenAI-Beta":"assistants=v1",...Z?.headers}})}}class mY extends g{}(function(Y){Y.ThreadMessagesPage=mY,Y.Files=hY,Y.MessageFilesPage=vY})(gY||(gY={}));class dY extends U{retrieve(Y,$,Z,X){return this._client.get(`/threads/${Y}/runs/${$}/steps/${Z}`,{...X,headers:{"OpenAI-Beta":"assistants=v1",...X?.headers}})}list(Y,$,Z={},X){if(x(Z))return this.list(Y,$,{},Z);return this._client.getAPIList(`/threads/${Y}/runs/${$}/steps`,uY,{query:Z,...X,headers:{"OpenAI-Beta":"assistants=v1",...X?.headers}})}}class uY extends g{}(function(Y){Y.RunStepsPage=uY})(dY||(dY={}));class cY extends U{constructor(){super(...arguments);this.steps=new dY(this._client)}create(Y,$,Z){return this._client.post(`/threads/${Y}/runs`,{body:$,...Z,headers:{"OpenAI-Beta":"assistants=v1",...Z?.headers}})}retrieve(Y,$,Z){return this._client.get(`/threads/${Y}/runs/${$}`,{...Z,headers:{"OpenAI-Beta":"assistants=v1",...Z?.headers}})}update(Y,$,Z,X){return this._client.post(`/threads/${Y}/runs/${$}`,{body:Z,...X,headers:{"OpenAI-Beta":"assistants=v1",...X?.headers}})}list(Y,$={},Z){if(x($))return this.list(Y,{},$);return this._client.getAPIList(`/threads/${Y}/runs`,lY,{query:$,...Z,headers:{"OpenAI-Beta":"assistants=v1",...Z?.headers}})}cancel(Y,$,Z){return this._client.post(`/threads/${Y}/runs/${$}/cancel`,{...Z,headers:{"OpenAI-Beta":"assistants=v1",...Z?.headers}})}submitToolOutputs(Y,$,Z,X){return this._client.post(`/threads/${Y}/runs/${$}/submit_tool_outputs`,{body:Z,...X,headers:{"OpenAI-Beta":"assistants=v1",...X?.headers}})}}class lY extends g{}(function(Y){Y.RunsPage=lY,Y.Steps=dY,Y.RunStepsPage=uY})(cY||(cY={}));class pY extends U{constructor(){super(...arguments);this.runs=new cY(this._client),this.messages=new gY(this._client)}create(Y={},$){if(x(Y))return this.create({},Y);return this._client.post("/threads",{body:Y,...$,headers:{"OpenAI-Beta":"assistants=v1",...$?.headers}})}retrieve(Y,$){return this._client.get(`/threads/${Y}`,{...$,headers:{"OpenAI-Beta":"assistants=v1",...$?.headers}})}update(Y,$,Z){return this._client.post(`/threads/${Y}`,{body:$,...Z,headers:{"OpenAI-Beta":"assistants=v1",...Z?.headers}})}del(Y,$){return this._client.delete(`/threads/${Y}`,{...$,headers:{"OpenAI-Beta":"assistants=v1",...$?.headers}})}createAndRun(Y,$){return this._client.post("/threads/runs",{body:Y,...$,headers:{"OpenAI-Beta":"assistants=v1",...$?.headers}})}}(function(Y){Y.Runs=cY,Y.RunsPage=lY,Y.Messages=gY,Y.ThreadMessagesPage=mY})(pY||(pY={}));class YY extends U{constructor(){super(...arguments);this.chat=new bY(this._client),this.assistants=new CY(this._client),this.threads=new pY(this._client)}}(function(Y){Y.Chat=bY,Y.Assistants=CY,Y.AssistantsPage=_Y,Y.Threads=pY})(YY||(YY={}));class $Y extends U{create(Y,$){return this._client.post("/completions",{body:Y,...$,stream:Y.stream??!1})}}(function(Y){})($Y||($Y={}));class ZY extends U{create(Y,$){return this._client.post("/embeddings",{body:Y,...$})}}(function(Y){})(ZY||(ZY={}));class XY extends U{create(Y,$){return this._client.post("/edits",{body:Y,...$})}}(function(Y){})(XY||(XY={}));class QY extends U{create(Y,$){return this._client.post("/files",M0({body:Y,...$}))}retrieve(Y,$){return this._client.get(`/files/${Y}`,$)}list(Y={},$){if(x(Y))return this.list({},Y);return this._client.getAPIList("/files",WY,{query:Y,...$})}del(Y,$){return this._client.delete(`/files/${Y}`,$)}content(Y,$){return this._client.get(`/files/${Y}/content`,{...$,__binaryResponse:!0})}retrieveContent(Y,$){return this._client.get(`/files/${Y}/content`,{...$,headers:{Accept:"application/json",...$?.headers}})}async waitForProcessing(Y,{pollInterval:$=5000,maxWait:Z=1800000}={}){const X=new Set(["processed","error","deleted"]),Q=Date.now();let W=await this.retrieve(Y);while(!W.status||!X.has(W.status))if(await H1($),W=await this.retrieve(Y),Date.now()-Q>Z)throw new a0({message:`Giving up on waiting for file ${Y} to finish processing after ${Z} milliseconds.`});return W}}class WY extends T0{}(function(Y){Y.FileObjectsPage=WY})(QY||(QY={}));class JY extends U{create(Y,$){return this._client.post("/fine-tunes",{body:Y,...$})}retrieve(Y,$){return this._client.get(`/fine-tunes/${Y}`,$)}list(Y){return this._client.getAPIList("/fine-tunes",KY,Y)}cancel(Y,$){return this._client.post(`/fine-tunes/${Y}/cancel`,$)}listEvents(Y,$,Z){return this._client.get(`/fine-tunes/${Y}/events`,{query:$,timeout:86400000,...Z,stream:$?.stream??!1})}}class KY extends T0{}(function(Y){Y.FineTunesPage=KY})(JY||(JY={}));class iY extends U{create(Y,$){return this._client.post("/fine_tuning/jobs",{body:Y,...$})}retrieve(Y,$){return this._client.get(`/fine_tuning/jobs/${Y}`,$)}list(Y={},$){if(x(Y))return this.list({},Y);return this._client.getAPIList("/fine_tuning/jobs",aY,{query:Y,...$})}cancel(Y,$){return this._client.post(`/fine_tuning/jobs/${Y}/cancel`,$)}listEvents(Y,$={},Z){if(x($))return this.listEvents(Y,{},$);return this._client.getAPIList(`/fine_tuning/jobs/${Y}/events`,sY,{query:$,...Z})}}class aY extends g{}class sY extends g{}(function(Y){Y.FineTuningJobsPage=aY,Y.FineTuningJobEventsPage=sY})(iY||(iY={}));class zY extends U{constructor(){super(...arguments);this.jobs=new iY(this._client)}}(function(Y){Y.Jobs=iY,Y.FineTuningJobsPage=aY,Y.FineTuningJobEventsPage=sY})(zY||(zY={}));class VY extends U{createVariation(Y,$){return this._client.post("/images/variations",M0({body:Y,...$}))}edit(Y,$){return this._client.post("/images/edits",M0({body:Y,...$}))}generate(Y,$){return this._client.post("/images/generations",{body:Y,...$})}}(function(Y){})(VY||(VY={}));class GY extends U{retrieve(Y,$){return this._client.get(`/models/${Y}`,$)}list(Y){return this._client.getAPIList("/models",wY,Y)}del(Y,$){return this._client.delete(`/models/${Y}`,$)}}class wY extends T0{}(function(Y){Y.ModelsPage=wY})(GY||(GY={}));class NY extends U{create(Y,$){return this._client.post("/moderations",{body:Y,...$})}}(function(Y){})(NY||(NY={}));var jQ;class b extends j1{constructor({apiKey:Y=U1("OPENAI_API_KEY"),organization:$=U1("OPENAI_ORG_ID")??null,...Z}={}){if(Y===void 0)throw new P("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const X={apiKey:Y,organization:$,...Z,baseURL:Z.baseURL??"https://api.openai.com/v1"};if(!X.dangerouslyAllowBrowser&&WQ())throw new P("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n");super({baseURL:X.baseURL,timeout:X.timeout??600000,httpAgent:X.httpAgent,maxRetries:X.maxRetries,fetch:X.fetch});this.completions=new $Y(this),this.chat=new r0(this),this.edits=new XY(this),this.embeddings=new ZY(this),this.files=new QY(this),this.images=new VY(this),this.audio=new o0(this),this.moderations=new NY(this),this.models=new GY(this),this.fineTuning=new zY(this),this.fineTunes=new JY(this),this.beta=new YY(this),this._options=X,this.apiKey=Y,this.organization=$}defaultQuery(){return this._options.defaultQuery}defaultHeaders(Y){return{...super.defaultHeaders(Y),"OpenAI-Organization":this.organization,...this._options.defaultHeaders}}authHeaders(Y){return{Authorization:`Bearer ${this.apiKey}`}}}jQ=b;b.OpenAI=jQ;b.OpenAIError=P;b.APIError=y;b.APIConnectionError=i0;b.APIConnectionTimeoutError=a0;b.APIUserAbortError=e;b.NotFoundError=ZZ;b.ConflictError=XZ;b.RateLimitError=WZ;b.BadRequestError=e$;b.AuthenticationError=YZ;b.InternalServerError=JZ;b.PermissionDeniedError=$Z;b.UnprocessableEntityError=QZ;(function(Y){Y.toFile=L1,Y.fileFromPath=t$,Y.Page=T0,Y.CursorPage=g,Y.Completions=$Y,Y.Chat=r0,Y.Edits=XY,Y.Embeddings=ZY,Y.Files=QY,Y.FileObjectsPage=WY,Y.Images=VY,Y.Audio=o0,Y.Moderations=NY,Y.Models=GY,Y.ModelsPage=wY,Y.FineTuning=zY,Y.FineTunes=JY,Y.FineTunesPage=KY,Y.Beta=YY})(b||(b={}));var HQ=b;var R$=function(Y){switch(UQ.call(Y)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return B0(Y,Error)}},C1=function(Y,$){return UQ.call(Y)===`[object ${$}]`};var F0=function(Y){return C1(Y,"String")},UZ=function(Y){return Y===null||typeof Y!=="object"&&typeof Y!=="function"},o=function(Y){return C1(Y,"Object")},_1=function(Y){return typeof Event!=="undefined"&&B0(Y,Event)},y1=function(Y){return typeof Element!=="undefined"&&B0(Y,Element)},D$=function(Y){return C1(Y,"RegExp")},m=function(Y){return Boolean(Y&&Y.then&&typeof Y.then==="function")},x1=function(Y){return o(Y)&&("nativeEvent"in Y)&&("preventDefault"in Y)&&("stopPropagation"in Y)},P$=function(Y){return typeof Y==="number"&&Y!==Y},B0=function(Y,$){try{return Y instanceof $}catch(Z){return!1}},RZ=function(Y){return!!(typeof Y==="object"&&Y!==null&&(Y.__isVue||Y._isVue))},UQ=Object.prototype.toString;var j0=function(Y,$=0){if(typeof Y!=="string"||$===0)return Y;return Y.length<=$?Y:`${Y.slice(0,$)}...`},T$=function(Y,$){let Z=Y;const X=Z.length;if(X<=150)return Z;if($>X)$=X;let Q=Math.max($-60,0);if(Q<5)Q=0;let W=Math.min(Q+140,X);if(W>X-5)W=X;if(W===X)Q=Math.max(W-140,0);if(Z=Z.slice(Q,W),Q>0)Z=`'{snip} ${Z}`;if(W<X)Z+=" {snip}";return Z};var RQ=function(Y,$,Z=!1){if(!F0(Y))return!1;if(D$($))return $.test(Y);if(F0($))return Z?Y===$:Y.includes($);return!1},H0=function(Y,$=[],Z=!1){return $.some((X)=>RQ(Y,X,Z))};var h1=function(Y,$,Z=250,X,Q,W,J){if(!W.exception||!W.exception.values||!J||!B0(J.originalException,Error))return;const K=W.exception.values.length>0?W.exception.values[W.exception.values.length-1]:void 0;if(K)W.exception.values=H9(b1(Y,$,Q,J.originalException,X,W.exception.values,K,0),Z)},b1=function(Y,$,Z,X,Q,W,J,K){if(W.length>=Z+1)return W;let z=[...W];if(B0(X[Q],Error)){DQ(J,K);const w=Y($,X[Q]),G=z.length;PQ(w,Q,G,K),z=b1(Y,$,Z,X[Q],Q,[w,...z],w,G)}if(Array.isArray(X.errors))X.errors.forEach((w,G)=>{if(B0(w,Error)){DQ(J,K);const V=Y($,w),N=z.length;PQ(V,`errors[${G}]`,N,K),z=b1(Y,$,Z,w,Q,[V,...z],V,N)}});return z},DQ=function(Y,$){Y.mechanism=Y.mechanism||{type:"generic",handled:!0},Y.mechanism={...Y.mechanism,is_exception_group:!0,exception_id:$}},PQ=function(Y,$,Z,X){Y.mechanism=Y.mechanism||{type:"generic",handled:!0},Y.mechanism={...Y.mechanism,type:"chained",source:$,exception_id:Z,parent_id:X}},H9=function(Y,$){return Y.map((Z)=>{if(Z.value)Z.value=j0(Z.value,$);return Z})};var DZ=function(Y){return Y&&Y.Math==Math?Y:void 0},O$=function(){return O},A$=function(Y,$,Z){const X=Z||O,Q=X.__SENTRY__=X.__SENTRY__||{};return Q[Y]||(Q[Y]=$())},O=typeof globalThis=="object"&&DZ(globalThis)||typeof window=="object"&&DZ(window)||typeof self=="object"&&DZ(self)||typeof global=="object"&&DZ(global)||function(){return this}()||{};var TQ=function(Y,$={}){if(!Y)return"<unknown>";try{let Z=Y;const X=5,Q=[];let W=0,J=0;const K=" > ",z=K.length;let w;const G=Array.isArray($)?$:$.keyAttrs,V=!Array.isArray($)&&$.maxStringLength||U9;while(Z&&W++<X){if(w=R9(Z,G),w==="html"||W>1&&J+Q.length*z+w.length>=V)break;Q.push(w),J+=w.length,Z=Z.parentNode}return Q.reverse().join(K)}catch(Z){return"<unknown>"}},R9=function(Y,$){const Z=Y,X=[];let Q,W,J,K,z;if(!Z||!Z.tagName)return"";X.push(Z.tagName.toLowerCase());const w=$&&$.length?$.filter((V)=>Z.getAttribute(V)).map((V)=>[V,Z.getAttribute(V)]):null;if(w&&w.length)w.forEach((V)=>{X.push(`[${V[0]}="${V[1]}"]`)});else{if(Z.id)X.push(`#${Z.id}`);if(Q=Z.className,Q&&F0(Q)){W=Q.split(/\s+/);for(z=0;z<W.length;z++)X.push(`.${W[z]}`)}}const G=["aria-label","type","name","title","alt"];for(z=0;z<G.length;z++)if(J=G[z],K=Z.getAttribute(J),K)X.push(`[${J}="${K}"]`);return X.join("")};var n5=O$(),U9=80;var U0=typeof __SENTRY_DEBUG__==="undefined"||__SENTRY_DEBUG__;var c=function(Y){if(!("console"in O))return Y();const $=O.console,Z={},X=Object.keys(rY);X.forEach((Q)=>{const W=rY[Q];Z[Q]=$[Q],$[Q]=W});try{return Y()}finally{X.forEach((Q)=>{$[Q]=Z[Q]})}},P9=function(){let Y=!1;const $={enable:()=>{Y=!0},disable:()=>{Y=!1},isEnabled:()=>Y};if(U0)q$.forEach((Z)=>{$[Z]=(...X)=>{if(Y)c(()=>{O.console[Z](`${D9}[${Z}]:`,...X)})}});else q$.forEach((Z)=>{$[Z]=()=>{return}});return $},D9="Sentry Logger ",q$=["debug","info","warn","error","log","assert","trace"],rY={},M=P9();var O9=function(Y){return Y==="http"||Y==="https"},f0=function(Y,$=!1){const{host:Z,path:X,pass:Q,port:W,projectId:J,protocol:K,publicKey:z}=Y;return`${K}://${z}${$&&Q?`:${Q}`:""}`+`@${Z}${W?`:${W}`:""}/${X?`${X}/`:X}${J}`},OQ=function(Y){const $=T9.exec(Y);if(!$){c(()=>{console.error(`Invalid Sentry Dsn: ${Y}`)});return}const[Z,X,Q="",W,J="",K]=$.slice(1);let z="",w=K;const G=w.split("/");if(G.length>1)z=G.slice(0,-1).join("/"),w=G.pop();if(w){const V=w.match(/^\d+/);if(V)w=V[0]}return AQ({host:W,pass:Q,path:z,projectId:w,port:J,protocol:Z,publicKey:X})},AQ=function(Y){return{protocol:Y.protocol,publicKey:Y.publicKey||"",pass:Y.pass||"",host:Y.host,port:Y.port||"",path:Y.path||"",projectId:Y.projectId}},A9=function(Y){if(!U0)return!0;const{port:$,projectId:Z,protocol:X}=Y;if(["protocol","publicKey","host","projectId"].find((J)=>{if(!Y[J])return M.error(`Invalid Sentry Dsn: ${J} missing`),!0;return!1}))return!1;if(!Z.match(/^\d+$/))return M.error(`Invalid Sentry Dsn: Invalid projectId ${Z}`),!1;if(!O9(X))return M.error(`Invalid Sentry Dsn: Invalid protocol ${X}`),!1;if($&&isNaN(parseInt($,10)))return M.error(`Invalid Sentry Dsn: Invalid port ${$}`),!1;return!0},PZ=function(Y){const $=typeof Y==="string"?OQ(Y):AQ(Y);if(!$||!A9($))return;return $},T9=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;class l extends Error{constructor(Y,$="warn"){super(Y);this.message=Y,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=$}}var C=function(Y,$,Z){if(!($ in Y))return;const X=Y[$],Q=Z(X);if(typeof Q==="function")kQ(Q,X);Y[$]=Q},oY=function(Y,$,Z){try{Object.defineProperty(Y,$,{value:Z,writable:!0,configurable:!0})}catch(X){U0&&M.log(`Failed to add non-enumerable property "${$}" to object`,Y)}},kQ=function(Y,$){try{const Z=$.prototype||{};Y.prototype=$.prototype=Z,oY(Y,"__sentry_original__",$)}catch(Z){}},g1=function(Y){return Y.__sentry_original__},m1=function(Y){return Object.keys(Y).map(($)=>`${encodeURIComponent($)}=${encodeURIComponent(Y[$])}`).join("&")},TZ=function(Y){if(R$(Y))return{message:Y.message,name:Y.name,stack:Y.stack,...EQ(Y)};else if(_1(Y)){const $={type:Y.type,target:qQ(Y.target),currentTarget:qQ(Y.currentTarget),...EQ(Y)};if(typeof CustomEvent!=="undefined"&&B0(Y,CustomEvent))$.detail=Y.detail;return $}else return Y},qQ=function(Y){try{return y1(Y)?TQ(Y):Object.prototype.toString.call(Y)}catch($){return"<unknown>"}},EQ=function(Y){if(typeof Y==="object"&&Y!==null){const $={};for(let Z in Y)if(Object.prototype.hasOwnProperty.call(Y,Z))$[Z]=Y[Z];return $}else return{}},d1=function(Y,$=40){const Z=Object.keys(TZ(Y));if(Z.sort(),!Z.length)return"[object has no keys]";if(Z[0].length>=$)return j0(Z[0],$);for(let X=Z.length;X>0;X--){const Q=Z.slice(0,X).join(", ");if(Q.length>$)continue;if(X===Z.length)return Q;return j0(Q,$)}return""},_=function(Y){return v1(Y,new Map)},v1=function(Y,$){if(o(Y)){const Z=$.get(Y);if(Z!==void 0)return Z;const X={};$.set(Y,X);for(let Q of Object.keys(Y))if(typeof Y[Q]!=="undefined")X[Q]=v1(Y[Q],$);return X}if(Array.isArray(Y)){const Z=$.get(Y);if(Z!==void 0)return Z;const X=[];return $.set(Y,X),Y.forEach((Q)=>{X.push(v1(Q,$))}),X}return Y};var q9=function(Y,$=!1){return!($||Y&&!Y.startsWith("/")&&!Y.includes(":\\")&&!Y.startsWith(".")&&!Y.match(/^[a-zA-Z]([a-zA-Z0-9.\-+])*:\/\//))&&Y!==void 0&&!Y.includes("node_modules/")},SQ=function(Y){const $=/^\s*[-]{4,}$/,Z=/at (?:async )?(?:(.+?)\s+\()?(?:(.+):(\d+):(\d+)?|([^)]+))\)?/;return(X)=>{const Q=X.match(Z);if(Q){let W,J,K,z,w;if(Q[1]){K=Q[1];let N=K.lastIndexOf(".");if(K[N-1]===".")N--;if(N>0){W=K.slice(0,N),J=K.slice(N+1);const F=W.indexOf(".Module");if(F>0)K=K.slice(F+1),W=W.slice(0,F)}z=void 0}if(J)z=W,w=J;if(J==="<anonymous>")w=void 0,K=void 0;if(K===void 0)w=w||"<anonymous>",K=z?`${z}.${w}`:w;let G=Q[2]&&Q[2].startsWith("file://")?Q[2].slice(7):Q[2];const V=Q[5]==="native";if(!G&&Q[5]&&!V)G=Q[5];return{filename:G,module:Y?Y(G):void 0,function:K,lineno:parseInt(Q[3],10)||void 0,colno:parseInt(Q[4],10)||void 0,in_app:q9(G,V)}}if(X.match($))return{filename:X};return}};var OZ=function(...Y){const $=Y.sort((Z,X)=>Z[0]-X[0]).map((Z)=>Z[1]);return(Z,X=0)=>{const Q=[],W=Z.split("\n");for(let J=X;J<W.length;J++){const K=W[J];if(K.length>1024)continue;const z=IQ.test(K)?K.replace(IQ,"$1"):K;if(z.match(/\S*Error: /))continue;for(let w of $){const G=w(z);if(G){Q.push(G);break}}if(Q.length>=CQ)break}return _Q(Q)}},c1=function(Y){if(Array.isArray(Y))return OZ(...Y);return Y},_Q=function(Y){if(!Y.length)return[];const $=Array.from(Y);if(/sentryWrapped/.test($[$.length-1].function||""))$.pop();if($.reverse(),fQ.test($[$.length-1].function||"")){if($.pop(),fQ.test($[$.length-1].function||""))$.pop()}return $.slice(0,CQ).map((Z)=>({...Z,filename:Z.filename||$[$.length-1].filename,function:Z.function||"?"}))},E$=function(Y){try{if(!Y||typeof Y!=="function")return u1;return Y.name||u1}catch($){return u1}},l1=function(Y){return[90,SQ(Y)]},CQ=50,IQ=/\(error: (.*)\)/,fQ=/captureMessage|captureException/,u1="<anonymous>";var nY=function(Y,$){AZ[Y]=AZ[Y]||[],AZ[Y].push($)};var tY=function(Y,$){if(!yQ[Y])$(),yQ[Y]=!0},eY=function(Y,$){const Z=Y&&AZ[Y];if(!Z)return;for(let X of Z)try{X($)}catch(Q){U0&&M.error(`Error while triggering instrumentation handler.\nType: ${Y}\nName: ${E$(X)}\nError:`,Q)}},AZ={},yQ={};var p1=function(Y){nY("console",Y),tY("console",E9)},E9=function(){if(!("console"in O))return;q$.forEach(function(Y){if(!(Y in O.console))return;C(O.console,Y,function($){return rY[Y]=$,function(...Z){eY("console",{args:Z,level:Y});const Q=rY[Y];Q&&Q.apply(O.console,Z)}})})};var I=function(){const Y=O,$=Y.crypto||Y.msCrypto;let Z=()=>Math.random()*16;try{if($&&$.randomUUID)return $.randomUUID().replace(/-/g,"");if($&&$.getRandomValues)Z=()=>$.getRandomValues(new Uint8Array(1))[0]}catch(X){}return([1e7]+1000+4000+8000+100000000000).replace(/[018]/g,(X)=>(X^(Z()&15)>>X/4).toString(16))},xQ=function(Y){return Y.exception&&Y.exception.values?Y.exception.values[0]:void 0},A0=function(Y){const{message:$,event_id:Z}=Y;if($)return $;const X=xQ(Y);if(X){if(X.type&&X.value)return`${X.type}: ${X.value}`;return X.type||X.value||Z||"<unknown>"}return Z||"<unknown>"},i1=function(Y,$,Z){const X=Y.exception=Y.exception||{},Q=X.values=X.values||[],W=Q[0]=Q[0]||{};if(!W.value)W.value=$||"";if(!W.type)W.type=Z||"Error"},k$=function(Y,$){const Z=xQ(Y);if(!Z)return;const X={type:"generic",handled:!0},Q=Z.mechanism;if(Z.mechanism={...X,...Q,...$},$&&("data"in $)){const W={...Q&&Q.data,...$.data};Z.mechanism.data=W}},a1=function(Y){const $=Y.match(k9)||[],Z=parseInt($[1],10),X=parseInt($[2],10),Q=parseInt($[3],10);return{buildmetadata:$[5],major:isNaN(Z)?void 0:Z,minor:isNaN(X)?void 0:X,patch:isNaN(Q)?void 0:Q,prerelease:$[4]}},s1=function(Y,$,Z=5){if($.lineno===void 0)return;const X=Y.length,Q=Math.max(Math.min(X-1,$.lineno-1),0);$.pre_context=Y.slice(Math.max(0,Q-Z),Q).map((W)=>T$(W,0)),$.context_line=T$(Y[Math.min(X-1,Q)],$.colno||0),$.post_context=Y.slice(Math.min(Q+1,X),Q+1+Z).map((W)=>T$(W,0))},qZ=function(Y){if(Y&&Y.__sentry_captured__)return!0;try{oY(Y,"__sentry_captured__",!0)}catch($){}return!1},C0=function(Y){return Array.isArray(Y)?Y:[Y]},k9=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;var r1=function(Y){nY("error",Y),tY("error",S9)},S9=function(){EZ=O.onerror,O.onerror=function(Y,$,Z,X,Q){if(eY("error",{column:X,error:Q,line:Z,msg:Y,url:$}),EZ&&!EZ.__SENTRY_LOADER__)return EZ.apply(this,arguments);return!1},O.onerror.__SENTRY_INSTRUMENTED__=!0},EZ=null;var o1=function(Y){nY("unhandledrejection",Y),tY("unhandledrejection",I9)},I9=function(){kZ=O.onunhandledrejection,O.onunhandledrejection=function(Y){if(eY("unhandledrejection",Y),kZ&&!kZ.__SENTRY_LOADER__)return kZ.apply(this,arguments);return!0},O.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0},kZ=null;var bQ=function(){return typeof __SENTRY_BROWSER_BUNDLE__!=="undefined"&&!!__SENTRY_BROWSER_BUNDLE__};var t1=function(){return!bQ()&&Object.prototype.toString.call(typeof process!=="undefined"?process:0)==="[object process]"},_0=function(Y,$){return Y.require($)},Y0=function(Y){let $;try{$=_0(n1,Y)}catch(Z){}try{const{cwd:Z}=_0(n1,"process");$=_0(n1,`${Z()}/node_modules/${Y}`)}catch(Z){}return $};var hQ=function(){const Y=typeof WeakSet==="function",$=Y?new WeakSet:[];function Z(Q){if(Y){if($.has(Q))return!0;return $.add(Q),!1}for(let W=0;W<$.length;W++)if($[W]===Q)return!0;return $.push(Q),!1}function X(Q){if(Y)$.delete(Q);else for(let W=0;W<$.length;W++)if($[W]===Q){$.splice(W,1);break}}return[Z,X]};var n=function(Y,$=100,Z=Infinity){try{return SZ("",Y,$,Z)}catch(X){return{ERROR:`**non-serializable** (${X})`}}},IZ=function(Y,$=3,Z=102400){const X=n(Y,$);if(y9(X)>Z)return IZ(Y,$-1,Z);return X},SZ=function(Y,$,Z=Infinity,X=Infinity,Q=hQ()){const[W,J]=Q;if($==null||["number","boolean","string"].includes(typeof $)&&!P$($))return $;const K=f9(Y,$);if(!K.startsWith("[object "))return K;if($.__sentry_skip_normalization__)return $;const z=typeof $.__sentry_override_normalization_depth__==="number"?$.__sentry_override_normalization_depth__:Z;if(z===0)return K.replace("object ","");if(W($))return"[Circular ~]";const w=$;if(w&&typeof w.toJSON==="function")try{const F=w.toJSON();return SZ("",F,z-1,X,Q)}catch(F){}const G=Array.isArray($)?[]:{};let V=0;const N=TZ($);for(let F in N){if(!Object.prototype.hasOwnProperty.call(N,F))continue;if(V>=X){G[F]="[MaxProperties ~]";break}const B=N[F];G[F]=SZ(F,B,z-1,X,Q),V++}return J($),G},f9=function(Y,$){try{if(Y==="domain"&&$&&typeof $==="object"&&$._events)return"[Domain]";if(Y==="domainEmitter")return"[DomainEmitter]";if(typeof global!=="undefined"&&$===global)return"[Global]";if(typeof window!=="undefined"&&$===window)return"[Window]";if(typeof document!=="undefined"&&$===document)return"[Document]";if(RZ($))return"[VueViewModel]";if(x1($))return"[SyntheticEvent]";if(typeof $==="number"&&$!==$)return"[NaN]";if(typeof $==="function")return`[Function: ${E$($)}]`;if(typeof $==="symbol")return`[${String($)}]`;if(typeof $==="bigint")return`[BigInt: ${String($)}]`;const Z=C9($);if(/^HTML(\w*)Element$/.test(Z))return`[HTMLElement: ${Z}]`;return`[object ${Z}]`}catch(Z){return`**non-serializable** (${Z})`}},C9=function(Y){const $=Object.getPrototypeOf(Y);return $?$.constructor.name:"null prototype"},_9=function(Y){return~-encodeURI(Y).split(/%..|./).length},y9=function(Y){return _9(JSON.stringify(Y))};var t=function(Y){return new d(($)=>{$(Y)})},MY=function(Y){return new d(($,Z)=>{Z(Y)})},q0;(function(Y){Y[Y.PENDING=0]="PENDING";const Z=1;Y[Y.RESOLVED=Z]="RESOLVED";const X=2;Y[Y.REJECTED=X]="REJECTED"})(q0||(q0={}));class d{constructor(Y){d.prototype.__init.call(this),d.prototype.__init2.call(this),d.prototype.__init3.call(this),d.prototype.__init4.call(this),this._state=q0.PENDING,this._handlers=[];try{Y(this._resolve,this._reject)}catch($){this._reject($)}}then(Y,$){return new d((Z,X)=>{this._handlers.push([!1,(Q)=>{if(!Y)Z(Q);else try{Z(Y(Q))}catch(W){X(W)}},(Q)=>{if(!$)X(Q);else try{Z($(Q))}catch(W){X(W)}}]),this._executeHandlers()})}catch(Y){return this.then(($)=>$,Y)}finally(Y){return new d(($,Z)=>{let X,Q;return this.then((W)=>{if(Q=!1,X=W,Y)Y()},(W)=>{if(Q=!0,X=W,Y)Y()}).then(()=>{if(Q){Z(X);return}$(X)})})}__init(){this._resolve=(Y)=>{this._setResult(q0.RESOLVED,Y)}}__init2(){this._reject=(Y)=>{this._setResult(q0.REJECTED,Y)}}__init3(){this._setResult=(Y,$)=>{if(this._state!==q0.PENDING)return;if(m($)){$.then(this._resolve,this._reject);return}this._state=Y,this._value=$,this._executeHandlers()}}__init4(){this._executeHandlers=()=>{if(this._state===q0.PENDING)return;const Y=this._handlers.slice();this._handlers=[],Y.forEach(($)=>{if($[0])return;if(this._state===q0.RESOLVED)$[1](this._value);if(this._state===q0.REJECTED)$[2](this._value);$[0]=!0})}}}var e1=function(Y){const $=[];function Z(){return Y===void 0||$.length<Y}function X(J){return $.splice($.indexOf(J),1)[0]}function Q(J){if(!Z())return MY(new l("Not adding Promise because buffer limit was reached."));const K=J();if($.indexOf(K)===-1)$.push(K);return K.then(()=>X(K)).then(null,()=>X(K).then(null,()=>{})),K}function W(J){return new d((K,z)=>{let w=$.length;if(!w)return K(!0);const G=setTimeout(()=>{if(J&&J>0)K(!1)},J);$.forEach((V)=>{t(V).then(()=>{if(!--w)clearTimeout(G),K(!0)},z)})})}return{$,add:Q,drain:W}};var vQ=function(Y){const $={};let Z=0;while(Z<Y.length){const X=Y.indexOf("=",Z);if(X===-1)break;let Q=Y.indexOf(";",Z);if(Q===-1)Q=Y.length;else if(Q<X){Z=Y.lastIndexOf(";",X-1)+1;continue}const W=Y.slice(Z,X).trim();if($[W]===void 0){let J=Y.slice(X+1,Q).trim();if(J.charCodeAt(0)===34)J=J.slice(1,-1);try{$[W]=J.indexOf("%")!==-1?decodeURIComponent(J):J}catch(K){$[W]=J}}Z=Q+1}return $};var S$=function(Y){if(!Y)return{};const $=Y.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!$)return{};const Z=$[6]||"",X=$[8]||"";return{host:$[4],path:$[5],protocol:$[2],search:Z,hash:X,relative:$[5]+Z+X}},LY=function(Y){return Y.split(/[\?#]/,1)[0]},Y$=function(Y){return Y.split(/\\?\//).filter(($)=>$.length>0&&$!==",").length},I$=function(Y){const{protocol:$,host:Z,path:X}=Y,Q=Z&&Z.replace(/^.*@/,"[filtered]:[filtered]@").replace(/(:80)$/,"").replace(/(:443)$/,"")||"";return`${$?`${$}://`:""}${Q}${X}`};var FY=function(Y,$={}){const Z=Y.method&&Y.method.toUpperCase();let X="",Q="url";if($.customRoute||Y.route)X=$.customRoute||`${Y.baseUrl||""}${Y.route&&Y.route.path}`,Q="route";else if(Y.originalUrl||Y.url)X=LY(Y.originalUrl||Y.url||"");let W="";if($.method&&Z)W+=Z;if($.method&&$.path)W+=" ";if($.path&&X)W+=X;return[W,Q]},h9=function(Y,$){switch($){case"path":return FY(Y,{path:!0})[0];case"handler":return Y.route&&Y.route.stack&&Y.route.stack[0]&&Y.route.stack[0].name||"<anonymous>";case"methodPath":default:{const Z=Y._reconstructedRoute?Y._reconstructedRoute:void 0;return FY(Y,{path:!0,method:!0,customRoute:Z})[0]}}},v9=function(Y,$){const Z={};return(Array.isArray($)?$:gQ).forEach((Q)=>{if(Y&&(Q in Y))Z[Q]=Y[Q]}),Z},YX=function(Y,$){const{include:Z=b9,deps:X}=$||{},Q={},W=Y.headers||{},J=Y.method,K=Y.hostname||Y.host||W.host||"<no host>",z=Y.protocol==="https"||Y.socket&&Y.socket.encrypted?"https":"http",w=Y.originalUrl||Y.url||"",G=w.startsWith(z)?w:`${z}://${K}${w}`;return Z.forEach((V)=>{switch(V){case"headers":{if(Q.headers=W,!Z.includes("cookies"))delete Q.headers.cookie;break}case"method":{Q.method=J;break}case"url":{Q.url=G;break}case"cookies":{Q.cookies=Y.cookies||W.cookie&&vQ(W.cookie)||{};break}case"query_string":{Q.query_string=g9(Y,X);break}case"data":{if(J==="GET"||J==="HEAD")break;if(Y.body!==void 0)Q.data=F0(Y.body)?Y.body:JSON.stringify(n(Y.body));break}default:if({}.hasOwnProperty.call(Y,V))Q[V]=Y[V]}}),Q},$X=function(Y,$,Z){const X={...x9,...Z&&Z.include};if(X.request){const Q=Array.isArray(X.request)?YX($,{include:X.request,deps:Z&&Z.deps}):YX($,{deps:Z&&Z.deps});Y.request={...Y.request,...Q}}if(X.user){const Q=$.user&&o($.user)?v9($.user,X.user):{};if(Object.keys(Q).length)Y.user={...Y.user,...Q}}if(X.ip){const Q=$.ip||$.socket&&$.socket.remoteAddress;if(Q)Y.user={...Y.user,ip_address:Q}}if(X.transaction&&!Y.transaction)Y.transaction=h9($,X.transaction);return Y},g9=function(Y,$){let Z=Y.originalUrl||Y.url||"";if(!Z)return;if(Z.startsWith("/"))Z=`http://dogs.are.great${Z}`;try{return Y.query||typeof URL!==void 0&&new URL(Z).search.slice(1)||$&&$.url&&$.url.parse(Z).query||void 0}catch(X){return}};var x9={ip:!1,request:!0,transaction:!0,user:!0},b9=["cookies","data","headers","method","query_string","url"],gQ=["id","username","email"];var ZX=function(Y){return Y==="warn"?"warning":mQ.includes(Y)?Y:"log"},mQ=["fatal","error","warning","log","info","debug"];var m9=function(){const{performance:Y}=uQ;if(!Y||!Y.now)return;const $=Date.now()-Y.now();return{now:()=>Y.now(),timeOrigin:$}},d9=function(){try{return _0(c9,"perf_hooks").performance}catch(Y){return}},uQ=O$(),QX={nowSeconds:()=>Date.now()/1000},XX=t1()?d9():m9(),dQ=XX===void 0?QX:{nowSeconds:()=>(XX.timeOrigin+XX.now())/1000},BY=QX.nowSeconds.bind(QX),jY=dQ.nowSeconds.bind(dQ);var f$,u9=(()=>{const{performance:Y}=uQ;if(!Y||!Y.now){f$="none";return}const $=3600000,Z=Y.now(),X=Date.now(),Q=Y.timeOrigin?Math.abs(Y.timeOrigin+Z-X):$,W=Q<$,J=Y.timing&&Y.timing.navigationStart,z=typeof J==="number"?Math.abs(J+Z-X):$,w=z<$;if(W||w)if(Q<=z)return f$="timeOrigin",Y.timeOrigin;else return f$="navigationStart",J;return f$="dateNow",X})();var JX=function(Y){if(!F0(Y)&&!Array.isArray(Y))return;let $={};if(Array.isArray(Y))$=Y.reduce((X,Q)=>{const W=cQ(Q);return{...X,...W}},{});else{if(!Y)return;$=cQ(Y)}const Z=Object.entries($).reduce((X,[Q,W])=>{if(Q.match(lQ)){const J=Q.slice(WX.length);X[J]=W}return X},{});if(Object.keys(Z).length>0)return Z;else return},$$=function(Y){if(!Y)return;const $=Object.entries(Y).reduce((Z,[X,Q])=>{if(Q)Z[`${WX}${X}`]=Q;return Z},{});return l9($)},cQ=function(Y){return Y.split(",").map(($)=>$.split("=").map((Z)=>decodeURIComponent(Z.trim()))).reduce(($,[Z,X])=>{return $[Z]=X,$},{})},l9=function(Y){if(Object.keys(Y).length===0)return;return Object.entries(Y).reduce(($,[Z,X],Q)=>{const W=`${encodeURIComponent(Z)}=${encodeURIComponent(X)}`,J=Q===0?W:`${$},${W}`;if(J.length>pQ)return U0&&M.warn(`Not adding key: ${Z} with val: ${X} to baggage header due to exceeding baggage size limits.`),$;else return J},"")};var WX="sentry-",lQ=/^sentry-/,pQ=8192;var aQ=function(Y){if(!Y)return;const $=Y.match(iQ);if(!$)return;let Z;if($[3]==="1")Z=!0;else if($[3]==="0")Z=!1;return{traceId:$[1],parentSampled:Z,parentSpanId:$[2]}},C$=function(Y,$){const Z=aQ(Y),X=JX($),{traceId:Q,parentSpanId:W,parentSampled:J}=Z||{},K={traceId:Q||I(),spanId:I().substring(16),sampled:J};if(W)K.parentSpanId=W;if(X)K.dsc=X;return{traceparentData:Z,dynamicSamplingContext:X,propagationContext:K}},HY=function(Y=I(),$=I().substring(16),Z){let X="";if(Z!==void 0)X=Z?"-1":"-0";return`${Y}-${$}${X}`},iQ=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");var y0=function(Y,$=[]){return[Y,$]},zX=function(Y,$){const[Z,X]=Y;return[Z,[...X,$]]},fZ=function(Y,$){const Z=Y[1];for(let X of Z){const Q=X[0].type;if($(X,Q))return!0}return!1};var KX=function(Y,$){return($||new TextEncoder).encode(Y)},_$=function(Y,$){const[Z,X]=Y;let Q=JSON.stringify(Z);function W(J){if(typeof Q==="string")Q=typeof J==="string"?Q+J:[KX(Q,$),J];else Q.push(typeof J==="string"?KX(J,$):J)}for(let J of X){const[K,z]=J;if(W(`\n${JSON.stringify(K)}\n`),typeof z==="string"||z instanceof Uint8Array)W(z);else{let w;try{w=JSON.stringify(z)}catch(G){w=JSON.stringify(n(z))}W(w)}}return typeof Q==="string"?Q:p9(Q)},p9=function(Y){const $=Y.reduce((Q,W)=>Q+W.length,0),Z=new Uint8Array($);let X=0;for(let Q of Y)Z.set(Q,X),X+=Q.length;return Z};var VX=function(Y,$){const Z=typeof Y.data==="string"?KX(Y.data,$):Y.data;return[_({type:"attachment",length:Z.length,filename:Y.filename,content_type:Y.contentType,attachment_type:Y.attachmentType}),Z]},CZ=function(Y){return i9[Y]},_Z=function(Y){if(!Y||!Y.sdk)return;const{name:$,version:Z}=Y.sdk;return{name:$,version:Z}},GX=function(Y,$,Z,X){const Q=Y.sdkProcessingMetadata&&Y.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:Y.event_id,sent_at:(new Date()).toISOString(),...$&&{sdk:$},...!!Z&&X&&{dsn:f0(X)},...Q&&{trace:_({...Q})}}},i9={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",statsd:"unknown"};var sQ=function(Y,$=Date.now()){const Z=parseInt(`${Y}`,10);if(!isNaN(Z))return Z*1000;const X=Date.parse(`${Y}`);if(!isNaN(X))return X-$;return 60000},rQ=function(Y,$){return Y[$]||Y.all||0},wX=function(Y,$,Z=Date.now()){return rQ(Y,$)>Z},NX=function(Y,{statusCode:$,headers:Z},X=Date.now()){const Q={...Y},W=Z&&Z["x-sentry-rate-limits"],J=Z&&Z["retry-after"];if(W)for(let K of W.trim().split(",")){const[z,w]=K.split(":",2),G=parseInt(z,10),V=(!isNaN(G)?G:60)*1000;if(!w)Q.all=X+V;else for(let N of w.split(";"))Q[N]=X+V}else if(J)Q.all=X+sQ(J,X);else if($===429)Q.all=X+60000;return Q};var MX=function(Y,$){return Y($.stack||"",1)},yZ=function(Y,$){const Z={type:$.name||$.constructor.name,value:$.message},X=MX(Y,$);if(X.length)Z.stacktrace={frames:X};return Z},a9=function(Y){if(("name"in Y)&&typeof Y.name==="string"){let $=`'${Y.name}' captured as exception`;if(("message"in Y)&&typeof Y.message==="string")$+=` with message '${Y.message}'`;return $}else if(("message"in Y)&&typeof Y.message==="string")return Y.message;else return`Object captured as exception with keys: ${d1(Y)}`},LX=function(Y,$,Z,X){let Q=Z;const J=X&&X.data&&X.data.mechanism||{handled:!0,type:"generic"};if(!R$(Z)){if(o(Z)){const z=Y(),w=z.getClient(),G=w&&w.getOptions().normalizeDepth;z.configureScope((N)=>{N.setExtra("__serialized__",IZ(Z,G))});const V=a9(Z);Q=X&&X.syntheticException||new Error(V),Q.message=V}else Q=X&&X.syntheticException||new Error(Z),Q.message=Z;J.synthetic=!0}const K={exception:{values:[yZ($,Q)]}};return i1(K,void 0,void 0),k$(K,J),{...K,event_id:X&&X.event_id}},FX=function(Y,$,Z="info",X,Q){const W={event_id:X&&X.event_id,level:Z,message:$};if(Q&&X&&X.syntheticException){const J=MX(Y,X.syntheticException);if(J.length)W.exception={values:[{value:$,stacktrace:{frames:J}}]}}return W};class $0{constructor(Y){this._maxSize=Y,this._cache=new Map}get size(){return this._cache.size}get(Y){const $=this._cache.get(Y);if($===void 0)return;return this._cache.delete(Y),this._cache.set(Y,$),$}set(Y,$){if(this._cache.size>=this._maxSize)this._cache.delete(this._cache.keys().next().value);this._cache.set(Y,$)}remove(Y){const $=this._cache.get(Y);if($)this._cache.delete(Y);return $}clear(){this._cache.clear()}keys(){return Array.from(this._cache.keys())}values(){const Y=[];return this._cache.forEach(($)=>Y.push($)),Y}}var y$=function(Y,$){return Y!=null?Y:$()};var L=function(Y){let $=void 0,Z=Y[0],X=1;while(X<Y.length){const Q=Y[X],W=Y[X+1];if(X+=2,(Q==="optionalAccess"||Q==="optionalCall")&&Z==null)return;if(Q==="access"||Q==="optionalAccess")$=Z,Z=W(Z);else if(Q==="call"||Q==="optionalCall")Z=W((...J)=>Z.call($,...J)),$=void 0}return Z};var H=typeof __SENTRY_DEBUG__==="undefined"||__SENTRY_DEBUG__;var Z$="production";var x$=function(){return A$("globalEventProcessors",()=>[])},BX=function(Y){x$().push(Y)},X$=function(Y,$,Z,X=0){return new d((Q,W)=>{const J=Y[X];if($===null||typeof J!=="function")Q($);else{const K=J({...$},Z);if(H&&J.id&&K===null&&M.log(`Event processor "${J.id}" dropped event`),m(K))K.then((z)=>X$(Y,z,Z,X+1).then(Q)).then(null,W);else X$(Y,K,Z,X+1).then(Q).then(null,W)}})};var oQ=function(Y){const $=jY(),Z={sid:I(),init:!0,timestamp:$,started:$,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>s9(Z)};if(Y)E0(Z,Y);return Z},E0=function(Y,$={}){if($.user){if(!Y.ipAddress&&$.user.ip_address)Y.ipAddress=$.user.ip_address;if(!Y.did&&!$.did)Y.did=$.user.id||$.user.email||$.user.username}if(Y.timestamp=$.timestamp||jY(),$.abnormal_mechanism)Y.abnormal_mechanism=$.abnormal_mechanism;if($.ignoreDuration)Y.ignoreDuration=$.ignoreDuration;if($.sid)Y.sid=$.sid.length===32?$.sid:I();if($.init!==void 0)Y.init=$.init;if(!Y.did&&$.did)Y.did=`${$.did}`;if(typeof $.started==="number")Y.started=$.started;if(Y.ignoreDuration)Y.duration=void 0;else if(typeof $.duration==="number")Y.duration=$.duration;else{const Z=Y.timestamp-Y.started;Y.duration=Z>=0?Z:0}if($.release)Y.release=$.release;if($.environment)Y.environment=$.environment;if(!Y.ipAddress&&$.ipAddress)Y.ipAddress=$.ipAddress;if(!Y.userAgent&&$.userAgent)Y.userAgent=$.userAgent;if(typeof $.errors==="number")Y.errors=$.errors;if($.status)Y.status=$.status},nQ=function(Y,$){let Z={};if($)Z={status:$};else if(Y.status==="ok")Z={status:"exited"};E0(Y,Z)},s9=function(Y){return _({sid:`${Y.sid}`,init:Y.init,started:new Date(Y.started*1000).toISOString(),timestamp:new Date(Y.timestamp*1000).toISOString(),status:Y.status,errors:Y.errors,did:typeof Y.did==="number"||typeof Y.did==="string"?`${Y.did}`:void 0,duration:Y.duration,abnormal_mechanism:Y.abnormal_mechanism,attrs:{release:Y.release,environment:Y.environment,ip_address:Y.ipAddress,user_agent:Y.userAgent}})};var tQ=function(){return{traceId:I(),spanId:I().substring(16)}},r9=100;class Z0{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=tQ()}static clone(Y){const $=new Z0;if(Y)$._breadcrumbs=[...Y._breadcrumbs],$._tags={...Y._tags},$._extra={...Y._extra},$._contexts={...Y._contexts},$._user=Y._user,$._level=Y._level,$._span=Y._span,$._session=Y._session,$._transactionName=Y._transactionName,$._fingerprint=Y._fingerprint,$._eventProcessors=[...Y._eventProcessors],$._requestSession=Y._requestSession,$._attachments=[...Y._attachments],$._sdkProcessingMetadata={...Y._sdkProcessingMetadata},$._propagationContext={...Y._propagationContext};return $}addScopeListener(Y){this._scopeListeners.push(Y)}addEventProcessor(Y){return this._eventProcessors.push(Y),this}setUser(Y){if(this._user=Y||{},this._session)E0(this._session,{user:Y});return this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(Y){return this._requestSession=Y,this}setTags(Y){return this._tags={...this._tags,...Y},this._notifyScopeListeners(),this}setTag(Y,$){return this._tags={...this._tags,[Y]:$},this._notifyScopeListeners(),this}setExtras(Y){return this._extra={...this._extra,...Y},this._notifyScopeListeners(),this}setExtra(Y,$){return this._extra={...this._extra,[Y]:$},this._notifyScopeListeners(),this}setFingerprint(Y){return this._fingerprint=Y,this._notifyScopeListeners(),this}setLevel(Y){return this._level=Y,this._notifyScopeListeners(),this}setTransactionName(Y){return this._transactionName=Y,this._notifyScopeListeners(),this}setContext(Y,$){if($===null)delete this._contexts[Y];else this._contexts[Y]=$;return this._notifyScopeListeners(),this}setSpan(Y){return this._span=Y,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const Y=this.getSpan();return Y&&Y.transaction}setSession(Y){if(!Y)delete this._session;else this._session=Y;return this._notifyScopeListeners(),this}getSession(){return this._session}update(Y){if(!Y)return this;if(typeof Y==="function"){const $=Y(this);return $ instanceof Z0?$:this}if(Y instanceof Z0){if(this._tags={...this._tags,...Y._tags},this._extra={...this._extra,...Y._extra},this._contexts={...this._contexts,...Y._contexts},Y._user&&Object.keys(Y._user).length)this._user=Y._user;if(Y._level)this._level=Y._level;if(Y._fingerprint)this._fingerprint=Y._fingerprint;if(Y._requestSession)this._requestSession=Y._requestSession;if(Y._propagationContext)this._propagationContext=Y._propagationContext}else if(o(Y)){if(Y=Y,this._tags={...this._tags,...Y.tags},this._extra={...this._extra,...Y.extra},this._contexts={...this._contexts,...Y.contexts},Y.user)this._user=Y.user;if(Y.level)this._level=Y.level;if(Y.fingerprint)this._fingerprint=Y.fingerprint;if(Y.requestSession)this._requestSession=Y.requestSession;if(Y.propagationContext)this._propagationContext=Y.propagationContext}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=tQ(),this}addBreadcrumb(Y,$){const Z=typeof $==="number"?$:r9;if(Z<=0)return this;const X={timestamp:BY(),...Y},Q=this._breadcrumbs;return Q.push(X),this._breadcrumbs=Q.length>Z?Q.slice(-Z):Q,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(Y){return this._attachments.push(Y),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(Y,$={},Z){if(this._extra&&Object.keys(this._extra).length)Y.extra={...this._extra,...Y.extra};if(this._tags&&Object.keys(this._tags).length)Y.tags={...this._tags,...Y.tags};if(this._user&&Object.keys(this._user).length)Y.user={...this._user,...Y.user};if(this._contexts&&Object.keys(this._contexts).length)Y.contexts={...this._contexts,...Y.contexts};if(this._level)Y.level=this._level;if(this._transactionName)Y.transaction=this._transactionName;if(this._span){Y.contexts={trace:this._span.getTraceContext(),...Y.contexts};const W=this._span.transaction;if(W){Y.sdkProcessingMetadata={dynamicSamplingContext:W.getDynamicSamplingContext(),...Y.sdkProcessingMetadata};const J=W.name;if(J)Y.tags={transaction:J,...Y.tags}}}this._applyFingerprint(Y);const X=this._getBreadcrumbs(),Q=[...Y.breadcrumbs||[],...X];return Y.breadcrumbs=Q.length>0?Q:void 0,Y.sdkProcessingMetadata={...Y.sdkProcessingMetadata,...this._sdkProcessingMetadata,propagationContext:this._propagationContext},X$([...Z||[],...x$(),...this._eventProcessors],Y,$)}setSDKProcessingMetadata(Y){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...Y},this}setPropagationContext(Y){return this._propagationContext=Y,this}getPropagationContext(){return this._propagationContext}_getBreadcrumbs(){return this._breadcrumbs}_notifyScopeListeners(){if(!this._notifyingListeners)this._notifyingListeners=!0,this._scopeListeners.forEach((Y)=>{Y(this)}),this._notifyingListeners=!1}_applyFingerprint(Y){if(Y.fingerprint=Y.fingerprint?C0(Y.fingerprint):[],this._fingerprint)Y.fingerprint=Y.fingerprint.concat(this._fingerprint);if(Y.fingerprint&&!Y.fingerprint.length)delete Y.fingerprint}}var z0=function(){return O.__SENTRY__=O.__SENTRY__||{extensions:{},hub:void 0},O},xZ=function(Y){const $=z0(),Z=X0($);return J$($,Y),Z},D=function(){const Y=z0();if(Y.__SENTRY__&&Y.__SENTRY__.acs){const $=Y.__SENTRY__.acs.getCurrentHub();if($)return $}return eQ(Y)},eQ=function(Y=z0()){if(!YW(Y)||X0(Y).isOlderThan(jX))J$(Y,new Q$);return X0(Y)},W$=function(Y,$=eQ()){if(!YW(Y)||X0(Y).isOlderThan(jX)){const Z=$.getStackTop();J$(Y,new Q$(Z.client,Z0.clone(Z.scope)))}},b$=function(Y){const $=z0();$.__SENTRY__=$.__SENTRY__||{},$.__SENTRY__.acs=Y},bZ=function(Y,$={}){const Z=z0();if(Z.__SENTRY__&&Z.__SENTRY__.acs)return Z.__SENTRY__.acs.runWithAsyncContext(Y,$);return Y()},YW=function(Y){return!!(Y&&Y.__SENTRY__&&Y.__SENTRY__.hub)},X0=function(Y){return A$("hub",()=>new Q$,Y)},J$=function(Y,$){if(!Y)return!1;const Z=Y.__SENTRY__=Y.__SENTRY__||{};return Z.hub=$,!0},jX=4,o9=100;class Q${constructor(Y,$=new Z0,Z=jX){if(this._version=Z,this._stack=[{scope:$}],Y)this.bindClient(Y)}isOlderThan(Y){return this._version<Y}bindClient(Y){const $=this.getStackTop();if($.client=Y,Y&&Y.setupIntegrations)Y.setupIntegrations()}pushScope(){const Y=Z0.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:Y}),Y}popScope(){if(this.getStack().length<=1)return!1;return!!this.getStack().pop()}withScope(Y){const $=this.pushScope();try{Y($)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(Y,$){const Z=this._lastEventId=$&&$.event_id?$.event_id:I(),X=new Error("Sentry syntheticException");return this._withClient((Q,W)=>{Q.captureException(Y,{originalException:Y,syntheticException:X,...$,event_id:Z},W)}),Z}captureMessage(Y,$,Z){const X=this._lastEventId=Z&&Z.event_id?Z.event_id:I(),Q=new Error(Y);return this._withClient((W,J)=>{W.captureMessage(Y,$,{originalException:Y,syntheticException:Q,...Z,event_id:X},J)}),X}captureEvent(Y,$){const Z=$&&$.event_id?$.event_id:I();if(!Y.type)this._lastEventId=Z;return this._withClient((X,Q)=>{X.captureEvent(Y,{...$,event_id:Z},Q)}),Z}lastEventId(){return this._lastEventId}addBreadcrumb(Y,$){const{scope:Z,client:X}=this.getStackTop();if(!X)return;const{beforeBreadcrumb:Q=null,maxBreadcrumbs:W=o9}=X.getOptions&&X.getOptions()||{};if(W<=0)return;const K={timestamp:BY(),...Y},z=Q?c(()=>Q(K,$)):K;if(z===null)return;if(X.emit)X.emit("beforeAddBreadcrumb",z,$);Z.addBreadcrumb(z,W)}setUser(Y){this.getScope().setUser(Y)}setTags(Y){this.getScope().setTags(Y)}setExtras(Y){this.getScope().setExtras(Y)}setTag(Y,$){this.getScope().setTag(Y,$)}setExtra(Y,$){this.getScope().setExtra(Y,$)}setContext(Y,$){this.getScope().setContext(Y,$)}configureScope(Y){const{scope:$,client:Z}=this.getStackTop();if(Z)Y($)}run(Y){const $=xZ(this);try{Y(this)}finally{xZ($)}}getIntegration(Y){const $=this.getClient();if(!$)return null;try{return $.getIntegration(Y)}catch(Z){return H&&M.warn(`Cannot retrieve integration ${Y.id} from the current Hub`),null}}startTransaction(Y,$){const Z=this._callExtensionMethod("startTransaction",Y,$);if(H&&!Z)if(!this.getClient())M.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'");else M.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`);return Z}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(Y=!1){if(Y)return this.endSession();this._sendSessionUpdate()}endSession(){const $=this.getStackTop().scope,Z=$.getSession();if(Z)nQ(Z);this._sendSessionUpdate(),$.setSession()}startSession(Y){const{scope:$,client:Z}=this.getStackTop(),{release:X,environment:Q=Z$}=Z&&Z.getOptions()||{},{userAgent:W}=O.navigator||{},J=oQ({release:X,environment:Q,user:$.getUser(),...W&&{userAgent:W},...Y}),K=$.getSession&&$.getSession();if(K&&K.status==="ok")E0(K,{status:"exited"});return this.endSession(),$.setSession(J),J}shouldSendDefaultPii(){const Y=this.getClient(),$=Y&&Y.getOptions();return Boolean($&&$.sendDefaultPii)}_sendSessionUpdate(){const{scope:Y,client:$}=this.getStackTop(),Z=Y.getSession();if(Z&&$&&$.captureSession)$.captureSession(Z)}_withClient(Y){const{scope:$,client:Z}=this.getStackTop();if(Z)Y(Z,$)}_callExtensionMethod(Y,...$){const X=z0().__SENTRY__;if(X&&X.extensions&&typeof X.extensions[Y]==="function")return X.extensions[Y].apply(this,$);H&&M.warn(`Extension method ${Y} couldn't be found, doing nothing.`)}}var HX=function(Y){return(Y||D()).getScope().getTransaction()};var ZW=function(){if($W)return;$W=!0,r1(UX),o1(UX)},UX=function(){const Y=HX();if(Y)H&&M.log("[Tracing] Transaction: internal_error -> Global error occured"),Y.setStatus("internal_error")},$W=!1;UX.tag="sentry_tracingErrorCallback";var XW=function(Y){if(Y<400&&Y>=100)return"ok";if(Y>=400&&Y<500)switch(Y){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(Y>=500&&Y<600)switch(Y){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"};class RX{constructor(Y=1000){this._maxlen=Y,this.spans=[]}add(Y){if(this.spans.length>this._maxlen)Y.spanRecorder=void 0;else this.spans.push(Y)}}class hZ{constructor(Y={}){if(this.traceId=Y.traceId||I(),this.spanId=Y.spanId||I().substring(16),this.startTimestamp=Y.startTimestamp||jY(),this.tags=Y.tags||{},this.data=Y.data||{},this.instrumenter=Y.instrumenter||"sentry",this.origin=Y.origin||"manual",Y.parentSpanId)this.parentSpanId=Y.parentSpanId;if("sampled"in Y)this.sampled=Y.sampled;if(Y.op)this.op=Y.op;if(Y.description)this.description=Y.description;if(Y.name)this.description=Y.name;if(Y.status)this.status=Y.status;if(Y.endTimestamp)this.endTimestamp=Y.endTimestamp}get name(){return this.description||""}set name(Y){this.setName(Y)}startChild(Y){const $=new hZ({...Y,parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId});if($.spanRecorder=this.spanRecorder,$.spanRecorder)$.spanRecorder.add($);if($.transaction=this.transaction,H&&$.transaction){const Z=Y&&Y.op||"< unknown op >",X=$.transaction.name||"< unknown name >",Q=$.transaction.spanId,W=`[Tracing] Starting '${Z}' span on transaction '${X}' (${Q}).`;$.transaction.metadata.spanMetadata[$.spanId]={logMessage:W},M.log(W)}return $}setTag(Y,$){return this.tags={...this.tags,[Y]:$},this}setData(Y,$){return this.data={...this.data,[Y]:$},this}setStatus(Y){return this.status=Y,this}setHttpStatus(Y){this.setTag("http.status_code",String(Y)),this.setData("http.response.status_code",Y);const $=XW(Y);if($!=="unknown_error")this.setStatus($);return this}setName(Y){this.description=Y}isSuccess(){return this.status==="ok"}finish(Y){if(H&&this.transaction&&this.transaction.spanId!==this.spanId){const{logMessage:$}=this.transaction.metadata.spanMetadata[this.spanId];if($)M.log($.replace("Starting","Finishing"))}this.endTimestamp=typeof Y==="number"?Y:jY()}toTraceparent(){return HY(this.traceId,this.spanId,this.sampled)}toContext(){return _({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})}updateWithContext(Y){return this.data=Y.data||{},this.description=Y.description,this.endTimestamp=Y.endTimestamp,this.op=Y.op,this.parentSpanId=Y.parentSpanId,this.sampled=Y.sampled,this.spanId=Y.spanId||this.spanId,this.startTimestamp=Y.startTimestamp||this.startTimestamp,this.status=Y.status,this.tags=Y.tags||{},this.traceId=Y.traceId||this.traceId,this}getTraceContext(){return _({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId,origin:this.origin})}toJSON(){return _({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId,origin:this.origin})}}var V0=function(Y,$,Z){const X=$.getOptions(),{publicKey:Q}=$.getDsn()||{},{segment:W}=Z&&Z.getUser()||{},J=_({environment:X.environment||Z$,release:X.release,user_segment:W,public_key:Q,trace_id:Y});return $.emit&&$.emit("createDsc",J),J};class K$ extends hZ{constructor(Y,$){super(Y);delete this.description,this._measurements={},this._contexts={},this._hub=$||D(),this._name=Y.name||"",this.metadata={source:"custom",...Y.metadata,spanMetadata:{}},this._trimEnd=Y.trimEnd,this.transaction=this;const Z=this.metadata.dynamicSamplingContext;if(Z)this._frozenDynamicSamplingContext={...Z}}get name(){return this._name}set name(Y){this.setName(Y)}setName(Y,$="custom"){this._name=Y,this.metadata.source=$}initSpanRecorder(Y=1000){if(!this.spanRecorder)this.spanRecorder=new RX(Y);this.spanRecorder.add(this)}setContext(Y,$){if($===null)delete this._contexts[Y];else this._contexts[Y]=$}setMeasurement(Y,$,Z=""){this._measurements[Y]={value:$,unit:Z}}setMetadata(Y){this.metadata={...this.metadata,...Y}}finish(Y){const $=this._finishTransaction(Y);if(!$)return;return this._hub.captureEvent($)}toContext(){const Y=super.toContext();return _({...Y,name:this.name,trimEnd:this._trimEnd})}updateWithContext(Y){return super.updateWithContext(Y),this.name=Y.name||"",this._trimEnd=Y.trimEnd,this}getDynamicSamplingContext(){if(this._frozenDynamicSamplingContext)return this._frozenDynamicSamplingContext;const Y=this._hub||D(),$=Y.getClient();if(!$)return{};const Z=Y.getScope(),X=V0(this.traceId,$,Z),Q=this.metadata.sampleRate;if(Q!==void 0)X.sample_rate=`${Q}`;const W=this.metadata.source;if(W&&W!=="url")X.transaction=this.name;if(this.sampled!==void 0)X.sampled=String(this.sampled);return X}setHub(Y){this._hub=Y}_finishTransaction(Y){if(this.endTimestamp!==void 0)return;if(!this.name)H&&M.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>";super.finish(Y);const $=this._hub.getClient();if($&&$.emit)$.emit("finishTransaction",this);if(this.sampled!==!0){if(H&&M.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),$)$.recordDroppedEvent("sample_rate","transaction");return}const Z=this.spanRecorder?this.spanRecorder.spans.filter((J)=>J!==this&&J.endTimestamp):[];if(this._trimEnd&&Z.length>0)this.endTimestamp=Z.reduce((J,K)=>{if(J.endTimestamp&&K.endTimestamp)return J.endTimestamp>K.endTimestamp?J:K;return J}).endTimestamp;const X=this.metadata,Q={contexts:{...this._contexts,trace:this.getTraceContext()},spans:Z,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",sdkProcessingMetadata:{...X,dynamicSamplingContext:this.getDynamicSamplingContext()},...X.source&&{transaction_info:{source:X.source}}};if(Object.keys(this._measurements).length>0)H&&M.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),Q.measurements=this._measurements;return H&&M.log(`[Tracing] Finishing ${this.op} transaction: ${this.name}.`),Q}}var WW=function(Y,$,Z,X,Q){const{normalizeDepth:W=3,normalizeMaxBreadth:J=1000}=Y,K={...$,event_id:$.event_id||Z.event_id||I(),timestamp:$.timestamp||BY()},z=Z.integrations||Y.integrations.map((N)=>N.name);if(n9(K,Y),Y7(K,z),$.type===void 0)t9(K,Y.stackParser);let w=X;if(Z.captureContext)w=Z0.clone(w).update(Z.captureContext);if(Z.mechanism)k$(K,Z.mechanism);let G=t(K);const V=Q&&Q.getEventProcessors?Q.getEventProcessors():[];if(w){if(w.getAttachments){const N=[...Z.attachments||[],...w.getAttachments()];if(N.length)Z.attachments=N}G=w.applyToEvent(K,Z,V)}else G=X$([...V,...x$()],K,Z);return G.then((N)=>{if(N)e9(N);if(typeof W==="number"&&W>0)return $7(N,W,J);return N})},n9=function(Y,$){const{environment:Z,release:X,dist:Q,maxValueLength:W=250}=$;if(!("environment"in Y))Y.environment=("environment"in $)?Z:Z$;if(Y.release===void 0&&X!==void 0)Y.release=X;if(Y.dist===void 0&&Q!==void 0)Y.dist=Q;if(Y.message)Y.message=j0(Y.message,W);const J=Y.exception&&Y.exception.values&&Y.exception.values[0];if(J&&J.value)J.value=j0(J.value,W);const K=Y.request;if(K&&K.url)K.url=j0(K.url,W)},t9=function(Y,$){const Z=O._sentryDebugIds;if(!Z)return;let X;const Q=QW.get($);if(Q)X=Q;else X=new Map,QW.set($,X);const W=Object.keys(Z).reduce((J,K)=>{let z;const w=X.get(K);if(w)z=w;else z=$(K),X.set(K,z);for(let G=z.length-1;G>=0;G--){const V=z[G];if(V.filename){J[V.filename]=Z[K];break}}return J},{});try{Y.exception.values.forEach((J)=>{J.stacktrace.frames.forEach((K)=>{if(K.filename)K.debug_id=W[K.filename]})})}catch(J){}},e9=function(Y){const $={};try{Y.exception.values.forEach((X)=>{X.stacktrace.frames.forEach((Q)=>{if(Q.debug_id){if(Q.abs_path)$[Q.abs_path]=Q.debug_id;else if(Q.filename)$[Q.filename]=Q.debug_id;delete Q.debug_id}})})}catch(X){}if(Object.keys($).length===0)return;Y.debug_meta=Y.debug_meta||{},Y.debug_meta.images=Y.debug_meta.images||[];const Z=Y.debug_meta.images;Object.keys($).forEach((X)=>{Z.push({type:"sourcemap",code_file:X,debug_id:$[X]})})},Y7=function(Y,$){if($.length>0)Y.sdk=Y.sdk||{},Y.sdk.integrations=[...Y.sdk.integrations||[],...$]},$7=function(Y,$,Z){if(!Y)return null;const X={...Y,...Y.breadcrumbs&&{breadcrumbs:Y.breadcrumbs.map((Q)=>({...Q,...Q.data&&{data:n(Q.data,$,Z)}}))},...Y.user&&{user:n(Y.user,$,Z)},...Y.contexts&&{contexts:n(Y.contexts,$,Z)},...Y.extra&&{extra:n(Y.extra,$,Z)}};if(Y.contexts&&Y.contexts.trace&&X.contexts){if(X.contexts.trace=Y.contexts.trace,Y.contexts.trace.data)X.contexts.trace.data=n(Y.contexts.trace.data,$,Z)}if(Y.spans)X.spans=Y.spans.map((Q)=>{if(Q.data)Q.data=n(Q.data,$,Z);return Q});return X},JW=function(Y){if(!Y)return;if(Z7(Y))return{captureContext:Y};if(Q7(Y))return{captureContext:Y};return Y},Z7=function(Y){return Y instanceof Z0||typeof Y==="function"},Q7=function(Y){return Object.keys(Y).some(($)=>X7.includes($))},QW=new WeakMap,X7=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];var k0=function(Y,$){return D().captureException(Y,JW($))};var x0=function(){return D().getClient()};var vZ=function(Y){if(typeof __SENTRY_TRACING__==="boolean"&&!__SENTRY_TRACING__)return!1;const $=x0(),Z=Y||$&&$.getOptions();return!!Z&&(Z.enableTracing||("tracesSampleRate"in Z)||("tracesSampler"in Z))};var KW=function(Y,$,Z){if(!vZ($))return Y.sampled=!1,Y;if(Y.sampled!==void 0)return Y.setMetadata({sampleRate:Number(Y.sampled)}),Y;let X;if(typeof $.tracesSampler==="function")X=$.tracesSampler(Z),Y.setMetadata({sampleRate:Number(X)});else if(Z.parentSampled!==void 0)X=Z.parentSampled;else if(typeof $.tracesSampleRate!=="undefined")X=$.tracesSampleRate,Y.setMetadata({sampleRate:Number(X)});else X=1,Y.setMetadata({sampleRate:X});if(!W7(X))return H&&M.warn("[Tracing] Discarding transaction because of invalid sample rate."),Y.sampled=!1,Y;if(!X)return H&&M.log(`[Tracing] Discarding transaction because ${typeof $.tracesSampler==="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),Y.sampled=!1,Y;if(Y.sampled=Math.random()<X,!Y.sampled)return H&&M.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(X)})`),Y;return H&&M.log(`[Tracing] starting ${Y.op} transaction - ${Y.name}`),Y},W7=function(Y){if(P$(Y)||!(typeof Y==="number"||typeof Y==="boolean"))return H&&M.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(Y)} of type ${JSON.stringify(typeof Y)}.`),!1;if(Y<0||Y>1)return H&&M.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${Y}.`),!1;return!0};var J7=function(){const $=this.getScope().getSpan();return $?{"sentry-trace":$.toTraceparent()}:{}},K7=function(Y,$){const Z=this.getClient(),X=Z&&Z.getOptions()||{},Q=X.instrumenter||"sentry",W=Y.instrumenter||"sentry";if(Q!==W)H&&M.error(`A transaction was started with instrumenter=\`${W}\`, but the SDK is configured with the \`${Q}\` instrumenter.
The transaction will not be sampled. Please use the ${Q} instrumentation to start transactions.`),Y.sampled=!1;let J=new K$(Y,this);if(J=KW(J,X,{parentSampled:Y.parentSampled,transactionContext:Y,...$}),J.sampled)J.initSpanRecorder(X._experiments&&X._experiments.maxSpans);if(Z&&Z.emit)Z.emit("startTransaction",J);return J};var zW=function(){const Y=z0();if(!Y.__SENTRY__)return;if(Y.__SENTRY__.extensions=Y.__SENTRY__.extensions||{},!Y.__SENTRY__.extensions.startTransaction)Y.__SENTRY__.extensions.startTransaction=K7;if(!Y.__SENTRY__.extensions.traceHeaders)Y.__SENTRY__.extensions.traceHeaders=J7;ZW()};var gZ=function(Y,$,Z=()=>{}){const X=GW(Y),Q=D(),W=Q.getScope(),J=W.getSpan(),K=VW(Q,J,X);W.setSpan(K);function z(){K&&K.finish(),Q.getScope().setSpan(J)}let w;try{w=$(K)}catch(G){throw K&&K.setStatus("internal_error"),Z(G),z(),G}if(m(w))Promise.resolve(w).then(()=>{z()},(G)=>{K&&K.setStatus("internal_error"),Z(G),z()});else z();return w},mZ=function(Y,$){const Z=GW(Y),X=D(),Q=X.getScope(),W=Q.getSpan(),J=VW(X,W,Z);Q.setSpan(J);function K(){J&&J.finish(),X.getScope().setSpan(W)}let z;try{z=$(J)}catch(w){throw J&&J.setStatus("internal_error"),K(),w}if(m(z))Promise.resolve(z).then(()=>{K()},()=>{J&&J.setStatus("internal_error"),K()});else K();return z};var dZ=function({sentryTrace:Y,baggage:$},Z){const Q=D().getScope(),{traceparentData:W,dynamicSamplingContext:J,propagationContext:K}=C$(Y,$);if(Q.setPropagationContext(K),H&&W)M.log(`[Tracing] Continuing trace ${W.traceId}.`);const z={...W,metadata:_({dynamicSamplingContext:W&&!J?{}:J})};if(!Z)return z;return Z(z)},VW=function(Y,$,Z){if(!vZ())return;return $?$.startChild(Z):Y.startTransaction(Z)},GW=function(Y){const $={...Y};if($.name!==void 0&&$.description===void 0)$.description=$.name;return $};var z7=function(Y,$){if(!$)return Y;return Y.sdk=Y.sdk||{},Y.sdk.name=Y.sdk.name||$.name,Y.sdk.version=Y.sdk.version||$.version,Y.sdk.integrations=[...Y.sdk.integrations||[],...$.integrations||[]],Y.sdk.packages=[...Y.sdk.packages||[],...$.packages||[]],Y},wW=function(Y,$,Z,X){const Q=_Z(Z),W={sent_at:(new Date()).toISOString(),...Q&&{sdk:Q},...!!X&&$&&{dsn:f0($)}},J="aggregates"in Y?[{type:"sessions"},Y]:[{type:"session"},Y.toJSON()];return y0(W,[J])},NW=function(Y,$,Z,X){const Q=_Z(Z),W=Y.type&&Y.type!=="replay_event"?Y.type:"event";z7(Y,Z&&Z.sdk);const J=GX(Y,Q,X,$);return delete Y.sdkProcessingMetadata,y0(J,[[{type:W},Y]])};class DX{constructor(Y,$){this._client=Y,this.flushTimeout=60,this._pendingAggregates={},this._isEnabled=!0,this._intervalId=setInterval(()=>this.flush(),this.flushTimeout*1000),this._sessionAttrs=$}flush(){const Y=this.getSessionAggregates();if(Y.aggregates.length===0)return;this._pendingAggregates={},this._client.sendSession(Y)}getSessionAggregates(){const Y=Object.keys(this._pendingAggregates).map((Z)=>{return this._pendingAggregates[parseInt(Z)]}),$={attrs:this._sessionAttrs,aggregates:Y};return _($)}close(){clearInterval(this._intervalId),this._isEnabled=!1,this.flush()}incrementSessionStatusCount(){if(!this._isEnabled)return;const Y=D().getScope(),$=Y.getRequestSession();if($&&$.status)this._incrementSessionStatusCount($.status,new Date),Y.setRequestSession(void 0)}_incrementSessionStatusCount(Y,$){const Z=new Date($).setSeconds(0,0);this._pendingAggregates[Z]=this._pendingAggregates[Z]||{};const X=this._pendingAggregates[Z];if(!X.started)X.started=new Date(Z).toISOString();switch(Y){case"errored":return X.errored=(X.errored||0)+1,X.errored;case"ok":return X.exited=(X.exited||0)+1,X.exited;default:return X.crashed=(X.crashed||0)+1,X.crashed}}}var G7=function(Y){const $=Y.protocol?`${Y.protocol}:`:"",Z=Y.port?`:${Y.port}`:"";return`${$}//${Y.host}${Z}${Y.path?`/${Y.path}`:""}/api/`},w7=function(Y){return`${G7(Y)}${Y.projectId}/envelope/`},N7=function(Y,$){return m1({sentry_key:Y.publicKey,sentry_version:V7,...$&&{sentry_client:`${$.name}/${$.version}`}})},MW=function(Y,$={}){const Z=typeof $==="string"?$:$.tunnel,X=typeof $==="string"||!$._metadata?void 0:$._metadata.sdk;return Z?Z:`${w7(Y)}?${N7(Y,X)}`};var V7="7";var M7=function(Y){const $={};return Y.forEach((Z)=>{const{name:X}=Z,Q=$[X];if(Q&&!Q.isDefaultInstance&&Z.isDefaultInstance)return;$[X]=Z}),Object.keys($).map((Z)=>$[Z])},PX=function(Y){const $=Y.defaultIntegrations||[],Z=Y.integrations;$.forEach((J)=>{J.isDefaultInstance=!0});let X;if(Array.isArray(Z))X=[...$,...Z];else if(typeof Z==="function")X=C0(Z($));else X=$;const Q=M7(X),W=L7(Q,(J)=>J.name==="Debug");if(W!==-1){const[J]=Q.splice(W,1);Q.push(J)}return Q},FW=function(Y,$){const Z={};return $.forEach((X)=>{if(X)TX(Y,X,Z)}),Z},TX=function(Y,$,Z){if(Z[$.name]=$,LW.indexOf($.name)===-1)$.setupOnce(BX,D),LW.push($.name);if($.setup&&typeof $.setup==="function")$.setup(Y);if(Y.on&&typeof $.preprocessEvent==="function"){const X=$.preprocessEvent.bind($);Y.on("preprocessEvent",(Q,W)=>X(Q,W,Y))}if(Y.addEventProcessor&&typeof $.processEvent==="function"){const X=$.processEvent.bind($),Q=Object.assign((W,J)=>X(W,J,Y),{id:$.name});Y.addEventProcessor(Q)}H&&M.log(`Integration installed: ${$.name}`)};var L7=function(Y,$){for(let Z=0;Z<Y.length;Z++)if($(Y[Z])===!0)return Z;return-1},LW=[];var F7=function(Y,$){const Z=`${$} must return \`null\` or a valid event.`;if(m(Y))return Y.then((X)=>{if(!o(X)&&X!==null)throw new l(Z);return X},(X)=>{throw new l(`${$} rejected with ${X}`)});else if(!o(Y)&&Y!==null)throw new l(Z);return Y},B7=function(Y,$,Z){const{beforeSend:X,beforeSendTransaction:Q}=Y;if(jW($)&&X)return X($,Z);if(HW($)&&Q)return Q($,Z);return $},jW=function(Y){return Y.type===void 0},HW=function(Y){return Y.type==="transaction"},BW="Not capturing exception because it's already been captured.";class OX{constructor(Y){if(this._options=Y,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],Y.dsn)this._dsn=PZ(Y.dsn);else H&&M.warn("No DSN provided, client will not send events.");if(this._dsn){const $=MW(this._dsn,Y);this._transport=Y.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...Y.transportOptions,url:$})}}captureException(Y,$,Z){if(qZ(Y)){H&&M.log(BW);return}let X=$&&$.event_id;return this._process(this.eventFromException(Y,$).then((Q)=>this._captureEvent(Q,$,Z)).then((Q)=>{X=Q})),X}captureMessage(Y,$,Z,X){let Q=Z&&Z.event_id;const W=UZ(Y)?this.eventFromMessage(String(Y),$,Z):this.eventFromException(Y,Z);return this._process(W.then((J)=>this._captureEvent(J,Z,X)).then((J)=>{Q=J})),Q}captureEvent(Y,$,Z){if($&&$.originalException&&qZ($.originalException)){H&&M.log(BW);return}let X=$&&$.event_id;return this._process(this._captureEvent(Y,$,Z).then((Q)=>{X=Q})),X}captureSession(Y){if(typeof Y.release!=="string")H&&M.warn("Discarded session because of missing or non-string release");else this.sendSession(Y),E0(Y,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(Y){const $=this._transport;if($)return this._isClientDoneProcessing(Y).then((Z)=>{return $.flush(Y).then((X)=>Z&&X)});else return t(!0)}close(Y){return this.flush(Y).then(($)=>{return this.getOptions().enabled=!1,$})}getEventProcessors(){return this._eventProcessors}addEventProcessor(Y){this._eventProcessors.push(Y)}setupIntegrations(Y){if(Y&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)this._integrations=FW(this,this._options.integrations),this._integrationsInitialized=!0}getIntegrationById(Y){return this._integrations[Y]}getIntegration(Y){try{return this._integrations[Y.id]||null}catch($){return H&&M.warn(`Cannot retrieve integration ${Y.id} from the current Client`),null}}addIntegration(Y){TX(this,Y,this._integrations)}sendEvent(Y,$={}){this.emit("beforeSendEvent",Y,$);let Z=NW(Y,this._dsn,this._options._metadata,this._options.tunnel);for(let Q of $.attachments||[])Z=zX(Z,VX(Q,this._options.transportOptions&&this._options.transportOptions.textEncoder));const X=this._sendEnvelope(Z);if(X)X.then((Q)=>this.emit("afterSendEvent",Y,Q),null)}sendSession(Y){const $=wW(Y,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope($)}recordDroppedEvent(Y,$,Z){if(this._options.sendClientReports){const X=`${Y}:${$}`;H&&M.log(`Adding outcome: "${X}"`),this._outcomes[X]=this._outcomes[X]+1||1}}on(Y,$){if(!this._hooks[Y])this._hooks[Y]=[];this._hooks[Y].push($)}emit(Y,...$){if(this._hooks[Y])this._hooks[Y].forEach((Z)=>Z(...$))}_updateSessionFromEvent(Y,$){let Z=!1,X=!1;const Q=$.exception&&$.exception.values;if(Q){X=!0;for(let K of Q){const z=K.mechanism;if(z&&z.handled===!1){Z=!0;break}}}const W=Y.status==="ok";if(W&&Y.errors===0||W&&Z)E0(Y,{...Z&&{status:"crashed"},errors:Y.errors||Number(X||Z)}),this.captureSession(Y)}_isClientDoneProcessing(Y){return new d(($)=>{let Z=0;const X=1,Q=setInterval(()=>{if(this._numProcessing==0)clearInterval(Q),$(!0);else if(Z+=X,Y&&Z>=Y)clearInterval(Q),$(!1)},X)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(Y,$,Z){const X=this.getOptions(),Q=Object.keys(this._integrations);if(!$.integrations&&Q.length>0)$.integrations=Q;return this.emit("preprocessEvent",Y,$),WW(X,Y,$,Z,this).then((W)=>{if(W===null)return W;const{propagationContext:J}=W.sdkProcessingMetadata||{};if(!(W.contexts&&W.contexts.trace)&&J){const{traceId:z,spanId:w,parentSpanId:G,dsc:V}=J;W.contexts={trace:{trace_id:z,span_id:w,parent_span_id:G},...W.contexts};const N=V?V:V0(z,this,Z);W.sdkProcessingMetadata={dynamicSamplingContext:N,...W.sdkProcessingMetadata}}return W})}_captureEvent(Y,$={},Z){return this._processEvent(Y,$,Z).then((X)=>{return X.event_id},(X)=>{if(H){const Q=X;if(Q.logLevel==="log")M.log(Q.message);else M.warn(Q)}return})}_processEvent(Y,$,Z){const X=this.getOptions(),{sampleRate:Q}=X,W=HW(Y),J=jW(Y),K=Y.type||"error",z=`before send for type \`${K}\``;if(J&&typeof Q==="number"&&Math.random()>Q)return this.recordDroppedEvent("sample_rate","error",Y),MY(new l(`Discarding event because it's not included in the random sample (sampling rate = ${Q})`,"log"));const w=K==="replay_event"?"replay":K;return this._prepareEvent(Y,$,Z).then((G)=>{if(G===null)throw this.recordDroppedEvent("event_processor",w,Y),new l("An event processor returned `null`, will not send event.","log");if($.data&&$.data.__sentry__===!0)return G;const N=B7(X,G,$);return F7(N,z)}).then((G)=>{if(G===null)throw this.recordDroppedEvent("before_send",w,Y),new l(`${z} returned \`null\`, will not send event.`,"log");const V=Z&&Z.getSession();if(!W&&V)this._updateSessionFromEvent(V,G);const N=G.transaction_info;if(W&&N&&G.transaction!==Y.transaction)G.transaction_info={...N,source:"custom"};return this.sendEvent(G,$),G}).then(null,(G)=>{if(G instanceof l)throw G;throw this.captureException(G,{data:{__sentry__:!0},originalException:G}),new l(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${G}`)})}_process(Y){this._numProcessing++,Y.then(($)=>{return this._numProcessing--,$},($)=>{return this._numProcessing--,$})}_sendEnvelope(Y){if(this.emit("beforeEnvelope",Y),this._isEnabled()&&this._transport)return this._transport.send(Y).then(null,($)=>{H&&M.error("Error while sending event:",$)});else H&&M.error("Transport disabled")}_clearOutcomes(){const Y=this._outcomes;return this._outcomes={},Object.keys(Y).map(($)=>{const[Z,X]=$.split(":");return{reason:Z,category:X,quantity:Y[$]}})}}var UW=function(Y,$,Z,X,Q){const W={sent_at:(new Date()).toISOString()};if(Z&&Z.sdk)W.sdk={name:Z.sdk.name,version:Z.sdk.version};if(!!X&&!!Q)W.dsn=f0(Q);if($)W.trace=_($);const J=j7(Y);return y0(W,[J])},j7=function(Y){return[{type:"check_in"},Y]};class z$ extends OX{constructor(Y){zW();super(Y)}eventFromException(Y,$){return t(LX(D,this._options.stackParser,Y,$))}eventFromMessage(Y,$="info",Z){return t(FX(this._options.stackParser,Y,$,Z,this._options.attachStacktrace))}captureException(Y,$,Z){if(this._options.autoSessionTracking&&this._sessionFlusher&&Z){const X=Z.getRequestSession();if(X&&X.status==="ok")X.status="errored"}return super.captureException(Y,$,Z)}captureEvent(Y,$,Z){if(this._options.autoSessionTracking&&this._sessionFlusher&&Z){if((Y.type||"exception")==="exception"&&Y.exception&&Y.exception.values&&Y.exception.values.length>0){const W=Z.getRequestSession();if(W&&W.status==="ok")W.status="errored"}}return super.captureEvent(Y,$,Z)}close(Y){if(this._sessionFlusher)this._sessionFlusher.close();return super.close(Y)}initSessionFlusher(){const{release:Y,environment:$}=this._options;if(!Y)H&&M.warn("Cannot initialise an instance of SessionFlusher if no release is provided!");else this._sessionFlusher=new DX(this,{release:Y,environment:$})}captureCheckIn(Y,$,Z){const X=Y.status!=="in_progress"&&Y.checkInId?Y.checkInId:I();if(!this._isEnabled())return H&&M.warn("SDK not enabled, will not capture checkin."),X;const Q=this.getOptions(),{release:W,environment:J,tunnel:K}=Q,z={check_in_id:X,monitor_slug:Y.monitorSlug,status:Y.status,release:W,environment:J};if(Y.status!=="in_progress")z.duration=Y.duration;if($)z.monitor_config={schedule:$.schedule,checkin_margin:$.checkinMargin,max_runtime:$.maxRuntime,timezone:$.timezone};const[w,G]=this._getTraceInfoFromScope(Z);if(G)z.contexts={trace:G};const V=UW(z,w,this.getSdkMetadata(),K,this.getDsn());return H&&M.info("Sending checkin:",Y.monitorSlug,Y.status),this._sendEnvelope(V),X}_captureRequestSession(){if(!this._sessionFlusher)H&&M.warn("Discarded request mode session because autoSessionTracking option was disabled");else this._sessionFlusher.incrementSessionStatusCount()}_prepareEvent(Y,$,Z){if(this._options.platform)Y.platform=Y.platform||this._options.platform;if(this._options.runtime)Y.contexts={...Y.contexts,runtime:(Y.contexts||{}).runtime||this._options.runtime};if(this._options.serverName)Y.server_name=Y.server_name||this._options.serverName;return super._prepareEvent(Y,$,Z)}_getTraceInfoFromScope(Y){if(!Y)return[void 0,void 0];const $=Y.getSpan();if($)return[$.transaction?$.transaction.getDynamicSamplingContext():void 0,$.getTraceContext()];const{traceId:Z,spanId:X,parentSpanId:Q,dsc:W}=Y.getPropagationContext(),J={trace_id:Z,span_id:X,parent_span_id:Q};if(W)return[W,J];return[V0(Z,this,Y),J]}}var AX=function(Y,$){if($.debug===!0)if(H)M.enable();else c(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")});const Z=D();Z.getScope().update($.initialScope);const Q=new Y($);Z.bindClient(Q)};var UY=function(Y,$,Z=e1(Y.bufferSize||H7)){let X={};const Q=(J)=>Z.drain(J);function W(J){const K=[];if(fZ(J,(V,N)=>{const F=CZ(N);if(wX(X,F)){const B=RW(V,N);Y.recordDroppedEvent("ratelimit_backoff",F,B)}else K.push(V)}),K.length===0)return t();const z=y0(J[0],K),w=(V)=>{fZ(z,(N,F)=>{const B=RW(N,F);Y.recordDroppedEvent(V,CZ(F),B)})},G=()=>$({body:_$(z,Y.textEncoder)}).then((V)=>{if(V.statusCode!==void 0&&(V.statusCode<200||V.statusCode>=300))H&&M.warn(`Sentry responded with status code ${V.statusCode} to sent event.`);return X=NX(X,V),V},(V)=>{throw w("network_error"),V});return Z.add(G).then((V)=>V,(V)=>{if(V instanceof l)return H&&M.error("Skipped sending event because buffer is full."),w("queue_overflow"),t();else throw V})}return W.__sentry__baseTransport__=!0,{send:W,flush:Q}},RW=function(Y,$){if($!=="event"&&$!=="transaction")return;return Array.isArray(Y)?Y[1]:void 0},H7=30;var b0="7.84.0";var i={};o$(i,{LinkedErrors:()=>{{return pZ}},InboundFilters:()=>{{return lZ}},FunctionToString:()=>{{return uZ}}});var DW;class uZ{static __initStatic(){this.id="FunctionToString"}constructor(){this.name=uZ.id}setupOnce(){DW=Function.prototype.toString;try{Function.prototype.toString=function(...Y){const $=g1(this)||this;return DW.apply($,Y)}}catch(Y){}}}uZ.__initStatic();var D7=function(Y={},$={}){return{allowUrls:[...Y.allowUrls||[],...$.allowUrls||[]],denyUrls:[...Y.denyUrls||[],...$.denyUrls||[]],ignoreErrors:[...Y.ignoreErrors||[],...$.ignoreErrors||[],...Y.disableErrorDefaults?[]:U7],ignoreTransactions:[...Y.ignoreTransactions||[],...$.ignoreTransactions||[],...Y.disableTransactionDefaults?[]:R7],ignoreInternal:Y.ignoreInternal!==void 0?Y.ignoreInternal:!0}},P7=function(Y,$){if($.ignoreInternal&&k7(Y))return H&&M.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${A0(Y)}`),!0;if(T7(Y,$.ignoreErrors))return H&&M.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${A0(Y)}`),!0;if(O7(Y,$.ignoreTransactions))return H&&M.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${A0(Y)}`),!0;if(A7(Y,$.denyUrls))return H&&M.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${A0(Y)}.\nUrl: ${cZ(Y)}`),!0;if(!q7(Y,$.allowUrls))return H&&M.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${A0(Y)}.\nUrl: ${cZ(Y)}`),!0;return!1},T7=function(Y,$){if(Y.type||!$||!$.length)return!1;return E7(Y).some((Z)=>H0(Z,$))},O7=function(Y,$){if(Y.type!=="transaction"||!$||!$.length)return!1;const Z=Y.transaction;return Z?H0(Z,$):!1},A7=function(Y,$){if(!$||!$.length)return!1;const Z=cZ(Y);return!Z?!1:H0(Z,$)},q7=function(Y,$){if(!$||!$.length)return!0;const Z=cZ(Y);return!Z?!0:H0(Z,$)},E7=function(Y){const $=[];if(Y.message)$.push(Y.message);let Z;try{Z=Y.exception.values[Y.exception.values.length-1]}catch(X){}if(Z){if(Z.value){if($.push(Z.value),Z.type)$.push(`${Z.type}: ${Z.value}`)}}if(H&&$.length===0)M.error(`Could not extract message for event ${A0(Y)}`);return $},k7=function(Y){try{return Y.exception.values[0].type==="SentryError"}catch($){}return!1},S7=function(Y=[]){for(let $=Y.length-1;$>=0;$--){const Z=Y[$];if(Z&&Z.filename!=="<anonymous>"&&Z.filename!=="[native code]")return Z.filename||null}return null},cZ=function(Y){try{let $;try{$=Y.exception.values[0].stacktrace.frames}catch(Z){}return $?S7($):null}catch($){return H&&M.error(`Cannot extract url for event ${A0(Y)}`),null}},U7=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],R7=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/];class lZ{static __initStatic(){this.id="InboundFilters"}constructor(Y={}){this.name=lZ.id,this._options=Y}setupOnce(Y,$){}processEvent(Y,$,Z){const X=Z.getOptions(),Q=D7(this._options,X);return P7(Y,Q)?null:Y}}lZ.__initStatic();var I7="cause",f7=5;class pZ{static __initStatic(){this.id="LinkedErrors"}constructor(Y={}){this._key=Y.key||I7,this._limit=Y.limit||f7,this.name=pZ.id}setupOnce(){}preprocessEvent(Y,$,Z){const X=Z.getOptions();h1(yZ,X.stackParser,X.maxValueLength,this._key,this._limit,Y,$)}}pZ.__initStatic();var RY=function(Y,$){const Z=$.getClient(),X=Z&&Z.getDsn(),Q=Z&&Z.getOptions().tunnel;return _7(Y,X)||C7(Y,Q)},C7=function(Y,$){if(!$)return!1;return PW(Y)===PW($)},_7=function(Y,$){return $?Y.includes($.host):!1},PW=function(Y){return Y[Y.length-1]==="/"?Y.slice(0,-1):Y};var y7=function(Y){const{transactionNamingScheme:$,include:{ip:Z,user:X,...Q}}=Y,W=[];for(let[K,z]of Object.entries(Q))if(z)W.push(K);let J;if(X===void 0)J=!0;else if(typeof X==="boolean")J=X;else{const K=[];for(let[z,w]of Object.entries(X))if(w)K.push(z);J=K}return{include:{ip:Z,user:J,request:W.length!==0?W:void 0,transaction:$}}},x7=function(Y){try{return Y.getClient().getOptions()._metadata.sdk.name}catch($){return}},qX={include:{cookies:!0,data:!0,headers:!0,ip:!1,query_string:!0,url:!0,user:{id:!0,username:!0,email:!0}},transactionNamingScheme:"methodPath"};class h0{static __initStatic(){this.id="RequestData"}constructor(Y={}){this.name=h0.id,this._addRequestData=$X,this._options={...qX,...Y,include:{method:!0,...qX.include,...Y.include,user:Y.include&&typeof Y.include.user==="boolean"?Y.include.user:{...qX.include.user,...(Y.include||{}).user}}}}setupOnce(Y,$){const{transactionNamingScheme:Z}=this._options;Y((X)=>{const Q=$(),W=Q.getIntegration(h0),{sdkProcessingMetadata:J={}}=X,K=J.request;if(!W||!K)return X;const z=J.requestDataOptionsFromExpressHandler||J.requestDataOptionsFromGCPWrapper||y7(this._options),w=this._addRequestData(X,K,z);if(X.type==="transaction"||Z==="handler")return w;const V=K._sentryTransaction;if(V){const N=x7(Q)==="sentry.javascript.nextjs"?V.name.startsWith("/api"):Z!=="path",[F]=FY(K,{path:!0,method:N,customRoute:V.name});w.transaction=F}return w})}}h0.__initStatic();var k=typeof __SENTRY_DEBUG__==="undefined"||__SENTRY_DEBUG__;var a=function(Y){const $=L([Y,"call",(X)=>X(),"access",(X)=>X.getClient,"call",(X)=>X(),"optionalAccess",(X)=>X.getOptions,"call",(X)=>X()]);return(L([$,"optionalAccess",(X)=>X.instrumenter])||"sentry")!=="sentry"};var TW=function(Y,$){const Z=Y.length;switch(Z){case 2:return function(X,Q){const W=Q.__sentry_transaction;if(W){const J=W.startChild({description:Y.name,op:`middleware.express.${$}`,origin:"auto.middleware.express"});Q.once("finish",()=>{J.finish()})}return Y.call(this,X,Q)};case 3:return function(X,Q,W){const J=Q.__sentry_transaction,K=L([J,"optionalAccess",(z)=>z.startChild,"call",(z)=>z({description:Y.name,op:`middleware.express.${$}`,origin:"auto.middleware.express"})]);Y.call(this,X,Q,function(...z){L([K,"optionalAccess",(w)=>w.finish,"call",(w)=>w()]),W.call(this,...z)})};case 4:return function(X,Q,W,J){const K=W.__sentry_transaction,z=L([K,"optionalAccess",(w)=>w.startChild,"call",(w)=>w({description:Y.name,op:`middleware.express.${$}`,origin:"auto.middleware.express"})]);Y.call(this,X,Q,W,function(...w){L([z,"optionalAccess",(G)=>G.finish,"call",(G)=>G()]),J.call(this,...w)})};default:throw new Error(`Express middleware takes 2-4 arguments. Got: ${Z}`)}},X6=function(Y,$){return Y.map((Z)=>{if(typeof Z==="function")return TW(Z,$);if(Array.isArray(Z))return Z.map((X)=>{if(typeof X==="function")return TW(X,$);return X});return Z})},Q6=function(Y,$){const Z=Y[$];return Y[$]=function(...X){return Z.call(this,...X6(X,$))},Y},W6=function(Y,$=[]){$.forEach((Z)=>Q6(Y,Z))},J6=function(Y){const $="settings"in Y;if($&&Y._router===void 0&&Y.lazyrouter)Y.lazyrouter();const Z=$?Y._router:Y;if(!Z){k&&M.debug("Cannot instrument router for URL Parameterization (did not find a valid router)."),k&&M.debug("Routing instrumentation is currently only supported in Express 4.");return}const X=Object.getPrototypeOf(Z),Q=X.process_params;X.process_params=function W(J,K,z,w,G){if(!z._reconstructedRoute)z._reconstructedRoute="";const{layerRoutePath:V,isRegex:N,isArray:F,numExtraSegments:B}=z6(J);if(V||N||F)z._hasParameters=!0;let j;if(V)j=V;else j=w6(z.originalUrl,z._reconstructedRoute,J.path)||"";const R=j.split("/").filter((f)=>f.length>0&&(N||F||!f.includes("*"))).join("/");if(R&&R.length>0)z._reconstructedRoute+=`/${R}${N?"/":""}`;const A=Y$(LY(z.originalUrl||""))+B,S=Y$(z._reconstructedRoute);if(A===S){if(!z._hasParameters){if(z._reconstructedRoute!==z.originalUrl)z._reconstructedRoute=z.originalUrl?LY(z.originalUrl):z.originalUrl}const f=w.__sentry_transaction;if(f&&f.metadata.source!=="custom"){const q=z._reconstructedRoute||"/";f.setName(...FY(z,{path:!0,method:!0,customRoute:q}))}}return Q.call(this,J,K,z,w,G)}},z6=function(Y){let $=L([Y,"access",(J)=>J.route,"optionalAccess",(J)=>J.path]);const Z=D$($),X=Array.isArray($);if(!$){const[J]=O.process.versions.node.split(".").map(Number);if(J>=16)$=K6(Y.path,Y.regexp,Y.keys)}if(!$)return{isRegex:Z,isArray:X,numExtraSegments:0};const Q=X?Math.max(V6($)-Y$(Y.path||""),0):0;return{layerRoutePath:G6(X,$),isRegex:Z,isArray:X,numExtraSegments:Q}},V6=function(Y){return Y.reduce(($,Z)=>{return $+Y$(Z.toString())},0)},G6=function(Y,$){if(Y)return $.map((Z)=>Z.toString()).join(",");return $&&$.toString()},w6=function(Y,$,Z){const X=LY(Y||""),Q=L([X,"optionalAccess",(z)=>z.split,"call",(z)=>z("/"),"access",(z)=>z.filter,"call",(z)=>z((w)=>!!w)]);let W=0;const J=L([$,"optionalAccess",(z)=>z.split,"call",(z)=>z("/"),"access",(z)=>z.filter,"call",(z)=>z((w)=>!!w),"access",(z)=>z.length])||0;return L([Z,"optionalAccess",(z)=>z.split,"call",(z)=>z("/"),"access",(z)=>z.filter,"call",(z)=>z((w)=>{if(L([Q,"optionalAccess",(G)=>G[J+W]])===w)return W+=1,!0;return!1}),"access",(z)=>z.join,"call",(z)=>z("/")])};class h${static __initStatic(){this.id="Express"}constructor(Y={}){this.name=h$.id,this._router=Y.router||Y.app,this._methods=(Array.isArray(Y.methods)?Y.methods:[]).concat("use")}setupOnce(Y,$){if(!this._router){k&&M.error("ExpressIntegration is missing an Express instance");return}if(a($)){k&&M.log("Express Integration is skipped because of instrumenter configuration.");return}W6(this._router,this._methods),J6(this._router)}}h$.__initStatic();var K6=(Y,$,Z)=>{if(!Y||!$||!Z||Object.keys(Z).length===0||!L([Z,"access",(w)=>w[0],"optionalAccess",(w)=>w.offset]))return;const X=Z.sort((w,G)=>w.offset-G.offset),W=new RegExp($,`${$.flags}d`).exec(Y);if(!W||!W.indices)return;const[,...J]=W.indices;if(J.length!==X.length)return;let K=Y,z=0;return J.forEach((w,G)=>{if(w){const[V,N]=w,F=K.substring(0,V-z),B=`:${X[G].name}`,j=K.substring(N-z);K=F+B+j,z=z+(N-V-B.length)}}),K};class v${static __initStatic(){this.id="Postgres"}constructor(Y={}){this.name=v$.id,this._usePgNative=!!Y.usePgNative,this._module=Y.module}loadDependency(){return this._module=this._module||Y0("pg")}setupOnce(Y,$){if(a($)){k&&M.log("Postgres Integration is skipped because of instrumenter configuration.");return}const Z=this.loadDependency();if(!Z){k&&M.error("Postgres Integration was unable to require `pg` package.");return}const X=this._usePgNative?L([Z,"access",(Q)=>Q.native,"optionalAccess",(Q)=>Q.Client]):Z.Client;if(!X){k&&M.error("Postgres Integration was unable to access 'pg-native' bindings.");return}C(X.prototype,"query",function(Q){return function(W,J,K){const w=$().getScope().getSpan(),G={"db.system":"postgresql"};try{if(this.database)G["db.name"]=this.database;if(this.host)G["server.address"]=this.host;if(this.port)G["server.port"]=this.port;if(this.user)G["db.user"]=this.user}catch(F){}const V=L([w,"optionalAccess",(F)=>F.startChild,"call",(F)=>F({description:typeof W==="string"?W:W.text,op:"db",origin:"auto.db.postgres",data:G})]);if(typeof K==="function")return Q.call(this,W,J,function(F,B){L([V,"optionalAccess",(j)=>j.finish,"call",(j)=>j()]),K(F,B)});if(typeof J==="function")return Q.call(this,W,function(F,B){L([V,"optionalAccess",(j)=>j.finish,"call",(j)=>j()]),J(F,B)});const N=typeof J!=="undefined"?Q.call(this,W,J):Q.call(this,W);if(m(N))return N.then((F)=>{return L([V,"optionalAccess",(B)=>B.finish,"call",(B)=>B()]),F});return L([V,"optionalAccess",(F)=>F.finish,"call",(F)=>F()]),N}})}}v$.__initStatic();class g${static __initStatic(){this.id="Mysql"}constructor(){this.name=g$.id}loadDependency(){return this._module=this._module||Y0("mysql/lib/Connection.js")}setupOnce(Y,$){if(a($)){k&&M.log("Mysql Integration is skipped because of instrumenter configuration.");return}const Z=this.loadDependency();if(!Z){k&&M.error("Mysql Integration was unable to require `mysql` package.");return}let X=void 0;try{Z.prototype.connect=new Proxy(Z.prototype.connect,{apply(J,K,z){if(!X)X=K.config;return J.apply(K,z)}})}catch(J){k&&M.error("Mysql Integration was unable to instrument `mysql` config.")}function Q(){if(!X)return{};return{"server.address":X.host,"server.port":X.port,"db.user":X.user}}function W(J){if(!J||J.endTimestamp)return;const K=Q();Object.keys(K).forEach((z)=>{J.setData(z,K[z])}),J.finish()}C(Z,"createQuery",function(J){return function(K,z,w){const V=$().getScope().getSpan(),N=L([V,"optionalAccess",(B)=>B.startChild,"call",(B)=>B({description:typeof K==="string"?K:K.sql,op:"db",origin:"auto.db.mysql",data:{"db.system":"mysql"}})]);if(typeof w==="function")return J.call(this,K,z,function(B,j,R){W(N),w(B,j,R)});if(typeof z==="function")return J.call(this,K,function(B,j,R){W(N),z(B,j,R)});const F=J.call(this,K,z);return F.on("end",()=>{W(N)}),F}})}}g$.__initStatic();var L6=function(Y){return Y&&typeof Y==="object"&&Y.once&&typeof Y.once==="function"},N6=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],M6={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]};class m${static __initStatic(){this.id="Mongo"}constructor(Y={}){this.name=m$.id,this._operations=Array.isArray(Y.operations)?Y.operations:N6,this._describeOperations=("describeOperations"in Y)?Y.describeOperations:!0,this._useMongoose=!!Y.useMongoose}loadDependency(){const Y=this._useMongoose?"mongoose":"mongodb";return this._module=this._module||Y0(Y)}setupOnce(Y,$){if(a($)){k&&M.log("Mongo Integration is skipped because of instrumenter configuration.");return}const Z=this.loadDependency();if(!Z){const X=this._useMongoose?"mongoose":"mongodb";k&&M.error(`Mongo Integration was unable to require \`${X}\` package.`);return}this._instrumentOperations(Z.Collection,this._operations,$)}_instrumentOperations(Y,$,Z){$.forEach((X)=>this._patchOperation(Y,X,Z))}_patchOperation(Y,$,Z){if(!($ in Y.prototype))return;const X=this._getSpanContextFromOperationArguments.bind(this);C(Y.prototype,$,function(Q){return function(...W){const J=W[W.length-1],z=Z().getScope().getSpan();if(typeof J!=="function"||$==="mapReduce"&&W.length===2){const G=L([z,"optionalAccess",(N)=>N.startChild,"call",(N)=>N(X(this,$,W))]),V=Q.call(this,...W);if(m(V))return V.then((N)=>{return L([G,"optionalAccess",(F)=>F.finish,"call",(F)=>F()]),N});else if(L6(V)){const N=V;try{N.once("close",()=>{L([G,"optionalAccess",(F)=>F.finish,"call",(F)=>F()])})}catch(F){L([G,"optionalAccess",(B)=>B.finish,"call",(B)=>B()])}return N}else return L([G,"optionalAccess",(N)=>N.finish,"call",(N)=>N()]),V}const w=L([z,"optionalAccess",(G)=>G.startChild,"call",(G)=>G(X(this,$,W.slice(0,-1)))]);return Q.call(this,...W.slice(0,-1),function(G,V){L([w,"optionalAccess",(N)=>N.finish,"call",(N)=>N()]),J(G,V)})}})}_getSpanContextFromOperationArguments(Y,$,Z){const X={"db.system":"mongodb","db.name":Y.dbName,"db.operation":$,"db.mongodb.collection":Y.collectionName},Q={op:"db",origin:"auto.db.mongo",description:$,data:X},W=M6[$],J=Array.isArray(this._describeOperations)?this._describeOperations.includes($):this._describeOperations;if(!W||!J)return Q;try{if($==="mapReduce"){const[K,z]=Z;X[W[0]]=typeof K==="string"?K:K.name||"<anonymous>",X[W[1]]=typeof z==="string"?z:z.name||"<anonymous>"}else for(let K=0;K<W.length;K++)X[`db.mongodb.${W[K]}`]=JSON.stringify(Z[K])}catch(K){}return Q}}m$.__initStatic();var F6=function(Y){return!!Y&&!!Y.$use};class d${static __initStatic(){this.id="Prisma"}constructor(Y={}){if(this.name=d$.id,F6(Y.client)&&!Y.client._sentryInstrumented){oY(Y.client,"_sentryInstrumented",!0);const $={};try{const Z=Y.client._engineConfig;if(Z){const{activeProvider:X,clientVersion:Q}=Z;if(X)$["db.system"]=X;if(Q)$["db.prisma.version"]=Q}}catch(Z){}Y.client.$use((Z,X)=>{if(a(D))return X(Z);const{action:Q,model:W}=Z;return gZ({name:W?`${W} ${Q}`:Q,op:"db.prisma",origin:"auto.db.prisma",data:{...$,"db.operation":Q}},()=>X(Z))})}else k&&M.warn("Unsupported Prisma client provided to PrismaIntegration. Provided client:",Y.client)}setupOnce(){}}d$.__initStatic();class u${static __initStatic(){this.id="GraphQL"}constructor(){this.name=u$.id}loadDependency(){return this._module=this._module||Y0("graphql/execution/execute.js")}setupOnce(Y,$){if(a($)){k&&M.log("GraphQL Integration is skipped because of instrumenter configuration.");return}const Z=this.loadDependency();if(!Z){k&&M.error("GraphQL Integration was unable to require graphql/execution package.");return}C(Z,"execute",function(X){return function(...Q){const W=$().getScope(),J=W.getSpan(),K=L([J,"optionalAccess",(w)=>w.startChild,"call",(w)=>w({description:"execute",op:"graphql.execute",origin:"auto.graphql.graphql"})]);L([W,"optionalAccess",(w)=>w.setSpan,"call",(w)=>w(K)]);const z=X.call(this,...Q);if(m(z))return z.then((w)=>{return L([K,"optionalAccess",(G)=>G.finish,"call",(G)=>G()]),L([W,"optionalAccess",(G)=>G.setSpan,"call",(G)=>G(J)]),w});return L([K,"optionalAccess",(w)=>w.finish,"call",(w)=>w()]),L([W,"optionalAccess",(w)=>w.setSpan,"call",(w)=>w(J)]),z}})}}u$.__initStatic();var OW=function(Y,$){return Y.map((Z)=>{return Object.keys(Z).forEach((X)=>{Object.keys(Z[X]).forEach((Q)=>{if(typeof Z[X][Q]!=="function")return;B6(Z,X,Q,$)})}),Z})},B6=function(Y,$,Z,X){C(Y[$],Z,function(Q){return function(...W){const K=X().getScope().getSpan(),z=L([K,"optionalAccess",(G)=>G.startChild,"call",(G)=>G({description:`${$}.${Z}`,op:"graphql.resolve",origin:"auto.graphql.apollo"})]),w=Q.call(this,...W);if(m(w))return w.then((G)=>{return L([z,"optionalAccess",(V)=>V.finish,"call",(V)=>V()]),G});return L([z,"optionalAccess",(G)=>G.finish,"call",(G)=>G()]),w}})};class c${static __initStatic(){this.id="Apollo"}constructor(Y={useNestjs:!1}){this.name=c$.id,this._useNest=!!Y.useNestjs}loadDependency(){if(this._useNest)this._module=this._module||Y0("@nestjs/graphql");else this._module=this._module||Y0("apollo-server-core");return this._module}setupOnce(Y,$){if(a($)){k&&M.log("Apollo Integration is skipped because of instrumenter configuration.");return}if(this._useNest){const Z=this.loadDependency();if(!Z){k&&M.error("Apollo-NestJS Integration was unable to require @nestjs/graphql package.");return}C(Z.GraphQLFactory.prototype,"mergeWithSchema",function(X){return function(...Q){return C(this.resolversExplorerService,"explore",function(W){return function(){const J=C0(W.call(this));return OW(J,$)}}),X.call(this,...Q)}})}else{const Z=this.loadDependency();if(!Z){k&&M.error("Apollo Integration was unable to require apollo-server-core package.");return}C(Z.ApolloServerBase.prototype,"constructSchema",function(X){return function(){if(!this.config.resolvers){if(k){if(this.config.schema)M.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `schema` property.If you are using NestJS with Apollo, please use `Sentry.Integrations.Apollo({ useNestjs: true })` instead."),M.warn();else if(this.config.modules)M.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `modules` property.");M.error("Skipping tracing as no resolvers found on the `ApolloServer` instance.")}return X.call(this)}const Q=C0(this.config.resolvers);return this.config.resolvers=OW(Q,$),X.call(this)}})}}}c$.__initStatic();import*as AW from"os";import{TextEncoder as j6} from"util";class EX extends z${constructor(Y){Y._metadata=Y._metadata||{},Y._metadata.sdk=Y._metadata.sdk||{name:"sentry.javascript.node",packages:[{name:"npm:@sentry/node",version:b0}],version:b0},Y.transportOptions={textEncoder:new j6,...Y.transportOptions};const $={...Y,platform:"node",runtime:{name:"node",version:global.process.version},serverName:Y.serverName||global.process.env.SENTRY_NAME||AW.hostname()};super($)}}import*as HJ from"http";import*as UJ from"https";import{Readable as RJ} from"stream";import{URL as aW} from"url";import{createGzip as DJ} from"zlib";var sW=I8(iW(),1),TJ=function(Y){return new RJ({read(){this.push(Y),this.push(null)}})},rW=function(Y){let $;try{$=new aW(Y.url)}catch(z){return c(()=>{console.warn("[@sentry/node]: Invalid dsn or tunnel option, will not send any events. The tunnel option must be a full URL when used.")}),UY(Y,()=>Promise.resolve({}))}const Z=$.protocol==="https:",X=OJ($,Y.proxy||(Z?process.env.https_proxy:void 0)||process.env.http_proxy),Q=Z?UJ:HJ,W=Y.keepAlive===void 0?!1:Y.keepAlive,J=X?new sW.HttpsProxyAgent(X):new Q.Agent({keepAlive:W,maxSockets:30,timeout:2000}),K=AJ(Y,y$(Y.httpModule,()=>Q),J);return UY(Y,K)},OJ=function(Y,$){const{no_proxy:Z}=process.env;if(Z&&Z.split(",").some((Q)=>Y.host.endsWith(Q)||Y.hostname.endsWith(Q)))return;else return $},AJ=function(Y,$,Z){const{hostname:X,pathname:Q,port:W,protocol:J,search:K}=new aW(Y.url);return function z(w){return new Promise((G,V)=>{let N=TJ(w.body);const F={...Y.headers};if(w.body.length>PJ)F["content-encoding"]="gzip",N=N.pipe(DJ());const B=$.request({method:"POST",agent:Z,headers:F,hostname:X,path:`${Q}${K}`,port:W,protocol:J,ca:Y.caCerts},(j)=>{j.on("data",()=>{}),j.on("end",()=>{}),j.setEncoding("utf8");const R=y$(j.headers["retry-after"],()=>null),A=y$(j.headers["x-sentry-rate-limits"],()=>null);G({statusCode:j.statusCode,headers:{"retry-after":R,"x-sentry-rate-limits":Array.isArray(A)?A[0]:A}})});B.on("error",V),N.pipe(B)})}},PJ=32768;import{spawn as aw} from"child_process";import{posix as qJ,sep as EJ} from"path";var SJ=function(Y){return Y.replace(/^[A-Z]:/,"").replace(/\\/g,"/")},oW=function(Y,$=kJ){if(!Y)return;const Z=$?SJ(Y):Y;let{root:X,dir:Q,base:W,ext:J}=qJ.parse(Z);const z=`${require&&require.main&&require.main.filename&&Q||global.process.cwd()}/`;let w=W;if(J===".js"||J===".mjs"||J===".cjs")w=w.slice(0,J.length*-1);if(!X&&!Q)Q=".";let G=Q.lastIndexOf("/node_modules/");if(G>-1)return`${Q.slice(G+14).replace(/\//g,".")}:${w}`;if(G=`${Q}/`.lastIndexOf(z,0),G===0){let V=Q.slice(z.length).replace(/\//g,".");if(V)V+=":";return V+=w,V}return w},kJ=EJ==="\\";var nW=function(){return!!process.send&&!!process.env.SENTRY_ANR_CHILD_PROCESS};var s=a1(process.versions.node);import*as eZ from"domain";var tW=function(){return eZ.active},IJ=function(){const Y=tW();if(!Y)return;return W$(Y),X0(Y)},fJ=function(Y){const $={};return W$($,Y),X0($)},CJ=function(Y,$){const Z=tW();if(Z&&L([$,"optionalAccess",(J)=>J.reuseExisting]))return Y();const X=eZ.create(),Q=Z?X0(Z):void 0,W=fJ(Q);return J$(X,W),X.bind(()=>{return Y()})()},eW=function(){b$({getCurrentHub:IJ,runWithAsyncContext:CJ})};import*as Y8 from"async_hooks";var $8=function(){if(!Y1)Y1=new Y8.AsyncLocalStorage;function Y(){return Y1.getStore()}function $(X){const Q={};return W$(Q,X),X0(Q)}function Z(X,Q){const W=Y();if(W&&L([Q,"optionalAccess",(K)=>K.reuseExisting]))return X();const J=$(W);return Y1.run(J,()=>{return X()})}b$({getCurrentHub:Y,runWithAsyncContext:Z})},Y1;var Z8=function(){if(s.major&&s.major>=14)$8();else eW()};import*as X8 from"util";class v0{constructor(){v0.prototype.__init.call(this)}static __initStatic(){this.id="Console"}__init(){this.name=v0.id}setupOnce(){p1(({args:Y,level:$})=>{const Z=D();if(!Z.getIntegration(v0))return;Z.addBreadcrumb({category:"console",level:ZX($),message:X8.format.apply(void 0,Y)},{input:[...Y],level:$})})}}v0.__initStatic();var R0=typeof __SENTRY_DEBUG__==="undefined"||__SENTRY_DEBUG__;import{URL as xX} from"url";var W8=function(Y){const{protocol:$,hostname:Z,port:X}=K8(Y),Q=Y.path?Y.path:"/";return`${$}//${Z}${X}${Q}`},bX=function(Y){const{protocol:$,hostname:Z,port:X}=K8(Y),Q=Y.pathname||"/",W=Y.auth?_J(Y.auth):"";return`${$}//${W}${Z}${X}${Q}`},_J=function(Y){const[$,Z]=Y.split(":");return`${$?"[Filtered]":""}:${Z?"[Filtered]":""}@`},hX=function(Y,$,Z){if(!Y)return Y;let[X,Q]=Y.split(" ");if($.host&&!$.protocol)$.protocol=L([Z,"optionalAccess",(W)=>W.agent,"optionalAccess",(W)=>W.protocol]),Q=bX($);if(L([Q,"optionalAccess",(W)=>W.startsWith,"call",(W)=>W("///")]))Q=Q.slice(2);return`${X} ${Q}`},Q8=function(Y){const $={protocol:Y.protocol,hostname:typeof Y.hostname==="string"&&Y.hostname.startsWith("[")?Y.hostname.slice(1,-1):Y.hostname,hash:Y.hash,search:Y.search,pathname:Y.pathname,path:`${Y.pathname||""}${Y.search||""}`,href:Y.href};if(Y.port!=="")$.port=Number(Y.port);if(Y.username||Y.password)$.auth=`${Y.username}:${Y.password}`;return $},J8=function(Y,$){let Z,X;if(typeof $[$.length-1]==="function")Z=$.pop();if(typeof $[0]==="string")X=Q8(new xX($[0]));else if($[0]instanceof xX)X=Q8($[0]);else{X=$[0];try{const Q=new xX(X.path||"",`${X.protocol||"http:"}//${X.hostname}`);X={pathname:Q.pathname,search:Q.search,hash:Q.hash,...X}}catch(Q){}}if($.length===2)X={...X,...$[1]};if(X.protocol===void 0)if(s.major&&s.major>8)X.protocol=L([L([Y,"optionalAccess",(Q)=>Q.globalAgent]),"optionalAccess",(Q)=>Q.protocol])||L([X.agent,"optionalAccess",(Q)=>Q.protocol])||L([X._defaultAgent,"optionalAccess",(Q)=>Q.protocol]);else X.protocol=L([X.agent,"optionalAccess",(Q)=>Q.protocol])||L([X._defaultAgent,"optionalAccess",(Q)=>Q.protocol])||L([L([Y,"optionalAccess",(Q)=>Q.globalAgent]),"optionalAccess",(Q)=>Q.protocol]);if(Z)return[X,Z];else return[X]},K8=function(Y){const $=Y.protocol||"",Z=Y.hostname||Y.host||"",X=!Y.port||Y.port===80||Y.port===443||/^(.*):(\d+)$/.test(Z)?"":`:${Y.port}`;return{protocol:$,hostname:Z,port:X}};var z8=function(Y,$,Z,X){const Q=new $0(100),W=new $0(100),J=(w)=>{if(Z===void 0)return!0;const G=Q.get(w);if(G!==void 0)return G;const V=Z(w);return Q.set(w,V),V},K=(w)=>{if(X===void 0)return!0;const G=W.get(w);if(G!==void 0)return G;const V=H0(w,X);return W.set(w,V),V};function z(w,G,V,N){if(!D().getIntegration(g0))return;D().addBreadcrumb({category:"http",data:{status_code:N&&N.statusCode,...G},type:"http"},{event:w,request:V,response:N})}return function w(G){return function V(...N){const F=J8(Y,N),B=F[0],j=W8(B),R=bX(B);if(RY(R,D()))return G.apply(Y,F);const A=D(),S=A.getScope(),f=S.getSpan(),q=yJ(R,B),v=J(j)?L([f,"optionalAccess",(E)=>E.startChild,"call",(E)=>E({op:"http.client",origin:"auto.http.node.http",description:`${q["http.method"]} ${q.url}`,data:q})]):void 0;if(K(j))if(v){const E=v.toTraceparent(),r=L([v,"optionalAccess",(G0)=>G0.transaction,"optionalAccess",(G0)=>G0.getDynamicSamplingContext,"call",(G0)=>G0()]);V8(B,R,E,r)}else{const E=A.getClient(),{traceId:r,sampled:G0,dsc:X1}=S.getPropagationContext(),O8=HY(r,void 0,G0),A8=X1||(E?V0(r,E,S):void 0);V8(B,R,O8,A8)}else R0&&M.log(`[Tracing] Not adding sentry-trace header to outgoing request (${R}) due to mismatching tracePropagationTargets option.`);return G.apply(Y,F).once("response",function(E){const r=this;if($)z("response",q,r,E);if(v){if(E.statusCode)v.setHttpStatus(E.statusCode);v.description=hX(v.description,B,r),v.finish()}}).once("error",function(){const E=this;if($)z("error",q,E);if(v)v.setHttpStatus(500),v.description=hX(v.description,B,E),v.finish()})}}},V8=function(Y,$,Z,X){if((Y.headers||{})["sentry-trace"])return;R0&&M.log(`[Tracing] Adding sentry-trace header ${Z} to outgoing request to "${$}": `);const W=$$(X),J=W&&W.length>0?xJ(Y,W):void 0;Y.headers={...Y.headers,"sentry-trace":Z,...J&&{baggage:J}}},yJ=function(Y,$){const Z=$.method||"GET",X={url:Y,"http.method":Z};if($.hash)X["http.fragment"]=$.hash.substring(1);if($.search)X["http.query"]=$.search.substring(1);return X},xJ=function(Y,$){if(!Y.headers||!Y.headers.baggage)return $;else if(!$)return Y.headers.baggage;else if(Array.isArray(Y.headers.baggage))return[...Y.headers.baggage,$];return[Y.headers.baggage,$]};class g0{static __initStatic(){this.id="Http"}__init(){this.name=g0.id}constructor(Y={}){g0.prototype.__init.call(this),this._breadcrumbs=typeof Y.breadcrumbs==="undefined"?!0:Y.breadcrumbs,this._tracing=!Y.tracing?void 0:Y.tracing===!0?{}:Y.tracing}setupOnce(Y,$){if(!this._breadcrumbs&&!this._tracing)return;const Z=L([$,"call",(K)=>K(),"access",(K)=>K.getClient,"call",(K)=>K(),"optionalAccess",(K)=>K.getOptions,"call",(K)=>K()]);if(Z&&Z.instrumenter!=="sentry"){R0&&M.log("HTTP Integration is skipped because of instrumenter configuration.");return}const X=L([this,"access",(K)=>K._tracing,"optionalAccess",(K)=>K.shouldCreateSpanForRequest])||L([Z,"optionalAccess",(K)=>K.shouldCreateSpanForRequest]),Q=L([Z,"optionalAccess",(K)=>K.tracePropagationTargets])||L([this,"access",(K)=>K._tracing,"optionalAccess",(K)=>K.tracePropagationTargets]),W=import.meta.require("http"),J=z8(W,this._breadcrumbs,X,Q);if(C(W,"get",J),C(W,"request",J),s.major&&s.major>8){const K=import.meta.require("https"),z=z8(K,this._breadcrumbs,X,Q);C(K,"get",z),C(K,"request",z)}}}g0.__initStatic();var s$=function(Y){c(()=>{console.error(Y)});const $=x0();if($===void 0)R0&&M.warn("No NodeClient was defined, we are exiting the process now."),global.process.exit(1);const Z=$.getOptions(),X=Z&&Z.shutdownTimeout&&Z.shutdownTimeout>0&&Z.shutdownTimeout||bJ;$.close(X).then((Q)=>{if(!Q)R0&&M.warn("We reached the timeout for emptying the request buffer, still exiting now!");global.process.exit(1)},(Q)=>{R0&&M.error(Q)})},bJ=2000;class S0{static __initStatic(){this.id="OnUncaughtException"}__init(){this.name=S0.id}__init2(){this.handler=this._makeErrorHandler()}constructor(Y={}){S0.prototype.__init.call(this),S0.prototype.__init2.call(this),this._options={exitEvenIfOtherHandlersAreRegistered:!0,...Y}}setupOnce(){global.process.on("uncaughtException",this.handler)}_makeErrorHandler(){let $=!1,Z=!1,X=!1,Q;return(W)=>{let J=s$;const K=x0();if(this._options.onFatalError)J=this._options.onFatalError;else if(K&&K.getOptions().onFatalError)J=K.getOptions().onFatalError;const w=global.process.listeners("uncaughtException").reduce((V,N)=>{if(N.name==="domainUncaughtExceptionClear"||N.tag&&N.tag==="sentry_tracingErrorCallback"||N===this.handler)return V;else return V+1},0)===0,G=this._options.exitEvenIfOtherHandlersAreRegistered||w;if(!$){const V=D();if(Q=W,$=!0,V.getIntegration(S0))V.withScope((N)=>{if(N.setLevel("fatal"),V.captureException(W,{originalException:W,data:{mechanism:{handled:!1,type:"onuncaughtexception"}}}),!X&&G)X=!0,J(W)});else if(!X&&G)X=!0,J(W)}else if(G){if(X)R0&&M.warn("uncaught exception after calling fatal error shutdown callback - this is bad! forcing shutdown"),s$(W);else if(!Z)Z=!0,setTimeout(()=>{if(!X)X=!0,J(Q,W)},2000)}}}}S0.__initStatic();class m0{static __initStatic(){this.id="OnUnhandledRejection"}__init(){this.name=m0.id}constructor(Y={mode:"warn"}){this._options=Y,m0.prototype.__init.call(this)}setupOnce(){global.process.on("unhandledRejection",this.sendUnhandledPromise.bind(this))}sendUnhandledPromise(Y,$){const Z=D();if(Z.getIntegration(m0))Z.withScope((X)=>{X.setExtra("unhandledPromiseRejection",!0),Z.captureException(Y,{originalException:$,data:{mechanism:{handled:!1,type:"onunhandledrejection"}}})});this._handleRejection(Y)}_handleRejection(Y){const $="This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). The promise rejected with the reason:";if(this._options.mode==="warn")c(()=>{console.warn($),console.error(Y&&Y.stack?Y.stack:Y)});else if(this._options.mode==="strict")c(()=>{console.warn($)}),s$(Y)}}m0.__initStatic();import{existsSync as hJ,readFileSync as vJ} from"fs";import{dirname as gJ,join as mJ} from"path";var dJ=function(){try{return require.cache?Object.keys(require.cache):[]}catch(Y){return[]}},uJ=function(){const Y=require.main&&require.main.paths||[],$=dJ(),Z={},X={};return $.forEach((Q)=>{let W=Q;const J=()=>{const K=W;if(W=gJ(K),!W||K===W||X[K])return;if(Y.indexOf(W)<0)return J();const z=mJ(K,"package.json");if(X[K]=!0,!hJ(z))return J();try{const w=JSON.parse(vJ(z,"utf8"));Z[w.name]=w.version}catch(w){}};J()}),Z},vX;class d0{constructor(){d0.prototype.__init.call(this)}static __initStatic(){this.id="Modules"}__init(){this.name=d0.id}setupOnce(Y,$){Y((Z)=>{if(!$().getIntegration(d0))return Z;return{...Z,modules:{...Z.modules,...this._getModules()}}})}_getModules(){if(!vX)vX=uJ();return vX}}d0.__initStatic();import{readFile as cJ} from"fs";var pJ=function(Y){return new Promise(($,Z)=>{cJ(Y,"utf8",(X,Q)=>{if(X)Z(X);else $(Q)})})};async function iJ(Y){const $=$1.get(Y);if($===null)return null;if($!==void 0)return $;let Z=null;try{Z=(await pJ(Y)).split("\n")}catch(X){}return $1.set(Y,Z),Z}var $1=new $0(100),lJ=7;class u0{static __initStatic(){this.id="ContextLines"}__init(){this.name=u0.id}constructor(Y={}){this._options=Y,u0.prototype.__init.call(this)}get _contextLines(){return this._options.frameContextLines!==void 0?this._options.frameContextLines:lJ}setupOnce(Y,$){Y((Z)=>{if(!$().getIntegration(u0))return Z;return this.addSourceContext(Z)})}async addSourceContext(Y){const $={},Z=[];if(this._contextLines>0&&L([Y,"access",(X)=>X.exception,"optionalAccess",(X)=>X.values]))for(let X of Y.exception.values){if(!L([X,"access",(Q)=>Q.stacktrace,"optionalAccess",(Q)=>Q.frames]))continue;for(let Q=X.stacktrace.frames.length-1;Q>=0;Q--){const W=X.stacktrace.frames[Q];if(W.filename&&!$[W.filename]&&!$1.get(W.filename))Z.push(iJ(W.filename)),$[W.filename]=1}}if(Z.length>0)await Promise.all(Z);if(this._contextLines>0&&L([Y,"access",(X)=>X.exception,"optionalAccess",(X)=>X.values])){for(let X of Y.exception.values)if(X.stacktrace&&X.stacktrace.frames)await this.addSourceContextToFrames(X.stacktrace.frames)}return Y}addSourceContextToFrames(Y){for(let $ of Y)if($.filename&&$.context_line===void 0){const Z=$1.get($.filename);if(Z)try{s1(Z,$,this._contextLines)}catch(X){}}}}u0.__initStatic();import{execFile as aJ} from"child_process";import{readFile as sJ,readdir as rJ} from"fs";import*as h from"os";import{join as oJ} from"path";import{promisify as w8} from"util";async function eJ(){const Y=h.platform();switch(Y){case"darwin":return JK();case"linux":return KK();default:return{name:XK[Y]||Y,version:h.release()}}}var YK=function(){try{if(typeof process.versions.icu!=="string")return;const Y=new Date(900000000);if(new Intl.DateTimeFormat("es",{month:"long"}).format(Y)==="enero"){const Z=Intl.DateTimeFormat().resolvedOptions();return{locale:Z.locale,timezone:Z.timeZone}}}catch(Y){}return},$K=function(){const Y=process.memoryUsage().rss;return{app_start_time:new Date(Date.now()-process.uptime()*1000).toISOString(),app_memory:Y}},ZK=function(Y){const $={};let Z;try{Z=h.uptime&&h.uptime()}catch(X){}if(typeof Z==="number")$.boot_time=new Date(Date.now()-Z*1000).toISOString();if($.arch=h.arch(),Y===!0||Y.memory)$.memory_size=h.totalmem(),$.free_memory=h.freemem();if(Y===!0||Y.cpu){const X=h.cpus();if(X&&X.length){const Q=X[0];$.processor_count=X.length,$.cpu_description=Q.model,$.processor_frequency=Q.speed}}return $},D0=function(Y,$){const Z=Y.exec($);return Z?Z[1]:void 0};async function JK(){const Y={kernel_version:h.release(),name:"Mac OS X",version:`10.${Number(h.release().split(".")[0])-4}`};try{const $=await new Promise((Z,X)=>{aJ("/usr/bin/sw_vers",(Q,W)=>{if(Q){X(Q);return}Z(W)})});Y.name=D0(/^ProductName:\s+(.*)$/m,$),Y.version=D0(/^ProductVersion:\s+(.*)$/m,$),Y.build=D0(/^BuildVersion:\s+(.*)$/m,$)}catch($){}return Y}var G8=function(Y){return Y.split(" ")[0].toLowerCase()};async function KK(){const Y={kernel_version:h.release(),name:"Linux"};try{const $=await tJ("/etc"),Z=QK.find((K)=>$.includes(K.name));if(!Z)return Y;const X=oJ("/etc",Z.name),Q=(await nJ(X,{encoding:"utf-8"})).toLowerCase(),{distros:W}=Z;Y.name=W.find((K)=>Q.indexOf(G8(K))>=0)||W[0];const J=G8(Y.name);Y.version=WK[J](Q)}catch($){}return Y}var zK=function(){if(process.env.VERCEL)return{"cloud.provider":"vercel","cloud.region":process.env.VERCEL_REGION};else if(process.env.AWS_REGION)return{"cloud.provider":"aws","cloud.region":process.env.AWS_REGION,"cloud.platform":process.env.AWS_EXECUTION_ENV};else if(process.env.GCP_PROJECT)return{"cloud.provider":"gcp"};else if(process.env.ALIYUN_REGION_ID)return{"cloud.provider":"alibaba_cloud","cloud.region":process.env.ALIYUN_REGION_ID};else if(process.env.WEBSITE_SITE_NAME&&process.env.REGION_NAME)return{"cloud.provider":"azure","cloud.region":process.env.REGION_NAME};else if(process.env.IBM_CLOUD_REGION)return{"cloud.provider":"ibm_cloud","cloud.region":process.env.IBM_CLOUD_REGION};else if(process.env.TENCENTCLOUD_REGION)return{"cloud.provider":"tencent_cloud","cloud.region":process.env.TENCENTCLOUD_REGION,"cloud.account.id":process.env.TENCENTCLOUD_APPID,"cloud.availability_zone":process.env.TENCENTCLOUD_ZONE};else if(process.env.NETLIFY)return{"cloud.provider":"netlify"};else if(process.env.FLY_REGION)return{"cloud.provider":"fly.io","cloud.region":process.env.FLY_REGION};else if(process.env.DYNO)return{"cloud.provider":"heroku"};else return},nJ=w8(sJ),tJ=w8(rJ);class TY{static __initStatic(){this.id="Context"}__init(){this.name=TY.id}constructor(Y={app:!0,os:!0,device:!0,culture:!0,cloudResource:!0}){this._options=Y,TY.prototype.__init.call(this)}setupOnce(Y){Y(($)=>this.addContext($))}async addContext(Y){if(this._cachedContext===void 0)this._cachedContext=this._getContexts();const $=this._updateContext(await this._cachedContext);return Y.contexts={...Y.contexts,app:{...$.app,...L([Y,"access",(Z)=>Z.contexts,"optionalAccess",(Z)=>Z.app])},os:{...$.os,...L([Y,"access",(Z)=>Z.contexts,"optionalAccess",(Z)=>Z.os])},device:{...$.device,...L([Y,"access",(Z)=>Z.contexts,"optionalAccess",(Z)=>Z.device])},culture:{...$.culture,...L([Y,"access",(Z)=>Z.contexts,"optionalAccess",(Z)=>Z.culture])},cloud_resource:{...$.cloud_resource,...L([Y,"access",(Z)=>Z.contexts,"optionalAccess",(Z)=>Z.cloud_resource])}},Y}_updateContext(Y){if(L([Y,"optionalAccess",($)=>$.app,"optionalAccess",($)=>$.app_memory]))Y.app.app_memory=process.memoryUsage().rss;if(L([Y,"optionalAccess",($)=>$.device,"optionalAccess",($)=>$.free_memory]))Y.device.free_memory=h.freemem();return Y}async _getContexts(){const Y={};if(this._options.os)Y.os=await eJ();if(this._options.app)Y.app=$K();if(this._options.device)Y.device=ZK(this._options.device);if(this._options.culture){const $=YK();if($)Y.culture=$}if(this._options.cloudResource)Y.cloud_resource=zK();return Y}}TY.__initStatic();var XK={aix:"IBM AIX",freebsd:"FreeBSD",openbsd:"OpenBSD",sunos:"SunOS",win32:"Windows"},QK=[{name:"fedora-release",distros:["Fedora"]},{name:"redhat-release",distros:["Red Hat Linux","Centos"]},{name:"redhat_version",distros:["Red Hat Linux"]},{name:"SuSE-release",distros:["SUSE Linux"]},{name:"lsb-release",distros:["Ubuntu Linux","Arch Linux"]},{name:"debian_version",distros:["Debian"]},{name:"debian_release",distros:["Debian"]},{name:"arch-release",distros:["Arch Linux"]},{name:"gentoo-release",distros:["Gentoo Linux"]},{name:"novell-release",distros:["SUSE Linux"]},{name:"alpine-release",distros:["Alpine Linux"]}],WK={alpine:(Y)=>Y,arch:(Y)=>D0(/distrib_release=(.*)/,Y),centos:(Y)=>D0(/release ([^ ]+)/,Y),debian:(Y)=>Y,fedora:(Y)=>D0(/release (..)/,Y),mint:(Y)=>D0(/distrib_release=(.*)/,Y),red:(Y)=>D0(/release ([^ ]+)/,Y),suse:(Y)=>D0(/VERSION = (.*)\n/,Y),ubuntu:(Y)=>D0(/distrib_release=(.*)/,Y)};var VK=function(Y,$,Z){let X=0,Q=5,W=0;return setInterval(()=>{if(W===0){if(X>Y){if(Q*=2,Z(Q),Q>86400)Q=86400;W=Q}}else if(W-=1,W===0)$();X=0},1000).unref(),()=>{X+=1}},M8=function(Y){let $=[],Z=!1;function X(J){if($=[],Z)return;Z=!0,Y(J)}$.push(X);function Q(J){$.push(J)}function W(J){const K=$.pop()||X;try{K(J)}catch(z){X(J)}}return{add:Q,next:W}},GK=function(){try{return new L8}catch(Y){return}},N8=function(Y){return Y!==void 0&&["","?","<anonymous>"].includes(Y)},wK=function(Y,$){return Y===$||N8(Y)&&N8($)},F8=function(Y){if(Y===void 0)return;return Y.slice(-10).reduce(($,Z)=>`${$},${Z.function},${Z.lineno},${Z.colno}`,"")},NK=function(Y,$){if($===void 0)return;return F8(Y($,1))};class L8{constructor(){const{Session:Y}=import.meta.require("inspector");this._session=new Y}configureAndConnect(Y,$){this._session.connect(),this._session.on("Debugger.paused",(Z)=>{Y(Z,()=>{this._session.post("Debugger.resume")})}),this._session.post("Debugger.enable"),this._session.post("Debugger.setPauseOnExceptions",{state:$?"all":"uncaught"})}setPauseOnExceptions(Y){this._session.post("Debugger.setPauseOnExceptions",{state:Y?"all":"uncaught"})}getLocalVariables(Y,$){this._getProperties(Y,(Z)=>{const{add:X,next:Q}=M8($);for(let W of Z)if(L([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.objectId])&&L([W,"optionalAccess",(J)=>J.value,"access",(J)=>J.className])==="Array"){const J=W.value.objectId;X((K)=>this._unrollArray(J,W.name,K,Q))}else if(L([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.objectId])&&L([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.className])==="Object"){const J=W.value.objectId;X((K)=>this._unrollObject(J,W.name,K,Q))}else if(L([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.value])||L([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.description]))X((J)=>this._unrollOther(W,J,Q));Q({})})}_getProperties(Y,$){this._session.post("Runtime.getProperties",{objectId:Y,ownProperties:!0},(Z,X)=>{if(Z)$([]);else $(X.result)})}_unrollArray(Y,$,Z,X){this._getProperties(Y,(Q)=>{Z[$]=Q.filter((W)=>W.name!=="length"&&!isNaN(parseInt(W.name,10))).sort((W,J)=>parseInt(W.name,10)-parseInt(J.name,10)).map((W)=>L([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.value])),X(Z)})}_unrollObject(Y,$,Z,X){this._getProperties(Y,(Q)=>{Z[$]=Q.map((W)=>[W.name,L([W,"optionalAccess",(J)=>J.value,"optionalAccess",(J)=>J.value])]).reduce((W,[J,K])=>{return W[J]=K,W},{}),X(Z)})}_unrollOther(Y,$,Z){if(L([Y,"optionalAccess",(X)=>X.value,"optionalAccess",(X)=>X.value]))$[Y.name]=Y.value.value;else if(L([Y,"optionalAccess",(X)=>X.value,"optionalAccess",(X)=>X.description])&&L([Y,"optionalAccess",(X)=>X.value,"optionalAccess",(X)=>X.type])!=="function")$[Y.name]=`<${Y.value.description}>`;Z($)}}class c0{static __initStatic(){this.id="LocalVariables"}__init(){this.name=c0.id}__init2(){this._cachedFrames=new $0(20)}constructor(Y={},$=GK()){this._options=Y,this._session=$,c0.prototype.__init.call(this),c0.prototype.__init2.call(this)}setupOnce(Y,$){this._setup(Y,L([$,"call",(Z)=>Z(),"access",(Z)=>Z.getClient,"call",(Z)=>Z(),"optionalAccess",(Z)=>Z.getOptions,"call",(Z)=>Z()]))}_setup(Y,$){if(this._session&&L([$,"optionalAccess",(Z)=>Z.includeLocalVariables])){if((s.major||0)<18){M.log("The `LocalVariables` integration is only supported on Node >= v18.");return}const X=this._options.captureAllExceptions!==!1;if(this._session.configureAndConnect((Q,W)=>this._handlePaused($.stackParser,Q,W),X),X){const Q=this._options.maxExceptionsPerSecond||50;this._rateLimiter=VK(Q,()=>{M.log("Local variables rate-limit lifted."),L([this,"access",(W)=>W._session,"optionalAccess",(W)=>W.setPauseOnExceptions,"call",(W)=>W(!0)])},(W)=>{M.log(`Local variables rate-limit exceeded. Disabling capturing of caught exceptions for ${W} seconds.`),L([this,"access",(J)=>J._session,"optionalAccess",(J)=>J.setPauseOnExceptions,"call",(J)=>J(!1)])})}Y(async(Q)=>this._addLocalVariables(Q))}}_handlePaused(Y,{params:{reason:$,data:Z,callFrames:X}},Q){if($!=="exception"&&$!=="promiseRejection"){Q();return}L([this,"access",(z)=>z._rateLimiter,"optionalCall",(z)=>z()]);const W=NK(Y,L([Z,"optionalAccess",(z)=>z.description]));if(W==void 0){Q();return}const{add:J,next:K}=M8((z)=>{this._cachedFrames.set(W,z),Q()});for(let z=0;z<Math.min(X.length,5);z++){const{scopeChain:w,functionName:G,this:V}=X[z],N=w.find((B)=>B.type==="local"),F=V.className==="global"||!V.className?G:`${V.className}.${G}`;if(L([N,"optionalAccess",(B)=>B.object,"access",(B)=>B.objectId])===void 0)J((B)=>{B[z]={function:F},K(B)});else{const B=N.object.objectId;J((j)=>L([this,"access",(R)=>R._session,"optionalAccess",(R)=>R.getLocalVariables,"call",(R)=>R(B,(A)=>{j[z]={function:F,vars:A},K(j)})]))}}K([])}_addLocalVariables(Y){for(let $ of L([Y,"optionalAccess",(Z)=>Z.exception,"optionalAccess",(Z)=>Z.values])||[])this._addLocalVariablesToException($);return Y}_addLocalVariablesToException(Y){const $=F8(L([Y,"optionalAccess",(Q)=>Q.stacktrace,"optionalAccess",(Q)=>Q.frames]));if($===void 0)return;const Z=this._cachedFrames.remove($);if(Z===void 0)return;const X=L([Y,"access",(Q)=>Q.stacktrace,"optionalAccess",(Q)=>Q.frames,"optionalAccess",(Q)=>Q.length])||0;for(let Q=0;Q<X;Q++){const W=X-Q-1;if(!L([Y,"optionalAccess",(J)=>J.stacktrace,"optionalAccess",(J)=>J.frames,"optionalAccess",(J)=>J[W]])||!Z[Q])break;if(Z[Q].vars===void 0||Y.stacktrace.frames[W].in_app===!1||!wK(Y.stacktrace.frames[W].function,Z[Q].function))continue;Y.stacktrace.frames[W].vars=Z[Q].vars}}}c0.__initStatic();var B8=function(Y,$,Z){if(Y.headers.split("\r\n").some((W)=>W.startsWith("sentry-trace:")))return;if(Y.addHeader("sentry-trace",$),Z)Y.addHeader("baggage",Z)},MK=function(Y,$,Z){const X=S$(Z),Q=$.method||"GET",W={"http.method":Q};if(X.search)W["http.query"]=X.search;if(X.hash)W["http.fragment"]=X.hash;return L([Y,"optionalAccess",(J)=>J.startChild,"call",(J)=>J({op:"http.client",origin:"auto.http.node.undici",description:`${Q} ${I$(X)}`,data:W})])},r$;(function(Y){Y.RequestCreate="undici:request:create";const Z="undici:request:headers";Y.RequestEnd=Z;const X="undici:request:error";Y.RequestError=X})(r$||(r$={}));class p{static __initStatic(){this.id="Undici"}__init(){this.name=p.id}__init2(){this._createSpanUrlMap=new $0(100)}__init3(){this._headersUrlMap=new $0(100)}constructor(Y={}){p.prototype.__init.call(this),p.prototype.__init2.call(this),p.prototype.__init3.call(this),p.prototype.__init4.call(this),p.prototype.__init5.call(this),p.prototype.__init6.call(this),this._options={breadcrumbs:Y.breadcrumbs===void 0?!0:Y.breadcrumbs,shouldCreateSpanForRequest:Y.shouldCreateSpanForRequest}}setupOnce(Y){if(s.major&&s.major<16)return;let $;try{$=_0(LK,"diagnostics_channel")}catch(Z){}if(!$||!$.subscribe)return;$.subscribe(r$.RequestCreate,this._onRequestCreate),$.subscribe(r$.RequestEnd,this._onRequestEnd),$.subscribe(r$.RequestError,this._onRequestError)}_shouldCreateSpan(Y){if(this._options.shouldCreateSpanForRequest===void 0)return!0;const $=this._createSpanUrlMap.get(Y);if($!==void 0)return $;const Z=this._options.shouldCreateSpanForRequest(Y);return this._createSpanUrlMap.set(Y,Z),Z}__init4(){this._onRequestCreate=(Y)=>{const $=D();if(!$.getIntegration(p))return;const{request:Z}=Y,X=Z.origin?Z.origin.toString()+Z.path:Z.path;if(RY(X,$)||Z.__sentry_span__!==void 0)return;const Q=$.getClient();if(!Q)return;const W=Q.getOptions(),J=$.getScope(),K=J.getSpan(),z=this._shouldCreateSpan(X)?MK(K,Z,X):void 0;if(z)Z.__sentry_span__=z;if(((G)=>{if(W.tracePropagationTargets===void 0)return!0;const V=this._headersUrlMap.get(G);if(V!==void 0)return V;const N=H0(G,W.tracePropagationTargets);return this._headersUrlMap.set(G,N),N})(X))if(z){const G=L([z,"optionalAccess",(N)=>N.transaction,"optionalAccess",(N)=>N.getDynamicSamplingContext,"call",(N)=>N()]),V=$$(G);B8(Z,z.toTraceparent(),V)}else{const{traceId:G,sampled:V,dsc:N}=J.getPropagationContext(),F=HY(G,void 0,V),B=N||V0(G,Q,J),j=$$(B);B8(Z,F,j)}}}__init5(){this._onRequestEnd=(Y)=>{const $=D();if(!$.getIntegration(p))return;const{request:Z,response:X}=Y,Q=Z.origin?Z.origin.toString()+Z.path:Z.path;if(RY(Q,$))return;const W=Z.__sentry_span__;if(W)W.setHttpStatus(X.statusCode),W.finish();if(this._options.breadcrumbs)$.addBreadcrumb({category:"http",data:{method:Z.method,status_code:X.statusCode,url:Q},type:"http"},{event:"response",request:Z,response:X})}}__init6(){this._onRequestError=(Y)=>{const $=D();if(!$.getIntegration(p))return;const{request:Z}=Y,X=Z.origin?Z.origin.toString()+Z.path:Z.path;if(RY(X,$))return;const Q=Z.__sentry_span__;if(Q)Q.setStatus("internal_error"),Q.finish();if(this._options.breadcrumbs)$.addBreadcrumb({category:"http",data:{method:Z.method,url:X},level:"error",type:"http"},{event:"error",request:Z})}}}p.__initStatic();import*as j8 from"http";import{URL as FK} from"url";var BK=function(Y,$){const Z=jK($.sidecarUrl);if(!Z)return;let X=0;if(typeof Y.on!=="function"){M.warn("[Spotlight] Cannot connect to spotlight due to missing method on SDK client (`client.on`)");return}Y.on("beforeEnvelope",(Q)=>{if(X>3){M.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests");return}const W=_$(Q),J=j8.request({method:"POST",path:Z.pathname,hostname:Z.hostname,port:Z.port,headers:{"Content-Type":"application/x-sentry-envelope"}},(K)=>{K.on("data",()=>{}),K.on("end",()=>{}),K.setEncoding("utf8")});J.on("error",()=>{X++,M.warn("[Spotlight] Failed to send envelope to Spotlight Sidecar")}),J.write(W),J.end()})},jK=function(Y){try{return new FK(`${Y}`)}catch($){M.warn(`[Spotlight] Invalid sidecar URL: ${Y}`);return}};class OY{static __initStatic(){this.id="Spotlight"}__init(){this.name=OY.id}constructor(Y){OY.prototype.__init.call(this),this._options={sidecarUrl:L([Y,"optionalAccess",($)=>$.sidecarUrl])||"http://localhost:8969/stream"}}setupOnce(){}setup(Y){BK(Y,this._options)}}OY.__initStatic();var gX=function(Y={}){if(nW())Y.autoSessionTracking=!1,Y.tracesSampleRate=0;const $=z0();Z8();const Z=L([$,"access",(W)=>W.__SENTRY__,"optionalAccess",(W)=>W.integrations])||[];if(Y.defaultIntegrations=Y.defaultIntegrations===!1?[]:[...Array.isArray(Y.defaultIntegrations)?Y.defaultIntegrations:H8,...Z],Y.dsn===void 0&&process.env.SENTRY_DSN)Y.dsn=process.env.SENTRY_DSN;const X=process.env.SENTRY_TRACES_SAMPLE_RATE;if(Y.tracesSampleRate===void 0&&X){const W=parseFloat(X);if(isFinite(W))Y.tracesSampleRate=W}if(Y.release===void 0){const W=U8();if(W!==void 0)Y.release=W;else Y.autoSessionTracking=!1}if(Y.environment===void 0&&process.env.SENTRY_ENVIRONMENT)Y.environment=process.env.SENTRY_ENVIRONMENT;if(Y.autoSessionTracking===void 0&&Y.dsn!==void 0)Y.autoSessionTracking=!0;if(Y.instrumenter===void 0)Y.instrumenter="sentry";const Q={...Y,stackParser:c1(Y.stackParser||R8),integrations:PX(Y),transport:Y.transport||rW};if(AX(Y.clientClass||EX,Q),Y.autoSessionTracking)HK();if(UK(),Y.spotlight){const W=D().getClient();if(W&&W.addIntegration)W.setupIntegrations(!0),W.addIntegration(new OY({sidecarUrl:typeof Y.spotlight==="string"?Y.spotlight:void 0}))}};var U8=function(Y){if(process.env.SENTRY_RELEASE)return process.env.SENTRY_RELEASE;if(O.SENTRY_RELEASE&&O.SENTRY_RELEASE.id)return O.SENTRY_RELEASE.id;return process.env.GITHUB_SHA||process.env.COMMIT_REF||process.env.VERCEL_GIT_COMMIT_SHA||process.env.VERCEL_GITHUB_COMMIT_SHA||process.env.VERCEL_GITLAB_COMMIT_SHA||process.env.VERCEL_BITBUCKET_COMMIT_SHA||process.env.ZEIT_GITHUB_COMMIT_SHA||process.env.ZEIT_GITLAB_COMMIT_SHA||process.env.ZEIT_BITBUCKET_COMMIT_SHA||Y},HK=function(){const Y=D();Y.startSession(),process.on("beforeExit",()=>{const $=Y.getScope().getSession();if($&&!["exited","crashed"].includes($.status))Y.endSession()})},UK=function(){const Y=(process.env.SENTRY_USE_ENVIRONMENT||"").toLowerCase();if(!["false","n","no","off","0"].includes(Y)){const $=process.env.SENTRY_TRACE,Z=process.env.SENTRY_BAGGAGE,{propagationContext:X}=C$($,Z);D().getScope().setPropagationContext(X)}},H8=[new i.InboundFilters,new i.FunctionToString,new i.LinkedErrors,new v0,new g0,new p,new S0,new m0,new u0,new c0,new TY,new d0,new h0],R8=OZ(l1(oW));var mX={};o$(mX,{Undici:()=>{{return p}},Spotlight:()=>{{return OY}},RequestData:()=>{{return h0}},OnUnhandledRejection:()=>{{return m0}},OnUncaughtException:()=>{{return S0}},Modules:()=>{{return d0}},LocalVariables:()=>{{return c0}},Http:()=>{{return g0}},ContextLines:()=>{{return u0}},Context:()=>{{return TY}},Console:()=>{{return v0}}});var dX={};o$(dX,{Prisma:()=>{{return d$}},Postgres:()=>{{return v$}},Mysql:()=>{{return g$}},Mongo:()=>{{return m$}},GraphQL:()=>{{return u$}},Express:()=>{{return h$}},Apollo:()=>{{return c$}}});var P0={...i,...mX,...dX};import*as D8 from"os";class uX extends z${constructor(Y){Y._metadata=Y._metadata||{},Y._metadata.sdk=Y._metadata.sdk||{name:"sentry.javascript.bun",packages:[{name:"npm:@sentry/bun",version:b0}],version:b0};const $={...Y,platform:"javascript",runtime:{name:"bun",version:Bun.version},serverName:Y.serverName||global.process.env.SENTRY_NAME||D8.hostname()};super($)}}var RK=function(){Bun.serve=new Proxy(Bun.serve,{apply(Y,$,Z){return DK(Z[0]),Y.apply($,Z)}})},DK=function(Y){Y.fetch=new Proxy(Y.fetch,{apply($,Z,X){return bZ(()=>{const Q=X[0],W=Q.method.toUpperCase();if(W==="OPTIONS"||W==="HEAD")return $.apply(Z,X);const J=S$(Q.url),K={"http.request.method":Q.method||"GET"};if(J.search)K["http.query"]=J.search;const z=I$(J);return dZ({sentryTrace:Q.headers.get("sentry-trace")||"",baggage:Q.headers.get("baggage")},(w)=>{return mZ({op:"http.server",name:`${Q.method} ${J.path||"/"}`,origin:"auto.http.bun.serve",...w,data:K,metadata:{...w.metadata,source:"url",request:{url:z,method:Q.method,headers:Q.headers.toJSON()}}},async(G)=>{try{const V=await $.apply(Z,X);if(V&&V.status){if(L([G,"optionalAccess",(N)=>N.setHttpStatus,"call",(N)=>N(V.status)]),L([G,"optionalAccess",(N)=>N.setData,"call",(N)=>N("http.response.status_code",V.status)]),G instanceof K$)G.setContext("response",{headers:V.headers.toJSON(),status_code:V.status})}return V}catch(V){throw k0(V,{mechanism:{type:"bun",handled:!1,data:{function:"serve"}}}),V}})})})}})};class AY{constructor(){AY.prototype.__init.call(this)}static __initStatic(){this.id="BunServer"}__init(){this.name=AY.id}setupOnce(){RK()}}AY.__initStatic();var P8=function(Y){function $(Z){const X={body:Z.body,method:"POST",headers:Y.headers};try{return fetch(Y.url,X).then((Q)=>{return{statusCode:Q.status,headers:{"x-sentry-rate-limits":Q.headers.get("X-Sentry-Rate-Limits"),"retry-after":Q.headers.get("Retry-After")}}})}catch(Q){return MY(Q)}}return UY(Y,$)};var PK=function(Y={}){Y.clientClass=uX,Y.transport=Y.transport||P8,Y.defaultIntegrations=Y.defaultIntegrations===!1?[]:[...Array.isArray(Y.defaultIntegrations)?Y.defaultIntegrations:T8],gX(Y)},T8=[new i.InboundFilters,new i.FunctionToString,new i.LinkedErrors,new P0.Console,new P0.Http,new P0.Undici,new P0.ContextLines,new P0.Context,new P0.Modules,new P0.RequestData,new AY];var cX={};o$(cX,{BunServer:()=>{{return AY}}});var sM={...i,...P0,...cX};var OK=function(Y){return"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"};async function AK(Y,$){try{return await Z1.beta.threads.runs.create(Y,{assistant_id:$,instructions:"You're Emma, bilingual English Coach at E4CC. Always keep responses really short, focus on teaching English to Spanish speakers. Stay friendly and encouraging, avoid off-topic discussions."})}catch(Z){throw k0(Z),new Q0(500,`Error in run_assistant: ${Z}`)}}async function qK(Y,$){try{return(await Z1.beta.threads.runs.retrieve(Y,$)).status}catch(Z){throw k0(Z),new Q0(500,`Error getting status: ${Z}`)}}async function EK(Y){try{const $=await Z1.beta.threads.messages.list(Y);if(!$.data||$.data.length===0)throw new Q0(404,"No messages found in the thread");const Z=$.data.find((Q)=>Q.role==="assistant");if(!Z)throw new Q0(404,"No assistant messages found in the thread");return Z.content.filter((Q)=>Q.type==="text").map((Q)=>{if(Q.type==="text")return Q.text.value;return""}).join("\n")}catch($){throw k0($),new Q0(500,`Error getting messages: ${$}`)}}class Q0 extends Error{status;message;constructor(Y,$){super($);this.status=Y,this.message=$,Object.setPrototypeOf(this,Q0.prototype)}}var Z1=new HQ({apiKey:"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"});async function kK(Y){try{const $=OK(Y),{text:Z,assistantId:X,threadId:Q}=Y.body;await Z1.beta.threads.messages.create(Q,{role:"user",content:Z});const J=(await AK(Q,X)).id;let K=0;const z=600;let w;while(K<z){if(w=await qK(Q,J),w==="completed")break;K++}if(K===z)throw new Q0(408,"Request timed out");return await EK(Q)}catch($){if($ instanceof Q0)throw $;else throw k0($),console.error("Unexpected error:",$),new Q0(500,"Internal Server Error")}}export{kK as default};

//# debugId=7A8549A3EED9337464756e2164756e21
